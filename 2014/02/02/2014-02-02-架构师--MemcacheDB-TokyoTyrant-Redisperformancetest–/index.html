
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MemcacheDB | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="MemcacheDB, Tokyo Tyrant, Redis performance test – Tim[后端技术]Tim[后端技术]
Tim&#39;s blog, 关于后端架构、互联网技术、分布式、大型网络应用、NoSQL、技术感悟等">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<meta property="og:title" content="MemcacheDB"/>
<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title">MemcacheDB</h1>
      
        <span>Posted on<time datetime="2014-02-02T09:54:28.000Z"> <a href="/2014/02/02/2014-02-02-架构师--MemcacheDB-TokyoTyrant-Redisperformancetest–/">feb. 2 2014</a></time></span>      
    </header>
    
    <section id='before_content_widget'></section>
    <div class="entry">
      
        <h1 id="memcachedb-tokyo-tyrant-redis-performance-test-tim-">MemcacheDB, Tokyo Tyrant, Redis performance test – Tim[后端技术]</h1>
<h1 id="-tim-http-timyang-net-home-"><a href="http://timyang.net/" title="Home" target="_blank">Tim[后端技术]</a></h1>
<p>Tim&#39;s blog, 关于后端架构、互联网技术、分布式、大型网络应用、NoSQL、技术感悟等</p>
<p><a href="http://timyang.net/" target="_blank">Home</a> | <a href="http://timyang.net/about/" target="_blank">About</a> | <a href="http://timyang.net/tag/English/" target="_blank">English version</a> | <a href="http://timyang.net/about/#comment" target="_blank">留言(Guestbook)</a> | <a href="http://timyang.net/feed/" target="_blank"><img src="" alt=""></a><a href="http://timyang.net/feed/" target="_blank">订阅RSS</a> <a href="http://fusion.google.com/add?source=atgs&amp;feedurl=http%3A//timyang.net/feed/" target="_blank"><img src="" alt="Add to Google"></a></p>
<ul>
<li></li>
<li><p>Email: <img src="" alt=""></p>
</li>
<li><h3 id="similar-posts">Similar Posts</h3>
</li>
<li><p><a href="http://timyang.net/programming/thrift-protocol-buffers-performance-2/" title="April 17, 2009" target="_blank">Thrift and Protocol Buffers performance in Java Round 2</a></p>
</li>
<li><a href="http://timyang.net/programming/thrift-protocol-buffers-performance-java/" title="April 2, 2009" target="_blank">Thrift and Protocol Buffers performance in Java</a></li>
<li><a href="http://timyang.net/programming/c-erlang-java-performance/" title="November 11, 2009" target="_blank">C, Erlang, Java and Go Web Server performance test</a></li>
<li><a href="http://timyang.net/architecture/friendfeed-like-aggregator/" title="April 3, 2009" target="_blank">Ideas for creating a friendfeed like feed aggregator system</a></li>
<li><p><a href="http://timyang.net/python/python-thread-socket-server/" title="March 8, 2009" target="_blank">Python thread socket server</a></p>
</li>
<li><h3 id="most-commented">Most Commented</h3>
</li>
<li><p><a href="http://timyang.net/data/mcdb-tt-redis/" title="MemcacheDB, Tokyo Tyrant, Redis performance test" target="_blank">MemcacheDB, Tokyo Tyrant, Redis performance test</a> (101)</p>
</li>
<li><a href="http://timyang.net/programming/c-erlang-java-performance/" title="C, Erlang, Java and Go Web Server performance test" target="_blank">C, Erlang, Java and Go Web Server performance test</a> (85)</li>
<li><a href="http://timyang.net/about/" title="About Tim Yang" target="_blank">About Tim Yang</a> (83)</li>
<li><a href="http://timyang.net/data/redis-misunderstanding/" title="Redis几个认识误区" target="_blank">Redis几个认识误区</a> (62)</li>
<li><a href="http://timyang.net/programming/memcache-mutex/" title="Memcache mutex设计模式" target="_blank">Memcache mutex设计模式</a> (47)</li>
<li><a href="http://timyang.net/architecture/microblog-design-qcon-beijing/" title="构建可扩展的微博架构(qcon beijing 2010演讲)" target="_blank">构建可扩展的微博架构(qcon beijing 2010演讲)</a> (39)</li>
<li><a href="http://timyang.net/architecture/consistent-hashing-practice/" title="某分布式应用实践一致性哈希的一些问题" target="_blank">某分布式应用实践一致性哈希的一些问题</a> (38)</li>
<li><a href="http://timyang.net/google/open-source/" title="为什么优秀开发者进入Google后就不参与开源了" target="_blank">为什么优秀开发者进入Google后就不参与开源了</a> (33)</li>
<li><a href="http://timyang.net/misc/macbook-air-productive/" title="MacBook Air与工作效率" target="_blank">MacBook Air与工作效率</a> (32)</li>
<li><p><a href="http://timyang.net/data/memcached-lru-evictions/" title="Memcached数据被踢(evictions&gt;0)现象分析" target="_blank">Memcached数据被踢(evictions&gt;0)现象分析</a> (30)</p>
</li>
<li><h3 id="recent-posts">Recent Posts</h3>
</li>
<li><p><a href="http://timyang.net/tao/speech-practice/" title="演讲小组的第一次活动" target="_blank">演讲小组的第一次活动</a></p>
</li>
<li><a href="http://timyang.net/tao/connect-the-dots/" title="“connect the dots” 随想" target="_blank">“connect the dots” 随想</a></li>
<li><a href="http://timyang.net/tao/talents/" title="跨领域人才" target="_blank">跨领域人才</a></li>
<li><a href="http://timyang.net/product/discontinued-servic/" title="产品下线杂谈" target="_blank">产品下线杂谈</a></li>
<li><a href="http://timyang.net/misc/speech/" title="当我谈演讲时候，我谈些什么" target="_blank">当我谈演讲时候，我谈些什么</a></li>
<li><a href="http://timyang.net/architecture/k/" title="案例与故障的知识库" target="_blank">案例与故障的知识库</a></li>
<li><a href="http://timyang.net/management/learning-tao/" title="团队中的为师之道" target="_blank">团队中的为师之道</a></li>
<li><a href="http://timyang.net/google/hybrid-research/" title="有感Google的混合研究方法" target="_blank">有感Google的混合研究方法</a></li>
<li><a href="http://timyang.net/management/probation/" title="谈技术人员“转正”" target="_blank">谈技术人员“转正”</a></li>
<li><a href="http://timyang.net/architecture/notes-weixin/" title="微信架构的启示" target="_blank">微信架构的启示</a></li>
<li><a href="http://timyang.net/misc/macbook-air-productive/" title="MacBook Air与工作效率" target="_blank">MacBook Air与工作效率</a></li>
<li><a href="http://timyang.net/architecture/notes-timelines-twitter/" title="Notes about Timelines @ Twitter" target="_blank">Notes about Timelines @ Twitter</a></li>
<li><a href="http://timyang.net/management/engineer-performance/" title="技术工程师的能力与目标" target="_blank">技术工程师的能力与目标</a></li>
<li><a href="http://timyang.net/management/design-review/" title="技术方案评审" target="_blank">技术方案评审</a></li>
<li><p><a href="http://timyang.net/management/planning/" title="谈技术团队目标" target="_blank">谈技术团队目标</a></p>
</li>
<li><h3 id="recent-comments">Recent Comments</h3>
</li>
<li><p><a href="http://emake.info/the-redis-several-misunderstandings.html" target="_blank">Redis几个认识误区 | 创造</a> on <a href="http://timyang.net/data/redis-misunderstanding/comment-page-2/#comment-224409" target="_blank">Redis几个认识误区</a></p>
</li>
<li><a href="http://emake.info/the-redis-several-misunderstandings.html" target="_blank">Redis几个认识误区 | 创造</a> on <a href="http://timyang.net/data/mcdb-tt-redis/comment-page-3/#comment-224408" target="_blank">MemcacheDB, Tokyo Tyrant, Redis performance test</a></li>
<li><a href="http://outofmemory.cn/" target="_blank">甄码农</a> on <a href="http://timyang.net/management/learning-tao/comment-page-1/#comment-224161" target="_blank">团队中的为师之道</a></li>
<li><a href="http://outofmemory.cn/" target="_blank">甄码农</a> on <a href="http://timyang.net/tao/talents/comment-page-1/#comment-224158" target="_blank">跨领域人才</a></li>
<li><p>阿秀 on <a href="http://timyang.net/about/comment-page-2/#comment-223584" target="_blank">About Tim Yang</a></p>
</li>
<li><h3 id="categories">Categories</h3>
</li>
<li><p><a href="http://timyang.net/category/data/" title="View all posts filed under data" target="_blank">data</a></p>
</li>
<li><a href="http://timyang.net/category/erlang/" title="Erlang语言" target="_blank">Erlang</a></li>
<li><a href="http://timyang.net/category/google/" title="View all posts filed under Google" target="_blank">Google</a></li>
<li><a href="http://timyang.net/category/java/" title="View all posts filed under Java" target="_blank">Java</a></li>
<li><a href="http://timyang.net/category/linux/" title="View all posts filed under Linux" target="_blank">Linux</a></li>
<li><a href="http://timyang.net/category/lua/" title="View all posts filed under Lua" target="_blank">Lua</a></li>
<li><a href="http://timyang.net/category/python/" title="View all posts filed under Python" target="_blank">Python</a></li>
<li><a href="http://timyang.net/category/sns/" title="View all posts filed under SNS" target="_blank">SNS</a></li>
<li><a href="http://timyang.net/category/tech/" title="View all posts filed under tech" target="_blank">tech</a></li>
<li><a href="http://timyang.net/category/web/" title="View all posts filed under Web" target="_blank">Web</a></li>
<li><a href="http://timyang.net/category/product/" title="View all posts filed under 产品" target="_blank">产品</a></li>
<li><a href="http://timyang.net/category/distributed/" title="分布式算法及思想" target="_blank">分布式</a></li>
<li><a href="http://timyang.net/category/management/" title="View all posts filed under 技术管理" target="_blank">技术管理</a></li>
<li><a href="http://timyang.net/category/architecture/" title="后端架构" target="_blank">架构</a></li>
<li><a href="http://timyang.net/category/programming/" title="View all posts filed under 编程" target="_blank">编程</a></li>
<li><a href="http://timyang.net/category/tao/" title="View all posts filed under 随想" target="_blank">随想</a></li>
<li><p><a href="http://timyang.net/category/misc/" title="非技术话题" target="_blank">非技术</a></p>
</li>
<li><h3 id="archives">Archives</h3>
</li>
<li><p><a href="http://timyang.net/2012/10/" title="October 2012" target="_blank">October 2012</a> (5)</p>
</li>
<li><a href="http://timyang.net/2012/09/" title="September 2012" target="_blank">September 2012</a> (4)</li>
<li><a href="http://timyang.net/2012/05/" title="May 2012" target="_blank">May 2012</a> (3)</li>
<li><a href="http://timyang.net/2012/02/" title="February 2012" target="_blank">February 2012</a> (3)</li>
<li><a href="http://timyang.net/2012/01/" title="January 2012" target="_blank">January 2012</a> (2)</li>
<li><a href="http://timyang.net/2011/12/" title="December 2011" target="_blank">December 2011</a> (1)</li>
<li><a href="http://timyang.net/2011/08/" title="August 2011" target="_blank">August 2011</a> (1)</li>
<li><a href="http://timyang.net/2011/07/" title="July 2011" target="_blank">July 2011</a> (1)</li>
<li><a href="http://timyang.net/2011/04/" title="April 2011" target="_blank">April 2011</a> (2)</li>
<li><a href="http://timyang.net/2011/02/" title="February 2011" target="_blank">February 2011</a> (1)</li>
<li><a href="http://timyang.net/2011/01/" title="January 2011" target="_blank">January 2011</a> (2)</li>
<li><a href="http://timyang.net/2010/12/" title="December 2010" target="_blank">December 2010</a> (2)</li>
<li><a href="http://timyang.net/2010/11/" title="November 2010" target="_blank">November 2010</a> (2)</li>
<li><a href="http://timyang.net/2010/09/" title="September 2010" target="_blank">September 2010</a> (1)</li>
<li><a href="http://timyang.net/2010/08/" title="August 2010" target="_blank">August 2010</a> (1)</li>
<li><a href="http://timyang.net/2010/07/" title="July 2010" target="_blank">July 2010</a> (3)</li>
<li><a href="http://timyang.net/2010/06/" title="June 2010" target="_blank">June 2010</a> (2)</li>
<li><a href="http://timyang.net/2010/05/" title="May 2010" target="_blank">May 2010</a> (2)</li>
<li><a href="http://timyang.net/2010/04/" title="April 2010" target="_blank">April 2010</a> (1)</li>
<li><a href="http://timyang.net/2010/03/" title="March 2010" target="_blank">March 2010</a> (4)</li>
<li><a href="http://timyang.net/2010/02/" title="February 2010" target="_blank">February 2010</a> (1)</li>
<li><a href="http://timyang.net/2010/01/" title="January 2010" target="_blank">January 2010</a> (1)</li>
<li><a href="http://timyang.net/2009/12/" title="December 2009" target="_blank">December 2009</a> (3)</li>
<li><a href="http://timyang.net/2009/11/" title="November 2009" target="_blank">November 2009</a> (3)</li>
<li><a href="http://timyang.net/2009/10/" title="October 2009" target="_blank">October 2009</a> (3)</li>
<li><a href="http://timyang.net/2009/09/" title="September 2009" target="_blank">September 2009</a> (4)</li>
<li><a href="http://timyang.net/2009/08/" title="August 2009" target="_blank">August 2009</a> (5)</li>
<li><a href="http://timyang.net/2009/07/" title="July 2009" target="_blank">July 2009</a> (6)</li>
<li><a href="http://timyang.net/2009/06/" title="June 2009" target="_blank">June 2009</a> (5)</li>
<li><a href="http://timyang.net/2009/05/" title="May 2009" target="_blank">May 2009</a> (11)</li>
<li><a href="http://timyang.net/2009/04/" title="April 2009" target="_blank">April 2009</a> (7)</li>
<li><a href="http://timyang.net/2009/03/" title="March 2009" target="_blank">March 2009</a> (3)</li>
<li><a href="http://timyang.net/2009/02/" title="February 2009" target="_blank">February 2009</a> (2)</li>
<li><a href="http://timyang.net/2009/01/" title="January 2009" target="_blank">January 2009</a> (2)</li>
<li><a href="http://timyang.net/2008/12/" title="December 2008" target="_blank">December 2008</a> (2)</li>
<li><h3 id="feeds">Feeds</h3>
</li>
<li><p><a href="http://timyang.net/feed/" target="_blank">Entries (RSS)</a></p>
</li>
<li><a href="http://timyang.net/comments/feed/" target="_blank">Comments (RSS)</a>
*</li>
</ul>
<h2 id="-memcachedb-tokyo-tyrant-redis-performance-test-http-timyang-net-data-mcdb-tt-redis-permanent-link-to-memcachedb-tokyo-tyrant-redis-performance-test-"><a href="http://timyang.net/data/mcdb-tt-redis/" title="Permanent Link to MemcacheDB, Tokyo Tyrant, Redis performance test" target="_blank">MemcacheDB, Tokyo Tyrant, Redis performance test</a></h2>
<p>Tuesday, Aug 11th, 2009 by Tim | Tags: <a href="http://timyang.net/tag/english/" target="_blank">English</a>, <a href="http://timyang.net/tag/memcachedb/" target="_blank">memcachedb</a>, <a href="http://timyang.net/tag/redis/" target="_blank">redis</a>, <a href="http://timyang.net/tag/tokyo-cabinet/" target="_blank">tokyo cabinet</a>, <a href="http://timyang.net/tag/tokyo-tyrant/" target="_blank">tokyo tyrant</a></p>
<p>I had tested the following key-value store for set() and get()</p>
<ul>
<li><a href="http://memcachedb.org/" target="_blank">MemcacheDB</a>, use memcached client protocol.</li>
<li><a href="http://tokyocabinet.sourceforge.net/tyrantdoc/" target="_blank">Tokyo Tyrant</a> (<a href="http://tokyocabinet.sourceforge.net/" target="_blank">Tokyo Cabinet</a>), use memcached client protocol</li>
<li><a href="http://code.google.com/p/redis/" target="_blank">Redis</a>, use <a href="http://code.google.com/p/jredis/" target="_blank">JRedis</a> Java client</li>
</ul>
<h2 id="1-test-environment">1. Test environment</h2>
<h3 id="1-1-hardware-os">1.1 Hardware/OS</h3>
<p>2 Linux boxes in a LAN, 1 server and 1 test client
Linux Centos 5.2 64bit
Intel(R) Xeon(R) CPU E5410  @ 2.33GHz (L2 cache: 6M), Quad-Core /* 2
8G memory
SCSI disk (standalone disk, no other access)</p>
<h3 id="1-2-software-version">1.2 Software version</h3>
<p>db-4.7.25.tar.gz
libevent-1.4.11-stable.tar.gz
memcached-1.2.8.tar.gz
memcachedb-1.2.1-beta.tar.gz
redis-0.900_2.tar.gz
tokyocabinet-1.4.9.tar.gz
tokyotyrant-1.1.9.tar.gz</p>
<h3 id="1-3-configuration">1.3 Configuration</h3>
<p><strong>Memcachedb startup parameter</strong>
Test 100 bytes
./memcachedb -H /data5/kvtest/bdb/data -d -p 11212 -m 2048 <strong>-N -L 8192</strong>
(Update: As mentioned by <a href="http://stvchu.org/" target="_blank">Steve</a>, the 100-byte-test missed the -N paramter, so I added it and updated the data)
Test 20k bytes
./memcachedb -H /data5/kvtest/mcdb/data -d -p 11212 -b 21000 -N -m 2048</p>
<p><strong>Tokyo Tyrant (Tokyo Cabinet) configuration</strong>
Use default Tokyo Tyrant sbin/ttservctl
use .tch database, hashtable database</p>
<p>ulimsiz=”256m”
sid=1
dbname=”$basedir/casket.tch/#bnum=50000000″ /# default 1M is not enough!
maxcon=”65536″
retval=0</p>
<p><strong>Redis configuration</strong>
timeout 300
save 900 1
save 300 10
save 60 10000
/# no maxmemory settings</p>
<h3 id="1-4-test-client">1.4 Test client</h3>
<p>Client in Java, JDK1.6.0, 16 threads
Use Memcached client java_memcached-release_2.0.1.jar
<a href="http://code.google.com/p/jredis/" target="_blank">JRedis</a> client for Redis test, another <a href="http://code.google.com/p/jdbc-redis/" target="_blank">JDBC-Redis</a> has poor performance.</p>
<h2 id="2-small-data-size-test-result">2. Small data size test result</h2>
<p>Test 1, 1-5,000,000 as key, 100 bytes string value, do set, then get test, all get test has result.
Request per second(mean)<img src="&quot;key-value-performance-1(Update" alt="key-value-performance-1(Update)">&quot;)
<strong>Store</strong> <strong>Write</strong> <strong>Read</strong> Memcached 55,989 50,974 Memcachedb 25,583 35,260 Tokyo Tyrant 42,988 46,238 Redis 85,765 71,708</p>
<p><strong>Server Load Average</strong></p>
<p><strong>Store</strong> <strong>Write</strong> <strong>Read</strong> Memcached 1.80, 1.53, 0.87 1.17, 1.16, 0.83 MemcacheDB 1.44, 0.93, 0.64 4.35, 1.94, 1.05 Tokyo Tyrant 3.70, 1.71, 1.14 2.98, 1.81, 1.26 Redis 1.06, 0.32, 0.18 1.56, 1.00, 0.54</p>
<h2 id="3-larger-data-size-test-result">3. Larger data size test result</h2>
<p>Test 2, 1-500,000 as key, 20k bytes string value, do set, then get test, all get test has result.
Request per second(mean)
<strong>(Aug 13 Update: fixed a bug on get() that read non-exist key)</strong>
<img src="&quot;key-value-performance-2(update" alt="key-value-performance-2(update)">&quot;)
<strong>Store</strong> <strong>Write</strong> <strong>Read</strong> Memcachedb 357 327 Tokyo Tyrant 3,501 257 Redis 1,542 957</p>
<h2 id="4-some-notes-about-the-test">4. Some notes about the test</h2>
<p>When test Redis server, the memory goes up steadily, consumed all 8G and then use swap(and write speed slow down), after all memory and swap space is used, the client will get exceptions. So use Redis in a productive environment should limit to a small data size. It is another cache solution rather than a persistent storage. <strong>So compare Redis together with MemcacheDB/TC may not fair because Redis actually does not save data to disk during the test</strong>.</p>
<p>Tokyo cabinet and memcachedb are very stable during heavy load, use very little memory in set test and less than physical memory in get test.</p>
<p>MemcacheDB peformance is poor for write large data size(20k).</p>
<p>The call response time was not monitored in this test.</p>
<h3 id="101-comments-http-timyang-net-data-mcdb-tt-redis-postcomment-jump-to-the-comments-form-">101 Comments <a href="http://timyang.net/data/mcdb-tt-redis/#postcomment" title="Jump to the comments form" target="_blank">»</a></h3>
<ol>
<li><img src="" alt=""><a href="http://leechael.org/" target="_blank">Leechael</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1102" target="_blank">Aug 12th 2009 at 04:47</a></p>
<p>这次的测试结果显然更新了，虽然还是不敌，不过这次 TT/TC write 的性能显然提高了。 <img src="" alt=":D"></p>
<ol>
<li><img src="" alt=""><a href="http://anyall.org/" target="_blank">Brendan O&#39;Connor</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1107" target="_blank">Aug 12th 2009 at 11:32</a></p>
<p>very interesting, thanks!</p>
<ol>
<li><img src="" alt=""><a href="http://shellshadow.com/" target="_blank">Jon Hancock</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1115" target="_blank">Aug 13th 2009 at 00:46</a></p>
<p>good info. One thing missing in these types of comparisons is a baseline against an RDB. Adding postgres 8.4 to this comparison might help.</p>
<ol>
<li><img src="" alt=""><a href="http://hypertable.org/" target="_blank">vicaya</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1117" target="_blank">Aug 13th 2009 at 03:28</a></p>
<p>You should really test memcached 1.4.0, which actually can use multi-cores.</p>
<ol>
<li><img src="" alt=""><a href="http://www.dapper.net/" target="_blank">Asaf</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1119" target="_blank">Aug 13th 2009 at 03:51</a></p>
<p>Thanks for the info,
Can you please detail the ratio of read / write operations and the order of the operations?</p>
<p>did you first write all the data than read all the data or was it intermittent?</p>
<ol>
<li><img src="" alt="">Tim says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1132" target="_blank">Aug 13th 2009 at 14:39</a></p>
<p>@asaf
I do read test after finish all writes.</p>
<p>Write test:
key: 1-5,000,000
value: 100-byte-string</p>
<p>After write all, then do read test
client.get(random(5,000,000));</p>
<ol>
<li><img src="" alt=""><a href="http://www.zhuzhaoyuan.com/" target="_blank">Joshua Zhu</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1137" target="_blank">Aug 13th 2009 at 16:51</a></p>
<p>This benchmark is very helpful to me in evaluating those K/V stores. Thanks a lot.</p>
<ol>
<li><img src="" alt=""><a href="http://duguo.com/" target="_blank">Guo Du</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1138" target="_blank">Aug 13th 2009 at 19:31</a></p>
<p>Very interesting result. Any significant cpu usage difference between those stores?</p>
<ol>
<li><img src="" alt="">Joubin says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1148" target="_blank">Aug 14th 2009 at 10:08</a></p>
<p>Hi Tim,</p>
<p>Thanks for the test! Just curious:</p>
<p>1)
Try changing the tcp buffer sizes in class org.jredis.ri.alphazero.connection.ConnectionBase$DefaultConnectionBase. On my mac, the default values are always fairly quite large so perhaps this is something that was missed:</p>
<p>change the tcp rcv and snd buffer size values:</p>
<p>public static final class DefaultConnectionSpec implements ConnectionSpec {</p>
<p>…</p>
<p>//<em>/</em> /<em>/
private static final int DEFAULT_RCV_BUFF_SIZE = 1024 /</em> 48; // &lt;&lt; increased
//<em>/</em> /<em>/
private static final int DEFAULT_SND_BUFF_SIZE = 1024 /</em> 48; // &lt;&lt; increased</p>
<p>…</p>
<p>2) May also try changing the tcp socket prefs (same inner class):</p>
<p>Try this:</p>
<p>public static final class DefaultConnectionSpec implements ConnectionSpec {
…</p>
<p>@Override
public Integer getSocketProperty(SocketProperty property) {
int value = 0;
switch (property){
case SO_PREF_BANDWIDTH:
value = 0; // changed
break;
case SO_PREF_CONN_TIME:
value = 2;
break;
case SO_PREF_LATENCY:
value = 1; // changed
break;
case SO_RCVBUF:
value = DEFAULT_RCV_BUFF_SIZE;
break;
case SO_SNDBUF:
value = DEFAULT_SND_BUFF_SIZE;
break;
case SO_TIMEOUT:
value = DEFAULT_READ_TIMEOUT_MSEC;
break;
}
return value;
}
…
}</p>
<p>I assume you’ve downloaded the full distribution from github. “mvn install” to build and run the test again. Curious to see if it makes any diffs. That fails we’ll try switching to buffered io streams.</p>
<p>/R</p>
<ol>
<li><img src="" alt="">Gabriel says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1157" target="_blank">Aug 15th 2009 at 02:30</a></p>
<p>Can you post the actual model/# for the Xeon CPU along with operating frequency?</p>
<ol>
<li><img src="" alt="">Tim says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1192" target="_blank">Aug 17th 2009 at 16:45</a></p>
<p>@Joubin
I’ve changed DEFAULT_RCV_BUFF_SIZE/DEFAULT_SND_BUFF_SIZE from 48k to 256k, both for small data size and larger data size, but there is not significant improvement. The bottleneck here may not on the client side.</p>
<p>@Gabriel added.</p>
<ol>
<li><img src="" alt="">mongofan says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1219" target="_blank">Aug 19th 2009 at 07:47</a></p>
<p>hi Tim
very nice!</p>
<p>can you add mongodb to the benchmark? I would love to see how it performs against redis</p>
<ol>
<li><img src="" alt="">Joubin says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1283" target="_blank">Aug 23rd 2009 at 22:04</a></p>
<p>Tim,</p>
<p>Thanks. That confirms my owns tests that stressed on just one key to isolate the client overhead.</p>
<p>A cursory look at the TT’s Java client seems to indicate that payloads are gzip’d (which JRedis does not, given that the baseline assumption is that you may be using a variety of clients for your db, in which case client specific optimizations are not viable unless the compression algorithm is shared by all client types.)</p>
<p>I’ll update when I have something to add here, but safe assumption here is that compressing the 20K payload has a significant positive impact on the performance of the TT setup.</p>
<ol>
<li><img src="" alt=""><a href="http://www.caojianghua.com/" target="_blank">arden</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1468" target="_blank">Sep 3rd 2009 at 11:44</a></p>
<p>redis有没有象memcached这样的过期时间设置？</p>
<ol>
<li><img src="" alt="">Jonathan says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1583" target="_blank">Sep 11th 2009 at 04:37</a></p>
<p>I assume this tests write once?</p>
<p>You may see something interesting from Tokyo Tyrant if you test modification in random order. Write performance should drop to match read performance.</p>
<ol>
<li><img src="" alt=""><a href="http://www.exozet.com/" target="_blank">Henry</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1847" target="_blank">Oct 3rd 2009 at 06:10</a></p>
<p>Thanks for the Test, we will test Redis in one of the next Projects</p>
<ol>
<li><img src="" alt=""><a href="http://oracle.com/" target="_blank">Gregory Burd</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-2189" target="_blank">Nov 19th 2009 at 03:12</a></p>
<p>To match Redis’s durability (“D” in ACID) using Berkeley DB simply set the DB_TXN flags to DB_TXN_NOSYNC. A transaction will be consider “durable” when the data is flushed from the log-buffers in-memory to the operating system’s filesystem buffers rather than waiting for the disk to actually write the data (which is much slower). There are many other configuration parameters that can be tuned, you don’t list them in your description so I can’t say if they were optimal or not (really, “auto-tuning” a database is something that BDB should do for you, but we’re not there yet). If these tests run entirely in cache (can load the entire dataset into memory) then this isn’t a realistic scenario, increase the dataset until the data is 10x the cache size. Also, as someone mentioned you may want to test under a highly concurrent, and highly contentious workload as that will push the locking systems and create very different results. Finally, update to Berkeley DB 4.8. In 4.8 we’ve dramatically improved our locking subsystem for modern multi-core CPU architectures.</p>
<p>Benchmarks are always tricky. <img src="" alt=":-)"> Apples-to-apples tests are rare because they are hard to design and harder to run. There is almost always some degree of bias or some overlooked element. It’s unavoidable. That said, benchmarks do serve a purpose so thank you for doing the tests. We hope that you do more. We’re always looking for ways to improve performance.</p>
<p>-greg</p>
<p>Berkeley DB Product Manager, Oracle Corp</p>
<ol>
<li><img src="" alt="">Tim says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-2191" target="_blank">Nov 20th 2009 at 11:16</a></p>
<p>Greg, already enable DB_TXN_NOSYNC by add -N to memcachedb in this test.
Will evaluated bdb 4.8</p>
<ol>
<li><img src="" alt="">Tim says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-2201" target="_blank">Nov 25th 2009 at 09:47</a></p>
<p>Greg, tested bdb 4.8, there is significant improvent. Great!
but after I compare with TC(tokyocabinet-1.4.39.tar.gz) and TT(tokyotyrant-1.1.37.tar.gz) new version, they also had improvement, so the result doesn’t changed much.</p>
<p>FYI, I’ve tested read/write 100 byte with 50 threads, the request per second result are,
Tokyo Tyrant(Tokyo Cabinet) Write 54,189, Read 73,384
Memcachedb(Berkekey DB 4.8) Write 32,985 Read 59,178
Memcached Write 103,242, Read 106,102</p>
<p>Because the new test donen’t change the situation, the test in blog post still make sense.</p>
<ol>
<li><img src="" alt="">eric says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-2517" target="_blank">Jan 6th 2010 at 13:45</a></p>
<p>感觉还是不错。</p>
<ol>
<li><img src="" alt=""><a href="http://focusheart.cn/" target="_blank">focusheart</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-3268" target="_blank">Feb 26th 2010 at 10:25</a></p>
<p>Redis应用在一个多层的存储结构中用来处理经常发生变化的数据部分很合适，存储结构的层次不同，适用不同的解决方案。</p>
<ol>
<li><img src="" alt="">faryang says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-4388" target="_blank">Jul 2nd 2010 at 00:15</a></p>
<p>对我来说，REDIS是亮点，相见恨晚啊：）</p>
<ol>
<li><img src="" alt="">jtong11 says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-16562" target="_blank">Mar 17th 2011 at 16:36</a></p>
<p>事实上，对于500万的小数据量而言，所有写入数据都有可能被文件系统buffer住，这时再进行查询操作，显然都是直接命中。所以真正有效的测试应该是写入超过内存2倍以上的数据，然后查询最先写入的那些数据。</p>
<ol>
<li><img src="" alt="">Louis says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-147890" target="_blank">Mar 23rd 2012 at 17:20</a></p>
<p>I am a newer for Redis.Can I just ask a primary question?How did you get the value of Request per second?</p>
<ol>
<li><img src="" alt="">hunter says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-212945" target="_blank">Oct 11th 2012 at 20:42</a></p>
<p>我们测试data &gt; 100k时，性能会急剧下降(100次/s)，不知道是不是我们的测试配置有问题，你能否帮忙测试一下？</p>
<p><a href="http://timyang.net/data/mcdb-tt-redis/feed/" target="_blank">RSS feed for comments on this post</a>, <a href="http://timyang.net/data/mcdb-tt-redis/trackback/" target="_blank">TrackBack URI</a>
<a href="http://timyang.net/data/mcdb-tt-redis/#respond" target="_blank">Cancel Reply</a></p>
<h3 id="leave-a-comment">Leave a Comment</h3>
<p>Name (required)</p>
<p>E-mail (required, never displayed)</p>
<p>URI</p>
<p>Except where otherwise noted, content on this site is licensed under a <a href="http://creativecommons.org/licenses/by/3.0/" target="_blank">Creative Commons Attribution 3.0</a> License</p>

      
    </div>
    <section id='after_content_widget'><div class="widget" id="widget_after_content_wumiiRelatedItems>">
<script type="text/javascript" id="wumiiRelatedItems"></script>
</div><div class="widget" id="widget_after_content_post_footer_info>">
<div class="panel panel-success">
    <div class="panel-heading" align="center">希望本站内容对您有点用处,有什么疑问或建议请在后面留言评论</div>
    <div align="center" class="panel-body">转载请注明作者(<a href="http://itsolife.com/about/">RobinChia</a>)和出处 <a href="http://itsolife.com">It so life</a> ，请勿用于任何商业用途</div>
    <div class="panel-body">本文链接: <a href="/2014/02/02/2014-02-02-架构师--MemcacheDB-TokyoTyrant-Redisperformancetest–/">MemcacheDB</a></div>
</div>
</div></section>
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/架构师/">架构师</a></li></span></span> | <span class="tags">Tagged <a href="/tags/架构师/" class="label label-primary">架构师</a></span> | <span class="time">recent updated:<time title="2014-03-07 01:54:28"datetime="2014-03-07 01:54:28"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-架构师--MemcacheDB-TokyoTyrant-Redisperformancetest–/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-架构师--MemcacheDB-TokyoTyrant-Redisperformancetest–" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>


    <section id='after_post_widget'><div class="widget" id="widget_after_post_post_pageNav>">
<ul class="pager">
  
  <li class="previous"><a href="/2014/02/02/2014-02-02-架构师--InfoQ企业架构师应担任什么角色/" title="InfoQ 企业架构师应担任什么角色">&larr; InfoQ 企业架构师应担任什么角色</a></li>
  
  
  <li class="next"><a href="/2014/02/02/2014-02-02-JS用法--firefox中的ajax同步传输/" title="firefox中的ajax同步传输">firefox中的ajax同步传输 &rarr;</a></li>
  
</ul></div><div class="widget" id="widget_after_post_related_posts>">
<ul class="list-group"><li class="list-group-item"><a href="/2014/02/02/2014-02-02-架构师--通向架构师的道路（第二十六天）漫谈架构与设计文档的写作技巧/">通向架构师的道路（第二十六天）漫谈架构与设计文档的写作技巧</a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-架构师-架构--大型网站架构演变和知识体系/">大型网站架构演变和知识体系</a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-架构师-架构--多IDC的数据分布设计一/">多IDC的数据分布设计(一)</a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-架构师--五年经验跳槽历程-Eric77的专栏/">五年经验跳槽历程 </a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-架构师--Redis几个认识误区–Tim后端技术/">Redis几个认识误区 – Tim[后端技术]</a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-架构师--Redis容量及使用规划–Tim后端技术/">Redis容量及使用规划 – Tim[后端技术]</a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-架构师--Twitter的跨数据中心图片存储系统Blobstore/">Twitter的跨数据中心图片存储系统Blobstore</a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-架构师-架构--Twitter架构图cache篇–Tim后端技术/">Twitter架构图(cache篇) – Tim[后端技术]</a></li></ul></div></section>    
	<div id="comments"><!-- Duoshuo Comment BEGIN -->

<div class="ds-thread"  data-thread-key="2014-02-02-架构师--MemcacheDB-TokyoTyrant-Redisperformancetest–"  data-url="http://itsolife.com/2014/02/02/2014-02-02-架构师--MemcacheDB-TokyoTyrant-Redisperformancetest–/" data-title="MemcacheDB"></div>

<!-- Duoshuo Comment END -->

</div></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?eaa92c12166944fd3a160103e6c4a8cf"});
</script>


</span>  </div>
  <div id="copyright">Site powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a>  update time: <em>2014-03-07 01:54:28</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->

<script type="text/javascript">
    var wumiiPermaLink = "http://itsolife.com/2014/02/02/2014-02-02-架构师--MemcacheDB-TokyoTyrant-Redisperformancetest–/";
    var wumiiTitle = "MemcacheDB";
    var wumiiTags = "架构师";
    var wumiiCategories = ["架构师"];
    var wumiiSitePrefix = "http://itsolife.com";
    var wumiiParams = "&num=5&mode=3&pf=JAVASCRIPT";
    _js2load.push({src:'http://widget.wumii.cn/ext/relatedItemsWidget'});
</script>
<a href="http://www.wumii.com/widget/relatedItems" style="border:0;">
<img src="http://static.wumii.cn/images/pixel.png" alt="无觅关联推荐，快速提升流量" style="border:0;padding:0;margin:0;" />
</a>
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
