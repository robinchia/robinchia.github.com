
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MongoDB基础问题及使用方式 | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客Chinaunix首页　| 　论坛　| 　博客 登录 | 注册

博文 博主

私人消息()
系统消息()
好友请求()
通知管理()">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<meta property="og:title" content="MongoDB基础问题及使用方式"/>
<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title">MongoDB基础问题及使用方式</h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客/">feb. 2 2014</a></time></span>      
    </header>
    
    <section id='before_content_widget'></section>
    <div class="entry">
      
        <h1 id="mongodb-chinaunix-">MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客</h1>
<p><a href="http://blog.chinaunix.net/" target="_blank"><img src="" alt=""></a><a href="http://www.chinaunix.net/" target="_blank">Chinaunix首页</a>　| 　<a href="http://bbs.chinaunix.net/" target="_blank">论坛</a>　| 　<a href="http://blog.chinaunix.net/" target="_blank">博客</a> <a href="http://blog.chinaunix.net/site/login.html" target="_blank">登录</a> | <a href="http://sso.chinaunix.net/Register?return_url=http%3A%2F%2Ft.cublog.com%2F" target="_blank">注册</a></p>
<p>博文 博主</p>
<ul>
<li><a href="http://blog.chinaunix.net/message/private.html" target="_blank">私人消息()</a></li>
<li><a href="http://blog.chinaunix.net/message/system.html" target="_blank">系统消息()</a></li>
<li><a href="http://blog.chinaunix.net/member/request.html" target="_blank">好友请求()</a></li>
<li><a href="http://blog.chinaunix.net/member/notification.html" target="_blank">通知管理()</a></li>
</ul>
<p><em><a href="http://blog.chinaunix.net/uid/25046147.html" target="_blank">随风飘云的ChinaUnix博客</a></em></p>
<p>一无所有，随风飘荡</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid-24789255-id-3423247.html" target="_blank">【公布获奖】年度颁奖：专家博客、推荐博客杰出奖</a></li>
<li><a href="http://blog.chinaunix.net/uid-24789255-id-3434964.html" target="_blank">新版CU博客将于2013年1月14日正式上线</a>
<a href="http://blog.chinaunix.net/uid/25046147.html" target="_blank">首页</a>　| 　<a href="http://blog.chinaunix.net/uid/25046147/abstract/1.html" target="_blank">博文目录</a>　| 　<a href="http://blog.chinaunix.net/member/profile/uid/25046147.html" target="_blank">关于我</a>
<a href="http://blog.chinaunix.net/uid/25046147.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/25046147.html" target="_blank">随风飘云</a></p>
<ul>
<li>博客访问： 453761</li>
<li>博文数量： 140</li>
<li>博客积分： 2739</li>
<li>博客等级： 少校</li>
<li>用 户 组： 普通用户</li>
<li>注册时间： 2010-12-07 12:28
*</li>
</ul>
<p><em>
</em>
<em>
</em></p>
<p>文章分类</p>
<p><a href="http://blog.chinaunix.net/uid/25046147/list/1.html" target="_blank">全部博文</a>（140）</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-163083-list-1.html" title="技术文档翻译" target="_blank">技术文档翻译</a>（1）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-163040-list-1.html" title="MongoDB" target="_blank">MongoDB</a>（6）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-153857-list-1.html" title="常见问题" target="_blank">常见问题</a>（0）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-152347-list-1.html" title="邮件问题" target="_blank">邮件问题</a>（4）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-152243-list-1.html" title="安全" target="_blank">安全</a>（2）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-152205-list-1.html" title="问题-tomcat" target="_blank">问题-tomcat</a>（1）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-151983-list-1.html" title="dns+双线" target="_blank">dns+双线</a>（1）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-151852-list-1.html" title="杂七杂八" target="_blank">杂七杂八</a>（4）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-151835-list-1.html" title="数据库集群" target="_blank">数据库集群</a>（0）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-151826-list-1.html" title="linux储存" target="_blank">linux储存</a>（3）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-151355-list-1.html" title="个人心情" target="_blank">个人心情</a>（0）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-150942-list-1.html" title="启动脚本" target="_blank">启动脚本</a>（6）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-150863-list-1.html" title="tomcat" target="_blank">tomcat</a>（8）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-150097-list-1.html" title="转载" target="_blank">转载</a>（14）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-149775-list-1.html" title="监控" target="_blank">监控</a>（9）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-137736-list-1.html" title="linux集群及高可用" target="_blank">linux集群及高可</a>（6）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-135555-list-1.html" title="shell" target="_blank">shell</a>（14）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-129005-list-1.html" title="漏洞木马" target="_blank">漏洞木马</a>（2）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-85689-list-1.html" title="windows" target="_blank">windows</a>（15）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-85688-list-1.html" title="数据库" target="_blank">数据库</a>（15）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-85625-list-1.html" title="linux专区" target="_blank">linux专区</a>（29）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid--1-list-1.html" title="未分配的博文" target="_blank">未分配的博文</a>（0）
文章存档</li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/25046147/year-2012-list-1.html" target="_blank">2012年</a>（71）</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201210-list-1.html" target="_blank">2012年10月</a>（2）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201209-list-1.html" target="_blank">2012年09月</a>（3）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201208-list-1.html" target="_blank">2012年08月</a>（9）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201205-list-1.html" target="_blank">2012年05月</a>（2）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201203-list-1.html" target="_blank">2012年03月</a>（3）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201202-list-1.html" target="_blank">2012年02月</a>（21）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201201-list-1.html" target="_blank">2012年01月</a>（31）</li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/25046147/year-2011-list-1.html" target="_blank">2011年</a>（69）</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201112-list-1.html" target="_blank">2011年12月</a>（9）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201110-list-1.html" target="_blank">2011年10月</a>（1）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201109-list-1.html" target="_blank">2011年09月</a>（28）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201108-list-1.html" target="_blank">2011年08月</a>（31）</li>
</ul>
<p>我的朋友</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/26504911.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/26504911.html" title="hbxmadcom" target="_blank">hbxmadco</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/9186056.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/9186056.html" title="vinhlam" target="_blank">vinhlam</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/20647718.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/20647718.html" title="mutalip" target="_blank">mutalip</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/26934529.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/26934529.html" title="金色の闪光" target="_blank">金色の闪</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/26835604.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/26835604.html" title="dong1892" target="_blank">dong1892</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/26557473.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/26557473.html" title="chianaceruser" target="_blank">chianace</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/20104120.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/20104120.html" title="niao5929" target="_blank">niao5929</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/23916356.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/23916356.html" title="split_two" target="_blank">split_tw</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/24929997.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/24929997.html" title="manfred_xu" target="_blank">manfred_</a>
最近访客</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/7270462.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/7270462.html" title="ghan" target="_blank">ghan</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/24250828.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/24250828.html" title="zongg" target="_blank">zongg</a></p>
<p>订阅</p>
<ul>
<li><a href="http://blog.chinaunix.net/blog/rss/uid/25046147.html"></a></li>
<li><p><a href="http://www.google.com/ig/add?feedurl=http%3A%2F%2Fblog.chinaunix.net%2Fuid%2F25046147.html"></a>
推荐博文</p>
</li>
<li><p>·<a href="http://blog.chinaunix.net/uid-12326395-id-3479181.html" title="fedora18挂载点/分区设置的问题。" target="_blank">fedora18挂载点/分区设置的问...</a></p>
</li>
<li>·<a href="http://blog.chinaunix.net/uid-230160-id-3479192.html" title="用linux实现cisco的route-map策略路由功能" target="_blank">用linux实现cisco的route-map...</a></li>
<li>·<a href="http://blog.chinaunix.net/uid-13808199-id-3479191.html" title="如何让进程在Linux后台运行 " target="_blank">如何让进程在Linux后台运行 ...</a></li>
<li>·<a href="http://blog.chinaunix.net/uid-20707271-id-3479250.html" title="ubuntu 11.10 下安装和设置OpenSSH Server" target="_blank">ubuntu 11.10 下安装和设置Op...</a></li>
<li>·<a href="http://blog.chinaunix.net/uid-24774106-id-3479284.html" title="rdesktop 远程登陆公司环境" target="_blank">rdesktop 远程登陆公司环境...</a></li>
</ul>
<p>热词专题</p>
<ul>
<li>·<a href="http://blog.chinaunix.net/zhuanti/101164/mysqldOutofmemory_1011638248.shtml" title="mysqldOut of memory" target="_blank">mysqldOut of memory</a></li>
<li>·<a href="http://blog.chinaunix.net/zhuanti/101151/vboxwulicipan_1011506658.shtml" title="vbox 物理磁盘" target="_blank">vbox 物理磁盘</a></li>
<li>·<a href="http://blog.chinaunix.net/zhuanti/101151/thinkpadxianshipingbiankuangyoufengxi_1011505683.shtml" title="thinkpad 显示屏边框有缝隙" target="_blank">thinkpad 显示屏边框有缝隙...</a></li>
<li>·<a href="http://blog.chinaunix.net/zhuanti/101151/netlinkbiancheng_1011502254.shtml" title="netlink编程" target="_blank">netlink编程</a></li>
<li>·<a href="http://blog.chinaunix.net/zhuanti/101163/centos5wangluoyindaotuxingnfs_1011628940.shtml" title="centos5 网络引导 图形 nfs" target="_blank">centos5 网络引导 图形 nfs...</a>
友情链接</li>
</ul>
<p><em>**</em> <a href="">MongoDB基础问题及使用方式</a> <em>2012-08-09 18:06:38</em></p>
<p>分类： 数据库开发技术</p>
<p>MongoDB基础问题及使用方式</p>
<pre><code>            这是在学习MongoDB时网上找的一篇不错的文档，做为保存。
</code></pre><p>1.linux 系统：</p>
<p>1】关闭文件系统/分区的atime 选项
Vi /etc/fstab</p>
<p>在对应的分区项后面添加noatime ,nodiratime
LABEL=/1 / ext3 defaults 1 1</p>
<p>LABEL=/data1 /data ext4 defaults,noatime,nodiratime 1 2
2】设置文件句柄４ｋ＋，目前该配置已经集成到启动脚本中。</p>
<p>Vi /etc/security/limit.conf
/* soft nproc 65536</p>
<p>/<em> hard nproc 65536
/</em> soft nofile 65536</p>
<p>/* hard nofile 65536
3】不要使用large vm page （不要使用大内存页选项）</p>
<p>Linux 大内存页参考：<a href="http://linuxgazette.net/155/krishnakumar.html" target="_blank">http://linuxgazette.net/155/krishnakumar.html</a>
4】用dmesg 查看主机的信息。</p>
<p>2.linux 文件系统的选择：
Mongodb 采用预分配的大文件来存储数据,我们推荐</p>
<p>1】ext4
2】xfs</p>
<p>3.内核版本：
网络上对2.6.33-31 以及2.6.32 的表现持怀疑度， 而强力推荐2.6.36</p>
<p>4.线程堆栈的尺寸
默认的线程堆栈尺寸为10m ，调整为1m ，已经集成在启动脚本中。</p>
<p>项目过程中的总结与建议
1.大小写问题</p>
<p>mongodb 是默认区分大小写的，但是这会不会衍生出跟mysql 一样的问题？（mysql 区
分大小写，导致windows 与linux 下的表名，字段名不一致）。</p>
<p>如果无特别用途，建议表名，字段名全部用小写字母。
2.尽可能的缩短字段名的长度</p>
<p>mongodb 的schema free 导致了每笔数据都要存储他的key 以及属性，这导致了这些数
据的大量冗余。开发同事也许考虑到，从易读性出发设计的key 基本比较长，基本都是按</p>
<p>照起字面意思去设计的。这导致key 很长。对应的数据存储占用了很大的空间。
必要的时候，可以考虑建立一个key 与实际意义的map 表，尽量降低key 的长度。</p>
<p>示例定义：
// 基本信息</p>
<p>static final String _ID = &quot;_id&quot;;
static final String STATUS_CODE = &quot;sc&quot;;</p>
<p>// 缓冲
static final String DATE = &quot;date&quot;;</p>
<p>static final String MAX_AGE = &quot;age&quot;;
// 内容</p>
<p>static final String CONTENT = &quot;content&quot;;
static final String CONTENT_TYPE = &quot;ctype&quot;;</p>
<p>static final String CONTENT_LENGTH = &quot;clen&quot;;
static final String ZIP = &quot;zip&quot;;</p>
<ol>
<li>mongodb 单表最大索引数为64
无索引排序的最大数据量为4M, 超过则报错退出。</li>
</ol>
<p>建议where 条件尽量落在索引字段上，排序字段需要建立索引，索引的使用原则与oracle
mysql 一致，尽量降低索引数量，索引长度。</p>
<p>mongodb 的查询每次只能用到一个索引，对数据的查询不会“并发”执行
例如： db.tab.find({&#39;id&#39;=1,&#39;name&#39;=2}) 如果‘id’，‘name&#39; 列上分别有索引</p>
<p>对查询效率提升意义不大，如果索引为（&#39;id&#39;,&#39;name&#39;) 则大幅提升效率。
4.mongodb 添加字段</p>
<p>如果添加字段且带有default 值，需要全部数据都要修改，这也是设计阶段需要考虑的
事情，这个问题的另外一种解法是应用代码里做一次判断。</p>
<p>5.测试过程的密码问题
对于用作数据库使用的Mongodb，在代码测试阶段都应加上密码验证，目前上线阶段基</p>
<p>本都会在密码验证方面出现问题（做缓存使用的可以不做密码验证)。
6.数据源连接方式</p>
<p>使用连接池模式，尽量减少认证带来的性能额外消耗
建议采用标准的uri 连接方式： mongodb://user:passwd@host:port,host:port/db</p>
<p>7.Mongodb日志量
正常情况下不需要开启-v 日志选项。</p>
<p>Mongodb 的-v 日志适合在开发环境的调试线上部署不建议采用这个参数，目前线上
部署的情况，-v 日志一天也会有几个G 的日志量，去掉这个参数，跟数据查询相关的操作</p>
<p>就不会记日志了，数据库的内部的重要操作还是会写日志的。
8.连接数大小的设置</p>
<p>Mongodb 驱动程序采用的连接池的方式连接到数据库，目前从观察到的情况是应用一
开启便根据变量的设置，建立全部连接，然后提供给程序使用，并且一旦其中某个连接</p>
<p>到数据库的访问失败，则会清空整个连接池到这台数据库的连接，并重新建立连接。
而mongodb 对中断连接的垃圾清理工作则是懒惰的被动清理方式，如果驱动程序端配</p>
<p>置的连接数过大，一旦发生重连，则会导致mongo 端堆积大量的垃圾连接数据，导致
主机资源耗尽。</p>
<p>建议： mongodb 驱动的连接池大小的设置一般应该控制100 以下，一般情况30-50 足
够支撑应用访问。</p>
<p>9.锁的问题
Mongodb 对数据库的访问全部加锁，如果是查询请求则设置共享锁，数据修改请求，</p>
<p>则设置全局排他锁，并且是实例级别的排他锁。并且写锁会阻塞读请求，如果长时间持有
写锁，会阻塞整个实例的读请求。</p>
<p>部署建议：
1】一般情况下，建议不同的应用不要合用一套示例。</p>
<p>2】如果资源不满足，需要合用，应该具有相同属性的应用合用一套实例。
例如合同mongo 的应用都是读多写少，防止一台写多应用阻塞读请求。</p>
<p>10.关于map/reduce问题
mongodb 对map/reduce 的支持是单线程的，我们不建议在前台使用该功能， group by</p>
<p>是通过map/reduce 实现的，开发过程中，要慎用。
11.安全问题</p>
<p>1】Mongodb 运行在mongodb 用户之上，并禁止mongodb 用户登录
2】使用Mongodb 自带的认证方法（adduser、auth）限制用户访问行为</p>
<p>3】将Mongodb 置于内网环境中
4】Mongodb 必须暴露在外网环境中的时候，使用IPTABLES 等网络层技术进行防护</p>
<p>5】网络层面内容为明文传输，可以考虑存储加密文档，应用端，加解密。
12.性能监控</p>
<p>Mongodb 自带有性能数据收集系统
Mongostat 实时采集数据库的多项指标,提供http console 端口号为应用端口号+1000。</p>
<p>关注的主要性能指标：
1】Faults：显示Mongodb 每秒页面故障的数量，这个是mongoDB 映射到虚拟地址空间，</p>
<p>而不是物理内存，这个值如果飙高的话，可能意味着机器没有足够的内存来
存储数据和索引。</p>
<p>2】Flushes：每秒做了多少次fsync，显示多少次数据被刷新进了磁盘
3】locked：写锁</p>
<p>4】idx miss：索引未命中比例
5】qr | qw：读写锁的请求队列长度。</p>
<p>6】conn： 当前已经建立的连接数。
其他命令：</p>
<p>Db.stat()
db.serverStatuse()</p>
<p>Db.collection.stats()
13.碎片问题</p>
<p>Mongodb 数据库如果数据修改很频繁，会出现比较严重的空间碎片问题，表现在磁盘
文件扩张与实际数据量不相符，内存不够用，索引命中率低，查询效率降低。</p>
<p>碎片整理，目前我们采用的版本没有太有效的方法。
可以用db.repaireDatabase() 来整理数据库，这个过程非常的慢</p>
<p>如果是Master-slave 模式则相当于执行一次主从切换，然后从新建立从库。
如果是replSet 架构可以停掉数据库，然后删除数据目录，从新从复制复制组中全同步数据，</p>
<p>这个时候要考虑oplog 的尺寸。
一个大体的步骤：</p>
<p>1.】先调用rs.freeze(1200),将每个不想让它成为primary 的机器让它在1200 秒内无法成为
primary(这步也可以不做)</p>
<ol>
<li>】将primary stepDown,不出意外新的primary 会起来.</li>
<li><p>】将原primary kill 掉.</p>
</li>
<li><p>】删掉所有data 数据(调用repair 很慢,真不如干掉重新来)</p>
</li>
<li><p>】再重启动原primary 的进程</p>
</li>
<li><p>】以此循环完成整个复制组的全部重建。
14.系统备份：</p>
</li>
</ol>
<p>Mongodb 目前不支持在线备份，只能离线备份。
我们采用的架构为replSet 和Master-slave .</p>
<p>基于我们目前的架构以及数据一致性要求，我们没有安排相关的备份系统。
15.应用代码中Mongodb连接问题</p>
<p>在有些应用在使用Mongodb 过程中会存在以下两个小问题：</p>
<ol>
<li>在应用启动过程中，应用存在要求连接池中所有的连接都建立成功才让应用正</li>
</ol>
<p>常启动，这种做法不可取，因为存在网络问题、Mongodb 拒绝连接或Mongodb 假死情况，如果没加外部try catch 做防护，则Resin 不断重启也不能正常启动端口。
2.有些应用在使用Mongodb 中连接池配置了safe=true，w=1；这种配置意味着客户端在</p>
<p>插入数据或更新数据的时候，要求mongodb 必须将所更新的数据写入磁盘并返回更新成功的信息给程序。如果碰上应用程序访问压力大，mongodb 就会反应迟钝，并会发生假死可能，针对此情况，需要评估数据的一致性需求，做出合适调整。我们一般建议关闭此选项。
16.补充开发方面的一些问题</p>
<p>1】skip+limit翻页，越往后面越慢，有资料说用数组元素的分页可以解决，目前还没
试过，比较靠谱的做法是，先找出上次的id，翻页的时候不用skip：</p>
<p>last_row_id = ObjectId(‘....’);
db.activity_stream-&gt;find({_id:{$lt: last_row_id },</p>
<p>user_id:20 } ).sort( {_id:-1} ).limit(10);
2】.只有真正需要的字段才select出来</p>
<p>3】.更新的某条数据的时候，先查出来再更新会减小锁的时间
4】.只有返回很少结果的查询才用索引，否则会加载太多数据，比没有用索引还慢</p>
<p>5】.属性比较多的时候，建立分层的关系能够提高查询效率，否则每个记录都要过一遍
才能找到要的属性</p>
<p>17.关于硬件资源的选择：
虚拟机可以很好的隔离资源，并可动态的扩展。</p>
<p>我们建议mongodb 的部署采用虚拟机的方式，每个虚拟机部署一个实例，使各节点分
散在不同的物理机上,根据应用的前期预测，平衡虚拟机的之间的i/o。
<a href="&quot;分享到QQ空间&quot;"></a><a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到人人网&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a><a href="&quot;分享到豆瓣&quot;"></a><a href="&quot;更多平台&quot;"></a> 阅读(392) | 评论(1) | 转发(0) |</p>
<p>0<a href=""></a></p>
<p>上一篇：<a href="http://blog.chinaunix.net/uid-25046147-id-3307303.html" target="_blank">MongoDB的大数据的存储方式</a></p>
<p>下一篇：<a href="http://blog.chinaunix.net/uid-25046147-id-3308100.html" target="_blank">MongoDB翻译－（）</a>
相关热门文章</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid-9793706-id-3476742.html" title="emacs最简单入门，只要10分钟" target="_blank">emacs最简单入门，只要10分钟...</a></li>
<li><a href="http://blog.chinaunix.net/uid-28494721-id-3476731.html" title="wordpress文章中让图片居中排版的方法" target="_blank">wordpress文章中让图片居中排...</a></li>
<li><a href="http://blog.chinaunix.net/uid-26782662-id-3476727.html" title="四大类背包" target="_blank">四大类背包</a></li>
<li><a href="http://blog.chinaunix.net/uid-28329865-id-3476726.html" title="学习编程，从何入手" target="_blank">学习编程，从何入手</a></li>
<li><p><a href="http://blog.chinaunix.net/uid-22476414-id-3476725.html" title="Linux下使用screen工作How-to" target="_blank">Linux下使用screen工作How-to...</a></p>
</li>
<li><p><a href="http://blog.chinaunix.net/uid-13874038-id-191915.html" title="数据库课程设计报告（仓库管理系统）" target="_blank">数据库课程设计报告（仓库管理...</a></p>
</li>
<li><a href="http://blog.chinaunix.net/uid-226186-id-2123860.html" title="拼音汉字对照表" target="_blank">拼音汉字对照表</a></li>
<li><a href="http://blog.chinaunix.net/uid-7667983-id-2046475.html" title="sql isnull函数的使用" target="_blank">sql isnull函数的使用</a></li>
<li><a href="http://blog.chinaunix.net/uid-46552-id-2117354.html" title="数据挖掘电子书下载" target="_blank">数据挖掘电子书下载</a></li>
<li><p><a href="http://blog.chinaunix.net/uid-11742111-id-2833575.html" title="SQL Server2005下载(多版本)" target="_blank">SQL Server2005下载(多版本)...</a></p>
</li>
<li><p><a href="http://blog.chinaunix.net/uid-28483822-id-3478849.html" title="JDBC连接SQL server 2008错误解决" target="_blank">JDBC连接SQL server 2008错误...</a></p>
</li>
<li><a href="http://blog.chinaunix.net/uid-200142-id-3477159.html" title="db2数据库运维常用命令集锦 " target="_blank">db2数据库运维常用命令集锦 ...</a></li>
<li><a href="http://blog.chinaunix.net/uid-28483822-id-3469470.html" title="基本Oracle外围性能优化" target="_blank">基本Oracle外围性能优化...</a></li>
<li><a href="http://blog.chinaunix.net/uid-28483822-id-3453830.html" title="Mysql添加事务处理" target="_blank">Mysql添加事务处理</a></li>
<li><a href="http://blog.chinaunix.net/uid-28299642-id-3451729.html" title="BI行业存在的一些问题" target="_blank">BI行业存在的一些问题...</a></li>
</ul>
<p>给主人留下些什么吧！~~</p>
<p><a href="http://blog.chinaunix.net/uid/25046147.html" target="_blank"><img src="" alt=""></a></p>
<p><a href="http://blog.chinaunix.net/uid/25046147.html" target="_blank">随风飘云</a>2012-08-09 18:08:43</p>
<p><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt="">
<a href="">回复</a> | <a href="">举报</a>
评论热议</p>
<p>请登录后评论。</p>
<p><a href="http://blog.chinaunix.net/site/login.html" target="_blank">登录</a> <a href="http://sso.chinaunix.net/Register?return_url=http%3A%2F%2Ft.cublog.com%2F" target="_blank">注册</a></p>
<p><a href="http://www.chinaunix.net/about/index.shtml" target="_blank">关于我们</a> | <a href="http://www.it168.com/bottomfile/it168.shtml" target="_blank">关于IT168</a> | <a href="http://www.chinaunix.net/about/connect.html" target="_blank">联系方式</a> | <a href="http://www.chinaunix.net/about/service.html" target="_blank">广告合作</a> | <a href="http://www.it168.com//bottomfile/flgw/fl.htm" target="_blank">法律声明</a> | <a href="http://sso.chinaunix.net/Register?return_url=http%3A%2F%2Fblog.chinaunix.net%2F" target="_blank">免费注册</a></p>
<p>Copyright 2001-2010 ChinaUnix.net All Rights Reserved 北京皓辰网域网络信息技术有限公司. 版权所有</p>
<p>感谢所有关心和支持过ChinaUnix的朋友们</p>
<p>京ICP证041476号 京ICP证060528号</p>
<p>X</p>
<p>分享到...</p>
<p>选择其他平台 &gt;&gt;
<a href="http://www.bshare.cn/intro" target="_blank">分享到</a><a href="">X</a></p>
<p><a href="&quot;腾讯微博&quot;">腾讯微博</a></p>
<p><a href="&quot;QQ空间&quot;">QQ空间</a>
<a href="&quot;新华微博&quot;">新华微博</a></p>
<p><a href="&quot;凤凰微博&quot;">凤凰微博</a>
<a href="&quot;开心网&quot;">开心网</a></p>
<p><a href="&quot;豆瓣网&quot;">豆瓣网</a></p>
<p><a href="&quot;一键通&quot;">一键通</a></p>
<p><a href="&quot;搜狐微博&quot;">搜狐微博</a>
<a href="&quot;天涯&quot;">天涯</a></p>
<p><a href="&quot;网易微博&quot;">网易微博</a>
<a href="&quot;人民微博&quot;">人民微博</a></p>
<p><a href="&quot;QQ好友&quot;">QQ好友</a>
<a href="&quot;新浪微博&quot;">新浪微博</a></p>
<p><a href="&quot;人人网&quot;">人人网</a>
<a href="&quot;手机&quot;">手机</a></p>
<p><a href="&quot;朋友网&quot;">朋友网</a>
<a href="&quot;百度空间&quot;">百度空间</a>
更多平台... (130)</p>
<p><a href="http://www.bshare.cn/" target="_blank">bShare</a></p>

      
    </div>
    <section id='after_content_widget'><div class="widget" id="widget_after_content_wumiiRelatedItems>">
<script type="text/javascript" id="wumiiRelatedItems"></script>
</div><div class="widget" id="widget_after_content_post_footer_info>">
<div class="panel panel-success">
    <div class="panel-heading" align="center">希望本站内容对您有点用处,有什么疑问或建议请在后面留言评论</div>
    <div align="center" class="panel-body">转载请注明作者(<a href="http://itsolife.com/about/">RobinChia</a>)和出处 <a href="http://itsolife.com">It so life</a> ，请勿用于任何商业用途</div>
    <div class="panel-body">本文链接: <a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客/">MongoDB基础问题及使用方式</a></div>
</div>
</div></section>
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span><span class="breadcrumb"><li><a href="/categories/Nosql/">Nosql</a></li><li><a href="/categories/Nosql/mongo/">mongo</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a><a href="/tags/mongo/" class="label label-success">mongo</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql-mongo--MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>


    <section id='after_post_widget'><div class="widget" id="widget_after_post_post_pageNav>">
<ul class="pager">
  
  <li class="previous"><a href="/2014/02/02/2014-02-02-Nosql-mongo--第一节MongoDB介绍及下载与安装/" title="第一节 MongoDB介绍及下载与安装">&larr; 第一节 MongoDB介绍及下载与安装</a></li>
  
  
  <li class="next"><a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB客户端工具-MongoDB-SimpleFramework/" title="MongoDB 客户端工具 ">MongoDB 客户端工具  &rarr;</a></li>
  
</ul></div><div class="widget" id="widget_after_post_related_posts>">
<ul class="list-group"><li class="list-group-item"><a href="/2014/02/02/2014-02-02-Nosql-mongo--第一节MongoDB介绍及下载与安装/">第一节 MongoDB介绍及下载与安装</a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-Nosql--译NoSQL生态系统/">[译] NoSQL生态系统</a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB客户端工具-MongoDB-SimpleFramework/">MongoDB 客户端工具 </a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础篇-残夜-博客园/">MongoDB基础篇 </a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-Nosql--NoSQL反模式–文档数据库篇/">NoSQL反模式 – 文档数据库篇</a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-Nosql--GoogleDremel原理–如何能3秒分析1PB/">Google Dremel 原理 – 如何能3秒分析1PB</a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-Nosql--NoSQL数据库笔谈/">NoSQL数据库笔谈</a></li><li class="list-group-item"><a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB客户端MongoVue-张善友-博客园/">MongoDB 客户端 MongoVue </a></li></ul></div></section>    
	<div id="comments"><!-- Duoshuo Comment BEGIN -->

<div class="ds-thread"  data-thread-key="2014-02-02-Nosql-mongo--MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客"  data-url="http://itsolife.com/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客/" data-title="MongoDB基础问题及使用方式"></div>

		

<!-- Duoshuo Comment END -->

</div></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Site powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a>  update time: <em>2014-03-07 09:54:31</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->

<script type="text/javascript">
    var wumiiPermaLink = "http://itsolife.com/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客/";
    var wumiiTitle = "MongoDB基础问题及使用方式";
    var wumiiTags = "Nosql,mongo";
    var wumiiCategories = ["Nosql","Nosql","mongo"];
    var wumiiSitePrefix = "http://itsolife.com";
    var wumiiParams = "&num=5&mode=3&pf=JAVASCRIPT";
    _js2load.push({src:'http://widget.wumii.cn/ext/relatedItemsWidget'});
</script>
<a href="http://www.wumii.com/widget/relatedItems" style="border:0;">
<img src="http://static.wumii.cn/images/pixel.png" alt="无觅关联推荐，快速提升流量" style="border:0;padding:0;margin:0;" />
</a>
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
