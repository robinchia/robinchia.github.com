
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 140 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nosql--GoogleDremel原理–如何能3秒分析1PB/">Google Dremel 原理 – 如何能3秒分析1PB</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql--GoogleDremel原理–如何能3秒分析1PB/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="google-dremel-3-1pb">Google Dremel 原理 – 如何能3秒分析1PB</h1>
<h3 id="-">简介</h3>
<p>Dremel 是Google 的“交互式”数据分析系统。可以组建成规模上千的集群，处理PB级别的数据。MapReduce处理一个数据，需要分钟级的时间。作为MapReduce的发起人，Google开发了Dremel将处理时间缩短到秒级，作为MapReduce的有力补充。Dremel作为Google BigQuery的report引擎，获得了很大的成功。最近Apache计划推出Dremel的开源实现Drill，将Dremel的技术又推到了浪尖上。</p>
<h3 id="google-dremel-">Google Dremel设计</h3>
<p>根据Google公开的论文《<a href="http://research.google.com/pubs/pub36632.html" target="_blank">Dremel: Interactive Analysis of WebScaleDatasets</a>》可以看到Dremel的设计原理。还有一些测试报告。论文写于2006年，公开于2010年，Google在处理大数据方面，果真有得天独厚的优势。下面的内容，很大部分来自这篇论文。</p>
<p>随着Hadoop的流行，大规模的数据分析系统已经越来越普及。数据分析师需要一个能将数据“玩转”的交互式系统。如此，就可以非常方便快捷的浏览数据，建立分析模型。Dremel系统有下面几个主要的特点：</p>
<ul>
<li><strong>Dremel**</strong>是一个大规模系统。**在一个PB级别的数据集上面，将任务缩短到秒级，无疑需要大量的并发。磁盘的顺序读速度在100MB/S上下，那么在1S内处理1TB数据，意味着至少需要有1万个磁盘的并发读! Google一向是用廉价机器办大事的好手。但是机器越多，出问题概率越大，如此大的集群规模，需要有足够的容错考虑，保证整个分析的速度不被集群中的个别慢(坏)节点影响。</li>
<li><strong>Dremel**</strong>是MR<strong>**交互式查询能力不足的补充。</strong>和MapReduce一样，Dremel也需要和数据运行在一起，将计算移动到数据上面。所以它需要GFS这样的文件系统作为存储层。在设计之初，Dremel并非是MapReduce的替代品，它只是可以执行非常快的分析，在使用的时候，常常用它来处理MapReduce的结果集或者用来建立分析原型。</li>
<li><strong>Dremel**</strong>的数据模型是嵌套(nested)<strong>**的。</strong>互联网数据常常是非关系型的。Dremel还需要有一个灵活的数据模型，这个数据模型至关重要。Dremel支持一个嵌套(nested)的数据模型，类似于Json。而传统的关系模型，由于不可避免的有大量的Join操作，在处理如此大规模的数据的时候，往往是有心无力的。</li>
<li><strong>Dremel**</strong>中的数据是用列式存储的。**使用列式存储，分析的时候，可以只扫描需要的那部分数据的时候，减少CPU和磁盘的访问量。同时列式存储是压缩友好的，使用压缩，可以综合CPU和磁盘，发挥最大的效能。对于关系型数据，如果使用列式存储，我们都很有经验。但是对于嵌套(nested)的结构，Dremel也可以用列存储，非常值得我们学习。</li>
<li><strong>Dremel**</strong>结合了Web<strong><strong>搜索</strong></strong>和并行DBMS<strong>**的技术。</strong>首先，他借鉴了Web搜索中的“查询树”的概念，将一个相对巨大复杂的查询，分割成较小较简单的查询。大事化小，小事化了，能并发的在大量节点上跑。其次，和并行DBMS类似，Dremel可以提供了一个SQL-like的接口，就像Hive和Pig那样。</li>
</ul>
<h3 id="google-dremel-">Google Dremel应用场景</h3>
<p>设想一个使用场景。我们的美女数据分析师，她有一个新的想法要验证。要验证她的想法，需要在一个上亿条数据上面，跑一个查询，看看结果和她的想法是不是一样，她可不希望等太长时间，最好几秒钟结果就出来。当然她的想法不一定完善，还需要不断调整语句。然后她验证了想法，发现了数据中的价值。最后，她可以将这个语句完善成一个长期运行的任务。</p>
<p>对于Google,数据一开始是放在GFS上的。可以通过MapReduce将数据导入到Dremel中去，在这些MapReduce中还可以做一些处理。然后分析师使用Dremel，轻松愉悦的分析数据，建立模型。最后可以编制成一个长期运行的MapReduce任务。</p>
<p>这种处理方式，让笔者联想到Greenplum的<a href="http://www.greenplum.com/products/chorus" target="_blank">Chorus</a>. Chorus也可以为分析师提供快速的数据查询，不过解决方案是通过预处理，导入部分数据，减少数据集的大小。用的是三十六计，走为上计，避开的瞬时分析大数据的难题。Chorus最近即将开源，可以关注下。</p>
<p>还有一点特别的就是按列存储的嵌套数据格式。如图所示，在按记录存储的模式中，一个记录的多列是连续的写在一起的。在按列存储中，可以将数据按列分开。也就是说，可以仅仅扫描A.B.C而不去读A.E或者A.B.C。难点在于，我们如何能同时高效地扫描若干列，并做一些分析。</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13458644104566_f.jpg" target="_blank"><img src="&quot;Record-wise vs. columnar representation of nested data  &quot;" alt=""></a></p>
<h3 id="google-dremel-">Google Dremel数据模型</h3>
<p>在Google, 用Protocol Buffer常常作为序列化的方案。其数据模型可以用数学方法严格的表示如下：</p>
<p>t=dom|<A1:t[∗|?],...,An:t[∗|?]></p>
<p>其中t可以是一个基本类型或者组合类型。其中基本类型可以是integer,float和string。组合类型可以是若干个基本类型拼凑。星号(/*)指的是任何类型都可以重复，就是数组一样。问号(?)指的是任意类型都是可以是可选的。简单来说，除了没有Map外，和一个Json几乎没有区别。</p>
<p>下图是例子，Schema定义了一个组合类型Document.有一个必选列DocId，可选列Links，还有一个数组列Name。可以用Name.Language.Code来表示Code列。</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13458646314107_f.jpg" target="_blank"><img src="&quot;Two sample nested records and their schema&quot;" alt=""></a></p>
<p>这种数据格式是语言无关，平台无关的。可以使用Java来写MR程序来生成这个格式，然后用C++来读取。在这种列式存储中，能够快速通用处理也是非常的重要的。</p>
<p>上图，是一个示例数据的抽象的模型；下图是这份数据在Dremel实际的存储的格式。</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13458643358445_f.jpg" target="_blank"><img src="&quot;Column-striped representation of the sample data in Figure&quot;" alt=""></a></p>
<p>如果是关系型数据，而不是嵌套的结构。存储的时候，我们可以将每一列的值直接排列下来，不用引入其他的概念，也不会丢失数据。对于嵌套的结构，我们还需要两个变量R (Repetition Level) ,D (Definition Level) 才能存储其完整的信息。</p>
<p><strong>Repetition Level</strong>是记录该列的值是在哪一个级别上重复的。举个例子说明：对于Name.Language.Code? 我们一共有三条非Null的记录。</p>
<ol>
<li>第一个是”en-us”，出现在第一个Name的第一个Lanuage的第一个Code里面。在此之前，这三个元素是没有重复过的，都是第一个。所以其R为0。</li>
<li>第二个是”en”，出现在下一个Lanuage里面。也就是说Lanague是重复的元素。Name.Language.Code中Lanague排第二个，所以其R为2.</li>
<li>第三个是”en-gb”，出现在下一个Name中，Name是重复元素，排第一个，所以其R为1。</li>
</ol>
<p>我们可以想象，将所有的没有值的列，设值为NULL。如果是数组列，我们也想象有一个NULL值。有了Repetition Level，我们就可以很好的用列表示嵌套的结构了。但是还有一点不足。就是还需要表示一个数组是不是我们想象出来的。</p>
<p><strong>Definition Level</strong> 是定义的深度，用来记录该列是否是”想象”出来的。所以对于非NULL的记录，是没有意义的，其值必然为相同。同样举个例子。例如Name.Language.Country,</p>
<ul>
<li>第一个”us”是在R1里面，其中Name,Language,Country是有定义的。所以D为3。</li>
<li>第二个”NULL”也是在R1的里面，其中Name,Language是有定义的,其他是想象的。所以D为2。</li>
<li>第三个”NULL”还是在R1的里面，其中Name是有定义的,其他是想象的。所以D为1。</li>
<li>第四个”gb”是在R1里面，其中Name,Language,Country是有定义的。所以D为3。</li>
</ul>
<p>就是这样，如果路径中有required，可以将其减去，因为required必然会define，记录其数量没有意义。</p>
<p>理解了如何存储这种嵌套结构。写没有难度。读的时候，我们只读其中部分字段，来构建部分的数据模型。例如，只读取DocID和Name.Language.Country。我们可以同时扫描两个字段，先扫描DocID。记录下第一个，然后发现下一个DocID的R是0；于是该读Name.Language.Country，如果下一个R是1或者2就继续读，如果是0就开始读下一个DocID。</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13458640099204_f.jpg" target="_blank"><img src="&quot;Automaton for assembling records from two fields, and&quot;" alt=""></a></p>
<p>下图展示了一个更为复杂的读取的状态机示例。在读取过程中使用了Definition Level来快速Jump,提升性能。
<a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13460300363599_f.jpg"><img src="&quot;Complete record assembly automaton. Edges are labeled&lt;br /&gt;
with repetition levels&quot;" alt=""></a></p>
<p>到此为止，我们已经知道了Dremel的数据结构。就像其他数据分析系统一样，数据结构确定下来，功能就决定了一大半。对于Dremel的数据查询，必然是“全表扫描”，但由于其巧妙的列存储设计，良好的数据模型设计可以回避掉大部分Join需求和扫描最少的列。</p>
<h3 id="google-dremel-">Google Dremel查询方式</h3>
<p>Dremel可以使用一种SQL-like的语法查询嵌套数据。由于Dremel的数据是只读的，并且会密集的发起多次类似的请求。所以可以保留上次请求的信息，还优化下次请求的explain过程。那又是如何explain的呢？</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13458646380664_f.jpg" target="_blank"><img src="&quot;System architecture and execution inside a server node&quot;" alt=""></a></p>
<p>这是一个树状架构。当Client发其一个请求，根节点受到请求，根据metadata，将其分解到枝叶，直到到位于数据上面的叶子Server。他们扫描处理数据，又不断汇总到根节点。</p>
<p>举个例子：对于请求：
SELECT A, COUNT(B) FROM T GROUP BY A</p>
<p>根节点收到请求，会根据数据的分区请求，将请求变成可以拆分的样子。原来的请求会变为。</p>
<p>SELECT A, SUM(c) FROM (R1 UNION ALL ... Rn) GROUP BY A</p>
<p>R1,…RN是T的分区计算出的结果集。越大的表有越多的分区，越多的分区可以越好的支持并发。</p>
<p>然后再将请求切分，发送到每个分区的叶子Server上面去,对于每个Server
?Ri = SELECT A, COUNT(B) AS c FROM Ti GROUP BY A</p>
<p>结构集一定会比原始数据小很多，处理起来也更快。根服务器可以很快的将数据汇总。具体的聚合方式，可以使用现有的并行数据库技术。</p>
<p>Dremel是一个多用户的系统。切割分配任务的时候，还需要考虑用户优先级和负载均衡。对于大型系统，还需要考虑容错，如果一个叶子Server出现故障或变慢，不能让整个查询也受到明显影响。</p>
<p>通常情况下，每个计算节点，执行多个任务。例如，技巧中有3000个叶子Server，每个Server使用8个线程，有可以有24000个计算单元。如果一张表可以划分为100000个区，就意味着大约每个计算单元需要计算5个区。这执行的过程中，如果某一个计算单元太忙，就会另外启一个来计算。这个过程是动态分配的。</p>
<p>对于GFS这样的存储，一份数据一般有3份拷贝，计算单元很容易就能分配到数据所在的节点上，典型的情况可以到达95%的命中率。</p>
<p>Dremel还有一个配置，就是在执行查询的时候，可以指定扫描部分分区，比如可以扫描30%的分区，在使用的时候，相当于随机抽样，加快查询。</p>
<h3 id="google-dremel-">Google Dremel测试实验</h3>
<p>实验的数据源如下表示。大部分数据复制了3次，也有一个两次。每个表会有若干分区，每个分区的大小在100K到800K之间。如果压缩率是25%，并且计入复制3份的事实的话。T1的大小已经达到PB级别。这么小且巨量的分区，对于GFS的要求很高，现在的Hdfs稳定版恐怕受不了。接下来的测试会逐步揭示其是如何超过MR，并对性能作出分析。
<strong>表名</strong> <strong>记录数</strong> <strong>大小(**</strong>已压缩)<strong> </strong>列数<strong> </strong>数据中心<strong> </strong>复制数量** T1 85 billion 87 TB 270 A 3× T2 24 billion 13 TB 530 A 3× T3 4 billion 70 TB 1200 A 3× T4 1+ trillion 105 TB 50 B 2× T5 1+ trillion 20 TB 30 B 3×</p>
<h3 id="-">列存测试</h3>
<p>首先，我们测试看看列存的效果。对于T1表，1GB的数据大约有300K行，使用列存的话压缩后大约在375MB。这台机器磁盘的吞吐在70MB/s左右。这1GB的数据，就是我们的现在的测试数据源，测试环境是单机。</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13458638268923_f.jpg" target="_blank"><img src="" alt=""></a></p>
<p>见上图。</p>
<ul>
<li>曲线A，是用列存读取数据并解压的耗时。</li>
<li>曲线B是一条一条记录挨个读的时间。</li>
<li>曲线C是在B的基础上，加上了反序列化的时间。</li>
<li>曲线d，是按行存读并解压的耗时。</li>
<li>曲线e加上了反序列化的时间。因为列很多，反序列化耗时超过了读并解压的50%。</li>
</ul>
<p>从图上可以看出。如果需要读的列很少的话，列存的优势就会特别的明显。对于列的增加，产生的耗时也几乎是线性的。而一条一条该个读和反序列化的开销是很大的，几乎都在原来基础上增加了一倍。而按行读，列数的增加没有影响，因为一次性读了全部列。</p>
<h3 id="dremel-mapreduce-">Dremel和MapReduce的对比测试</h3>
<p>MR和Dremel最大的区别在于行存和列存。如果不能击败MapReduce，Remel就没有意义了。使用最常见的WordCount测试，计算这个数据中Word的个数。
Q1: SELECT SUM(CountWords(txtField)) / COUNT(/*) FROM T1</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13458638073453_f.jpg" target="_blank"><img src="&quot;MR and Dremel execution on columnar vs. recordoriented&quot;" alt=""></a></p>
<p>上图是测试的结果。使用了两个MR任务。这两个任务和Dremel一样都运行在3000个节点上面。如果使用列存，Dremel的按列读的MR只需要读0.5TB的数据，而按行存需要读87TB。 MR提供了一个方便有效的途经来讲按行数据转换成按列的数据。Dremel可以方便的导入MapReduce的处理结果。</p>
<h3 id="-server-">树状计算Server测试</h3>
<p>接下来我们要对比在T2表示使用两个不同的Group BY查询。T2表有24 billion 行的记录。每个记录有一个 item列表，每一item有一个amount 字段。总共有40 billion个item.amount。这两个Query分别是。
Q2: SELECT country, SUM(item.amount) FROM T2 GROUP BY country</p>
<p>Q3: SELECT domain, SUM(item.amount) FROM T2 WHERE domain CONTAINS ’.net’ GROUP BY domain</p>
<p>Q2需要扫描60GB的压缩数据，Q3需要扫描180GB，同时还要过滤一个条件。</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13458647595741_f.jpg" target="_blank"><img src="&quot;Execution time as a function of serving tree levels for&quot;" alt=""></a></p>
<p>上图是这两个Query在不同的server拓扑下的性能。每个测试都是有2900个叶子Server。在2级拓扑中，根server直接和叶子Server通信。在3级拓扑中，各个级别的比例是1:100:2900，增加了100个中间Server。在4级拓扑中，比例为1:10:100:2900.</p>
<p>Q2可以在3级拓扑下3秒内执行完毕，但是为他提供更高的拓扑级别，对性能提升没有裨益。相比之下，为Q3提供更高的拓扑级别，性能可以有效提升。这个测试体现了树状拓扑对性能提升的作用。</p>
<h3 id="-">每个分区的执行情况</h3>
<p>对于刚刚的两个查询，具体的每个分区的执行情况是这样的。</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13458637868939_f.jpg" target="_blank"><img src="&quot;Histograms of processing times&quot;" alt=""></a></p>
<p>可以看到99%的分区都在1s内完成了。Dremel会自动调度，使用新的Server计算拖后腿的任务。</p>
<h3 id="-">记录内聚合</h3>
<p>由于Demel支持List的数据类型，有的时候，我们需要计算每个记录里面的各个List的聚合。如
Q4 : SELECT COUNT(c1 &gt; c2) FROM</p>
<p>(SELECT SUM(a.b.c.d) WITHIN RECORD AS c1,</p>
<p>SUM(a.b.p.q.r) WITHIN RECORD AS c2</p>
<p>FROM T3)</p>
<p>我们需要count所有sum(a.b.c.d)比sum(a.b.p.q.r)，执行这条语句实际只需要扫描13GB的数据，耗时15s，而整张表有70TB。如果没有这样的嵌套数据结构，这样的查询会很复杂。</p>
<h3 id="-">扩展性测试</h3>
<p>Dremel有良好的扩展性，可以通过增加机器来缩短查询的时间。并且可以处理数以万亿计的记录。</p>
<p>对于查询：
Q5: SELECT TOP(aid, 20), COUNT(/*) FROM T4?WHERE bid = fvalue1g AND cid = fvalue2g</p>
<p>使用不同的叶子Server数目来进行测试。</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13458644318827_f.jpg" target="_blank"><img src="&quot;Scaling the system from 1000 to 4000 nodes using a&quot;" alt=""></a></p>
<p>可以发现CPU的耗时总数是基本不变的，在30万秒左右。但是随着节点数的增加，执行时间也会相应缩短。几乎呈线性递减。如果我们使用通过CPU时间计费的“云计算”机器，每个租户的查询都可以很快，成本也会非常低廉。</p>
<h3 id="-">容错测试</h3>
<p>一个大团队里面，总有几个拖油瓶。对于有万亿条记录的T5，我们执行下面的语句。
Q6: SELECT COUNT(DISTINCT a) FROM T5</p>
<p>值得注意的是T5的数据只有两份拷贝，所以有更高的概率出现坏节点和拖油瓶。这个查询需要扫描大约1TB的压缩数据，使用2500个节点。</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13458642912961_f.jpg" target="_blank"><img src="&quot;Query Q5 on T5 illustrating stragglers&quot;" alt=""></a></p>
<p>可以看到99%的分区都在5S内完成的。不幸的是，有一些分区需要较长的时间来处理。尽管通过动态调度可以加快一些，但在如此大规模的计算上面，很难完全不出问题。如果不在意太精确的结果，完全可以小小减少覆盖的比例，大大提升相应速度。</p>
<h3 id="google-dremel-">Google Dremel 的影响</h3>
<p>Google Dremel的能在如此短的时间内处理这么大的数据，的确是十分惊艳的。有个伯克利分校的教授Armando Fox说过一句话“如果你曾事先告诉我Dremel声称其将可做些什么，那么我不会相信你能开发出这种工具”。这么给力的技术，必然对业界造成巨大的影响。第一个被波及到的必然是Hadoop。</p>
<h3 id="dremel-hadoop">Dremel与Hadoop</h3>
<p>Dremel的公开论文里面已经说的很明白，Dremel不是用来替代MapReduce，而是和其更好的结合。Hadoop的Hive，Pig无法提供及时的查询，而Dremel的快速查询技术可以给Hadoop提供有力的补充。同时Dremel可以用来分析MapReduce的结果集，只需要将MapReduce的OutputFormat修改为Dremel的格式，就可以几乎不引入额外开销，将数据导入Dremel。使用Dremel来开发数据分析模型，MapReduce来执行数据分析模型。</p>
<p>Hadoop的Hive,Pig现在也有了列存的模式，架构上和Dremel也接近。但是无论存储结构还是计算方式都没有Dremel精致。对Hadoop实时性的改进也一直是个热点话题。要想在Hadoop中山寨一个Dremel，并且相对现有解决方案有突破，笔者觉得Hadoop自身需要一些改进。一个是HDFS需要对并发细碎的数据读性能有大的改进，HDFS需要更加的低延迟。再者是Hadoop需要不仅仅支持MapReduce这一种计算框架。其他部分,Hadoop都有对应的开源组件，万事俱备只欠东风。</p>
<h3 id="dremel-">Dremel的开源实现</h3>
<p>Dremel现在还没有一个可以运行的开源实现，不过我们看到很多努力。一个是Apache的Drill，一个是OpenDremel/Dazo。</p>
<p><strong>OpenDremel/Dazo</strong></p>
<p>OpenDremel是一个开源项目，最近改名为Dazo。可以在GoogleCode上找到<a href="http://code.google.com/p/dremel/" target="_blank"><a href="http://code.google.com/p/dremel/">http://code.google.com/p/dremel/</a></a>。目前还没有发布。作者声称他已经完成了一个通用执行引擎和OpenStack Swift的集成。笔者感觉其越走越歪，离Dremel越来越远了。</p>
<p><strong>Apache Drill</strong></p>
<p><a href="http://wiki.apache.org/incubator/DrillProposal" target="_blank">Drill</a>是Hadoop的赞助商之一MapR发起的。Drill作为一个Dremel的山寨项目，有和Dremel相似的架构和能力。他们希望Drill最终会想Hive,Pig一样成为Hadoop上的重要组成部分。为Hadoop提供快速查询的能力。和Dremel有一点不同，在数据模型上，开源的项目需要支持更标准的数据结构。比如CSV和JSON。同时Drill还有更大的灵活性，支持多重查询语言，多种接口。</p>
<p>现在Drill的目标是完成初始的需求，架构。完成一个初始的实现。这个实现包括一个执行引擎和DrQL。DrQL是一个基于列的格式，类似于Dremel。目前，Drill已经完成的需求和架构设计。总共分为了四个组件</p>
<ul>
<li>Query language:类似Google BigQuery的查询语言，支持嵌套模型，名为DrQL.</li>
<li>Low-lantency distribute execution engine:执行引擎，可以支持大规模扩展和容错。可以运行在上万台机器上计算数以PB的数据。</li>
<li>Nested data format:嵌套数据模型，和Dremel类似。也支持CSV,JSON,YAML类似的模型。这样执行引擎就可以支持更多的数据类型。</li>
<li>Scalable data source: 支持多种数据源，现阶段以Hadoop为数据源。</li>
</ul>
<p>目前这四个组件在分别积极的推进，Drill也非常希望有社区其他公司来加入。Drill希望加入到Hadoop生态系统中去。</p>
<h3 id="-">最后的话</h3>
<p>本文介绍了Google Dremel的使用场景，设计实现，测试实验，和对开源世界的影响。相信不久的将来，Dremel的技术会得到广泛的应用。
Share the post &quot;Google Dremel 原理 - 如何能3秒分析1PB&quot;</p>
<ul>
<li><a href="http://service.weibo.com/share/share.php?url=http%3A%2F%2Fwww.yankay.com%2Fgoogle-dremel-rationale%2F" title="Share this article on Weibo" target="_blank">Weibo</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql--GoogleDremel原理–如何能3秒分析1PB/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql--GoogleDremel原理–如何能3秒分析1PB" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nosql--NoSQL数据建模技术/">NoSQL 数据建模技术</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql--NoSQL数据建模技术/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="nosql-">NoSQL 数据建模技术</h1>
<div class="statcounter"><a title="web analytics" href="http://statcounter.com/" target="_blank"><img class="statcounter" src="http://c.statcounter.com/8326668/0/cccb27f2/1/" alt="web analytics" /></a></div>

<p><a href="&quot;把这个链接拖到你的Chrome收藏夹工具栏中&quot;">High一下!</a></p>
<h1 id="-coolshell-cn-http-coolshell-cn-"><a href="http://coolshell.cn/" target="_blank">酷壳 – CoolShell.cn</a></h1>
<p>享受编程和技术所带来的快乐 – <a href="http://coolshell.cn" target="_blank">http://coolshell.cn</a></p>
<ul>
<li><a href="http://coolshell.cn/" title="首页" target="_blank">首页</a></li>
<li><a href="http://coolshell.cn/featured_posts" target="_blank">推荐文章</a></li>
<li><a href="http://coolshell.cn/plugins" target="_blank">本站插件</a></li>
<li><a href="http://coolshell.cn/guestbook" target="_blank">留言小本</a></li>
<li><a href="http://coolshell.cn/about" target="_blank">关于酷壳</a></li>
<li><a href="http://coolshell.cn/haoel" target="_blank">关于陈皓</a></li>
<li><a href=""></a>
<a href="http://coolshell.cn/" title="转到首页" target="_blank">首页</a> &gt; <a href="http://coolshell.cn/category/datebase" title="查看数据库中的全部文章" target="_blank">数据库</a> &gt; NoSQL 数据建模技术</li>
</ul>
<h2 id="nosql-">NoSQL 数据建模技术</h2>
<p>2012年5月15日 <a href="http://coolshell.cn/articles/author/haoel" title="由陈皓发布" target="_blank">陈皓</a> <a href="">发表评论</a> <a href="">阅读评论</a>  30,135 人阅读    </p>
<p>全文译自墙外文章“<a href="http://highlyscalable.wordpress.com/2012/03/01/nosql-data-modeling-techniques/" target="_blank">NoSQL Data Modeling Techniques</a>”，译得不好，还请见谅。这篇文章看完之后，你可能会对NoSQL的数据结构会有些感觉。我的感觉是，关系型数据库想把一致性，完整性，索引，CRUD都干好，NoSQL只干某一种事，但是牺牲了很多别的东西。总体来说，我觉得NoSQL更适合做Cache。下面是正文——</p>
<p>NoSQL 数据库经常被用作很多非功能性的地方，如，扩展性，性能和一致性的地方。这些NoSQL的特性在理论和实践中都正在被大众广泛地研究着，研究的热点正是那些和性能分布式相关的非功能性的东西，我们都知道 <a href="http://en.wikipedia.org/wiki/CAP_theorem" target="_blank">CAP 理论</a>被很好地应用于了 NoSQL 系统中（陈皓注：CAP即，一致性(Consistency)， 可用性(Availability)， 分区容忍性(Partition tolerance)，在分布式系统中，这三个要素最多只能同时实现两个，而NoSQL一般放弃的是一致性）。但在另一方面，NoSQL的数据建模技术却因为缺乏像关系型数据库那样的基础理论没有被世人很好地研究。这篇文章从数据建模方面对NoSQL家族进行了比较，并讨论几个常见的数据建模技术。</p>
<p>要开始讨论数据建模技术，我们不得不或多或少地先系统地看一下NoSQL数据模型的成长的趋势，以此我们可以了解一些他们内在的联系。下图是NoSQL家族的进化图，我们可以看到这样的进化：Key-Value时代，BigTable时代，Document时代，全文搜索时代，和Graph数据库时代：（陈皓注：注意图中SQL说的那句话，NoSQL再这样发展下去就是SQL了，哈哈。）
<a href="http://coolshell.cn//wp-content/uploads/2012/05/overview2.png"><img src="&quot;overview&quot;" alt="">
</a>NoSQL Data Models</p>
<p>首先，我们需要注意的是SQL和关系型数据模型已存在了很长的时间，这种面向用户的自然性意味着：</p>
<ul>
<li>最终用户一般更感兴趣于数据的聚合显示，而不是分离的数据，这主要通过SQL来完成。</li>
<li>我们无法通过人手工控制数据的并发性，完整性，一致性，或是数据类型校验这些东西的。这就是为什么SQL需要在事务，二维表结构（schema）和外表联合上做很多事。</li>
</ul>
<p>另一方面，SQL可以让软件应用程序在很多情况下不需要关心数据库的数据聚合，和数据完整性和有效性进行控制。而如果我们去除了数据一致性，完整性这些东西，会对性能和分布存储有着重的帮助。正因为如此，我们才有数据模型的进化：</p>
<ul>
<li><p><strong>Key-Value 键值对存储</strong>是非常简单而强大的。下面的很多技术基本上都是基于这个技术开始发展的。但是，Key-Value有一个非常致命的问题，那就是如果我们需要查找一段范围内的key。（陈皓注：学过hash-table数据结构的人都应该知道，hash-table是非序列容器，其并不像数组，链接，队列这些有序容器，我们可以控制数据存储的顺序）。于是，有序键值 （Ordered Key-Value） 数据模型被设计出来解决这一限制，来从根本上提高数据集的问题。</p>
</li>
<li><p><strong>Ordered Key-Value 有序键值</strong>模型也非常强大，但是，其也没有对Value提供某种数据模型。通常来说，Value的模型可以由应用负责解析和存取。这种很不方便，于是出现了 BigTable类型的数据库，这个数据模型其实就是map里有map，map里再套map，一层一层套下去，也就是层层嵌套的key-value（value里又是一个key-value），这种数据库的Value主要通过“列族”（column families），列，和时间戳来控制版本。（陈皓注：关于时间戳来对数据的版本控制主要是解决数据存储并发问题，也就是所谓的乐观锁，详见《<a href="http://coolshell.cn/articles/6790.html" title="多版本并发控制(MVCC)在分布式系统中的应用" target="_blank">多版本并发控制(MVCC)在分布式系统中的应用</a>》）</p>
</li>
<li><p><strong>Document databases 文档数据库</strong> 改进了 BigTable 模型，并提供了两个有意义的改善。第一个是允许Value中有主观的模式（scheme），而不是map套map。第二个是索引。 <strong>Full Text Search Engines 全文搜索引擎</strong>可以被看作是文档数据库的一个变种，他们可以提供灵活的可变的数据模式（scheme）以及自动索引。他们之间的不同点主要是，文档数据库用字段名做索引，而全文搜索引擎用字段值做索引。</p>
</li>
<li><p><strong>Graph data models 图式数据库</strong> 可以被认为是这个进化过程中从 Ordered Key-Value 数据库发展过来的一个分支。图式数据库允许构建议图结构的数据模型。它和文档数据库有关系的原因是，它的很多实现允许value可以是一个map或是一个document。</p>
</li>
</ul>
<h3 id="nosql-">NoSQL 数据模型摘要</h3>
<p>本文剩下的章节将向你介绍数据建模的技术实现和相关模式。但是，在介绍这些技术之前，先来一段序言：</p>
<ul>
<li><p>NoSQL 数据模型设计一般从业务应用的具体数据查询入手，而不是数据间的关系：</p>
</li>
<li><p>关系型的数据模型基本上是分析数据间的结构和关系。其设计理念是： ”<strong>What answers do I have?”**</strong></p>
</li>
<li><p>NoSQL 数据模型基本上是从应用对数据的存取方式入手，如：我需要支持某种数据查询。其设计理念是<strong> ”What questions do I have?”</strong></p>
</li>
<li><p>NoSQL 数据模型设计比关系型数据库需要对数据结构和算法的更深的了解。在这篇文章中我会和大家说那些尽人皆知的数据结构，这些数据结构并不只是被NoSQL使用，但是对于NoSQL的数据模型却非常有帮助。</p>
</li>
<li><p>数据冗余和反规格化是一等公民。</p>
</li>
<li><p>关系型数据库对于处理层级数据和图式数据非常的不方便。NoSQL用来解决图式数据明显是一个非常好的解决方案，几乎所有的NoSQL数据库可以很强地解决此类问题。这就是为什么这篇文章专门拿出一章来说明层级数据模型。
下面是NoSQL的分类表，也是我用来写这篇文章时做实践的产品：</p>
</li>
<li><p>Key-Value 存储: Oracle Coherence, Redis, Kyoto Cabinet</p>
</li>
<li>类BigTable存储: Apache HBase, Apache Cassandra</li>
<li>文档数据库: MongoDB, CouchDB</li>
<li>全文索引: Apache Lucene, Apache Solr</li>
<li>图数据库: neo4j, FlockDB</li>
</ul>
<h3 id="-conceptual-techniques">概念技术 Conceptual Techniques</h3>
<p>这一节主要介绍NoSQL数据模型的基本原则。</p>
<h3 id="-1-denormalization">(1) 反规格化 Denormalization</h3>
<p>反规格化 Denormalization 可以被认为是把相同的数据拷贝到不同的文档或是表中，这样就可以简化和优化查询，或是正好适合用户的某中特别的数据模型。这篇文章中所说的绝大多数技术都或多或少地导向了这一技术。</p>
<p>总体来说，反规格化需要权衡下面这些东西：</p>
<ul>
<li><p><strong><em>查询数据量 /查询IO</em></strong> VS  <strong><em>总数据量</em></strong>。使用反规格化，一方面可以把一条查询语句所需要的所有数据组合起来放到一个地方存储。这意味着，其它不同不同查询所需要的相同的数据，需要放在别不同的地方。因此，这产生了很多冗余的数据，从而导致了数据量的增大。</p>
</li>
<li><p><strong><em>处理复杂度</em></strong> VS <strong><em>总数据量</em></strong>. 在符合范式的数据模式上进行表连接的查询，很显然会增加了查询处理的复杂度，尤其对于分布式系统来说更是。反规格化的数据模型允许我们以方便查询的方式来存构造数据结构以简化查询复杂度。</p>
</li>
</ul>
<p><strong>适用性</strong>: Key-Value Store 键值对数据库， Document Databases文档数据库， BigTable风格的数据库。</p>
<h3 id="-2-aggregates">(2) 聚合 Aggregates</h3>
<p>所有类型的NoSQL数据库都会提供灵活的Schema（数据结构，对数据格式的限制）：</p>
<ul>
<li><p>Key-Value Stores 和 Graph Databases 基本上来说不会Value的形式，所以Value可以是任意格式。这样一来，这使得我们可以任意组合一个业务实体的keys。比如，我们有一个用户帐号的业务实体，其可以被如下这些key组合起来： <em>UserID_name, UserID_email, UserID_messages</em> 等等。如果一个用户没有email或message，那么相应也不会有这样的记录。</p>
</li>
<li><p>BigTable 模型通过列集合来支持灵活的Schema，我们称之为列族（<em>column family</em>）。BigTable还可以在同一记录上出现不同的版本（通过时间戳）。</p>
</li>
<li><p>Document databases 文档数据库是一种层级式的“去Schema”的存储，虽然有些这样的数据库允许检验需要保存的数据是否满足某种Schema。</p>
</li>
</ul>
<p>灵活的Schema允许你可以用一种嵌套式的内部数据方式来存储一组有关联的业务实体（陈皓注：类似于JSON这样的数据封装格式）。这样可以为我们带来两个好处。</p>
<ul>
<li><p>最小化“一对多”关系——可以通过嵌套式的方式来存储实体，这样可以少一些表联结。</p>
</li>
<li><p>可以让内部技术上的数据存储更接近于业务实体，特别是那种混合式的业务实体。可能存于一个文档集或是一张表中。
下图示意了这两种好处。图中描给了电子商务中的商品模型（陈皓注：我记得我在“<a href="http://coolshell.cn/articles/7048.html" title="挑战无处不在" target="_blank">挑战无处不在</a>”一文中说到过电商中产品分类数据库设计的挑战）</p>
</li>
<li><p>首先，所有的商品Product都会有一个ID，Price 和 Description。</p>
</li>
<li><p>然后，我们可以知道不同的类型的商品会有不同的属性。比如，作者是书的属性，长度是牛仔裤的属性。其些属性可能是“一对多”或是“多对多”的关系，如：唱片中的曲目。</p>
</li>
<li><p>接下来，我们知道，某些业务实体不可能使用固定的类型。如：牛仔裤的属性并不是所有的牌子都有的，而且，有些名牌还会搞非常特别的属性。</p>
</li>
</ul>
<p>对于关系型数据库来说，要设计这样的数据模型并不简单，而且设计出来的绝对离优雅很远很远。而我们NoSQL中灵活的Schema允许你使用一个聚合 Aggregate (product) 可以建出所有不同种类的商品和他们的不同的属性：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/soft-schema2.png" target="_blank"><img src="&quot;soft-schema&quot;" alt=""></a></p>
<p>Entity Aggregation</p>
<p>上图中我们可以比较关系型数据库和NoSQL的差别。<strong>但是我们可以看到在数据更新上，非规格化的数据存储在性能和一致性上会有很大的影响，这就是我们需要重点注意和不得不牺牲的地方</strong>。</p>
<p><strong>适用性</strong>: Key-Value Store 键值对数据库， Document Databases文档数据库， BigTable风格的数据库。</p>
<h3 id="-3-application-side-joins">(3) 应用层联结 Application Side Joins</h3>
<p>表联结基本上不被NoSQL支持。正如我们前面所说的，NoSQL是“面向问题”而不是“面向答案”的，不支持表联结就是“面向问题”的后果。表的联结是在设计时被构造出来的，而不是在执行时建造出来的。所以，表联结在运行时是有很大开销的（陈皓注：搞过SQL表联结的都知道笛卡尔积是什么东西，大可以在参看以前酷壳的“<a href="http://coolshell.cn/articles/3463.html" title="图解SQL的Join" target="_blank">图解数据库表Joins</a>”），但是在使用了 Denormalization 和 Aggregates 技术后，我们基本不用进行表联结，如：你们使用嵌套式的数据实体。当然，如果你需要联结数据，你需要在应用层完成这个事。下面是几个主要的Use Case：</p>
<ul>
<li><p>多对多的数据实体关系——经常需要被连接或联结。</p>
</li>
<li><p>聚合 Aggregates 并不适用于数据字段经常被改变的情况。对此，我们需要把那些经常被改变的字段分到另外的表中，而在查询时我们需要联结数据。例如，我们有个Message系统可以有一个User实体，其包括了一个内嵌的Message实体。但是，如果用户不断在附加 message，那么，最好把message拆分到另一个独立的实体，但在查询时联结这User和Message这两个实体。如下图：</p>
</li>
</ul>
<p><a href="http://coolshell.cn//wp-content/uploads/2012/05/aggregates-joins.png" target="_blank"><img src="&quot;aggregates-joins&quot;" alt=""></a></p>
<p><strong>适用性</strong>: Key-Value Store 键值对数据库， Document Databases文档数据库， BigTable风格的数据库， Graph Databases 图数据库。</p>
<h3 id="-general-modeling-techniques">通用建模技术 General Modeling Techniques</h3>
<p>在本书中，我们将讨论NoSQL中各种不同的通用的数据建模技术。</p>
<h3 id="-4-atomic-aggregates">(4) 原子聚合 Atomic Aggregates</h3>
<p>很多NoSQL的数据库（并不是所有）在事务处理上都是短板。在某些情况下，他们可以通过分布式锁技术或是<a href="http://highlyscalable.wordpress.com/2012/01/07/mvcc-transactions-key-value/" title="Implementation of MVCC Transactions for Key-Value Stores" target="_blank">应用层管理的MVCC技术</a>来实现其事务性（陈皓注：可参看本站的“<a href="http://coolshell.cn/articles/6790.html" title="多版本并发控制(MVCC)在分布式系统中的应用" target="_blank">多版本并发控制(MVCC)在分布式系统中的应用</a>”）但是，通常来说只能使用聚合Aggregates技术来保证一些ACID原则。</p>
<p>这就是为什么我们的关系型数据库需要有强大的事务处理机制——因为关系型数据库的数据是被规格化存放在了不同的地方。所以，Aggregates聚合允许我们把一个业务实体存成一个文档、存成一行，存成一个key-value，这样就可以原子式的更新了：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/atomic-aggregate1.png"><img src="&quot;atomic-aggregate&quot;" alt="">
</a>Atomic Aggregates</p>
<p>当然，原子聚合 Atomic Aggregates 这种数据模型并不能实现完全意义上的事务处理，但是如果支持原子性，锁，或 test-and-set 指令，那么， Atomic Aggregates 是可以适用的。</p>
<p><strong>**适用性</strong>: **Key-Value Store 键值对数据库， Document Databases文档数据库， BigTable风格的数据库。</p>
<h3 id="-5-enumerable-keys">(5) 可枚举键 Enumerable Keys</h3>
<p>也许，对于无顺序的Key-Value最大的好处是业务实体可以被容易地hash以分区在多个服务器上。而排序了的key会把事情搞复杂，但是有些时候，一个应用能从排序key中获得很多好处，就算是数据库本身不提供这个功能。让我们来思考下email消息的数据模型：</p>
<ol>
<li>一些NoSQL的数据库提供原子计数器以允许生一些连续的ID。在这种情况下，我们可以使用 <em>userID_messageID</em> 来做为一个组合key。如果我们知道最新的message ID，就可以知道前一个message，也可能知道再前面和后面的Message。</li>
<li>Messages可以被打包。比如，每天的邮件包。这样，我们就可以对邮件按指定的时间段来遍历。</li>
</ol>
<p><strong>**</strong>适用性<strong>: **</strong>Key-Value Store 键值对数据库<strong>。</strong></p>
<h3 id="-6-dimensionality-reduction">(6) 降维 Dimensionality Reduction</h3>
<p>Dimensionality Reduction 降维是一种技术可以允许把一个多维的数据映射成一个Key-Value或是其它非多给的数据模型。</p>
<p>传统的地理位置信息系统使用一些如“四分树<a href="http://en.wikipedia.org/wiki/Quadtree" target="_blank">QuadTree</a>” 或 “<a href="http://en.wikipedia.org/wiki/R-tree" target="_blank">R-Tree</a>” 来做地理位置索引。这些数据结构的内容需要被在适当的位置更新，并且，如果数据量很大的话，操作成本会很高。另一个方法是我们可以遍历一个二维的数据结构并把其扁平化成一个列表。一个众所周知的例子是<a href="http://en.wikipedia.org/wiki/Geohash" target="_blank">Geohash</a>（地理哈希）。一个Geohash使用“之字形”的路线扫描一个2维的空间，而且遍历中的移动可以被简单地用0和1来表示其方向，然后在移动的过程中产生0/1串。下图展示了这一算法：（陈皓注：先把地图分成四份，经度为第一位，纬度为第二位，于是左边的经度是0，右边的是1，纬度也一样，上面是为1，下面的为0，这样，经纬度就可以组合成01，11，00，10这四个值，其标识了四块区域，我们可以如此不断的递归地对每个区域进行四分，然后可以得到一串1和0组成的字串，然后使用0-9，b-z 去掉（去掉a, i, l, o）这32个字母进行base32编码得到一个8个长度的编码，这就是Geohash的算法）
<a href="http://coolshell.cn//wp-content/uploads/2012/05/geohash-traversal1.png"><img src="&quot;geohash-traversal&quot;" alt="">
</a>Geohash Index</p>
<p>Geohash的最强大的功能是使用简单的位操作就可以知道两个区域间的距离，就像图中所示（陈皓：proximity框着的那两个，这个很像IP地址了）。Geohash把一个二维的坐标生生地变成了一个一维的数据模型，这就是降维技术。BigTable的降维技术参看到文章后面的 [6.1]。更多的关于Geohash和其它技术可以参看 [6.2] 和 [6.3]。</p>
<p><strong>**</strong>适用性<strong>:**</strong> Key-Value Store 键值对数据库， Document Databases文档数据库， BigTable风格的数据库。</p>
<h3 id="-7-index-table">(7) 索引表 Index Table</h3>
<p>Index Table 索引表是一个非常直白的技术，其可以你在不支持索引的数据库中得到索引的好处。BigTable是这类最重要的数据库。这需要我们维护一个有相应存取模式的特别表。例如，我们有一个主表存着用户帐号，其可以被UserID存取。某查询需要查出某个城市里所有的用户，于是我们可以加入一张表，这张表用城市做主键，所有和这个城市相关的UserID是其Value，如下所示：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/index-table.png"><img src="&quot;index-table&quot;" alt="">
</a>Index Table Example</p>
<p>可见，城市索引表的需要和对主表用户表保持一致性，因此，主表的每一个更新可能需要对索引表进行更新，不然就是一个批处理更新。无论哪个方式，这都会损伤一些性能，因为需要保持一致性。</p>
<p>Index Table 索引表可以被认为是关系型数据库中的视图的等价物。</p>
<p><strong>适用性</strong>: BigTable 数据库。</p>
<h3 id="-8-composite-key-index">(8) 键组合索引 Composite Key Index</h3>
<p>Composite key 键组合是一个很常用的技术，对此，当我们的数据库支持键排序时能得到极大的好处。Composite key组合键的拼接成为第二排序字段可以让你构建出一种多维索引，这很像我们之前说过的 Dimensionality Reduction 降维技术。例如，我们需要存取用户统计。如果我们需要根据不同的地区来统计用户的分布情况，我们可以把Key设计成这样的格式 <em>(State:City:UserID)</em>，这样一来，就使得我们可以通过State到City来按组遍历用户，特别是我们的NoSQL数据库支持在key上按区查询（如：BigTable类的系统）：
1</p>
<p>2
SELECT</p>
<p>Values</p>
<p>WHERE</p>
<p>state=</p>
<p>&quot;CA:/*&quot;</p>
<p>SELECT</p>
<p>Values</p>
<p>WHERE</p>
<p>city=</p>
<p>&quot;CA:San Francisco/*&quot;</p>
<p><a href="http://highlyscalable.files.wordpress.com/2012/03/composite-key-index.png"><img src="http://highlyscalable.files.wordpress.com/2012/03/composite-key-index.png?w=594" alt="" title="composite-key-index">
</a>Composite Key Index</p>
<p><strong>**适用性</strong>:**BigTable 数据库。</p>
<h3 id="-9-aggregation-with-composite-keys">(9) 键组合聚合 Aggregation with Composite Keys</h3>
<p>Composite keys  键组合技术并不仅仅可以用来做索引，同样可以用来区分不用的类型的数据以支持数据分组。考虑一个例子，我们有一个海量的日志数组，这个日志记录了互联网上的用户的访问来源。我们需要计算从某一网站过来的独立访客的数量，在关系型数据库中，我们可能需要下面这样的SQL查询语句：
1SELECT</p>
<p>count</p>
<p>(</p>
<p>distinct</p>
<p>(user_id))</p>
<p>FROM</p>
<p>clicks</p>
<p>GROUP</p>
<p>BY</p>
<p>site</p>
<p>我们可以在NoSQL中建立如下的数据模型：</p>
<p><a href="http://coolshell.cn//wp-content/uploads/2012/05/composite-key-collating1.png"><img src="&quot;composite-key-collating&quot;" alt="">
</a>Counting Unique Users using Composite Keys</p>
<p>这样，我们就可以把数据按UserID来排序，我们就可以很容易把同一个用户的数据（一个用户并不会产生太多的event）进行处理，去掉那些重复的站点（使用hash table或是别的什么）。另一个可选的技术是，我们可以对每一个用户建立一个数据实体，然后把其站点来源追加到这个数据实体中，当然，这样一来，数据的更新在性能相比之下会有一定损失。</p>
<p><strong>**适用性</strong>:** Ordered Key-Value Store 排序键值对数据库， BigTable风格的数据库。</p>
<hr>
<h3 id="-10-inverted-search-direct-aggregation">(10) 反转搜索 Inverted Search – 直接聚合 Direct Aggregation</h3>
<p>这个技术更多的是数据处理技术，而不是数据建模技术。尽管如此，这个技术还是会影响数据模型。这个技术最主要的想法是使用一个索引来找到满足某条件的数据，但是把数据聚合起需要使用全文搜索。还是让我们来说一个示例。还是用上面那个例子，我们有很多的日志，其中包括互联网用户和他们的访问来源。让我们假定每条记录都有一个UserID，还有用户的种类 (Men, Women, Bloggers, 等)，以及用户所在的城市，和访问过的站点。我们要干的事是，为每个用户种类找到满足某些条件（访问源，所在城市，等）的的独立用户。</p>
<p>很明显，我们需要搜索那些满足条件的用户，如果我们使用反转搜索，这会让我们把这事干得很容易，如： <em>{Category -&gt; [user IDs]}</em> 或 <em>{Site -&gt; [user IDs]}</em>。使用这样的索引， 我们可以取两个或多个UserID要的交集或并集（这个事很容易干，而且可以干得很快，如果这些UserID是排好序的）。但是，我们要按用户种类来生成报表会变得有点麻烦，因为我们用语句可能会像下面这样
1SELECT</p>
<p>count</p>
<p>(</p>
<p>distinct</p>
<p>(user_id)) ...</p>
<p>GROUP</p>
<p>BY</p>
<p>category</p>
<p>但这样的SQL很没有效率，因为category数据太多了。为了应对这个问题，我们可以建立一个直接索引 <em>{UserID -&gt; [Categories]}</em> 然后我们用它来生成报表：</p>
<p><a href="http://coolshell.cn//wp-content/uploads/2012/05/invert-direct1.png"><img src="&quot;invert-direct&quot;" alt="">
</a>Counting Unique Users using Inverse and Direct Indexes</p>
<p>最后，我们需要明白，对每个UserID的随机查询是很没有效率的。我们可以通过批查询处理来解决这个问题。这意味着，对于一些用户集，我们可以进行预处理（不同的查询条件）。</p>
<p><strong>适用性</strong>: Key-Value Store 键值对数据库， Document Databases文档数据库， BigTable风格的数据库。</p>
<h3 id="-hierarchy-modeling-techniques">层级式模型 Hierarchy Modeling Techniques</h3>
<h3 id="-11-tree-aggregation">(11) 树形聚合Tree Aggregation</h3>
<p>树形或是任意的图（需反规格化）可以被直接打成一条记录或文档存放。</p>
<ul>
<li>当树形结构被一次性取出时这会非常有效率（如：我们需要展示一个blog的树形评论）</li>
<li>搜索和任何存取这个实体都会存在问题。</li>
<li>对于大多数NoSQL的实现来说，更新数据都是很不经济的（相比起独立结点来说）
<a href="http://coolshell.cn//wp-content/uploads/2012/05/tree-aggregation.png"><img src="&quot;tree-aggregation&quot;" alt="">
</a>Tree Aggregation</li>
</ul>
<p><strong>适用性</strong>: Key-Value 键值对数据库, Document Databases 文档数据库</p>
<h3 id="-12-adjacency-lists">(12) 邻接列表 Adjacency Lists</h3>
<p>Adjacency Lists 邻接列表是一种图 – 每一个结点都是一个独立的记录，其包含了 所有的父结点或子结点。这样，我们就可以通过给定的父或子结点来进行搜索。当然，我们需要通过hop查询遍历图。这个技术在广度和深度查询，以及得到某个结点的子树上没有效率。</p>
<p><strong>适用性</strong>: Key-Value 键值对数据库, Document Databases 文档数据库</p>
<hr>
<h3 id="-13-materialized-paths">(13) Materialized Paths</h3>
<p>Materialized Paths 可以帮助避免递归遍历（如：树形结构）。这个技术也可以被认为是反规格化的一种变种。其想法是为每个结点加上父结点或子结点的标识属性，这样就可以不需要遍历就知道所有的后裔结点和祖先结点了：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/materialized-paths2.png"><img src="&quot;materialized-paths&quot;" alt="">
</a>Materialized Paths for eShop Category Hierarchy</p>
<p>这个技术对于全文搜索引擎来说非常有帮助，因为其可以允许把一个层级结构转成一个文档。上面的示图中我们可以看到所有的商品或<em>Men’s Shoes</em>下的子分类可以被一条很短的查询语句处理——只需要给定个分类名。</p>
<p>Materialized Paths 可以存储一个ID的集合，或是一堆ID拼出的字符串。后者允许你通过一个正则表达式来搜索一个特定的分支路径。下图展示了这个技术（分支的路径包括了结点本身）：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/materialized-paths-2.png"><img src="&quot;materialized-paths-2&quot;" alt="">
</a>Query Materialized Paths using RegExp</p>
<p><strong>适用性</strong>: Key-Value 键值对数据库, Document Databases 文档数据, Search Engines 搜索引擎</p>
<h3 id="-14-nested-sets">(14) 嵌套集 Nested Sets</h3>
<p><a href="http://en.wikipedia.org/wiki/Nested_set_model" target="_blank">Nested sets</a> 嵌套集是树形结构的标准技术。它被广泛地用在了关系性数据库中，它完全地适用于 Key-Value 键值对数据库 和 Document Databases 文档数据库。这个技术的想法是把叶子结点存储成一个数组，并通过使用索引的开始和结束来映射每一个非叶子结点到一个叶子结点集，就如下图所示一样：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/nested-sets.png"><img src="&quot;nested-sets&quot;" alt="">
</a>Modeling of eCommerce Catalog using Nested Sets</p>
<p>这样的数据结构对于immutable data不变的数据 有非常不错的效率，因为其点内存空间小，并且可以很快地找出所有的叶子结点而不需要树的遍历。尽管如此，在插入和更新上需要很高的性能成本，因为新的叶子结点需要大规模地更新索引。</p>
<p><strong>适用性</strong>: Key-Value Stores 键值数据库, Document Databases 文档数据库</p>
<h3 id="-15-nested-documents-flattening-numbered-field-names">(15) 嵌套文档扁平化：有限的字段名 Nested Documents Flattening: Numbered Field Names</h3>
<p>搜索引擎基本上来说和扁平文档一同工作，如：每一个文档是一个扁平的字段和值的例表。这种数据模型的用来把业务实体映射到一个文本文档上，如果你的业务实体有很复杂的内部结构，这可能会变得很有挑战。一个典型的挑战是把一个有层级的文档映映射出来。例如，文档中嵌套另一个文档。让我们看看下面的示例：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/nested-documents-1.png"><img src="&quot;nested-documents-1&quot;" alt="">
</a>Nested Documents Problem</p>
<p>上面的每一个业务实体代码一种简历。其包括了人名和一个技能列表。我把这个层级文档映射成一个文本文档，一种方法是创建 <em>Skill</em> 和 <em>Level</em> 字段。这个模型可以通过技术或是等级来搜索一个人，而上图标注的那样的组合查询则会失败。（陈皓注：因为分不清Excellent是否是Math还是Poetry上的）</p>
<p>在引用中的 [4.6] 给出了一种解决方案。其为每个字段都标上数字 <em>Skill_i</em> 和 <em>Level_i</em>，这样就可以分开搜索每一个对（下图中使用了OR来遍历查找所有可能的字段）:
<a href="http://coolshell.cn//wp-content/uploads/2012/05/nested-documents-3.png"><img src="&quot;nested-documents-3&quot;" alt="">
</a>Nested Document Modeling using Numbered Field Names</p>
<p>这样的方式根本没有扩展性，对于一些复杂的问题来说只会让代码复杂度和维护工作变大。</p>
<p><strong>适用性</strong>: Search Engines 全文搜索</p>
<h3 id="-16-nested-documents-flattening-proximity-queries">(16)嵌套文档扁平化：邻近查询 Nested Documents Flattening: Proximity Queries</h3>
<p>在附录 [4.6]中给出了这个技术用来解决扁平层次文档。它用邻近的查询来限制可被查询的单词的范围。下图中，所有的技能和等级被放在一个字段中，叫 SkillAndLevel，查询中出现的 “Excellent” 和 “Poetry” 必需一个紧跟另一个：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/nested-documents-2.png"><img src="&quot;nested-documents-2&quot;" alt="">
</a>Nested Document Modeling using Proximity Queries</p>
<p>附录 [4.3] 中讲述了这个技术被用在Solr中的一个成功案例。</p>
<p><strong>适用性</strong>: Search Engines 全文搜索</p>
<h3 id="-17-batch-graph-processing">(17) 图结构批处理 Batch Graph Processing</h3>
<p>Graph databases 图数据库，如 neo4j 是一个出众的图数据库，尤其是使用一个结点来探索邻居结点，或是探索两个或少量结点前的关系。但是处理大量的图数据是很没有效率的，因为图数据库的性能和扩展性并不是其目的。分布式的图数据处理可以被 MapReduce 和 Message Passing pattern 来处理。如： <a href="http://highlyscalable.wordpress.com/2012/02/01/mapreduce-patterns/" title="MapReduce Patterns, Algorithms, and Use Cases" target="_blank">在我前一篇的文章中的那个示例</a>。这个方法可以让 Key-Value stores, Document databases, 和 BigTable-style databases 适合于处理大图。</p>
<p><strong>Applicability</strong>: Key-Value Stores, Document Databases, BigTable-style Databases</p>
<h3 id="-">参考</h3>
<p>Finally, I provide a list of useful links related to NoSQL data modeling:</p>
<ol>
<li><p>Key-Value Stores:</p>
</li>
<li><p><a href="http://www.devshed.com/c/a/MySQL/Database-Design-Using-KeyValue-Tables/" target="_blank"><a href="http://www.devshed.com/c/a/MySQL/Database-Design-Using-KeyValue-Tables/">http://www.devshed.com/c/a/MySQL/Database-Design-Using-KeyValue-Tables/</a></a></p>
</li>
<li><a href="http://antirez.com/post/Sorting-in-key-value-data-model.html" target="_blank"><a href="http://antirez.com/post/Sorting-in-key-value-data-model.htm">http://antirez.com/post/Sorting-in-key-value-data-model.htm</a></a>l</li>
<li><a href="http://stackoverflow.com/questions/3554169/difference-between-document-based-and-key-value-based-databases" target="_blank"><a href="http://stackoverflow.com/questions/3554169/difference-between-document-based-and-key-value-based-databases">http://stackoverflow.com/questions/3554169/difference-between-document-based-and-key-value-based-databases</a></a></li>
<li><a href="http://dbmsmusings.blogspot.com/2010/03/distinguishing-two-major-types-of_29.html" target="_blank"><a href="http://dbmsmusings.blogspot.com/2010/03/distinguishing-two-major-types-of_29.html">http://dbmsmusings.blogspot.com/2010/03/distinguishing-two-major-types-of_29.html</a></a></li>
<li><p>BigTable-style Databases:</p>
</li>
<li><p><a href="http://www.slideshare.net/ebenhewitt/cassandra-datamodel-4985524" target="_blank"><a href="http://www.slideshare.net/ebenhewitt/cassandra-datamodel-4985524">http://www.slideshare.net/ebenhewitt/cassandra-datamodel-4985524</a></a></p>
</li>
<li><a href="http://www.slideshare.net/mattdennis/cassandra-data-modeling" target="_blank"><a href="http://www.slideshare.net/mattdennis/cassandra-data-modeling">http://www.slideshare.net/mattdennis/cassandra-data-modeling</a></a></li>
<li><a href="http://nosql.mypopescu.com/post/17419074362/cassandra-data-modeling-examples-with-matthew-f-dennis" target="_blank"><a href="http://nosql.mypopescu.com/post/17419074362/cassandra-data-modeling-examples-with-matthew-f-dennis">http://nosql.mypopescu.com/post/17419074362/cassandra-data-modeling-examples-with-matthew-f-dennis</a></a></li>
<li><a href="http://s-expressions.com/2009/03/08/hbase-on-designing-schemas-for-column-oriented-data-stores/" target="_blank"><a href="http://s-expressions.com/2009/03/08/hbase-on-designing-schemas-for-column-oriented-data-stores/">http://s-expressions.com/2009/03/08/hbase-on-designing-schemas-for-column-oriented-data-stores/</a></a></li>
<li><a href="http://jimbojw.com/wiki/index.php?title=Understanding_Hbase_and_BigTable" target="_blank"><a href="http://jimbojw.com/wiki/index.php?title=Understanding_Hbase_and_BigTable">http://jimbojw.com/wiki/index.php?title=Understanding_Hbase_and_BigTable</a></a></li>
<li><p>Document Databases:</p>
</li>
<li><p><a href="http://www.slideshare.net/mongodb/mongodb-schema-design-richard-kreuters-mongo-berlin-preso" target="_blank"><a href="http://www.slideshare.net/mongodb/mongodb-schema-design-richard-kreuters-mongo-berlin-preso">http://www.slideshare.net/mongodb/mongodb-schema-design-richard-kreuters-mongo-berlin-preso</a></a></p>
</li>
<li><a href="http://www.michaelhamrah.com/blog/2011/08/data-modeling-at-scale-mongodb-mongoid-callbacks-and-denormalizing-data-for-efficiency/" target="_blank"><a href="http://www.michaelhamrah.com/blog/2011/08/data-modeling-at-scale-mongodb-mongoid-callbacks-and-denormalizing-data-for-efficiency/">http://www.michaelhamrah.com/blog/2011/08/data-modeling-at-scale-mongodb-mongoid-callbacks-and-denormalizing-data-for-efficiency/</a></a></li>
<li><a href="http://seancribbs.com/tech/2009/09/28/modeling-a-tree-in-a-document-database/" target="_blank"><a href="http://seancribbs.com/tech/2009/09/28/modeling-a-tree-in-a-document-database/">http://seancribbs.com/tech/2009/09/28/modeling-a-tree-in-a-document-database/</a></a></li>
<li><a href="http://www.mongodb.org/display/DOCS/Schema+Design" target="_blank"><a href="http://www.mongodb.org/display/DOCS/Schema+Design">http://www.mongodb.org/display/DOCS/Schema+Design</a></a></li>
<li><a href="http://www.mongodb.org/display/DOCS/Trees+in+MongoDB" target="_blank"><a href="http://www.mongodb.org/display/DOCS/Trees+in+MongoDB">http://www.mongodb.org/display/DOCS/Trees+in+MongoDB</a></a></li>
<li><a href="http://blog.fiesta.cc/post/11319522700/walkthrough-mongodb-data-modeling" target="_blank"><a href="http://blog.fiesta.cc/post/11319522700/walkthrough-mongodb-data-modeling">http://blog.fiesta.cc/post/11319522700/walkthrough-mongodb-data-modeling</a></a></li>
<li><p>Full Text Search Engines:</p>
</li>
<li><p><a href="http://www.searchworkings.org/blog/-/blogs/query-time-joining-in-lucene" target="_blank"><a href="http://www.searchworkings.org/blog/-/blogs/query-time-joining-in-lucene">http://www.searchworkings.org/blog/-/blogs/query-time-joining-in-lucene</a></a></p>
</li>
<li><a href="http://www.lucidimagination.com/devzone/technical-articles/solr-and-rdbms-basics-designing-your-application-best-both" target="_blank"><a href="http://www.lucidimagination.com/devzone/technical-articles/solr-and-rdbms-basics-designing-your-application-best-both">http://www.lucidimagination.com/devzone/technical-articles/solr-and-rdbms-basics-designing-your-application-best-both</a></a></li>
<li><a href="http://blog.griddynamics.com/2011/07/solr-experience-search-parent-child.html" target="_blank"><a href="http://blog.griddynamics.com/2011/07/solr-experience-search-parent-child.html">http://blog.griddynamics.com/2011/07/solr-experience-search-parent-child.html</a></a></li>
<li><a href="http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/" target="_blank"><a href="http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/">http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/</a></a></li>
<li><a href="http://blog.mgm-tp.com/2011/03/non-standard-ways-of-using-lucene/" target="_blank"><a href="http://blog.mgm-tp.com/2011/03/non-standard-ways-of-using-lucene/">http://blog.mgm-tp.com/2011/03/non-standard-ways-of-using-lucene/</a></a></li>
<li><a href="http://www.slideshare.net/MarkHarwood/proposal-for-nested-document-support-in-lucene" target="_blank"><a href="http://www.slideshare.net/MarkHarwood/proposal-for-nested-document-support-in-lucene">http://www.slideshare.net/MarkHarwood/proposal-for-nested-document-support-in-lucene</a></a></li>
<li><a href="http://mysolr.com/tips/denormalized-data-structure/" target="_blank"><a href="http://mysolr.com/tips/denormalized-data-structure/">http://mysolr.com/tips/denormalized-data-structure/</a></a></li>
<li><a href="http://sujitpal.blogspot.com/2010/10/denormalizing-maps-with-lucene-payloads.html" target="_blank"><a href="http://sujitpal.blogspot.com/2010/10/denormalizing-maps-with-lucene-payloads.html">http://sujitpal.blogspot.com/2010/10/denormalizing-maps-with-lucene-payloads.html</a></a></li>
<li><a href="http://java.dzone.com/articles/hibernate-search-mapping-entit" target="_blank"><a href="http://java.dzone.com/articles/hibernate-search-mapping-entit">http://java.dzone.com/articles/hibernate-search-mapping-entit</a></a></li>
<li><p>Graph Databases:</p>
</li>
<li><p><a href="http://docs.neo4j.org/chunked/stable/tutorial-comparing-models.html" target="_blank"><a href="http://docs.neo4j.org/chunked/stable/tutorial-comparing-models.html">http://docs.neo4j.org/chunked/stable/tutorial-comparing-models.html</a></a></p>
</li>
<li><a href="http://blog.neo4j.org/2010/03/modeling-categories-in-graph-database.html" target="_blank"><a href="http://blog.neo4j.org/2010/03/modeling-categories-in-graph-database.html">http://blog.neo4j.org/2010/03/modeling-categories-in-graph-database.html</a></a></li>
<li><a href="http://skillsmatter.com/podcast/nosql/graph-modelling" target="_blank"><a href="http://skillsmatter.com/podcast/nosql/graph-modelling">http://skillsmatter.com/podcast/nosql/graph-modelling</a></a></li>
<li><a href="http://www.umiacs.umd.edu/%7Ejimmylin/publications/Lin_Schatz_MLG2010.pdf" target="_blank"><a href="http://www.umiacs.umd.edu/~jimmylin/publications/Lin_Schatz_MLG2010.pdf">http://www.umiacs.umd.edu/~jimmylin/publications/Lin_Schatz_MLG2010.pdf</a></a></li>
<li><p>Demensionality Reduction:</p>
</li>
<li><p><a href="http://www.slideshare.net/mmalone/scaling-gis-data-in-nonrelational-data-stores" target="_blank"><a href="http://www.slideshare.net/mmalone/scaling-gis-data-in-nonrelational-data-stores">http://www.slideshare.net/mmalone/scaling-gis-data-in-nonrelational-data-stores</a></a></p>
</li>
<li><a href="http://blog.notdot.net/2009/11/Damn-Cool-Algorithms-Spatial-indexing-with-Quadtrees-and-Hilbert-Curves" target="_blank"><a href="http://blog.notdot.net/2009/11/Damn-Cool-Algorithms-Spatial-indexing-with-Quadtrees-and-Hilbert-Curves">http://blog.notdot.net/2009/11/Damn-Cool-Algorithms-Spatial-indexing-with-Quadtrees-and-Hilbert-Curves</a></a></li>
<li><a href="http://www.trisis.co.uk/blog/?p=1287" target="_blank"><a href="http://www.trisis.co.uk/blog/?p=1287">http://www.trisis.co.uk/blog/?p=1287</a></a></li>
</ol>
<p>（全文完）
<strong>（转载本站文章请注明作者和出处 <a href="http://coolshell.cn/" target="_blank">酷壳 – CoolShell.cn</a> ，请勿用于任何商业用途）</strong></p>
<p>——=== <strong>访问 <a href="http://coolshell.cn/404/" target="_blank">酷壳404页面</a> 寻找遗失儿童。</strong> ===——
<a href="&quot;分享到新浪微博&quot;"></a> <a href="&quot;分享到腾讯微博&quot;"></a> <a href="&quot;分享到搜狐微博&quot;"></a> <a href="&quot;分享到网易微博&quot;"></a> <a href="&quot;分享到豆瓣&quot;"></a> <a href="&quot;分享到人人网&quot;"></a> <a href=""></a> <a href="&quot;分享到饭否&quot;"></a> <a href="&quot;分享到Twitter&quot;"></a> <a href="&quot;分享到Facebook&quot;"></a> <a href="&quot;分享到Gmail邮箱&quot;"></a> <a href="&quot;分享到LinkedIn&quot;"></a> <a href="&quot;分享到FriendFeed&quot;"></a> <a href="&quot;分享到Digg&quot;"></a> <a href="http://www.jiathis.com/share?uid=1541368" target="_blank"></a> <a href="">74</a>
分类: <a href="http://coolshell.cn/category/datebase" title="查看数据库中的全部文章" target="_blank">数据库</a> 标签: <a href="http://coolshell.cn/tag/database" target="_blank">Database</a>, <a href="http://coolshell.cn/tag/nosql" target="_blank">NoSQL</a>, <a href="http://coolshell.cn/tag/sql" target="_blank">SQL</a></p>
<p><img src="&quot;好烂啊&quot;" alt="好烂啊"><img src="&quot;有点差&quot;" alt="有点差"><img src="&quot;凑合看看&quot;" alt="凑合看看"><img src="&quot;还不错&quot;" alt="还不错"><img src="&quot;很精彩&quot;" alt="很精彩"> (<strong>10</strong> 人打了分，平均分： <strong>4.90</strong> )
<img src="&quot;Loading ...&quot;" alt="Loading ..."> Loading ...</p>
<h3 id="-">相关文章</h3>
<ul>
<li>2012年06月20日 -- <a href="http://coolshell.cn/articles/7490.html" target="_blank">性能调优攻略</a></li>
<li>2009年12月01日 -- <a href="http://coolshell.cn/articles/1889.html" target="_blank">SQL的Where语句</a></li>
<li>2012年12月10日 -- <a href="http://coolshell.cn/articles/8711.html" target="_blank">程序员疫苗：代码注入</a></li>
<li>2011年11月10日 -- <a href="http://coolshell.cn/articles/5826.html" target="_blank">千万别用MongoDB？真的吗？！</a></li>
<li>2009年11月27日 -- <a href="http://coolshell.cn/articles/1846.html" target="_blank">MySQL性能优化的最佳20+条经验</a></li>
<li>2009年04月24日 -- <a href="http://coolshell.cn/articles/652.html" target="_blank">MySQL: InnoDB 还是 MyISAM?</a></li>
<li>2010年12月31日 -- <a href="http://coolshell.cn/articles/3433.html" target="_blank">6个有用的MySQL语句</a></li>
<li>2009年06月05日 -- <a href="http://coolshell.cn/articles/962.html" target="_blank">【原创】SQL栏目树的代码</a>
<a href="http://www.zemanta.com/?wp-related-posts" target="_blank">Zemanta</a></li>
</ul>
<p><a href="">评论 (41)</a> <a href="">Trackbacks (5)</a> <a href="">发表评论</a> <a href="http://coolshell.cn/articles/7270.html/trackback" target="_blank">Trackback</a></p>
<ol>
<li><img src="" alt=""></li>
</ol>
<p>Tesla</p>
<p>2012年5月15日09:08 | <a href="">/#1</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
总算更新了，第一次占沙发</p>
<ol>
<li><img src="" alt=""></li>
</ol>
<p><a href="http://dabentu.com/" target="_blank">大笨兔</a></p>
<p>2012年5月15日09:09 | <a href="">/#2</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
文章很长，先抢个沙发，呵呵。
现在我正在自学PHP和JS。书上的
都是一些很简单的小例子，根本不会
有什么业务上的项目，对这个有点迷惑</p>
<ol>
<li><img src="" alt=""></li>
</ol>
<p><a href="http://blog.thephper.com/" target="_blank">板子</a></p>
<p>2012年5月15日09:34 | <a href="">/#3</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
好文,mark，下班后细读</p>
<ol>
<li><img src="" alt=""></li>
</ol>
<p>013231</p>
<p>2012年5月15日09:47 | <a href="">/#4</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
“时间截”應爲”時間戳”吧?</p>
<ol>
<li><img src="" alt=""></li>
</ol>
<p>wiizane</p>
<p>2012年5月15日10:43 | <a href="">/#5</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
博主雷锋啊~~</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://coolshell.cn/" target="_blank">陈皓</a></p>
<p>2012年5月15日12:22 | <a href="">/#6</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
凤姐要嫁给方舟子才是活雷锋。呵呵。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>ciel</p>
<p>2012年5月15日11:31 | <a href="">/#7</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
其实NoSQL只是SQL的re-approach吧.</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>bluishoul</p>
<p>2012年5月15日12:49 | <a href="">/#8</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
<a href="http://highlyscalable.files.wordpress.com/2012/03/aggregates-joins.png?w=594" target="_blank"><a href="http://highlyscalable.files.wordpress.com/2012/03/aggregates-joins.png?w=594">http://highlyscalable.files.wordpress.com/2012/03/aggregates-joins.png?w=594</a></a> 这个图看不到…</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://www.90blog.org/" target="_blank">90博客</a></p>
<p>2012年5月15日12:50 | <a href="">/#9</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
mark~</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://program.upc.edu.cn/kaitian" target="_blank">kaitian</a></p>
<p>2012年5月15日13:28 | <a href="">/#10</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
看过redis的代码，觉得底层的数据结构真是实现的太底层了，差一点连malloc函数都换了。 Nosql特别适合做缓存，呵呵
好文，感谢博主~~~</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>火力fire</p>
<p>2012年5月15日20:47 | <a href="">/#11</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
云计算会进一步刺激nosql的流行吗，mangodb之类的</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://chen-xiao.com/" target="_blank">chen-xiao</a></p>
<p>2012年5月15日23:19 | <a href="">/#12</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
感觉nosql就是一个带有安全保障的cache</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://hi.baidu.com/leejun_2005/home" target="_blank">june_1201</a></p>
<p>2012年5月15日23:54 | <a href="">/#13</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
额。。。楼主哪来这么多时间写这么长的文章呵~</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>YY</p>
<p>2012年5月16日14:43 | <a href="">/#14</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
<strong><a href="">bluishoul</a> :</strong><a href="http://highlyscalable.files.wordpress.com/2012/03/aggregates-joins.png?w=594" target="_blank"><a href="http://highlyscalable.files.wordpress.com/2012/03/aggregates-joins.png?w=594">http://highlyscalable.files.wordpress.com/2012/03/aggregates-joins.png?w=594</a></a> 这个图看不到…</p>
<p>(8) 键组合索引 Composite Key Index的配图…wordpress，显然被墙了</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://www.doxer.org/" target="_blank">learn linux</a></p>
<p>2012年5月16日16:21 | <a href="">/#15</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
很给力.问下,sqlite是nosql的一种吗</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://redich.com/" target="_blank">罗迦费升格</a></p>
<p>2012年5月16日17:02 | <a href="">/#16</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
刚开始以为是mysql。。。看来我最近接触mysql太多了，看花眼了</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>鸣</p>
<p>2012年5月16日19:36 | <a href="">/#17</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
这个正是我急需要的资料，正在使用mongo</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>偶系老虎</p>
<p>2012年5月16日20:58 | <a href="">/#18</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
完全没有大数据集合的使用经验和机会啊。。。真希望能参与这种工作。。。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://solf.me/" target="_blank">Solf</a></p>
<p>2012年5月16日21:20 | <a href="">/#19</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
Mark一下，虽然还是不太懂</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>阿德</p>
<p>2012年5月17日07:41 | <a href="">/#20</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
高质量， 技术细节比较清楚</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://deleted/" target="_blank">000</a></p>
<p>2012年5月17日16:32 | <a href="">/#21</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
好文章。。。。
LZ辛苦了。。。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>lcl</p>
<p>2012年5月17日20:33 | <a href="">/#22</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
图是用什么工具画的呢？很专业</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://coolshell.cn/" target="_blank">陈皓</a></p>
<p>2012年5月17日23:56 | <a href="">/#23</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
ppt</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>zukhz</p>
<p>2012年5月18日09:15 | <a href="">/#24</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
真正的干货… 好文啊…</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://imlcl.com/" target="_blank">大头龙仔</a></p>
<p>2012年5月18日11:41 | <a href="">/#25</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
有意思啊，好文！！！</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://tangzhan.li/" target="_blank">AlsoTang</a></p>
<p>2012年5月19日14:27 | <a href="">/#26</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
<a href="">@learn linux</a>
sqlite是SQL数据库，不是NoSQL的。它是个轻量级的SQL数据库。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>000</p>
<p>2012年5月19日14:59 | <a href="">/#27</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
刚开始以为是mysql。。。看来我最近接触mysql太多了，看花眼了</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://deleted/" target="_blank">000</a></p>
<p>2012年5月21日14:58 | <a href="">/#28</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
完全没有大数据集合的使用经验和机会啊。。。真希望能参与这种工作。。。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>coofucoo</p>
<p>2012年5月22日14:30 | <a href="">/#29</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
翻译的确实值得提高，看到一半直接去看英文了。
NOSQL只适合做cache有点绝对了。如果说我们平日用不到NOSQL的话很可能是我们的应用还没有需要那么高的扩展性。什么需求用什么技术，倒不是说NOSQL就解决所有问题。
NOSQL建模技术中所透露的信息实际上绝大多数还是反规范化技术。一般在企业开发时这种反规范化技术都是在性能优化时用的。这种方式可以适合企业开发主要是因为两点：
1，企业开发数据量和规模都远远小于互联网应用。
2，企业应用增长速度也往往比较缓慢，可以有时间应对。
相反互联网应用在前两条上都不成立，所以设计互联网应用时更需要经验，必须在数据建模时就考虑性能做一些反规范化处理，从而不会在未来高速增长过程中出现问题。这就又给程序员们提出了新的挑战。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://coolshell.cn/" target="_blank">陈皓</a></p>
<p>2012年5月22日16:10 | <a href="">/#30</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
期待你也能写自己的博客。另，你后面说的那两点只能说明你对企业和互联网都还不是很懂，努力哦。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://deleted/" target="_blank">000</a></p>
<p>2012年5月23日15:51 | <a href="">/#31</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
顶~~~谢谢分享！！好文</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://www.chajian8.com/" target="_blank">插件吧chajian8.com</a></p>
<p>2012年5月27日09:21 | <a href="">/#32</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
好文章，谢谢分享。。。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>Sorra</p>
<p>2012年6月7日22:44 | <a href="">/#33</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
哇，原来这篇被翻译出来了啊！我存的英文版看得有点费劲（有的逻辑连接词看不明白……）
太好了，感谢！</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://www.tltesoft.com/" target="_blank">1111111</a></p>
<p>2012年6月13日10:04 | <a href="">/#34</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
楼主辛苦了</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>jialin</p>
<p>2012年6月28日09:10 | <a href="">/#35</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
好文，大数据特火，看了该文，明白不少。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>qqloving</p>
<p>2012年7月12日18:34 | <a href="">/#36</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
好文,mark，下班后细读</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>labchy</p>
<p>2012年7月17日13:45 | <a href="">/#37</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
很有收获 谢谢分享</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>qqloving</p>
<p>2012年7月17日16:31 | <a href="">/#38</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
再看了一遍还是不是很懂。。。。。。。。。。。。。。。。。。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://jifuwenti.com/" target="_blank">肌肤问题</a></p>
<p>2012年10月17日13:32 | <a href="">/#39</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
刚刚打算用mongodb。
过来先看看建模。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://jifuwenti.com/" target="_blank">帅哥恶搞</a></p>
<p>2013年3月29日16:37 | <a href="">/#40</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
挺好的，最近打算入门mongodb.感觉不难</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="https://github.com/xussen/kite" target="_blank">xusensen</a></p>
<p>2013年7月19日14:53 | <a href="">/#41</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
您文中有句话【但这样的SQL很没有效率，因为category数据太多了。】
我查看了下原文【cannot be handled efficiently using an inverted index if the number of categories is big.】
在没看原文之前，我以为的意思是【SELECT count(distinct(user_id)) … GROUP BY category】这个SQL由于每个category对应的UserID值太多，造成效率差。但这里应该是指的Inverted Index的方式，不会因为UserID值太多而影响性能。
实在理解不了，后来瞄了下原文，发现对应的意思是如果category的数量多，会造成每个category都需要进行一次计算(合并)才能统计出报表
原文这句话好像没有说上面的SQL性能差，而是针对【inverted index】说的。</p>
<ol>
<li>2012年5月21日01:01 | <a href="">/#1</a></li>
</ol>
<p><a href="http://www.chinasb.org/archives/2012/05/4653.shtml" target="_blank">NoSQL 数据建模技术 | Chinasb&#39;s Blog</a></p>
<ol>
<li>2012年5月25日22:55 | <a href="">/#2</a></li>
</ol>
<p><a href="http://www.yiihsia.com/2012/05/nosql-%e6%95%b0%e6%8d%ae%e5%bb%ba%e6%a8%a1%e6%8a%80%e6%9c%af/" target="_blank">NoSQL 数据建模技术 | _yiihsia[互联网后端技术]</a></p>
<ol>
<li>2012年8月4日10:45 | <a href="">/#3</a></li>
</ol>
<p><a href="http://cache.fz-dxc.com/c23852/" target="_blank">NoSQL前传 – 关系型数据库的使用演进 – 龙猫</a></p>
<ol>
<li>2012年12月31日22:27 | <a href="">/#4</a></li>
</ol>
<p><a href="http://www.hi-yuanpeng.com/?p=259" target="_blank">转载：NoSQL 数据建模技术 | Yuan Peng`s Tech Blog</a></p>
<ol>
<li>2013年8月11日12:48 | <a href="">/#5</a></li>
</ol>
<p><a href="http://www.kaifazhe.com/database/210601.html" target="_blank">NoSQLDataModelingTechniques – 数据库 – 开发者</a>
昵称 (必填)</p>
<p>电子邮箱 (我们会为您保密) (必填)
网址</p>
<p><a href="http://coolshell.cn/comments/feed" target="_blank">订阅评论</a></p>
<p><a href="http://coolshell.cn/articles/7425.html" target="_blank">rsync 的核心算法</a> <a href="http://coolshell.cn/articles/7236.html" target="_blank">用Unix的设计思想来应对多变的需求</a></p>
<p><a href="http://coolshell.cn/feed" title="订阅这个博客的文章" target="_blank">订阅</a></p>
<ul>
<li><a href="http://fusion.google.com/add?feedurl=http://coolshell.cn/feed" title="订阅到 Google" target="_blank">Google</a></li>
<li><a href="http://reader.youdao.com/#url=http://coolshell.cn/feed" title="订阅到有道" target="_blank">有道</a></li>
<li><a href="http://www.xianguo.com/subscribe.php?url=http://coolshell.cn/feed" title="订阅到鲜果" target="_blank">鲜果</a></li>
<li><a href="http://www.zhuaxia.com/add_channel.php?url=http://coolshell.cn/feed" title="订阅到抓虾" target="_blank">抓虾</a></li>
<li><a href="http://add.my.yahoo.com/rss?url=http://coolshell.cn/feed" title="订阅到 My Yahoo!" target="_blank">My Yahoo!</a></li>
<li><a href="http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://coolshell.cn/feed" title="订阅到 newsgator" target="_blank">newsgator</a></li>
<li><a href="http://www.bloglines.com/sub/http://coolshell.cn/feed" title="订阅到 Bloglines" target="_blank">Bloglines</a></li>
<li><a href="http://inezha.com/add?url=http://coolshell.cn/feed" title="订阅到哪吒" target="_blank">哪吒</a></li>
<li><a href="http://mail.qq.com/cgi-bin/feed?u=http://coolshell.cn/feed" title="订阅到QQ Mail" target="_blank">QQ Mail</a></li>
<li><a href="http://9.douban.com/reader/subscribe?url=http://coolshell.cn/feed" title="订阅到Douban" target="_blank">Douban</a></li>
<li><a href="http://www.rojo.com/add-subscription?resource=http://coolshell.cn/feed" title="订阅到Rojo" target="_blank">Rojo</a></li>
<li><a href="http://www.pageflakes.com/subscribe.aspx?url=http://coolshell.cn/feed" title="订阅到Pageflakes" target="_blank">Pageflakes</a>
<a href="http://twitter.com/haoel/" title="Follow me!" target="_blank">Twitter</a></li>
</ul>
<h3 id="-">本站公告</h3>
<p>访问 <a href="http://coolshell.cn/404/" target="_blank">酷壳404页面</a> 寻找遗失儿童！</p>
<p>酷壳建议大家多使用RSS访问阅读（本站已经是全文输出，推荐使用cloud.feedly.com 或 digg.com）。有相关事宜欢迎电邮：haoel(at)hotmail.com。最后，感谢大家对酷壳的支持和体谅！</p>
<p><strong>感谢 <a href="http://42qu.com/" title="42区 找到给你答案的人" target="_blank">42qu.com</a> 为本站提供 <a href="http://vps.42qu.com/" title="42区虚拟主机，卖给创业的你" target="_blank">VPS</a></strong></p>
<h3 id="-">最新文章</h3>
<ul>
<li><a href="http://coolshell.cn/articles/10337.html" title="数据即代码：元驱动编程" target="_blank">数据即代码：元驱动编程</a></li>
<li><a href="http://coolshell.cn/articles/10192.html" title="数据的游戏：冰与火" target="_blank">数据的游戏：冰与火</a></li>
<li><a href="http://coolshell.cn/articles/10249.html" title="7个示例科普CPU Cache" target="_blank">7个示例科普CPU Cache</a></li>
<li><a href="http://coolshell.cn/articles/10217.html" title="加班与效率" target="_blank">加班与效率</a></li>
<li><a href="http://coolshell.cn/articles/10169.html" title="类型的本质和函数式实现" target="_blank">类型的本质和函数式实现</a></li>
<li><a href="http://coolshell.cn/articles/10115.html" title="C语言全局变量那些事儿" target="_blank">C语言全局变量那些事儿</a></li>
<li><a href="http://coolshell.cn/articles/9886.html" title="二叉树迭代器算法" target="_blank">二叉树迭代器算法</a></li>
<li><a href="http://coolshell.cn/articles/9917.html" title="Alan Cox：大教堂、市集与市议会" target="_blank">Alan Cox：大教堂、市集与市议会</a></li>
<li><a href="http://coolshell.cn/articles/9949.html" title="IoC/DIP其实是一种管理思想" target="_blank">IoC/DIP其实是一种管理思想</a></li>
<li><a href="http://coolshell.cn/articles/9859.html" title="Alan Cox：单向链表中prev指针的妙用" target="_blank">Alan Cox：单向链表中prev指针的妙用</a></li>
<li><a href="http://coolshell.cn/articles/9749.html" title="Javascript 装载和执行" target="_blank">Javascript 装载和执行</a></li>
<li><a href="http://coolshell.cn/articles/9703.html" title="无锁HashMap的原理与实现" target="_blank">无锁HashMap的原理与实现</a></li>
<li><a href="http://coolshell.cn/articles/9666.html" title="浏览器的渲染原理简介" target="_blank">浏览器的渲染原理简介</a></li>
<li><a href="http://coolshell.cn/articles/9606.html" title="疫苗：Java HashMap的死循环" target="_blank">疫苗：Java HashMap的死循环</a></li>
<li><a href="http://coolshell.cn/articles/9543.html" title="“C++的数组不支持多态”？" target="_blank">“C++的数组不支持多态”？</a></li>
<li><a href="http://coolshell.cn/articles/9410.html" title="Unix考古记：一个“遗失”的shell" target="_blank">Unix考古记：一个“遗失”的shell</a></li>
<li><a href="http://coolshell.cn/articles/9508.html" title="PFIF网上寻人协议" target="_blank">PFIF网上寻人协议</a></li>
<li><a href="http://coolshell.cn/articles/9308.html" title="“作环保的程序员，从不用百度开始”" target="_blank">“作环保的程序员，从不用百度开始”</a></li>
<li><a href="http://coolshell.cn/articles/9156.html" title="《Rework》摘录及感想" target="_blank">《Rework》摘录及感想</a></li>
<li><a href="http://coolshell.cn/articles/9229.html" title="实例分析Java Class的文件结构" target="_blank">实例分析Java Class的文件结构</a></li>
<li><a href="http://coolshell.cn/articles/9169.html" title="并发框架Disruptor译文" target="_blank">并发框架Disruptor译文</a></li>
<li><a href="http://coolshell.cn/articles/9104.html" title="sed 简明教程" target="_blank">sed 简明教程</a></li>
<li><a href="http://coolshell.cn/articles/9070.html" title="AWK 简明教程" target="_blank">AWK 简明教程</a></li>
<li><a href="http://coolshell.cn/articles/8990.html" title="Linus：利用二级指针删除单向链表" target="_blank">Linus：利用二级指针删除单向链表</a></li>
<li><a href="http://coolshell.cn/articles/8961.html" title="从面向对象的设计模式看软件设计" target="_blank">从面向对象的设计模式看软件设计</a></li>
<li><a href="http://coolshell.cn/articles/8883.html" title="应该知道的Linux技巧" target="_blank">应该知道的Linux技巧</a></li>
<li><a href="http://coolshell.cn/articles/8790.html" title="程序算法与人生选择" target="_blank">程序算法与人生选择</a></li>
<li><a href="http://coolshell.cn/articles/8767.html" title="Web工程师的工具箱" target="_blank">Web工程师的工具箱</a></li>
<li><a href="http://coolshell.cn/articles/8745.html" title="如此理解面向对象编程" target="_blank">如此理解面向对象编程</a></li>
<li><a href="http://coolshell.cn/articles/8711.html" title="程序员疫苗：代码注入" target="_blank">程序员疫苗：代码注入</a></li>
</ul>
<h3 id="-">全站热门</h3>
<ul>
<li><a href="http://coolshell.cn/articles/4990.html" title="程序员技术练级攻略 - 320,838 人阅读" target="_blank">程序员技术练级攻略</a></li>
<li><a href="http://coolshell.cn/articles/5426.html" title="简明 Vim 练级攻略 - 240,730 人阅读" target="_blank">简明 Vim 练级攻略</a></li>
<li><a href="http://coolshell.cn/articles/4102.html" title="如何学好C语言 - 119,709 人阅读" target="_blank">如何学好C语言</a></li>
<li><a href="http://coolshell.cn/articles/914.html" title="6个变态的C语言Hello World程序 - 114,605 人阅读" target="_blank">6个变态的C语言Hello World程序</a></li>
<li><a href="http://coolshell.cn/articles/6470.html" title="由12306.cn谈谈网站性能技术 - 94,388 人阅读" target="_blank">由12306.cn谈谈网站性能技术</a></li>
<li><a href="http://coolshell.cn/articles/8883.html" title="应该知道的Linux技巧 - 92,102 人阅读" target="_blank">应该知道的Linux技巧</a></li>
<li><a href="http://coolshell.cn/articles/2250.html" title="“21天教你学会C++” - 90,817 人阅读" target="_blank">“21天教你学会C++”</a></li>
<li><a href="http://coolshell.cn/articles/3549.html" title="Android将允许纯C/C++开发应用 - 89,548 人阅读" target="_blank">Android将允许纯C/C++开发应用</a></li>
<li><a href="http://coolshell.cn/articles/1870.html" title="我是怎么招聘程序员的 - 88,447 人阅读" target="_blank">我是怎么招聘程序员的</a></li>
<li><a href="http://coolshell.cn/articles/7186.html" title="做个环保主义的程序员 - 87,956 人阅读" target="_blank">做个环保主义的程序员</a></li>
<li><a href="http://coolshell.cn/articles/9308.html" title="“作环保的程序员，从不用百度开始” - 83,607 人阅读" target="_blank">“作环保的程序员，从不用百度开始”</a></li>
<li><a href="http://coolshell.cn/articles/7829.html" title="28个Unix/Linux的命令行神器 - 76,707 人阅读" target="_blank">28个Unix/Linux的命令行神器</a></li>
<li><a href="http://coolshell.cn/articles/2287.html" title="C++ 程序员自信心曲线图 - 71,933 人阅读" target="_blank">C++ 程序员自信心曲线图</a></li>
<li><a href="http://coolshell.cn/articles/1391.html" title="编程真难啊 - 71,709 人阅读" target="_blank">编程真难啊</a></li>
<li><a href="http://coolshell.cn/articles/6043.html" title="Web开发中需要了解的东西 - 70,799 人阅读" target="_blank">Web开发中需要了解的东西</a></li>
<li><a href="http://coolshell.cn/articles/5701.html" title="SteveY对Amazon和Google平台的吐槽 - 70,083 人阅读" target="_blank">SteveY对Amazon和Google平台的吐槽</a></li>
<li><a href="http://coolshell.cn/articles/355.html" title="20本最好的Linux免费书籍 - 69,854 人阅读" target="_blank">20本最好的Linux免费书籍</a></li>
<li><a href="http://coolshell.cn/articles/4758.html" title="如何写出无法维护的代码 - 65,853 人阅读" target="_blank">如何写出无法维护的代码</a></li>
<li><a href="http://coolshell.cn/articles/8790.html" title="程序算法与人生选择 - 64,485 人阅读" target="_blank">程序算法与人生选择</a></li>
<li><a href="http://coolshell.cn/articles/2058.html" title="各种流行的编程风格 - 63,819 人阅读" target="_blank">各种流行的编程风格</a></li>
<li><a href="http://coolshell.cn/articles/3008.html" title="Windows编程革命简史 - 62,918 人阅读" target="_blank">Windows编程革命简史</a></li>
<li><a href="http://coolshell.cn/articles/4119.html" title="如何学好C++语言 - 62,888 人阅读" target="_blank">如何学好C++语言</a></li>
<li><a href="http://coolshell.cn/articles/5761.html" title="深入理解C语言 - 62,112 人阅读" target="_blank">深入理解C语言</a></li>
<li><a href="http://coolshell.cn/articles/4429.html" title="面试题：火车运煤问题 - 61,069 人阅读" target="_blank">面试题：火车运煤问题</a></li>
<li><a href="http://coolshell.cn/articles/6142.html" title="三个事和三个问题 - 59,671 人阅读" target="_blank">三个事和三个问题</a></li>
<li><a href="http://coolshell.cn/articles/1695.html" title="别的程序员是怎么读你的简历的 - 58,744 人阅读" target="_blank">别的程序员是怎么读你的简历的</a></li>
<li><a href="http://coolshell.cn/articles/2420.html" title="老手是这样教新手编程的 - 57,503 人阅读" target="_blank">老手是这样教新手编程的</a></li>
<li><a href="http://coolshell.cn/articles/945.html" title="C语言的谜题 - 55,632 人阅读" target="_blank">C语言的谜题</a></li>
<li><a href="http://coolshell.cn/articles/3363.html" title="偷了世界的程序员 - 55,195 人阅读" target="_blank">偷了世界的程序员</a></li>
<li><a href="http://coolshell.cn/articles/4506.html" title="再谈“我是怎么招聘程序员的”（上） - 54,907 人阅读" target="_blank">再谈“我是怎么招聘程序员的”（上）</a><h3 id="-">新浪微博</h3>
</li>
</ul>
<h3 id="-">标签</h3>
<p><a href="http://coolshell.cn/tag/agile" title="15个话题" target="_blank">agile</a> <a href="http://coolshell.cn/tag/ajax" title="11个话题" target="_blank">AJAX</a> <a href="http://coolshell.cn/tag/algorithm" title="20个话题" target="_blank">Algorithm</a> <a href="http://coolshell.cn/tag/android" title="8个话题" target="_blank">Android</a> <a href="http://coolshell.cn/tag/bash" title="8个话题" target="_blank">Bash</a> <a href="http://coolshell.cn/tag/c" title="75个话题" target="_blank">C++</a> <a href="http://coolshell.cn/tag/coding" title="25个话题" target="_blank">Coding</a> <a href="http://coolshell.cn/tag/css" title="21个话题" target="_blank">CSS</a> <a href="http://coolshell.cn/tag/database" title="7个话题" target="_blank">Database</a> <a href="http://coolshell.cn/tag/design" title="17个话题" target="_blank">Design</a> <a href="http://coolshell.cn/tag/design-pattern" title="8个话题" target="_blank">design pattern</a> <a href="http://coolshell.cn/tag/ebook" title="15个话题" target="_blank">ebook</a> <a href="http://coolshell.cn/tag/flash" title="7个话题" target="_blank">Flash</a> <a href="http://coolshell.cn/tag/game" title="9个话题" target="_blank">Game</a> <a href="http://coolshell.cn/tag/go" title="9个话题" target="_blank">Go</a> <a href="http://coolshell.cn/tag/google" title="31个话题" target="_blank">Google</a> <a href="http://coolshell.cn/tag/html" title="32个话题" target="_blank">HTML</a> <a href="http://coolshell.cn/tag/ie" title="10个话题" target="_blank">IE</a> <a href="http://coolshell.cn/tag/java" title="45个话题" target="_blank">Java</a> <a href="http://coolshell.cn/tag/javascript" title="49个话题" target="_blank">Javascript</a> <a href="http://coolshell.cn/tag/jquery" title="11个话题" target="_blank">jQuery</a> <a href="http://coolshell.cn/tag/linux" title="58个话题" target="_blank">Linux</a> <a href="http://coolshell.cn/tag/mysql" title="7个话题" target="_blank">MySQL</a> <a href="http://coolshell.cn/tag/oop" title="8个话题" target="_blank">OOP</a> <a href="http://coolshell.cn/tag/password" title="8个话题" target="_blank">password</a> <a href="http://coolshell.cn/tag/performance" title="13个话题" target="_blank">Performance</a> <a href="http://coolshell.cn/tag/php" title="25个话题" target="_blank">PHP</a> <a href="http://coolshell.cn/tag/programmer" title="88个话题" target="_blank">Programmer</a> <a href="http://coolshell.cn/tag/programming-language" title="12个话题" target="_blank">programming language</a> <a href="http://coolshell.cn/tag/puzzle" title="9个话题" target="_blank">Puzzle</a> <a href="http://coolshell.cn/tag/pythondev" title="27个话题" target="_blank">Python</a> <a href="http://coolshell.cn/tag/ruby" title="10个话题" target="_blank">Ruby</a> <a href="http://coolshell.cn/tag/sql" title="10个话题" target="_blank">SQL</a> <a href="http://coolshell.cn/tag/tdd" title="8个话题" target="_blank">TDD</a> <a href="http://coolshell.cn/tag/ui" title="12个话题" target="_blank">UI</a> <a href="http://coolshell.cn/tag/unix" title="31个话题" target="_blank">Unix</a> <a href="http://coolshell.cn/tag/vim" title="18个话题" target="_blank">vim</a> <a href="http://coolshell.cn/tag/web" title="35个话题" target="_blank">Web</a> <a href="http://coolshell.cn/tag/windows" title="17个话题" target="_blank">Windows</a> <a href="http://coolshell.cn/tag/xml" title="8个话题" target="_blank">XML</a> <a href="http://coolshell.cn/tag/%e5%8f%a3%e4%bb%a4" title="7个话题" target="_blank">口令</a> <a href="http://coolshell.cn/tag/%e5%ae%89%e5%85%a8" title="16个话题" target="_blank">安全</a> <a href="http://coolshell.cn/tag/%e7%a8%8b%e5%ba%8f%e5%91%98" title="88个话题" target="_blank">程序员</a> <a href="http://coolshell.cn/tag/%e7%ae%97%e6%b3%95" title="9个话题" target="_blank">算法</a> <a href="http://coolshell.cn/tag/interview" title="14个话题" target="_blank">面试</a></p>
<h3 id="-">分类目录</h3>
<ul>
<li><a href="http://coolshell.cn/category/proglanguage/dotnet" title="查看.NET编程下的所有文章" target="_blank">.NET编程</a> (2)</li>
<li><a href="http://coolshell.cn/category/proglanguage/ajaxdev" title="查看Ajax开发下的所有文章" target="_blank">Ajax开发</a> (9)</li>
<li><a href="http://coolshell.cn/category/proglanguage/cplusplus" title="查看C/C++语言下的所有文章" target="_blank">C/C++语言</a> (54)</li>
<li><a href="http://coolshell.cn/category/proglanguage/erlang" title="查看Erlang下的所有文章" target="_blank">Erlang</a> (1)</li>
<li><a href="http://coolshell.cn/category/proglanguage/javadev" title="查看Java语言下的所有文章" target="_blank">Java语言</a> (29)</li>
<li><a href="http://coolshell.cn/category/proglanguage/phpdev" title="查看PHP脚本下的所有文章" target="_blank">PHP脚本</a> (11)</li>
<li><a href="http://coolshell.cn/category/proglanguage/pythondev" title="查看Python下的所有文章" target="_blank">Python</a> (21)</li>
<li><a href="http://coolshell.cn/category/proglanguage/rubydev" title="查看Ruby下的所有文章" target="_blank">Ruby</a> (5)</li>
<li><a href="http://coolshell.cn/category/operatingsystem/unixlinux" title="查看Unix/Linux下的所有文章" target="_blank">Unix/Linux</a> (66)</li>
<li><a href="http://coolshell.cn/category/proglanguage/webdev" title="查看Web开发下的所有文章" target="_blank">Web开发</a> (99)</li>
<li><a href="http://coolshell.cn/category/operatingsystem/mswindows" title="查看Windows下的所有文章" target="_blank">Windows</a> (12)</li>
<li><a href="http://coolshell.cn/category/itnews" title="查看业界新闻下的所有文章" target="_blank">业界新闻</a> (25)</li>
<li><a href="http://coolshell.cn/category/%e4%bc%81%e4%b8%9a%e5%ba%94%e7%94%a8" title="查看企业应用下的所有文章" target="_blank">企业应用</a> (2)</li>
<li><a href="http://coolshell.cn/category/technews" title="查看技术新闻下的所有文章" target="_blank">技术新闻</a> (32)</li>
<li><a href="http://coolshell.cn/category/%e6%8a%80%e6%9c%af%e7%ae%a1%e7%90%86" title="查看技术管理下的所有文章" target="_blank">技术管理</a> (10)</li>
<li><a href="http://coolshell.cn/category/techarticle" title="查看技术读物下的所有文章" target="_blank">技术读物</a> (115)</li>
<li><a href="http://coolshell.cn/category/operatingsystem" title="查看操作系统下的所有文章" target="_blank">操作系统</a> (43)</li>
<li><a href="http://coolshell.cn/category/datebase" title="查看数据库下的所有文章" target="_blank">数据库</a> (10)</li>
<li><a href="http://coolshell.cn/category/misc" title="查看杂项资源下的所有文章" target="_blank">杂项资源</a> (251)</li>
<li><a href="http://coolshell.cn/category/process" title="查看流程方法下的所有文章" target="_blank">流程方法</a> (43)</li>
<li><a href="http://coolshell.cn/category/progdesign" title="查看程序设计下的所有文章" target="_blank">程序设计</a> (70)</li>
<li><a href="http://coolshell.cn/category/%e7%b3%bb%e7%bb%9f%e6%9e%b6%e6%9e%84" title="查看系统架构下的所有文章" target="_blank">系统架构</a> (7)</li>
<li><a href="http://coolshell.cn/category/tools" title="查看编程工具下的所有文章" target="_blank">编程工具</a> (61)</li>
<li><a href="http://coolshell.cn/category/proglanguage" title="查看编程语言下的所有文章" target="_blank">编程语言</a> (160)</li>
<li><a href="http://coolshell.cn/category/netsecurity" title="查看网络安全下的所有文章" target="_blank">网络安全</a> (22)</li>
<li><a href="http://coolshell.cn/category/career" title="查看职场生涯下的所有文章" target="_blank">职场生涯</a> (32)</li>
<li><a href="http://coolshell.cn/category/funny" title="查看趣味问题下的所有文章" target="_blank">趣味问题</a> (13)</li>
<li><a href="http://coolshell.cn/category/story" title="查看轶事趣闻下的所有文章" target="_blank">轶事趣闻</a> (145)</li>
</ul>
<h3 id="-">归档</h3>
<ul>
<li><a href="http://coolshell.cn/articles/date/2013/08" title="2013年八月" target="_blank">2013年八月</a> (1)</li>
<li><a href="http://coolshell.cn/articles/date/2013/07" title="2013年七月" target="_blank">2013年七月</a> (8)</li>
<li><a href="http://coolshell.cn/articles/date/2013/06" title="2013年六月" target="_blank">2013年六月</a> (2)</li>
<li><a href="http://coolshell.cn/articles/date/2013/05" title="2013年五月" target="_blank">2013年五月</a> (3)</li>
<li><a href="http://coolshell.cn/articles/date/2013/04" title="2013年四月" target="_blank">2013年四月</a> (3)</li>
<li><a href="http://coolshell.cn/articles/date/2013/03" title="2013年三月" target="_blank">2013年三月</a> (3)</li>
<li><a href="http://coolshell.cn/articles/date/2013/02" title="2013年二月" target="_blank">2013年二月</a> (5)</li>
<li><a href="http://coolshell.cn/articles/date/2013/01" title="2013年一月" target="_blank">2013年一月</a> (1)</li>
<li><a href="http://coolshell.cn/articles/date/2012/12" title="2012年十二月" target="_blank">2012年十二月</a> (4)</li>
<li><a href="http://coolshell.cn/articles/date/2012/11" title="2012年十一月" target="_blank">2012年十一月</a> (5)</li>
<li><a href="http://coolshell.cn/articles/date/2012/10" title="2012年十月" target="_blank">2012年十月</a> (3)</li>
<li><a href="http://coolshell.cn/articles/date/2012/09" title="2012年九月" target="_blank">2012年九月</a> (4)</li>
<li><a href="http://coolshell.cn/articles/date/2012/08" title="2012年八月" target="_blank">2012年八月</a> (8)</li>
<li><a href="http://coolshell.cn/articles/date/2012/07" title="2012年七月" target="_blank">2012年七月</a> (4)</li>
<li><a href="http://coolshell.cn/articles/date/2012/06" title="2012年六月" target="_blank">2012年六月</a> (7)</li>
<li><a href="http://coolshell.cn/articles/date/2012/05" title="2012年五月" target="_blank">2012年五月</a> (6)</li>
<li><a href="http://coolshell.cn/articles/date/2012/04" title="2012年四月" target="_blank">2012年四月</a> (6)</li>
<li><a href="http://coolshell.cn/articles/date/2012/03" title="2012年三月" target="_blank">2012年三月</a> (6)</li>
<li><a href="http://coolshell.cn/articles/date/2012/02" title="2012年二月" target="_blank">2012年二月</a> (3)</li>
<li><a href="http://coolshell.cn/articles/date/2012/01" title="2012年一月" target="_blank">2012年一月</a> (6)</li>
<li><a href="http://coolshell.cn/articles/date/2011/12" title="2011年十二月" target="_blank">2011年十二月</a> (5)</li>
<li><a href="http://coolshell.cn/articles/date/2011/11" title="2011年十一月" target="_blank">2011年十一月</a> (9)</li>
<li><a href="http://coolshell.cn/articles/date/2011/10" title="2011年十月" target="_blank">2011年十月</a> (6)</li>
<li><a href="http://coolshell.cn/articles/date/2011/09" title="2011年九月" target="_blank">2011年九月</a> (5)</li>
<li><a href="http://coolshell.cn/articles/date/2011/08" title="2011年八月" target="_blank">2011年八月</a> (14)</li>
<li><a href="http://coolshell.cn/articles/date/2011/07" title="2011年七月" target="_blank">2011年七月</a> (6)</li>
<li><a href="http://coolshell.cn/articles/date/2011/06" title="2011年六月" target="_blank">2011年六月</a> (12)</li>
<li><a href="http://coolshell.cn/articles/date/2011/05" title="2011年五月" target="_blank">2011年五月</a> (5)</li>
<li><a href="http://coolshell.cn/articles/date/2011/04" title="2011年四月" target="_blank">2011年四月</a> (18)</li>
<li><a href="http://coolshell.cn/articles/date/2011/03" title="2011年三月" target="_blank">2011年三月</a> (16)</li>
<li><a href="http://coolshell.cn/articles/date/2011/02" title="2011年二月" target="_blank">2011年二月</a> (16)</li>
<li><a href="http://coolshell.cn/articles/date/2011/01" title="2011年一月" target="_blank">2011年一月</a> (18)</li>
<li><a href="http://coolshell.cn/articles/date/2010/12" title="2010年十二月" target="_blank">2010年十二月</a> (11)</li>
<li><a href="http://coolshell.cn/articles/date/2010/11" title="2010年十一月" target="_blank">2010年十一月</a> (11)</li>
<li><a href="http://coolshell.cn/articles/date/2010/10" title="2010年十月" target="_blank">2010年十月</a> (19)</li>
<li><a href="http://coolshell.cn/articles/date/2010/09" title="2010年九月" target="_blank">2010年九月</a> (15)</li>
<li><a href="http://coolshell.cn/articles/date/2010/08" title="2010年八月" target="_blank">2010年八月</a> (10)</li>
<li><a href="http://coolshell.cn/articles/date/2010/07" title="2010年七月" target="_blank">2010年七月</a> (20)</li>
<li><a href="http://coolshell.cn/articles/date/2010/06" title="2010年六月" target="_blank">2010年六月</a> (9)</li>
<li><a href="http://coolshell.cn/articles/date/2010/05" title="2010年五月" target="_blank">2010年五月</a> (13)</li>
<li><a href="http://coolshell.cn/articles/date/2010/04" title="2010年四月" target="_blank">2010年四月</a> (12)</li>
<li><a href="http://coolshell.cn/articles/date/2010/03" title="2010年三月" target="_blank">2010年三月</a> (11)</li>
<li><a href="http://coolshell.cn/articles/date/2010/02" title="2010年二月" target="_blank">2010年二月</a> (7)</li>
<li><a href="http://coolshell.cn/articles/date/2010/01" title="2010年一月" target="_blank">2010年一月</a> (9)</li>
<li><a href="http://coolshell.cn/articles/date/2009/12" title="2009年十二月" target="_blank">2009年十二月</a> (22)</li>
<li><a href="http://coolshell.cn/articles/date/2009/11" title="2009年十一月" target="_blank">2009年十一月</a> (27)</li>
<li><a href="http://coolshell.cn/articles/date/2009/10" title="2009年十月" target="_blank">2009年十月</a> (17)</li>
<li><a href="http://coolshell.cn/articles/date/2009/09" title="2009年九月" target="_blank">2009年九月</a> (15)</li>
<li><a href="http://coolshell.cn/articles/date/2009/08" title="2009年八月" target="_blank">2009年八月</a> (21)</li>
<li><a href="http://coolshell.cn/articles/date/2009/07" title="2009年七月" target="_blank">2009年七月</a> (18)</li>
<li><a href="http://coolshell.cn/articles/date/2009/06" title="2009年六月" target="_blank">2009年六月</a> (19)</li>
<li><a href="http://coolshell.cn/articles/date/2009/05" title="2009年五月" target="_blank">2009年五月</a> (27)</li>
<li><a href="http://coolshell.cn/articles/date/2009/04" title="2009年四月" target="_blank">2009年四月</a> (53)</li>
<li><p><a href="http://coolshell.cn/articles/date/2009/03" title="2009年三月" target="_blank">2009年三月</a> (43)</p>
<h3 id="-">最新评论</h3>
</li>
<li><p><a href="http://coolshell.cn/articles/10337.html#comment-650549" title="数据即代码：元驱动编程, 2013年08月09日" target="_blank">deanzhang1984</a>: 照此说脚本语言里的脚本基本上都只是配置而已，后面都有个解释器 在解释执行。</p>
</li>
<li><a href="http://coolshell.cn/articles/10192.html#comment-649488" title="数据的游戏：冰与火, 2013年07月31日" target="_blank">rookiepig</a>: 当然，长期看皓哥文章，技术部分还是没话说。 学习了不少~</li>
<li><a href="http://coolshell.cn/articles/9308.html#comment-649452" title="“作环保的程序员，从不用百度开始”, 2013年03月23日" target="_blank">Jacob</a>: 当你研究某一领域深入，或者技术见长，或者感觉到时间不够用的时 候你就会明白百度为什么成为众矢之的了。@二陶</li>
<li><a href="http://coolshell.cn/articles/1106.html#comment-649272" title="Java构造时成员初始化的陷阱, 2009年07月03日" target="_blank">blog</a>: Webmaster, I am the admin at . We profile SEO Plugins for WordPress blogs for on-site and off-site SEO....</li>
<li><a href="http://coolshell.cn/articles/2250.html#comment-649110" title="“21天教你学会C++”, 2010年03月30日" target="_blank">ligand</a>: 我觉得，学习C++与学习其他语言，如Python、Java有 一个非常大的不同之处，就是学习C++时人们不自觉得就会去探究 其下一层的实现机制。而学Python，一般都不会去关心...</li>
<li><a href="http://coolshell.cn/articles/7992.html#comment-649084" title="C++的坑真的多吗？, 2012年08月06日" target="_blank">ligand</a>: 楼主这篇还是很中立、客观的。观之有收获。</li>
<li><a href="http://coolshell.cn/articles/1976.html#comment-648914" title="【问题】传球问题, 2009年12月20日" target="_blank">yaplog</a>: Hello there, I discovered your site by way of Google while searching for a similar matter, your web site came...</li>
<li><a href="http://coolshell.cn/articles/10115.html#comment-648880" title="C语言全局变量那些事儿, 2013年07月21日" target="_blank">YYX</a>: 唉，别绕弯子 直接来本质的。就是编译器 连接器 的工作原理，与语言本身毫无关系</li>
<li><a href="http://coolshell.cn/articles/7992.html#comment-648690" title="C++的坑真的多吗？, 2012年08月06日" target="_blank">Willie Maranville</a>: A formidable share, I simply given this onto a colleague who was doing a bit evaluation on this....</li>
<li><a href="http://coolshell.cn/articles/10337.html#comment-648562" title="数据即代码：元驱动编程, 2013年08月09日" target="_blank">Anonymous</a>: 什么“元驱动编程”，无非就是那句话：配置文件复杂到一定程度就 变成了一门语言。这不就是脚本语言的由来么。不是什么新概念，干 嘛要搞得神神叨叨…</li>
<li><a href="http://coolshell.cn/articles/1278.html#comment-648528" title="Linus Torvalds 语录 Top 10, 2009年08月16日" target="_blank">Isabel Zomberg</a>: I�m impressed, I must say. Actually rarely do I encounter a weblog that�s each educative and...</li>
<li><a href="http://coolshell.cn/articles/10337.html#comment-648377" title="数据即代码：元驱动编程, 2013年08月09日" target="_blank">code4craft</a>: JS那个例子的特定程度跟其他几个完全不一样嘛。 话说回来，这种配置式的写法，属于”写完之前不知道 它到底该是什么样子”，写好了读起来可能比较...</li>
<li><a href="http://coolshell.cn/articles/10337.html#comment-648333" title="数据即代码：元驱动编程, 2013年08月09日" target="_blank">YU_YU</a>: boost的命令行解析库呢？ 语言设计就是库设计，一门语言是否好用，就是库是否好用，仅此而 已</li>
<li><a href="http://coolshell.cn/articles/10337.html#comment-648267" title="数据即代码：元驱动编程, 2013年08月09日" target="_blank">henix</a>: 任何一个业务程序只要足够复杂，到最后都会发展成一个解释器（i nterpret）。对这点深有体会。文章的例子还是比较清楚的 ，个人感觉 json / lua 比 S 表达式易读。</li>
<li><a href="http://coolshell.cn/articles/7236.html#comment-648260" title="用Unix的设计思想来应对多变的需求, 2012年05月03日" target="_blank">jimshao</a>: 这里一个提法忽视了一个问题域的本质问题，解耦到底是目的还是手 段？我很赞同解耦的重要性，但是我认为强调解耦并不能帮助看官们 如何解决问题，一定会问我怎么才能解耦，如何解耦才是合适...</li>
</ul>
<h3 id="-">友情链接</h3>
<ul>
<li><a href="http://blog.csdn.net/haoel" target="_blank">陈皓的博客</a></li>
<li><a href="http://ifeve.com/" title="促进并发编程的研究和推广" target="_blank">并发编程</a></li>
<li><a href="http://www.raychase.net/" title="一个啰嗦的程序员" target="_blank">四火的唠叨</a></li>
<li><a href="http://www.devtext.com/" title="我们关注互联网、关注软件开发、提供开发技术交流、问答平台" target="_blank">devtext 开发者社区</a></li>
<li><a href="http://claymore.phpme.info/" target="_blank">Claymore&#39;s blog</a></li>
<li><a href="http://www.dutor.net/" target="_blank">Dutor.net</a></li>
<li><a href="http://luy.li/" title="all linux" target="_blank">bones7456</a></li>
<li><a href="http://keeng2008.appspot.com/" title="Keengle&#39;s Blog" target="_blank">Keengle&#39;s Blog</a></li>
<li><a href="http://www.nowamagic.net/" title="专注于互联网主流的各种技术" target="_blank">简明现代魔法</a></li>
<li><a href="http://www.rosoo.net/" title="关注技术更新，关注行业动态。努力做到更好。" target="_blank">罗素工作室</a></li>
<li><a href="http://www.codecho.com/" title="聆听代码的回音" target="_blank">代码回音</a></li>
<li><a href="http://hellogcc.blogbus.com/" title="致力于讨论和学习GNU Toolchain方面的工作组" target="_blank">HelloGcc Working Group</a></li>
<li><a href="http://http://blog.lvscar.info/" title="Just for Fun" target="_blank">吕毅的Blog</a></li>
<li><a href="http://www.cnblogs.com/weidagang2046/" title="Just for Fun" target="_blank">Todd Wei的Blog</a></li>
<li><a href="http://www.cppfans.org/" title="记录我们点滴学习工作生活" target="_blank">C++爱好者博客</a></li>
<li><a href="http://www.mhtml5.com/" title="致力于HTML5在中国的发展与应用" target="_blank">HTML5研究小组</a></li>
<li><a href="http://www.12freeblog.com/" title="关注网站运营，分享技术心得" target="_blank">12Free</a></li>
<li><a href="http://zhuwenhao.com/" title="朱文昊的中文博客－－专注技术，向往自由" target="_blank">朱文昊Albert Zhu</a></li>
<li><a href="http://www.cguage.com/" title="某VC++软件开发爱好者" target="_blank">C瓜哥的博客</a></li>
<li><a href="http://www.kaiyuanba.cn/" title="汇聚各种开源项目的中英文混合介绍并分类排列，致力于软件项目的开源事业" target="_blank">开源吧</a></li>
<li><a href="http://www.stackpop.org/" title="靖难|魔都小码农" target="_blank">靖难|魔都小码农</a></li>
<li><a href="http://acm.zhihua-lai.com/" title="Smart Ideas, Smart Algorithms" target="_blank">ACMer</a></li>
<li><a href="http://chenpeng.info/" title="优秀的开源软件让生活更简单" target="_blank">陈鹏个人博客</a></li>
<li><a href="http://www.coderli.com/" title="一个普通的coder，coding为了生活，coding因为消遣:-) Just a coder" target="_blank">OneCoder</a></li>
<li><a href="http://www.crazyshell.org/blog/" title="专注于底层基础, TCP/IP, 存储, (高性能.高可用.分布式.高并发系统) 研究" target="_blank">狂Shell – Happy Hacking</a></li>
<li><a href="http://blog.tektea.com/" title="关注IT技术 | 分享 | 交流 | 记录" target="_blank">TekTea&#39;s Blog</a></li>
<li><p><a href="http://shellblog.sinaapp.com/" title="我有一颗百度的心。" target="_blank">夕水溪下</a></p>
<h3 id="-">功能</h3>
</li>
<li><p><a href="http://coolshell.cn/wp-login.php?action=register" target="_blank">注册</a></p>
</li>
<li><a href="http://coolshell.cn/wp-login.php" target="_blank">登录</a></li>
<li><a href="http://coolshell.cn/feed" title="使用RSS 2.0订阅本站点内容" target="_blank">文章RSS</a></li>
<li><a href="http://coolshell.cn/comments/feed" title="使用RSS订阅本站点的所有文章的近期评论" target="_blank">评论RSS</a></li>
<li><a href="http://cn.wordpress.org/" title="基于WordPress，一个优美、先进的个人信息发布平台。" target="_blank">WordPress.org</a></li>
</ul>
<p><a href="">回到顶部</a> <a href="http://wordpress.org/" target="_blank">WordPress</a></p>
<p>版权所有 © 2009-2013 酷壳 – CoolShell.cn
主题由 <a href="http://www.neoease.com/" target="_blank">NeoEase</a> 提供, 通过 <a href="http://validator.w3.org/check?uri=referer" target="_blank">XHTML 1.1</a> 和 <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" target="_blank">CSS 3</a> 验证.
<img src="" alt=""></p>
<p>检测到你还在使用百度这个搜索引擎，
做为一个程序员，这是一种自暴自弃！</p>
<p><strong><a href="http://coolshell.cn/articles/7186.html" target="_blank">做环保的程序员，从不用百度开始！</a></strong></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql--NoSQL数据建模技术/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql--NoSQL数据建模技术" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础学习（二）MongoDBJava增删查改-MongoDB-数据库技术-/">MongoDB基础学习（二）MongoDB Java增删查改 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础学习（二）MongoDBJava增删查改-MongoDB-数据库技术-/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="mongodb-mongodb-java-mongodb-9sssd-com">MongoDB基础学习（二）MongoDB Java增删查改 - MongoDB - 数据库技术 - 9SSSD.COM</h1>
<p><a href="http://www.9sssd.com/" target="_blank">9SSSD首页</a></p>
<ul>
<li><p><a href="http://www.9sssd.com/map" target="_blank">导航<img src="http://./MongoDB基础学习（二）MongoDB Java增删查改 - MongoDB - 数据库技术 - 9SSSD.COM_files/MenuDownArrow.gif" alt=""></a></p>
</li>
<li><p><a href="http://www.9sssd.com/news" target="_blank">新闻</a></p>
</li>
<li><a href="http://dotnet.9sssd.com/" target="_blank">.NET技术</a></li>
<li><a href="http://java.9sssd.com/" target="_blank">Java技术</a></li>
<li><a href="http://web.9sssd.com/" target="_blank">Web开发</a></li>
<li><a href="http://lang.9sssd.com/" target="_blank">编程语言</a></li>
<li><a href="http://database.9sssd.com/" target="_blank">数据库技术</a></li>
<li><a href="http://mobile.9sssd.com/" target="_blank">移动开发</a></li>
<li><p><a href="http://search.9sssd.com/" target="_blank">9SSSD搜索</a>
<a href="http://www.9sssd.com/rss/database" target="_blank"><img src="http://./MongoDB基础学习（二）MongoDB Java增删查改 - MongoDB - 数据库技术 - 9SSSD.COM_files/rss.png" alt="RSS"></a></p>
</li>
<li><p><a href="">加入收藏</a></p>
</li>
<li><a href="">设为首页</a></li>
</ul>
<p><a href="http://www.9sssd.com/" target="_blank"><img src="http://./MongoDB基础学习（二）MongoDB Java增删查改 - MongoDB - 数据库技术 - 9SSSD.COM_files/9sssdLogo.png" alt="9SSSD首页"></a></p>
<p>热门搜索： <a href="http://search.9sssd.com/s?w=MongoDB%e5%ad%a6%e4%b9%a0&amp;sid=103" target="_blank">MongoDB学习</a><a href="http://search.9sssd.com/s?w=%e7%b4%a2%e5%bc%95&amp;sid=103" target="_blank">索引</a><a href="http://search.9sssd.com/s?w=%e9%a9%b1%e5%8a%a8&amp;sid=103" target="_blank">驱动</a></p>
<ul>
<li><a href="http://database.9sssd.com/" target="_blank"><strong>数据库技术</strong></a></li>
<li><a href="http://database.9sssd.com/mssql" target="_blank">MS SQLServer</a>
*</li>
<li><a href="http://database.9sssd.com/mysql" target="_blank">MySQL</a>
*</li>
<li><a href="http://database.9sssd.com/oracle" target="_blank">Oracle</a>
*</li>
<li><a href="http://database.9sssd.com/sybase" target="_blank">SyBase</a>
*</li>
<li><a href="http://database.9sssd.com/db2" target="_blank">DB2</a>
*</li>
<li><a href="http://database.9sssd.com/sqlite" target="_blank">SQLite</a>
*</li>
<li><a href="http://database.9sssd.com/postgresql" target="_blank">PostgreSQL</a>
*</li>
<li><a href="http://database.9sssd.com/mongodb" target="_blank">MongoDB</a></li>
</ul>
<p>您的位置: <a href="http://www.9sssd.com/" target="_blank">首页</a><em>&gt;</em><a href="http://database.9sssd.com/" target="_blank">数据库技术</a><em>&gt;</em><a href="http://database.9sssd.com/mongodb" target="_blank">MongoDB</a><em>&gt;</em>MongoDB基础学习（二）MongoDB Java增删查改</p>
<h1 id="mongodb-mongodb-java-">MongoDB基础学习（二）MongoDB Java增删查改</h1>
<p>2012-09-30 00:32 来源：博客园 作者：archie2010 字号：T|T</p>
<p>[<strong>摘要</strong>]本文介绍MongoDB Java增加、删除、查询、修改数据记录，并提供详细的示例代码供参考。</p>
<h2 id="-">相关资料</h2>
<p>1、MongoDB for Java的驱动包</p>
<p><a href="https://github.com/mongodb/mongo-java-driver/downloads" target="_blank"><a href="https://github.com/mongodb/mongo-java-driver/downloads">https://github.com/mongodb/mongo-java-driver/downloads</a></a></p>
<p>2、在线文档</p>
<p><a href="http://www.mongodb.org/display/DOCS/Java+Language+Center" target="_blank"><a href="http://www.mongodb.org/display/DOCS/Java+Language+Center">http://www.mongodb.org/display/DOCS/Java+Language+Center</a></a></p>
<h2 id="-">操作</h2>
<p>1、查询某张表（在MongoDB中称之为集合）的所有数据</p>
<p><strong>Java代码DBTest.java</strong>
<a href="http://database.9sssd.com/mongodb/art/633#" target="_blank">View Row Code</a>1package com.archie.mongodb;23import java.net.UnknownHostException;45import com.mongodb.DB;6import com.mongodb.DBCollection;7import com.mongodb.DBCursor;8import com.mongodb.DBObject;9import com.mongodb.Mongo;10import com.mongodb.MongoException;1112//<em>/</em>13/<em> 查询指定数据库指定DBCollection集合中的所有数据14/</em> @author archie201015/<em>16/</em> since 2012-9-29 下午10:40:2117/<em>/18public class DBTest {19public static void main(String[] args) throws UnknownHostException,20MongoException {21//</em>/<em>22Mongo实例代表了一个数据库连接池23/</em> Mongo mg = new Mongo(&quot;localhost&quot;);24Mongo mg = new Mongo(&quot;localhost&quot;, 27017);25/*/26Mongo mg = new Mongo();2728// 获取名为“dbtest”的数据库对象29DB db = mg.getDB(&quot;dbtest&quot;);30// 查询该库中所有的集合 (相当于表)31for (String name : db.getCollectionNames()) {32System.out.println(&quot;Collection Name: &quot; + name);33}34DBCollection users = db.getCollection(&quot;emp&quot;);35// 查询集合中所有的数据36DBCursor cur = users.find();37System.out.println(&quot;Record Count:&quot; + cur.count());38while (cur.hasNext()) {39DBObject object = cur.next();40System.out.println(object);41// 取出对象中列表为字段名为&#39;uname&#39;和&#39;upwd&#39;的数据42System.out.println(&quot;uname:&quot; + object.get(&quot;uname&quot;) + &quot;\tupwd:&quot;43+ object.get(&quot;upwd&quot;));44}45}46}</p>
<p>运行结果：</p>
<p><img src="http://./MongoDB基础学习（二）MongoDB Java增删查改 - MongoDB - 数据库技术 - 9SSSD.COM_files/12993448667640348583425.png" alt="MongoDB Java增删查改"></p>
<p>2、对指定DBCollection集合的CRUD操作</p>
<p><strong>Java代码DBUtil.java</strong>
<a href="http://database.9sssd.com/mongodb/art/633#" target="_blank">View Row Code</a>1package com.archie.mongodb;23import java.net.UnknownHostException;45import com.mongodb.DB;6import com.mongodb.DBCollection;7import com.mongodb.Mongo;89//<em>/</em>10/<em> 获得DBCollection集合的工具类11/</em> @author archie201012/<em>13/</em> since 2012-9-29 下午10:54:4214/<em>/15public class DBUtil {1617public static Mongo mg=null;18public static DB db=null;19public static DBCollection collection;2021//</em>/<em>22/</em> 获得DBCollection对象23/<em> @param dbName24/</em> @param colName25/<em> @return26/</em>/27public static DBCollection getDBCollection(String dbName,String colName){28if(mg==null){29try {30mg=new Mongo();31} catch (UnknownHostException e) {32e.printStackTrace();33}34}35if(db==null){36db=mg.getDB(dbName);37}38return db.getCollection(colName);39}40}</p>
<p><strong>CRUDTest.java</strong></p>
<p><a href="http://database.9sssd.com/mongodb/art/633#" target="_blank">View Row Code</a>1package com.archie.mongodb;23import com.mongodb.BasicDBObject;4import com.mongodb.DBCollection;5import com.mongodb.DBCursor;6import com.mongodb.DBObject;78//<em>/</em>9/<em> 对指定DBCollection集合的CRUD操作10/</em> @author archie201011/<em>12/</em> since 2012-9-29 下午10:51:2413/<em>/14public class CRUDTest {15//</em>/<em>16/</em> 增加17/<em> @param obj18/</em>/19public static void add(DBObject obj){20DBCollection coll=DBUtil.getDBCollection(&quot;dbtest&quot;, &quot;emp&quot;);21coll.insert(obj);22}23//<em>/</em>24/<em> 删除25/</em> @param obj26/<em>/27public static void delete(DBObject obj){28DBCollection coll=DBUtil.getDBCollection(&quot;dbtest&quot;, &quot;emp&quot;);29coll.remove(obj);30}31//</em>/<em>32/</em> 查询33/<em>/34public static void query(){35DBCollection coll=DBUtil.getDBCollection(&quot;dbtest&quot;, &quot;emp&quot;);36// 查询集合中所有的数据37DBCursor cur = coll.find();38System.out.println(&quot;Record Count:&quot; + cur.count());39while (cur.hasNext()) {40DBObject object = cur.next();41System.out.println(object);42// 取出对象中列表为&#39;uname&#39;和&#39;upwd&#39;的数据43System.out.println(&quot;uname:&quot; + object.get(&quot;uname&quot;) + &quot;\tupwd:&quot;44+ object.get(&quot;upwd&quot;)+&quot;\t_id:&quot;+object.get(&quot;_id&quot;));45}46}47//</em>/<em>48/</em> 修改49/*/50public static void modify(DBObject orig,DBObject update){51DBCollection coll=DBUtil.getDBCollection(&quot;dbtest&quot;, &quot;emp&quot;);52coll.update(orig, update, true, false);53}54public static void main(String[] args) {55DBObject empObj=new BasicDBObject();56empObj.put(&quot;uname&quot;, &quot;teddy&quot;);57empObj.put(&quot;upwd&quot;, &quot;123456&quot;);58//添加59add(empObj);60query();616263DBObject updateObj=new BasicDBObject();64updateObj.put(&quot;uname&quot;, &quot;teddy&quot;);65updateObj.put(&quot;upwd&quot;, &quot;3333&quot;);66//更新67modify(new BasicDBObject(&quot;uname&quot;,&quot;teddy&quot;),updateObj);68System.out.println(&quot;-----------------------修改后-------------------&quot;);69query();7071//删除72delete(new BasicDBObject(&quot;uname&quot;,&quot;teddy&quot;));73System.out.println(&quot;-----------------------删除后-------------------&quot;);74query();75}76}</p>
<p>运行效果：</p>
<p><img src="http://./MongoDB基础学习（二）MongoDB Java增删查改 - MongoDB - 数据库技术 - 9SSSD.COM_files/12993448791626553560004.png" alt="MongoDB Java增删查改"></p>
<p><a href="http://sourceforge.net/projects/mongodbl1/files/" target="_blank"><strong>示例代码下载</strong></a></p>
<ul>
<li>分享到：</li>
<li><a href="&quot;分享到QQ微博&quot;">QQ微博</a></li>
<li><a href="&quot;分享到QQ空间&quot;">QQ空间</a></li>
<li><a href="&quot;分享到新浪微博&quot;">新浪微博</a></li>
<li><a href="&quot;分享到搜狐白社会&quot;">白社会</a></li>
<li><a href="&quot;分享到人人网&quot;">人人网</a></li>
<li><a href="&quot;分享到开心网&quot;">开心网</a></li>
<li><a href="&quot;分享到豆瓣网&quot;">豆瓣网</a></li>
<li><a href="&quot;分享到谷歌书签&quot;">谷歌书签</a></li>
<li><p><a href="&quot;分享到百度搜藏&quot;">百度搜藏</a></p>
<h2 id="-">相关文章：</h2>
</li>
<li><p><a href="http://database.9sssd.com/mongodb/art/695" target="_blank">MongoDB基础学习（三）MongoDB shell 命令行的使用</a><em>2012-10-07</em></p>
</li>
<li><a href="http://database.9sssd.com/mongodb/art/632" target="_blank">MongoDB基础学习（一）安装配置</a><em>2012-09-30</em></li>
<li><a href="http://database.9sssd.com/mongodb/art/553" target="_blank">MongoDB学习(六) MongoDB索引用法和效率分析</a><em>2012-09-11</em></li>
<li><a href="http://database.9sssd.com/mongodb/art/552" target="_blank">MongoDB学习 (五) MongoDB文件存取操作</a><em>2012-09-11</em></li>
<li><a href="http://database.9sssd.com/mongodb/art/551" target="_blank">MongoDB学习(四) 用MongoDB的文档结构描述数据关系</a><em>2012-09-11</em></li>
<li><a href="http://database.9sssd.com/mongodb/art/550" target="_blank">MongoDB学习(三) MVC模式下通过Jqgrid表格操作MongoDB数据</a><em>2012-09-11</em>
热门搜索: <a href="http://search.9sssd.com/s?w=MongoDB%e5%ad%a6%e4%b9%a0&amp;sid=103" target="_blank">MongoDB学习</a></li>
</ul>
<p>上一篇：<a href="http://database.9sssd.com/mongodb/art/632" target="_blank">MongoDB基础学习（一）安装配置</a>
下一篇：<a href="http://database.9sssd.com/mongodb/art/695" target="_blank">MongoDB基础学习（三）MongoDB shell 命令行的使用</a></p>
<h2 id="-http-database-9sssd-com-mongodb-recommend-"><a href="http://database.9sssd.com/mongodb/recommend" target="_blank">最新推荐</a></h2>
<ul>
<li><a href="">MongoDB基础学习（二）MongoDB Java增删查改</a></li>
</ul>
<h2 id="-http-database-9sssd-com-mongodb-hot-"><a href="http://database.9sssd.com/mongodb/hot" target="_blank">热门文章</a></h2>
<ul>
<li><p><a href="http://database.9sssd.com/mongodb/art/695" target="_blank">MongoDB基础学习（三）MongoDB shell 命令行的使用</a></p>
<h2 id="-">阅读排行</h2>
</li>
<li><p>24小时排行</p>
</li>
<li><p><a href="http://database.9sssd.com/mongodb/click" target="_blank">总排行</a></p>
</li>
<li><p><a href="http://database.9sssd.com/mongodb/art/632" target="_blank">MongoDB基础学习（一）安装配置</a></p>
</li>
<li><p><a href="">MongoDB基础学习（二）MongoDB Java增删查改</a></p>
</li>
<li><a href="http://database.9sssd.com/mongodb/art/805" target="_blank">MongoDB源码阅读 BSON源码分析</a></li>
<li><a href="http://database.9sssd.com/mongodb/art/556" target="_blank">MongoDB试用及Java的CRUD</a></li>
<li><a href="http://database.9sssd.com/mongodb/art/552" target="_blank">MongoDB学习 (五) MongoDB文件存取操作</a></li>
<li><a href="http://database.9sssd.com/mongodb/art/632" target="_blank">MongoDB基础学习（一）安装配置</a></li>
<li><a href="http://database.9sssd.com/mongodb/art/695" target="_blank">MongoDB基础学习（三）MongoDB shell 命令行的使用</a></li>
<li><a href="http://database.9sssd.com/mongodb/art/553" target="_blank">MongoDB学习(六) MongoDB索引用法和效率分析</a></li>
<li><a href="http://database.9sssd.com/mongodb/art/550" target="_blank">MongoDB学习(三) MVC模式下通过Jqgrid表格操作MongoDB数据</a></li>
<li><a href="http://database.9sssd.com/mongodb/art/554" target="_blank">Memcache 及 Mongodb 介绍</a></li>
<li><a href="http://database.9sssd.com/mongodb/art/551" target="_blank">MongoDB学习(四) 用MongoDB的文档结构描述数据关系</a></li>
<li><a href="http://database.9sssd.com/mongodb/art/633#" title="返回顶部" target="_blank"><strong>返回顶部</strong></a></li>
</ul>
<p><a href="http://www.9sssd.com/about" target="_blank">关于9SSSD</a> | <a href="http://www.9sssd.com/contact" target="_blank">联系我们</a> | <a href="http://www.9sssd.com/ad" target="_blank">广告服务</a> | <a href="http://database.9sssd.com/links" target="_blank">友情链接</a> | <a href="http://www.9sssd.com/map" target="_blank">网站导航</a></p>
<p>Copyright © 2010 - 2011 9SSSD. All Rights Reserved
9SSSD.COM版权所有</p>
<p>苏ICP备12063653号
<a href="http://tongji.baidu.com/hm-web/welcome/ico?s=6ef62b4ec47ec08cd3325e2cad1a2cb3" target="_blank"><img src="http://./MongoDB基础学习（二）MongoDB Java增删查改 - MongoDB - 数据库技术 - 9SSSD.COM_files/21.gif" alt=""></a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span><span class="breadcrumb"><li><a href="/categories/Nosql/">Nosql</a></li><li><a href="/categories/Nosql/mongo/">mongo</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a><a href="/tags/mongo/" class="label label-success">mongo</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础学习（二）MongoDBJava增删查改-MongoDB-数据库技术-/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql-mongo--MongoDB基础学习（二）MongoDBJava增删查改-MongoDB-数据库技术-" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nosql-mongo--Memcached笔记——（四）应对高并发攻击/">Memcached笔记——（四）应对高并发攻击</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql-mongo--Memcached笔记——（四）应对高并发攻击/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="memcached-">Memcached笔记——（四）应对高并发攻击</h1>
<p><a href="http://www.iteye.com/" target="_blank">首页</a> <a href="http://www.iteye.com/news" target="_blank">资讯</a> <a href="http://www.iteye.com/magazines" target="_blank">精华</a> <a href="http://www.iteye.com/forums" target="_blank">论坛</a> <a href="http://www.iteye.com/ask" target="_blank">问答</a> <a href="http://www.iteye.com/blogs" target="_blank">博客</a> <a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a> <a href="http://www.iteye.com/groups" target="_blank">群组</a> <a href="">更多 ▼</a></p>
<p><a href="http://job.iteye.com/iteye" target="_blank">招聘</a> <a href="http://www.iteye.com/search" target="_blank">搜索</a></p>
<p><a href="http://snowolf.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://snowolf.iteye.com/login" target="_blank">登录</a> <a href="http://snowolf.iteye.com/signup" target="_blank">注册</a></p>
<h1 id="-snowolf-http-snowolf-iteye-com-"><a href="http://snowolf.iteye.com/" target="_blank">Snowolf的意境空间！</a></h1>
<ul>
<li><a href="http://snowolf.iteye.com/" target="_blank"><strong>博客</strong></a></li>
<li><a href="http://snowolf.iteye.com/weibo" target="_blank">微博</a></li>
<li><a href="http://snowolf.iteye.com/album" target="_blank">相册</a></li>
<li><a href="http://snowolf.iteye.com/link" target="_blank">收藏</a></li>
<li><a href="http://snowolf.iteye.com/blog/guest_book" target="_blank">留言</a></li>
<li><a href="http://snowolf.iteye.com/blog/profile" target="_blank">关于我</a></li>
</ul>
<h3 id="-memcached-"><a href="">Memcached笔记——（四）应对高并发攻击</a> **</h3>
<p><strong>博客分类：</strong></p>
<ul>
<li><a href="http://snowolf.iteye.com/category/214766" target="_blank">Java／Cache</a></li>
<li><a href="http://snowolf.iteye.com/category/28518" target="_blank">Spring</a></li>
<li><a href="http://snowolf.iteye.com/category/64267" target="_blank">Server Architecture／Distributed</a>
<a href="http://www.iteye.com/blogs/tag/memcached" target="_blank">memcached</a><a href="http://www.iteye.com/blogs/tag/add" target="_blank">add</a><a href="http://www.iteye.com/blogs/tag/xmemcached" target="_blank">xmemcached</a> </li>
</ul>
<p>近半个月过得很痛苦，主要是产品上线后，引来无数机器用户恶意攻击，不停的刷新产品各个服务入口，制造垃圾数据，消耗资源。他们的最好成绩，1秒钟可以并发6次，赶在Database入库前，Cache进行Missing Loading前，强占这其中十几毫秒的时间，进行恶意攻击。</p>
<p><strong>相关链接： 
<a href="http://snowolf.iteye.com/blog/1447348" target="_blank">Memcached笔记——（一）安装&amp;常规错误&amp;监控 </a>
<a href="http://snowolf.iteye.com/blog/1471805" target="_blank">Memcached笔记——（二）XMemcached&amp;Spring集成</a> 
<a href="http://snowolf.iteye.com/blog/1576818" target="_blank">Memcached笔记——（三）Memcached使用总结</a> </strong></p>
<p><a href="http://snowolf.iteye.com/admin/blogs/1677495/edit" title="Memcached笔记——（四）应对高并发攻击" target="_blank"><strong>Memcached笔记——（四）应对高并发攻击</strong></a></p>
<p>为了应对上述情况，做了如下调整：</p>
<ol>
<li>更新数据时，先写Cache，然后写Database，如果可以，写操作交给队列后续完成。</li>
<li>限制统一帐号，同一动作，同一秒钟并发次数，超过1次不做做动作，返回操作失败。</li>
<li>限制统一用户，每日动作次数，超限返回操作失败。</li>
</ol>
<p>要完成上述操作，同事给我支招。用Memcached的add方法，就可以很快速的解决问题。不需要很繁琐的开发，也不需要依赖数据库记录，完全内存操作。<img src="" alt=""></p>
<p>以下实现一个判定冲突的方法：</p>
<p>Java代码 <a href="&quot;复制代码&quot;"><img src="" alt="复制代码"></a> <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li>//<em>/</em> </li>
<li>/* 冲突延时 1秒 </li>
<li>/*/  </li>
<li>public static final int MUTEX_EXP = 1;  </li>
<li>//<em>/</em> </li>
<li>/* 冲突键 </li>
<li>/*/  </li>
<li>public static final String MUTEX<em>KEY_PREFIX = &quot;MUTEX</em>&quot;;  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* 冲突判定 </li>
<li>/*  </li>
<li>/* @param key </li>
<li>/*/  </li>
<li>public boolean isMutex(String key) {  </li>
<li>return isMutex(key, MUTEX_EXP);  </li>
<li>}  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* 冲突判定 </li>
<li>/*  </li>
<li>/* @param key </li>
<li>/* @param exp </li>
<li>/* @return true 冲突 </li>
<li>/*/  </li>
<li>public boolean isMutex(String key, int exp) {  </li>
<li>boolean status = true;  </li>
<li>try {  </li>
<li>if (memcachedClient.add(MUTEX_KEY_PREFIX + key, exp, &quot;true&quot;)) {  </li>
<li>status = false;  </li>
<li>}  </li>
<li>} catch (Exception e) {  </li>
<li>logger.error(e.getMessage(), e);  </li>
<li>}  </li>
<li>return status;  </li>
<li></li>
<li>}<br>//<em>/</em> /<em> 冲突延时 1秒 /</em>/ public static final int MUTEX<em>EXP = 1; //<em>/</em> /<em> 冲突键 /</em>/ public static final String MUTEX_KEY_PREFIX = &quot;MUTEX</em>&quot;; //<em>/</em> /<em> 冲突判定 /</em> /<em> @param key /</em>/ public boolean isMutex(String key) { return isMutex(key, MUTEX_EXP); } //<em>/</em> /<em> 冲突判定 /</em> /<em> @param key /</em> @param exp /<em> @return true 冲突 /</em>/ public boolean isMutex(String key, int exp) { boolean status = true; try { if (memcachedClient.add(MUTEX_KEY_PREFIX + key, exp, &quot;true&quot;)) { status = false; } } catch (Exception e) { logger.error(e.getMessage(), e); } return status; }</li>
</ol>
<p>做个说明：</p>
<p>选项 说明 add 仅当存储空间中不存在键相同的数据时才保存 replace 仅当存储空间中存在键相同的数据时才保存 set 与add和replace不同，无论何时都保存</p>
<p>也就是说，如果add操作返回为true，则认为当前不冲突！<img src="" alt=""></p>
<p>回归场景，恶意用户1秒钟操作6次，遇到上述这个方法，只有乖乖地1秒后再来。别小看这1秒钟，一个数据库操作不过几毫秒。1秒延迟，足以降低系统负载，增加恶意用户成本。</p>
<p>附我用到的基于XMemcached实现：</p>
<p>Java代码 <a href="&quot;复制代码&quot;"><img src="" alt="复制代码"></a> <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li>import net.rubyeye.xmemcached.MemcachedClient;  </li>
<li></li>
<li>import org.apache.log4j.Logger;  </li>
<li>import org.springframework.beans.factory.annotation.Autowired;  </li>
<li>import org.springframework.stereotype.Component;  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/*  </li>
<li>/* @author Snowolf </li>
<li>/* @version 1.0 </li>
<li>/* @since 1.0 </li>
<li>/*/  </li>
<li>@Component  </li>
<li>public class MemcachedManager {  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* 缓存时效 1天 </li>
<li>/*/  </li>
<li>public static final int CACHE_EXP_DAY = 3600 /* 24;  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* 缓存时效 1周 </li>
<li>/*/  </li>
<li>public static final int CACHE_EXP_WEEK = 3600 /<em> 24 /</em> 7;  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* 缓存时效 1月 </li>
<li>/*/  </li>
<li>public static final int CACHE_EXP_MONTH = 3600 /<em> 24 /</em> 30;  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* 缓存时效 永久 </li>
<li>/*/  </li>
<li>public static final int CACHE_EXP_FOREVER = 0;  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* 冲突延时 1秒 </li>
<li>/*/  </li>
<li>public static final int MUTEX_EXP = 1;  </li>
<li>//<em>/</em> </li>
<li>/* 冲突键 </li>
<li>/*/  </li>
<li>public static final String MUTEX<em>KEY_PREFIX = &quot;MUTEX</em>&quot;;  </li>
<li>//<em>/</em> </li>
<li>/* Logger for this class </li>
<li>/*/  </li>
<li>private static final Logger logger = Logger  </li>
<li>.getLogger(MemcachedManager.class);  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* Memcached Client </li>
<li>/*/  </li>
<li>@Autowired  </li>
<li>private MemcachedClient memcachedClient;  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* 缓存 </li>
<li>/*  </li>
<li>/* @param key </li>
<li>/* @param value </li>
<li>/* @param exp </li>
<li>/*            失效时间 </li>
<li>/*/  </li>
<li>public void cacheObject(String key, Object value, int exp) {  </li>
<li>try {  </li>
<li>memcachedClient.set(key, exp, value);  </li>
<li>} catch (Exception e) {  </li>
<li>logger.error(e.getMessage(), e);  </li>
<li>}  </li>
<li>logger.info(&quot;Cache Object: [&quot; + key + &quot;]&quot;);  </li>
<li>}  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* Shut down the Memcached Cilent. </li>
<li>/*/  </li>
<li>public void finalize() {  </li>
<li>if (memcachedClient != null) {  </li>
<li>try {  </li>
<li>if (!memcachedClient.isShutdown()) {  </li>
<li>memcachedClient.shutdown();  </li>
<li>logger.debug(&quot;Shutdown MemcachedManager...&quot;);  </li>
<li>}  </li>
<li>} catch (Exception e) {  </li>
<li>logger.error(e.getMessage(), e);  </li>
<li>}  </li>
<li>}  </li>
<li>}  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* 清理对象 </li>
<li>/*  </li>
<li>/* @param key </li>
<li>/*/  </li>
<li>public void flushObject(String key) {  </li>
<li>try {  </li>
<li>memcachedClient.deleteWithNoReply(key);  </li>
<li>} catch (Exception e) {  </li>
<li>logger.error(e.getMessage(), e);  </li>
<li>}  </li>
<li>logger.info(&quot;Flush Object: [&quot; + key + &quot;]&quot;);  </li>
<li>}  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* 冲突判定 </li>
<li>/*  </li>
<li>/* @param key </li>
<li>/*/  </li>
<li>public boolean isMutex(String key) {  </li>
<li>return isMutex(key, MUTEX_EXP);  </li>
<li>}  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* 冲突判定 </li>
<li>/*  </li>
<li>/* @param key </li>
<li>/* @param exp </li>
<li>/* @return true 冲突 </li>
<li>/*/  </li>
<li>public boolean isMutex(String key, int exp) {  </li>
<li>boolean status = true;  </li>
<li>try {  </li>
<li>if (memcachedClient.add(MUTEX_KEY_PREFIX + key, exp, &quot;true&quot;)) {  </li>
<li>status = false;  </li>
<li>}  </li>
<li>} catch (Exception e) {  </li>
<li>logger.error(e.getMessage(), e);  </li>
<li>}  </li>
<li>return status;  </li>
<li>}  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* 加载缓存对象 </li>
<li>/*  </li>
<li>/* @param key </li>
<li>/* @return </li>
<li>/*/  </li>
<li>public <T> T loadObject(String key) {  </li>
<li>T object = null;  </li>
<li>try {  </li>
<li>object = memcachedClient.<T> get(key);  </li>
<li>} catch (Exception e) {  </li>
<li>logger.error(e.getMessage(), e);  </li>
<li>}  </li>
<li>logger.info(&quot;Load Object: [&quot; + key + &quot;]&quot;);  </li>
<li>return object;  </li>
<li>}  </li>
<li></li>
<li>}<br>import net.rubyeye.xmemcached.MemcachedClient; import org.apache.log4j.Logger; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.stereotype.Component; //<em>/</em> /<em> /</em> @author Snowolf /<em> @version 1.0 /</em> @since 1.0 /<em>/ @Component public class MemcachedManager { //</em>/<em> /</em> 缓存时效 1天 /<em>/ public static final int CACHE_EXP_DAY = 3600 /</em> 24; //<em>/</em> /<em> 缓存时效 1周 /</em>/ public static final int CACHE<em>EXP_WEEK = 3600 /<em> 24 /</em> 7; //<em>/</em> /<em> 缓存时效 1月 /</em>/ public static final int CACHE_EXP_MONTH = 3600 /<em> 24 /</em> 30; //<em>/</em> /<em> 缓存时效 永久 /</em>/ public static final int CACHE_EXP_FOREVER = 0; //<em>/</em> /<em> 冲突延时 1秒 /</em>/ public static final int MUTEX_EXP = 1; //<em>/</em> /<em> 冲突键 /</em>/ public static final String MUTEX_KEY_PREFIX = &quot;MUTEX</em>&quot;; //<em>/</em> /<em> Logger for this class /</em>/ private static final Logger logger = Logger .getLogger(MemcachedManager.class); //<em>/</em> /<em> Memcached Client /</em>/ @Autowired private MemcachedClient memcachedClient; //<em>/</em> /<em> 缓存 /</em> /<em> @param key /</em> @param value /<em> @param exp /</em> 失效时间 /<em>/ public void cacheObject(String key, Object value, int exp) { try { memcachedClient.set(key, exp, value); } catch (Exception e) { logger.error(e.getMessage(), e); } logger.info(&quot;Cache Object: [&quot; + key + &quot;]&quot;); } //</em>/<em> /</em> Shut down the Memcached Cilent. /<em>/ public void finalize() { if (memcachedClient != null) { try { if (!memcachedClient.isShutdown()) { memcachedClient.shutdown(); logger.debug(&quot;Shutdown MemcachedManager...&quot;); } } catch (Exception e) { logger.error(e.getMessage(), e); } } } //</em>/<em> /</em> 清理对象 /<em> /</em> @param key /<em>/ public void flushObject(String key) { try { memcachedClient.deleteWithNoReply(key); } catch (Exception e) { logger.error(e.getMessage(), e); } logger.info(&quot;Flush Object: [&quot; + key + &quot;]&quot;); } //</em>/<em> /</em> 冲突判定 /<em> /</em> @param key /<em>/ public boolean isMutex(String key) { return isMutex(key, MUTEX_EXP); } //</em>/<em> /</em> 冲突判定 /<em> /</em> @param key /<em> @param exp /</em> @return true 冲突 /<em>/ public boolean isMutex(String key, int exp) { boolean status = true; try { if (memcachedClient.add(MUTEX_KEY_PREFIX + key, exp, &quot;true&quot;)) { status = false; } } catch (Exception e) { logger.error(e.getMessage(), e); } return status; } //</em>/<em> /</em> 加载缓存对象 /<em> /</em> @param key /<em> @return /</em>/ public <T> T loadObject(String key) { T object = null; try { object = memcachedClient.<T> get(key); } catch (Exception e) { logger.error(e.getMessage(), e); } logger.info(&quot;Load Object: [&quot; + key + &quot;]&quot;); return object; } }</li>
</ol>
<p><strong>相关链接： 
<a href="http://snowolf.iteye.com/blog/1447348" target="_blank">Memcached笔记——（一）安装&amp;常规错误&amp;监控 </a>
<a href="http://snowolf.iteye.com/blog/1471805" target="_blank">Memcached笔记——（二）XMemcached&amp;Spring集成</a> 
<a href="http://snowolf.iteye.com/blog/1576818" target="_blank">Memcached笔记——（三）Memcached使用总结</a> </strong></p>
<p><a href=""><strong>Memcached笔记——（四）应对高并发攻击</strong></a>
<strong>2</strong>
顶</p>
<p><strong>2</strong>
踩</p>
<p>分享到： <a href="&quot;分享到新浪微博&quot;"><img src="" alt=""></a> <a href="&quot;分享到腾讯微博&quot;"><img src="" alt=""></a></p>
<p><a href="http://snowolf.iteye.com/blog/1679923" title="MySQL 运维笔记（一）—— 终止高负载SQL" target="_blank">MySQL 运维笔记（一）—— 终止高负载SQL</a> | <a href="http://snowolf.iteye.com/blog/1667104" title="征服 Redis + Jedis + Spring （二）—— 哈希表操作（HMGET HMSET）" target="_blank">征服 Redis + Jedis + Spring （二）—— ...</a></p>
<ul>
<li>2012-09-13 09:48</li>
<li>浏览 3788</li>
<li><a href="">评论(4)</a></li>
<li>分类:<a href="http://www.iteye.com/blogs/category/architecture" target="_blank">企业架构</a></li>
<li><a href="http://www.iteye.com/wiki/blog/1677495" target="_blank">相关推荐</a></li>
</ul>
<h3 id="-">评论</h3>
<p><a href=""></a></p>
<p>4 楼 <a href="http://snowolf.iteye.com/" title="snowolf" target="_blank">snowolf</a> 2012-12-11  </p>
<p>zym820910 写道</p>
<p>snowolf 写道</p>
<p>CurrentJ 写道</p>
<p>先写Cache，然后写Database，断电或者故障会导致用户数据丢失。
各有利弊，需要根据业务需求权衡。<img src="" alt="">
写得非常好！应对高并发的时候，我们通常的思维是泄洪模式，通过一道又一道的防洪大堤将洪水分流，尤其是在应对数据要求不严厉的SNS这类产品，异步的保存数据值得提倡！
不过，更好的方式是：通过旁路式架构，解决代码层面的大部分压力。现在很多商城的商品展示和搜索都采用NOSQL技术来应对处理，异步增加或更新，并不显得那么重要了，更多的是通过产品和技术架构来调整，比如通过分析用户喜好，事先静态化搜索结果。
赞同，感谢分享！<img src="" alt=""> 最核心的优化，还是应当在产品层面多下工夫。找到用户-产品-技术，三方都能满足的平衡点。
3 楼 <a href="http://zym820910.iteye.com/" title="zym820910" target="_blank">zym820910</a> 2012-12-11  </p>
<p>snowolf 写道</p>
<p>CurrentJ 写道</p>
<p>先写Cache，然后写Database，断电或者故障会导致用户数据丢失。
各有利弊，需要根据业务需求权衡。<img src="" alt="">
写得非常好！应对高并发的时候，我们通常的思维是泄洪模式，通过一道又一道的防洪大堤将洪水分流，尤其是在应对数据要求不严厉的SNS这类产品，异步的保存数据值得提倡！
不过，更好的方式是：通过旁路式架构，解决代码层面的大部分压力。现在很多商城的商品展示和搜索都采用NOSQL技术来应对处理，异步增加或更新，并不显得那么重要了，更多的是通过产品和技术架构来调整，比如通过分析用户喜好，事先静态化搜索结果。</p>
<p>2 楼 <a href="http://snowolf.iteye.com/" title="snowolf" target="_blank">snowolf</a> 2012-11-07  </p>
<p>CurrentJ 写道</p>
<p>先写Cache，然后写Database，断电或者故障会导致用户数据丢失。
各有利弊，需要根据业务需求权衡。<img src="" alt="">
1 楼 <a href="http://currentj.iteye.com/" title="CurrentJ" target="_blank">CurrentJ</a> 2012-11-07  </p>
<p>先写Cache，然后写Database，断电或者故障会导致用户数据丢失。</p>
<h3 id="-">发表评论</h3>
<p><a href="http://snowolf.iteye.com/login" target="_blank"><img src="" alt=""></a><a href="http://snowolf.iteye.com/login" target="_blank">您还没有登录,请您登录后再发表评论</a></p>
<p><a href="http://snowolf.iteye.com/" target="_blank"><img src="&quot;snowolf的博客: Snowolf的意境空间！&quot;" alt="snowolf的博客"></a></p>
<p>snowolf</p>
<ul>
<li>浏览: 902532 次</li>
<li>性别: <img src="&quot;男&quot;" alt="Icon_minigender_1"></li>
<li>来自: 北京</li>
<li><img src="" alt=""><h3 id="-http-snowolf-iteye-com-blog-user_visits-">最近访客 <a href="http://snowolf.iteye.com/blog/user_visits" target="_blank">更多访客&gt;&gt;</a></h3>
</li>
</ul>
<p><a href="http://torry-he.iteye.com/" target="_blank"><img src="&quot;torry_he的博客: &quot;" alt="torry_he的博客"></a></p>
<p><a href="http://torry-he.iteye.com/" title="torry_he" target="_blank">torry_he</a></p>
<p><a href="http://cxzucc.iteye.com/" target="_blank"><img src="&quot;cxzucc的博客: &quot;" alt="cxzucc的博客"></a></p>
<p><a href="http://cxzucc.iteye.com/" title="cxzucc" target="_blank">cxzucc</a>
<a href="http://greatestrabit.iteye.com/" target="_blank"><img src="&quot;greatestrabit的博客: &quot;" alt="greatestrabit的博客"></a></p>
<p><a href="http://greatestrabit.iteye.com/" title="greatestrabit" target="_blank">greatestrabit</a></p>
<p><a href="http://zhumingyuan.iteye.com/" target="_blank"><img src="&quot;zhumingyuan的博客: &quot;" alt="zhumingyuan的博客"></a></p>
<p><a href="http://zhumingyuan.iteye.com/" title="zhumingyuan" target="_blank">zhumingyuan</a></p>
<h3 id="-">文章分类</h3>
<ul>
<li><a href="http://snowolf.iteye.com/" target="_blank">全部博客 (161)</a></li>
<li><a href="http://snowolf.iteye.com/category/44718" target="_blank">职场 &amp;&amp; 心情 (22)</a></li>
<li><a href="http://snowolf.iteye.com/category/28520" target="_blank">Java／Basic (17)</a></li>
<li><a href="http://snowolf.iteye.com/category/102898" target="_blank">Java／Compression (7)</a></li>
<li><a href="http://snowolf.iteye.com/category/68576" target="_blank">Java／Security (22)</a></li>
<li><a href="http://snowolf.iteye.com/category/147023" target="_blank">Java／Maven (3)</a></li>
<li><a href="http://snowolf.iteye.com/category/214766" target="_blank">Java／Cache (11)</a></li>
<li><a href="http://snowolf.iteye.com/category/38039" target="_blank">Eclipse (4)</a></li>
<li><a href="http://snowolf.iteye.com/category/28518" target="_blank">Spring (19)</a></li>
<li><a href="http://snowolf.iteye.com/category/39212" target="_blank">ORM／Hibernate (2)</a></li>
<li><a href="http://snowolf.iteye.com/category/36643" target="_blank">ORM／iBatis (3)</a></li>
<li><a href="http://snowolf.iteye.com/category/28851" target="_blank">DB／NoSQL (10)</a></li>
<li><a href="http://snowolf.iteye.com/category/34962" target="_blank">DB／MySQL (7)</a></li>
<li><a href="http://snowolf.iteye.com/category/93301" target="_blank">DB／MS SQL Server (4)</a></li>
<li><a href="http://snowolf.iteye.com/category/64032" target="_blank">OS／Linux (10)</a></li>
<li><a href="http://snowolf.iteye.com/category/124565" target="_blank">OS／Mac (7)</a></li>
<li><a href="http://snowolf.iteye.com/category/67920" target="_blank">C／C++ (4)</a></li>
<li><a href="http://snowolf.iteye.com/category/48004" target="_blank">Server Architecture／Basic (11)</a></li>
<li><a href="http://snowolf.iteye.com/category/64267" target="_blank">Server Architecture／Distributed (17)</a></li>
<li><a href="http://snowolf.iteye.com/category/51869" target="_blank">Moblie／Andriod (2)</a></li>
<li><a href="http://snowolf.iteye.com/category/64109" target="_blank">WebService (3)</a></li>
<li><a href="http://snowolf.iteye.com/category/195003" target="_blank">Objective-C (1)</a></li>
<li><a href="http://snowolf.iteye.com/category/28519" target="_blank">Html (1)</a></li>
<li><a href="http://snowolf.iteye.com/category/68028" target="_blank">设计模式 (1)</a></li>
<li><a href="http://snowolf.iteye.com/category/271868" target="_blank">Scala (0)</a></li>
<li><p><a href="http://snowolf.iteye.com/category/274875" target="_blank">Kafka (1)</a></p>
<h3 id="-">社区版块</h3>
</li>
<li><p><a href="http://snowolf.iteye.com/blog/news" target="_blank">我的资讯</a> (0)</p>
</li>
<li><a href="http://snowolf.iteye.com/blog/post" target="_blank">我的论坛</a> (66)</li>
<li><a href="http://snowolf.iteye.com/blog/answered_problems" target="_blank">我的问答</a> (4)</li>
</ul>
<h3 id="-">存档分类</h3>
<ul>
<li><a href="http://snowolf.iteye.com/blog/monthblog/2013-05" target="_blank">2013-05</a> (2)</li>
<li><a href="http://snowolf.iteye.com/blog/monthblog/2013-04" target="_blank">2013-04</a> (1)</li>
<li><a href="http://snowolf.iteye.com/blog/monthblog/2013-03" target="_blank">2013-03</a> (3)</li>
<li><p><a href="http://snowolf.iteye.com/blog/monthblog_more" target="_blank">更多存档...</a></p>
<h3 id="-">评论排行榜</h3>
</li>
<li><p><a href="http://snowolf.iteye.com/blog/1667104" title="征服 Redis + Jedis + Spring （二）—— 哈希表操作（HMGET HMSET）" target="_blank">征服 Redis + Jedis + Spring （二）—— ...</a></p>
</li>
<li><a href="http://snowolf.iteye.com/blog/1681944" title="MySQL 查询时强制区分大小写" target="_blank">MySQL 查询时强制区分大小写</a></li>
<li><a href="http://snowolf.iteye.com/blog/1679923" title="MySQL 运维笔记（一）—— 终止高负载SQL" target="_blank">MySQL 运维笔记（一）—— 终止高负载SQL</a></li>
<li><a href="http://snowolf.iteye.com/blog/1666908" title="征服 Redis + Jedis + Spring （一）—— 配置&amp;常规操作（GET SET DEL）" target="_blank">征服 Redis + Jedis + Spring （一）—— ...</a></li>
<li><a href="http://snowolf.iteye.com/blog/1748094" title="我的职场生涯（十）——又一个两年" target="_blank">我的职场生涯（十）——又一个两年</a></li>
</ul>
<h3 id="-">最新评论</h3>
<ul>
<li><a href="http://dbh0512.iteye.com/" title="dbh0512" target="_blank">dbh0512</a>： 这样操作只是在缓存中读取吗?项目中是不是只有在海量频繁读取某一 ...
<a href="http://snowolf.iteye.com/blog/1666908#bc2322585" target="_blank">征服 Redis + Jedis + Spring （一）—— 配置&amp;常规操作（GET SET DEL）</a></li>
<li><a href="http://jacy9.iteye.com/" title="愤怒的程序猿" target="_blank">愤怒的程序猿</a>： LZ:keytool错误:java.lang.Exceptio ...
<a href="http://snowolf.iteye.com/blog/397693#bc2322089" target="_blank">Java加密技术（九）——初探SSL</a></li>
<li><a href="http://snowolf.iteye.com/" title="snowolf" target="_blank">snowolf</a>： juwend 写道如果被加密的明文使用String ming ...
<a href="http://snowolf.iteye.com/blog/381767#bc2321550" target="_blank">Java加密技术（四）——非对称加密算法RSA</a></li>
<li><a href="http://simylau.iteye.com/" title="simylau" target="_blank">simylau</a>： water_lang 写道@Autowired      pr ...
<a href="http://snowolf.iteye.com/blog/577989#bc2320738" target="_blank">Spring 注解学习手札（一） 构建简单Web应用</a></li>
<li><a href="http://ifox.iteye.com/" title="ifox" target="_blank">ifox</a>： phrmgb 写道学习了，这些东东有时感觉很偏的，但是特殊的业 ...
<a href="http://snowolf.iteye.com/blog/1329649#bc2319809" target="_blank">Java关键字——transient</a>
声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。
© 2003-2012 ITeye.com. All rights reserved. [ 京ICP证110151号 京公网安备110105010620 ]
<img src="http://stat.iteye.com/?url=http%3A%2F%2Fsnowolf.iteye.com%2Fblog%2F1677495&amp;referrer=&amp;user_id=" alt=""> <img src="http://dt.tongji.linezing.com/tongji.do?unit_id=1122445&amp;uv_id=15753577192130187469&amp;uv_new=0&amp;cna=&amp;cg=&amp;mid=&amp;mmland=&amp;ade=&amp;adtm=&amp;sttm=&amp;cpa=&amp;ss_id=3627902245&amp;ss_no=0&amp;ec=1&amp;ref=&amp;url=http%3A//snowolf.iteye.com/blog/1677495&amp;title=Memcached%u7B14%u8BB0%u2014%u2014%uFF08%u56DB%uFF09%u5E94%u5BF9%u9AD8%u5E76%u53D1%u653B%u51FB - Snowolf%u7684%u610F%u5883%u7A7A%u95F4%uFF01 - ITeye%u6280%u672F%u7F51%u7AD9&amp;charset=utf-8&amp;domain=iteye.com&amp;hashval=909&amp;filtered=0&amp;app=Microsoft Internet Explorer&amp;agent=Mozilla/5.0 %28compatible%3B MSIE 9.0%3B Windows NT 6.1%3B WOW64%3B Trident/5.0%3B SLCC2%3B .NET CLR 2.0.50727%3B .NET CLR 3.5.30729%3B .NET CLR 3.0.30729%3B Media Center PC 6.0%3B .NET4.0C%3B .NET4.0E%3B InfoPath.3%29&amp;color=24-bit&amp;screen=1600x900&amp;lg=zh-cn&amp;je=1&amp;fv=10.0&amp;st=1377062586&amp;vc=eee3dea2&amp;ut=2&amp;url_id=0&amp;cnu=0.01284455030611481" alt=""><a href="http://tongji.alimama.com/report.html?unit_id=1122445" target="_blank"><img src="" alt="量子统计"></a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span><span class="breadcrumb"><li><a href="/categories/Nosql/">Nosql</a></li><li><a href="/categories/Nosql/mongo/">mongo</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a><a href="/tags/mongo/" class="label label-success">mongo</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql-mongo--Memcached笔记——（四）应对高并发攻击/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql-mongo--Memcached笔记——（四）应对高并发攻击" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础入门_云涛_新浪博客/">MongoDB基础入门_云涛_新浪博客</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础入门_云涛_新浪博客/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="mongodb-_-_-">MongoDB基础入门<em>云涛</em>新浪博客</h1>
<p><a href="http://blog.sina.com.cn/" target="_blank"><img src="" alt="新浪博客"></a></p>
<p><a href="http://blog.sina.com.cn/" target="_blank">博客首页</a></p>
<p><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank">登录</a><a href="http://login.sina.com.cn/signup/signupmail.php?entry=blog&amp;srcuid=1594116685&amp;src=blogicp" target="_blank">注册</a>
<a href="http://qing.weibo.com/tag/%E5%8A%A8%E6%BC%AB?blogid=10bc6e9033003dyy" target="_blank">你没见过的口袋妖怪</a>
<a href="http://control.blog.sina.com.cn/admin/article/article_add.php" target="_blank"><img src="&quot;博文&quot;" alt=""> 发博文</a></p>
<p>博文</p>
<p>×</p>
<p>推荐：<a href="http://blog.sina.com.cn/lm/z/2012pandian/" target="_blank">2012博客年终盘点</a><a href="http://qing.weibo.com/activity/pandian/index.html" target="_blank">最小清新年度热图盘点</a>
推荐：<a href="http://blog.sina.com.cn/lm/z/2012pandian/" target="_blank">2012博客年终盘点</a><a href="http://qing.weibo.com/activity/pandian/index.html" target="_blank">最小清新年度热图盘点</a></p>
<h1 id="-http-blog-sina-com-cn-shangguanyuntao-"><a href="http://blog.sina.com.cn/shangguanyuntao" target="_blank">云涛</a></h1>
<p><a href="http://blog.sina.com.cn/shangguanyuntao" target="_blank"><a href="http://blog.sina.com.cn/shangguanyuntao">http://blog.sina.com.cn/shangguanyuntao</a></a> <a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank">[订阅]</a><a href="">[手机订阅]</a></p>
<p><a href="http://blog.sina.com.cn/shangguanyuntao" target="_blank">首页</a> <a href="http://blog.sina.com.cn/s/articlelist_1594116685_0_1.html" target="_blank">博文目录</a> <a href="http://photo.blog.sina.com.cn/shangguanyuntao" target="_blank">图片</a> <a href="http://blog.sina.com.cn/s/profile_1594116685.html" target="_blank">关于我</a>
<a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#"></a></p>
<p>个人资料</p>
<p><img src="&quot;云涛&quot;" alt="云涛"><a href="http://control.blog.sina.com.cn/blog_7years/index.php" target="_blank"><img src="" alt=""></a></p>
<p><img src="" alt=""> <strong>云涛</strong></p>
<p><a href="http://qing.weibo.com/1594116685" target="_blank"><img src="" alt="">Qing</a> <a href="http://weibo.com/u/1594116685?source=blog" target="_blank"><img src="" alt="">微博</a>
<a href="">加好友</a> <a href="">发纸条</a></p>
<p><a href="http://blog.sina.com.cn/s/profile_1594116685.html#write" target="_blank">写留言</a> <a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank">加关注</a></p>
<ul>
<li>博客等级：<img src="" alt=""><img src="" alt=""></li>
<li><p>博客积分：<strong>176</strong></p>
</li>
<li><p>博客访问：<strong>8,061</strong></p>
</li>
<li>关注人气：<strong>2</strong></li>
</ul>
<p>相关博文</p>
<ul>
<li><a href="http://qing.weibo.com/tag/%E4%BA%BA%E4%BD%93%E8%89%BA%E6%9C%AF?blogid=a3b6607633002j1r" title="人体艺术大师的“赤裸世界”" target="_blank">人体艺术大师的“赤裸世界”</a></li>
</ul>
<p><a href="http://qing.weibo.com/tag/%E4%BA%BA%E4%BD%93%E8%89%BA%E6%9C%AF?blogid=a3b6607633002j1r" target="_blank">谭氏太极</a></p>
<ul>
<li><a href="http://union.9173.com/pub?p=1&amp;u=1007-1" title="曹操一家为啥都喜欢有夫之妇？" target="_blank">曹操一家为啥都喜欢有夫之妇？</a></li>
</ul>
<p><a href="http://union.9173.com/pub?p=1&amp;u=1007-1" target="_blank">微三国</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_598ff4a40101dwbb.html" title="小康三元素" target="_blank">小康三元素</a></li>
</ul>
<p><a href="http://blog.sina.com.cn/u/1502606500" target="_blank">医生爱红酒</a>
<a href="http://search.sina.com.cn/?c=blog&amp;q=%D4%D3%CC%B8%2C%D0%DD%CF%D0&amp;by=tag" target="_blank">更多&gt;&gt;</a>
精彩图文</p>
<p><a href="http://qing.weibo.com/tag/%E4%BA%BA%E4%BD%93%E8%89%BA%E6%9C%AF?blogid=4e6ce40833002869" target="_blank"><img src="" alt="">黑白世界中的人体之美</a></p>
<ul>
<li><a href="http://qing.weibo.com/tag/%E4%BA%BA%E4%BD%93%E8%89%BA%E6%9C%AF?blogid=4e6ce40833002869" target="_blank"><img src="" alt="黑白世界中的人体之美"></a></li>
<li><a href="http://qing.weibo.com/tag/%E6%97%85%E6%B8%B8?blogid=59d8df1a0102elid" target="_blank"><img src="" alt="实拍色彩斑斓的威尼斯"></a></li>
<li><a href="http://qing.weibo.com/tag/%E7%BE%8E%E9%A3%9F?blogid=4d0c8f4b0102edup" target="_blank"><img src="" alt="自制薰衣草马卡龙"></a></li>
</ul>
<p><a href="http://qing.weibo.com/fancy.html" target="_blank">查看更多</a>&gt;&gt;</p>
<p>推荐博文</p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_4a46c3960102fb3s.html?tj=2" title="太不可思议了！以后救你一命的可" target="_blank">太不可思议了！以后救你一命的可</a></li>
</ul>
<p><a href="http://blog.sina.com.cn/u/1246151574" target="_blank">康斯坦丁</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_69f845650102e7v2.html?tj=2" title="男子体验分娩痛不欲生(图)" target="_blank">男子体验分娩痛不欲生(图)</a></li>
</ul>
<p><a href="http://blog.sina.com.cn/u/1777878373" target="_blank">趣看天下</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_5b2b70620101c9n5.html?tj=2" title="脸红和害羞是什么关系？" target="_blank">脸红和害羞是什么关系？</a></li>
</ul>
<p><a href="http://blog.sina.com.cn/u/1529573474" target="_blank">科学松鼠会</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_64e5abde0102emof.html?tj=2" title="腊月初八为何必须要喝“腊八粥”" target="_blank">腊月初八为何必须要喝“腊八粥”</a></li>
</ul>
<p><a href="http://blog.sina.com.cn/u/1692773342" target="_blank">李秋雨</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_64e5abde0102en3b.html?tj=2" title="我们那些被显微镜放大了的真实生" target="_blank">我们那些被显微镜放大了的真实生</a></li>
</ul>
<p><a href="http://blog.sina.com.cn/u/1692773342" target="_blank">李秋雨</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_69f845650102e7v0.html?tj=2" title="挖地道洗劫银行金库超1亿欧元(" target="_blank">挖地道洗劫银行金库超1亿欧元(</a></li>
</ul>
<p><a href="http://blog.sina.com.cn/u/1777878373" target="_blank">趣看天下</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_57a1cb07010198pl.html?tj=2" title="浏览器抢票插件好用很公平叫停属" target="_blank">浏览器抢票插件好用很公平叫停属</a></li>
</ul>
<p><a href="http://blog.sina.com.cn/u/1470221063" target="_blank">董正伟</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_5e13f6110102e1ws.html?tj=2" title="惠普实验室在HP D" target="_blank">惠普实验室在HP D</a></li>
</ul>
<p><a href="http://blog.sina.com.cn/u/1578366481" target="_blank">惠普中国研究院</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_56c35a550102e159.html?tj=2" title="中兴的挑战" target="_blank">中兴的挑战</a></li>
</ul>
<p><a href="http://blog.sina.com.cn/u/1455643221" target="_blank">刘兴亮</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_4d4853500102e11z.html?tj=2" title="见柴静，见人性" target="_blank">见柴静，见人性</a></li>
</ul>
<p><a href="http://blog.sina.com.cn/u/1296585552" target="_blank">itkiller</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_49a6b5500102e2r9.html?tj=1" target="_blank"><img src="" alt="兰州郊外乡村雪中行"></a></li>
</ul>
<p><a href="http://blog.sina.com.cn/s/blog_49a6b5500102e2r9.html?tj=1" target="_blank">兰州郊外乡村雪中行</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_4a46c3960102fb3s.html?tj=1" target="_blank"><img src="" alt="熊猫基因有助人体健康"></a></li>
</ul>
<p><a href="http://blog.sina.com.cn/s/blog_4a46c3960102fb3s.html?tj=1" target="_blank">熊猫基因有助人体健康</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_69f845650102e7v2.html?tj=1" target="_blank"><img src="" alt="男子体验分娩痛不欲生"></a></li>
</ul>
<p><a href="http://blog.sina.com.cn/s/blog_69f845650102e7v2.html?tj=1" target="_blank">男子体验分娩痛不欲生</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_64e5abde0102en3b.html?tj=1" target="_blank"><img src="" alt="显微镜下的真实生活"></a></li>
</ul>
<p><a href="http://blog.sina.com.cn/s/blog_64e5abde0102en3b.html?tj=1" target="_blank">显微镜下的真实生活</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_69f845650102e7v0.html?tj=1" target="_blank"><img src="" alt="挖地道洗劫银行金库"></a></li>
</ul>
<p><a href="http://blog.sina.com.cn/s/blog_69f845650102e7v0.html?tj=1" target="_blank">挖地道洗劫银行金库</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_5040daca0102e2rp.html?tj=1" target="_blank"><img src="" alt="游戏迷最爱蛋糕"></a></li>
</ul>
<p><a href="http://blog.sina.com.cn/s/blog_5040daca0102e2rp.html?tj=1" target="_blank">游戏迷最爱蛋糕</a></p>
<p><a href="http://blog.sina.com.cn/lm/top/it/day.html" target="_blank">查看更多</a>&gt;&gt;
谁看过这篇博文</p>
<p>暂无访客</p>
<p>正文 字体大小：<a href="">大</a> <strong>中</strong> <a href="">小</a></p>
<h2 id="mongodb-">MongoDB基础入门</h2>
<p><img src="&quot;此博文包含图片&quot;" alt="">  (2012-11-14 14:26:35)</p>
<p><a href=""><img src="" alt="">转载<em>▼</em></a></p>
<p>标签：</p>
<h3 id="-http-search-sina-com-cn-c-blog-q-c8-fd-d4-aa-cb-d8-by-tag-"><a href="http://search.sina.com.cn/?c=blog&amp;q=%C8%FD%D4%AA%CB%D8&amp;by=tag" target="_blank">三元素</a></h3>
<h3 id="-http-search-sina-com-cn-c-blog-q-ce-c4-bc-fe-bc-d0-by-tag-"><a href="http://search.sina.com.cn/?c=blog&amp;q=%CE%C4%BC%FE%BC%D0&amp;by=tag" target="_blank">文件夹</a></h3>
<h3 id="-http-search-sina-com-cn-c-blog-q-b9-d8-cf-b5-ca-fd-be-dd-bf-e2-by-tag-"><a href="http://search.sina.com.cn/?c=blog&amp;q=%B9%D8%CF%B5%CA%FD%BE%DD%BF%E2&amp;by=tag" target="_blank">关系数据库</a></h3>
<h3 id="-http-search-sina-com-cn-c-blog-q-bc-af-ba-cf-by-tag-"><a href="http://search.sina.com.cn/?c=blog&amp;q=%BC%AF%BA%CF&amp;by=tag" target="_blank">集合</a></h3>
<h3 id="-http-search-sina-com-cn-c-blog-q-ce-c4-b5-b5-by-tag-"><a href="http://search.sina.com.cn/?c=blog&amp;q=%CE%C4%B5%B5&amp;by=tag" target="_blank">文档</a></h3>
<h3 id="-it-http-search-sina-com-cn-c-blog-q-it-by-tag-"><a href="http://search.sina.com.cn/?c=blog&amp;q=it&amp;by=tag" target="_blank">it</a></h3>
<p> 分类： <a href="http://blog.sina.com.cn/s/articlelist_1594116685_1_1.html" target="_blank">MongoDB</a>
关于MongoDB的好处，优点之类的这里就不说了，唯一要讲的一点就是MongoDB中有三元素：数据库，集合，文档，其中“集合”就是对应关系数据库中的“表”，“文档”对应“行”。</p>
<p><strong>一： 下载</strong></p>
<p>上MongoDB官网 ，我们发现有32bit和64bit，这个就要看你系统了，不过这里有两点注意：</p>
<p>①：根据业界规则，偶数为“稳定版”(如：1.6.X，1.8.X)，奇数为“开发版”(如：1.7.X，1.9.X)，这两个版本的区别相信大家都知道吧。</p>
<p>②：32bit的MongoDB最大只能存放2G的数据，64bit就没有限制。</p>
<p>我这里就下载&quot;2.0.2版本，32bit“，ok，下载之后我就放到”E盘“，改下文件夹名字为”MongoDB“。</p>
<p><strong>二：启动</strong></p>
<p>①：启动之前，我们要给MongoDB指定一个文件夹，这里取名为”db&quot;,用来存放MongoDB的数据。</p>
<p><img src="&quot;MongoDB基础入门&quot;" alt="八天学会MongoDB：第一天 基础入门"></p>
<p>②：微软徽标+R，输入cmd，首先找到“MongoDB”的路径，然后运行mongod开启命令，同时用--dbpath指定数据存放地点为“db”文件夹。</p>
<p><img src="&quot;MongoDB基础入门&quot;" alt="八天学会MongoDB：第一天 基础入门"></p>
<p>③：最后要看下是否开启成功，从图中的信息中获知，MongoDB采用27017端口，那么我们就在浏览器里面键入“<a href="http://localhost:27017/”，" target="_blank">http://localhost:27017/”，</a></p>
<p>打开后，MongoDB告诉我们在27017上Add 1000可以用http模式查看MongoDB的管理信息。</p>
<p><img src="&quot;MongoDB基础入门&quot;" alt="八天学会MongoDB：第一天 基础入门"></p>
<p><strong>三：基本操作</strong></p>
<p>由于是开篇，就大概的说下基本的“增删查改“，我们再开一个cmd，输入mongo命令打开shell，其实这个shell就是MongoDB的客户端，</p>
<p>同时也是一个js的编译器，默认连接的是“test”数据库。</p>
<p><img src="&quot;MongoDB基础入门&quot;" alt="八天学会MongoDB：第一天 基础入门"></p>
<p><strong><1> insert 操作</strong></p>
<p>好，数据库有了，下一步就是集合，这里就取集合名为“person”，要注意的就是文档是一个json的扩展(Bson)形式。</p>
<p><img src="&quot;MongoDB基础入门&quot;" alt="八天学会MongoDB：第一天 基础入门"></p>
<p><strong><2> find 操作</strong></p>
<p>我们将数据插入后，肯定是要find出来，不然插了也白插，这里要注意两点：</p>
<p>① “_id&quot;： 这个字段是数据库默认给我们加的GUID，目的就是保证数据的唯一性。</p>
<p>② 严格的按照Bson的形式书写文档，不过也没关系，错误提示还是很强大的。</p>
<p><img src="&quot;MongoDB基础入门&quot;" alt="八天学会MongoDB：第一天 基础入门"></p>
<p><strong><3> update操作</strong></p>
<p>update方法的第一个参数为“查找的条件”，第二个参数为“更新的值”，学过C/#，相信还是很好理解的。</p>
<p><img src="&quot;MongoDB基础入门&quot;" alt="八天学会MongoDB：第一天 基础入门"></p>
<p><strong><4> remove操作</strong></p>
<p>remove中如果不带参数将删除所有数据，呵呵，很危险的操作，在MongoDB中是一个不可撤回的操作，三思而后行。</p>
<p><img src="&quot;MongoDB基础入门&quot;" alt="八天学会MongoDB：第一天 基础入门"></p>
<p>分享： <a href=""><img src="&quot;分享到新浪Qing&quot;" alt="">分享到新浪Qing</a></p>
<p><a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到MSN&quot;"></a><a href="&quot;分享到开心网&quot;"></a><a href="&quot;分享到人人网&quot;"></a><a href="&quot;分享到QQ空间&quot;"></a><a href="&quot;分享到豆瓣&quot;"></a><a href="&quot;更多平台&quot;"></a></p>
<p>0</p>
<p><img src="" alt="">喜欢
阅读(16)<em>┊</em> <a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#commonComment" target="_blank">评论</a> (0)<em>┊</em> <a href="">收藏</a>(0) <em>┊</em><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank">转载</a><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank">(0)</a> <em>┊</em> <a href="">喜欢</a><a href=""><strong>▼</strong></a> <em>┊</em><a href="http://blog.sina.com.cn/main_v5/ria/print.html?blog_id=blog_5f044a4d01016pl8" target="_blank">打印</a><em>┊</em><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank">举报</a></p>
<p>已投稿到： <img src="&quot;排行榜&quot;" alt=""> <a href="http://blog.sina.com.cn/lm/114/113/day.html" target="_blank">排行榜</a><img src="&quot;圈子&quot;" alt=""> <a href="http://q.sina.com.cn/blog_groups.php?fid=5f044a4d01016pl8" target="_blank">圈子</a></p>
<h3 id="-http-blog-sina-com-cn-s-blog_5f044a4d01016pl8-html-"><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" title="关闭"></a>转载列表：</h3>
<p>*
<a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="" alt="">转载</a></p>
<p>转载是分享博文的一种常用方式...
前一篇：<a href="http://blog.sina.com.cn/s/blog_5f044a4d01016nqa.html" target="_blank">Linux压缩及解压命令</a></p>
<p>后一篇：<a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pme.html" target="_blank">MongoDB细说增删查改</a></p>
<p><strong>评论</strong> <a href="http://blog.sina.com.cn/lm/8/2009/0325/105340.html" target="_blank">重要提示：警惕虚假中奖信息</a>|[商讯]<a href="http://bf.sina.com.cn/newbf/zt/ysqm.html" target="_blank">我有明星气势签名</a></p>
<p><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#post" target="_blank">[发评论]</a></p>
<ul>
<li>当第一个评论者吧！ <img src="" alt=""> <a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#post" target="_blank">抢沙发&gt;&gt;</a>
<a href=""></a></li>
</ul>
<p><strong>发评论</strong> [商讯]<a href="http://sina.allyes.com/main/adfclick?db=sina&amp;bid=277830,334360,339653&amp;cid=0,0,0&amp;sid=334533&amp;advid=7567&amp;camid=52451&amp;show=ignore&amp;url=http://all.vic.sina.com.cn/2011citicgongyi/index.php" target="_blank">爱心签名换梦想，天天派奖</a>|[商讯]<a href="http://sina.allyes.com/main/adfclick?db=sina&amp;bid=204720,299859,305135&amp;cid=0,0,0&amp;sid=298939&amp;advid=358&amp;camid=37389&amp;show=ignore&amp;url=http://blog.sina.com.cn/s/blog_705463570100phtd.html?tj=1" target="_blank">提高博客人气新方法</a></p>
<p><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;小新小浪&quot;" alt="小新小浪"></a><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;炮炮兵&quot;" alt="炮炮兵"></a><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;张富贵&quot;" alt="张富贵"></a><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;旺狗&quot;" alt="旺狗"></a><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;悠嘻猴&quot;" alt="悠嘻猴"></a><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;酷巴熊&quot;" alt="酷巴熊"></a><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank">更多&gt;&gt;</a></p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;就不买你&quot;" alt="就不买你"></a></li>
<li><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;股市&quot;" alt="股市"></a></li>
<li><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;发霉&quot;" alt="发霉"></a></li>
<li><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;陈水边&quot;" alt="陈水边"></a></li>
<li><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;裁员&quot;" alt="裁员"></a></li>
<li><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;音乐&quot;" alt="音乐"></a></li>
<li><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;贴你&quot;" alt="贴你"></a></li>
<li><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank"><img src="&quot;抢车位&quot;" alt="抢车位"></a>
登录名： 密码： <a href="http://login.sina.com.cn/getpass.html" target="_blank">找回密码</a> <a href="http://login.sina.com.cn/signup/signup.php?entry=blog&amp;src=blogicp&amp;srcuid=1594116685" target="_blank">注册</a> 记住登录状态</li>
</ul>
<p>昵   称：</p>
<p><img src="" alt="">分享到微博 <img src="&quot;新&quot;" alt="">   评论并转载此博文<img src="&quot;新&quot;" alt=""></p>
<p>验证码： <a href="">请点击后输入验证码</a><img src="" alt="">  <a href="">收听验证码</a> <img src="" alt=""></p>
<p>匿名评论</p>
<p><a href="">发评论</a></p>
<p>以上网友发言只代表其个人观点，不代表新浪网的观点或立场。
&lt; 前一篇<a href="http://blog.sina.com.cn/s/blog_5f044a4d01016nqa.html" target="_blank">Linux压缩及解压命令</a></p>
<p>后一篇 &gt;<a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pme.html" target="_blank">MongoDB细说增删查改</a></p>
<p><a href="http://control.blog.sina.com.cn/admin/advice/advice_list.php" target="_blank">新浪BLOG意见反馈留言板</a>　<a href="">不良信息反馈</a>　电话：4006900000 提示音后按1键（按当地市话标准计费）　欢迎批评指正</p>
<p><a href="http://corp.sina.com.cn/chn/" target="_blank">新浪简介</a> | <a href="http://corp.sina.com.cn/eng/" target="_blank">About Sina</a> | <a href="http://emarketing.sina.com.cn/" target="_blank">广告服务</a> | <a href="http://www.sina.com.cn/contactus.html" target="_blank">联系我们</a> | <a href="http://corp.sina.com.cn/chn/sina_job.html" target="_blank">招聘信息</a> | <a href="http://www.sina.com.cn/intro/lawfirm.shtml" target="_blank">网站律师</a> | <a href="http://english.sina.com/" target="_blank">SINA English</a> | <a href="http://members.sina.com.cn/apply/" target="_blank">会员注册</a> | <a href="http://help.sina.com.cn/" target="_blank">产品答疑</a></p>
<p>Copyright © 1996 - 2013 SINA Corporation, All Rights Reserved</p>
<p>新浪公司 <a href="http://www.sina.com.cn/intro/copyright.shtml" target="_blank">版权所有</a>
<a href="http://www.bj.cyberpolice.cn/index.jsp"></a></p>
<p>X</p>
<p>分享到...</p>
<p>选择其他平台 &gt;&gt;
<img src="&quot;365&quot;" alt=""><a href="http://control.blog.sina.com.cn/admin/article/article_add.php?tag365" target="_blank">365</a></p>
<p><img src="&quot;长微博&quot;" alt=""><a href="http://control.blog.sina.com.cn/admin/article/changWeiBo.php" target="_blank">长微博</a></p>
<p><img src="&quot;微语录&quot;" alt=""><a href="http://control.blog.sina.com.cn/weiyulu/weiyulu.php" target="_blank">微语录</a></p>
<p><img src="&quot;九宫格&quot;" alt=""><a href="http://control.blog.sina.com.cn/admin/article/daily.php" target="_blank">九宫格</a></p>
<p><img src="&quot;发照片&quot;" alt=""><a href="http://photo.blog.sina.com.cn/upload/upload.php" target="_blank">发照片</a></p>
<p><img src="&quot;发视频&quot;" alt=""><a href="http://vupload.you.video.sina.com.cn/u.php?m=1" target="_blank">发视频</a></p>
<p><img src="&quot;发商品&quot;" alt=""><a href="http://control.blog.sina.com.cn/admin/article/article_add.php?tbh=1" target="_blank">发商品</a></p>
<ul>
<li><a href="">博文</a></li>
<li><a href="">博主</a></li>
<li><a href="">音乐</a></li>
<li><a href="">视频</a></li>
<li><a href="">播主</a>
<a href="&quot;关闭&quot;"></a></li>
</ul>
<p>最近喜欢了的博主：
<img src="" alt="">加载中…</p>
<ul>
<li><a href="&quot;转载到Qing博客&quot;"><img src="" alt="">Qing</a></li>
<li><a href="&quot;转载到博客&quot;"><img src="" alt="">博客</a></li>
<li><a href="&quot;转载原文&quot;"><img src="" alt="">转载原文</a></li>
<li><a href="&quot;采编&quot;"><img src="" alt="">采编</a></li>
<li><a href="&quot;发布长微博&quot;"><img src="" alt="">长微博</a>
分享到新浪Qing</li>
</ul>
<p>分享到新浪微博</p>
<p><a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" title="关闭提示"></a></p>
<p>为了您的账号安全，请<a href="http://blog.sina.com.cn/s/blog_5f044a4d01016pl8.html#" target="_blank">绑定邮箱</a>
<a href="http://www.bshare.cn/intro" target="_blank">分享到</a><a href="">X</a></p>
<p><a href="">腾讯微博</a></p>
<p><a href="">一键通</a>
<a href="">新浪微博</a></p>
<p><a href="&quot;QQ空间&quot;">QQ空间</a></p>
<p><a href="&quot;人人网&quot;">人人网</a>
<a href="&quot;天涯&quot;">天涯</a></p>
<p><a href="&quot;凤凰微博&quot;">凤凰微博</a>
<a href="&quot;朋友网&quot;">朋友网</a></p>
<p><a href="&quot;人民微博&quot;">人民微博</a>
<a href="&quot;豆瓣网&quot;">豆瓣网</a>
<a href="&quot;搜狐微博&quot;">搜狐微博</a></p>
<p><a href="&quot;新华微博&quot;">新华微博</a>
<a href="&quot;手机&quot;">手机</a></p>
<p><a href="&quot;网易微博&quot;">网易微博</a>
<a href="&quot;开心网&quot;">开心网</a></p>
<p><a href="&quot;百度空间&quot;">百度空间</a>
<a href="&quot;QQ好友&quot;">QQ好友</a>
更多平台... (130)</p>
<p><a href="http://www.bshare.cn/" target="_blank">bShare</a></p>
<p><img src="&quot;将选中内容分享到新浪微博&quot;" alt="">
<a href="">幻灯播放</a><a href="http://qing.weibo.com/tag/%E7%AB%A5%E8%AF%9D"></a></p>
<p><a href="&quot;关闭&quot;">关闭</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span><span class="breadcrumb"><li><a href="/categories/Nosql/">Nosql</a></li><li><a href="/categories/Nosql/mongo/">mongo</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a><a href="/tags/mongo/" class="label label-success">mongo</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:32"datetime="2014-03-07 09:54:32"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础入门_云涛_新浪博客/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql-mongo--MongoDB基础入门_云涛_新浪博客" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/139/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/137/">137</a></li><li><a class="page-number" href="/page/138/">138</a></li><li><a class="page-number" href="/page/139/">139</a></li><li class="active"><li><span class="page-number current">140</span></li><li><a class="page-number" href="/page/141/">141</a></li><li><a class="page-number" href="/page/142/">142</a></li><li><a class="page-number" href="/page/143/">143</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/141/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 20:45:44</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
