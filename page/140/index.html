
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 140 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nosql--NoSQL数据库探讨之一－为什么要用非关系数据库？-robbin的自言自语/">NoSQL数据库探讨之一 － 为什么要用非关系数据库？ </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql--NoSQL数据库探讨之一－为什么要用非关系数据库？-robbin的自言自语/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="nosql-robbin-">NoSQL数据库探讨之一 － 为什么要用非关系数据库？ - robbin的自言自语</h1>
<p>随着互联网web2.0网站的兴起，非关系型的数据库现在成了一个极其热门的新领域，非关系数据库产品的发展非常迅速。而传统的关系数据库在应付web2.0网站，特别是超大规模和高并发的SNS类型的web2.0纯动态网站已经显得力不从心，暴露了很多难以克服的问题，例如：
1、High performance - 对数据库高并发读写的需求
web2.0网站要根据用户个性化信息来实时生成动态页面和提供动态信息，所以基本上无法使用动态页面静态化技术，因此数据库并发负载非常高，往往要达到每秒上万次读写请求。关系数据库应付上万次SQL查询还勉强顶得住，但是应付上万次SQL写数据请求，硬盘IO就已经无法承受了。其实对于普通的BBS网站，往往也存在对高并发写请求的需求，例如像JavaEye网站的实时统计在线用户状态，记录热门帖子的点击次数，投票计数等，因此这是一个相当普遍的需求。
2、Huge Storage - 对海量数据的高效率存储和访问的需求
类似Facebook，twitter，Friendfeed这样的SNS网站，每天用户产生海量的用户动态，以Friendfeed为例，一个月就达到了2.5亿条用户动态，对于关系数据库来说，在一张2.5亿条记录的表里面进行SQL查询，效率是极其低下乃至不可忍受的。再例如大型web网站的用户登录系统，例如腾讯，盛大，动辄数以亿计的帐号，关系数据库也很难应付。
3、High Scalability &amp;&amp; High Availability- 对数据库的高可扩展性和高可用性的需求
在基于web的架构当中，数据库是最难进行横向扩展的，当一个应用系统的用户量和访问量与日俱增的时候，你的数据库却没有办法像web server和app server那样简单的通过添加更多的硬件和服务节点来扩展性能和负载能力。对于很多需要提供24小时不间断服务的网站来说，对数据库系统进行升级和扩展是非常痛苦的事情，往往需要停机维护和数据迁移，为什么数据库不能通过不断的添加服务器节点来实现扩展呢？
在上面提到的“三高”需求面前，关系数据库遇到了难以克服的障碍，而对于web2.0网站来说，关系数据库的很多主要特性却往往无用武之地，例如：
1、数据库事务一致性需求
很多web实时系统并不要求严格的数据库事务，对读一致性的要求很低，有些场合对写一致性要求也不高。因此数据库事务管理成了数据库高负载下一个沉重的负担。
2、数据库的写实时性和读实时性需求
对关系数据库来说，插入一条数据之后立刻查询，是肯定可以读出来这条数据的，但是对于很多web应用来说，并不要求这么高的实时性，比方说我（JavaEye的robbin）发一条消息之后，过几秒乃至十几秒之后，我的订阅者才看到这条动态是完全可以接受的。
3、对复杂的SQL查询，特别是多表关联查询的需求
任何大数据量的web系统，都非常忌讳多个大表的关联查询，以及复杂的数据分析类型的复杂SQL报表查询，特别是SNS类型的网站，从需求以及产品设计角度，就避免了这种情况的产生。往往更多的只是单表的主键查询，以及单表的简单条件分页查询，SQL的功能被极大的弱化了。
因此，关系数据库在这些越来越多的应用场景下显得不那么合适了，为了解决这类问题的非关系数据库应运而生，现在这两年，各种各样非关系数据库，特别是键值数据库(Key-Value Store DB)风起云涌，多得让人眼花缭乱。前不久国外刚刚举办了<a href="http://journal.uggedal.com/nosql-east-2009---summary-of-day-1" target="_blank">NoSQL Conference</a>，各路NoSQL数据库纷纷亮相，加上未亮相但是名声在外的，起码有超过10个开源的NoSQLDB，例如：
Redis，Tokyo Cabinet，Cassandra，Voldemort，MongoDB，Dynomite，HBase，CouchDB，Hypertable， Riak，Tin， Flare， Lightcloud， KiokuDB，Scalaris， Kai， ThruDB，  ......
这些NoSQL数据库，有的是用C/C++编写的，有的是用Java编写的，还有的是用Erlang编写的，每个都有自己的独到之处，看都看不过来了，<a href="http://robbin.iteye.com/" target="_blank">我(robbin)</a>也只能从中挑选一些比较有特色，看起来更有前景的产品学习和了解一下。这些NoSQL数据库大致可以分为以下的三类：
一、满足极高读写性能需求的Kye-Value数据库：Redis，Tokyo Cabinet， Flare
高性能Key-Value数据库的主要特点就是具有极高的并发读写性能，Redis，Tokyo Cabinet， Flare，这3个Key-Value DB都是用C编写的，他们的性能都相当出色，但出了出色的性能，他们还有自己独特的功能：
1、<a href="http://code.google.com/p/redis/" target="_blank">Redis</a>
Redis是一个很新的项目，刚刚发布了1.0版本。Redis本质上是一个Key-Value类型的内存数据库，很像memcached，整个数据库统统加载在内存当中进行操作，定期通过异步操作把数据库数据flush到硬盘上进行保存。因为是纯内存操作，Redis的性能非常出色，每秒可以处理超过10万次读写操作，是我知道的性能最快的Key-Value DB。
Redis的出色之处不仅仅是性能，Redis最大的魅力是支持保存List链表和Set集合的数据结构，而且还支持对List进行各种操作，例如从List两端push和pop数据，取List区间，排序等等，对Set支持各种集合的并集交集操作，此外单个value的最大限制是1GB，不像memcached只能保存1MB的数据，因此Redis可以用来实现很多有用的功能，比方说用他的List来做FIFO双向链表，实现一个轻量级的高性能消息队列服务，用他的Set可以做高性能的tag系统等等。另外Redis也可以对存入的Key-Value设置expire时间，因此也可以被当作一个功能加强版的memcached来用。
Redis的主要缺点是数据库容量受到物理内存的限制，不能用作海量数据的高性能读写，并且它没有原生的可扩展机制，不具有scale（可扩展）能力，要依赖客户端来实现分布式读写，因此Redis适合的场景主要局限在较小数据量的高性能操作和运算上。目前使用Redis的网站有github，Engine Yard。
2、<a href="http://1978th.net/" target="_blank">Tokyo Cabinet和Tokoy Tyrant</a>
TC和TT的开发者是日本人Mikio Hirabayashi，主要被用在日本最大的SNS网站mixi.jp上，TC发展的时间最早，现在已经是一个非常成熟的项目，也是Kye-Value数据库领域最大的热点，现在被广泛的应用在很多很多网站上。TC是一个高性能的存储引擎，而TT提供了多线程高并发服务器，性能也非常出色，每秒可以处理4-5万次读写操作。
TC除了支持Key-Value存储之外，还支持保存Hashtable数据类型，因此很像一个简单的数据库表，并且还支持基于column的条件查询，分页查询和排序功能，基本上相当于支持单表的基础查询功能了，所以可以简单的替代关系数据库的很多操作，这也是TC受到大家欢迎的主要原因之一，有一个Ruby的项目<a href="http://github.com/tsukasaoishi/miyazakiresistance" target="_blank">miyazakiresistance</a>将TT的hashtable的操作封装成和ActiveRecord一样的操作，用起来非常爽。
TC/TT在mixi的实际应用当中，存储了2000万条以上的数据，同时支撑了上万个并发连接，是一个久经考验的项目。TC在保证了极高的并发读写性能的同时，具有可靠的数据持久化机制，同时还支持类似关系数据库表结构的hashtable以及简单的条件，分页和排序操作，是一个很棒的NoSQL数据库。
TC的主要缺点是在数据量达到上亿级别以后，并发写数据性能会大幅度下降，<a href="http://bjclark.me/2009/08/04/nosql-if-only-it-was-that-easy/" target="_blank">NoSQL: If Only It Was That Easy</a>提到，他们发现在TC里面插入1.6亿条2-20KB数据的时候，写入性能开始急剧下降。看来是当数据量上亿条的时候，TC性能开始大幅度下降，从TC作者自己提供的mixi数据来看，至少上千万条数据量的时候还没有遇到这么明显的写入性能瓶颈。
这个是Tim Yang做的一个<a href="http://timyang.net/data/mcdb-tt-redis/" target="_blank">Memcached，Redis和Tokyo Tyrant的简单的性能评测，仅供参考</a>
3、<a href="http://labs.gree.jp/Top/OpenSource/Flare-en.html" target="_blank">Flare</a>
TC是日本第一大SNS网站mixi开发的，而Flare是日本第二大SNS网站green.jp开发的，有意思吧。Flare简单的说就是给TC添加了scale功能。他替换掉了TT部分，自己另外给TC写了网络服务器，Flare的主要特点就是支持scale能力，他在网络服务端之前添加了一个node server，来管理后端的多个服务器节点，因此可以动态添加数据库服务节点，删除服务器节点，也支持failover。如果你的使用场景必须要让TC可以scale，那么可以考虑flare。
flare唯一的缺点就是他只支持memcached协议，因此当你使用flare的时候，就不能使用TC的table数据结构了，只能使用TC的key-value数据结构存储。
二、满足海量存储需求和访问的面向文档的数据库：MongoDB，CouchDB
面向文档的非关系数据库主要解决的问题不是高性能的并发读写，而是保证海量数据存储的同时，具有良好的查询性能。MongoDB是用C++开发的，而CouchDB则是Erlang开发的：
1、<a href="http://www.mongodb.org/display/DOCS/Home" target="_blank">MongoDB</a>
MongoDB是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。他支持的数据结构非常松散，是类似json的bjson格式，因此可以存储比较复杂的数据类型。Mongo最大的特点是他支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。
Mongo主要解决的是海量数据的访问效率问题，根据官方的文档，当数据量达到50GB以上的时候，Mongo的数据库访问速度是MySQL的10倍以上。Mongo的并发读写效率不是特别出色，根据官方提供的性能测试表明，大约每秒可以处理0.5万－1.5次读写请求。对于Mongo的并发读写性能，我（robbin）也打算有空的时候好好测试一下。
因为Mongo主要是支持海量数据存储的，所以Mongo还自带了一个出色的分布式文件系统GridFS，可以支持海量的数据存储，但我也看到有些评论认为GridFS性能不佳，这一点还是有待亲自做点测试来验证了。
最后由于Mongo可以支持复杂的数据结构，而且带有强大的数据查询功能，因此非常受到欢迎，很多项目都考虑用MongoDB来替代MySQL来实现不是特别复杂的Web应用，比方说<a href="http://blog.boxedice.com/2009/07/25/choosing-a-non-relational-database-why-we-migrated-from-mysql-to-mongodb/" target="_blank">why we migrated from MySQL to MongoDB</a>就是一个真实的从MySQL迁移到MongoDB的案例，由于数据量实在太大，所以迁移到了Mongo上面，数据查询的速度得到了非常显著的提升。
MongoDB也有一个ruby的项目<a href="http://github.com/jnunemaker/mongomapper" target="_blank">MongoMapper</a>，是模仿Merb的DataMapper编写的MongoDB的接口，使用起来非常简单，几乎和DataMapper一模一样，功能非常强大易用。
2、CouchDB
CouchDB现在是一个非常有名气的项目，似乎不用多介绍了。但是我却对CouchDB没有什么兴趣，主要是因为CouchDB仅仅提供了基于HTTP REST的接口，因此CouchDB单纯从并发读写性能来说，是非常糟糕的，这让我立刻抛弃了对CouchDB的兴趣。
三、满足高可扩展性和可用性的面向分布式计算的数据库：Cassandra，Voldemort
面向scale能力的数据库其实主要解决的问题领域和上述两类数据库还不太一样，它首先必须是一个分布式的数据库系统，由分布在不同节点上面的数据库共同构成一个数据库服务系统，并且根据这种分布式架构来提供online的，具有弹性的可扩展能力，例如可以不停机的添加更多数据节点，删除数据节点等等。因此像Cassandra常常被看成是一个开源版本的Google BigTable的替代品。Cassandra和Voldemort都是用Java开发的：
1、<a href="http://incubator.apache.org/cassandra/" target="_blank">Cassandra</a>
Cassandra项目是Facebook在2008年开源出来的，随后Facebook自己使用Cassandra的另外一个不开源的分支，而开源出来的Cassandra主要被Amazon的Dynamite团队来维护，并且Cassandra被认为是Dynamite2.0版本。目前除了Facebook之外，twitter和digg.com都在使用Cassandra。
Cassandra的主要特点就是它不是一个数据库，而是由一堆数据库节点共同构成的一个分布式网络服务，对Cassandra的一个写操作，会被复制到其他节点上去，对Cassandra的读操作，也会被路由到某个节点上面去读取。对于一个Cassandra群集来说，扩展性能是比较简单的事情，只管在群集里面添加节点就可以了。我看到有文章说Facebook的Cassandra群集有超过100台服务器构成的数据库群集。
Cassandra也支持比较丰富的数据结构和功能强大的查询语言，和MongoDB比较类似，查询功能比MongoDB稍弱一些，twitter的平台架构部门领导Evan Weaver写了一篇文章介绍Cassandra：<a href="http://blog.evanweaver.com/articles/2009/07/06/up-and-running-with-cassandra/" target="_blank"><a href="http://blog.evanweaver.com/articles/2009/07/06/up-and-running-with-cassandra/">http://blog.evanweaver.com/articles/2009/07/06/up-and-running-with-cassandra/</a></a>，有非常详细的介绍。
Cassandra以单个节点来衡量，其节点的并发读写性能不是特别好，有文章说评测下来Cassandra每秒大约不到1万次读写请求，我也看到一些对这个问题进行质疑的评论，但是评价Cassandra单个节点的性能是没有意义的，真实的分布式数据库访问系统必然是n多个节点构成的系统，其并发性能取决于整个系统的节点数量，路由效率，而不仅仅是单节点的并发负载能力。
2、<a href="http://project-voldemort.com/" target="_blank">Voldemort</a>
Voldemort是个和Cassandra类似的面向解决scale问题的分布式数据库系统，Cassandra来自于Facebook这个SNS网站，而Voldemort则来自于Linkedin这个SNS网站。说起来SNS网站为我们贡献了n多的NoSQL数据库，例如Cassandar，Voldemort，Tokyo Cabinet，Flare等等。Voldemort的资料不是很多，因此我没有特别仔细去钻研，Voldemort官方给出Voldemort的并发读写性能也很不错，每秒超过了1.5万次读写。
从Facebook开发Cassandra，Linkedin开发Voldemort，我们也可以大致看出国外大型SNS网站对于分布式数据库，特别是对数据库的scale能力方面的需求是多么殷切。前面我（robbin）提到，web应用的架构当中，web层和app层相对来说都很容易横向扩展，唯有数据库是单点的，极难scale，现在Facebook和Linkedin在非关系型数据库的分布式方面探索了一条很好的方向，这也是为什么现在Cassandra这么热门的主要原因。
如今，NoSQL数据库是个令人很兴奋的领域，总是不断有新的技术新的产品冒出来，改变我们已经形成的固有的技术观念，我自己（robbin）稍微了解了一些，就感觉自己深深的沉迷进去了，可以说NoSQL数据库领域也是博大精深的，我（robbin）也只能浅尝辄止，我（robbin）写这篇文章既是自己一点点钻研心得，也是抛砖引玉，希望吸引对这个领域有经验的朋友来讨论和交流。
从我（robbin）个人的兴趣来说，分布式数据库系统不是我能实际用到的技术，因此不打算花时间深入，而其他两个数据领域（高性能NoSQLDB和海量存储NoSQLDB）都是我很感兴趣的，特别是Redis，TT/TC和MongoDB这3个NoSQL数据库，因此我接下来将写三篇文章分别详细介绍这3个数据库。</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql--NoSQL数据库探讨之一－为什么要用非关系数据库？-robbin的自言自语/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql--NoSQL数据库探讨之一－为什么要用非关系数据库？-robbin的自言自语" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nosql--NoSQL数据库笔谈/">NoSQL数据库笔谈</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql--NoSQL数据库笔谈/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="nosql-">NoSQL数据库笔谈</h1>
<p><strong>NoSQL数据库笔谈</strong></p>
<p><a href="http://www.yankay.com/" target="_blank">颜开</a>
v0.2
2010.2</p>
<ol>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_3648342117667198_092538481578" target="_blank">序</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_6151155580979304_025368058842" target="_blank">思想篇</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#CAP_7730791447684169_231516710" target="_blank">CAP</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_8927957601845264_891876230947" target="_blank">最终一致性</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_688371617347002_0840630698949" target="_blank">变体</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#BASE_9958890723064542_78222997_869969945038222" target="_blank">BASE</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_40717189376329843_06651605852" target="_blank">其他</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#I_O_9886723485627446_373115905_5228612841633498" target="_blank">I/O的五分钟法则</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_8314717379700977_930601348298" target="_blank">不要删除数据</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#RAM_147097721381792_7902793153_006425076106569838" target="_blank">RAM是硬盘,硬盘是磁带</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Amdahl_Gustafson_9052423372139" target="_blank">Amdahl定律和Gustafson定律</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_5841810574932209" target="_blank">万兆以太网</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_7991344137117267_675089238211_7007085816130685" target="_blank">手段篇</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_777160631492734_5802160603925" target="_blank">一致性哈希</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_735276508313792_2270315258144_9783657311654288" target="_blank">亚马逊的现状</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_6454406003627595_776185765138" target="_blank">算法的选择</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#NRW_012323816604251636_2127662_10272764961707637" target="_blank">Quorum NRW</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Vector_clock_41690548602491617_5257623065741377" target="_blank">Vector clock</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Virtual_node_6496471269056201_" target="_blank">Virtual node</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#gossip_34187653195112944_16061_08507828080528557" target="_blank">gossip</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Gossip_State_Transfer_Model_14_5181318348909955" target="_blank">Gossip (State Transfer Model)</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Gossip_Operation_Transfer_Mode_688725990810297" target="_blank">Gossip (Operation Transfer Model)</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Merkle_tree_26526400726288557__5335256577035526" target="_blank">Merkle tree</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Paxos_9032379315516326_7248578" target="_blank">Paxos</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_08464202471077442_91161458194" target="_blank">背景</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_DHT_1358780225498577_43241378_3858325568533115" target="_blank">DHT</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Map_Reduce_Execution_846077151" target="_blank">Map Reduce Execution</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Handling_Deletes_5351970902357" target="_blank">Handling Deletes</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_9441494032710129_695390093706" target="_blank">存储实现</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_6926584525683441_048149148503_6730095064772663" target="_blank">节点变化</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_6616530869432342_668499063771_40951742786596446" target="_blank">列存</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_9307460655327144_814779051211_16340782010495503" target="_blank">描述</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_0735241653420401_214353696530_10910972604729818" target="_blank">特点</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_023765667772280286_6105495251" target="_blank">软件篇</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_22756486493872252_88319420976" target="_blank">亚数据库</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#MemCached_4727136253125943_099_19137860612924817" target="_blank">MemCached</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_5715430571410516_795932562480_594496466269948" target="_blank">特点</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_30675244504305366_58003565301_10183704247790026" target="_blank">内存分配</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_25401546959033316_54044164260_21550351004030177" target="_blank">缓存策略</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_9681760638005524_476574154195_29919331639865443" target="_blank">缓存数据库查询</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_24413638147967254_17374089581" target="_blank">数据冗余与故障预防</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Memcached_mc_4754505836919398_" target="_blank">Memcached客户端（mc）</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_Web_06299667034235767_0770205" target="_blank">缓存式的Web应用程序架构</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_2923975010491904_991216856614_6695281938071784" target="_blank">性能测试</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#dbcached_24141833575267735_558" target="_blank">dbcached</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Memcached_dbcached_80228012544_7159779747569146" target="_blank">Memcached 和 dbcached 在功能上一样吗?</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_12254020875723726_93237325335" target="_blank">列存系列</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Hadoop_Hbase_7008211932696602_" target="_blank">Hadoop之Hbase</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_HadoopDB_694108467096603_8508" target="_blank">耶鲁大学之HadoopDB</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#GreenPlum_9589918625911178_389_2571204937078031" target="_blank">GreenPlum</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#FaceBook_Cassandra_67775802042_5854484279820851" target="_blank">FaceBook之Cassandra</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Cassandra_7570848905089025_855" target="_blank">Cassandra特点</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Keyspace_4281837751378973_7779" target="_blank">Keyspace</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Column_family_CF_7300188887469" target="_blank">Column family（CF）</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Key_8652924433729429_945524073" target="_blank">Key</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Column_7210506089658316_137983" target="_blank">Column</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Super_column_7509394918740693__5465405669459864" target="_blank">Super column</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Sorting_02237180483759471_3623" target="_blank">Sorting</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_9140782690107976_782512314168_5668600168551156" target="_blank">存储</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#API_26318602548081826_11761206" target="_blank">API</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Google_BigTable_89699097442012_4732490241509013" target="_blank">Google之BigTable</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Yahoo_PNUTS_8920611285743113_6" target="_blank">Yahoo之PNUTS</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_277640536666413_1438417866912_5870416136781664" target="_blank">特点</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#PNUTS_5128583965993961_2354956" target="_blank">PNUTS实现</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Record_level_mastering_5517762_46835816908332717" target="_blank">Record-level mastering 记录级别主节点</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#PNUTS_8107177845815062_9043074_09676675858475725" target="_blank">PNUTS的结构</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Tablets_42011614117692475_6287_8740690747386985" target="_blank">Tablets寻址与切分</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Write_09715737083689369_039670_4594814468066295" target="_blank">Write调用示意图</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#PNUTS_232566011293608_85456655" target="_blank">PNUTS感悟</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_SQL_014314330249305951_274686" target="_blank">微软之SQL数据服务</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_5549467765717498_055917970185" target="_blank">非云服务竞争者</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Document_Store_448677452585955" target="_blank">文档存储</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#CouchDB_1114163929904669_32220" target="_blank">CouchDB</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#id3_7125310846245526_994698240_046846452482873" target="_blank">特性</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Riak_22101400413903483_0979197" target="_blank">Riak</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#MongoDB_6119060613540953_36142" target="_blank">MongoDB</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Terrastore_9954661491866293_58" target="_blank">Terrastore</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#ThruDB_380390167243812_4644251" target="_blank">ThruDB</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Key_Value_Tuple_Store_89361288" target="_blank">Key Value / Tuple 存储</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Amazon_SimpleDB_52017362120027_8392263913000672" target="_blank">Amazon之SimpleDB</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Chordless_5471036441883179_507" target="_blank">Chordless</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Redis_5387336107639441_6223163" target="_blank">Redis</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Scalaris_7621760337337995_5287" target="_blank">Scalaris</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Tokyo_cabinet_Tyrant_545688958_7406684038893259" target="_blank">Tokyo cabinet / Tyrant</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#CT_M_9097645017290603_52052040" target="_blank">CT.M</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Scalien_704454814757133_326936" target="_blank">Scalien</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Berkley_DB_9606079710191457_91" target="_blank">Berkley DB</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#MemcacheDB_06512137876498592_4" target="_blank">MemcacheDB</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Mnesia_9154183157888259_898783" target="_blank">Mnesia</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#LightCloud_823765875537818_453" target="_blank">LightCloud</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#HamsterDB_05420895958151517_68" target="_blank">HamsterDB</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Flare_8050426165277293_5400566_5744763652908157" target="_blank">Flare</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Eventually_Consistent_Key_Valu" target="_blank">最终一致性Key Value存储</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_Amazon_Dynamo_520203814357290" target="_blank">Amazon之Dynamo</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_5504176676028282_249060984314_6205024527039867" target="_blank">功能特色</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_3991007534787059_800100618042" target="_blank">架构特色</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#BeansDB_46725810039788485_1444_6422195057201686" target="_blank">BeansDB</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_855878707383143_0006899688354_7439637158723382" target="_blank">简介</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_8856209489372642_306660973986_09293410042228067" target="_blank">更新</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_5668651611345044_858602237877_6976689272639188" target="_blank">特性</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_25480733904987574_39869615321" target="_blank">性能</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Nuclear_5671010203671387_94607_5087654534821493" target="_blank">Nuclear</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_Tips_7329128378643512_0444030_21084614206097596" target="_blank">两个设计上的Tips</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Voldemort_09926958376271466_23_3723235398029888" target="_blank">Voldemort</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Dynomite_9324181654488122_3155" target="_blank">Dynomite</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Kai_8461184647175368_911329902" target="_blank">Kai</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Object_Databases_8488295138588" target="_blank">未分类</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Skynet_9220649347100478_689227" target="_blank">Skynet</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Drizzle_9847466828815841_11171_39190645551632586" target="_blank">Drizzle</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_9596271403133869_245301471091_30492524683708877" target="_blank">比较</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_10969047341495752_68719353526" target="_blank">可扩展性</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_587794222868979_1359147783368_00199023178757618" target="_blank">数据和查询模型</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_23622012604027987_99347529746_4971976801014726" target="_blank">持久化设计</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_6041983840987086_405110552906" target="_blank">应用篇</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#eBay_7439944222569466_24644076_7816704294788374" target="_blank">eBay 架构经验</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_7241636626422405_709893183782_6238797470731577" target="_blank">淘宝架构经验</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_Flickr_11598328692846749_1352" target="_blank">Flickr架构经验</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Twitter_9210753435831028_97021_8836312611977271" target="_blank">Twitter运维经验</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_6155514829537361_554680225560" target="_blank">运维经验</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_Metrics_44020236287486847_696" target="_blank">Metrics</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_6825445668030796_760233095682" target="_blank">配置管理</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Darkmode_5259184612638798_9242_24315166669659272" target="_blank">Darkmode</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_15026388981903727_49114302769" target="_blank">进程管理</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_0638721247682108_828753285625" target="_blank">硬件</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_20228313746363413_71546543696" target="_blank">代码协同经验</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_Review_2868290775437222_09924_496206508469592" target="_blank">Review制度</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_9450378125913654_306697729191" target="_blank">部署管理</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_9827601284285629_932863057418_1654637779888143" target="_blank">团队沟通</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#Cache_7188110122840438_8250995" target="_blank">Cache</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_7156457947548296_394763811409" target="_blank">云计算架构</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_6254229054692272_031210319731" target="_blank">反模式</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#1_Single_Point_of_Failure_0747" target="_blank">单点失败（Single Point of Failure）</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#2_4706029240041971_38065281044" target="_blank">同步调用</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#3_2901653153821826_08160938974" target="_blank">不具备回滚能力</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#4_6656234869733453_99668187927" target="_blank">不记录日志</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#6_27202645502984524_3263167534" target="_blank">无切分的数据库</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#7_1922687441110611_96343139093" target="_blank">无切分的应用</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#8_03636558633297682_8496042666" target="_blank">将伸缩性依赖于第三方厂商</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#OLAP_9558059629367476_3836398019139299" target="_blank">OLAP</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#OLAP_4599690049262246" target="_blank">OLAP报表产品最大的难点在哪里？</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#NOSQL__09502721972778405" target="_blank">NOSQL们背后的共有原则</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_8299268803807944" target="_blank">假设失效是必然发生的</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_3399782225793654" target="_blank">对数据进行分区</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_6817497787365963" target="_blank">保存同一数据的多个副本</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_41232823879475633" target="_blank">动态伸缩</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_4374214008737275" target="_blank">查询支持</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_Map_Reduce__0618697512503632" target="_blank">使用 Map/Reduce 处理汇聚</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_7409241799750766" target="_blank">基于磁盘的和内存中的实现</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_147455643042405" target="_blank">仅仅是炒作?</a></li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_6712483493611217_093368983827" target="_blank">附</a></p>
</li>
<li><p><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_2173698448339071_054548149739" target="_blank">感谢</a></p>
</li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_6935117091385137_745914644052_9642310538889594" target="_blank">版本志</a></li>
<li><a href="http://sebug.net/paper/databases/nosql/Nosql.html#_4067787453532219_249561086297_6469049028134853" target="_blank">引用</a></li>
</ol>
<h1 id="-"><a href=""></a>序</h1>
<p>日前国内没有一套比较完整的NoSQL数据库资料，有很多先驱整理发表了很多，但不是很系统。不材尝试着将各家的资料整合一下，并书写了一些自己的见解。
本书写了一些目前的NoSql的一些主要技术，算法和思想。同时列举了大量的现有的数据库实例。读完全篇，相信读者会对NoSQL数据库了解个大概。
另外我还准备开发一个开源内存数据库galaxydb.本书也是为这个数据库提供一些架构资料。</p>
<h1 id="-"><a href=""></a>思想篇</h1>
<p>CAP，BASE和最终一致性是NoSQL数据库存在的三大基石。而五分钟法则是内存数据存储了理论依据。这个是一切的源头。</p>
<h2 id="-cap"><a href=""></a>CAP</h2>
<p><img src="" alt=""></p>
<ul>
<li>C: <strong>C</strong>onsistency 一致性</li>
<li>A: <strong>A</strong>vailability 可用性(指的是快速获取数据)</li>
<li>P: Tolerance of network <strong>P</strong>artition 分区容忍性(分布式)
10年前，Eric Brewer教授指出了著名的CAP理论，后来Seth Gilbert 和 Nancy lynch两人证明了CAP理论的正确性。CAP理论告诉我们，一个分布式系统不可能满足一致性，可用性和分区容错性这三个需求，最多只能同时满足两个。</li>
</ul>
<p>熊掌与鱼不可兼得也。关注的是一致性，那么您就需要处理因为系统不可用而导致的写操作失败的情况，而如果您关注的是可用性，那么您应该知道系统的read操作可能不能精确的读取到write操作写入的最新值。因此系统的关注点不同，相应的采用的策略也是不一样的，只有真正的理解了系统的需求，才有可能利用好CAP理论。
作为架构师，一般有两个方向来利用CAP理论</p>
<ol>
<li>key-value存储，如Amaze Dynamo等，可根据CAP三原则灵活选择不同倾向的数据库产品。</li>
<li>领域模型 + 分布式缓存 + 存储 （Qi4j和NoSql运动），可根据CAP三原则结合自己项目定制灵活的分布式方案，难度高。
我准备提供第三种方案：实现可以配置CAP的数据库，动态调配CAP。</li>
</ol>
<ul>
<li>CA：传统关系数据库</li>
<li>AP：key-value数据库</li>
</ul>
<p>而对大型网站，可用性与分区容忍性优先级要高于数据一致性，一般会尽量朝着 A、P 的方向设计，然后通过其它手段保证对于一致性的商务需求。架构设计师不要精力浪费在如何设计能满足三者的完美分布式系统，而是应该进行取舍。
不同数据对于一致性的要求是不同的。举例来讲，用户评论对不一致是不敏感的，可以容忍相对较长时间的不一致，这种不一致并不会影响交易和用户体验。而产品价格数据则是非常敏感的，通常不能容忍超过10秒的价格不一致。
CAP理论的证明：<a href="http://www.julianbrowne.com/article/viewer/brewers-cap-theorem" title="Brewer&#39;s CAP Theorem" target="_blank">Brewer&#39;s CAP Theorem</a></p>
<h2 id="-"><a href=""></a>最终一致性</h2>
<p>一言以蔽之：过程松，结果紧，最终结果必须保持一致性
为了更好的描述客户端一致性，我们通过以下的场景来进行，这个场景中包括三个组成部分：</p>
<ul>
<li><p>存储系统
存储系统可以理解为一个黑盒子，它为我们提供了可用性和持久性的保证。</p>
</li>
<li><p>Process A
ProcessA主要实现从存储系统write和read操作</p>
</li>
<li><p>Process B 和ProcessC 
ProcessB和C是独立于A，并且B和C也相互独立的，它们同时也实现对存储系统的write和read操作。
下面以上面的场景来描述下不同程度的一致性：</p>
</li>
<li><p>强一致性
强一致性（即时一致性） 假如A先写入了一个值到存储系统，存储系统保证后续A,B,C的读取操作都将返回最新值</p>
</li>
<li><p>弱一致性
假如A先写入了一个值到存储系统，存储系统不能保证后续A,B,C的读取操作能读取到最新值。此种情况下有一个“不一致性窗口”的概念，它特指从A写入值，到后续操作A,B,C读取到最新值这一段时间。</p>
</li>
<li><p>最终一致性
最终一致性是弱一致性的一种特例。假如A首先write了一个值到存储系统，存储系统保证如果在A,B,C后续读取之前没有其它写操作更新同样的值的话，最终所有的读取操作都会读取到最A写入的最新值。此种情况下，如果没有失败发生的话，“不一致性窗口”的大小依赖于以下的几个因素：交互延迟，系统的负载，以及复制技术中replica的个数（这个可以理解为master/salve模式中，salve的个数），最终一致性方面最出名的系统可以说是DNS系统，当更新一个域名的IP以后，根据配置策略以及缓存控制策略的不同，最终所有的客户都会看到最新的值。</p>
</li>
</ul>
<h3 id="-"><a href=""></a>变体</h3>
<ul>
<li><p>Causal consistency（因果一致性）
如果Process A通知Process B它已经更新了数据，那么Process B的后续读取操作则读取A写入的最新值，而与A没有因果关系的C则可以最终一致性。</p>
</li>
<li><p>Read-your-writes consistency
如果Process A写入了最新的值，那么Process A的后续操作都会读取到最新值。但是其它用户可能要过一会才可以看到。</p>
</li>
<li><p>Session consistency
此种一致性要求客户端和存储系统交互的整个会话阶段保证Read-your-writes consistency.Hibernate的session提供的一致性保证就属于此种一致性。</p>
</li>
<li><p>Monotonic read consistency
此种一致性要求如果Process A已经读取了对象的某个值，那么后续操作将不会读取到更早的值。</p>
</li>
<li><p>Monotonic write consistency
此种一致性保证系统会序列化执行一个Process中的所有写操作。</p>
</li>
</ul>
<h2 id="-base-"><a href=""></a><strong>BASE</strong></h2>
<p>说起来很有趣，BASE的英文意义是碱，而ACID是酸。真的是水火不容啊。</p>
<ul>
<li>Basically Availble --基本可用</li>
<li><p>Soft-state --软状态/柔性事务
&quot;Soft state&quot; 可以理解为&quot;无连接&quot;的, 而 &quot;Hard state&quot; 是&quot;面向连接&quot;的</p>
</li>
<li><p>Eventual Consistency --最终一致性
最终一致性， 也是是 ACID 的最终目的。</p>
</li>
</ul>
<p>BASE模型反ACID模型，完全不同ACID模型，牺牲高一致性，获得可用性或可靠性： Basically Available基本可用。支持分区失败(e.g. sharding碎片划分数据库) Soft state软状态 状态可以有一段时间不同步，异步。 Eventually consistent最终一致，最终数据是一致的就可以了，而不是时时一致。
BASE思想的主要实现有
1.按功能划分数据库
2.sharding碎片 
BASE思想主要强调基本的可用性，如果你需要高可用性，也就是纯粹的高性能，那么就要以一致性或容错性为牺牲，BASE思想的方案在性能上还是有潜力可挖的。</p>
<h2 id="-"><a href=""></a>其他</h2>
<h3 id="-i-o-"><a href=""></a>I/O的五分钟法则</h3>
<p>在 1987 年，<a href="http://en.wikipedia.org/wiki/Jim_Gray_(computer_scientist" target="_blank">Jim Gray</a>) 与 Gianfranco Putzolu 发表了这个&quot;五分钟法则&quot;的观点，简而言之，如果一条记录频繁被访问，就应该放到内存里，否则的话就应该待在硬盘上按需要再访问。这个临界点就是五分钟。 看上去像一条经验性的法则，实际上五分钟的评估标准是根据投入成本判断的，根据当时的硬件发展水准，在内存中保持 1KB 的数据成本相当于硬盘中存据 400 秒的开销(接近五分钟)。这个法则在 1997 年左右的时候进行过一次回顾，证实了五分钟法则依然有效（硬盘、内存实际上没有质的飞跃)，而这次的回顾则是针对 SSD 这个&quot;新的旧硬件&quot;可能带来的影响。
<img src="" alt="">
随着闪存时代的来临，五分钟法则一分为二：是把 SSD 当成较慢的内存（extended buffer pool ）使用还是当成较快的硬盘（extended disk）使用。小内存页在内存和闪存之间的移动对比大内存页在闪存和磁盘之间的移动。在这个法则首次提出的 20 年之后，在闪存时代，5 分钟法则依然有效，只不过适合更大的内存页(适合 64KB 的页，这个页大小的变化恰恰体现了计算机硬件工艺的发展，以及带宽、延时)。</p>
<h3 id="-"><a href=""></a>不要删除数据</h3>
<p>Oren Eini（又名Ayende Rahien）建议开发者尽量避免数据库的软删除操作，读者可能因此认为硬删除是合理的选择。作为对Ayende文章的回应，Udi Dahan强烈建议完全避免数据删除。
所谓软删除主张在表中增加一个IsDeleted列以保持数据完整。如果某一行设置了IsDeleted标志列，那么这一行就被认为是已删除的。Ayende觉得这种方法“简单、容易理解、容易实现、容易沟通”，但“往往是错的”。问题在于：
删除一行或一个实体几乎总不是简单的事件。它不仅影响模型中的数据，还会影响模型的外观。所以我们才要有外键去确保不会出现“订单行”没有对应的父“订单”的情况。而这个例子只能算是最简单的情况。……
当采用软删除的时候，不管我们是否情愿，都很容易出现数据受损，比如谁都不在意的一个小调整，就可能使“客户”的“最新订单”指向一条已经软删除的订单。
如果开发者接到的要求就是从数据库中删除数据，要是不建议用软删除，那就只能硬删除了。为了保证数据一致性，开发者除了删除直接有关的数据行，还应该级联地删除相关数据。可Udi Dahan提醒读者注意，真实的世界并不是级联的：
假设市场部决定从商品目录中删除一样商品，那是不是说所有包含了该商品的旧订单都要一并消失？再级联下去，这些订单对应的所有发票是不是也该删除？这么一步步删下去，我们公司的损益报表是不是应该重做了？
没天理了。
问题似乎出在对“删除”这词的解读上。Dahan给出了这样的例子：
我说的“删除”其实是指这产品“停售”了。我们以后不再卖这种产品，清掉库存以后不再进货。以后顾客搜索商品或者翻阅目录的时候不会再看见这种商品，但管仓库的人暂时还得继续管理它们。“删除”是个贪方便的说法。
他接着举了一些站在用户角度的正确解读：
订单不是被删除的，是被“取消”的。订单取消得太晚，还会产生花费。
员工不是被删除的，是被“解雇”的（也可能是退休了）。还有相应的补偿金要处理。
职位不是被删除的，是被“填补”的（或者招聘申请被撤回）。
在上面这些例子中，我们的着眼点应该放在用户希望完成的任务上，而非发生在某个
实体身上的技术动作。几乎在所有的情况下，需要考虑的实体总不止一个。
为了代替IsDeleted标志，Dahan建议用一个代表相关数据状态的字段：有效、停用、取消、弃置等等。用户可以借助这样一个状态字段回顾过去的数据，作为决策的依据。
删除数据除了破坏数据一致性，还有其它负面的后果。Dahan建议把所有数据都留在数据库里：“别删除。就是别
删除。”</p>
<h3 id="-ram-"><a href=""></a>RAM是硬盘,硬盘是磁带</h3>
<p><a href="http://research.microsoft.com/~Gray/JimGrayHomePageSummary.htm" target="_blank">Jim Gray</a>在过去40年中对技术发展有过巨大的贡献，“内存是新的硬盘，硬盘是新的磁带”是他的名言。“实时”Web应用不断涌现，达到海量规模的系统越来越多，这种后浪推前浪的发展模式对软硬件又有何影响？
<a href="http://www.tbray.org/ongoing/" target="_blank">Tim Bray</a>早在网格计算成为热门话题之前，就<a href="http://www.tbray.org/ongoing/When/200x/2006/05/24/On-Grids" target="_blank">讨论过</a>以RAM和网络为中心的硬件结构的优势，可以用这种硬件建立比磁盘集群速度更快的RAM集群。 对于数据的随机访问，内存的速度比硬盘高几个数量级（即使是最高端的磁盘存储系统也只是勉强达到1,000次寻道/秒）。其次， 随着数据中心的网络速度提高，访问内存的成本更进一步降低。通过网络访问另一台机器的内存比访问磁盘成本更低。就在我写下这段话的时候，Sun的 Infiniband产品线中有一款具备9个全互联非阻塞端口交换机，每个端口的速度可以达到30Gbit/sec！Voltaire产品的端口甚至更多；简直不敢想象。（如果你想了解这类超高性能网络的最新进展，请关注Andreas Bechtolsheim在Standford开设的课程。）</p>
<p>各种操作的时间，以2001年夏季，典型配置的 1GHz 个人计算机为标准：</p>
<p>执行单一指令 1 纳秒从L1 高速缓存取一个字 2 纳秒从内存取一个字 10 纳秒从磁盘取连续存放的一个字 200 纳秒磁盘寻址并取字 8 毫秒以太网
 2GB/s
Tim还指出Jim Gray的
名言中后半句所阐述的真理：“对于随机访问，硬盘慢得不可忍受；但如果你把硬盘当成磁带来用，它吞吐连续数据的速率令人震惊；它天生适合用来给以RAM为主的应用做日志（logging and journaling）。” 
时间闪到几年之后的今天，我们发现硬件的发展趋势在RAM和网络领域势头不减，而在硬盘领域则止步不前。Bill McColl提到用于并行计算的<a href="http://www.computingatscale.com/?p=54" target="_blank">海量内存系统已经出现</a>： 内存是新的硬盘！硬盘速度提高缓慢，内存芯片容量指数上升，in-memory软件架构有望给各类数据密集的应用带来数量级的性能提升。小型机架服务器（1U、2U）很快就会具备T字节、甚至更大量的内存，这将会改变服务器架构中内存和硬盘之间的平衡。硬盘将成为新的磁带，像磁带一样作为顺序存储介质使用（硬盘的顺序访问相当快速），而不再是随机存储介质（非常慢）。这里面有着大量的机会，新产品的性能有望提高10倍、100倍。Dare Obsanjo指出<a href="http://www.25hoursaday.com/weblog/2008/05/23/SomeThoughtsOnTwittersAvailabilityProblems.aspx" target="_blank">如果不把这句真言当回事，会带来什么样的恶劣后果</a>—— 也就是Twitter正面临的麻烦。论及Twitter的内容管理，Obsanjo说，“如果一个设计只是简单地反映了问题描述，你去实现它就会落入磁盘 I/O的地狱。不管你用Ruby on Rails、Cobol on Cogs、C++还是手写汇编都一样，读写负载照样会害死你。”换言之，应该把随机操作推给RAM，只给硬盘留下顺序操作。 
<a href="http://www.lexemetech.com/" target="_blank">Tom White</a>是<a href="http://hadoop.apache.org/core" target="_blank">Hadoop Core</a>项目的提交者，也是Hadoop项目管理委员会的成员。他对Gray的真言中“硬盘是新的磁带”部分作了更深入地探讨。White在讨论MapReduce编程模型的时候指出，为何对于Hadloop这类工具来说，<a href="http://www.lexemetech.com/2008/03/disks-have-become-tapes.html" target="_blank">硬盘仍然是可行的</a>应用程序数据存储介质： 本质上，在MapReduce的工作方式中，数据流式地读出和写入硬盘，MapReduce是以硬盘的传输速率不断地对这些数据进行排序和合并。 与之相比，访问关系数据库中的数据，其速率则是硬盘的寻道速率（寻道指移动磁头到盘面上的指定位置读取或写入数据的过程）。为什么要强调这一点？请看看寻道时间和磁盘传输率的发展曲线。寻道时间每年大约提高5%，而数据传输率每年大约提高20%。寻道时间的进步比数据传输率慢——因此采用由数据传输率决定性能的模型是有利的。MapReduce正是如此。虽然固态硬盘（SSD）能否改变寻道时间/传输率的对比还有待观察，<a href="http://www.lexemetech.com/2008/03/disks-have-become-tapes.html?showComment=1205973660000#c2336624186434337035" target="_blank">White文章的跟贴</a>中，很多人都认为<a href="http://www.lexemetech.com/2008/03/disks-have-become-tapes.html?showComment=1205987880000#c135263265622703132" target="_blank">SSD会成为RAM/硬盘之争中的平衡因素</a>。 
Nati Shalom对<a href="http://natishalom.typepad.com/nati_shaloms_blog/2008/03/scaling-out-mys.html" target="_blank">内存和硬盘在数据库部署和使用中的角色作了一番有理有据的评述</a>。 Shalom着重指出用数据库集群和分区来解决性能和可伸缩性的局限。他说，“数据库复制和数据库分区都存在相同的基本问题，它们都依赖于文件系统/硬盘 的性能，建立数据库集群也非常复杂”。他提议的方案是转向In-Memory Data Grid（IMDG），用Hibernate二级缓存或者GigaSpaces Spring DAO之类的技术作支撑，将持久化作为服务（Persistence as a Service）提供给应用程序。Shalom解释说，IMDG 提供在内存中的基于对象的数据库能力，支持核心的数据库功能，诸如高级索引和查询、事务语义和锁。IMDG还从应用程序的代码中抽象出了数据的拓扑。通过这样的方式，数据库不会完全消失，只是挪到了“正确的”位置。IMDG相比直接RDBMS访问的优势列举如下：</p>
<ul>
<li>位于内存中，速度和并发能力都比文件系统优越得多</li>
<li>数据可通过引用访问</li>
<li>直接对内存中的对象执行数据操作</li>
<li>减少数据的争用</li>
<li>并行的聚合查询</li>
<li>进程内（In-process）的局部缓存</li>
<li>免除了对象-关系映射（ORM）</li>
</ul>
<p>你是否需要改变对应用和硬件的思维方式，最终取决于你要用它们完成的工作。但似乎公论认为，开发者解决性能和可伸缩性的思路已经到了该变一变的时候。</p>
<h3 id="-amdahl-gustafson-"><a href=""></a>Amdahl定律和Gustafson定律</h3>
<p>这里，我们都以S(n)表示n核系统对具体程序的加速比，K表示串行部分计算时间比例。</p>
<p>Amdahl 定律的加速比：S(n) ＝ 使用1个处理器的串行计算时间 / 使用n个处理器的并行计算时间</p>
<p>S(n) = 1/(K+(1-K)/n) = n/(1+(n-1)K)</p>
<p>Gustafson定律的加速比：S(n) ＝ 使用n个处理器的并行计算量 / 使用1个处理器的串行计算量</p>
<p>S(n) = K+(1-K)n
有点冷是不是？
通俗的讲，Amdahl 定律将工作量看作1，有n核也只能分担1-K的工作量；而Gustafson定律则将单核工作量看作1，有n核，就可以增加n(1-K)的工作量。
这里没有考虑引进分布式带来的开销，比如网络和加锁。成本还是要仔细核算的，不是越分布越好。
控制算法的复杂性在常数范围之内。</p>
<h3 id="-"><a href=""></a>万兆以太网</h3>
<h1 id="-"><a href=""></a>手段篇</h1>
<h2 id="-"><a href=""></a>一致性哈希</h2>
<p>要求分布式架构的发展说起。
<strong>第一阶段</strong></p>
<p>考虑到单服务器不能承载，因此使用了分布式架构，最初的算法为 hash() mod n, hash()通常取用户ID，n为节点数。此方法容易实现且能够满足运营要求。缺点是当单点发生故障时，系统无法自动恢复。</p>
<p><img src="" alt=""></p>
<p><strong>第二阶段</strong>
为了解决单点故障，使用 hash() mod (n/2), 这样任意一个用户都有2个服务器备选，可由client随机选取。由于不同服务器之间的用户需要彼此交互，所以所有的服务器需要确切的知道用户所在的位置。因此用户位置被保存到memcached中。
当一台发生故障，client可以自动切换到对应backup，由于切换前另外1台没有用户的session，因此需要client自行重新登录。</p>
<p><img src="" alt=""></p>
<p>这个阶段的设计存在以下问题
负载不均衡，尤其是单台发生故障后剩下一台会压力过大。
不能动态增删节点
节点发生故障时需要client重新登录
<strong>第三阶段</strong>
打算去掉硬编码的hash() mod n 算法，改用一致性哈希(consistent hashing)分布
假如采用Dynamo中的strategy 1
我们把每台server分成v个虚拟节点，再把所有虚拟节点(n/*v)随机分配到一致性哈希的圆环上，这样所有的用户从自己圆环上的位置顺时针往下取到第一个vnode就是自己所属节点。当此节点存在故障时，再顺时针取下一个作为替代节点。</p>
<hr>
<p><img src="" alt="">
<strong>优点：发生单点故障时负载会均衡分散到其他所有节点，程序实现也比较优雅。
</strong></p>
<h3 id="-"><a href=""></a>亚马逊的现状</h3>
<p>aw2.0公司的Alan Williamson撰写了一篇报道，主要是关于他在Amazon EC2上的体验的，他抱怨说，Amazon是公司唯一使用的云提供商，看起来它在开始时能够适应得很好，但是<a href="http://alan.blog-city.com/has_amazon_ec2_become_over_subscribed.htm" target="_blank">有一个临界点</a>：
在开始的日子里Amazon的表现非常棒。实例在几分钟内启动，几乎没有遇到任何问题，即便是他们的<a href="http://aws.amazon.com/ec2/instance-types/" target="_blank">小实例（SMALL INSTANCE）</a>也很健壮，足以支持适当使用的MySQL数据库。在20个月内，Amazon云系统一切运转良好，不需要任何的关心和抱怨。</p>
<p>……</p>
<p>然而，在最后的八个月左右，他们“盔甲”内的漏洞开始呈现出来了。第一个弱点前兆是，新加入的Amazon SMALL实例的性能出现了问题。根据我们的监控，在服务器场中新添加的机器，与原先的那些相比性能有所下降。开始我们认为这是自然出现的怪现象，只是碰 巧发生在“吵闹的邻居”（Noisy Neighbors）旁边。根据随机法则，一次快速的停机和重新启动经常就会让我们回到“安静的邻居”旁边，那样我们可以达到目的。</p>
<p>…… 然而，在最后的一两个月中，我们发现，甚至是这些“使用高级CPU的中等实例”也遭受了与小实例相同的命运，其中，新的实例不管处于什么位置，看起来似乎都表现得一样。经过调查，我们还发现了一个新问题，它已经悄悄渗透到到Amazon的世界中，那就是内部网络延迟。
<a href=""></a></p>
<h3 id="-"><a href=""></a>算法的选择</h3>
<p>不同的哈希算法可以导致数据分布的不同位置，如果十分均匀，那么一次MapReduce就涉及节点较多，但热点均匀，方便管理。反之，热点不均，会大致机器效率发挥不完全。</p>
<h2 id="-quorum-nrw"><a href=""></a>Quorum NRW</h2>
<p><img src="" alt=""></p>
<ul>
<li>N: 复制的节点数量</li>
<li>R: 成功读操作的最小节点数</li>
<li>W: 成功写操作的最小节点数
只需W + R &gt; N，就可以保证强一致性。
第一个关键参数是 N，这个 N 指的是数据对象将被复制到 N 台主机上，N 在实例级别配置，协调器将负责把数据复制到 N-1 个节点上。N 的典型值设置为 3.
复 制中的一致性，采用类似于 Quorum 系统的一致性协议实现。这个协议有两个关键值：R 与 W。R 代表一次成功的读取操作中最小参与节点数量，W 代表一次成功的写操作中最小参与节点数量。R + W&gt;N ，则会产生类似 quorum 的效果。该模型中的读(写)延迟由最慢的 R(W)复制决定，为得到比较小的延迟，R 和 W 有的时候的和又设置比 N 小。
如果N中的1台发生故障，Dynamo立即写入到preference list中下一台，确保永远可写入
如 果W+R&gt;N，那么分布式系统就会提供强一致性的保证，因为读取数据的节点和被同步写入的节点是有重叠的。在一个RDBMS的复制模型中 （Master/salve)，假如N=2,那么W=2,R=1此时是一种强一致性,但是这样造成的问题就是可用性的减低，因为要想写操作成功，必须要等 2个节点都完成以后才可以。
在分布式系统中，一般都要有容错性，因此一般N都是大于3的，此时根据CAP理论，一致性，可用性和分区容错 性最多只能满足两个，那么我们就需要在一致性和分区容错性之间做一平衡，如果要高的一致性，那么就配置N=W，R=1,这个时候可用性就会大大降低。如果 想要高的可用性，那么此时就需要放松一致性的要求，此时可以配置W=1，这样使得写操作延迟最低，同时通过异步的机制更新剩余的N-W个节点。
当存储系统保证最终一致性时，存储系统的配置一般是W+R&lt;=N,此时读取和写入操作是不重叠的，不一致性的窗口就依赖于存储系统的异步实现方式，不一致性的窗口大小也就等于从更新开始到所有的节点都异步更新完成之间的时间。
(N,R,W) 的值典型设置为 (3, 2 ,2),兼顾性能与可用性。R 和 W 直接影响性能、扩展性、一致性，如果 W 设置 为 1，则一个实例中只要有一个节点可用，也不会影响写操作，如果 R 设置为 1 ，只要有一个节点可用，也不会影响读请求，R 和 W 值过小则影响一致性，过大也不好，这两个值要平衡。对于这套系统的典型的 SLA 要求 99.9% 的读写操作在 300ms 内完成。
无 论是Read-your-writes-consistency,Session consistency,Monotonic read consistency,它们都通过黏贴（stickiness)客户端到执行分布式请求的服务器端来实现的，这种方式简单是简单，但是它使得负载均衡以 及分区容错变的更加难于管理，有时候也可以通过客户端来实现Read-your-writes-consistency和Monotonic read consistency,此时需要对写的操作的数据加版本号，这样客户端就可以遗弃版本号小于最近看到的版本号的数据。
在系统开发过程 中，根据CAP理论，可用性和一致性在一个大型分区容错的系统中只能满足一个，因此为了高可用性，我们必须放低一致性的要求，但是不同的系统保证的一致性 还是有差别的，这就要求开发者要清楚自己用的系统提供什么样子的最终一致性的保证，一个非常流行的例子就是web应用系统，在大多数的web应用系统中都 有“用户可感知一致性”的概念，这也就是说最终一致性中的“一致性窗口&quot;大小要小于用户下一次的请求，在下次读取操作来之前，数据可以在存储的各个节点之 间复制。还比如假如存储系统提供了
read-your-write-consistency一致性，那么当一个用户写操作完成以后可以立马看到自己的更 新，但是其它的用户要过一会才可以看到更新。
几种特殊情况：
W = 1, R = N,对写操作要求高性能高可用。
R = 1, W = N , 对读操作要求高性能高可用，比如类似cache之类业务。
W = Q, R = Q where Q = N / 2 + 1 一般应用适用，读写性能之间取得平衡。如N=3,W=2,R=2</li>
</ul>
<h2 id="-vector-clock"><a href=""></a>Vector clock</h2>
<p><img src="" alt="">
vector clock算法。可以把这个vector clock想象成每个节点都记录自己的版本信息，而一个数据，包含所有这些版本信息。来看一个例子：假设一个写请求，第一次被节点A处理了。节点A会增加一个版本信息(A，1)。我们把这个时候的数据记做D1(A，1)。 然后另外一个对同样key(这一段讨论都是针对同样的key的)的请求还是被A处理了于是有D2(A，2)。
这个时候，D2是可以覆盖D1的，不会有冲突产生。现在我们假设D2传播到了所有节点(B和C)，B和C收到的数据不是从客户产生的，而是别人复制给他们的，所以他们不产生新的版本信息，所以现在B和C都持有数据D2(A，2)。好，继续，又一个请求，被B处理了，生成数据D3(A，2;B，1)，因为这是一个新版本的数据，被B处理，所以要增加B的版本信息。
假设D3没有传播到C的时候又一个请求被C处理记做D4(A，2;C，1)。假设在这些版本没有传播开来以前，有一个读取操作，我们要记得，我们的W=1 那么R=N=3，所以R会从所有三个节点上读，在这个例子中将读到三个版本。A上的D2(A，2);B上的D3(A，2;B，1);C上的D4(A，2;C，1)这个时候可以判断出，D2已经是旧版本，可以舍弃，但是D3和D4都是新版本，需要应用自己去合并。
如果需要高可写性，就要处理这种合并问题。好假设应用完成了冲入解决，这里就是合并D3和D4版本，然后重新做了写入，假设是B处理这个请求，于是有D5(A，2;B，2;C，1);这个版本将可以覆盖掉D1-D4那四个版本。这个例子只举了一个客户的请求在被不同节点处理时候的情况， 而且每次写更新都是可接受的，大家可以自己更深入的演算一下几个并发客户的情况，以及用一个旧版本做更新的情况。
上面问题看似好像可以通过在三个节点里选择一个主节点来解决，所有的读取和写入都从主节点来进行。但是这样就违背了W=1这个约定，实际上还是退化到W=N的情况了。所以如果系统不需要很大的弹性，W=N为所有应用都接受，那么系统的设计上可以得到很大的简化。Dynamo 为了给出充分的弹性而被设计成完全的对等集群(peer to peer)，网络中的任何一个节点都不是特殊的。</p>
<h2 id="-virtual-node"><a href=""></a>Virtual node</h2>
<p><img src="" alt="">
虚拟节点，未完成</p>
<h2 id="-gossip"><a href=""></a>gossip</h2>
<p>Gossip协议是一个Gossip思想的P2P实现。现代的分布式系统经常使用这个协议，他往往是唯一的手段。因为底层的结构非常复杂，而且Gossip也很有效。</p>
<p>Gossip协议也被戏称为病毒式传播，因为他的行为生物界的病毒很相似。</p>
<h3 id="-gossip-state-transfer-model-"><a href=""></a>Gossip (State Transfer Model)</h3>
<p>在状态转移到模式下，每个重复节点都保持的一个Vector clock和一个state version tree。每个节点的状态都是相同的(based on vector clock comparison),换句话说，state version tree包含有全部的冲突updates.
At query time, the client will attach its vector clock and the replica will send back a subset of the state tree which precedes the client&#39;s vector clock (this will provide monotonic read consistency). The client will then advance its vector clock by merging all the versions. This means the client is responsible to resolve the conflict of all these versions because when the client sends the update later, its vector clock will precede all these versions.
<img src="" alt="">
At update, the client will send its vector clock and the replica will check whether the client state precedes any of its existing version, if so, it will throw away the client&#39;s update.
<img src="" alt="">
Replicas also gossip among each other in the background and try to merge their version tree together.
<img src="" alt=""></p>
<h3 id="-gossip-operation-transfer-model-"><a href=""></a>Gossip (Operation Transfer Model)</h3>
<p>In an operation transfer approach, the sequence of applying the operations is very important. At the minimum causal order need to be maintained. Because of the ordering issue, each replica has to defer executing the operation until all the preceding operations has been executed. Therefore replicas save the operation request to a log file and exchange the log among each other and consolidate these operation logs to figure out the right sequence to apply the operations to their local store in an appropriate order.
&quot;Causal order&quot; means every replica will apply changes to the &quot;causes&quot; before apply changes to the &quot;effect&quot;. &quot;Total order&quot; requires that every replica applies the operation in the same sequence.
In this model, each replica keeps a list of vector clock, Vi is the vector clock the replica itself and Vj is the vector clock when replica i receive replica j&#39;s gossip message. There is also a V-state that represent the vector clock of the last updated state.
When a query is submitted by the client, it will also send along its vector clock which reflect the client&#39;s view of the world. The replica will check if it has a view of the state that is later than the client&#39;s view.
<img src="" alt="">
When an update operation is received, the replica will buffer the update operation until it can be applied to the local state. Every submitted operation will be tag with 2 timestamp, V-client indicates the client&#39;s view when he is making the update request. V-@receive is the replica&#39;s view when it receives the submission.
This update operation request will be sitting in the queue until the replica has received all the other updates that this one depends on. This condition is reflected in the vector clock Vi when it is larger than V-client
<img src="" alt="">
On the background, different replicas exchange their log for the queued updates and update each other&#39;s vector clock. After the log exchange, each replica will check whether certain operation can be applied (when all the dependent operation has been received) and apply them accordingly. Notice that it is possible that multiple operations are ready for applying at the same time, the replica will sort these operation in causal order (by using the Vector clock comparison) and apply them in the right order.
<img src="" alt="">
The concurrent update problem at different replica can also happen. Which means there can be multiple valid sequences of operation. In order for different replica to apply concurrent update in the same order, we need a total ordering mechanism.
One approach is whoever do the update first acquire a monotonic sequence number and late comers follow the sequence. On the other hand, if the operation itself is commutative, then the order to apply the operations doesn&#39;t matter
After applying the update, the update operation cannot be immediately removed from the queue because the update may not be fully exchange to every replica yet. We continuously check the Vector clock of each replicas after log exchange and after we confirm than everyone has receive this update, then we&#39;ll remove it from the queue.</p>
<h2 id="-merkle-tree"><a href=""></a>Merkle tree</h2>
<p>有数据存储成树状结构，每个节点的Hash是其所有子节点的Hash的Hash，叶子节点的Hash是其内容的Hash。这样一旦某个节点发生变化，其Hash的变化会迅速传播到根节点。需要同步的系统只需要不断查询跟节点的hash，一旦有变化，顺着树状结构就能够在logN级别的时间找到发生变化的内容，马上同步。</p>
<h2 id="-paxos"><a href=""></a>Paxos</h2>
<p><a href="http://en.wikipedia.org/wiki/Paxos_algorithm" title="paxos" target="_blank">paxos</a>是一种处理一致性的手段，可以理解为事务吧。
其他的手段不要Google GFS使用的Chubby的Lock service。我不大喜欢那种重型的设计就不费笔墨了。</p>
<h3 id="-"><a href=""></a><strong>背景</strong></h3>
<p>当规模越来越大的时候。
一、Master/slave
这个是多机房数据访问最常用的方案，一般的需求用此方案即可。因此大家也经常提到“premature optimization is the root of all evil”。
优点：利用mysql replication即可实现，成熟稳定。
缺点：写操作存在单点故障，master坏掉之后slave不能写。另外slave的延迟也是个困扰人的小问题。
二、Multi-master
Multi-master指一个系统存在多个master, 每个master都具有read-write能力，需根据时间戳或业务逻辑合并版本。比如分布式版本管理系统git可以理解成multi-master模式。具备最终一致性。多版本数据修改可以借鉴Dynamo的vector clock等方法。
优点：解决了单点故障。
缺点：不易实现一致性，合并版本的逻辑复杂。</p>
<p>三、Two-phase commit(2PC)
Two-phase commit是一个比较简单的一致性算法。由于一致性算法通常用神话(如Paxos的The Part-Time Parliament论文)来比喻容易理解，下面也举个类似神话的例子。
某班要组织一个同学聚会，前提条件是所有参与者同意则活动举行，任意一人拒绝则活动取消。用2PC算法来执行过程如下
Phase 1
Prepare: 组织者(coordinator)打电话给所有参与者(participant) ，同时告知参与者列表。
Proposal: 提出周六2pm-5pm举办活动。
Vote: participant需vote结果给coordinator：accept or reject。
Block: 如果accept, participant锁住周六2pm-5pm的时间，不再接受其他请求。
Phase 2
Commit: 如果所有参与者都同意，组织者coodinator通知所有参与者commit, 否则通知abort，participant解除锁定。
Failure 典型失败情况分析
Participant failure:
任一参与者无响应，coordinator直接执行abort
Coordinator failure:
Takeover: 如果participant一段时间没收到cooridnator确认(commit/abort)，则认为coordinator不在了。这时候可自动成为Coordinator备份(watchdog)
Query: watchdog根据phase 1接收的participant列表发起query
Vote: 所有participant回复vote结果给watchdog, accept or reject
Commit: 如果所有都同意，则commit, 否则abort。
优点：实现简单。
缺点：所有参与者需要阻塞(block)，throughput低；无容错机制，一节点失败则整个事务失败。
四、Three-phase commit (3PC)
Three-phase commit是一个2PC的改进版。2PC有一些很明显的缺点，比如在coordinator做出commit决策并开始发送commit之后，某个participant突然crash，这时候没法abort transaction, 这时候集群内实际上就存在不一致的情况，crash恢复后的节点跟其他节点数据是不同的。因此3PC将2PC的commit的过程1分为2,分成preCommit及commit, 如图。</p>
<p><img src="" alt="">
(图片来源：<a href="http://en.wikipedia.org/wiki/File:Three-phase_commit_diagram.png" target="_blank">http://en.wikipedia.org/wiki/File:Three-phase_commit_diagram.png</a>)
从图来看，cohorts(participant)收到preCommit之后，如果没收到commit, 默认也执行commit, 即图上的timeout cause commit。
如果coodinator发送了一半preCommit crash, watchdog接管之后通过query, 如果有任一节点收到commit, 或者全部节点收到preCommit, 则可继续commit, 否则abort。
优点：允许发生单点故障后继续达成一致。
缺点：网络分离问题，比如preCommit消息发送后突然两个机房断开，这时候coodinator所在机房会abort, 另外剩余replicas机房会commit。
Google Chubby的作者Mike Burrows说过， “there is only one consensus protocol, and that’s Paxos” – all other approaches are just broken versions of Paxos. 意即“世上只有一种一致性算法，那就是Paxos”，所有其他一致性算法都是Paxos算法的不完整版。相比2PC/3PC, Paxos算法的改进
P1a. 每次Paxos实例执行都分配一个编号，编号需要递增，每个replica不接受比当前最大编号小的提案
P2. 一旦一个 value v 被replica通过，那么之后任何再批准的 value 必须是 v，即没有拜占庭将军(Byzantine)问题。拿上面请客的比喻来说，就是一个参与者一旦accept周六2pm-5pm的proposal, 就不能改变主意。以后不管谁来问都是accept这个value。
一个proposal只需要多数派同意即可通过。因此比2PC/3PC更灵活，在一个2f+1个节点的集群中，允许有f个节点不可用。
另外Paxos还有很多约束的细节，特别是Google的chubby从工程实现的角度将Paxos的细节补充得非常完整。比如如何避免Byzantine问题，由于节点的持久存储可能会发生故障，Byzantine问题会导致Paxos算法P2约束失效。
以上几种方式原理比较如下
<a href="http://timyang.net/blog/wp-content/uploads/2010/02/idc-transaction.png"></a></p>
<p><img src="" alt=""></p>
<h2 id="-dht"><a href=""></a>DHT</h2>
<p><a href="http://en.wikipedia.org/wiki/Distributed_hash_table" title="Distributed hash table" target="_blank">Distributed hash table</a>
<img src="" alt=""></p>
<h2 id="-map-reduce-execution"><a href=""></a>Map Reduce Execution</h2>
<p>Map Reduce已经烂大街了，不过还是要提一下。
参见：<a href="http://zh.wikipedia.org/wiki/MapReduce" target="_blank">http://zh.wikipedia.org/wiki/MapReduce</a>
<img src="" alt=""></p>
<h2 id="-handling-deletes"><a href=""></a>Handling Deletes</h2>
<p>但我们执行删除操作的时候必须非常谨慎，以防丢失掉相应的版本信息。
通常我们给一个Object标注上&quot;已删除&quot;的标签。在足够的时间之后，我们在确保版本一致的情况下可以将它彻底删除。回收他的空间。</p>
<h2 id="-"><a href=""></a>存储实现</h2>
<p>One strategy is to use make the storage implementation pluggable. e.g. A local MySQL DB, Berkeley DB, Filesystem or even a in memory Hashtable can be used as a storage mechanism.
Another strategy is to implement the storage in a highly scalable way. Here are some techniques that I learn from <a href="http://horicky.blogspot.com/2008/10/couchdb-implementation.html" target="_blank">CouchDB</a> and Google BigTable.
CouchDB has a MVCC model that uses a copy-on-modified approach. Any update will cause a private copy being made which in turn cause the index also need to be modified and causing the a private copy of the index as well, all the way up to the root pointer.
<img src="" alt="">
Notice that the update happens in an append-only mode where the modified data is appended to the file and the old data becomes garbage. Periodic garbage collection is done to compact the data. Here is how the model is implemented in memory and disks</p>
<p><img src="" alt="">
In Google BigTable model, the data is broken down into multiple generations and the memory is use to hold the newest generation. Any query will search the mem data as well as all the data sets on disks and merge all the return results. Fast detection of whether a generation contains a key can be done by checking a bloom filter.
<img src="" alt="">
When update happens, both the mem data and the commit log will be written so that if the</p>
<h2 id="-"><a href=""></a>节点变化</h2>
<p>Notice that virtual nodes can join and leave the network at any time without impacting the operation of the ring.
<strong>When a new node joins the network</strong></p>
<ol>
<li>新加入的节点宣告自己的存在(广播或者其他手段)</li>
<li>他的邻居节点要调整Key的分配和复制关系。这个操作通常是同步的</li>
<li>这个新加入的节点异步的拷贝数据</li>
<li><p>这个节点变化的操作被发布到其他节点
<img src="" alt="">
Notice that other nodes may not have their membership view updated yet so they may still forward the request to the old nodes. But since these old nodes (which is the neighbor of the new joined node) has been updated (in step 2), so they will forward the request to the new joined node.
On the other hand, the new joined node may still in the process of downloading the data and not ready to serve yet. We use the vector clock (described below) to determine whether the new joined node is ready to serve the request and if not, the client can contact another replica.
<strong>When an existing node leaves the network</strong> (e.g. crash)</p>
</li>
<li><p>The crashed node no longer respond to gossip message so its neighbors knows about it.崩溃的节点不再发送Gossip Message的回应，所以他的邻居都知道他是了</p>
</li>
<li>The neighbor will update the membership changes and copy data asynchronously，他的邻居处理后事，将他的活分给别人干，同时调整节点关系。
<img src="" alt="">
We haven&#39;t talked about how the virtual nodes is mapped into the physical nodes. Many schemes are possible with the main goal that Virtual Node replicas should not be sitting on the same physical node. One simple scheme is to assigned Virtual node to Physical node in a random manner but check to make sure that a physical node doesn&#39;t contain replicas of the same key ranges.
Notice that since machine crashes happen at the physical node level, which has many virtual nodes runs on it. So when a single Physical node crashes, the workload (of its multiple virtual node) is scattered across many physical machines. Therefore the increased workload due to physical node crashes is evenly balanced.</li>
</ol>
<h2 id="-"><a href=""></a>列存</h2>
<h3 id="-"><a href=""></a>描述</h3>
<p>数据库以行、列的二维表的形式存储数据，但是却以一维字符串的方式存储，例如以下的一个表：</p>
<p>EmpIdLastnameFirstnameSalary1 Smith Joe 400002 Jones Mary 500003 Johnson Cathy 44000</p>
<p>这个简单的表包括员工代码(EmpId), 姓名字段(Lastname and Firstname)及工资(Salary).</p>
<p>这个表存储在电脑的内存(RAM)和存储(硬盘)中。虽然内存和硬盘在机制上不同，电脑的操作系统是以同样的方式存储的。数据库必须把这个二维表存储在一系列一维的“字节”中，又操作系统写到内存或硬盘中。</p>
<p>行式数据库把一行中的数据值串在一起存储起来，然后再存储下一行的数据，以此类推。 1,Smith,Joe,40000;2,Jones,Mary,50000;3,Johnson,Cathy,44000;</p>
<p>列式数据库把一列中的数据值串在一起存储起来，然后再存储下一列的数据，以此类推。 1,2,3;Smith,Jones,Johnson;Joe,Mary,Cathy;40000,50000,44000;
<img src="" alt=""></p>
<h3 id="-"><a href=""></a>特点</h3>
<ul>
<li>良好的压缩比。由于大多数数据库设计都有冗余，如此一来，压缩比非常高，把40多M的数据导入infobright，没想到数据文件只有1M多</li>
<li>列上的计算非常的快。</li>
<li>方便MapReduce和Key-value模型的融合</li>
<li>读取整行的数据较慢，但部分数据较快
<a href="http://www.penglixun.com/work/database/column-oriented_dbms_analyse.html" target="_blank">简单分析含源码</a></li>
</ul>
<h1 id="-"><a href=""></a>软件篇</h1>
<h2 id="-"><a href=""></a>亚数据库</h2>
<p>我发明的新概念，就是称不上数据库但有一些数据库的特征。可以指缓存。</p>
<h3 id="-memcached"><a href=""></a>MemCached</h3>
<p>Memcached是danga.com（运营LiveJournal的技术团队）开发的一套分布式内存对象缓存系统，用于在动态系统中减少数据库 负载，提升性能。</p>
<h3 id="-"><a href=""></a>特点</h3>
<ul>
<li>协议简单</li>
<li>基于libevent的事件处理</li>
<li>内置内存存储方式</li>
<li>memcached不互相通信的分布式
<img src="" alt=""></li>
</ul>
<p>Memcached处理的原子是每一个（key，value）对（以下简称kv对），key会通过一个hash算法转化成hash-key，便于查找、对比以及做到尽可能的散列。同时，memcached用的是一个二级散列，通过一张大hash表来维护。</p>
<p>Memcached有两个核心组件组成：服务端（ms）和客户端（mc），在一个memcached的查询中，mc先通过计算key的hash值来 确定kv对所处在的ms位置。当ms确定后，客户端就会发送一个查询请求给对应的ms，让它来查找确切的数据。因为这之间没有交互以及多播协议，所以 memcached交互带给网络的影响是最小化的。
<img src="" alt=""></p>
<h3 id="-"><a href=""></a>内存分配</h3>
<p>默认情况下，ms是用一个内置的叫“块分配器”的组件来分配内存的。舍弃c++标准的malloc/free的内存分配，而采用块分配器的主要目的 是为了避免内存碎片，否则操作系统要花费更多时间来查找这些逻辑上连续的内存块（实际上是断开的）。用了块分配器，ms会轮流的对内存进行大块的分配，并 不断重用。当然由于块的大小各不相同，当数据大小和块大小不太相符的情况下，还是有可能导致内存的浪费。</p>
<p>同时，ms对key和data都有相应的限制，key的长度不能超过250字节，data也不能超过块大小的限制 --- 1MB。
因为mc所使用的hash算法，并不会考虑到每个ms的内存大小。理论上mc会分配概率上等量的kv对给每个ms，这样如果每个ms的内存都不太一样，那 可能会导致内存使用率的降低。所以一种替代的解决方案是，根据每个ms的内存大小，找出他们的最大公约数，然后在每个ms上开n个容量=最大公约数的 instance，这样就等于拥有了多个容量大小一样的子ms，从而提供整体的内存使用率。</p>
<h3 id="-"><a href=""></a>缓存策略</h3>
<p>当ms的hash表满了之后，新的插入数据会替代老的数据，更新的策略是LRU（最近最少使用），以及每个kv对的有效时限。Kv对存储有效时限是在mc端由app设置并作为参数传给ms的。</p>
<p>同时ms采用是偷懒替代法，ms不会开额外的进程来实时监测过时的kv对并删除，而是当且仅当，新来一个插入的数据，而此时又没有多余的空间放了，才会进行清除动作。</p>
<h3 id="-"><a href=""></a>缓存数据库查询</h3>
<p>现在memcached最流行的一种使用方式是缓存数据库查询，下面举一个简单例子说明：</p>
<p>App需要得到userid=xxx的用户信息，对应的查询语句类似：</p>
<p>“SELECT /* FROM users WHERE userid = xxx”</p>
<p>App先去问cache，有没有“user:userid”（key定义可预先定义约束好）的数据，如果有，返回数据；如果没有，App会从数据库中读取数据，并调用cache的add函数，把数据加入cache中。</p>
<p>当取的数据需要更新，app会调用cache的update函数，来保持数据库与cache的数据同步。</p>
<p>从上面的例子我们也可以发现，一旦数据库的数据发现变化，我们一定要及时更新cache中的数据，来保证app读到的是同步的正确数据。当然我们可 以通过定时器方式记录下cache中数据的失效时间，时间一过就会激发事件对cache进行更新，但这之间总会有时间上的延迟，导致app可能从 cache读到脏数据，这也被称为狗洞问题。（以后我会专门描述研究这个问题）</p>
<h3 id="-"><a href=""></a><strong>数据冗余与故障预防</strong></h3>
<p>从设计角度上，memcached是没有数据冗余环节的，它本身就是一个大规模的高性能cache层，加入数据冗余所能带来的只有设计的复杂性和提高系统的开支。</p>
<p>当一个ms上丢失了数据之后，app还是可以从数据库中取得数据。不过更谨慎的做法是在某些ms不能正常工作时，提供额外的ms来支持cache，这样就不会因为app从cache中取不到数据而一下子给数据库带来过大的负载。</p>
<p>同时为了减少某台ms故障所带来的影响，可以使用“热备份”方案，就是用一台新的ms来取代有问题的ms，当然新的ms还是要用原来ms的IP地址，大不了数据重新装载一遍。</p>
<p>另外一种方式，就是提高你ms的节点数，然后mc会实时侦查每个节点的状态，如果发现某个节点长时间没有响应，就会从mc的可用server列表里 删除，并对server节点进行重新hash定位。当然这样也会造成的问题是，原本key存储在B上，变成存储在C上了。所以此方案本身也有其弱点，最好 能和“热备份”方案结合使用，就可以使故障造成的影响最小化。</p>
<h3 id="-memcached-mc-"><a href=""></a>Memcached客户端（mc）</h3>
<p>Memcached客户端有各种语言的版本供大家使用，包括java，c，php，.net等等，具体可参见<a href="http://danga.com/memcached/apis.bml" target="_blank">memcached api page</a> [2]。
大家可以根据自己项目的需要，选择合适的客户端来集成。</p>
<h3 id="-web-"><a href=""></a>缓存式的Web应用程序架构</h3>
<p>有了缓存的支持，我们可以在传统的app层和db层之间加入cache层，每个app服务器都可以绑定一个mc，每次数据的读取都可以从ms中取得，如果 没有，再从db层读取。而当数据要进行更新时，除了要发送update的sql给db层，同时也要将更新的数据发给mc，让mc去更新ms中的数据。</p>
<h3 id="-"><a href=""></a>性能测试</h3>
<p>Memcached 写速度
平均速度: 16222 次/秒
最大速度 18799 次/秒
Memcached 读速度
平均速度: 20971 次/秒
最大速度 22497 次/秒
Memcachedb 写速度
平均速度: 8958 次/秒
最大速度 10480 次/秒
Memcachedb 读速度
平均速度: 6871 次/秒
最大速度 12542 次/秒
<a href="http://blog.developers.api.sina.com.cn/?p=124" target="_blank">源代码级别的分析</a>
<a href="http://tech.idv2.com/2008/08/17/memcached-pdf/" target="_blank">非常好的剖析文章</a></p>
<h3 id="-dbcached"><a href=""></a>dbcached</h3>
<p>● dbcached 是一款基于 Memcached 和 NMDB 的分布式 key-value 数据库内存缓存系统。
● dbcached = Memcached + 持久化存储管理器 + NMDB 客户端接口
● Memcached 是一款高性能的，分布式的内存对象缓存系统，用于在动态应用中减少数据库负载，提升访问速度。
● NMDB 是一款多协议网络数据库(dbm类)管理器，它由内存缓存和磁盘存储两部分构成，使用 QDBM 或 Berkeley DB 作为后端数据库。
● QDBM 是一个管理数据库的例程库，它参照 GDBM 为了下述三点而被开发：更高的处理速度，更小的数据库文件大小，和更简单的API。QDBM 读写速度比 Berkeley DB 要快，详细速度比较见《<a href="http://qdbm.sourceforge.net/benchmark.pdf" target="_blank">Report of Benchmark Test</a>》。
<img src="" alt=""></p>
<h3 id="-memcached-dbcached-"><a href=""></a>Memcached 和 dbcached 在功能上一样吗?</h3>
<p>● 兼容：Memcached 能做的，dbcached 都能做。除此之外，dbcached 还将“Memcached、持久化存储管理器、NMDB 客户端接口”在一个程序中结合起来，对任何原有 Memcached 客户端来讲，dbcached 仍旧是个 Memcached 内存对象缓存系统，但是，它的数据可以持久存储到本机或其它服务器上的 QDBM 或 Berkeley DB 数据库中。
● 性能：前端 dbcached 的并发处理能力跟 Memcached 相同；后端 NMDB 跟 Memcached 一样，采用了libevent 进行网络IO处理，拥有自己的内存缓存机制，性能不相上下。
● 写入：当“dbcached 的 Memcached 部分”接收到一个 set(add/replace/...) 请求并储存 key-value 数据到内存中后，“dbcached 持久化存储管理器”能够将 key-value 数据通过“NMDB 客户端接口”保存到 QDBM 或 Berkeley DB 数据库中。
● 速度：如果加上“-z”参数，采用 UDP 协议“只发送不接收”模式将 set(add/replace/...) 命令写入的数据传递给 NMDB 服务器端，对 Memcache 客户端写速度的影响几乎可以忽略不计。在千兆网卡、同一交换机下服务器之间的 UDP 传输丢包率微乎其微。在命中的情况下，读取数据的速度跟普通的 Memcached 无差别，速度一样快。
● 读取：当“dbcached 的 Memcached 部分”接收到一个 get(incr/decr/...) 请求后，如果“dbcached 的 Memcached 部分”查询自身的内存缓存未命中，则“dbcached 持久化存储管理器”会通过“NMDB 客户端接口”从 QDBM 或 Berkeley DB 数据库中取出数据，返回给用户，然后储存到 Memcached 内存中。如果有用户再次请求这个 key，则会直接从 Memcached 内存中返回 Value 值。
● 持久：使用 dbcached，不用担心 Memcached 服务器死机、重启而导致数据丢失。
● 变更：使用 dbcached，即使因为故障转移，添加、减少 Memcached 服务器节点而破坏了“key 信息”与对应“Memcached 服务器”的映射关系也不怕。
● 分布：dbcached 和 NMDB 既可以安装在同一台服务器上，也可以安装在不同的服务器上，多台 dbcached 服务器可以对应一台 NMDB 服务器。
● 特长：dbcached 对于“读”大于“写”的应用尤其适用。
● 其他：《<a href="http://code.google.com/p/dbcached/wiki/Failover" target="_blank">dbcached 的故障转移支持、设计方向以及与 Memcachedb 的不同之处</a>》</p>
<h2 id="-"><a href=""></a>列存系列</h2>
<h3 id="-hadoop-hbase"><a href=""></a>Hadoop之Hbase</h3>
<p><a href=""></a><a href="http://hadoop.apache.org/"><strong>Hadoop / HBase</strong></a>: API: <strong>Java / any writer</strong>, Protocol: <strong>any write call</strong>, Query Method: <strong>MapReduce Java / any exec</strong>, Replication: <strong>HDFS Replication</strong>, Written in: <strong>Java</strong>, Concurrency: ?, Misc: <strong>Links</strong>: 3 Books [<a href="http://www.amazon.com/Hadoop-Action-Chuck-Lam/dp/1935182196/ref=sr_1_3?ie=UTF8&amp;s=books&amp;qid=1256498379&amp;sr=1-3" target="_blank">1</a>, <a href="http://www.amazon.com/Pro-Hadoop-Jason-Venner/dp/1430219424/ref=sr_1_2?ie=UTF8&amp;s=books&amp;qid=1256498379&amp;sr=1-2" target="_blank">2</a>, <a href="http://www.amazon.com/Hadoop-Definitive-Guide-Tom-White/dp/0596521979/ref=sr_1_1?ie=UTF8&amp;s=books&amp;qid=1256498379&amp;sr=1-1" target="_blank">3</a>]</p>
<h3 id="-hadoopdb"><a href=""></a>耶鲁大学之HadoopDB</h3>
<p><img src="" alt=""></p>
<h3 id="-greenplum"><a href=""></a>GreenPlum</h3>
<p><img src="" alt=""></p>
<h3 id="-facebook-cassandra"><a href=""></a>FaceBook之Cassandra</h3>
<p><a href="http://incubator.apache.org/cassandra/" target="_blank"><strong>Cassandra</strong></a>: API: <strong>many</strong> <strong>Thrift</strong> <a href="http://incubator.apache.org/thrift/" target="_blank">»</a> <strong>languages</strong>, Protocol: ?, Query Method: <strong>MapReduce</strong>, Replicaton: , Written in: <strong>Java</strong>, Concurrency: <strong>eventually consistent</strong> , Misc: like &quot;Big-Table on Amazon Dynamo alike&quot;,  initiated by Facebook, Slides <a href="http://www.slideshare.net/jericevans/an-introduction-to-cassandra" target="_blank">»</a> , Clients <a href="http://wiki.apache.org/cassandra/ClientExamples" target="_blank">»</a>
Cassandra是facebook开源出来的一个版本，可以认为是BigTable的一个开源版本，目前twitter和digg.com在使用。</p>
<h3 id="-cassandra-"><a href=""></a>Cassandra特点</h3>
<ul>
<li>灵活的schema，不需要象数据库一样预先设计schema，增加或者删除字段非常方便（on the fly）。</li>
<li>支持range查询：可以对Key进行范围查询。</li>
<li>高可用，可扩展：单点故障不影响集群服务，可线性扩展。
Cassandra的主要特点就是它不是一个数据库，而是由一堆数据库节点共同构成的一个分布式网络服务，对Cassandra的一个写操作，会 被复制到其他节点上去，对Cassandra的读操作，也会被路由到某个节点上面去读取。对于一个Cassandra群集来说，扩展性能是比较简单的事 情，只管在群集里面添加节点就可以了。我看到有文章说Facebook的Cassandra群集有超过100台服务器构成的数据库群集。
Cassandra也支持比较丰富的数据结构和功能强大的查询语言，和MongoDB比较类似，查询功能比MongoDB稍弱一些，twitter的平台架构部门领导Evan Weaver写了一篇文章介绍Cassandra：<a href="http://blog.evanweaver.com/articles/2009/07/06/up-and-running-with-cassandra/" target="_blank"><a href="http://blog.evanweaver.com/articles/2009/07/06/up-and-running-with-cassandra/">http://blog.evanweaver.com/articles/2009/07/06/up-and-running-with-cassandra/</a></a>，有非常详细的介绍。
Cassandra以单个节点来衡量，其节点的并发读写性能不是特别好，有文章说评测下来Cassandra每秒大约不到1万次读写请求，我也看 到一些对这个问题进行质疑的评论，但是评价Cassandra单个节点的性能是没有意义的，真实的分布式数据库访问系统必然是n多个节点构成的系统，其并 发性能取决于整个系统的节点数量，路由效率，而不仅仅是单节点的并发负载能力。</li>
</ul>
<h3 id="-keyspace"><a href=""></a>Keyspace</h3>
<p>Cassandra中的最大组织单元，里面包含了一系列Column family，Keyspace一般是应用程序的名称。你可以把它理解为Oracle里面的一个schema，包含了一系列的对象。</p>
<h3 id="-column-family-cf-"><a href=""></a>Column family（CF）</h3>
<p>CF是某个特定Key的数据集合，每个CF物理上被存放在单独的文件中。从概念上看，CF有点象数据库中的Table.</p>
<h3 id="-key"><a href=""></a>Key</h3>
<p>数据必须通过Key来访问，Cassandra允许范围查询，例如：start =&gt; &#39;10050&#39;, :finish =&gt; &#39;10070&#39;</p>
<h3 id="-column"><a href=""></a>Column</h3>
<p>在Cassandra中字段是最小的数据单元，column和value构成一个对，比如：name:“jacky”，column是name，value是jacky，每个column:value后都有一个时间戳：timestamp。
和数据库不同的是，Cassandra的一行中可以有任意多个column，而且每行的column可以是不同的。从数据库设计的角度，你可以理解 为表上有两个字段，第一个是Key，第二个是长文本类型，用来存放很多的column。这也是为什么说Cassandra具备非常灵活schema的原 因。</p>
<h3 id="-super-column"><a href=""></a>Super column</h3>
<p>Super column是一种特殊的column，里面可以存放任意多个普通的column。而且一个CF中同样可以有任意多个Super column，一个CF只能定义使用Column或者Super column，不能混用。下面是Super column的一个例子，homeAddress这个Super column有三个字段：分别是street，city和zip： homeAddress: {street: &quot;binjiang road&quot;,city: &quot;hangzhou&quot;,zip: &quot;310052&quot;,}</p>
<h3 id="-sorting"><a href=""></a>Sorting</h3>
<p>不同于数据库可以通过Order by定义排序规则，Cassandra取出的数据顺序是总是一定的，数据保存时已经按照定义的规则存放，所以取出来的顺序已经确定了，这是一个巨大的性能优势。有意思的是，Cassandra按照column name而不是column value来进行排序，它 定义了以下几种选项：BytesType, UTF8Type, LexicalUUIDType, TimeUUIDType, AsciiType, 和LongType，用来定义如何按照column name来排序。实际上，就是把column name识别成为不同的类型，以此来达到灵活排序的目的。UTF8Type是把column name转换为UTF8编码来进行排序，LongType转换成为64位long型，TimeUUIDType是按照基于时间的UUID来排序。例如：
Column name按照LongType排序：
{name: 3, value: &quot;jacky&quot;},
{name: 123, value: &quot;hellodba&quot;},
{name: 976, value: &quot;Cassandra&quot;},
{name: 832416, value: &quot;bigtable&quot;}
Column name按照UTF8Type排序：
{name: 123, value: &quot;hellodba&quot;},
{name: 3, value: &quot;jacky&quot;},
{name: 832416, value: &quot;bigtable&quot;}
{name: 976, value: &quot;Cassandra&quot;}
下面我们看twitter的Schema：</p>
<p><Keyspace Name="Twitter"></p>
<p><ColumnFamily CompareWith="UTF8Type" Name="Statuses" /></p>
<p><ColumnFamily CompareWith="UTF8Type" Name="StatusAudits" /></p>
<p><ColumnFamily CompareWith="UTF8Type" Name="StatusRelationships"
CompareSubcolumnsWith="TimeUUIDType" ColumnType="Super" /></p>
<p><ColumnFamily CompareWith="UTF8Type" Name="Users" /></p>
<p><ColumnFamily CompareWith="UTF8Type" Name="UserRelationships"
CompareSubcolumnsWith="TimeUUIDType" ColumnType="Super" />
</Keyspace>
我们看到一个叫Twitter的keyspace，包含若干个CF，其中StatusRelationships和 UserRelationships被定义为包含Super column的CF，CompareWith定义了column的排序规则，CompareSubcolumnsWith定义了subcolumn的排序 规则，这里使用了两种：TimeUUIDType和UTF8Type。我们没有看到任何有关column的定义，这意味着column是可以灵活变更的。
为了方便大家理解，我会尝试着用关系型数据库的建模方法去描述Twitter的Schema，但千万不要误认为这就是Cassandra的数据模型，对于Cassandra来说，每一行的colunn都可以是任意的，而不是象数据库一样需要在建表时就创建好。
<img src="" alt="">
Users CF记录用户的信息，Statuses CF记录tweets的内容，StatusRelationships CF记录用户看到的tweets，UserRelationships CF记录用户看到的followers。我们注意到排序方式是TimeUUIDType，这个类型是按照时间进行排序的UUID字段，column name是用UUID函数产生（这个函数返回了一个UUID，这个UUID反映了当前的时间，可以根据这个UUID来排序，有点类似于timestamp 一样），所以得到结果是按照时间来排序的。使用过twitter的人都知道，你总是可以看到自己最新的tweets或者最新的friends.</p>
<h3 id="-"><a href=""></a>存储</h3>
<p>Cassandra是基于列存储的(Bigtable也是一样)，这个和基于列的数据库是一个道理。
<img src="" alt=""></p>
<h3 id="-api"><a href=""></a>API</h3>
<p>下面是数据库，Bigtable和Cassandra API的对比： Relational SELECT <code>column</code> FROM <code>database</code>.<code>table</code> WHERE <code>id</code> = key;
BigTable table.get(key, &quot;column_family:column&quot;)
Cassandra: standard model keyspace.get(&quot;column_family&quot;, key, &quot;column&quot;)
Cassandra: super column model keyspace.get(&quot;column_family&quot;, key, &quot;super_column&quot;, &quot;column&quot;)
<a href="http://www.hellodba.net/" target="_blank">我</a>对Cassandra数据模型的理解：
1.column name存放真正的值，而value是空。因为Cassandra是按照column name排序，而且是按列存储的，所以往往利用column name存放真正的值，而value部分则是空。例如：“jacky”:“null”，“fenng”:”null”
2.Super column可以看作是一个索引，有点象关系型数据库中的外键，利用super column可以实现快速定位，因为它可以返回一堆column，而且是排好序的。
3.排序在定义时就确定了，取出的数据肯定是按照确定的顺序排列的，这是一个巨大的性能优势。</p>
<ol>
<li>非常灵活的schema，column可以灵活定义。实际上，colume name在很多情况下，就是value（是不是有点绕）。
5.每个column后面的timestamp，我并没有找到明确的说明，我猜测可能是数据多版本，或者是底层清理数据时需要的信息。
最后说说架构，我认为架构的核心就是有所取舍，不管是CAP还是BASE，讲的都是这个原则。架构之美在于没有任何一种架构可以完美的解决各种问题，数据库和NoSQL都有其应用场景，我们要做的就是为自己找到合适的架构。
<strong>Hypertable
</strong><a href="http://couchdb.apache.org/" target="_blank"><strong>Hypertable</strong></a>: (can you help?) Open-Source Google BigTable alike.
它是搜索引擎公司Zvents根据Google的9位研究人员在2006年发表的一篇论文《<a href="http://labs.google.com/papers/bigtable.html" target="_blank">Bigtable：结构化数据的分布存储系统</a>》 开发的一款开源分布式数据储存系统。Hypertable是按照1000节点比例设计，以 C++撰写，可架在 HDFS 和 KFS 上。尽管还在初期阶段，但已有不错的效能：写入 28M 列的资料，各节点写入速率可达7MB/s，读取速率可达 1M cells/s。Hypertable目前一直没有太多高负载和大存储的应用实例，但是最近，Hypertable项目得到了<a href="http://www.baidu.com/" target="_blank">百度</a>的赞助支持，相信其会有更好的发展。</li>
</ol>
<h3 id="-google-bigtable"><a href=""></a>Google之BigTable</h3>
<p>研究Google的产品总是感激Google给了自己那么多方便，真心喜欢之。
<a href="http://code.google.com/appengine/docs/python/datastore/"></a></p>
<p><img src="" alt="">
<a href="http://code.google.com/appengine/docs/python/datastore/" target="_blank">Google AppEngine Datastore</a> 是在BigTable之上建造出来的，是Google的内部存储系统，用于处理结构化数据。AppEngine Datastore其自身及其内部都不是直接访问BigTable的实现机制，可被视为BigTable之上的一个简单接口。
AppEngine Datastore所支持的项目的数据类型要比SimpleDB丰富得多，也包括了包含在一个项目内的数据集合的列表型。
如果你打算在Google AppEngine之内建造应用的话，几乎可以肯定要用到这个数据存储。然而，不像SimpleDB，使用谷歌网络服务平台之外的应用，你并不能并发地与AppEngine Datastore进行接口 (或通过BigTable)。</p>
<h3 id="-yahoo-pnuts"><a href=""></a>Yahoo之PNUTS</h3>
<p>Yahoo!的PNUTS是一个分布式的数据存储平台，它是Yahoo!云计算平台重要的一部分。它的上层产品通常也称为Sherpa。按照官方的 描述，”PNUTS, a massively parallel and geographically distributed database system for Yahoo!’s web applications.” PNUTS显然就深谙CAP之道，考虑到大部分web应用对一致性并不要求非常严格，在设计上放弃了对强一致性的追求。代替的是追求更高的 availability，容错，更快速的响应调用请求等。</p>
<h3 id="-"><a href=""></a>特点</h3>
<ul>
<li>地理分布式，分布在全球多个数据中心。由于大部分Web应用都对响应时间要求高，因此最好服务器部署在离用户最近的本地机房。</li>
<li>可扩展，记录数可支持从几万条到几亿条。数据容量增加不会影响性能。</li>
<li>schema-free，即非固定表结构。实际使用key/value存储的，一条记录的多个字段实际是用json方式合并存在value中。因此delete和update必须指定primary key。但也支持批量查询。</li>
<li>高可用性及容错。从单个存储节点到整个数据中心不可用都不会影响前端Web访问。</li>
<li>适合存相对小型的记录，不适合存储大文件，流媒体等。</li>
<li>弱一致性保证。</li>
</ul>
<h3 id="-pnuts-"><a href=""></a>PNUTS实现</h3>
<h3 id="-record-level-mastering-"><a href=""></a>Record-level mastering 记录级别主节点</h3>
<p>每一条记录都有一个主记录。比如一个印度的用户保存的记录master在印度机房，通常修改都会调用印度。其他地方如美国用户看这个用户的资料调用 的是美国数据中心的资料，有可能取到的是旧版的数据。非master机房也可对记录进行修改，但需要master来统一管理。每行数据都有自己的版本控 制，如下图所示。
<img src="" alt=""></p>
<h3 id="-pnuts-"><a href=""></a>PNUTS的结构</h3>
<p><img src="" alt="">
每个数据中心的PNUTS结构由四部分构成
Storage Units (SU) 存储单元
物理的存储服务器，每个存储服务器上面含有多个tablets，tablets是PNUTS上的基本存储单元。一 个tablets是一个yahoo内部格式的hash table的文件(hash table)或是一个MySQL innodb表(ordered table)。一个Tablet通常为几百M。一个SU上通常会存在几百个tablets。
<strong>Routers</strong>
每个tablets在哪个SU上是通过查询router获得。一个数据中心内router通常可由两台双机备份的单元提供。
<strong>Tablet Controller</strong>
router的位置只是个内存快照，实际的位置由Tablet Controller单元决定。
<strong>Message Broker</strong>
与远程数据的同步是由YMB提供，它是一个pub/sub的异步消息订阅系统。</p>
<h3 id="-tablets-"><a href=""></a>Tablets寻址与切分</h3>
<p>存储分hash和ordered data store。
<img src="" alt="">
以hash为例介绍，先对所有的tablets按hash值分片，比如1-10,000属于tablets 1, 10,000到20,000属于tablets 2，依此类推分配完所有的hash范围。一个大型的IDC通常会存在100万以下的tablets, 1,000台左右的SU。tablets属于哪个SU由routers全部加载到内存里面，因此router访问速度极快，通常不会成为瓶颈。按照官方的 说法，系统的瓶颈只存在磁盘文件hash file访问上。
当某个SU访问量过大，则可将SU中部分tablets移到相对空闲的SU，并修改tablet controller的偏移记录。router定位tablet失效之后会自动通过tablet controller重新加载到内存。所以切分也相对容易实现。
Tim也曾经用MySQL实现过类似大规模存储的系统，当时的做法是把每条记录的key属于哪个SU的信息保存到 一个字典里面，好处是切分可以获得更大的灵活性，可以动态增加新的tablets,而不需要切分旧的tablets。但缺点就是字典没法像router这 样，可以高效的全部加载到内存中。所以比较而言，在实际的应用中，按段分片会更简单，且已经足够使用。</p>
<h3 id="-write-"><a href=""></a><strong>Write调用示意图</strong></h3>
<p><img src="" alt=""></p>
<h3 id="-pnuts-"><a href=""></a>PNUTS感悟</h3>
<p>2006年Greg Linden就说<a href="http://glinden.blogspot.com/2006/03/i-want-big-virtual-database.html" target="_blank">I want a big, virtual database</a>
What I want is a robust, high performance virtual relational database that runs transparently over a cluster, nodes dropping in an out of service at will, read-write replication and data migration all done automatically.
I want to be able to install a database on a server cloud and use it like it was all running on one machine.
详细资料：
<a href="http://timyang.net/architecture/yahoo-pnuts/" target="_blank">http://timyang.net/architecture/yahoo-pnuts/</a></p>
<h3 id="-sql-"><a href=""></a><strong>微软之SQL数据服务</strong></h3>
<p><a href="http://www.microsoft.com/azure/data.mspx" target="_blank">SQL数据服务</a> 是微软 <a href="http://www.microsoft.com/azure/default.mspx" target="_blank">Azure</a> 网 络服务平台的一部分。该SDS服务也是处于测试阶段，因此也是免费的，但对数据库大小有限制。 SQL数据服务其自身实际上是一项处在许多SQL服务器之上的应用，这些SQL服务器组成了SDS平台底层的数据存储。你不需要访问到它们，虽然底层的数 据库可能是关系式的；SDS是一个键/值型仓储，正如我们迄今所讨论过的其它平台一样。
微软看起来不同于前三个供应商，因为虽然键/值存储对于可扩性���言非常棒，相对于RDBMS，在数据管理上却很困难。微软的方案似乎是入木三分，在实现可扩性和分布机制的同时，随着时间的推移，不断增加特性，在键/值存储和关系数据库平台的鸿沟之间搭起一座桥梁。</p>
<h2 id="-"><a href=""></a>非云服务竞争者</h2>
<p>在云之外，也有一些可以独立安装的键/值数据库软件产品。大部分都还很年轻，不是alpha版就是beta版，但大都是开源的；通过看看它的代码，比起在非开源供应商那里，你也许更能意识到潜在的问题和限制。</p>
<h2 id="-"><a href=""></a>文档存储</h2>
<h3 id="-couchdb"><a href=""></a>CouchDB</h3>
<p><a href="http://couchdb.apache.org/" target="_blank"><strong>C</strong></a><a href="http://couchdb.apache.org/" target="_blank"><strong>ouchDB</strong></a>:  API: <strong>JSON</strong>, Protocol: <strong>REST</strong>, Query Method: <strong>MapReduceR of JavaScript Funcs</strong>, Replication: <strong>Master Master</strong>, Written in: <strong>Erlang</strong>, Concurrency: <strong>MVCC</strong>,  <strong>Misc</strong>: 
<strong>Links</strong>: 3 CouchDB books <a href="http://couchdb.apache.org/docs/books.html" target="_blank">»</a>, Couch Lounge <a href="http://code.google.com/p/couchdb-lounge/" target="_blank">»</a> (partitioning / clusering),  ...
它是Apache社区基于 Erlang/OTP 构建的高性能、分布式容错非关系型数据库系统（NRDBMS）。它充分利用 Erlang 本身所提供的高并发、分布式容错基础平台，并且参考 Lotus Notes 数据库实现，采用简单的文档数据类型（document-oriented）。在其内部，文档数据均以 JSON 格式存储。对外，则通过基于 HTTP 的 REST 协议实现接口，可以用十几种语言进行自由操作。
<img src="" alt="">
CouchDB一种半结构化面向文档的分布式，高容错的数据库系统，其提供RESTFul HTTP/JSON接口。其拥有MVCC特性，用户可以通过自定义Map/Reduce函数生成对应的View。
在CouchDB中，数据是以JSON字符的方式存储在文件中。</p>
<h3 id="-"><a href=""></a>特性</h3>
<ul>
<li>RESTFul API：HTTP GET/PUT/POST/DELETE + JSON</li>
<li>基于文档存储，数据之间没有关系范式要求</li>
<li>每个数据库对应单个个文件(以JSON保存),Hot backup</li>
<li>MVCC（Multi-Version-Concurrency-Control），读写均不锁定数据库</li>
<li>用户自定义View</li>
<li>内建备份机制</li>
<li>支持附件</li>
<li>使用Erlang开发（更多的特性）</li>
</ul>
<p>应用场景 在我们的生活中，有很多document，比如信件，账单，笔记等，他们只是简单的信息，没有关系的需求，我们可能仅仅需要存储这些数据。 这样的情况下，CouchDB应该是很好的选择。当然其他使用关系型数据库的环境，也可以使用CouchDB来解决。</p>
<p>根据CouchDB的特性，在某些偶 尔连接网络的应用中，我们可以用CouchDB暂存数据，随后进行同步。也可以在Cloud环境中，作为分布式的数据存储。CouchDB提供给予 HTTP的API，这样所有的常见语言都可以使用CouchDB。</p>
<p>使用CouchDB，意味着我们不需要在像使用RMDBS一样，在设计应用前首先设计负责数据Table。我们的开发更加快速，灵活。
详细参见：
<a href="http://www.javaeye.com/topic/319839" target="_blank">http://www.javaeye.com/topic/319839</a></p>
<h3 id="-riak"><a href=""></a>Riak</h3>
<p><a href="http://riak.basho.com/" target="_blank"><strong>Riak</strong></a>: API: <strong>JSON</strong>, Protocol: <strong>REST</strong>, Query Method: <strong>MapReduce term matching</strong> , Scaling: <strong>Multiple Masters</strong>; Written in: <strong>Erlang</strong>, Concurrency: <strong>eventually consistent</strong> (stronger then MVCC via Vector Clocks), <strong>Misc:</strong> ... <strong>Links</strong>: talk <a href="http://riak.basho.com/nyc-nosql/" target="_blank">»</a>,</p>
<h3 id="-mongodb"><a href=""></a>MongoDB</h3>
<p><a href="http://www.mongodb.org/" target="_blank"><strong>MongoDB</strong></a>:  API: <strong>BSON</strong>, Protocol: <strong>lots of langs</strong>, Query Method: <strong>dynamic object-based language</strong>, Replication: <strong>Master Slave</strong>, Written in: <strong>C++</strong>,Concurrency: <strong>Update in Place</strong>. <strong>Misc:</strong> ...<strong>Links</strong>: Talk <a href="http://www.leadit.us/hands-on-tech/MongoDB-High-Performance-SQL-Free-Database" target="_blank">»</a>,
MongoDB是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。他支持的数据结构非常松散，是 类似json的bjson格式，因此可以存储比较复杂的数据类型。Mongo最大的特点是他支持的查询语言非常强大，其语法有点类似于面向对象的查询语 言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。
Mongo主要解决的是海量数据的访问效率问题，根据官方的文档，当数据量达到50GB以上的时候，Mongo的数据库访问速度是MySQL的 10倍以上。Mongo的并发读写效率不是特别出色，根据官方提供的性能测试表明，大约每秒可以处理0.5万－1.5次读写请求。对于Mongo的并发读 写性能，我（robbin）也打算有空的时候好好测试一下。
因为Mongo主要是支持海量数据存储的，所以Mongo还自带了一个出色的分布式文件系统GridFS，可以支持海量的数据存储，但我也看到有些评论认为GridFS性能不佳，这一点还是有待亲自做点测试来验证了。
最后由于Mongo可以支持复杂的数据结构，而且带有强大的数据查询功能，因此非常受到欢迎，很多项目都考虑用MongoDB来替代MySQL来实现不是特别复杂的Web应用，比方说<a href="http://blog.boxedice.com/2009/07/25/choosing-a-non-relational-database-why-we-migrated-from-mysql-to-mongodb/" target="_blank">why we migrated from MySQL to MongoDB</a>就是一个真实的从MySQL迁移到MongoDB的案例，由于数据量实在太大，所以迁移到了Mongo上面，数据查询的速度得到了非常显著的提升。
MongoDB也有一个ruby的项目<a href="http://github.com/jnunemaker/mongomapper" target="_blank">MongoMapper</a>，是模仿Merb的DataMapper编写的MongoDB的接口，使用起来非常简单，几乎和DataMapper一模一样，功能非常强大易用。</p>
<h3 id="-terrastore"><a href=""></a>Terrastore</h3>
<p><a href="http://code.google.com/p/terrastore/" target="_blank"><strong>Terrastore</strong></a>: API: <strong>Java &amp; http</strong>, Protocol: <strong>http</strong>, Language: <strong>Java</strong>, Querying: <strong>Range queries, Predicates</strong>, Replication: <strong>Partitioned with consistent hashing</strong>, Consistency: <strong>Per-record strict consistency</strong>, Misc: Based on Terracotta</p>
<h3 id="-thrudb"><a href=""></a>ThruDB</h3>
<p><a href="http://code.google.com/p/thrudb/" target="_blank"><strong>ThruDB</strong></a>: (please help provide more facts!) Uses Apache <a href="http://incubator.apache.org/thrift/" target="_blank">Thrift</a> to integrate multiple backend databases as BerkeleyDB, Disk, MySQL, S3.</p>
<h2 id="-key-value-tuple-"><a href=""></a>Key Value / Tuple 存储</h2>
<h3 id="-amazon-simpledb"><a href=""></a>Amazon之SimpleDB</h3>
<p><a href="http://aws.amazon.com/simpledb/" target="_blank"><strong>Amazon SimpleDB</strong></a>: <strong>Misc</strong>: not open source, Book <a href="http://www.apress.com/book/view/1430225335" target="_blank">»</a><strong><strong><a href="http://aws.amazon.com/simpledb/" target="_blank">SimpleDB</a> 是一个亚马逊网络服务平台的一个面向属性的键/值数据库。SimpleDB仍处于公众测试阶段；当前，用户能在线注册其“免费”版 --免费的意思是说直到超出使用限制为止。
SimpleDB有几方面的限制。首先，一次查询最多只能执行5秒钟。其次，除了字符串类型，别无其它数据类型。一切都以字符串形式被存储、获取和 比较，因此除非你把所有日期都转为ISO8601，否则日期比较将不起作用。第三，任何字符串长度都不能超过1024字节，这限制了你在一个属性中能存储 的文本的大小（比如说产品描述等）。不过，由于该模式动态灵活，你可以通过追加“产品描述1”、“产品描述2”等来绕过这类限制。一个项目最多可以有 256个属性。由于处在测试阶段，SimpleDB的域不能大于10GB，整个库容量则不能超过1TB。
SimpleDB的一项关键特性是它使用一种<a href="http://www.allthingsdistributed.com/2008/12/eventually_consistent.html" target="_blank">最终一致性模型</a>。 这个一致性模型对并发性很有好处，但意味着在你改变了项目属性之后，那些改变有可能不能立即反映到随后的读操作上。尽管这种情况实际发生的几率很低，你也 得有所考虑。比如说，在你的演出订票系统里，你不会想把最后一张音乐会门票卖给5个人，因为在售出时你的数据是不一致的。</strong></strong></p>
<h3 id="-chordless-"><a href=""></a><strong>Chordless</strong></h3>
<p><strong>**[</strong>Chordless<strong>](<a href="http://sourceforge.net/projects/chordless/" target="_blank">http://sourceforge.net/projects/chordless/</a>): API: </strong>Java &amp; simple RPC to vals<strong>, Protocol: </strong>internal<strong>, Query Method: </strong>M/R inside value objects<strong>, Scaling: </strong>every node is master for its slice of namespace<strong>, Written in: </strong>Java<strong>, Concurrency: </strong>serializable transaction isolation<strong>, </strong>Links**:</p>
<h3 id="-redis"><a href=""></a>Redis</h3>
<p><a href="http://code.google.com/p/redis/" target="_blank"><strong>Redis</strong></a> : (please help provide more facts!)  API: <strong>Tons of languages</strong>, Written in: <strong>C</strong>, Concurrency: <strong>in memory</strong> and saves asynchronous disk after a defined time. Append only mode available. Different kinds of fsync policies. Replication: <strong>Master / Slave</strong>,
Redis是一个很新的项目，刚刚发布了1.0版本。Redis本质上是一个Key-Value类型的内存数据库，很像memcached，整个数据库统 统加载在内存当中进行操作，定期通过异步操作把数据库数据flush到硬盘上进行保存。因为是纯内存操作，Redis的性能非常出色，每秒可以处理超过 10万次读写操作，是我知道的性能最快的Key-Value DB。
Redis的出色之处不仅仅是性能，Redis最大的魅力是支持保存List链表和Set集合的数据结构，而且还支持对List进行各种操作，例 如从List两端push和pop数据，取List区间，排序等等，对Set支持各种集合的并集交集操作，此外单个value的最大限制是1GB，不像 memcached只能保存1MB的数据，因此Redis可以用来实现很多有用的功能，比方说用他的List来做FIFO双向链表，实现一个轻量级的高性 能消息队列服务，用他的Set可以做高性能的tag系统等等。另外Redis也可以对存入的Key-Value设置expire时间，因此也可以被当作一 个功能加强版的memcached来用。
Redis的主要缺点是数据库容量受到物理内存的限制，不能用作海量数据的高性能读写，并且它没有原生的可扩展机制，不具有scale（可扩展） 能力，要依赖客户端来实现分布式读写，因此Redis适合的场景主要局限在较小数据量的高性能操作和运算上。目前使用Redis的网站有 github，Engine Yard。</p>
<h3 id="-scalaris"><a href=""></a>Scalaris</h3>
<p><a href="http://code.google.com/p/scalaris/" target="_blank"><strong>Scalaris</strong></a>: (please help provide more facts!) Written in: <strong>Erlang</strong>, Replication: <strong>Strong consistency over replicas</strong>, Concurrency: <strong>non blocking Paxos</strong>.</p>
<h3 id="-tokyo-cabinet-tyrant"><a href=""></a>Tokyo cabinet / Tyrant</h3>
<p><a href="http://1978th.net/" target="_blank"><strong>Tokyo Cabinet / Tyrant</strong></a>: <strong>Links</strong>: nice talk <a href="http://www.infoq.com/presentations/grigorik-tokyo-cabinet-recipes" target="_blank">»</a>, slides <a href="http://www.scribd.com/doc/12016121/Tokyo-Cabinet-and-Tokyo-Tyrant-Presentation" target="_blank">»</a>, Misc: <strong>Kyoto</strong> Cabinet <a href="http://1978th.net/kyotocabinet/" target="_blank">»</a>
它是日本最大的SNS社交网站<a href="http://mixi.jp/" target="_blank">mixi.jp</a>开发的 Tokyo Cabinet key-value数据库网络接口。它拥有Memcached兼容协议，也可以通过HTTP协议进行数据交换。对任何原有Memcached客户端来讲， 可以将Tokyo Tyrant看成是一个Memcached，但是，它的数据是可以持久存储的。Tokyo Tyrant 具有故障转移、日志文件体积小、大数据量下表现出色等优势，详见：<a href="http://blog.s135.com/post/362.htm" target="_blank"><a href="http://blog.s135.com/post/362.htm">http://blog.s135.com/post/362.htm</a></a>
Tokyo Cabinet 2009年1月18日发布的新版本（Version 1.4.0）已经实现 Table Database，将key-value数据库又扩展了一步，有了MySQL等关系型数据库的表和字段的概念，相信不久的将来，Tokyo Tyrant 也将支持这一功能。值得期待。
<img src="" alt="">
TC除了支持Key-Value存储之外，还支持保存Hashtable数据类型，因此很像一个简单的数据库表，并且还支持基于column的条 件查询，分页查询和排序功能，基本上相当于支持单表的基础查询功能了，所以可以简单的替代关系数据库的很多操作，这也是TC受到大家欢迎的主要原因之一， 有一个Ruby的项目<a href="http://github.com/tsukasaoishi/miyazakiresistance" target="_blank">miyazakiresistance</a>将TT的hashtable的操作封装成和ActiveRecord一样的操作，用起来非常爽。
TC/TT在mixi的实际应用当中，存储了2000万条以上的数据，同时支撑了上万个并发连接，是一个久经考验的项目。TC在保证了极高的并发 读写性能的同时，具有可靠的数据持久化机制，同时还支持类似关系数据库表结构的hashtable以及简单的条件，分页和排序操作，是一个很棒的 NoSQL数据库。
TC的主要缺点是在数据量达到上亿级别以后，并发写数据性能会大幅度下降，<a href="http://bjclark.me/2009/08/04/nosql-if-only-it-was-that-easy/" target="_blank">NoSQL: If Only It Was That Easy</a>提到，他们发现在TC里面插入1.6亿条2-20KB数据的时候，写入性能开始急剧下降。看来是当数据量上亿条的时候，TC性能开始大幅度下降，从TC作者自己提供的mixi数据来看，至少上千万条数据量的时候还没有遇到这么明显的写入性能瓶颈。
这个是Tim Yang做的一个<a href="http://timyang.net/data/mcdb-tt-redis/" target="_blank">Memcached，Redis和Tokyo Tyrant的简单的性能评测，仅供参考</a></p>
<h3 id="-ct-m"><a href=""></a>CT.M</h3>
<p><a href="http://fis-gtm.com/" target="_blank"><strong>GT.M</strong></a>: API: <strong>M, C, Python, Perl</strong>, Protocol: <strong>native, inprocess C</strong>, Misc: Wrappers: <strong>M/DB for SimpleDB compatible HTTP</strong> <a href="http://www.mgateway.com/mdb.html" target="_blank">»</a>, <strong>MDB:X</strong> for XML <a href="http://mgateway.com/" target="_blank">»</a>, <strong>PIP</strong> for mapping to tables for SQL <a href="http://fis-pip.com/" target="_blank">»</a>, Features: Small footprint (17MB), Terabyte Scalability, Unicode support, Database encryption, Secure, ACID transactions (single node), eventual consistency (replication), License: AGPL v3 on x86 GNU/Linux, <strong>Links</strong>: Slides <a href="http://www.slideshare.net/robtweed/gtm-a-tried-and-tested-schemaless-database" target="_blank">»</a>,</p>
<h3 id="-scalien"><a href=""></a>Scalien</h3>
<p><a href="http://scalien.com/" target="_blank"><strong>Scalien</strong></a>:  API / Protocol: <strong>http</strong> (text, html, JSON)<strong>, C, C++, Python</strong>, Concurrency: <strong>Paxos</strong>.</p>
<h3 id="-berkley-db"><a href=""></a>Berkley DB</h3>
<p><a href="http://www.oracle.com/database/berkeley-db/db/index.html" target="_blank"><strong>Berkley DB</strong></a>: API: <strong>Many languages</strong>, Written in: <strong>C</strong>, Replication: <strong>Master / Slave</strong>, Concurrency: <strong>MVCC</strong>, License: <strong>Sleepycat</strong>, <strong>BerkleyDB Java Edition</strong>: API: <strong>Java</strong>, Written in: <strong>Java</strong>, Replication: <strong>Master / Slave</strong>, Concurrency: <strong>serializable transaction isolation</strong>, License: <strong>Sleepycat</strong></p>
<h3 id="-memcachedb"><a href=""></a>MemcacheDB</h3>
<p><a href="http://memcachedb.org/" target="_blank"><strong>MemcacheDB</strong></a>: API: Memcache protocol (get, set, add, replace, etc.), Written in: <strong>C</strong>, Data Model: <strong>Blob</strong>, Misc: Is Memcached writing to BerkleyDB.
它是新浪互动社区事业部为在Memcached基础上，增加Berkeley DB存储层而开发一款支持高并发的分布式持久存储系统，对任何原有Memcached客户端来讲，它仍旧是个Memcached，但是，它的数据是可以持久存储的。
<img src="" alt=""></p>
<h3 id="-mnesia"><a href=""></a>Mnesia</h3>
<p><a href="http://www.erlang.org/doc/apps/mnesia/index.html" target="_blank"><strong>Mnesia</strong></a>: (ErlangDB <a href="http://www.infoq.com/news/2007/08/mnesia" target="_blank">»</a>)</p>
<h3 id="-lightcloud"><a href=""></a>LightCloud</h3>
<p><a href="http://opensource.plurk.com/LightCloud/" target="_blank"><strong>LightCloud</strong></a>:  (based on Tokyo Tyrant)</p>
<h3 id="-hamsterdb"><a href=""></a>HamsterDB</h3>
<p><a href="http://hamsterdb.com/" target="_blank"><strong>HamsterDB</strong></a>:  (embedded solution) ACID Compliance, Lock Free Architecture (transactions fail on conflict rather than block), Transaction logging &amp; fail recovery (redo logs), In Memory support – can be used as a non-persisted cache, B+ Trees – supported [Source: Tony Bain <a href="http://blog.tonybain.com/" target="_blank">»</a>]</p>
<h3 id="-flare"><a href=""></a>Flare</h3>
<p>TC是日本第一大SNS网站mixi开发的，而Flare是日本第二大SNS网站green.jp开发的，有意思吧。Flare简单的说就是给 TC添加了scale功能。他替换掉了TT部分，自己另外给TC写了网络服务器，Flare的主要特点就是支持scale能力，他在网络服务端之前添加了 一个node server，来管理后端的多个服务器节点，因此可以动态添加数据库服务节点，删除服务器节点，也支持failover。如果你的使用场景必须要让TC可 以scale，那么可以考虑flare。
flare唯一的缺点就是他只支持memcached协议，因此当你使用flare的时候，就不能使用TC的table数据结构了，只能使用TC的key-value数据结构存储。</p>
<h2 id="-key-value-"><a href=""></a>最终一致性Key Value存储</h2>
<h3 id="-amazon-dynamo"><a href=""></a>Amazon之Dynamo</h3>
<p><a href="http://www.allthingsdistributed.com/2007/10/amazons_dynamo.html" target="_blank"><strong>Amazon Dynamo</strong></a>: <strong>Misc</strong>: not open source (see KAI below)</p>
<h3 id="-"><a href=""></a>功能特色</h3>
<ul>
<li>高可用</li>
<li>可扩展</li>
<li>总是可写</li>
<li>可以根据应用类型优化(可用性，容错性，高效性配置)</li>
</ul>
<h3 id="-"><a href=""></a>架构特色</h3>
<p><img src="" alt=""></p>
<ul>
<li>完全的分布式</li>
<li>去中心化(人工管理工作很小)</li>
<li>Key 唯一代表一个数据对象，对该数据对象的读写操通过 Key 来完成.</li>
<li>通常是一台自带硬盘的主机。每个节点有三个 Java 写的组件：请求协调器(request coordination)、成员与失败检测、本地持久引擎(local persistence engine)</li>
<li>数据分区并用改进的一致性哈希(consistent hashing)方式进行复制，利用数据对象的版本化实现一致性。复制时因为更新产生的一致性问题的维护采取类似 quorum 的机制以及去中心化的复制同步协议。 </li>
<li>每个实例由一组节点组成，从应用的角度看，实例提供 IO 能力。一个实例上的节点可能位于不同的数据中心内, 这样一个数据中心出问题也不会导致数据丢失。</li>
</ul>
<h3 id="-beansdb"><a href=""></a>BeansDB</h3>
<h3 id="-"><a href=""></a>简介</h3>
<p><a href=""></a>BeansDB 是一个主要针对大数据量、高可用性的分布式KeyValue存储系统，采用HashTree和简化的版本号来快速同步保证最终一致性（弱），一个简化版的Dynamo。</p>
<p><a href=""></a>它采用类似memcached的去中心化结构，在客户端实现数据路由。目前只提供了Python版本的客户端，其它语言的客户端可以由memcached的客户端稍加改造得到。</p>
<p><a href=""></a>Google Group: <a href="http://groups.google.com/group/beandb/"><a href="http://groups.google.com/group/beandb/">http://groups.google.com/group/beandb/</a></a></p>
<h3 id="-"><a href=""></a>更新</h3>
<p><a href=""></a>2009.12.29 第一个公开版本 0.3</p>
<h3 id="-"><a href=""></a>特性</h3>
<ul>
<li>高可用：通过多个可读写的用于备份实现高可用</li>
<li>最终一致性：通过哈希树实现快速完整数据同步（短时间内数据可能不一致）</li>
<li>容易扩展：可以在不中断服务的情况下进行容量扩展。</li>
<li>高性能：异步IO和高性能的KeyValue数据TokyoCabinet 可配置的</li>
<li>可用性和一致性：通过N,W,R进行配置 简单协议：Memcache兼容协议，大量可用客户端</li>
</ul>
<p><a href=""></a></p>
<h3 id="-"><a href=""></a>性能</h3>
<p><strong><a href=""></a>在小数据集上，它跟memcached一样快：**</strong><a href=""></a>/# memstorm -s localhost:7900 -n 1000
Num of Records      : 10000
Non-Blocking IO     : 0
TCP No-Delay        : 0
Successful   [SET]  : 10000
Failed       [SET]  : 0
Total Time   [SET]  : 0.45493s
Average Time [SET]  : 0.00005s
Successful   [GET]  : 10000
Failed       [GET]  : 0
Total Time   [GET]  : 0.28609s
Average Time [GET]  : 0.00003s**</p>
<p><strong><a href=""></a>实际部署情况下的性能（客户端测量）：**</strong><a href=""></a>&amp;/#x100084; 服务器 请求数 评价时间(ms) 中位数(ms) 99% (ms) 99.9%(ms)
&amp;/#x100084; get A:7900 n=151398, avg=8.89, med=5.94, 99%=115.5, 99.9%=310.2
&amp;/#x100084; get B:7900 n=100054, avg=6.84, med=0.40, 99%=138.5, 99.9%=483.0
&amp;/#x100084; get C:7900 n=151250, avg=7.42, med=5.34, 99%=55.2, 99.9%=156.7
&amp;/#x100084; get D:7900 n=150677, avg=7.63, med=5.09, 99%=97.7, 99.9%=284.7
&amp;/#x100084; get E:7900 n=3822,   avg=3.07, med=0.18, 99%=44.3, 99.9%=170.0
&amp;/#x100084; get F:7900 n=249973, avg=8.29, med=6.36, 99%=46.8, 99.9%=241.5
&amp;/#x100084; set A:7900 n=10177, avg=18.53, med=12.78,99%=189.3, 99.9%=513.6
&amp;/#x100084; set B:7900 n=10431, avg=12.85, med=1.19, 99%=206.1, 99.9%=796.8
&amp;/#x100084; set C:7900 n=10556, avg=17.29, med=12.97,99%=132.2, 99.9%=322.9
&amp;/#x100084; set D:7900 n=10164, avg=7.34,  med=0.64, 99%=98.8, 99.9%=344.4
&amp;/#x100084; set E:7900 n=10552, avg=7.18,  med=2.33, 99%=73.6, 99.9%=204.8
&amp;/#x100084; set F:7900 n=10337, avg=17.79, med=15.31, 99%=109.0, 99.9%=369.5 <a href=""></a><a href=""></a>
<a href="http://beansdb.googlecode.com/files/Inside%20BeansDB.pdf" title="BeansDB" target="_blank">BeansDB设计实现（非常难得的中文资料）</a>
<a href="http://www.slideshare.net/hongqn/qcon-beijing-2009" title="PPT" target="_blank">PPT</a>
**</p>
<h3 id="-nuclear"><a href=""></a>Nuclear</h3>
<p>人人网研发中的数据库
详见：
<a href="http://ugc.renren.com/2010/01/21/ugc-nuclear-guide-use/" target="_blank">http://ugc.renren.com/2010/01/21/ugc-nuclear-guide-use/</a>
<a href="http://ugc.renren.com/2010/01/28/ugc-nuclear-guide-theory/" target="_blank">http://ugc.renren.com/2010/01/28/ugc-nuclear-guide-theory/</a>
<img src="" alt=""></p>
<h3 id="-tips"><a href=""></a>两个设计上的Tips</h3>
<ol>
<li>万事皆异步
我们在编码的过程中走了一些弯路，同步的操作在高并发的情况下带来的性能下降是非常恐怖的，于是乎，Nuclear系统中任何的高并发操作都消除了Block。no waiting, no delay。</li>
<li>根据系统负载控制后台线程的资源占用
Nuclear系统中有不少的后台线程默默无闻的做着各种辛苦的工作，但是它们同样会占用系统资源，我们的解决方案是根据系统负载动态调整线程的运行和停止，并达到平衡。</li>
</ol>
<h3 id="-voldemort"><a href=""></a>Voldemort</h3>
<p><a href="http://project-voldemort.com/" target="_blank"><strong>Voldemort</strong></a>: (can you help)
Voldemort是个和Cassandra类似的面向解决scale问题的分布式数据库系统，Cassandra来自于Facebook这个 SNS网站，而Voldemort则来自于Linkedin这个SNS网站。说起来SNS网站为我们贡献了n多的NoSQL数据库，例如 Cassandar，Voldemort，Tokyo Cabinet，Flare等等。Voldemort的资料不是很多，因此我没有特别仔细去钻研，Voldemort官方给出Voldemort的并发读 写性能也很不错，每秒超过了1.5万次读写。
<img src="" alt="">
其实现在很多公司可能都面临着这个抽象架构图中的类似问题。以 Hadoop 作为后端的计算集群，计算得出来的数据如果要反向推到前面去，用什么方式存储更为恰当? 再放到 DB 里面的话，构建索引是麻烦事；放到 Memcached 之类的 Key-Value 分布式系统中，毕竟只是在内存里，数据又容易丢。<a href="http://project-voldemort.com/" target="_blank">Voldemort</a> 算是一个不错的改良方案。
值得借鉴的几点:</p>
<ul>
<li>键(Key)结构的设计，有点技巧；</li>
<li>架构师熟知硬件结构是有用的。越大的系统越是如此。</li>
<li>用好并行。<a href="http://en.wikipedia.org/wiki/Amdahl&#39;s_law" target="_blank">Amdahl 定律</a>以后出现的场合会更多。
详细：
<a href="http://www.dbanotes.net/arch/voldemort_key-value.html" target="_blank">http://www.dbanotes.net/arch/voldemort_key-value.html</a>
<a href="http://project-voldemort.com/blog/2009/06/building-a-1-tb-data-cycle-at-linkedin-with-hadoop-and-project-voldemort/" target="_blank">http://project-voldemort.com/blog/2009/06/building-a-1-tb-data-cycle-at-linkedin-with-hadoop-and-project-voldemort/</a></li>
</ul>
<h3 id="-dynomite"><a href=""></a>Dynomite</h3>
<p><a href="http://wiki.github.com/cliffmoon/dynomite/dynomite-framework" target="_blank"><strong>Dynomite</strong></a>: (can you help)</p>
<h3 id="-kai"><a href=""></a>Kai</h3>
<p><a href="http://sourceforge.net/projects/kai/" target="_blank"><strong>KAI</strong></a>: Open Source Amazon Dnamo implementation, Misc: <a href="http://www.slideshare.net/takemaru/kai-an-open-source-implementation-of-amazons-dynamo-472179" target="_blank">slides</a> ,</p>
<h2 id="-"><a href=""></a>未分类</h2>
<h3 id="-skynet"><a href=""></a>Skynet</h3>
<p>全新的Ruby MapReduce实现
2004年，Google提出用于分布式数据处理的MapReduce设计模式，同时还提供了第一个C++的实现。现在，一个名为Skynet的Ruby实现已经由Adam Pisoni发布。
Skynet是可适配、可容错的、可自我更新的，而且完全
是分布式的系统，不存在单一的失败节点。
Skynet和Google在设计上有两点重要的区别：
Skynet无法向工作者（Worker）发送原生代码（Raw code），
Skynet利用结对恢复系统，不同的工作者会互相监控以防失败：
如果有一个工作者由于某种原因离开或者放弃了，就会有另一个工作者发现并接管它的任务。Skynet 也没有所谓的“主”管理进程，只有工作者，它们在任何时间都可以充当任何任务的主管理进程。
Skynet的使用和设置都很容易，这也正是MapReduce这个概念的真正优势。Skynet还扩展了ActiveRecord，加入了MapReduce的特性，比如distributed_find。
你要为Starfish编写一些小程序，它们的代码是你将要构建其中的。如果我没有弄错的话，你无法在同一台机器上运行多种类型的MapReduce作业。Skynet是一个更全面的MR系统，可以运行多种类型的多个作业，比如，各种不同的代码。
Skynet也允许失败。工作者会互相关照。如果一个工作者失败了，无法及时完成任务，另一个工作者将会接起这个任务并尝试完成它。Skynet也支持map_data流，也就是说，即使某个数据集非常庞大，甚至无法放在一个数据结构中，Skynet也可以处理。
什 么是map_data流？大多数时候，在你准备启动一个map_reduce作业时，必须提供一个数据的队列，这些数据已经被分离并将被并行处理。如果队 列过大，以至于无法适应于内存怎么办？在这种情况下，你就要不能再用队列，而应该使用枚举（Enumerable）。Skynet知道去对象的调 用:next或者:each方法，然后开始为“每一个（each）”分离出map_task来。通过这样的方式，不会有人再试图同时创建大量的数据结构。
还 有很多特性值得一提，不过最想提醒大家的是，Skynet能够与你现有的应用非常完美地集成到一起，其中自然包括Rails应用。Skynet甚 至还提供了一个ActiveRecord的扩展，你可以在模型中以分布式的形式执行一些任务。在Geni中，我们使用这项功能来运行特别复杂的移植，它通 常涉及到在数百万的模型上执行Ruby代码。</p>
<blockquote>
<p>Model.distributed_find(:all, :conditions =&gt; &quot;id &gt; 20&quot;).each(:somemethod)在你运行Skynet的时候，它将在每个模型上执行:somemethod，不过是以分布式的方式（这和你 拥有多少个工作者相关）。它在向模型分发任务前不必进行初始化，甚至不必提前获取所有的id。因此它可以操作无限大的数据集。 用户的反馈如何？</p>
</blockquote>
<h3 id="-drizzle-"><a href=""></a><strong>Drizzle</strong></h3>
<p><a href="https://launchpad.net/drizzle" target="_blank">Drizzle</a>可 被认为是键/值存储要解决的问题的反向方案。Drizzle诞生于MySQL（6.0）关系数据库的拆分。在过去几个月里，它的开发者已经移走了大量非核 心的功能（包括视图、触发器、已编译语句、存储过程、查询缓冲、ACL以及一些数据类型），其目标是要建立一个更精简、更快的数据库系统。Drizzle 仍能存放关系数据；正如MySQL/Sun的Brian Aker所说那样：“没理由泼洗澡水时连孩子也倒掉”。它的目标就是，针对运行于16核（或以上）系统上的以网络和云为基础的应用，建立一个半关系型数据 库平台。</p>
<h2 id="-"><a href=""></a>比较</h2>
<h3 id="-"><a href=""></a>可扩展性</h3>
<p><img src="" alt=""></p>
<h3 id="-"><a href=""></a>数据和查询模型</h3>
<p><img src="" alt="">
当你需要查询或更新一个值的一部分时，Key/value模型是最简单有效实现。
面向文本数据库是Key/value的下一步, 允许内嵌和Key关联的值. 支持查询这些值数据，这比简单的每次返回整个blob类型数据要有效得多。
Neo4J是唯一的存储对象和关系作为数学图论中的节点和边. 对于这些类型数据的查询，他们能够比其他竞争者快1000s
Scalaris是唯一提供跨越多个key的分布式事务。</p>
<h3 id="-"><a href=""></a>持久化设计</h3>
<p><img src="" alt="">
内存数据库是非常快的，(Redis在单个机器上可以完成每秒100,000以上操作）但是数据集超过内存RAM大小就不行. 而且 Durability (服务器当机恢复数据)也是一个问题
Memtables和SSTables缓冲 buffer是在内存中写(“memtable”)， 写之前先追加一个用于durability的日志中. 
但有足够多写入以后，这个memtable将被排序然后一次性作为“sstable.”写入磁盘中，这就提供了近似内存性能，因为没有磁盘的查询seeks开销, 同时又避免了纯内存操作的durability问题.(个人点评 其实Java中的Terracotta早就实现这两者结合)
B-Trees提供健壮的索引，但是性能很差，一般和其他缓存结合起来。</p>
<h1 id="-"><a href=""></a>应用篇</h1>
<h2 id="-ebay-"><a href=""></a>eBay 架构经验</h2>
<ul>
<li>1、 Partition Everything 切分万物</li>
<li>2、 Asynchrony Everywhere 处处异步</li>
<li>3、 Automate Everything 全部自动</li>
<li>4、 Remember Everything Fails 记录失败</li>
<li>5、 Embrace Inconsistency 亲不同是谓大同</li>
<li>6、 Expect (R)evolution 预言演变</li>
<li>7、 Dependencies Matter 重视依赖</li>
<li>8、 Be Authoritative 独断专行</li>
<li>9、 Never Enough Data</li>
<li>10、Custom Infrastructure 自定义基础设施</li>
</ul>
<h2 id="-"><a href=""></a> 淘宝架构经验</h2>
<ul>
<li>1、适当放弃一致性</li>
<li>2、备份和隔离解决稳定性问题</li>
<li>3、分割和异步解决性能问题(类似 eBay 的 Asynchrony Everywhere)</li>
<li>4、自动化降低人力成本(类似 eBay 的 Automate Everything)</li>
<li>5、产品化管理</li>
</ul>
<h2 id="-flickr-"><a href=""></a>Flickr架构经验</h2>
<ul>
<li>使得机器自动构建 (Teach machines to build themselves)</li>
<li>使得机器自监控(Teach machines to watch themselves)</li>
<li>使得机器自修复(Teach machines to fix themselves)</li>
<li>通过流程减少 MTTR (Reduce MTTR by streamlining)</li>
</ul>
<h2 id="-twitter-"><a href=""></a>Twitter运维经验</h2>
<p>最近看到的另外一个介绍Twitter技术的视频[<a href="http://assets.en.oreilly.com/1/event/29/Fixing%20Twitter_%20Improving%20the%20Performance%20and%20Scalability%20of%20the%20World&#39;s%20Most%20Popular%20Micro-blogging%20Site%20Presentation.pdf" target="_blank">Slides</a>] [<a href="http://blip.tv/file/2300327" target="_blank">Video</a> (GFWed)]，这是Twitter的John Adams在<a href="http://en.oreilly.com/velocity2009" target="_blank">Velocity 2009</a>的一个演讲，主要介绍了Twitter在系统运维方面一些经验。 本文大部分整理的观点都在Twitter(@<a href="http://twitter.com/xmpp" target="_blank">xmpp</a>)上发过，这里全部整理出来并补充完整。</p>
<p>Twitter没有自己的硬件，都是由NTTA来提供，同时NTTA负责硬件相关的网络、带宽、负载均衡等业务，Twitter operations team<strong>只关注核心的业务，包括Performance，Availability，Capacity Planning容量规划，配置管理</strong>等，这个可能跟国内一般的互联网公司有所区别。</p>
<h3 id="-"><a href=""></a>运维经验</h3>
<h3 id="-metrics"><a href=""></a>Metrics</h3>
<p>Twitter的监控后台几乎都是图表(critical metrics)，类似驾驶室的转速表，时速表，让操作者可以迅速的了解系统当前的运作状态。联想到我们做的类似监控后台，数据很多，但往往还需要浏览者 做二次分析判断，像这样满屏都是图表的方法做得还不够，可以学习下这方面经验。 据John介绍可以从图表上看到系统的瓶颈-系统最弱的环节(web, mq, cache, db?)
根据图表可以科学的制定系统容量规划，而不是事后救火。</p>
<p><img src="" alt=""></p>
<h3 id="-"><a href=""></a>配置管理</h3>
<p>每个系统都需要一个自动配置管理系统，越早越好，这条一整理发到Twitter上去之后引起很多回应。</p>
<h3 id="-darkmode"><a href=""></a>Darkmode</h3>
<p>配置界面可以enable/disable 高计算消耗或高I/O的功能，也相当于优雅降级，系统压力过大时取消一些非核心但消耗资源大的功能。</p>
<h3 id="-"><a href=""></a>进程管理</h3>
<p>Twitter做了一个”Seppaku” patch, 就是将Daemon在完成了n个requests之后主动kill掉，以保持健康的low memory状态，这种做法据了解国内也有不少公司是这样做。</p>
<h3 id="-"><a href=""></a>硬件</h3>
<p>Twitter将CPU由AMD换成Xeon之后，获得30%性能提升，将CPU由双核/4核换成8核之后，减少了40%的CPU, 不过John也说，这种升级不适合自己购买硬件的公司。</p>
<h3 id="-"><a href=""></a>代码协同经验</h3>
<h3 id="-review-"><a href=""></a>Review制度</h3>
<p>Twitter有上百个模块，如果没有一个好的制度，容易引起代码修改冲突，并把问题带给最终用户。所以Twitter有一强制的source code review制度, 如果提交的代码的svn comment没有”reviewed by xxx”, 则pre-commit脚本会让提交失败, review过的代码提交后会通过自动配置管理系统应用到上百台服务器上。 有@xiaomics同学在Twitter上马上就问，时间成本能否接受？如果有紧急功能怎么办？个人认为紧急修改时有两人在场，一人修改一人 review也不是什么难事。</p>
<h3 id="-"><a href=""></a>部署管理</h3>
<p>从部署图表可以看到每个发布版本的CPU及latency变化，如果某个新版本latency图表有明显的向上跳跃，则说明该发布版本存在问题。另外在监控首页列出各个模块最后deploy版本的时间，可以清楚的看到代码库的现状。</p>
<h3 id="-"><a href=""></a>团队沟通</h3>
<p>Campfire来协同工作，campfire有点像群，但是更适合协同工作。对于Campfire就不做更多介绍，可参考<a href="http://campfirenow.com/" target="_blank">Campfire</a>官方说明。</p>
<h3 id="-cache"><a href=""></a>Cache</h3>
<ul>
<li>Memcache key hash, 使用FNV hash 代替 MD5 hash，因为FNV更快。</li>
<li>开发了Cache Money plugin(Ruby), 给应用程序提供<strong>read-through, write-through cache</strong>, 就像一个db访问的钩子，当读写数据库的时候会自动更新cache, 避免了繁琐的cache更新代码。</li>
<li>“Evictions make the cache unreliable for important configuration data”，Twitter使用memcache的一条经验是，不同类型的数据需放在不同的mc,避免eviction，跟作者前文<a href="http://timyang.net/data/memcached-lru-evictions/" target="_blank">Memcached数据被踢(evictions&gt;0)现象分析</a>中的一些经验一致。</li>
<li>Memcached SEGVs, Memcached崩溃(cold cache problem)据称会给这种高度依赖Cache的Web 2.0系统带来灾难，不知道Twitter具体怎么解决。</li>
<li>在Web层Twitter使用了Varnish作为反向代理，并对其评价较高。</li>
</ul>
<h2 id="-"><a href=""></a>云计算架构</h2>
<p><img src="" alt="">
作者认为，金字塔概念最能说明每一层的大小，它也表达了每 个层是依赖前层的消息传递。在概念上，硬件是基础和广泛层。SaaS层是顶峰，也是最轻层。这种观点是来自于将购买SaaS的的最终用户角度。对于一个非 常大的企业内部，PaaS平台层将是顶峰。使用内部开发的软件的内部各部门将实现他们的顶峰SaaS。还要注意：大小和层位置并不一定等同于重要性。硬件 层可能是最重要的，因为它是所有超过一定点的商品。
<strong>硬件层The Hardware Layer</strong>
必须考虑容错和冗余，大部分人认为没有容错硬件廉价商品。冗余和容错处理在软件层内，硬件预计要失败的，当然故障多电源容错服务器，RAID磁盘阵列也是必要的。
<strong>虚拟层The Virtualization Layer</strong>
基于操作系统OS的虚拟化层，虚拟资源能够在线即时增加拓展，允许供应商提供基础设施作为服务(SaaS)，VMware，Citrix公司，Sun都提供虚拟化产品。
<strong>The IaaS Layer</strong>
提 供和控制的基于虚拟层的计算方式，终端用户能够精确控制每个虚拟机没分钟每小时耗费多少钱。比如提供一个共同的接口，如门户网站暴露的API，允许最终用 户创建和配置虚拟机模板的需求。最终用户还可以控制何时打开或破坏虚拟机，以及如何在虚拟机互相联网。在这个领域的主要竞争者例子是亚马逊网络服务的 EC2，S3和数据库服务。
<strong>The PaaS Layer</strong>
这一层的目的是尽量减少部署云的复杂性和麻烦，最终用户 利用和开发的这层的API和编程语言。两个很好的例子是谷歌的App Engine 和Force.com平台，在App Engine中，谷歌公开云存储，平台和数据库，以及使用Python和Java编程语言的API。开发人员能够编写应用程序并部署到这一层中，后端可<a href="http://www.jdon.com/jivejdon/tags/2513" target="_blank"><strong>伸缩性</strong></a>架构设计完全交给谷歌负责，最终用户完全不必担心管理基础设施。Force.com平台类似，但采用了自定义的编程语言名为Apex。如果你是一个大型企业寻求内部开发应用的部署，这层是你的顶峰。
<strong>The SaaS Layer</strong>
如 果您是中小型企业（SME）和大企业不希望开发自己的应用程序时，SaaS的层是你的顶峰（是你将直接面对的）。您只是进行有兴趣地采购如电子邮件或客户 关系管理服务，这些功能服务已经被供应商开发成功，并部署到云环境中了，您只需验证的应用是否符合你的使用需要，帐单可以基于包月租费等各种形式，，作为 最终用户的您不会产生开发和维护拓展应用程序软件的任何成本。越来越多的企业订阅Salesforce.com和Sugar CRM的SaaS产品。</p>
<h2 id="-"><a href=""></a>反模式</h2>
<h3 id="-single-point-of-failure-"><a href=""></a>单点失败（Single Point of Failure）</h3>
<p>大部分的人都坚持在单一的设备上部署我们的应用，因为这样部署的费用会比较低，但是我们要清楚任何的硬件设备都会有失败的风险的，这种单点失败会严重的影响用户体验甚至是拖垮你的应用，因此除非你的应用能容忍失败带来的损失，否则得话应该尽量的避免单点风险，比如做冗余，热备等。</p>
<h3 id="-"><a href=""></a>同步调用</h3>
<p>同步调用在任何软件系统中都是不可避免的，但是我们软件工程师必须明白同步调用给软件系统带来的问题。如果我们将应用程序串接起来，那么系统的可用性就会低于任何一个单一组件的可用性。比如组件A同步调用了组件B，组件A的可用性为99.9%，组件B的可用性为99.9%,那么组件A同步调用组件B的可用性就是99.9% /* 99.9%=99.8%。同步调用使得系统的可用性受到了所有串接组件可用性的影响，因此我们在系统设计的时候应该清楚哪些地方应该同步调用，在不需要同步调用的时候尽量的进行异步的调用（而我这里所说的异步是一种基于应用的异步，是一种设计上的异步，因为J2EE目前的底层系统出了JMS是异步API以外，其它的API都是同步调用的，所以我们也就不能依赖于底层J2EE平台给我们提供异步性，我们必须从应用和设计的角度引入异步性）</p>
<h3 id="-"><a href=""></a>不具备回滚能力</h3>
<p>虽然对应用的每个版本进行回滚能力测试是非常耗时和昂贵的，但是我们应该清楚任何的业务操作都有可能失败，那么我们必须为这种失败作好准备，需要对系统的用户负责，这就要求系统一定要具有回滚的能力，当失败的时候能进行及时的回滚。（说到回滚大家可能第一时间想到的是事务的回滚，其实这里的回滚应该是一种更宽泛意义的回滚，比如我们记录每一次的失败的业务操作，这样在出现错误的时候就不是依靠于事务这种技术的手段，而是通过系统本身的回滚能力来进行回滚失败业务操作）。</p>
<h3 id="-"><a href=""></a>不记录日志</h3>
<p>日志记录对于一个成熟稳定的系统是非常重要的，如果我们不进行日志记录，那么我就很难统计系统的行为。</p>
<h3 id="-"><a href=""></a>无切分的数据库</h3>
<p>随着系统规模的慢慢变大，我们就需要打破单一数据的限制，需要对其进行切分。</p>
<h3 id="-"><a href=""></a>无切分的应用</h3>
<p>系统在规模小的时候，也许感觉不出无切分的应用带来的问题，但是在目前互联网高速发展的时代，谁能保证一个小应用在一夜或者是几夜以后还是小应用呢？说不定哪天，我们就发现应用在突如其来的访问量打击的支离破碎。因此我们就需要让我们的系统和我们一样具有生命力，要想让系统具有应付大负载的能力，这就要求我们的应用具有很好的伸缩性，这也就要求应用需要被良好的切分，只有进行了切分，我们才能对单一的部门进行伸缩，如果应用是一块死板的话，我们是没有办法进行伸缩的。就好比火车一样，如果火车设计之初就把他们设计为一体的，那么我们还怎么对火车的车厢进行裁剪？因此一个没有切分的应用是一个没有伸缩性和没有可用性的应用。</p>
<h3 id="-"><a href=""></a>将伸缩性依赖于第三方厂商</h3>
<p>如果我们的应用系统的伸缩性依赖于第三方的厂商，比如依赖于数据库集群，那么我们就为系统的伸缩性埋下了一个定时炸弹。因为只有我们自己最清楚我们自己的应用，我们应该从应用和设计的角度出发去伸缩我们的应用，而不是依赖于第三方厂商的特性。</p>
<h2 id="-olap"><a href=""></a>OLAP</h2>
<p>联机分析处理 (OLAP) 的概念最早是由关系数据库之父E.F.Codd于1993年提出的，他同时提出了关于OLAP的12条准则。OLAP的提出引起了很大的反响，OLAP作为一类产品同联机事务处理 (OLTP) 明显区分开来。</p>
<h3 id="-olap-"><a href=""></a>OLAP报表产品最大的难点在哪里？</h3>
<p>目前报表工具最大的难点不在于报表的样式（如斜线等），样式虽较繁琐但并非本质困难。最根本的难点在于业务 部门知道报表代表的真正含义，却不知道报表的数据统计模型模型；而IT部门通过理解业务部门的描述，在数据库端进行设置数据统计模型，却对报表本身所代表 的价值很难理解。
说起来有点深奥，其实并不复杂，OLAP最基本的概念只有三个：多维观察、数据钻取、CUBE运算。
关于CUBE运算：OLAP分析所需的原始数据量是非常庞大的。一个分析模型，往往会涉及数百万、数千万条数据，甚至更多；而分析模型中包含多个维数据，这些维又可以由浏览者作任意的提取组合。这样的结果就是大量的实时运算导致时间的延滞。
我们可以设想，一个1000万条记录的分析模型，如果一次提取4个维度进行组合分析，那么实际的运算次数将 达到4的1000次方的数量。这样的运算量将导致数十分钟乃至更长的等待时间。如果用户对维组合次序进行调整，或增加、或减少某些维度的话，又将是一个重 新的计算过程。
从上面的分析中，我们可以得出结论，如果不能解决OLAP运算效率问题的话，OLAP将是一个毫无实用价值的概念。那么，一个成熟产品是如何解决这个问题的呢？这涉及到OLAP中一个非常重要的技术——数据CUBE预运算。
一个OLAP模型中，度量数据和维数据我们应该事先确定，一旦两者确定下来，我们可以对数据进行预先的处理。在正式发布之前，将数据根据维进行最大
限度的聚类运算，运算中会考虑到各种维组合情况，运算结果将生成一个数据CUBE，并保存在<a href="http://www.ciw.com.cn/Search.asp?Field=Title&amp;keyword=%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank">服务器</a>上。
这样，当最终用户在调阅这个分析模型的时候，就可以直接使用这个CUBE，在此基础上根据用户的维选择和维组合进行复运算，从而达到实时响应的效果。</p>
<h2 id="-nosql-"><a href=""></a>NOSQL们背后的共有原则</h2>
<p>几个星期之前，我写了一篇文章描述了常被称作 NOSQL 的一类新型数据库的背后驱动。几个星期之前，我在Qcon上发表了一个演讲，其中，我介绍了一个可伸缩（scalable）的 twitter 应用的构建模式，在我们的讨论中，一个显而易见的问题就是数据库的可扩展性问题。要解答这个问题，我试图寻找隐藏在各种 NOSQL 之后的共有模式，并展示他们是如何解决数据库可扩展性问题的。在本文中，我将尽力勾勒出这些共有的原则。</p>
<h3 id="-"><a href=""></a>假设失效是必然发生的</h3>
<p>与我们先前通过昂贵硬件之类的手段尽力去避免失效的手段不同，NOSQL实现都建立在硬盘、机器和网络都会失效这些假设之上。我们需要认定，我们不 能彻底阻止这些时效，相反，我们需要让我们的系统能够在即使非常极端的条件下也能应付这些失效。Amazon S3 就是这种设计的一个好例子。你可以在我最近的文章 <a href="http://natishalom.typepad.com/nati_shaloms_blog/2009/11/why-existing-databases-rac-are-so-breakable.html" target="_blank">Why Existing Databases (RAC) are So Breakable!</a> 中找到进一步描述。哪里，我介绍了一些来自 <a href="http://qconsf.com/sf2009/speaker/Jason+McHugh" target="_blank">Jason McHugh</a> 的讲演的面向失效的架构设计的内容（Jason 是在 Amazon 做 S3 相关工作的高级工程师）。</p>
<h3 id="-"><a href=""></a>对数据进行分区</h3>
<p>通过对数据进行分区，我们最小化了失效带来的影响，也将读写操作的负载分布到了不同的机器上。如果一个节点失效了，只有该节点上存储的数据受到影响，而不是全部数据。</p>
<h3 id="-"><a href=""></a>保存同一数据的多个副本</h3>
<p>大部分 NOSQL 实现都基于数据副本的热备份来保证连续的高可用性。一些实现提供了 API，可以控制副本的复制，也就是说，当你存储一个对象的时候，你可以在对象级指定你希望保存的副本数。在 GigaSpaces，我们还可以立即复制一个新的副本到其他节点，甚至在必要时启动一台新机器。这让我们不比在每个节点上保存太多的数据副本，从而降低 总存储量以节约成本。</p>
<p>你还可以控制副本复制是同步还是异步的，或者两者兼有。这决定了你的集群的一致性、可用性与性能三者。对于同步复制，可以牺牲性能保障一致性和可用 性（写操作之后的任意读操作都可以保证得到相同版本的数据，即使是发生失效也会如此）。而最为常见的 GigaSpaces 的配置是同步副本到被分界点，异步存储到后端存储。</p>
<h3 id="-"><a href=""></a><strong>动态伸缩</strong></h3>
<p>要掌控不断增长的数据，大部分 NOSQL 实现提供了不停机或完全重新分区的扩展集群的方法。一个已知的处理这个问题的算法称为一致哈希。有很多种不同算法可以实现一致哈希。</p>
<p>一个算法会在节点加入或失效时通知某一分区的邻居。仅有这些节点受到这一变化的影响，而不是整个集群。有一个协议用于掌控需要在原有集群和新节点之间重新分布的数据的变换区间。</p>
<p>另一个（简单很多）的算法使用逻辑分区。在逻辑分区中，分区的数量是固定的，但分区在机器上的分布式动态的。于是，例如有两台机器和1000个逻辑 分区，那么每500个逻辑分区会放在一台机器上。当我们加入了第三台机器的时候，就成了每 333 个分区放在一台机器上了。因为逻辑分区是轻量级的（基于内存中的哈希表），分布这些逻辑分区非常容易。</p>
<p>第二种方法的优势在于它是可预测并且一致的，而使用一致哈希方法，分区之间的重新分布可能并不平稳，当一个新节点加入网络时可能会消耗更长时间。一个用户在这时寻找正在转移的数据会得到一个异常。逻辑分区方法的缺点是可伸缩性受限于逻辑分区的数量。</p>
<p>更进一步的关于这一问题的讨论，建议阅读 <a href="http://www.blogger.com/profile/03793674536997651667" target="_blank">Ricky Ho</a> 的文章 <a href="http://horicky.blogspot.com/2009/11/nosql-patterns.html" target="_blank">NOSQL Patterns</a> 。</p>
<h3 id="-"><a href=""></a>查询支持</h3>
<p>在这个方面，不同的实现有相当本质的区别。不同实现的一个共性在于哈希表中的 key/value 匹配。一些市县提供了更高级的查询支持，比如面向文档的方法，其中数据以 blob 的方式存储，关联一个键值对属性列表。这种模型是一种无预定义结构的（schema-less）存储，给一个文档增加或删除属性非常容易，无需考虑文档结 构的演进。而 GigaSpaces 支持很多 SQL 操作。如果 SQL查询没有指出特定的简直，那么这个查询就会被并行地 map 到所有的节点去，由客户端完成结果的汇聚。所有这些都是发生在幕后的，用户代码无需关注这些。</p>
<h3 id="-map-reduce-"><a href=""></a>使用 Map/Reduce 处理汇聚</h3>
<p>Map/Reduce 是一个经常被用来进行复杂分析的模型，经常会和 Hadoop 联系在一起。 map/reduce 常常被看作是并行汇聚查询的一个模式。大部分 NOSQL 实现并不提供 map/reduce 的内建支持，需要一个外部的框架来处理这些查询。对于 GigaSpaces 来说，我们在 SQL 查询中隐含了对 map/reduce 的支持，同时也显式地提供了一个称为 executors 的 API 来支持 map/reduce。在质疑模型中，你可以将代码发送到数据所在地地方，并在该节点上直接运行复杂的查询。</p>
<p>这方面的更多细节，建议阅读 <a href="http://www.blogger.com/profile/03793674536997651667" target="_blank">Ricky Ho</a> 的文章 <a href="http://horicky.blogspot.com/2009/11/query-processing-for-nosql-db.html" target="_blank">Query Processing for NOSQL DB</a> 。</p>
<h3 id="-"><a href=""></a>基于磁盘的和内存中的实现</h3>
<p>NOSQL 实现分为基于文件的方法和内存中的方法。有些实现提供了混合模型，将内存和磁盘结合使用。两类方法的最主要区别在于每 GB 成本和读写性能。</p>
<p>最近，斯坦福的一项称为“The Case for RAMCloud”的调查，对磁盘和内存两种方法给出了一些性能和成本方面的有趣的比较。总体上说，成本也是性能的一个函数。对于较低性能的实现，磁盘方 案的成本远低于基于内存的方法，而对于高性能需求的场合，内存方案则更加廉价。
内存云的显而易见的缺点就是单位容量的高成本和高能耗。对于这些指标，内存云会比纯粹的磁盘系统差50到100 倍，比使用闪存的系统差5-10倍（典型配置情况和指标参见参考文献[1]）。内存云同时还比基于磁盘和闪存的系统需要更多的机房面积。这样，如果一个应 用需要存储大量的廉价数据，不需要高速访问，那么，内存云将不是最佳选择。然而，对于高吞吐量需求的应用，内存云将更有竞争力。<strong>当 使用每次操作的成本和能量作为衡量因素的时候，内存云的效率是传统硬盘系统的 100 到 1000 倍，是闪存系统的 5-10 倍。因此，对于高吞吐量需求的系统来说，内存云不仅提供了高性能，也提供了高能源效率。同时，如果使用 DRAM 芯片提供的低功耗模式，也可以降低内存云的功耗，特别是在系统空闲的时候。</strong>此外，内存云还有一些缺点，一些内存云无法支持需要将数据在 多个数据中心之间进行数据复制。对于这些环境，更新的时延将主要取决于数据中心间数据传输的时间消耗，这就丧失了内存云的时延方面的优势。此外，跨数据中 心的数据复制会让内存云数据一致性更能难保证。不过，内存云仍然可以在夸数据中心的情况下提供低时延的读访问。</p>
<h3 id="-"><a href=""></a>仅仅是炒作?</h3>
<p>近来我见到的最多的问题就是 “NOSQL 是不是就是炒作？” 或 “NOSQL 会不会取代现在的数据库？”</p>
<p>我的回答是——NOSQL 并非始于今日。很多 NOSQL 实现都已经存在了十多年了，有很多成功案例。我相信有很多原因让它们在如今比以往更受欢迎了。首先是由于社会化网络和云计算的发展，一些原先只有很高端的 组织才会面临的问题，如今已经成为普遍问题了。其次，已有的方法已经被发现无法跟随需求一起扩展了。并且，成本的压力让很多组织需要去寻找更高性价比的方 案，并且研究证实基于普通廉价硬件的分布式存储解决方案甚至比现在的高端数据库更加可靠。（<a href="http://natishalom.typepad.com/nati_shaloms_blog/2009/11/why-existing-databases-rac-are-so-breakable.html" target="_blank">进一步阅读</a>）所有这些导致了对这类“可伸缩性优先数据库”的需求。这里，我引用 AWS团队的接触工程师、VP， <a href="http://mvdirona.com/jrh/work/" target="_blank">James Hamilton</a> 在他的文章 <a href="http://perspectives.mvdirona.com/2009/11/03/OneSizeDoesNotFitAll.aspx" target="_blank">One Size Does Not Fit Al</a>l 中的一段话：
“伸缩性优先应用是那些必须具备无限可伸缩性的应用，能够不受限制的扩展比更丰富的功能更加重要。这些应用包括很多需要高 可伸缩性的网站，如 Facebook, MySpace, Gmail, Yahoo 以及 Amazon.com。有些站点实际上使用了关系型数据库，而大部分实际上并未使用。这些服务的共性在于可扩展性比功能公众要，他们无法泡在一个单一的 RDBMS 上。”</p>
<p>总结一下——我认为，现有的 SQL 数据库可能不会很快淡出历史舞台，但同时它们也不能解决世上的所有问题。NOSQL 这个名词现在也变成了 Not Only SQL，这个变化表达了我的观点。</p>
<p><a href=""></a></p>
<h1 id="-"><a href=""></a><strong>附</strong></h1>
<p>本书不求利，只图学术之便。感谢诸位大牛写了那么多的资料，如果您不愿意被引用，学生会重写相应的章节。</p>
<p>引用网志多篇，由于涵盖太广难以一一校队，特此致歉。</p>
<h2 id="-"><a href=""></a>感谢</h2>
<p>感谢Jdon,dbanotes,infoq和Timyang.您们分享和撰写了那么多有用的资料。</p>
<h2 id="-"><a href=""></a>版本志</h2>
<p>V0.1版本在2010.2.21发布，提供了本书的主题框架
v0.2版本在2010.2.24发布，因为一些外界原因，提前发布。完善各个示例，勘误，翻译部分内容。
v0.3版本将在3月份或之后发布</p>
<h2 id="-"><a href=""></a>引用</h2>
<p><a href="http://www.jdon.com/jivejdon/thread/37999" target="_blank">http://www.jdon.com/jivejdon/thread/37999</a>
<a href="http://queue.acm.org/detail.cfm?id=1413264" target="_blank">http://queue.acm.org/detail.cfm?id=1413264</a>
<a href="http://www.dbanotes.net/arch/five-minute_rule.html" target="_blank">http://www.dbanotes.net/arch/five-minute_rule.html</a>
<a href="http://www.infoq.com/cn/news/2009/09/Do-Not-Delete-Data" target="_blank">http://www.infoq.com/cn/news/2009/09/Do-Not-Delete-Data</a>
<a href="http://www.infoq.com/cn/news/2010/02/ec2-oversubscribed" target="_blank">http://www.infoq.com/cn/news/2010/02/ec2-oversubscribed</a>
<a href="http://timyang.net/architecture/consistent-hashing-practice" target="_blank">http://timyang.net/architecture/consistent-hashing-practice</a>
<a href="http://en.wikipedia.org/wiki/Gossip_protocol" target="_blank">http://en.wikipedia.org/wiki/Gossip_protocol</a>
<a href="http://horicky.blogspot.com/2009/11/nosql-patterns.html" target="_blank">http://horicky.blogspot.com/2009/11/nosql-patterns.html</a>
<a href="http://snarfed.org/space/transactions_across_datacenters_io.html" target="_blank">http://snarfed.org/space/transactions_across_datacenters_io.html</a>
<a href="http://research.microsoft.com/en-us/um/people/lamport/pubs/lamport-paxos.pdf" target="_blank">http://research.microsoft.com/en-us/um/people/lamport/pubs/lamport-paxos.pdf</a>
<a href="http://en.wikipedia.org/wiki/Distributed_hash_table" target="_blank">http://en.wikipedia.org/wiki/Distributed_hash_table</a>
<a href="http://hi.baidu.com/knuthocean/blog/item/cca1e711221dcfcca6ef3f1d.html" target="_blank">http://hi.baidu.com/knuthocean/blog/item/cca1e711221dcfcca6ef3f1d.html</a>
<a href="http://zh.wikipedia.org/wiki/MapReduce" target="_blank">http://zh.wikipedia.org/wiki/MapReduce</a>
<a href="http://labs.google.com/papers/mapreduce.html" target="_blank">http://labs.google.com/papers/mapreduce.html</a>
<a href="http://nosql-database.org/" target="_blank">http://nosql-database.org/</a>
<a href="http://www.rackspacecloud.com/blog/2009/11/09/nosql-ecosystem/" target="_blank">http://www.rackspacecloud.com/blog/2009/11/09/nosql-ecosystem/</a>
<a href="http://www.infoq.com/cn/news/2008/02/ruby-mapreduce-skynet" target="_blank">http://www.infoq.com/cn/news/2008/02/ruby-mapreduce-skynet</a>
<a href="http://s3.amazonaws.com/AllThingsDistributed/sosp/amazon-dynamo-sosp2007.pdf" target="_blank">http://s3.amazonaws.com/AllThingsDistributed/sosp/amazon-dynamo-sosp2007.pdf</a>
<a href="http://labs.google.com/papers/bigtable.html" target="_blank">http://labs.google.com/papers/bigtable.html</a>
<a href="http://www.allthingsdistributed.com/2008/12/eventually_consistent.html" target="_blank">http://www.allthingsdistributed.com/2008/12/eventually_consistent.html</a>
<a href="http://www.rackspacecloud.com/blog/2009/11/09/nosql-ecosystem/" target="_blank">http://www.rackspacecloud.com/blog/2009/11/09/nosql-ecosystem/</a>
<a href="http://timyang.net/tech/twitter-operations/" target="_blank">http://timyang.net/tech/twitter-operations/</a>
<a href="http://blog.s135.com/read.php?394" target="_blank">http://blog.s135.com/read.php?394</a>
<a href="http://www.programmer.com.cn/1760/" target="_blank">http://www.programmer.com.cn/1760/</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql--NoSQL数据库笔谈/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql--NoSQL数据库笔谈" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-wifi--亲测win7建立wifi热点小米V4可用420已更新可连接无网络问题-机型讨论-MI/">亲测 win7建立wifi热点(小米V4可用)4.20已更新可连接无网络问题 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-wifi--亲测win7建立wifi热点小米V4可用420已更新可连接无网络问题-机型讨论-MI/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-win7-wifi-v4-4-20-miui-android-rom">亲测 win7建立wifi热点(小米V4可用)4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM</h1>
<p>请 <a href=""><strong>登录</strong></a> 后使用快捷导航
没有帐号？<a href="http://www.miui.com/member.php?mod=register" target="_blank">注册</a></p>
<h2 id="-miui-http-win7-wifi-v4-4-20-miui-android-rom_files-logo-png-http-www-miui-com-index-php-miui-"><a href="http://www.miui.com/index.php" title="MIUI官方论坛" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI官方论坛">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/logo.png)</a></h2>
<p><a href="http://passport.xiaomi.com/index.php?appid=3&amp;goto=http%3A%2F%2Fwww.miui.com%2Fextra.php%3Fmod%3Dxiaomi%2Fauthcallback%26referer%3D%2Fthread-512416-1-2.html" target="_blank">登录</a> | <a href="http://passport.xiaomi.com/user/register" target="_blank">注册</a> | <a href="http://passport.xiaomi.com/user/getpass" target="_blank">忘记密码</a></p>
<p><a href="http://www.miui.com/search.php" target="_blank">搜索</a> <a href="http://www.miui.com/" target="_blank">欢迎页</a>  <a href="http://www.miui.com/show" target="_blank">秀照片赢小米</a></p>
<ul>
<li><a href="http://www.miui.com/forum.php" target="_blank">社区首页</a></li>
<li><a href="http://www.miui.com/forum-8-1.html" target="_blank">小米手机1/1S</a> <a href=""> </a></li>
<li><a href="http://www.miui.com/forum.php?gid=19" target="_blank">综合讨论</a></li>
<li><a href="http://www.miui.com/forum.php?gid=20" target="_blank">资源专区</a></li>
<li><a href="http://www.miui.com/forum.php?mod=forumdisplay_bug&amp;fid=16" target="_blank">开发专区</a></li>
<li><a href="http://www.miui.com/download.html" target="_blank">MIUI下载</a><h3 id="-">请选择你的机型：</h3>
</li>
</ul>
<p>小米/Google/MOTO <a href="http://www.miui.com/forum-8-1.html" target="_blank">小米手机1/1S</a> <a href="http://www.miui.com/forum-191-1.html" target="_blank">小米手机2</a> <a href="http://www.miui.com/forum-126-1.html" target="_blank">Galaxy Nexus</a> <a href="http://www.miui.com/forum-23-1.html" target="_blank">Google Nexus S</a> <a href="http://www.miui.com/forum-2-1.html" target="_blank">Google Nexus One</a> <a href="http://www.miui.com/forum-193-1.html" target="_blank">Google Nexus 7</a> <a href="http://www.miui.com/forum-27-1.html" target="_blank">MOTO Defy/Defy+</a> <a href="http://www.miui.com/forum-159-1.html" target="_blank">MOTO XT910</a> <a href="http://www.miui.com/forum-199-1.html" target="_blank">MOTO Atrix 2 ME865</a> <a href="http://www.miui.com/forum-135-1.html" target="_blank">MOTO Atrix 4G ME860</a> <a href="http://www.miui.com/forum-10-1.html" target="_blank">MOTO Milestone</a> HTC <a href="http://www.miui.com/forum-120-1.html" target="_blank">HTC Sensation G14/18</a> <a href="http://www.miui.com/forum-147-1.html" target="_blank">HTC One X</a> <a href="http://www.miui.com/forum-160-1.html" target="_blank">HTC One S</a> <a href="http://www.miui.com/forum-175-1.html" target="_blank">HTC EVO 3D</a> <a href="http://www.miui.com/forum-30-1.html" target="_blank">HTC Incredible S</a> <a href="http://www.miui.com/forum-31-1.html" target="_blank">HTC Desire S</a> <a href="http://www.miui.com/forum-22-1.html" target="_blank">HTC Desire HD</a> <a href="http://www.miui.com/forum-26-1.html" target="_blank">HTC Desire Z</a> <a href="http://www.miui.com/forum-12-1.html" target="_blank">HTC HD2</a> <a href="http://www.miui.com/forum-145-1.html" target="_blank">HTC EVO 4G</a> <a href="http://www.miui.com/forum-9-1.html" target="_blank">HTC Desire</a> SAMSUNG <a href="http://www.miui.com/forum-32-1.html" target="_blank">Samsung I9100</a> <a href="http://www.miui.com/forum-133-1.html" target="_blank">Galaxy Note I9220</a> <a href="http://www.miui.com/forum-157-1.html" target="_blank">Galaxy S III I9300</a> <a href="http://www.miui.com/forum-24-1.html" target="_blank">Samsung I9000</a> <a href="http://www.miui.com/forum-25-1.html" target="_blank">Samsung T959</a> <a href="http://www.miui.com/forum-28-1.html" target="_blank">Samsung I897</a> 华为/中兴/联想/天语 <a href="http://www.miui.com/forum-123-1.html" target="_blank">华为 Honor</a> <a href="http://www.miui.com/forum-154-1.html" target="_blank">华为 Ascend P1 ﻿</a> <a href="http://www.miui.com/forum-181-1.html" target="_blank">华为 Ascend D1</a> <a href="http://www.miui.com/forum-173-1.html" target="_blank">华为 C8812</a> <a href="http://www.miui.com/forum-117-1.html" target="_blank">华为 U8800+/Pro</a> <a href="http://www.miui.com/forum-33-1.html" target="_blank">华为 U8800</a> <a href="http://www.miui.com/forum-34-1.html" target="_blank">中兴 V880</a> <a href="http://www.miui.com/forum-186-1.html" target="_blank">中兴 U970</a> <a href="http://www.miui.com/forum-131-1.html" target="_blank">联想 乐Phone</a> <a href="http://www.miui.com/forum-188-1.html" target="_blank">联想 乐pad S2005</a> <a href="http://www.miui.com/forum-197-1.html" target="_blank">天语V8 大黄蜂2</a> 其它品牌 <a href="http://www.miui.com/forum-161-1.html" target="_blank">索尼 LT26i</a> <a href="http://www.miui.com/forum-35-1.html" target="_blank">索爱 LT18i/LT15i</a> <a href="http://www.miui.com/forum-142-1.html" target="_blank">索爱 MT15i/ST18i</a> <a href="http://www.miui.com/forum-29-1.html" target="_blank">LG P990</a> <a href="http://www.miui.com/forum-201-1.html" target="_blank">LG Optimus LTE/LU6200</a> <a href="http://www.miui.com/forum-114-1.html" target="_blank">LG P970</a> <a href="http://www.miui.com/forum-184-1.html" target="_blank">OPPO finder</a> <a href="http://www.miui.com/forum-151-1.html" target="_blank">魅族 MX</a> <a href="http://www.miui.com/forum-36-1.html" target="_blank">其它机型</a></p>
<ul>
<li><a href="http://www.miui.com/home.php?mod=spacecp" target="_blank">个人资料</a></li>
<li><a href="http://www.miui.com/home.php?mod=space" target="_blank">我的空间</a></li>
<li><a href="http://www.miui.com/forum.php?mod=guide&amp;view=my" target="_blank">我的帖子</a></li>
<li><a href="http://www.miui.com/home.php?mod=space&amp;do=friend" target="_blank">我的好友</a></li>
<li><a href="http://www.miui.com/home.php?mod=space&amp;do=album" target="_blank">我的相册</a></li>
<li><a href="http://www.miui.com/home.php?mod=space&amp;do=favorite&amp;view=me" target="_blank">我的收藏</a></li>
<li><a href="http://www.miui.com/home.php?mod=medal" target="_blank">勋章中心</a></li>
<li><p><a href="http://www.miui.com/misc.php?mod=ranklist" target="_blank">热门排行</a></p>
</li>
<li><p><a href="http://www.miui.com/extra.php?mod=miuivote/index&amp;op=applyIndex" target="_blank">内测申请</a></p>
</li>
<li><a href="http://www.miui.com/extra.php?mod=signcard/index" target="_blank">四格报告</a></li>
<li><a href="http://www.miui.com/extra.php?mod=romvote/index" target="_blank">机型适配投票</a></li>
<li><a href="http://www.miui.com/ota" target="_blank">100周专题</a></li>
<li><a href="http://shao.miui.com/" target="_blank">强迫症测试</a></li>
<li><a href="http://www.miui.com/themeguider.html" target="_blank">主题文档</a>
<a href="http://www.miui.com/index.php" title="首页" target="_blank">MIUI官方论坛</a><em>›</em><a href="http://www.miui.com/forum.php" target="_blank">社区</a> <em>›</em> <a href="http://www.miui.com/forum.php?gid=1" target="_blank">机型专区</a> <em>›</em> <a href="http://www.miui.com/forum-8-1.html" target="_blank">小米手机1/1S</a> <em>›</em> <a href="http://www.miui.com/forum-50-2.html" target="_blank">机型讨论</a> <em>›</em> <a href="http://www.miui.com/thread-512416-1-1.html" target="_blank">亲测 win7建立wifi热点(小米V4可用)4.20已更新可连接无 ...</a></li>
</ul>
<p><strong>1</strong><a href="http://www.miui.com/thread-512416-2-2.html" target="_blank">2</a><a href="http://www.miui.com/thread-512416-3-2.html" target="_blank">3</a><a href="http://www.miui.com/thread-512416-4-2.html" target="_blank">4</a><a href="http://www.miui.com/thread-512416-5-2.html" target="_blank">5</a><a href="http://www.miui.com/thread-512416-6-2.html" target="_blank">6</a><a href="http://www.miui.com/thread-512416-7-2.html" target="_blank">7</a><a href="http://www.miui.com/thread-512416-8-2.html" target="_blank">8</a><a href="http://www.miui.com/thread-512416-9-2.html" target="_blank">9</a><a href="http://www.miui.com/thread-512416-10-2.html" target="_blank">10</a><a href="http://www.miui.com/thread-512416-127-2.html" target="_blank">... 127</a><a href="http://www.miui.com/thread-512416-2-2.html" target="_blank">下一页</a> <a href="http://www.miui.com/forum-50-2.html" target="_blank">返回列表</a> <a href="&quot;发新帖&quot;"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="发新帖">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/pn_post.png)</a></p>
<p>查看: 21461|回复: 1264 <a href="http://www.miui.com/forum.php?mod=viewthread&amp;action=printable&amp;tid=512416" title="打印" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="打印">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/print.png)</a> <a href="http://www.miui.com/forum.php?mod=redirect&amp;goto=nextoldset&amp;tid=512416" title="上一主题" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="上一主题">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/thread-prev.png)</a> <a href="http://www.miui.com/forum.php?mod=redirect&amp;goto=nextnewset&amp;tid=512416" title="下一主题" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="下一主题">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/thread-next.png)</a></p>
<h1 id="-http-www-miui-com-forum-php-mod-forumdisplay-fid-50-filter-typeid-typeid-40-win7-wifi-v4-4-20-http-www-miui-com-thread-512416-1-1-html-http-win7-wifi-v4-4-20-miui-android-rom_files-002-small-gif-"><a href="http://www.miui.com/forum.php?mod=forumdisplay&amp;fid=50&amp;filter=typeid&amp;typeid=40" target="_blank">[经验技巧]</a> <a href="http://www.miui.com/thread-512416-1-1.html" target="_blank">亲测 win7建立wifi热点(小米V4可用)4.20已更新可连接无网络问题</a> <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/002.small.gif)</h1>
<p> <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/hot_3.gif &quot;3 级热门&quot;) <a href="http://www.miui.com/thread-512416-1-1.html" title="复制本帖链接" target="_blank">[复制链接]</a></p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/002.gif &quot;热帖&quot;) <a href=""></a></p>
<p><a href="http://www.miui.com/space-uid-2524270.html" target="_blank">sorianne</a>
<strong><a href="http://www.miui.com/space-uid-2524270.html" target="_blank">sorianne</a></strong> <em>当前在线</em> 积分21200经验18126 米威望196 米精华1帖子<a href="http://www.miui.com/home.php?mod=space&amp;uid=2524270&amp;do=thread&amp;type=reply&amp;view=me&amp;from=space" target="_blank">1271</a>性别保密签到次数31MIUI版本2.8.24注册时间2011-8-31最后登录2012-8-29</p>
<p><a href="http://wpa.qq.com/msgrd?V=1&amp;Uin=751428582&amp;Site=MIUI%E5%AE%98%E6%96%B9%E8%AE%BA%E5%9D%9B&amp;Menu=yes" title="QQ" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="QQ">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/qq.gif)</a><a href="http://www.miui.com/home.php?mod=space&amp;uid=2524270&amp;do=profile" title="查看详细资料" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="查看详细资料">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/userinfo.gif)</a></p>
<p><a href="http://www.miui.com/space-uid-2524270.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/70_avatar_middle.jpg)</a></p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=2524270&amp;do=thread&amp;view=me&amp;from=space" target="_blank">29</a>
主题 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=2524270&amp;do=friend&amp;view=me" target="_blank">50</a>
好友 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=2524270&amp;do=profile" target="_blank">2万</a>
积分</p>
<p><em><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=usergroup&amp;gid=38" target="_blank">解答组</a></em></p>
<p>学的是工程，每天研究的是手机，兴趣爱好是足球的纯妹纸！</p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level3.gif)<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level2.gif)
积分21200机型小米手机1签到次数31MIUI版本2.8.24在线时间946 小时</p>
<p><a href="http://www.miui.com/home.php?mod=medal" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI 100周">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal_100week.png) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="技术达人">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal22.png)</a></p>
<ul>
<li><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=pm&amp;op=showmsg&amp;handlekey=showmsg_2524270&amp;touid=2524270&amp;pmid=0&amp;daterange=2&amp;pid=9372210&amp;tid=512416" title="发消息" target="_blank">发消息</a>
楼层直通车  <a href="&quot;跳转到指定楼层&quot;"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="跳转到指定楼层">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/fj_btn.png)</a> <strong><a href="http://www.miui.com/thread-512416-1-1.html" title="复制本帖链接" target="_blank">楼主</a></strong></li>
</ul>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/online_member.gif) <em>发表于 2012-4-1 22:04:49</em> |<a href="http://www.miui.com/forum.php?mod=viewthread&amp;tid=512416&amp;page=1&amp;authorid=2524270" target="_blank">只看该作者</a> |<a href="http://www.miui.com/forum.php?mod=viewthread&amp;tid=512416&amp;extra=page%3D2&amp;ordertype=1" target="_blank">倒序浏览</a></p>
<p>本帖最后由 sorianne 于 2012-5-16 21:26 编辑
<strong>写在前面：</strong>
<strong>很多同鞋在学校宿舍上网，或者上班族都是使用笔记本，一根网线一个账号一个人使用，手机明明支持wifi还要每个月去花钱包流量包，是不是很蛋疼？</strong>
<strong>今天sorianne给大家带来的这个方法适用于有无线网卡win7系统笔记本、</strong>
<strong>设置完毕后，只要是支持wifi的设备都可以使用哦。</strong>
<strong>如果有帮助到你，请给我评分支持，谢谢！</strong>
<strong>                                                       不说废话了，教程开始：</strong>
<strong>你可以开启windows 7隐藏的功能，让你的小米飞一会吧！</strong></p>
<p><strong>      一、点击开始搜索：CMD</strong>
<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="1.jpg">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/205339plv7vydhzp87vd78.jpg &quot;1.jpg&quot;)</p>
<p>2012-4-1 20:53 上传 <a href="http://www.miui.com/forum.php?mod=attachment&amp;aid=NTIwMDM0fGI4NWNmODA2fDEzNDYyNDA3ODh8MHw1MTI0MTY%3D&amp;nothumb=yes" title="1.jpg 下载次数:11" target="_blank"><strong>下载附件</strong> (1.62 KB)</a></p>
<p><a href="http://www.miui.com/api.php?mod=att_pushphone&amp;aid=520034&amp;infloat=yes&amp;handlekey=miphonepush_520034" target="_blank">发送到手机</a></p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="12.jpg">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/220245s6xlc4618w668wz1.jpg.thumb.jpg &quot;12.jpg&quot;)</p>
<p>2012-4-1 22:02 上传 <a href="http://www.miui.com/forum.php?mod=attachment&amp;aid=NTIwMTYyfDZiOTI4NmVhfDEzNDYyNDA3ODh8MHw1MTI0MTY%3D&amp;nothumb=yes" title="12.jpg 下载次数:27" target="_blank"><strong>下载附件</strong> (46.3 KB)</a></p>
<p><a href="http://www.miui.com/api.php?mod=att_pushphone&amp;aid=520162&amp;infloat=yes&amp;handlekey=miphonepush_520162" target="_blank">发送到手机</a>
<strong>二、运行命令：netsh wlan set hostednetwork mode=allow ssid=sorianne key=12345678</strong>
**<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="4_副本.jpg">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM<em>files/205341fvfhi2oqz5wmmqmw.jpg.thumb.jpg &quot;4</em>副本.jpg&quot;)</p>
<p>2012-4-1 20:53 上传 <a href="http://www.miui.com/forum.php?mod=attachment&amp;aid=NTIwMDM3fGUwZTdhMjBifDEzNDYyNDA3ODh8MHw1MTI0MTY%3D&amp;nothumb=yes" title="4_副本.jpg 下载次数:27" target="_blank"><strong>下载附件</strong> (61.75 KB)</a></p>
<p><a href="http://www.miui.com/api.php?mod=att_pushphone&amp;aid=520037&amp;infloat=yes&amp;handlekey=miphonepush_520037" target="_blank">发送到手机</a>
**</p>
<p><strong>此命令有三个参数，mode：是否启用虚拟WiFi网卡，改为disallow则为禁用 。               </strong>
<strong>ssid：无线网名称，最好用英文(以sorianne为例)。</strong></p>
<p><strong>       key：无线网密码，八个以上字符(以12345678为例)。   </strong>
<strong>  以上三个参数可以自己设置，例如只使用mode=disallow可以直接禁用虚拟Wifi网卡。</strong>
**<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="5.jpg">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/205343a1nv1oyhb8yravoy.jpg.thumb.jpg &quot;5.jpg&quot;)</p>
<p>2012-4-1 20:53 上传 <a href="http://www.miui.com/forum.php?mod=attachment&amp;aid=NTIwMDM4fDgyNTJiMzFifDEzNDYyNDA3ODh8MHw1MTI0MTY%3D&amp;nothumb=yes" title="5.jpg 下载次数:13" target="_blank"><strong>下载附件</strong> (48.96 KB)</a></p>
<p><a href="http://www.miui.com/api.php?mod=att_pushphone&amp;aid=520038&amp;infloat=yes&amp;handlekey=miphonepush_520038" target="_blank">发送到手机</a>
**</p>
<p><strong>  三、 开启成功后，网络连接中会多出一个网卡为“Microsoft Virtual WiFi Miniport Adapter”的无线连接2，为方便起见，个人将其重命名为sorianne。</strong>
<strong>四、有些win7可能找不到网络连接，在 控制面板\网络和 Internet\网络和共享中心 点左边的更改适配器设置就是网络连接。</strong>
**<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="6.5.jpg">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/211037fxbdrirw22okvndw.jpg.thumb.jpg &quot;6.5.jpg&quot;)</p>
<p>2012-4-1 21:10 上传 <a href="http://www.miui.com/forum.php?mod=attachment&amp;aid=NTIwMDg4fDg1NThhOTkyfDEzNDYyNDA3ODh8MHw1MTI0MTY%3D&amp;nothumb=yes" title="6.5.jpg 下载次数:21" target="_blank"><strong>下载附件</strong> (86.96 KB)</a></p>
<p><a href="http://www.miui.com/api.php?mod=att_pushphone&amp;aid=520088&amp;infloat=yes&amp;handlekey=miphonepush_520088" target="_blank">发送到手机</a>
**</p>
<p><strong>五、在“网络连接”窗口中，右键单击已连接到Internet的网络连接，选择“属性”→“共享”，勾上“允许其他······连接(N)”并选择“Sorianne”。确定之后，提供共享的网卡图标旁会出现“共享的”字样，表示“宽带连接”已共享至“Sorianne”**</strong>。<strong>
</strong><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="7.jpg">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/211041dfnfi4ar4kdphrf4.jpg.thumb.jpg &quot;7.jpg&quot;)</p>
<p>2012-4-1 21:10 上传 <a href="http://www.miui.com/forum.php?mod=attachment&amp;aid=NTIwMDkwfGVhYjU5YTRifDEzNDYyNDA3ODh8MHw1MTI0MTY%3D&amp;nothumb=yes" title="7.jpg 下载次数:52" target="_blank"><strong>下载附件</strong> (102.17 KB)</a></p>
<p><a href="http://www.miui.com/api.php?mod=att_pushphone&amp;aid=520090&amp;infloat=yes&amp;handlekey=miphonepush_520090" target="_blank">发送到手机</a>
<strong>
</strong>   六、  **</p>
<p><strong>继续打开记事本功能输入：**</strong>netsh wlan start hostednetwork   <strong>
</strong>ps:将start改为stop即可关闭该无线网，以后开机后要启用该无线网只需再次运行此命令即可  **</p>
<p>**<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="8.jpg">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/212604dc4d9fzjqjiiqqd0.jpg.thumb.jpg &quot;8.jpg&quot;)</p>
<p>2012-4-1 21:26 上传 <a href="http://www.miui.com/forum.php?mod=attachment&amp;aid=NTIwMTE3fDUyZWY0OWM5fDEzNDYyNDA3ODh8MHw1MTI0MTY%3D&amp;nothumb=yes" title="8.jpg 下载次数:8" target="_blank"><strong>下载附件</strong> (50.6 KB)</a></p>
<p><a href="http://www.miui.com/api.php?mod=att_pushphone&amp;aid=520117&amp;infloat=yes&amp;handlekey=miphonepush_520117" target="_blank">发送到手机</a>
<strong>
</strong><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="9.jpg">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/212606dnjvqzj0axvq0q2v.jpg.thumb.jpg &quot;9.jpg&quot;)</p>
<p>2012-4-1 21:26 上传 <a href="http://www.miui.com/forum.php?mod=attachment&amp;aid=NTIwMTE4fDU1YTVhMjUxfDEzNDYyNDA3ODh8MHw1MTI0MTY%3D&amp;nothumb=yes" title="9.jpg 下载次数:12" target="_blank"><strong>下载附件</strong> (15.24 KB)</a></p>
<p><a href="http://www.miui.com/api.php?mod=att_pushphone&amp;aid=520118&amp;infloat=yes&amp;handlekey=miphonepush_520118" target="_blank">发送到手机</a>
<strong>
</strong><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="10.jpg">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/212609kgyg5dva3vj5jcyv.jpg.thumb.jpg &quot;10.jpg&quot;)</p>
<p>2012-4-1 21:26 上传 <a href="http://www.miui.com/forum.php?mod=attachment&amp;aid=NTIwMTE5fGFmNDkxMzI3fDEzNDYyNDA3ODh8MHw1MTI0MTY%3D&amp;nothumb=yes" title="10.jpg 下载次数:14" target="_blank"><strong>下载附件</strong> (61.81 KB)</a></p>
<p><a href="http://www.miui.com/api.php?mod=att_pushphone&amp;aid=520119&amp;infloat=yes&amp;handlekey=miphonepush_520119" target="_blank">发送到手机</a>
<strong>
</strong>七、</p>
<p>游客，如果您要查看本帖隐藏内容请<a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416" target="_blank">回复</a>
**</p>
<p><strong>PS：这一步有很多童鞋反馈说，可以连接设备但是没有Internet访问权限，所以我也仔细研究了一下，可以在设备管理器里面更新一下网络适配器中的软件程序。</strong>
游客，如果您要查看本帖隐藏内容请<a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416" target="_blank">回复</a>
<strong>Sorianne     </strong>  <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9372210" title="查看全部评分" target="_blank">已有 28 人评分</a>经验 威望 <a href="">收起</a> 理由<a href="http://www.miui.com/space-uid-39590803.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/03_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-39590803.html" target="_blank">恋上悦的泪</a>+ 2  MIUI 因你更精彩！ <a href="http://www.miui.com/space-uid-10513106.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/noavatar_small.gif)</a> <a href="http://www.miui.com/space-uid-10513106.html" target="_blank">草原萧然</a>+ 1  赞 <a href="http://www.miui.com/space-uid-30459642.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/42_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-30459642.html" target="_blank">highskey</a>+ 1  真是麻烦，买一个无线mini路由器不就得了. <a href="http://www.miui.com/space-uid-2048738.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/38_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2048738.html" target="_blank">kgducd</a>+ 1  现在V4不能使用电脑热点了 <a href="http://www.miui.com/space-uid-32639806.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/06_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-32639806.html" target="_blank">幸幸福福</a>+ 1  赞一个 <a href="http://www.miui.com/space-uid-23245496.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/96_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-23245496.html" target="_blank">zhucezhaungyong</a>+ 1  支持 <a href="http://www.miui.com/space-uid-30600173.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/noavatar_small.gif)</a> <a href="http://www.miui.com/space-uid-30600173.html" target="_blank">crazyln123</a>+ 1  赞一个 <a href="http://www.miui.com/space-uid-2240551.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/51_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2240551.html" target="_blank">0619943</a>+ 4  很给力 <a href="http://www.miui.com/space-uid-2425445.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/45_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2425445.html" target="_blank">会编程的猫</a>+ 10 + 3 妹子~~ <a href="http://www.miui.com/space-uid-2588973.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/73_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2588973.html" target="_blank">小胖狐狸</a>+ 1  很给力 <a href="http://www.miui.com/space-uid-15437010.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/10_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-15437010.html" target="_blank">LOVE小蛇</a>+ 5  不错，图文并茂，顶 <a href="http://www.miui.com/space-uid-14123680.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/80_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-14123680.html" target="_blank">光光师傅</a>+ 1  解决大问题 <a href="http://www.miui.com/space-uid-2034443.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/43_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2034443.html" target="_blank">消逝の青春</a>+ 5  支持妹纸！ <a href="http://www.miui.com/space-uid-16968121.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/21_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-16968121.html" target="_blank">贝贝6810774</a>+ 3  支持美妞 <a href="http://www.miui.com/space-uid-1394841.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/41_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-1394841.html" target="_blank">无锡小包子</a>+ 3  给你加三分 <a href="http://www.miui.com/space-uid-508604.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/04_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-508604.html" target="_blank">小阳哥ag</a>+ 1  试了不行？ 我是本地连接的一根宽带 红叉在. <a href="http://www.miui.com/space-uid-184813.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/13_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-184813.html" target="_blank">团支书</a>+ 10  我很赞同 <a href="http://www.miui.com/space-uid-314418.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/18_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-314418.html" target="_blank">微醺··↗</a>+ 3  不错，加油！ <a href="http://www.miui.com/space-uid-433723.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/23_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-433723.html" target="_blank">Hey。StRiVe</a>+ 5  妹纸V5！！支持了···加油！！！！. <a href="http://www.miui.com/space-uid-468027.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/27_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-468027.html" target="_blank">xzhlksh</a>+ 5  精品文章</p>
<p>总评分: 经验 + 109  威望 + 4   <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9372210" title="查看全部评分" target="_blank">查看全部评分</a> <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewthreadmod&amp;tid=512416" title="帖子模式" target="_blank">本主题由 小墨灰 于 3 天前 提升</a></p>
<p><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=share&amp;type=thread&amp;id=512416" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="分享">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/oshr.png)分享1</a> <a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=favorite&amp;type=thread&amp;id=512416" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="收藏">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/fav.gif)收藏116</a>
如对我的解答,还有任何疑问,请点击<strong>回复</strong>,第一时间继续解答。
对我本人有任何意见或建议，请直接微博@我、<a href="http://weibo.com/316661886" target="_blank"><a href="http://weibo.com/lucy29">http://weibo.com/lucy29</a></a>
<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/113821q8y99z9s3y6hzg7h.jpg) <em><a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;reppost=9372210&amp;extra=page%3D2&amp;page=1" target="_blank">回复</a> <a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;repquote=9372210&amp;extra=page=2&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">举报</a>
<a href="http://www.miui.com/space-uid-188906.html" target="_blank">乀蒾夨De鱼</a></p>
<p><strong><a href="http://www.miui.com/space-uid-188906.html" target="_blank">乀蒾夨De鱼</a></strong> <em>当前在线</em> 积分10961经验8570 米威望6 米精华0帖子<a href="http://www.miui.com/home.php?mod=space&amp;uid=188906&amp;do=thread&amp;type=reply&amp;view=me&amp;from=space" target="_blank">2280</a>性别男签到次数58MIUI版本2.8.24注册时间2011-5-1最后登录2012-8-29</p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=188906&amp;do=profile" title="查看详细资料" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="查看详细资料">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/userinfo.gif)</a>
<a href="http://www.miui.com/space-uid-188906.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/06_avatar_middle.jpg)</a></p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=188906&amp;do=thread&amp;view=me&amp;from=space" target="_blank">10</a>
主题 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=188906&amp;do=friend&amp;view=me" target="_blank">64</a>
好友 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=188906&amp;do=profile" target="_blank">1万</a>
积分</p>
<p><em><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=usergroup&amp;gid=38" target="_blank">解答组</a></em></p>
<p>MIUI为发烧而生</p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level3.gif)<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level2.gif)</p>
<p>积分10961机型小米手机1签到次数58MIUI版本2.8.24在线时间2381 小时</p>
<p><a href="http://www.miui.com/home.php?mod=medal" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI 100周">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal_100week.png) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI俱乐部发烧友">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal29.png) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="小米手机元器件合体活动勋章">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal15.png)</a></p>
<ul>
<li><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=pm&amp;op=showmsg&amp;handlekey=showmsg_188906&amp;touid=188906&amp;pmid=0&amp;daterange=2&amp;pid=9373383&amp;tid=512416" title="发消息" target="_blank">发消息</a>
<strong><a href="http://www.miui.com/forum.php?mod=redirect&amp;goto=findpost&amp;ptid=512416&amp;pid=9373383" title="复制本帖链接" target="_blank">沙发</a></strong></li>
</ul>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/online_member.gif) <em>发表于 2012-4-1 22:06:45</em> |<a href="http://www.miui.com/forum.php?mod=viewthread&amp;tid=512416&amp;page=1&amp;authorid=188906" target="_blank">只看该作者</a></p>
<p>本帖最后由 乀蒾夨De鱼 于 2012-4-1 22:07 编辑
沙发<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/m003.gif)  <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373383" title="查看全部评分" target="_blank">已有 1 人评分</a>经验 <a href="">收起</a> 理由<a href="http://www.miui.com/space-uid-2524270.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/70_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2524270.html" target="_blank">sorianne</a>+ 5 鱼就是好~</p>
<p>总评分: 经验 + 5   <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373383" title="查看全部评分" target="_blank">查看全部评分</a> <a href="http://weibo.com/2486293870?s=6uyXnP" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/7.png)</a>
<strong>                                             如有疑问，请点击回复，我会第一时间回复</strong> <em><a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;reppost=9373383&amp;extra=page%3D2&amp;page=1" target="_blank">回复</a> <a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;repquote=9373383&amp;extra=page=2&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">举报</a></p>
<p><a href="http://www.miui.com/space-uid-2143299.html" target="_blank">my丶love</a></p>
<p><strong><a href="http://www.miui.com/space-uid-2143299.html" target="_blank">my丶love</a></strong> <em>当前在线</em> 积分11089经验7994 米威望112 米精华1帖子<a href="http://www.miui.com/home.php?mod=space&amp;uid=2143299&amp;do=thread&amp;type=reply&amp;view=me&amp;from=space" target="_blank">2509</a>性别保密签到次数32MIUI版本2.8.28注册时间2011-8-23最后登录2012-8-29</p>
<p><a href="http://wpa.qq.com/msgrd?V=1&amp;Uin=877831040&amp;Site=MIUI%E5%AE%98%E6%96%B9%E8%AE%BA%E5%9D%9B&amp;Menu=yes" title="QQ" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="QQ">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/qq.gif)</a><a href="http://www.miui.com/home.php?mod=space&amp;uid=2143299&amp;do=profile" title="查看详细资料" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="查看详细资料">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/userinfo.gif)</a>
<a href="http://www.miui.com/space-uid-2143299.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/99_avatar_middle.jpg)</a></p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=2143299&amp;do=thread&amp;view=me&amp;from=space" target="_blank">62</a>
主题 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=2143299&amp;do=friend&amp;view=me" target="_blank">69</a>
好友 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=2143299&amp;do=profile" target="_blank">1万</a>
积分</p>
<p><em><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=usergroup&amp;gid=38" target="_blank">解答组</a></em></p>
<p>寻找丶幸福</p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level3.gif)<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level2.gif)</p>
<p>积分11089机型MOTO Defy签到次数32MIUI版本2.8.28在线时间1431 小时</p>
<p><a href="http://www.miui.com/home.php?mod=medal" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI 100周">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal_100week.png) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="我爱米兔">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal25.png) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI俱乐部发烧友">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal29.png) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="技术达人">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal22.png)</a></p>
<ul>
<li><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=pm&amp;op=showmsg&amp;handlekey=showmsg_2143299&amp;touid=2143299&amp;pmid=0&amp;daterange=2&amp;pid=9373386&amp;tid=512416" title="发消息" target="_blank">发消息</a>
<strong><a href="http://www.miui.com/forum.php?mod=redirect&amp;goto=findpost&amp;ptid=512416&amp;pid=9373386" title="复制本帖链接" target="_blank">板凳</a></strong></li>
</ul>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/online_member.gif) <em>发表于 2012-4-1 22:06:47</em> |<a href="http://www.miui.com/forum.php?mod=viewthread&amp;tid=512416&amp;page=1&amp;authorid=2143299" target="_blank">只看该作者</a></p>
<p>本帖最后由 my丶love 于 2012-4-1 22:07 编辑
沙发拉出去砍了，板凳威武，支持妹纸。。  <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373386" title="查看全部评分" target="_blank">已有 1 人评分</a>经验 <a href="">收起</a> 理由<a href="http://www.miui.com/space-uid-2524270.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/70_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2524270.html" target="_blank">sorianne</a>+ 5 嘿嘿O(∩_∩)O~</p>
<p>总评分: 经验 + 5   <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373386" title="查看全部评分" target="_blank">查看全部评分</a> 做一个傻子多么好。 <em><a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;reppost=9373386&amp;extra=page%3D2&amp;page=1" target="_blank">回复</a> <a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;repquote=9373386&amp;extra=page=2&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">举报</a>
<a href="http://www.miui.com/space-uid-113409.html" target="_blank">luffy_wang</a></p>
<p><strong><a href="http://www.miui.com/space-uid-113409.html" target="_blank">luffy_wang</a></strong> <em>当前离线</em> 积分22283经验16503 米威望20 米精华21帖子<a href="http://www.miui.com/home.php?mod=space&amp;uid=113409&amp;do=thread&amp;type=reply&amp;view=me&amp;from=space" target="_blank">7566</a>性别保密签到次数62MIUI版本2.8.28注册时间2011-3-7最后登录2012-8-29</p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=113409&amp;do=profile" title="查看详细资料" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="查看详细资料">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/userinfo.gif)</a>
<a href="http://www.miui.com/space-uid-113409.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/09_avatar_middle.jpg)</a></p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=113409&amp;do=thread&amp;view=me&amp;from=space" target="_blank">29</a>
主题 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=113409&amp;do=friend&amp;view=me" target="_blank">205</a>
好友 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=113409&amp;do=profile" target="_blank">2万</a>
积分</p>
<p><em><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=usergroup&amp;gid=3" target="_blank">社区版主</a></em></p>
<p>为小米发烧~~</p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 7">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level3.gif)<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 7">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level2.gif)<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 7">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level1.gif)</p>
<p>积分22283机型小米手机1签到次数62MIUI版本2.8.28在线时间3384 小时</p>
<p><a href="http://www.miui.com/home.php?mod=medal" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI 100周">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal_100week.png) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="小米终身荣誉会员勋章">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal13.gif) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="小米手机元器件合体活动勋章">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal15.png) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="我爱米兔">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal25.png) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI俱乐部发烧友">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal29.png)</a></p>
<ul>
<li><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=pm&amp;op=showmsg&amp;handlekey=showmsg_113409&amp;touid=113409&amp;pmid=0&amp;daterange=2&amp;pid=9373726&amp;tid=512416" title="发消息" target="_blank">发消息</a>
<strong><a href="http://www.miui.com/forum.php?mod=redirect&amp;goto=findpost&amp;ptid=512416&amp;pid=9373726" title="复制本帖链接" target="_blank">地板</a></strong></li>
</ul>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/online_moderator.gif) <em>发表于 2012-4-1 22:12:53</em> |<a href="http://www.miui.com/forum.php?mod=viewthread&amp;tid=512416&amp;page=1&amp;authorid=113409" target="_blank">只看该作者</a></p>
<p>地板才是王道啊~可以跌打滚爬~  <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373726" title="查看全部评分" target="_blank">已有 1 人评分</a>经验 <a href="">收起</a> 理由<a href="http://www.miui.com/space-uid-2524270.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/70_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2524270.html" target="_blank">sorianne</a>+ 5 可爱的小灰灰~</p>
<p>总评分: 经验 + 5   <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373726" title="查看全部评分" target="_blank">查看全部评分</a> <a href="http://weibo.com/1736708811?s=6uyXnP" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/7(1).png)</a> <em><a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;reppost=9373726&amp;extra=page%3D2&amp;page=1" target="_blank">回复</a> <a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;repquote=9373726&amp;extra=page=2&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">举报</a></p>
<p><a href="http://www.miui.com/space-uid-2617535.html" target="_blank">onezhangyu521</a></p>
<p><strong><a href="http://www.miui.com/space-uid-2617535.html" target="_blank">onezhangyu521</a></strong> <em>当前离线</em> 积分26315经验17786 米威望78 米精华4帖子<a href="http://www.miui.com/home.php?mod=space&amp;uid=2617535&amp;do=thread&amp;type=reply&amp;view=me&amp;from=space" target="_blank">10692</a>性别男签到次数25MIUI版本2.8.28注册时间2011-12-10最后登录2012-8-28</p>
<p><a href="http://wpa.qq.com/msgrd?V=1&amp;Uin=282364851&amp;Site=MIUI%E5%AE%98%E6%96%B9%E8%AE%BA%E5%9D%9B&amp;Menu=yes" title="QQ" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="QQ">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/qq.gif)</a><a href="http://www.miui.com/home.php?mod=space&amp;uid=2617535&amp;do=profile" title="查看详细资料" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="查看详细资料">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/userinfo.gif)</a>
<a href="http://www.miui.com/space-uid-2617535.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/35_avatar_middle.jpg)</a></p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=2617535&amp;do=thread&amp;view=me&amp;from=space" target="_blank">716</a>
主题 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=2617535&amp;do=friend&amp;view=me" target="_blank">419</a>
好友 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=2617535&amp;do=profile" target="_blank">2万</a>
积分</p>
<p><em><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=usergroup&amp;gid=38" target="_blank">解答组</a></em></p>
<p>【BUG=求助？】求看顶置贴</p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level3.gif)<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level2.gif)</p>
<p>积分26315机型小米手机1签到次数25MIUI版本2.8.28在线时间4765 小时</p>
<p><a href="http://www.miui.com/home.php?mod=medal" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI 100周">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal_100week.png) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="技术大师">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal23.png)</a></p>
<ul>
<li><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=pm&amp;op=showmsg&amp;handlekey=showmsg_2617535&amp;touid=2617535&amp;pmid=0&amp;daterange=2&amp;pid=9373786&amp;tid=512416" title="发消息" target="_blank">发消息</a>
<strong><a href="http://www.miui.com/forum.php?mod=redirect&amp;goto=findpost&amp;ptid=512416&amp;pid=9373786" title="复制本帖链接" target="_blank"><em>5</em>/#</a></strong></li>
</ul>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/online_member.gif) <em>发表于 2012-4-1 22:13:52</em> |<a href="http://www.miui.com/forum.php?mod=viewthread&amp;tid=512416&amp;page=1&amp;authorid=2617535" target="_blank">只看该作者</a></p>
<p>前排正常中··········  <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373786" title="查看全部评分" target="_blank">已有 1 人评分</a>经验 <a href="">收起</a> 理由<a href="http://www.miui.com/space-uid-2524270.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/70_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2524270.html" target="_blank">sorianne</a>+ 5 嘿嘿O(∩_∩)O~</p>
<p>总评分: 经验 + 5   <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373786" title="查看全部评分" target="_blank">查看全部评分</a> <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/m032.gif)<strong>已经提交的帖子  请移步到提交的链接中查看进度 补充相关内容，您的配合才能使问题得到更好的解决</strong>
                                                   <strong>回复解答组,版主,或者,答复对应人
                  点击该楼层回复 ，不然别人是看不到你帖子中的回复的，造成效低，易产生误会。望周知</strong> <em><a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;reppost=9373786&amp;extra=page%3D2&amp;page=1" target="_blank">回复</a> <a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;repquote=9373786&amp;extra=page=2&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">举报</a>
<a href="http://www.miui.com/space-uid-271848.html" target="_blank">QQ20750760</a></p>
<p><strong><a href="http://www.miui.com/space-uid-271848.html" target="_blank">QQ20750760</a></strong> <em>当前离线</em> 积分3431经验2590 米威望3 米精华0帖子<a href="http://www.miui.com/home.php?mod=space&amp;uid=271848&amp;do=thread&amp;type=reply&amp;view=me&amp;from=space" target="_blank">847</a>性别男签到次数51MIUI版本2.8.17注册时间2011-6-14最后登录2012-8-26</p>
<p><a href="http://wpa.qq.com/msgrd?V=1&amp;Uin=454523957&amp;Site=MIUI%E5%AE%98%E6%96%B9%E8%AE%BA%E5%9D%9B&amp;Menu=yes" title="QQ" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="QQ">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/qq.gif)</a><a href="http://www.miui.com/home.php?mod=space&amp;uid=271848&amp;do=profile" title="查看详细资料" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="查看详细资料">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/userinfo.gif)</a>
<a href="http://www.miui.com/space-uid-271848.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/48_avatar_middle.jpg)</a></p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=271848&amp;do=thread&amp;view=me&amp;from=space" target="_blank">39</a>
主题 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=271848&amp;do=friend&amp;view=me" target="_blank">9</a>
好友 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=271848&amp;do=profile" target="_blank">3431</a>
积分</p>
<p><em><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=usergroup&amp;gid=31" target="_blank">玩机之王</a></em></p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 5">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level3.gif)<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 5">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level1.gif)</p>
<p>玩机之王, 积分 3431, 距离下一级还需 1569 积分 积分3431机型Galaxy Nexus签到次数51MIUI版本2.8.17在线时间775 小时</p>
<p><a href="http://www.miui.com/home.php?mod=medal" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI 100周">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal_100week.png) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="小米手机元器件合体活动勋章">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal15.png)</a></p>
<ul>
<li><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=pm&amp;op=showmsg&amp;handlekey=showmsg_271848&amp;touid=271848&amp;pmid=0&amp;daterange=2&amp;pid=9373795&amp;tid=512416" title="发消息" target="_blank">发消息</a>
<strong><a href="http://www.miui.com/forum.php?mod=redirect&amp;goto=findpost&amp;ptid=512416&amp;pid=9373795" title="复制本帖链接" target="_blank"><em>6</em>/#</a></strong></li>
</ul>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/online_member.gif) <em>发表于 2012-4-1 22:14:00</em> |<a href="http://www.miui.com/forum.php?mod=viewthread&amp;tid=512416&amp;page=1&amp;authorid=271848" target="_blank">只看该作者</a></p>
<p>非常实用，<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM<em>files/m034.gif)  <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373795" title="查看全部评分" target="_blank">已有 1 人评分</a>经验 <a href="">收起</a> 理由<a href="http://www.miui.com/space-uid-2524270.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/70_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2524270.html" target="_blank">sorianne</a>+ 5 嘿嘿O(∩</em>∩)O~</p>
<p>总评分: 经验 + 5   <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373795" title="查看全部评分" target="_blank">查看全部评分</a> <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/forum ... vcddwxxhv0gbzd0.jpg) <em><a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;reppost=9373795&amp;extra=page%3D2&amp;page=1" target="_blank">回复</a> <a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;repquote=9373795&amp;extra=page=2&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">举报</a></p>
<p><a href="http://www.miui.com/space-uid-14686158.html" target="_blank">tsuhv</a></p>
<p><strong><a href="http://www.miui.com/space-uid-14686158.html" target="_blank">tsuhv</a></strong> <em>当前离线</em> 积分5196经验4152 米威望11 米精华0帖子<a href="http://www.miui.com/home.php?mod=space&amp;uid=14686158&amp;do=thread&amp;type=reply&amp;view=me&amp;from=space" target="_blank">1251</a>签到次数11MIUI版本2.3.7c注册时间2012-1-28最后登录2012-8-28</p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=14686158&amp;do=profile" title="查看详细资料" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="查看详细资料">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/userinfo.gif)</a>
<a href="http://www.miui.com/space-uid-14686158.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/58_avatar_middle.jpg)</a></p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=14686158&amp;do=thread&amp;view=me&amp;from=space" target="_blank">23</a>
主题 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=14686158&amp;do=friend&amp;view=me" target="_blank">40</a>
好友 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=14686158&amp;do=profile" target="_blank">5196</a>
积分</p>
<p><em><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=usergroup&amp;gid=38" target="_blank">解答组</a></em></p>
<p>解答组</p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level3.gif)<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level2.gif)</p>
<p>积分5196机型小米手机1签到次数11MIUI版本2.3.7c在线时间617 小时</p>
<ul>
<li><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=pm&amp;op=showmsg&amp;handlekey=showmsg_14686158&amp;touid=14686158&amp;pmid=0&amp;daterange=2&amp;pid=9373858&amp;tid=512416" title="发消息" target="_blank">发消息</a>
<strong><a href="http://www.miui.com/forum.php?mod=redirect&amp;goto=findpost&amp;ptid=512416&amp;pid=9373858" title="复制本帖链接" target="_blank"><em>7</em>/#</a></strong></li>
</ul>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/online_member.gif) <em>发表于 2012-4-1 22:14:47</em> |<a href="http://www.miui.com/forum.php?mod=viewthread&amp;tid=512416&amp;page=1&amp;authorid=14686158" target="_blank">只看该作者</a></p>
<p>嗯。可以加点血！  <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373858" title="查看全部评分" target="_blank">已有 1 人评分</a>经验 <a href="">收起</a> 理由<a href="http://www.miui.com/space-uid-2524270.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/70_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2524270.html" target="_blank">sorianne</a>+ 5 嘿嘿O(∩_∩)O~</p>
<p>总评分: 经验 + 5   <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373858" title="查看全部评分" target="_blank">查看全部评分</a> 如果对我的解答有什么不清楚的地方，请点击左下角的回复按钮，否则我可能看不到哦~
<a href="http://weibo.com/u/2192587945?s=6uyXnP" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/5.png)</a> <em><a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;reppost=9373858&amp;extra=page%3D2&amp;page=1" target="_blank">回复</a> <a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;repquote=9373858&amp;extra=page=2&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">举报</a>
<a href="http://www.miui.com/space-uid-10838766.html" target="_blank">Chammo</a></p>
<p><strong><a href="http://www.miui.com/space-uid-10838766.html" target="_blank">Chammo</a></strong> <em>当前离线</em> 积分5797经验4536 米威望16 米精华2帖子<a href="http://www.miui.com/home.php?mod=space&amp;uid=10838766&amp;do=thread&amp;type=reply&amp;view=me&amp;from=space" target="_blank">1409</a>性别男签到次数9MIUI版本2.8.24注册时间2012-1-16最后登录2012-8-27</p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=10838766&amp;do=profile" title="查看详细资料" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="查看详细资料">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/userinfo.gif)</a>
<a href="http://www.miui.com/space-uid-10838766.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/66_avatar_middle.jpg)</a></p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=10838766&amp;do=thread&amp;view=me&amp;from=space" target="_blank">22</a>
主题 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=10838766&amp;do=friend&amp;view=me" target="_blank">66</a>
好友 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=10838766&amp;do=profile" target="_blank">5797</a>
积分</p>
<p><em><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=usergroup&amp;gid=32" target="_blank">玩机之皇</a></em></p>
<p>有问题请回复我...</p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level3.gif)<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level2.gif)</p>
<p>玩机之皇, 积分 5797, 距离下一级还需 14203 积分 积分5797机型HTC DHD签到次数9MIUI版本2.8.24在线时间774 小时</p>
<p><a href="http://www.miui.com/home.php?mod=medal" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI 100周">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal_100week.png)</a></p>
<ul>
<li><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=pm&amp;op=showmsg&amp;handlekey=showmsg_10838766&amp;touid=10838766&amp;pmid=0&amp;daterange=2&amp;pid=9373895&amp;tid=512416" title="发消息" target="_blank">发消息</a>
<strong><a href="http://www.miui.com/forum.php?mod=redirect&amp;goto=findpost&amp;ptid=512416&amp;pid=9373895" title="复制本帖链接" target="_blank"><em>8</em>/#</a></strong></li>
</ul>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/online_member.gif) <em>发表于 2012-4-1 22:15:17</em> |<a href="http://www.miui.com/forum.php?mod=viewthread&amp;tid=512416&amp;page=1&amp;authorid=10838766" target="_blank">只看该作者</a></p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM<em>files/m020.gif)前排都没了  <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373895" title="查看全部评分" target="_blank">已有 1 人评分</a>经验 <a href="">收起</a> 理由<a href="http://www.miui.com/space-uid-2524270.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/70_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2524270.html" target="_blank">sorianne</a>+ 5 嘿嘿O(∩</em>∩)O~</p>
<p>总评分: 经验 + 5   <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373895" title="查看全部评分" target="_blank">查看全部评分</a> 卖女孩的小火柴...采姑娘的小蘑菇
<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/113821q8y99z9s3y6hzg7h.jpg) <em><a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;reppost=9373895&amp;extra=page%3D2&amp;page=1" target="_blank">回复</a> <a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;repquote=9373895&amp;extra=page=2&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">举报</a></p>
<p><a href="http://www.miui.com/space-uid-468560.html" target="_blank">无声小五</a></p>
<p><strong><a href="http://www.miui.com/space-uid-468560.html" target="_blank">无声小五</a></strong> <em>当前离线</em> 积分5084经验3813 米威望3 米精华0帖子<a href="http://www.miui.com/home.php?mod=space&amp;uid=468560&amp;do=thread&amp;type=reply&amp;view=me&amp;from=space" target="_blank">1244</a>性别保密签到次数34MIUI版本2.8.28注册时间2011-8-17最后登录2012-8-29</p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=468560&amp;do=profile" title="查看详细资料" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="查看详细资料">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/userinfo.gif)</a>
<a href="http://www.miui.com/space-uid-468560.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/60_avatar_middle.jpg)</a></p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=468560&amp;do=thread&amp;view=me&amp;from=space" target="_blank">17</a>
主题 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=468560&amp;do=friend&amp;view=me" target="_blank">26</a>
好友 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=468560&amp;do=profile" target="_blank">5084</a>
积分</p>
<p><em><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=usergroup&amp;gid=32" target="_blank">玩机之皇</a></em></p>
<p>其实，路并没有错的，错的只是选择。</p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level3.gif)<img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 6">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level2.gif)</p>
<p>玩机之皇, 积分 5084, 距离下一级还需 14916 积分 积分5084机型小米手机1签到次数34MIUI版本2.8.28在线时间1259 小时</p>
<p><a href="http://www.miui.com/home.php?mod=medal" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI 100周">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal_100week.png)</a></p>
<ul>
<li><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=pm&amp;op=showmsg&amp;handlekey=showmsg_468560&amp;touid=468560&amp;pmid=0&amp;daterange=2&amp;pid=9373913&amp;tid=512416" title="发消息" target="_blank">发消息</a>
<strong><a href="http://www.miui.com/forum.php?mod=redirect&amp;goto=findpost&amp;ptid=512416&amp;pid=9373913" title="复制本帖链接" target="_blank"><em>9</em>/#</a></strong></li>
</ul>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/online_member.gif) <em>发表于 2012-4-1 22:15:37</em> |<a href="http://www.miui.com/forum.php?mod=viewthread&amp;tid=512416&amp;page=1&amp;authorid=468560" target="_blank">只看该作者</a></p>
<p>支持。。。。  <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373913" title="查看全部评分" target="_blank">已有 1 人评分</a>经验 <a href="">收起</a> 理由<a href="http://www.miui.com/space-uid-2524270.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/70_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2524270.html" target="_blank">sorianne</a>+ 5 嘿嘿O(∩_∩)O~</p>
<p>总评分: 经验 + 5   <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373913" title="查看全部评分" target="_blank">查看全部评分</a> 做人一定要经得起谎言，受得起敷衍，忍得住欺骗，忘得了诺言，放得下一切！ <em><a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;reppost=9373913&amp;extra=page%3D2&amp;page=1" target="_blank">回复</a> <a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;repquote=9373913&amp;extra=page=2&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">举报</a>
<a href="http://www.miui.com/space-uid-2462335.html" target="_blank">老版-王</a></p>
<p><strong><a href="http://www.miui.com/space-uid-2462335.html" target="_blank">老版-王</a></strong> <em>当前离线</em> 积分1060经验931 米威望0 米精华0帖子<a href="http://www.miui.com/home.php?mod=space&amp;uid=2462335&amp;do=thread&amp;type=reply&amp;view=me&amp;from=space" target="_blank">105</a>性别男签到次数38MIUI版本2.8.28注册时间2011-9-12最后登录2012-8-29</p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=2462335&amp;do=profile" title="查看详细资料" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="查看详细资料">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/userinfo.gif)</a>
<a href="http://www.miui.com/space-uid-2462335.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/35_avatar_middle(1).jpg)</a></p>
<p><a href="http://www.miui.com/home.php?mod=space&amp;uid=2462335&amp;do=thread&amp;view=me&amp;from=space" target="_blank">4</a>
主题 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=2462335&amp;do=friend&amp;view=me" target="_blank">1</a>
好友 
<a href="http://www.miui.com/home.php?mod=space&amp;uid=2462335&amp;do=profile" target="_blank">1060</a>
积分</p>
<p><em><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=usergroup&amp;gid=30" target="_blank">玩机大师</a></em></p>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="Rank: 4">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/star_level3.gif)</p>
<p>玩机大师, 积分 1060, 距离下一级还需 940 积分 积分1060机型小米手机1签到次数38MIUI版本2.8.28在线时间152 小时</p>
<p><a href="http://www.miui.com/home.php?mod=medal" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="MIUI 100周">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal_100week.png) <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="小米手机元器件合体活动勋章">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/medal15.png)</a></p>
<ul>
<li><a href="http://www.miui.com/home.php?mod=spacecp&amp;ac=pm&amp;op=showmsg&amp;handlekey=showmsg_2462335&amp;touid=2462335&amp;pmid=0&amp;daterange=2&amp;pid=9373979&amp;tid=512416" title="发消息" target="_blank">发消息</a>
<strong><a href="http://www.miui.com/forum.php?mod=redirect&amp;goto=findpost&amp;ptid=512416&amp;pid=9373979" title="复制本帖链接" target="_blank"><em>10</em>/#</a></strong></li>
</ul>
<p><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/online_member.gif) <em>发表于 2012-4-1 22:16:51</em> |<a href="http://www.miui.com/forum.php?mod=viewthread&amp;tid=512416&amp;page=1&amp;authorid=2462335" target="_blank">只看该作者</a></p>
<p>公司不搞WIFI 坑爹。  <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373979" title="查看全部评分" target="_blank">已有 1 人评分</a>经验 <a href="">收起</a> 理由<a href="http://www.miui.com/space-uid-2524270.html" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/70_avatar_small.jpg)</a> <a href="http://www.miui.com/space-uid-2524270.html" target="_blank">sorianne</a>+ 5 嘿嘿O(∩_∩)O~</p>
<p>总评分: 经验 + 5   <a href="http://www.miui.com/forum.php?mod=misc&amp;action=viewratings&amp;tid=512416&amp;pid=9373979" title="查看全部评分" target="_blank">查看全部评分</a> <img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/myphonesbbs_733835.jpg) <em><a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;reppost=9373979&amp;extra=page%3D2&amp;page=1" target="_blank">回复</a> <a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416&amp;repquote=9373979&amp;extra=page=2&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">举报</a>
<strong>1</strong><a href="http://www.miui.com/thread-512416-2-2.html" target="_blank">2</a><a href="http://www.miui.com/thread-512416-3-2.html" target="_blank">3</a><a href="http://www.miui.com/thread-512416-4-2.html" target="_blank">4</a><a href="http://www.miui.com/thread-512416-5-2.html" target="_blank">5</a><a href="http://www.miui.com/thread-512416-6-2.html" target="_blank">6</a><a href="http://www.miui.com/thread-512416-7-2.html" target="_blank">7</a><a href="http://www.miui.com/thread-512416-8-2.html" target="_blank">8</a><a href="http://www.miui.com/thread-512416-9-2.html" target="_blank">9</a><a href="http://www.miui.com/thread-512416-10-2.html" target="_blank">10</a><a href="http://www.miui.com/thread-512416-127-2.html" target="_blank">... 127</a><a href="http://www.miui.com/thread-512416-2-2.html" target="_blank">下一页</a><a href="http://www.miui.com/forum-50-2.html" target="_blank">返回列表</a> <a href="&quot;发新帖&quot;"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="发新帖">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/pn_post.png)</a></p>
<p><a href="http://www.miui.com/forum.php?mod=post&amp;action=reply&amp;fid=50&amp;tid=512416" target="_blank">高级模式</a></p>
<p><a href="&quot;文字加粗&quot;">B</a> <a href="&quot;设置文字颜色&quot;">Color</a> <a href="&quot;图片&quot;">Image</a> <a href="&quot;添加链接&quot;">Link</a> <a href="&quot;引用&quot;">Quote</a> <a href="&quot;代码&quot;">Code</a> <a href="">Smilies</a></p>
<p>您需要登录后才可以回帖 <a href="http://passport.xiaomi.com/index.php?appid=3&amp;goto=http%3A%2F%2Fwww.miui.com%2Fextra.php%3Fmod%3Dxiaomi%2Fauthcallback" target="_blank">登录</a> | <a href="http://passport.xiaomi.com/user/register" target="_blank">注册</a></p>
<p><strong>发表回复</strong> 回帖后跳转到最后一页</p>
<h3 id="-">浏览过的版块</h3>
<ul>
<li><a href="http://www.miui.com/forum-37-1.html" target="_blank">公告</a></li>
<li><a href="http://www.miui.com/forum-51-1.html" target="_blank">BUG反馈</a></li>
<li><a href="http://www.miui.com/forum-60-1.html" target="_blank">机型讨论</a></li>
<li><a href="http://www.miui.com/forum-1-1.html" target="_blank">机型专区</a></li>
<li><a href="http://www.miui.com/forum-170-1.html" target="_blank">机型讨论</a></li>
<li><a href="http://www.miui.com/forum-69-1.html" target="_blank">BUG反馈</a></li>
<li><a href="http://www.miui.com/forum-38-1.html" target="_blank">新功能讨论</a></li>
<li><a href="http://www.miui.com/forum-78-1.html" target="_blank">机型讨论</a></li>
<li><a href="http://www.miui.com/forum-70-1.html" target="_blank">机型讨论</a></li>
</ul>
<h3 id="miui-100-">MIUI 100周</h3>
<p>100周发布纪念</p>
<h3 id="-">技术达人</h3>
<p>技术达人</p>
<h3 id="miui-">MIUI俱乐部发烧友</h3>
<p>MIUI俱乐部发烧友</p>
<h3 id="-">小米手机元器件合体活动勋章</h3>
<p>小米求合体勋章</p>
<h3 id="-">我爱米兔</h3>
<p>我爱米兔</p>
<h3 id="-">小米终身荣誉会员勋章</h3>
<p>小米终身荣誉会员勋章</p>
<h3 id="-">技术大师</h3>
<p>技术大师</p>
<p><a href="http://www.miui.com/" target="_blank">MIUI官方网站</a> - <a href="http://www.xiaomi.com/" target="_blank">小米旗下网站</a> - <a href="http://jobs.miui.com/" target="_blank">加入小米</a> - <a href="http://www.miui.com/a-69.html" target="_blank">免责声明</a> - <a href="http://www.miui.com/forum.php?mobile=yes" target="_blank">手机版</a>
Copyright @ 2012 MIUI <a href="http://www.miitbeian.gov.cn/" target="_blank">京ICP备10046444号</a>
<a href="https://ss.knet.cn/verifyseal.dll?sn=e12033011010015827301369&amp;ct=df&amp;a=1&amp;pa=888348" target="_blank"><img src="https://kxlogo.knet.cn/seallogo.dll?kind=pic&amp;sn=e12033011010015827301369&amp;ct=df" alt="可信网站"></a>
<a href="http://www.cnzz.com/stat/website.php?web_id=2441309" title="站长统计" target="_blank"><img src="http://./亲测 win7建立wifi热点(小米V4可用" alt="">4.20已更新可连接无网络问题 - 机型讨论 - MIUI官方论坛 - 发烧友必刷的Android ROM_files/pic.gif)</a>
积分 0, 距离下一级还需 积分  回顶部</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/wifi/">wifi</a></li></span></span> | <span class="tags">Tagged <a href="/tags/wifi/" class="label label-primary">wifi</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-wifi--亲测win7建立wifi热点小米V4可用420已更新可连接无网络问题-机型讨论-MI/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-wifi--亲测win7建立wifi热点小米V4可用420已更新可连接无网络问题-机型讨论-MI" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nosql--NoSQL数据建模技术/">NoSQL 数据建模技术</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql--NoSQL数据建模技术/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="nosql-">NoSQL 数据建模技术</h1>
<div class="statcounter"><a title="web analytics" href="http://statcounter.com/" target="_blank"><img class="statcounter" src="http://c.statcounter.com/8326668/0/cccb27f2/1/" alt="web analytics" /></a></div>

<p><a href="&quot;把这个链接拖到你的Chrome收藏夹工具栏中&quot;">High一下!</a></p>
<h1 id="-coolshell-cn-http-coolshell-cn-"><a href="http://coolshell.cn/" target="_blank">酷壳 – CoolShell.cn</a></h1>
<p>享受编程和技术所带来的快乐 – <a href="http://coolshell.cn" target="_blank">http://coolshell.cn</a></p>
<ul>
<li><a href="http://coolshell.cn/" title="首页" target="_blank">首页</a></li>
<li><a href="http://coolshell.cn/featured_posts" target="_blank">推荐文章</a></li>
<li><a href="http://coolshell.cn/plugins" target="_blank">本站插件</a></li>
<li><a href="http://coolshell.cn/guestbook" target="_blank">留言小本</a></li>
<li><a href="http://coolshell.cn/about" target="_blank">关于酷壳</a></li>
<li><a href="http://coolshell.cn/haoel" target="_blank">关于陈皓</a></li>
<li><a href=""></a>
<a href="http://coolshell.cn/" title="转到首页" target="_blank">首页</a> &gt; <a href="http://coolshell.cn/category/datebase" title="查看数据库中的全部文章" target="_blank">数据库</a> &gt; NoSQL 数据建模技术</li>
</ul>
<h2 id="nosql-">NoSQL 数据建模技术</h2>
<p>2012年5月15日 <a href="http://coolshell.cn/articles/author/haoel" title="由陈皓发布" target="_blank">陈皓</a> <a href="">发表评论</a> <a href="">阅读评论</a>  30,135 人阅读    </p>
<p>全文译自墙外文章“<a href="http://highlyscalable.wordpress.com/2012/03/01/nosql-data-modeling-techniques/" target="_blank">NoSQL Data Modeling Techniques</a>”，译得不好，还请见谅。这篇文章看完之后，你可能会对NoSQL的数据结构会有些感觉。我的感觉是，关系型数据库想把一致性，完整性，索引，CRUD都干好，NoSQL只干某一种事，但是牺牲了很多别的东西。总体来说，我觉得NoSQL更适合做Cache。下面是正文——</p>
<p>NoSQL 数据库经常被用作很多非功能性的地方，如，扩展性，性能和一致性的地方。这些NoSQL的特性在理论和实践中都正在被大众广泛地研究着，研究的热点正是那些和性能分布式相关的非功能性的东西，我们都知道 <a href="http://en.wikipedia.org/wiki/CAP_theorem" target="_blank">CAP 理论</a>被很好地应用于了 NoSQL 系统中（陈皓注：CAP即，一致性(Consistency)， 可用性(Availability)， 分区容忍性(Partition tolerance)，在分布式系统中，这三个要素最多只能同时实现两个，而NoSQL一般放弃的是一致性）。但在另一方面，NoSQL的数据建模技术却因为缺乏像关系型数据库那样的基础理论没有被世人很好地研究。这篇文章从数据建模方面对NoSQL家族进行了比较，并讨论几个常见的数据建模技术。</p>
<p>要开始讨论数据建模技术，我们不得不或多或少地先系统地看一下NoSQL数据模型的成长的趋势，以此我们可以了解一些他们内在的联系。下图是NoSQL家族的进化图，我们可以看到这样的进化：Key-Value时代，BigTable时代，Document时代，全文搜索时代，和Graph数据库时代：（陈皓注：注意图中SQL说的那句话，NoSQL再这样发展下去就是SQL了，哈哈。）
<a href="http://coolshell.cn//wp-content/uploads/2012/05/overview2.png"><img src="&quot;overview&quot;" alt="">
</a>NoSQL Data Models</p>
<p>首先，我们需要注意的是SQL和关系型数据模型已存在了很长的时间，这种面向用户的自然性意味着：</p>
<ul>
<li>最终用户一般更感兴趣于数据的聚合显示，而不是分离的数据，这主要通过SQL来完成。</li>
<li>我们无法通过人手工控制数据的并发性，完整性，一致性，或是数据类型校验这些东西的。这就是为什么SQL需要在事务，二维表结构（schema）和外表联合上做很多事。</li>
</ul>
<p>另一方面，SQL可以让软件应用程序在很多情况下不需要关心数据库的数据聚合，和数据完整性和有效性进行控制。而如果我们去除了数据一致性，完整性这些东西，会对性能和分布存储有着重的帮助。正因为如此，我们才有数据模型的进化：</p>
<ul>
<li><p><strong>Key-Value 键值对存储</strong>是非常简单而强大的。下面的很多技术基本上都是基于这个技术开始发展的。但是，Key-Value有一个非常致命的问题，那就是如果我们需要查找一段范围内的key。（陈皓注：学过hash-table数据结构的人都应该知道，hash-table是非序列容器，其并不像数组，链接，队列这些有序容器，我们可以控制数据存储的顺序）。于是，有序键值 （Ordered Key-Value） 数据模型被设计出来解决这一限制，来从根本上提高数据集的问题。</p>
</li>
<li><p><strong>Ordered Key-Value 有序键值</strong>模型也非常强大，但是，其也没有对Value提供某种数据模型。通常来说，Value的模型可以由应用负责解析和存取。这种很不方便，于是出现了 BigTable类型的数据库，这个数据模型其实就是map里有map，map里再套map，一层一层套下去，也就是层层嵌套的key-value（value里又是一个key-value），这种数据库的Value主要通过“列族”（column families），列，和时间戳来控制版本。（陈皓注：关于时间戳来对数据的版本控制主要是解决数据存储并发问题，也就是所谓的乐观锁，详见《<a href="http://coolshell.cn/articles/6790.html" title="多版本并发控制(MVCC)在分布式系统中的应用" target="_blank">多版本并发控制(MVCC)在分布式系统中的应用</a>》）</p>
</li>
<li><p><strong>Document databases 文档数据库</strong> 改进了 BigTable 模型，并提供了两个有意义的改善。第一个是允许Value中有主观的模式（scheme），而不是map套map。第二个是索引。 <strong>Full Text Search Engines 全文搜索引擎</strong>可以被看作是文档数据库的一个变种，他们可以提供灵活的可变的数据模式（scheme）以及自动索引。他们之间的不同点主要是，文档数据库用字段名做索引，而全文搜索引擎用字段值做索引。</p>
</li>
<li><p><strong>Graph data models 图式数据库</strong> 可以被认为是这个进化过程中从 Ordered Key-Value 数据库发展过来的一个分支。图式数据库允许构建议图结构的数据模型。它和文档数据库有关系的原因是，它的很多实现允许value可以是一个map或是一个document。</p>
</li>
</ul>
<h3 id="nosql-">NoSQL 数据模型摘要</h3>
<p>本文剩下的章节将向你介绍数据建模的技术实现和相关模式。但是，在介绍这些技术之前，先来一段序言：</p>
<ul>
<li><p>NoSQL 数据模型设计一般从业务应用的具体数据查询入手，而不是数据间的关系：</p>
</li>
<li><p>关系型的数据模型基本上是分析数据间的结构和关系。其设计理念是： ”<strong>What answers do I have?”**</strong></p>
</li>
<li><p>NoSQL 数据模型基本上是从应用对数据的存取方式入手，如：我需要支持某种数据查询。其设计理念是<strong> ”What questions do I have?”</strong></p>
</li>
<li><p>NoSQL 数据模型设计比关系型数据库需要对数据结构和算法的更深的了解。在这篇文章中我会和大家说那些尽人皆知的数据结构，这些数据结构并不只是被NoSQL使用，但是对于NoSQL的数据模型却非常有帮助。</p>
</li>
<li><p>数据冗余和反规格化是一等公民。</p>
</li>
<li><p>关系型数据库对于处理层级数据和图式数据非常的不方便。NoSQL用来解决图式数据明显是一个非常好的解决方案，几乎所有的NoSQL数据库可以很强地解决此类问题。这就是为什么这篇文章专门拿出一章来说明层级数据模型。
下面是NoSQL的分类表，也是我用来写这篇文章时做实践的产品：</p>
</li>
<li><p>Key-Value 存储: Oracle Coherence, Redis, Kyoto Cabinet</p>
</li>
<li>类BigTable存储: Apache HBase, Apache Cassandra</li>
<li>文档数据库: MongoDB, CouchDB</li>
<li>全文索引: Apache Lucene, Apache Solr</li>
<li>图数据库: neo4j, FlockDB</li>
</ul>
<h3 id="-conceptual-techniques">概念技术 Conceptual Techniques</h3>
<p>这一节主要介绍NoSQL数据模型的基本原则。</p>
<h3 id="-1-denormalization">(1) 反规格化 Denormalization</h3>
<p>反规格化 Denormalization 可以被认为是把相同的数据拷贝到不同的文档或是表中，这样就可以简化和优化查询，或是正好适合用户的某中特别的数据模型。这篇文章中所说的绝大多数技术都或多或少地导向了这一技术。</p>
<p>总体来说，反规格化需要权衡下面这些东西：</p>
<ul>
<li><p><strong><em>查询数据量 /查询IO</em></strong> VS  <strong><em>总数据量</em></strong>。使用反规格化，一方面可以把一条查询语句所需要的所有数据组合起来放到一个地方存储。这意味着，其它不同不同查询所需要的相同的数据，需要放在别不同的地方。因此，这产生了很多冗余的数据，从而导致了数据量的增大。</p>
</li>
<li><p><strong><em>处理复杂度</em></strong> VS <strong><em>总数据量</em></strong>. 在符合范式的数据模式上进行表连接的查询，很显然会增加了查询处理的复杂度，尤其对于分布式系统来说更是。反规格化的数据模型允许我们以方便查询的方式来存构造数据结构以简化查询复杂度。</p>
</li>
</ul>
<p><strong>适用性</strong>: Key-Value Store 键值对数据库， Document Databases文档数据库， BigTable风格的数据库。</p>
<h3 id="-2-aggregates">(2) 聚合 Aggregates</h3>
<p>所有类型的NoSQL数据库都会提供灵活的Schema（数据结构，对数据格式的限制）：</p>
<ul>
<li><p>Key-Value Stores 和 Graph Databases 基本上来说不会Value的形式，所以Value可以是任意格式。这样一来，这使得我们可以任意组合一个业务实体的keys。比如，我们有一个用户帐号的业务实体，其可以被如下这些key组合起来： <em>UserID_name, UserID_email, UserID_messages</em> 等等。如果一个用户没有email或message，那么相应也不会有这样的记录。</p>
</li>
<li><p>BigTable 模型通过列集合来支持灵活的Schema，我们称之为列族（<em>column family</em>）。BigTable还可以在同一记录上出现不同的版本（通过时间戳）。</p>
</li>
<li><p>Document databases 文档数据库是一种层级式的“去Schema”的存储，虽然有些这样的数据库允许检验需要保存的数据是否满足某种Schema。</p>
</li>
</ul>
<p>灵活的Schema允许你可以用一种嵌套式的内部数据方式来存储一组有关联的业务实体（陈皓注：类似于JSON这样的数据封装格式）。这样可以为我们带来两个好处。</p>
<ul>
<li><p>最小化“一对多”关系——可以通过嵌套式的方式来存储实体，这样可以少一些表联结。</p>
</li>
<li><p>可以让内部技术上的数据存储更接近于业务实体，特别是那种混合式的业务实体。可能存于一个文档集或是一张表中。
下图示意了这两种好处。图中描给了电子商务中的商品模型（陈皓注：我记得我在“<a href="http://coolshell.cn/articles/7048.html" title="挑战无处不在" target="_blank">挑战无处不在</a>”一文中说到过电商中产品分类数据库设计的挑战）</p>
</li>
<li><p>首先，所有的商品Product都会有一个ID，Price 和 Description。</p>
</li>
<li><p>然后，我们可以知道不同的类型的商品会有不同的属性。比如，作者是书的属性，长度是牛仔裤的属性。其些属性可能是“一对多”或是“多对多”的关系，如：唱片中的曲目。</p>
</li>
<li><p>接下来，我们知道，某些业务实体不可能使用固定的类型。如：牛仔裤的属性并不是所有的牌子都有的，而且，有些名牌还会搞非常特别的属性。</p>
</li>
</ul>
<p>对于关系型数据库来说，要设计这样的数据模型并不简单，而且设计出来的绝对离优雅很远很远。而我们NoSQL中灵活的Schema允许你使用一个聚合 Aggregate (product) 可以建出所有不同种类的商品和他们的不同的属性：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/soft-schema2.png" target="_blank"><img src="&quot;soft-schema&quot;" alt=""></a></p>
<p>Entity Aggregation</p>
<p>上图中我们可以比较关系型数据库和NoSQL的差别。<strong>但是我们可以看到在数据更新上，非规格化的数据存储在性能和一致性上会有很大的影响，这就是我们需要重点注意和不得不牺牲的地方</strong>。</p>
<p><strong>适用性</strong>: Key-Value Store 键值对数据库， Document Databases文档数据库， BigTable风格的数据库。</p>
<h3 id="-3-application-side-joins">(3) 应用层联结 Application Side Joins</h3>
<p>表联结基本上不被NoSQL支持。正如我们前面所说的，NoSQL是“面向问题”而不是“面向答案”的，不支持表联结就是“面向问题”的后果。表的联结是在设计时被构造出来的，而不是在执行时建造出来的。所以，表联结在运行时是有很大开销的（陈皓注：搞过SQL表联结的都知道笛卡尔积是什么东西，大可以在参看以前酷壳的“<a href="http://coolshell.cn/articles/3463.html" title="图解SQL的Join" target="_blank">图解数据库表Joins</a>”），但是在使用了 Denormalization 和 Aggregates 技术后，我们基本不用进行表联结，如：你们使用嵌套式的数据实体。当然，如果你需要联结数据，你需要在应用层完成这个事。下面是几个主要的Use Case：</p>
<ul>
<li><p>多对多的数据实体关系——经常需要被连接或联结。</p>
</li>
<li><p>聚合 Aggregates 并不适用于数据字段经常被改变的情况。对此，我们需要把那些经常被改变的字段分到另外的表中，而在查询时我们需要联结数据。例如，我们有个Message系统可以有一个User实体，其包括了一个内嵌的Message实体。但是，如果用户不断在附加 message，那么，最好把message拆分到另一个独立的实体，但在查询时联结这User和Message这两个实体。如下图：</p>
</li>
</ul>
<p><a href="http://coolshell.cn//wp-content/uploads/2012/05/aggregates-joins.png" target="_blank"><img src="&quot;aggregates-joins&quot;" alt=""></a></p>
<p><strong>适用性</strong>: Key-Value Store 键值对数据库， Document Databases文档数据库， BigTable风格的数据库， Graph Databases 图数据库。</p>
<h3 id="-general-modeling-techniques">通用建模技术 General Modeling Techniques</h3>
<p>在本书中，我们将讨论NoSQL中各种不同的通用的数据建模技术。</p>
<h3 id="-4-atomic-aggregates">(4) 原子聚合 Atomic Aggregates</h3>
<p>很多NoSQL的数据库（并不是所有）在事务处理上都是短板。在某些情况下，他们可以通过分布式锁技术或是<a href="http://highlyscalable.wordpress.com/2012/01/07/mvcc-transactions-key-value/" title="Implementation of MVCC Transactions for Key-Value Stores" target="_blank">应用层管理的MVCC技术</a>来实现其事务性（陈皓注：可参看本站的“<a href="http://coolshell.cn/articles/6790.html" title="多版本并发控制(MVCC)在分布式系统中的应用" target="_blank">多版本并发控制(MVCC)在分布式系统中的应用</a>”）但是，通常来说只能使用聚合Aggregates技术来保证一些ACID原则。</p>
<p>这就是为什么我们的关系型数据库需要有强大的事务处理机制——因为关系型数据库的数据是被规格化存放在了不同的地方。所以，Aggregates聚合允许我们把一个业务实体存成一个文档、存成一行，存成一个key-value，这样就可以原子式的更新了：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/atomic-aggregate1.png"><img src="&quot;atomic-aggregate&quot;" alt="">
</a>Atomic Aggregates</p>
<p>当然，原子聚合 Atomic Aggregates 这种数据模型并不能实现完全意义上的事务处理，但是如果支持原子性，锁，或 test-and-set 指令，那么， Atomic Aggregates 是可以适用的。</p>
<p><strong>**适用性</strong>: **Key-Value Store 键值对数据库， Document Databases文档数据库， BigTable风格的数据库。</p>
<h3 id="-5-enumerable-keys">(5) 可枚举键 Enumerable Keys</h3>
<p>也许，对于无顺序的Key-Value最大的好处是业务实体可以被容易地hash以分区在多个服务器上。而排序了的key会把事情搞复杂，但是有些时候，一个应用能从排序key中获得很多好处，就算是数据库本身不提供这个功能。让我们来思考下email消息的数据模型：</p>
<ol>
<li>一些NoSQL的数据库提供原子计数器以允许生一些连续的ID。在这种情况下，我们可以使用 <em>userID_messageID</em> 来做为一个组合key。如果我们知道最新的message ID，就可以知道前一个message，也可能知道再前面和后面的Message。</li>
<li>Messages可以被打包。比如，每天的邮件包。这样，我们就可以对邮件按指定的时间段来遍历。</li>
</ol>
<p><strong>**</strong>适用性<strong>: **</strong>Key-Value Store 键值对数据库<strong>。</strong></p>
<h3 id="-6-dimensionality-reduction">(6) 降维 Dimensionality Reduction</h3>
<p>Dimensionality Reduction 降维是一种技术可以允许把一个多维的数据映射成一个Key-Value或是其它非多给的数据模型。</p>
<p>传统的地理位置信息系统使用一些如“四分树<a href="http://en.wikipedia.org/wiki/Quadtree" target="_blank">QuadTree</a>” 或 “<a href="http://en.wikipedia.org/wiki/R-tree" target="_blank">R-Tree</a>” 来做地理位置索引。这些数据结构的内容需要被在适当的位置更新，并且，如果数据量很大的话，操作成本会很高。另一个方法是我们可以遍历一个二维的数据结构并把其扁平化成一个列表。一个众所周知的例子是<a href="http://en.wikipedia.org/wiki/Geohash" target="_blank">Geohash</a>（地理哈希）。一个Geohash使用“之字形”的路线扫描一个2维的空间，而且遍历中的移动可以被简单地用0和1来表示其方向，然后在移动的过程中产生0/1串。下图展示了这一算法：（陈皓注：先把地图分成四份，经度为第一位，纬度为第二位，于是左边的经度是0，右边的是1，纬度也一样，上面是为1，下面的为0，这样，经纬度就可以组合成01，11，00，10这四个值，其标识了四块区域，我们可以如此不断的递归地对每个区域进行四分，然后可以得到一串1和0组成的字串，然后使用0-9，b-z 去掉（去掉a, i, l, o）这32个字母进行base32编码得到一个8个长度的编码，这就是Geohash的算法）
<a href="http://coolshell.cn//wp-content/uploads/2012/05/geohash-traversal1.png"><img src="&quot;geohash-traversal&quot;" alt="">
</a>Geohash Index</p>
<p>Geohash的最强大的功能是使用简单的位操作就可以知道两个区域间的距离，就像图中所示（陈皓：proximity框着的那两个，这个很像IP地址了）。Geohash把一个二维的坐标生生地变成了一个一维的数据模型，这就是降维技术。BigTable的降维技术参看到文章后面的 [6.1]。更多的关于Geohash和其它技术可以参看 [6.2] 和 [6.3]。</p>
<p><strong>**</strong>适用性<strong>:**</strong> Key-Value Store 键值对数据库， Document Databases文档数据库， BigTable风格的数据库。</p>
<h3 id="-7-index-table">(7) 索引表 Index Table</h3>
<p>Index Table 索引表是一个非常直白的技术，其可以你在不支持索引的数据库中得到索引的好处。BigTable是这类最重要的数据库。这需要我们维护一个有相应存取模式的特别表。例如，我们有一个主表存着用户帐号，其可以被UserID存取。某查询需要查出某个城市里所有的用户，于是我们可以加入一张表，这张表用城市做主键，所有和这个城市相关的UserID是其Value，如下所示：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/index-table.png"><img src="&quot;index-table&quot;" alt="">
</a>Index Table Example</p>
<p>可见，城市索引表的需要和对主表用户表保持一致性，因此，主表的每一个更新可能需要对索引表进行更新，不然就是一个批处理更新。无论哪个方式，这都会损伤一些性能，因为需要保持一致性。</p>
<p>Index Table 索引表可以被认为是关系型数据库中的视图的等价物。</p>
<p><strong>适用性</strong>: BigTable 数据库。</p>
<h3 id="-8-composite-key-index">(8) 键组合索引 Composite Key Index</h3>
<p>Composite key 键组合是一个很常用的技术，对此，当我们的数据库支持键排序时能得到极大的好处。Composite key组合键的拼接成为第二排序字段可以让你构建出一种多维索引，这很像我们之前说过的 Dimensionality Reduction 降维技术。例如，我们需要存取用户统计。如果我们需要根据不同的地区来统计用户的分布情况，我们可以把Key设计成这样的格式 <em>(State:City:UserID)</em>，这样一来，就使得我们可以通过State到City来按组遍历用户，特别是我们的NoSQL数据库支持在key上按区查询（如：BigTable类的系统）：
1</p>
<p>2
SELECT</p>
<p>Values</p>
<p>WHERE</p>
<p>state=</p>
<p>&quot;CA:/*&quot;</p>
<p>SELECT</p>
<p>Values</p>
<p>WHERE</p>
<p>city=</p>
<p>&quot;CA:San Francisco/*&quot;</p>
<p><a href="http://highlyscalable.files.wordpress.com/2012/03/composite-key-index.png"><img src="http://highlyscalable.files.wordpress.com/2012/03/composite-key-index.png?w=594" alt="" title="composite-key-index">
</a>Composite Key Index</p>
<p><strong>**适用性</strong>:**BigTable 数据库。</p>
<h3 id="-9-aggregation-with-composite-keys">(9) 键组合聚合 Aggregation with Composite Keys</h3>
<p>Composite keys  键组合技术并不仅仅可以用来做索引，同样可以用来区分不用的类型的数据以支持数据分组。考虑一个例子，我们有一个海量的日志数组，这个日志记录了互联网上的用户的访问来源。我们需要计算从某一网站过来的独立访客的数量，在关系型数据库中，我们可能需要下面这样的SQL查询语句：
1SELECT</p>
<p>count</p>
<p>(</p>
<p>distinct</p>
<p>(user_id))</p>
<p>FROM</p>
<p>clicks</p>
<p>GROUP</p>
<p>BY</p>
<p>site</p>
<p>我们可以在NoSQL中建立如下的数据模型：</p>
<p><a href="http://coolshell.cn//wp-content/uploads/2012/05/composite-key-collating1.png"><img src="&quot;composite-key-collating&quot;" alt="">
</a>Counting Unique Users using Composite Keys</p>
<p>这样，我们就可以把数据按UserID来排序，我们就可以很容易把同一个用户的数据（一个用户并不会产生太多的event）进行处理，去掉那些重复的站点（使用hash table或是别的什么）。另一个可选的技术是，我们可以对每一个用户建立一个数据实体，然后把其站点来源追加到这个数据实体中，当然，这样一来，数据的更新在性能相比之下会有一定损失。</p>
<p><strong>**适用性</strong>:** Ordered Key-Value Store 排序键值对数据库， BigTable风格的数据库。</p>
<hr>
<h3 id="-10-inverted-search-direct-aggregation">(10) 反转搜索 Inverted Search – 直接聚合 Direct Aggregation</h3>
<p>这个技术更多的是数据处理技术，而不是数据建模技术。尽管如此，这个技术还是会影响数据模型。这个技术最主要的想法是使用一个索引来找到满足某条件的数据，但是把数据聚合起需要使用全文搜索。还是让我们来说一个示例。还是用上面那个例子，我们有很多的日志，其中包括互联网用户和他们的访问来源。让我们假定每条记录都有一个UserID，还有用户的种类 (Men, Women, Bloggers, 等)，以及用户所在的城市，和访问过的站点。我们要干的事是，为每个用户种类找到满足某些条件（访问源，所在城市，等）的的独立用户。</p>
<p>很明显，我们需要搜索那些满足条件的用户，如果我们使用反转搜索，这会让我们把这事干得很容易，如： <em>{Category -&gt; [user IDs]}</em> 或 <em>{Site -&gt; [user IDs]}</em>。使用这样的索引， 我们可以取两个或多个UserID要的交集或并集（这个事很容易干，而且可以干得很快，如果这些UserID是排好序的）。但是，我们要按用户种类来生成报表会变得有点麻烦，因为我们用语句可能会像下面这样
1SELECT</p>
<p>count</p>
<p>(</p>
<p>distinct</p>
<p>(user_id)) ...</p>
<p>GROUP</p>
<p>BY</p>
<p>category</p>
<p>但这样的SQL很没有效率，因为category数据太多了。为了应对这个问题，我们可以建立一个直接索引 <em>{UserID -&gt; [Categories]}</em> 然后我们用它来生成报表：</p>
<p><a href="http://coolshell.cn//wp-content/uploads/2012/05/invert-direct1.png"><img src="&quot;invert-direct&quot;" alt="">
</a>Counting Unique Users using Inverse and Direct Indexes</p>
<p>最后，我们需要明白，对每个UserID的随机查询是很没有效率的。我们可以通过批查询处理来解决这个问题。这意味着，对于一些用户集，我们可以进行预处理（不同的查询条件）。</p>
<p><strong>适用性</strong>: Key-Value Store 键值对数据库， Document Databases文档数据库， BigTable风格的数据库。</p>
<h3 id="-hierarchy-modeling-techniques">层级式模型 Hierarchy Modeling Techniques</h3>
<h3 id="-11-tree-aggregation">(11) 树形聚合Tree Aggregation</h3>
<p>树形或是任意的图（需反规格化）可以被直接打成一条记录或文档存放。</p>
<ul>
<li>当树形结构被一次性取出时这会非常有效率（如：我们需要展示一个blog的树形评论）</li>
<li>搜索和任何存取这个实体都会存在问题。</li>
<li>对于大多数NoSQL的实现来说，更新数据都是很不经济的（相比起独立结点来说）
<a href="http://coolshell.cn//wp-content/uploads/2012/05/tree-aggregation.png"><img src="&quot;tree-aggregation&quot;" alt="">
</a>Tree Aggregation</li>
</ul>
<p><strong>适用性</strong>: Key-Value 键值对数据库, Document Databases 文档数据库</p>
<h3 id="-12-adjacency-lists">(12) 邻接列表 Adjacency Lists</h3>
<p>Adjacency Lists 邻接列表是一种图 – 每一个结点都是一个独立的记录，其包含了 所有的父结点或子结点。这样，我们就可以通过给定的父或子结点来进行搜索。当然，我们需要通过hop查询遍历图。这个技术在广度和深度查询，以及得到某个结点的子树上没有效率。</p>
<p><strong>适用性</strong>: Key-Value 键值对数据库, Document Databases 文档数据库</p>
<hr>
<h3 id="-13-materialized-paths">(13) Materialized Paths</h3>
<p>Materialized Paths 可以帮助避免递归遍历（如：树形结构）。这个技术也可以被认为是反规格化的一种变种。其想法是为每个结点加上父结点或子结点的标识属性，这样就可以不需要遍历就知道所有的后裔结点和祖先结点了：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/materialized-paths2.png"><img src="&quot;materialized-paths&quot;" alt="">
</a>Materialized Paths for eShop Category Hierarchy</p>
<p>这个技术对于全文搜索引擎来说非常有帮助，因为其可以允许把一个层级结构转成一个文档。上面的示图中我们可以看到所有的商品或<em>Men’s Shoes</em>下的子分类可以被一条很短的查询语句处理——只需要给定个分类名。</p>
<p>Materialized Paths 可以存储一个ID的集合，或是一堆ID拼出的字符串。后者允许你通过一个正则表达式来搜索一个特定的分支路径。下图展示了这个技术（分支的路径包括了结点本身）：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/materialized-paths-2.png"><img src="&quot;materialized-paths-2&quot;" alt="">
</a>Query Materialized Paths using RegExp</p>
<p><strong>适用性</strong>: Key-Value 键值对数据库, Document Databases 文档数据, Search Engines 搜索引擎</p>
<h3 id="-14-nested-sets">(14) 嵌套集 Nested Sets</h3>
<p><a href="http://en.wikipedia.org/wiki/Nested_set_model" target="_blank">Nested sets</a> 嵌套集是树形结构的标准技术。它被广泛地用在了关系性数据库中，它完全地适用于 Key-Value 键值对数据库 和 Document Databases 文档数据库。这个技术的想法是把叶子结点存储成一个数组，并通过使用索引的开始和结束来映射每一个非叶子结点到一个叶子结点集，就如下图所示一样：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/nested-sets.png"><img src="&quot;nested-sets&quot;" alt="">
</a>Modeling of eCommerce Catalog using Nested Sets</p>
<p>这样的数据结构对于immutable data不变的数据 有非常不错的效率，因为其点内存空间小，并且可以很快地找出所有的叶子结点而不需要树的遍历。尽管如此，在插入和更新上需要很高的性能成本，因为新的叶子结点需要大规模地更新索引。</p>
<p><strong>适用性</strong>: Key-Value Stores 键值数据库, Document Databases 文档数据库</p>
<h3 id="-15-nested-documents-flattening-numbered-field-names">(15) 嵌套文档扁平化：有限的字段名 Nested Documents Flattening: Numbered Field Names</h3>
<p>搜索引擎基本上来说和扁平文档一同工作，如：每一个文档是一个扁平的字段和值的例表。这种数据模型的用来把业务实体映射到一个文本文档上，如果你的业务实体有很复杂的内部结构，这可能会变得很有挑战。一个典型的挑战是把一个有层级的文档映映射出来。例如，文档中嵌套另一个文档。让我们看看下面的示例：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/nested-documents-1.png"><img src="&quot;nested-documents-1&quot;" alt="">
</a>Nested Documents Problem</p>
<p>上面的每一个业务实体代码一种简历。其包括了人名和一个技能列表。我把这个层级文档映射成一个文本文档，一种方法是创建 <em>Skill</em> 和 <em>Level</em> 字段。这个模型可以通过技术或是等级来搜索一个人，而上图标注的那样的组合查询则会失败。（陈皓注：因为分不清Excellent是否是Math还是Poetry上的）</p>
<p>在引用中的 [4.6] 给出了一种解决方案。其为每个字段都标上数字 <em>Skill_i</em> 和 <em>Level_i</em>，这样就可以分开搜索每一个对（下图中使用了OR来遍历查找所有可能的字段）:
<a href="http://coolshell.cn//wp-content/uploads/2012/05/nested-documents-3.png"><img src="&quot;nested-documents-3&quot;" alt="">
</a>Nested Document Modeling using Numbered Field Names</p>
<p>这样的方式根本没有扩展性，对于一些复杂的问题来说只会让代码复杂度和维护工作变大。</p>
<p><strong>适用性</strong>: Search Engines 全文搜索</p>
<h3 id="-16-nested-documents-flattening-proximity-queries">(16)嵌套文档扁平化：邻近查询 Nested Documents Flattening: Proximity Queries</h3>
<p>在附录 [4.6]中给出了这个技术用来解决扁平层次文档。它用邻近的查询来限制可被查询的单词的范围。下图中，所有的技能和等级被放在一个字段中，叫 SkillAndLevel，查询中出现的 “Excellent” 和 “Poetry” 必需一个紧跟另一个：
<a href="http://coolshell.cn//wp-content/uploads/2012/05/nested-documents-2.png"><img src="&quot;nested-documents-2&quot;" alt="">
</a>Nested Document Modeling using Proximity Queries</p>
<p>附录 [4.3] 中讲述了这个技术被用在Solr中的一个成功案例。</p>
<p><strong>适用性</strong>: Search Engines 全文搜索</p>
<h3 id="-17-batch-graph-processing">(17) 图结构批处理 Batch Graph Processing</h3>
<p>Graph databases 图数据库，如 neo4j 是一个出众的图数据库，尤其是使用一个结点来探索邻居结点，或是探索两个或少量结点前的关系。但是处理大量的图数据是很没有效率的，因为图数据库的性能和扩展性并不是其目的。分布式的图数据处理可以被 MapReduce 和 Message Passing pattern 来处理。如： <a href="http://highlyscalable.wordpress.com/2012/02/01/mapreduce-patterns/" title="MapReduce Patterns, Algorithms, and Use Cases" target="_blank">在我前一篇的文章中的那个示例</a>。这个方法可以让 Key-Value stores, Document databases, 和 BigTable-style databases 适合于处理大图。</p>
<p><strong>Applicability</strong>: Key-Value Stores, Document Databases, BigTable-style Databases</p>
<h3 id="-">参考</h3>
<p>Finally, I provide a list of useful links related to NoSQL data modeling:</p>
<ol>
<li><p>Key-Value Stores:</p>
</li>
<li><p><a href="http://www.devshed.com/c/a/MySQL/Database-Design-Using-KeyValue-Tables/" target="_blank"><a href="http://www.devshed.com/c/a/MySQL/Database-Design-Using-KeyValue-Tables/">http://www.devshed.com/c/a/MySQL/Database-Design-Using-KeyValue-Tables/</a></a></p>
</li>
<li><a href="http://antirez.com/post/Sorting-in-key-value-data-model.html" target="_blank"><a href="http://antirez.com/post/Sorting-in-key-value-data-model.htm">http://antirez.com/post/Sorting-in-key-value-data-model.htm</a></a>l</li>
<li><a href="http://stackoverflow.com/questions/3554169/difference-between-document-based-and-key-value-based-databases" target="_blank"><a href="http://stackoverflow.com/questions/3554169/difference-between-document-based-and-key-value-based-databases">http://stackoverflow.com/questions/3554169/difference-between-document-based-and-key-value-based-databases</a></a></li>
<li><a href="http://dbmsmusings.blogspot.com/2010/03/distinguishing-two-major-types-of_29.html" target="_blank"><a href="http://dbmsmusings.blogspot.com/2010/03/distinguishing-two-major-types-of_29.html">http://dbmsmusings.blogspot.com/2010/03/distinguishing-two-major-types-of_29.html</a></a></li>
<li><p>BigTable-style Databases:</p>
</li>
<li><p><a href="http://www.slideshare.net/ebenhewitt/cassandra-datamodel-4985524" target="_blank"><a href="http://www.slideshare.net/ebenhewitt/cassandra-datamodel-4985524">http://www.slideshare.net/ebenhewitt/cassandra-datamodel-4985524</a></a></p>
</li>
<li><a href="http://www.slideshare.net/mattdennis/cassandra-data-modeling" target="_blank"><a href="http://www.slideshare.net/mattdennis/cassandra-data-modeling">http://www.slideshare.net/mattdennis/cassandra-data-modeling</a></a></li>
<li><a href="http://nosql.mypopescu.com/post/17419074362/cassandra-data-modeling-examples-with-matthew-f-dennis" target="_blank"><a href="http://nosql.mypopescu.com/post/17419074362/cassandra-data-modeling-examples-with-matthew-f-dennis">http://nosql.mypopescu.com/post/17419074362/cassandra-data-modeling-examples-with-matthew-f-dennis</a></a></li>
<li><a href="http://s-expressions.com/2009/03/08/hbase-on-designing-schemas-for-column-oriented-data-stores/" target="_blank"><a href="http://s-expressions.com/2009/03/08/hbase-on-designing-schemas-for-column-oriented-data-stores/">http://s-expressions.com/2009/03/08/hbase-on-designing-schemas-for-column-oriented-data-stores/</a></a></li>
<li><a href="http://jimbojw.com/wiki/index.php?title=Understanding_Hbase_and_BigTable" target="_blank"><a href="http://jimbojw.com/wiki/index.php?title=Understanding_Hbase_and_BigTable">http://jimbojw.com/wiki/index.php?title=Understanding_Hbase_and_BigTable</a></a></li>
<li><p>Document Databases:</p>
</li>
<li><p><a href="http://www.slideshare.net/mongodb/mongodb-schema-design-richard-kreuters-mongo-berlin-preso" target="_blank"><a href="http://www.slideshare.net/mongodb/mongodb-schema-design-richard-kreuters-mongo-berlin-preso">http://www.slideshare.net/mongodb/mongodb-schema-design-richard-kreuters-mongo-berlin-preso</a></a></p>
</li>
<li><a href="http://www.michaelhamrah.com/blog/2011/08/data-modeling-at-scale-mongodb-mongoid-callbacks-and-denormalizing-data-for-efficiency/" target="_blank"><a href="http://www.michaelhamrah.com/blog/2011/08/data-modeling-at-scale-mongodb-mongoid-callbacks-and-denormalizing-data-for-efficiency/">http://www.michaelhamrah.com/blog/2011/08/data-modeling-at-scale-mongodb-mongoid-callbacks-and-denormalizing-data-for-efficiency/</a></a></li>
<li><a href="http://seancribbs.com/tech/2009/09/28/modeling-a-tree-in-a-document-database/" target="_blank"><a href="http://seancribbs.com/tech/2009/09/28/modeling-a-tree-in-a-document-database/">http://seancribbs.com/tech/2009/09/28/modeling-a-tree-in-a-document-database/</a></a></li>
<li><a href="http://www.mongodb.org/display/DOCS/Schema+Design" target="_blank"><a href="http://www.mongodb.org/display/DOCS/Schema+Design">http://www.mongodb.org/display/DOCS/Schema+Design</a></a></li>
<li><a href="http://www.mongodb.org/display/DOCS/Trees+in+MongoDB" target="_blank"><a href="http://www.mongodb.org/display/DOCS/Trees+in+MongoDB">http://www.mongodb.org/display/DOCS/Trees+in+MongoDB</a></a></li>
<li><a href="http://blog.fiesta.cc/post/11319522700/walkthrough-mongodb-data-modeling" target="_blank"><a href="http://blog.fiesta.cc/post/11319522700/walkthrough-mongodb-data-modeling">http://blog.fiesta.cc/post/11319522700/walkthrough-mongodb-data-modeling</a></a></li>
<li><p>Full Text Search Engines:</p>
</li>
<li><p><a href="http://www.searchworkings.org/blog/-/blogs/query-time-joining-in-lucene" target="_blank"><a href="http://www.searchworkings.org/blog/-/blogs/query-time-joining-in-lucene">http://www.searchworkings.org/blog/-/blogs/query-time-joining-in-lucene</a></a></p>
</li>
<li><a href="http://www.lucidimagination.com/devzone/technical-articles/solr-and-rdbms-basics-designing-your-application-best-both" target="_blank"><a href="http://www.lucidimagination.com/devzone/technical-articles/solr-and-rdbms-basics-designing-your-application-best-both">http://www.lucidimagination.com/devzone/technical-articles/solr-and-rdbms-basics-designing-your-application-best-both</a></a></li>
<li><a href="http://blog.griddynamics.com/2011/07/solr-experience-search-parent-child.html" target="_blank"><a href="http://blog.griddynamics.com/2011/07/solr-experience-search-parent-child.html">http://blog.griddynamics.com/2011/07/solr-experience-search-parent-child.html</a></a></li>
<li><a href="http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/" target="_blank"><a href="http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/">http://www.lucidimagination.com/blog/2009/07/18/the-spanquery/</a></a></li>
<li><a href="http://blog.mgm-tp.com/2011/03/non-standard-ways-of-using-lucene/" target="_blank"><a href="http://blog.mgm-tp.com/2011/03/non-standard-ways-of-using-lucene/">http://blog.mgm-tp.com/2011/03/non-standard-ways-of-using-lucene/</a></a></li>
<li><a href="http://www.slideshare.net/MarkHarwood/proposal-for-nested-document-support-in-lucene" target="_blank"><a href="http://www.slideshare.net/MarkHarwood/proposal-for-nested-document-support-in-lucene">http://www.slideshare.net/MarkHarwood/proposal-for-nested-document-support-in-lucene</a></a></li>
<li><a href="http://mysolr.com/tips/denormalized-data-structure/" target="_blank"><a href="http://mysolr.com/tips/denormalized-data-structure/">http://mysolr.com/tips/denormalized-data-structure/</a></a></li>
<li><a href="http://sujitpal.blogspot.com/2010/10/denormalizing-maps-with-lucene-payloads.html" target="_blank"><a href="http://sujitpal.blogspot.com/2010/10/denormalizing-maps-with-lucene-payloads.html">http://sujitpal.blogspot.com/2010/10/denormalizing-maps-with-lucene-payloads.html</a></a></li>
<li><a href="http://java.dzone.com/articles/hibernate-search-mapping-entit" target="_blank"><a href="http://java.dzone.com/articles/hibernate-search-mapping-entit">http://java.dzone.com/articles/hibernate-search-mapping-entit</a></a></li>
<li><p>Graph Databases:</p>
</li>
<li><p><a href="http://docs.neo4j.org/chunked/stable/tutorial-comparing-models.html" target="_blank"><a href="http://docs.neo4j.org/chunked/stable/tutorial-comparing-models.html">http://docs.neo4j.org/chunked/stable/tutorial-comparing-models.html</a></a></p>
</li>
<li><a href="http://blog.neo4j.org/2010/03/modeling-categories-in-graph-database.html" target="_blank"><a href="http://blog.neo4j.org/2010/03/modeling-categories-in-graph-database.html">http://blog.neo4j.org/2010/03/modeling-categories-in-graph-database.html</a></a></li>
<li><a href="http://skillsmatter.com/podcast/nosql/graph-modelling" target="_blank"><a href="http://skillsmatter.com/podcast/nosql/graph-modelling">http://skillsmatter.com/podcast/nosql/graph-modelling</a></a></li>
<li><a href="http://www.umiacs.umd.edu/%7Ejimmylin/publications/Lin_Schatz_MLG2010.pdf" target="_blank"><a href="http://www.umiacs.umd.edu/~jimmylin/publications/Lin_Schatz_MLG2010.pdf">http://www.umiacs.umd.edu/~jimmylin/publications/Lin_Schatz_MLG2010.pdf</a></a></li>
<li><p>Demensionality Reduction:</p>
</li>
<li><p><a href="http://www.slideshare.net/mmalone/scaling-gis-data-in-nonrelational-data-stores" target="_blank"><a href="http://www.slideshare.net/mmalone/scaling-gis-data-in-nonrelational-data-stores">http://www.slideshare.net/mmalone/scaling-gis-data-in-nonrelational-data-stores</a></a></p>
</li>
<li><a href="http://blog.notdot.net/2009/11/Damn-Cool-Algorithms-Spatial-indexing-with-Quadtrees-and-Hilbert-Curves" target="_blank"><a href="http://blog.notdot.net/2009/11/Damn-Cool-Algorithms-Spatial-indexing-with-Quadtrees-and-Hilbert-Curves">http://blog.notdot.net/2009/11/Damn-Cool-Algorithms-Spatial-indexing-with-Quadtrees-and-Hilbert-Curves</a></a></li>
<li><a href="http://www.trisis.co.uk/blog/?p=1287" target="_blank"><a href="http://www.trisis.co.uk/blog/?p=1287">http://www.trisis.co.uk/blog/?p=1287</a></a></li>
</ol>
<p>（全文完）
<strong>（转载本站文章请注明作者和出处 <a href="http://coolshell.cn/" target="_blank">酷壳 – CoolShell.cn</a> ，请勿用于任何商业用途）</strong></p>
<p>——=== <strong>访问 <a href="http://coolshell.cn/404/" target="_blank">酷壳404页面</a> 寻找遗失儿童。</strong> ===——
<a href="&quot;分享到新浪微博&quot;"></a> <a href="&quot;分享到腾讯微博&quot;"></a> <a href="&quot;分享到搜狐微博&quot;"></a> <a href="&quot;分享到网易微博&quot;"></a> <a href="&quot;分享到豆瓣&quot;"></a> <a href="&quot;分享到人人网&quot;"></a> <a href=""></a> <a href="&quot;分享到饭否&quot;"></a> <a href="&quot;分享到Twitter&quot;"></a> <a href="&quot;分享到Facebook&quot;"></a> <a href="&quot;分享到Gmail邮箱&quot;"></a> <a href="&quot;分享到LinkedIn&quot;"></a> <a href="&quot;分享到FriendFeed&quot;"></a> <a href="&quot;分享到Digg&quot;"></a> <a href="http://www.jiathis.com/share?uid=1541368" target="_blank"></a> <a href="">74</a>
分类: <a href="http://coolshell.cn/category/datebase" title="查看数据库中的全部文章" target="_blank">数据库</a> 标签: <a href="http://coolshell.cn/tag/database" target="_blank">Database</a>, <a href="http://coolshell.cn/tag/nosql" target="_blank">NoSQL</a>, <a href="http://coolshell.cn/tag/sql" target="_blank">SQL</a></p>
<p><img src="&quot;好烂啊&quot;" alt="好烂啊"><img src="&quot;有点差&quot;" alt="有点差"><img src="&quot;凑合看看&quot;" alt="凑合看看"><img src="&quot;还不错&quot;" alt="还不错"><img src="&quot;很精彩&quot;" alt="很精彩"> (<strong>10</strong> 人打了分，平均分： <strong>4.90</strong> )
<img src="&quot;Loading ...&quot;" alt="Loading ..."> Loading ...</p>
<h3 id="-">相关文章</h3>
<ul>
<li>2012年06月20日 -- <a href="http://coolshell.cn/articles/7490.html" target="_blank">性能调优攻略</a></li>
<li>2009年12月01日 -- <a href="http://coolshell.cn/articles/1889.html" target="_blank">SQL的Where语句</a></li>
<li>2012年12月10日 -- <a href="http://coolshell.cn/articles/8711.html" target="_blank">程序员疫苗：代码注入</a></li>
<li>2011年11月10日 -- <a href="http://coolshell.cn/articles/5826.html" target="_blank">千万别用MongoDB？真的吗？！</a></li>
<li>2009年11月27日 -- <a href="http://coolshell.cn/articles/1846.html" target="_blank">MySQL性能优化的最佳20+条经验</a></li>
<li>2009年04月24日 -- <a href="http://coolshell.cn/articles/652.html" target="_blank">MySQL: InnoDB 还是 MyISAM?</a></li>
<li>2010年12月31日 -- <a href="http://coolshell.cn/articles/3433.html" target="_blank">6个有用的MySQL语句</a></li>
<li>2009年06月05日 -- <a href="http://coolshell.cn/articles/962.html" target="_blank">【原创】SQL栏目树的代码</a>
<a href="http://www.zemanta.com/?wp-related-posts" target="_blank">Zemanta</a></li>
</ul>
<p><a href="">评论 (41)</a> <a href="">Trackbacks (5)</a> <a href="">发表评论</a> <a href="http://coolshell.cn/articles/7270.html/trackback" target="_blank">Trackback</a></p>
<ol>
<li><img src="" alt=""></li>
</ol>
<p>Tesla</p>
<p>2012年5月15日09:08 | <a href="">/#1</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
总算更新了，第一次占沙发</p>
<ol>
<li><img src="" alt=""></li>
</ol>
<p><a href="http://dabentu.com/" target="_blank">大笨兔</a></p>
<p>2012年5月15日09:09 | <a href="">/#2</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
文章很长，先抢个沙发，呵呵。
现在我正在自学PHP和JS。书上的
都是一些很简单的小例子，根本不会
有什么业务上的项目，对这个有点迷惑</p>
<ol>
<li><img src="" alt=""></li>
</ol>
<p><a href="http://blog.thephper.com/" target="_blank">板子</a></p>
<p>2012年5月15日09:34 | <a href="">/#3</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
好文,mark，下班后细读</p>
<ol>
<li><img src="" alt=""></li>
</ol>
<p>013231</p>
<p>2012年5月15日09:47 | <a href="">/#4</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
“时间截”應爲”時間戳”吧?</p>
<ol>
<li><img src="" alt=""></li>
</ol>
<p>wiizane</p>
<p>2012年5月15日10:43 | <a href="">/#5</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
博主雷锋啊~~</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://coolshell.cn/" target="_blank">陈皓</a></p>
<p>2012年5月15日12:22 | <a href="">/#6</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
凤姐要嫁给方舟子才是活雷锋。呵呵。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>ciel</p>
<p>2012年5月15日11:31 | <a href="">/#7</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
其实NoSQL只是SQL的re-approach吧.</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>bluishoul</p>
<p>2012年5月15日12:49 | <a href="">/#8</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
<a href="http://highlyscalable.files.wordpress.com/2012/03/aggregates-joins.png?w=594" target="_blank"><a href="http://highlyscalable.files.wordpress.com/2012/03/aggregates-joins.png?w=594">http://highlyscalable.files.wordpress.com/2012/03/aggregates-joins.png?w=594</a></a> 这个图看不到…</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://www.90blog.org/" target="_blank">90博客</a></p>
<p>2012年5月15日12:50 | <a href="">/#9</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
mark~</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://program.upc.edu.cn/kaitian" target="_blank">kaitian</a></p>
<p>2012年5月15日13:28 | <a href="">/#10</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
看过redis的代码，觉得底层的数据结构真是实现的太底层了，差一点连malloc函数都换了。 Nosql特别适合做缓存，呵呵
好文，感谢博主~~~</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>火力fire</p>
<p>2012年5月15日20:47 | <a href="">/#11</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
云计算会进一步刺激nosql的流行吗，mangodb之类的</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://chen-xiao.com/" target="_blank">chen-xiao</a></p>
<p>2012年5月15日23:19 | <a href="">/#12</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
感觉nosql就是一个带有安全保障的cache</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://hi.baidu.com/leejun_2005/home" target="_blank">june_1201</a></p>
<p>2012年5月15日23:54 | <a href="">/#13</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
额。。。楼主哪来这么多时间写这么长的文章呵~</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>YY</p>
<p>2012年5月16日14:43 | <a href="">/#14</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
<strong><a href="">bluishoul</a> :</strong><a href="http://highlyscalable.files.wordpress.com/2012/03/aggregates-joins.png?w=594" target="_blank"><a href="http://highlyscalable.files.wordpress.com/2012/03/aggregates-joins.png?w=594">http://highlyscalable.files.wordpress.com/2012/03/aggregates-joins.png?w=594</a></a> 这个图看不到…</p>
<p>(8) 键组合索引 Composite Key Index的配图…wordpress，显然被墙了</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://www.doxer.org/" target="_blank">learn linux</a></p>
<p>2012年5月16日16:21 | <a href="">/#15</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
很给力.问下,sqlite是nosql的一种吗</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://redich.com/" target="_blank">罗迦费升格</a></p>
<p>2012年5月16日17:02 | <a href="">/#16</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
刚开始以为是mysql。。。看来我最近接触mysql太多了，看花眼了</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>鸣</p>
<p>2012年5月16日19:36 | <a href="">/#17</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
这个正是我急需要的资料，正在使用mongo</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>偶系老虎</p>
<p>2012年5月16日20:58 | <a href="">/#18</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
完全没有大数据集合的使用经验和机会啊。。。真希望能参与这种工作。。。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://solf.me/" target="_blank">Solf</a></p>
<p>2012年5月16日21:20 | <a href="">/#19</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
Mark一下，虽然还是不太懂</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>阿德</p>
<p>2012年5月17日07:41 | <a href="">/#20</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
高质量， 技术细节比较清楚</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://deleted/" target="_blank">000</a></p>
<p>2012年5月17日16:32 | <a href="">/#21</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
好文章。。。。
LZ辛苦了。。。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>lcl</p>
<p>2012年5月17日20:33 | <a href="">/#22</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
图是用什么工具画的呢？很专业</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://coolshell.cn/" target="_blank">陈皓</a></p>
<p>2012年5月17日23:56 | <a href="">/#23</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
ppt</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>zukhz</p>
<p>2012年5月18日09:15 | <a href="">/#24</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
真正的干货… 好文啊…</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://imlcl.com/" target="_blank">大头龙仔</a></p>
<p>2012年5月18日11:41 | <a href="">/#25</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
有意思啊，好文！！！</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://tangzhan.li/" target="_blank">AlsoTang</a></p>
<p>2012年5月19日14:27 | <a href="">/#26</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
<a href="">@learn linux</a>
sqlite是SQL数据库，不是NoSQL的。它是个轻量级的SQL数据库。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>000</p>
<p>2012年5月19日14:59 | <a href="">/#27</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
刚开始以为是mysql。。。看来我最近接触mysql太多了，看花眼了</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://deleted/" target="_blank">000</a></p>
<p>2012年5月21日14:58 | <a href="">/#28</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
完全没有大数据集合的使用经验和机会啊。。。真希望能参与这种工作。。。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>coofucoo</p>
<p>2012年5月22日14:30 | <a href="">/#29</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
翻译的确实值得提高，看到一半直接去看英文了。
NOSQL只适合做cache有点绝对了。如果说我们平日用不到NOSQL的话很可能是我们的应用还没有需要那么高的扩展性。什么需求用什么技术，倒不是说NOSQL就解决所有问题。
NOSQL建模技术中所透露的信息实际上绝大多数还是反规范化技术。一般在企业开发时这种反规范化技术都是在性能优化时用的。这种方式可以适合企业开发主要是因为两点：
1，企业开发数据量和规模都远远小于互联网应用。
2，企业应用增长速度也往往比较缓慢，可以有时间应对。
相反互联网应用在前两条上都不成立，所以设计互联网应用时更需要经验，必须在数据建模时就考虑性能做一些反规范化处理，从而不会在未来高速增长过程中出现问题。这就又给程序员们提出了新的挑战。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://coolshell.cn/" target="_blank">陈皓</a></p>
<p>2012年5月22日16:10 | <a href="">/#30</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
期待你也能写自己的博客。另，你后面说的那两点只能说明你对企业和互联网都还不是很懂，努力哦。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://deleted/" target="_blank">000</a></p>
<p>2012年5月23日15:51 | <a href="">/#31</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
顶~~~谢谢分享！！好文</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://www.chajian8.com/" target="_blank">插件吧chajian8.com</a></p>
<p>2012年5月27日09:21 | <a href="">/#32</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
好文章，谢谢分享。。。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>Sorra</p>
<p>2012年6月7日22:44 | <a href="">/#33</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
哇，原来这篇被翻译出来了啊！我存的英文版看得有点费劲（有的逻辑连接词看不明白……）
太好了，感谢！</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://www.tltesoft.com/" target="_blank">1111111</a></p>
<p>2012年6月13日10:04 | <a href="">/#34</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
楼主辛苦了</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>jialin</p>
<p>2012年6月28日09:10 | <a href="">/#35</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
好文，大数据特火，看了该文，明白不少。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>qqloving</p>
<p>2012年7月12日18:34 | <a href="">/#36</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
好文,mark，下班后细读</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>labchy</p>
<p>2012年7月17日13:45 | <a href="">/#37</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
很有收获 谢谢分享</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>qqloving</p>
<p>2012年7月17日16:31 | <a href="">/#38</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
再看了一遍还是不是很懂。。。。。。。。。。。。。。。。。。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://jifuwenti.com/" target="_blank">肌肤问题</a></p>
<p>2012年10月17日13:32 | <a href="">/#39</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
刚刚打算用mongodb。
过来先看看建模。</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="http://jifuwenti.com/" target="_blank">帅哥恶搞</a></p>
<p>2013年3月29日16:37 | <a href="">/#40</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
挺好的，最近打算入门mongodb.感觉不难</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p><a href="https://github.com/xussen/kite" target="_blank">xusensen</a></p>
<p>2013年7月19日14:53 | <a href="">/#41</a></p>
<p><a href="">回复</a> | <a href="">引用</a>
您文中有句话【但这样的SQL很没有效率，因为category数据太多了。】
我查看了下原文【cannot be handled efficiently using an inverted index if the number of categories is big.】
在没看原文之前，我以为的意思是【SELECT count(distinct(user_id)) … GROUP BY category】这个SQL由于每个category对应的UserID值太多，造成效率差。但这里应该是指的Inverted Index的方式，不会因为UserID值太多而影响性能。
实在理解不了，后来瞄了下原文，发现对应的意思是如果category的数量多，会造成每个category都需要进行一次计算(合并)才能统计出报表
原文这句话好像没有说上面的SQL性能差，而是针对【inverted index】说的。</p>
<ol>
<li>2012年5月21日01:01 | <a href="">/#1</a></li>
</ol>
<p><a href="http://www.chinasb.org/archives/2012/05/4653.shtml" target="_blank">NoSQL 数据建模技术 | Chinasb&#39;s Blog</a></p>
<ol>
<li>2012年5月25日22:55 | <a href="">/#2</a></li>
</ol>
<p><a href="http://www.yiihsia.com/2012/05/nosql-%e6%95%b0%e6%8d%ae%e5%bb%ba%e6%a8%a1%e6%8a%80%e6%9c%af/" target="_blank">NoSQL 数据建模技术 | _yiihsia[互联网后端技术]</a></p>
<ol>
<li>2012年8月4日10:45 | <a href="">/#3</a></li>
</ol>
<p><a href="http://cache.fz-dxc.com/c23852/" target="_blank">NoSQL前传 – 关系型数据库的使用演进 – 龙猫</a></p>
<ol>
<li>2012年12月31日22:27 | <a href="">/#4</a></li>
</ol>
<p><a href="http://www.hi-yuanpeng.com/?p=259" target="_blank">转载：NoSQL 数据建模技术 | Yuan Peng`s Tech Blog</a></p>
<ol>
<li>2013年8月11日12:48 | <a href="">/#5</a></li>
</ol>
<p><a href="http://www.kaifazhe.com/database/210601.html" target="_blank">NoSQLDataModelingTechniques – 数据库 – 开发者</a>
昵称 (必填)</p>
<p>电子邮箱 (我们会为您保密) (必填)
网址</p>
<p><a href="http://coolshell.cn/comments/feed" target="_blank">订阅评论</a></p>
<p><a href="http://coolshell.cn/articles/7425.html" target="_blank">rsync 的核心算法</a> <a href="http://coolshell.cn/articles/7236.html" target="_blank">用Unix的设计思想来应对多变的需求</a></p>
<p><a href="http://coolshell.cn/feed" title="订阅这个博客的文章" target="_blank">订阅</a></p>
<ul>
<li><a href="http://fusion.google.com/add?feedurl=http://coolshell.cn/feed" title="订阅到 Google" target="_blank">Google</a></li>
<li><a href="http://reader.youdao.com/#url=http://coolshell.cn/feed" title="订阅到有道" target="_blank">有道</a></li>
<li><a href="http://www.xianguo.com/subscribe.php?url=http://coolshell.cn/feed" title="订阅到鲜果" target="_blank">鲜果</a></li>
<li><a href="http://www.zhuaxia.com/add_channel.php?url=http://coolshell.cn/feed" title="订阅到抓虾" target="_blank">抓虾</a></li>
<li><a href="http://add.my.yahoo.com/rss?url=http://coolshell.cn/feed" title="订阅到 My Yahoo!" target="_blank">My Yahoo!</a></li>
<li><a href="http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://coolshell.cn/feed" title="订阅到 newsgator" target="_blank">newsgator</a></li>
<li><a href="http://www.bloglines.com/sub/http://coolshell.cn/feed" title="订阅到 Bloglines" target="_blank">Bloglines</a></li>
<li><a href="http://inezha.com/add?url=http://coolshell.cn/feed" title="订阅到哪吒" target="_blank">哪吒</a></li>
<li><a href="http://mail.qq.com/cgi-bin/feed?u=http://coolshell.cn/feed" title="订阅到QQ Mail" target="_blank">QQ Mail</a></li>
<li><a href="http://9.douban.com/reader/subscribe?url=http://coolshell.cn/feed" title="订阅到Douban" target="_blank">Douban</a></li>
<li><a href="http://www.rojo.com/add-subscription?resource=http://coolshell.cn/feed" title="订阅到Rojo" target="_blank">Rojo</a></li>
<li><a href="http://www.pageflakes.com/subscribe.aspx?url=http://coolshell.cn/feed" title="订阅到Pageflakes" target="_blank">Pageflakes</a>
<a href="http://twitter.com/haoel/" title="Follow me!" target="_blank">Twitter</a></li>
</ul>
<h3 id="-">本站公告</h3>
<p>访问 <a href="http://coolshell.cn/404/" target="_blank">酷壳404页面</a> 寻找遗失儿童！</p>
<p>酷壳建议大家多使用RSS访问阅读（本站已经是全文输出，推荐使用cloud.feedly.com 或 digg.com）。有相关事宜欢迎电邮：haoel(at)hotmail.com。最后，感谢大家对酷壳的支持和体谅！</p>
<p><strong>感谢 <a href="http://42qu.com/" title="42区 找到给你答案的人" target="_blank">42qu.com</a> 为本站提供 <a href="http://vps.42qu.com/" title="42区虚拟主机，卖给创业的你" target="_blank">VPS</a></strong></p>
<h3 id="-">最新文章</h3>
<ul>
<li><a href="http://coolshell.cn/articles/10337.html" title="数据即代码：元驱动编程" target="_blank">数据即代码：元驱动编程</a></li>
<li><a href="http://coolshell.cn/articles/10192.html" title="数据的游戏：冰与火" target="_blank">数据的游戏：冰与火</a></li>
<li><a href="http://coolshell.cn/articles/10249.html" title="7个示例科普CPU Cache" target="_blank">7个示例科普CPU Cache</a></li>
<li><a href="http://coolshell.cn/articles/10217.html" title="加班与效率" target="_blank">加班与效率</a></li>
<li><a href="http://coolshell.cn/articles/10169.html" title="类型的本质和函数式实现" target="_blank">类型的本质和函数式实现</a></li>
<li><a href="http://coolshell.cn/articles/10115.html" title="C语言全局变量那些事儿" target="_blank">C语言全局变量那些事儿</a></li>
<li><a href="http://coolshell.cn/articles/9886.html" title="二叉树迭代器算法" target="_blank">二叉树迭代器算法</a></li>
<li><a href="http://coolshell.cn/articles/9917.html" title="Alan Cox：大教堂、市集与市议会" target="_blank">Alan Cox：大教堂、市集与市议会</a></li>
<li><a href="http://coolshell.cn/articles/9949.html" title="IoC/DIP其实是一种管理思想" target="_blank">IoC/DIP其实是一种管理思想</a></li>
<li><a href="http://coolshell.cn/articles/9859.html" title="Alan Cox：单向链表中prev指针的妙用" target="_blank">Alan Cox：单向链表中prev指针的妙用</a></li>
<li><a href="http://coolshell.cn/articles/9749.html" title="Javascript 装载和执行" target="_blank">Javascript 装载和执行</a></li>
<li><a href="http://coolshell.cn/articles/9703.html" title="无锁HashMap的原理与实现" target="_blank">无锁HashMap的原理与实现</a></li>
<li><a href="http://coolshell.cn/articles/9666.html" title="浏览器的渲染原理简介" target="_blank">浏览器的渲染原理简介</a></li>
<li><a href="http://coolshell.cn/articles/9606.html" title="疫苗：Java HashMap的死循环" target="_blank">疫苗：Java HashMap的死循环</a></li>
<li><a href="http://coolshell.cn/articles/9543.html" title="“C++的数组不支持多态”？" target="_blank">“C++的数组不支持多态”？</a></li>
<li><a href="http://coolshell.cn/articles/9410.html" title="Unix考古记：一个“遗失”的shell" target="_blank">Unix考古记：一个“遗失”的shell</a></li>
<li><a href="http://coolshell.cn/articles/9508.html" title="PFIF网上寻人协议" target="_blank">PFIF网上寻人协议</a></li>
<li><a href="http://coolshell.cn/articles/9308.html" title="“作环保的程序员，从不用百度开始”" target="_blank">“作环保的程序员，从不用百度开始”</a></li>
<li><a href="http://coolshell.cn/articles/9156.html" title="《Rework》摘录及感想" target="_blank">《Rework》摘录及感想</a></li>
<li><a href="http://coolshell.cn/articles/9229.html" title="实例分析Java Class的文件结构" target="_blank">实例分析Java Class的文件结构</a></li>
<li><a href="http://coolshell.cn/articles/9169.html" title="并发框架Disruptor译文" target="_blank">并发框架Disruptor译文</a></li>
<li><a href="http://coolshell.cn/articles/9104.html" title="sed 简明教程" target="_blank">sed 简明教程</a></li>
<li><a href="http://coolshell.cn/articles/9070.html" title="AWK 简明教程" target="_blank">AWK 简明教程</a></li>
<li><a href="http://coolshell.cn/articles/8990.html" title="Linus：利用二级指针删除单向链表" target="_blank">Linus：利用二级指针删除单向链表</a></li>
<li><a href="http://coolshell.cn/articles/8961.html" title="从面向对象的设计模式看软件设计" target="_blank">从面向对象的设计模式看软件设计</a></li>
<li><a href="http://coolshell.cn/articles/8883.html" title="应该知道的Linux技巧" target="_blank">应该知道的Linux技巧</a></li>
<li><a href="http://coolshell.cn/articles/8790.html" title="程序算法与人生选择" target="_blank">程序算法与人生选择</a></li>
<li><a href="http://coolshell.cn/articles/8767.html" title="Web工程师的工具箱" target="_blank">Web工程师的工具箱</a></li>
<li><a href="http://coolshell.cn/articles/8745.html" title="如此理解面向对象编程" target="_blank">如此理解面向对象编程</a></li>
<li><a href="http://coolshell.cn/articles/8711.html" title="程序员疫苗：代码注入" target="_blank">程序员疫苗：代码注入</a></li>
</ul>
<h3 id="-">全站热门</h3>
<ul>
<li><a href="http://coolshell.cn/articles/4990.html" title="程序员技术练级攻略 - 320,838 人阅读" target="_blank">程序员技术练级攻略</a></li>
<li><a href="http://coolshell.cn/articles/5426.html" title="简明 Vim 练级攻略 - 240,730 人阅读" target="_blank">简明 Vim 练级攻略</a></li>
<li><a href="http://coolshell.cn/articles/4102.html" title="如何学好C语言 - 119,709 人阅读" target="_blank">如何学好C语言</a></li>
<li><a href="http://coolshell.cn/articles/914.html" title="6个变态的C语言Hello World程序 - 114,605 人阅读" target="_blank">6个变态的C语言Hello World程序</a></li>
<li><a href="http://coolshell.cn/articles/6470.html" title="由12306.cn谈谈网站性能技术 - 94,388 人阅读" target="_blank">由12306.cn谈谈网站性能技术</a></li>
<li><a href="http://coolshell.cn/articles/8883.html" title="应该知道的Linux技巧 - 92,102 人阅读" target="_blank">应该知道的Linux技巧</a></li>
<li><a href="http://coolshell.cn/articles/2250.html" title="“21天教你学会C++” - 90,817 人阅读" target="_blank">“21天教你学会C++”</a></li>
<li><a href="http://coolshell.cn/articles/3549.html" title="Android将允许纯C/C++开发应用 - 89,548 人阅读" target="_blank">Android将允许纯C/C++开发应用</a></li>
<li><a href="http://coolshell.cn/articles/1870.html" title="我是怎么招聘程序员的 - 88,447 人阅读" target="_blank">我是怎么招聘程序员的</a></li>
<li><a href="http://coolshell.cn/articles/7186.html" title="做个环保主义的程序员 - 87,956 人阅读" target="_blank">做个环保主义的程序员</a></li>
<li><a href="http://coolshell.cn/articles/9308.html" title="“作环保的程序员，从不用百度开始” - 83,607 人阅读" target="_blank">“作环保的程序员，从不用百度开始”</a></li>
<li><a href="http://coolshell.cn/articles/7829.html" title="28个Unix/Linux的命令行神器 - 76,707 人阅读" target="_blank">28个Unix/Linux的命令行神器</a></li>
<li><a href="http://coolshell.cn/articles/2287.html" title="C++ 程序员自信心曲线图 - 71,933 人阅读" target="_blank">C++ 程序员自信心曲线图</a></li>
<li><a href="http://coolshell.cn/articles/1391.html" title="编程真难啊 - 71,709 人阅读" target="_blank">编程真难啊</a></li>
<li><a href="http://coolshell.cn/articles/6043.html" title="Web开发中需要了解的东西 - 70,799 人阅读" target="_blank">Web开发中需要了解的东西</a></li>
<li><a href="http://coolshell.cn/articles/5701.html" title="SteveY对Amazon和Google平台的吐槽 - 70,083 人阅读" target="_blank">SteveY对Amazon和Google平台的吐槽</a></li>
<li><a href="http://coolshell.cn/articles/355.html" title="20本最好的Linux免费书籍 - 69,854 人阅读" target="_blank">20本最好的Linux免费书籍</a></li>
<li><a href="http://coolshell.cn/articles/4758.html" title="如何写出无法维护的代码 - 65,853 人阅读" target="_blank">如何写出无法维护的代码</a></li>
<li><a href="http://coolshell.cn/articles/8790.html" title="程序算法与人生选择 - 64,485 人阅读" target="_blank">程序算法与人生选择</a></li>
<li><a href="http://coolshell.cn/articles/2058.html" title="各种流行的编程风格 - 63,819 人阅读" target="_blank">各种流行的编程风格</a></li>
<li><a href="http://coolshell.cn/articles/3008.html" title="Windows编程革命简史 - 62,918 人阅读" target="_blank">Windows编程革命简史</a></li>
<li><a href="http://coolshell.cn/articles/4119.html" title="如何学好C++语言 - 62,888 人阅读" target="_blank">如何学好C++语言</a></li>
<li><a href="http://coolshell.cn/articles/5761.html" title="深入理解C语言 - 62,112 人阅读" target="_blank">深入理解C语言</a></li>
<li><a href="http://coolshell.cn/articles/4429.html" title="面试题：火车运煤问题 - 61,069 人阅读" target="_blank">面试题：火车运煤问题</a></li>
<li><a href="http://coolshell.cn/articles/6142.html" title="三个事和三个问题 - 59,671 人阅读" target="_blank">三个事和三个问题</a></li>
<li><a href="http://coolshell.cn/articles/1695.html" title="别的程序员是怎么读你的简历的 - 58,744 人阅读" target="_blank">别的程序员是怎么读你的简历的</a></li>
<li><a href="http://coolshell.cn/articles/2420.html" title="老手是这样教新手编程的 - 57,503 人阅读" target="_blank">老手是这样教新手编程的</a></li>
<li><a href="http://coolshell.cn/articles/945.html" title="C语言的谜题 - 55,632 人阅读" target="_blank">C语言的谜题</a></li>
<li><a href="http://coolshell.cn/articles/3363.html" title="偷了世界的程序员 - 55,195 人阅读" target="_blank">偷了世界的程序员</a></li>
<li><a href="http://coolshell.cn/articles/4506.html" title="再谈“我是怎么招聘程序员的”（上） - 54,907 人阅读" target="_blank">再谈“我是怎么招聘程序员的”（上）</a><h3 id="-">新浪微博</h3>
</li>
</ul>
<h3 id="-">标签</h3>
<p><a href="http://coolshell.cn/tag/agile" title="15个话题" target="_blank">agile</a> <a href="http://coolshell.cn/tag/ajax" title="11个话题" target="_blank">AJAX</a> <a href="http://coolshell.cn/tag/algorithm" title="20个话题" target="_blank">Algorithm</a> <a href="http://coolshell.cn/tag/android" title="8个话题" target="_blank">Android</a> <a href="http://coolshell.cn/tag/bash" title="8个话题" target="_blank">Bash</a> <a href="http://coolshell.cn/tag/c" title="75个话题" target="_blank">C++</a> <a href="http://coolshell.cn/tag/coding" title="25个话题" target="_blank">Coding</a> <a href="http://coolshell.cn/tag/css" title="21个话题" target="_blank">CSS</a> <a href="http://coolshell.cn/tag/database" title="7个话题" target="_blank">Database</a> <a href="http://coolshell.cn/tag/design" title="17个话题" target="_blank">Design</a> <a href="http://coolshell.cn/tag/design-pattern" title="8个话题" target="_blank">design pattern</a> <a href="http://coolshell.cn/tag/ebook" title="15个话题" target="_blank">ebook</a> <a href="http://coolshell.cn/tag/flash" title="7个话题" target="_blank">Flash</a> <a href="http://coolshell.cn/tag/game" title="9个话题" target="_blank">Game</a> <a href="http://coolshell.cn/tag/go" title="9个话题" target="_blank">Go</a> <a href="http://coolshell.cn/tag/google" title="31个话题" target="_blank">Google</a> <a href="http://coolshell.cn/tag/html" title="32个话题" target="_blank">HTML</a> <a href="http://coolshell.cn/tag/ie" title="10个话题" target="_blank">IE</a> <a href="http://coolshell.cn/tag/java" title="45个话题" target="_blank">Java</a> <a href="http://coolshell.cn/tag/javascript" title="49个话题" target="_blank">Javascript</a> <a href="http://coolshell.cn/tag/jquery" title="11个话题" target="_blank">jQuery</a> <a href="http://coolshell.cn/tag/linux" title="58个话题" target="_blank">Linux</a> <a href="http://coolshell.cn/tag/mysql" title="7个话题" target="_blank">MySQL</a> <a href="http://coolshell.cn/tag/oop" title="8个话题" target="_blank">OOP</a> <a href="http://coolshell.cn/tag/password" title="8个话题" target="_blank">password</a> <a href="http://coolshell.cn/tag/performance" title="13个话题" target="_blank">Performance</a> <a href="http://coolshell.cn/tag/php" title="25个话题" target="_blank">PHP</a> <a href="http://coolshell.cn/tag/programmer" title="88个话题" target="_blank">Programmer</a> <a href="http://coolshell.cn/tag/programming-language" title="12个话题" target="_blank">programming language</a> <a href="http://coolshell.cn/tag/puzzle" title="9个话题" target="_blank">Puzzle</a> <a href="http://coolshell.cn/tag/pythondev" title="27个话题" target="_blank">Python</a> <a href="http://coolshell.cn/tag/ruby" title="10个话题" target="_blank">Ruby</a> <a href="http://coolshell.cn/tag/sql" title="10个话题" target="_blank">SQL</a> <a href="http://coolshell.cn/tag/tdd" title="8个话题" target="_blank">TDD</a> <a href="http://coolshell.cn/tag/ui" title="12个话题" target="_blank">UI</a> <a href="http://coolshell.cn/tag/unix" title="31个话题" target="_blank">Unix</a> <a href="http://coolshell.cn/tag/vim" title="18个话题" target="_blank">vim</a> <a href="http://coolshell.cn/tag/web" title="35个话题" target="_blank">Web</a> <a href="http://coolshell.cn/tag/windows" title="17个话题" target="_blank">Windows</a> <a href="http://coolshell.cn/tag/xml" title="8个话题" target="_blank">XML</a> <a href="http://coolshell.cn/tag/%e5%8f%a3%e4%bb%a4" title="7个话题" target="_blank">口令</a> <a href="http://coolshell.cn/tag/%e5%ae%89%e5%85%a8" title="16个话题" target="_blank">安全</a> <a href="http://coolshell.cn/tag/%e7%a8%8b%e5%ba%8f%e5%91%98" title="88个话题" target="_blank">程序员</a> <a href="http://coolshell.cn/tag/%e7%ae%97%e6%b3%95" title="9个话题" target="_blank">算法</a> <a href="http://coolshell.cn/tag/interview" title="14个话题" target="_blank">面试</a></p>
<h3 id="-">分类目录</h3>
<ul>
<li><a href="http://coolshell.cn/category/proglanguage/dotnet" title="查看.NET编程下的所有文章" target="_blank">.NET编程</a> (2)</li>
<li><a href="http://coolshell.cn/category/proglanguage/ajaxdev" title="查看Ajax开发下的所有文章" target="_blank">Ajax开发</a> (9)</li>
<li><a href="http://coolshell.cn/category/proglanguage/cplusplus" title="查看C/C++语言下的所有文章" target="_blank">C/C++语言</a> (54)</li>
<li><a href="http://coolshell.cn/category/proglanguage/erlang" title="查看Erlang下的所有文章" target="_blank">Erlang</a> (1)</li>
<li><a href="http://coolshell.cn/category/proglanguage/javadev" title="查看Java语言下的所有文章" target="_blank">Java语言</a> (29)</li>
<li><a href="http://coolshell.cn/category/proglanguage/phpdev" title="查看PHP脚本下的所有文章" target="_blank">PHP脚本</a> (11)</li>
<li><a href="http://coolshell.cn/category/proglanguage/pythondev" title="查看Python下的所有文章" target="_blank">Python</a> (21)</li>
<li><a href="http://coolshell.cn/category/proglanguage/rubydev" title="查看Ruby下的所有文章" target="_blank">Ruby</a> (5)</li>
<li><a href="http://coolshell.cn/category/operatingsystem/unixlinux" title="查看Unix/Linux下的所有文章" target="_blank">Unix/Linux</a> (66)</li>
<li><a href="http://coolshell.cn/category/proglanguage/webdev" title="查看Web开发下的所有文章" target="_blank">Web开发</a> (99)</li>
<li><a href="http://coolshell.cn/category/operatingsystem/mswindows" title="查看Windows下的所有文章" target="_blank">Windows</a> (12)</li>
<li><a href="http://coolshell.cn/category/itnews" title="查看业界新闻下的所有文章" target="_blank">业界新闻</a> (25)</li>
<li><a href="http://coolshell.cn/category/%e4%bc%81%e4%b8%9a%e5%ba%94%e7%94%a8" title="查看企业应用下的所有文章" target="_blank">企业应用</a> (2)</li>
<li><a href="http://coolshell.cn/category/technews" title="查看技术新闻下的所有文章" target="_blank">技术新闻</a> (32)</li>
<li><a href="http://coolshell.cn/category/%e6%8a%80%e6%9c%af%e7%ae%a1%e7%90%86" title="查看技术管理下的所有文章" target="_blank">技术管理</a> (10)</li>
<li><a href="http://coolshell.cn/category/techarticle" title="查看技术读物下的所有文章" target="_blank">技术读物</a> (115)</li>
<li><a href="http://coolshell.cn/category/operatingsystem" title="查看操作系统下的所有文章" target="_blank">操作系统</a> (43)</li>
<li><a href="http://coolshell.cn/category/datebase" title="查看数据库下的所有文章" target="_blank">数据库</a> (10)</li>
<li><a href="http://coolshell.cn/category/misc" title="查看杂项资源下的所有文章" target="_blank">杂项资源</a> (251)</li>
<li><a href="http://coolshell.cn/category/process" title="查看流程方法下的所有文章" target="_blank">流程方法</a> (43)</li>
<li><a href="http://coolshell.cn/category/progdesign" title="查看程序设计下的所有文章" target="_blank">程序设计</a> (70)</li>
<li><a href="http://coolshell.cn/category/%e7%b3%bb%e7%bb%9f%e6%9e%b6%e6%9e%84" title="查看系统架构下的所有文章" target="_blank">系统架构</a> (7)</li>
<li><a href="http://coolshell.cn/category/tools" title="查看编程工具下的所有文章" target="_blank">编程工具</a> (61)</li>
<li><a href="http://coolshell.cn/category/proglanguage" title="查看编程语言下的所有文章" target="_blank">编程语言</a> (160)</li>
<li><a href="http://coolshell.cn/category/netsecurity" title="查看网络安全下的所有文章" target="_blank">网络安全</a> (22)</li>
<li><a href="http://coolshell.cn/category/career" title="查看职场生涯下的所有文章" target="_blank">职场生涯</a> (32)</li>
<li><a href="http://coolshell.cn/category/funny" title="查看趣味问题下的所有文章" target="_blank">趣味问题</a> (13)</li>
<li><a href="http://coolshell.cn/category/story" title="查看轶事趣闻下的所有文章" target="_blank">轶事趣闻</a> (145)</li>
</ul>
<h3 id="-">归档</h3>
<ul>
<li><a href="http://coolshell.cn/articles/date/2013/08" title="2013年八月" target="_blank">2013年八月</a> (1)</li>
<li><a href="http://coolshell.cn/articles/date/2013/07" title="2013年七月" target="_blank">2013年七月</a> (8)</li>
<li><a href="http://coolshell.cn/articles/date/2013/06" title="2013年六月" target="_blank">2013年六月</a> (2)</li>
<li><a href="http://coolshell.cn/articles/date/2013/05" title="2013年五月" target="_blank">2013年五月</a> (3)</li>
<li><a href="http://coolshell.cn/articles/date/2013/04" title="2013年四月" target="_blank">2013年四月</a> (3)</li>
<li><a href="http://coolshell.cn/articles/date/2013/03" title="2013年三月" target="_blank">2013年三月</a> (3)</li>
<li><a href="http://coolshell.cn/articles/date/2013/02" title="2013年二月" target="_blank">2013年二月</a> (5)</li>
<li><a href="http://coolshell.cn/articles/date/2013/01" title="2013年一月" target="_blank">2013年一月</a> (1)</li>
<li><a href="http://coolshell.cn/articles/date/2012/12" title="2012年十二月" target="_blank">2012年十二月</a> (4)</li>
<li><a href="http://coolshell.cn/articles/date/2012/11" title="2012年十一月" target="_blank">2012年十一月</a> (5)</li>
<li><a href="http://coolshell.cn/articles/date/2012/10" title="2012年十月" target="_blank">2012年十月</a> (3)</li>
<li><a href="http://coolshell.cn/articles/date/2012/09" title="2012年九月" target="_blank">2012年九月</a> (4)</li>
<li><a href="http://coolshell.cn/articles/date/2012/08" title="2012年八月" target="_blank">2012年八月</a> (8)</li>
<li><a href="http://coolshell.cn/articles/date/2012/07" title="2012年七月" target="_blank">2012年七月</a> (4)</li>
<li><a href="http://coolshell.cn/articles/date/2012/06" title="2012年六月" target="_blank">2012年六月</a> (7)</li>
<li><a href="http://coolshell.cn/articles/date/2012/05" title="2012年五月" target="_blank">2012年五月</a> (6)</li>
<li><a href="http://coolshell.cn/articles/date/2012/04" title="2012年四月" target="_blank">2012年四月</a> (6)</li>
<li><a href="http://coolshell.cn/articles/date/2012/03" title="2012年三月" target="_blank">2012年三月</a> (6)</li>
<li><a href="http://coolshell.cn/articles/date/2012/02" title="2012年二月" target="_blank">2012年二月</a> (3)</li>
<li><a href="http://coolshell.cn/articles/date/2012/01" title="2012年一月" target="_blank">2012年一月</a> (6)</li>
<li><a href="http://coolshell.cn/articles/date/2011/12" title="2011年十二月" target="_blank">2011年十二月</a> (5)</li>
<li><a href="http://coolshell.cn/articles/date/2011/11" title="2011年十一月" target="_blank">2011年十一月</a> (9)</li>
<li><a href="http://coolshell.cn/articles/date/2011/10" title="2011年十月" target="_blank">2011年十月</a> (6)</li>
<li><a href="http://coolshell.cn/articles/date/2011/09" title="2011年九月" target="_blank">2011年九月</a> (5)</li>
<li><a href="http://coolshell.cn/articles/date/2011/08" title="2011年八月" target="_blank">2011年八月</a> (14)</li>
<li><a href="http://coolshell.cn/articles/date/2011/07" title="2011年七月" target="_blank">2011年七月</a> (6)</li>
<li><a href="http://coolshell.cn/articles/date/2011/06" title="2011年六月" target="_blank">2011年六月</a> (12)</li>
<li><a href="http://coolshell.cn/articles/date/2011/05" title="2011年五月" target="_blank">2011年五月</a> (5)</li>
<li><a href="http://coolshell.cn/articles/date/2011/04" title="2011年四月" target="_blank">2011年四月</a> (18)</li>
<li><a href="http://coolshell.cn/articles/date/2011/03" title="2011年三月" target="_blank">2011年三月</a> (16)</li>
<li><a href="http://coolshell.cn/articles/date/2011/02" title="2011年二月" target="_blank">2011年二月</a> (16)</li>
<li><a href="http://coolshell.cn/articles/date/2011/01" title="2011年一月" target="_blank">2011年一月</a> (18)</li>
<li><a href="http://coolshell.cn/articles/date/2010/12" title="2010年十二月" target="_blank">2010年十二月</a> (11)</li>
<li><a href="http://coolshell.cn/articles/date/2010/11" title="2010年十一月" target="_blank">2010年十一月</a> (11)</li>
<li><a href="http://coolshell.cn/articles/date/2010/10" title="2010年十月" target="_blank">2010年十月</a> (19)</li>
<li><a href="http://coolshell.cn/articles/date/2010/09" title="2010年九月" target="_blank">2010年九月</a> (15)</li>
<li><a href="http://coolshell.cn/articles/date/2010/08" title="2010年八月" target="_blank">2010年八月</a> (10)</li>
<li><a href="http://coolshell.cn/articles/date/2010/07" title="2010年七月" target="_blank">2010年七月</a> (20)</li>
<li><a href="http://coolshell.cn/articles/date/2010/06" title="2010年六月" target="_blank">2010年六月</a> (9)</li>
<li><a href="http://coolshell.cn/articles/date/2010/05" title="2010年五月" target="_blank">2010年五月</a> (13)</li>
<li><a href="http://coolshell.cn/articles/date/2010/04" title="2010年四月" target="_blank">2010年四月</a> (12)</li>
<li><a href="http://coolshell.cn/articles/date/2010/03" title="2010年三月" target="_blank">2010年三月</a> (11)</li>
<li><a href="http://coolshell.cn/articles/date/2010/02" title="2010年二月" target="_blank">2010年二月</a> (7)</li>
<li><a href="http://coolshell.cn/articles/date/2010/01" title="2010年一月" target="_blank">2010年一月</a> (9)</li>
<li><a href="http://coolshell.cn/articles/date/2009/12" title="2009年十二月" target="_blank">2009年十二月</a> (22)</li>
<li><a href="http://coolshell.cn/articles/date/2009/11" title="2009年十一月" target="_blank">2009年十一月</a> (27)</li>
<li><a href="http://coolshell.cn/articles/date/2009/10" title="2009年十月" target="_blank">2009年十月</a> (17)</li>
<li><a href="http://coolshell.cn/articles/date/2009/09" title="2009年九月" target="_blank">2009年九月</a> (15)</li>
<li><a href="http://coolshell.cn/articles/date/2009/08" title="2009年八月" target="_blank">2009年八月</a> (21)</li>
<li><a href="http://coolshell.cn/articles/date/2009/07" title="2009年七月" target="_blank">2009年七月</a> (18)</li>
<li><a href="http://coolshell.cn/articles/date/2009/06" title="2009年六月" target="_blank">2009年六月</a> (19)</li>
<li><a href="http://coolshell.cn/articles/date/2009/05" title="2009年五月" target="_blank">2009年五月</a> (27)</li>
<li><a href="http://coolshell.cn/articles/date/2009/04" title="2009年四月" target="_blank">2009年四月</a> (53)</li>
<li><p><a href="http://coolshell.cn/articles/date/2009/03" title="2009年三月" target="_blank">2009年三月</a> (43)</p>
<h3 id="-">最新评论</h3>
</li>
<li><p><a href="http://coolshell.cn/articles/10337.html#comment-650549" title="数据即代码：元驱动编程, 2013年08月09日" target="_blank">deanzhang1984</a>: 照此说脚本语言里的脚本基本上都只是配置而已，后面都有个解释器 在解释执行。</p>
</li>
<li><a href="http://coolshell.cn/articles/10192.html#comment-649488" title="数据的游戏：冰与火, 2013年07月31日" target="_blank">rookiepig</a>: 当然，长期看皓哥文章，技术部分还是没话说。 学习了不少~</li>
<li><a href="http://coolshell.cn/articles/9308.html#comment-649452" title="“作环保的程序员，从不用百度开始”, 2013年03月23日" target="_blank">Jacob</a>: 当你研究某一领域深入，或者技术见长，或者感觉到时间不够用的时 候你就会明白百度为什么成为众矢之的了。@二陶</li>
<li><a href="http://coolshell.cn/articles/1106.html#comment-649272" title="Java构造时成员初始化的陷阱, 2009年07月03日" target="_blank">blog</a>: Webmaster, I am the admin at . We profile SEO Plugins for WordPress blogs for on-site and off-site SEO....</li>
<li><a href="http://coolshell.cn/articles/2250.html#comment-649110" title="“21天教你学会C++”, 2010年03月30日" target="_blank">ligand</a>: 我觉得，学习C++与学习其他语言，如Python、Java有 一个非常大的不同之处，就是学习C++时人们不自觉得就会去探究 其下一层的实现机制。而学Python，一般都不会去关心...</li>
<li><a href="http://coolshell.cn/articles/7992.html#comment-649084" title="C++的坑真的多吗？, 2012年08月06日" target="_blank">ligand</a>: 楼主这篇还是很中立、客观的。观之有收获。</li>
<li><a href="http://coolshell.cn/articles/1976.html#comment-648914" title="【问题】传球问题, 2009年12月20日" target="_blank">yaplog</a>: Hello there, I discovered your site by way of Google while searching for a similar matter, your web site came...</li>
<li><a href="http://coolshell.cn/articles/10115.html#comment-648880" title="C语言全局变量那些事儿, 2013年07月21日" target="_blank">YYX</a>: 唉，别绕弯子 直接来本质的。就是编译器 连接器 的工作原理，与语言本身毫无关系</li>
<li><a href="http://coolshell.cn/articles/7992.html#comment-648690" title="C++的坑真的多吗？, 2012年08月06日" target="_blank">Willie Maranville</a>: A formidable share, I simply given this onto a colleague who was doing a bit evaluation on this....</li>
<li><a href="http://coolshell.cn/articles/10337.html#comment-648562" title="数据即代码：元驱动编程, 2013年08月09日" target="_blank">Anonymous</a>: 什么“元驱动编程”，无非就是那句话：配置文件复杂到一定程度就 变成了一门语言。这不就是脚本语言的由来么。不是什么新概念，干 嘛要搞得神神叨叨…</li>
<li><a href="http://coolshell.cn/articles/1278.html#comment-648528" title="Linus Torvalds 语录 Top 10, 2009年08月16日" target="_blank">Isabel Zomberg</a>: I�m impressed, I must say. Actually rarely do I encounter a weblog that�s each educative and...</li>
<li><a href="http://coolshell.cn/articles/10337.html#comment-648377" title="数据即代码：元驱动编程, 2013年08月09日" target="_blank">code4craft</a>: JS那个例子的特定程度跟其他几个完全不一样嘛。 话说回来，这种配置式的写法，属于”写完之前不知道 它到底该是什么样子”，写好了读起来可能比较...</li>
<li><a href="http://coolshell.cn/articles/10337.html#comment-648333" title="数据即代码：元驱动编程, 2013年08月09日" target="_blank">YU_YU</a>: boost的命令行解析库呢？ 语言设计就是库设计，一门语言是否好用，就是库是否好用，仅此而 已</li>
<li><a href="http://coolshell.cn/articles/10337.html#comment-648267" title="数据即代码：元驱动编程, 2013年08月09日" target="_blank">henix</a>: 任何一个业务程序只要足够复杂，到最后都会发展成一个解释器（i nterpret）。对这点深有体会。文章的例子还是比较清楚的 ，个人感觉 json / lua 比 S 表达式易读。</li>
<li><a href="http://coolshell.cn/articles/7236.html#comment-648260" title="用Unix的设计思想来应对多变的需求, 2012年05月03日" target="_blank">jimshao</a>: 这里一个提法忽视了一个问题域的本质问题，解耦到底是目的还是手 段？我很赞同解耦的重要性，但是我认为强调解耦并不能帮助看官们 如何解决问题，一定会问我怎么才能解耦，如何解耦才是合适...</li>
</ul>
<h3 id="-">友情链接</h3>
<ul>
<li><a href="http://blog.csdn.net/haoel" target="_blank">陈皓的博客</a></li>
<li><a href="http://ifeve.com/" title="促进并发编程的研究和推广" target="_blank">并发编程</a></li>
<li><a href="http://www.raychase.net/" title="一个啰嗦的程序员" target="_blank">四火的唠叨</a></li>
<li><a href="http://www.devtext.com/" title="我们关注互联网、关注软件开发、提供开发技术交流、问答平台" target="_blank">devtext 开发者社区</a></li>
<li><a href="http://claymore.phpme.info/" target="_blank">Claymore&#39;s blog</a></li>
<li><a href="http://www.dutor.net/" target="_blank">Dutor.net</a></li>
<li><a href="http://luy.li/" title="all linux" target="_blank">bones7456</a></li>
<li><a href="http://keeng2008.appspot.com/" title="Keengle&#39;s Blog" target="_blank">Keengle&#39;s Blog</a></li>
<li><a href="http://www.nowamagic.net/" title="专注于互联网主流的各种技术" target="_blank">简明现代魔法</a></li>
<li><a href="http://www.rosoo.net/" title="关注技术更新，关注行业动态。努力做到更好。" target="_blank">罗素工作室</a></li>
<li><a href="http://www.codecho.com/" title="聆听代码的回音" target="_blank">代码回音</a></li>
<li><a href="http://hellogcc.blogbus.com/" title="致力于讨论和学习GNU Toolchain方面的工作组" target="_blank">HelloGcc Working Group</a></li>
<li><a href="http://http://blog.lvscar.info/" title="Just for Fun" target="_blank">吕毅的Blog</a></li>
<li><a href="http://www.cnblogs.com/weidagang2046/" title="Just for Fun" target="_blank">Todd Wei的Blog</a></li>
<li><a href="http://www.cppfans.org/" title="记录我们点滴学习工作生活" target="_blank">C++爱好者博客</a></li>
<li><a href="http://www.mhtml5.com/" title="致力于HTML5在中国的发展与应用" target="_blank">HTML5研究小组</a></li>
<li><a href="http://www.12freeblog.com/" title="关注网站运营，分享技术心得" target="_blank">12Free</a></li>
<li><a href="http://zhuwenhao.com/" title="朱文昊的中文博客－－专注技术，向往自由" target="_blank">朱文昊Albert Zhu</a></li>
<li><a href="http://www.cguage.com/" title="某VC++软件开发爱好者" target="_blank">C瓜哥的博客</a></li>
<li><a href="http://www.kaiyuanba.cn/" title="汇聚各种开源项目的中英文混合介绍并分类排列，致力于软件项目的开源事业" target="_blank">开源吧</a></li>
<li><a href="http://www.stackpop.org/" title="靖难|魔都小码农" target="_blank">靖难|魔都小码农</a></li>
<li><a href="http://acm.zhihua-lai.com/" title="Smart Ideas, Smart Algorithms" target="_blank">ACMer</a></li>
<li><a href="http://chenpeng.info/" title="优秀的开源软件让生活更简单" target="_blank">陈鹏个人博客</a></li>
<li><a href="http://www.coderli.com/" title="一个普通的coder，coding为了生活，coding因为消遣:-) Just a coder" target="_blank">OneCoder</a></li>
<li><a href="http://www.crazyshell.org/blog/" title="专注于底层基础, TCP/IP, 存储, (高性能.高可用.分布式.高并发系统) 研究" target="_blank">狂Shell – Happy Hacking</a></li>
<li><a href="http://blog.tektea.com/" title="关注IT技术 | 分享 | 交流 | 记录" target="_blank">TekTea&#39;s Blog</a></li>
<li><p><a href="http://shellblog.sinaapp.com/" title="我有一颗百度的心。" target="_blank">夕水溪下</a></p>
<h3 id="-">功能</h3>
</li>
<li><p><a href="http://coolshell.cn/wp-login.php?action=register" target="_blank">注册</a></p>
</li>
<li><a href="http://coolshell.cn/wp-login.php" target="_blank">登录</a></li>
<li><a href="http://coolshell.cn/feed" title="使用RSS 2.0订阅本站点内容" target="_blank">文章RSS</a></li>
<li><a href="http://coolshell.cn/comments/feed" title="使用RSS订阅本站点的所有文章的近期评论" target="_blank">评论RSS</a></li>
<li><a href="http://cn.wordpress.org/" title="基于WordPress，一个优美、先进的个人信息发布平台。" target="_blank">WordPress.org</a></li>
</ul>
<p><a href="">回到顶部</a> <a href="http://wordpress.org/" target="_blank">WordPress</a></p>
<p>版权所有 © 2009-2013 酷壳 – CoolShell.cn
主题由 <a href="http://www.neoease.com/" target="_blank">NeoEase</a> 提供, 通过 <a href="http://validator.w3.org/check?uri=referer" target="_blank">XHTML 1.1</a> 和 <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" target="_blank">CSS 3</a> 验证.
<img src="" alt=""></p>
<p>检测到你还在使用百度这个搜索引擎，
做为一个程序员，这是一种自暴自弃！</p>
<p><strong><a href="http://coolshell.cn/articles/7186.html" target="_blank">做环保的程序员，从不用百度开始！</a></strong></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql--NoSQL数据建模技术/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql--NoSQL数据建模技术" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nosql--译NoSQL生态系统/">[译] NoSQL生态系统</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql--译NoSQL生态系统/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-nosql-">[译] NoSQL生态系统</h1>
<h1 id="-nosqlfan-http-blog-nosqlfan-com-"><a href="http://blog.nosqlfan.com/" target="_blank">NoSQLFan</a></h1>
<p>关注NoSQL相关的新闻与技术</p>
<ul>
<li><a href="http://blog.nosqlfan.com/books" title="NoSQL书籍" target="_blank">NoSQL书籍</a></li>
<li><a href="http://blog.nosqlfan.com/newslist" title="分类列表" target="_blank">分类列表</a></li>
<li><a href="http://blog.nosqlfan.com/about" title="关于本站" target="_blank">关于本站</a></li>
<li><a href="http://10gt.com/circle/NoSQL" title="NoSQL讨论区" target="_blank">NoSQL讨论区</a></li>
</ul>
<h2 id="-nosql-">[译] NoSQL生态系统</h2>
<p>作者：<a href="http://blog.nosqlfan.com/html/author/nosqlfan/" title="由 nosqlfan 发表" target="_blank">nosqlfan</a> on 星期五, 六月 24, 2011 · <a href="">6条评论</a> 【阅读：17,483 次】 <img src="" alt=""></p>
<p>本文原文出自《<a href="http://www.aosabook.org/en/index.html" target="_blank">The Architecture of Open Source Applications</a>》一书第13章《<a href="http://www.aosabook.org/en/nosql.html" target="_blank">The NoSQL Ecosystem</a>》，由NoSQLFan的@<a href="http://twitter.com/iammutex" target="_blank">iammutex</a>，也就是正在码字的我，利用业余时间零碎时间经过半个月左右翻译完成。</p>
<p>不得不说这是一个非常有意思的过程，凡是做过翻译的人应该都能理解翻译与阅读在深度和细度上的差别，通过对本章内容的翻译，我的收获很多，一些错误想法得到纠正，很多理论的理解也更清晰了。当然，不排除中间有用词不当语句不通甚至是理解不正确的情况，请各位读者多提意见。</p>
<p>［<a href="https://docs.google.com/document/pub?id=1NO__9thOb8V1mM3iQID3IUmwGh9wtra7xkpmvCZIvoU" target="_blank"><strong>HTML版</strong></a>］［<strong><a href="http://blog.nosqlfan.com/wp-content/uploads/2011/nosql_ecosystem.pdf" target="_blank">PDF版</a></strong>］</p>
<p>声明：本文在NoSQLFan首发，一切转载行为须注明作者及出处。</p>
<p>下面就看正文吧～</p>
<h1 id="nosql-">NoSQL生态系统</h1>
<p>与本书中提到的其它主题不同，NoSQL不是一个工具，而是由一些具有互补性和竞争性的工具组成的一个概念，是一个生态圈。这些被称作NoSQL的工具，在存储数据的方式上，提供了一种与基于SQL语言的关系型数据截然不同的思路。要想了解NoSQL，我们必须先了解现有的这些工具，去理解那些让他们开拓出新的存储领域的设计思路。</p>
<p>如果你正在考虑使用NoSQL，你应该会马上发现你有很多种选择。NoSQL系统舍弃了许了传统关系型数据库的方便之处，而把一些通常由关系型数据库本身来完成的任务交给了应用层来完成。这需要开发人员更深入的去了解存储系统的架构和具体实现。</p>
<h2 id="13-1-nosql-">13.1 NoSQL其名</h2>
<p>在给NoSQL下定义之前，我们先来试着从它的名字上做一下解读，顾名思义，NoSQL系统的数据操作接口应该是非SQL类型的。但在NoSQL社区，NoSQL被赋予了更具有包容性的含义，其意为Not Only SQL，即NoSQL提供了一种与传统关系型数据库不太一样的存储模式，这为开发者提供了在关系型数据库之外的另一种选择。有时候你可能会完全用NoSQL数据库代替关系型数据库，但你也可以同时使用关系型和非关系型存储来解决具体的问题。</p>
<p>在进入NoSQL的大门之前，我们先来看看哪些场景下使用关系型数据库更合适，哪些使用NoSQL更合适。</p>
<h3 id="13-1-1-sql-">13.1.1 SQL及其关联型结构</h3>
<p>SQL是一种任务描述性的查询语言，所谓任务描述性的查询语言，就是说它只描述他需要系统做什么，而不告诉系统如何去做。例如：查出39号员工的信息，查出员工的名字和电话，只查找做会计工作的员工信息，计算出每个部门的员工总数，或者是对员工表和经理表做一个联合查询。</p>
<p>简单的说，SQL让我们可以直接向数据库提出上述问题而不必考虑数据是如何在磁盘上存储的，使用哪些索引来查询数据，或者说用哪种算法来处理数据。在关系型数据库中有一个重要的组件，叫做查询优化器，正是它来推算用哪种操作方式能够更快的完成操作。查询优化器通常比一般的数据库用户更聪明，但是有时候由于没有充足的信息或者系统模型过于简单，也会导致查询优化器不能得出最有效的操作方式。</p>
<p>作为目前应用最广的数据库系统，关系型数据库系统以其关联型的数据模型而命名。在关联型的数据模型中，在现实世界中的不同类型的个体被存储在不同的表里。比如有一个专门存员工的员工表，有一个专门存部门的部门表。每一行数据又包含多个列，比如员工表里可能包含了员工号，员工工资，生日以及姓名等，这些信息项被存在员工表中的某一列中。</p>
<p>关联型的模型与SQL是紧密想连的。简单的查询操作，比如查询符合某个条件的所有行（例：employeeid = 3, 或者 salary &gt; $20000）。更复杂一些的任务会让数据库做一些额外的工作，比如跨表的联合查询（例：查出3号员的部门名称是什么）。一些复杂的查询，比如统计操作（例：算出所有员工的平均工资），甚至可能会导致全表扫描。</p>
<p>关联型的数据模型定义了高度结构化的数据结构，以及对这些结构之间关系的严格定义。在这样的数据模型上执行的查询操作会比较局限，而且可能会导致复杂的数据遍历操作。数据结构的复杂性及查询的复杂性，会导致系统产生如下的一些限制：</p>
<ul>
<li>复杂导致不确定性。使用SQL的一个问题就是计算某个查询的代价或者产生的负载几乎是不可能的。使用简单的查询语言可能会导致应用层的逻辑更复杂，但是这样可以将存储系统的工作简单化，让它只需要响应一些简单的请求。</li>
<li>对一个问题建模有很多种方式。其中关联型的数据模型是非常严格的一种：表结构的定义规定了表中每一行数据的存储内容。如果你的数据结构化并没有那么强，或者对每一行数据的要求比较灵活，那可能关联型的数据模型就太过严格了。类似的，应用层的开发人员可能对关联型的数据结构并不满意。比如很多应用程序是用面向对象的语言写的，数据在这些语言中通常是以列表、队列或集合的形式组织的，程序员们当然希望他们的数据存储层也能和应用层的数据模型一致。</li>
<li>当数据量增长到一台机器已经不能容纳，我们需要将不同的数据表分布到不同的机器。而为了避免在不同机器上的数据表在进行联合查询时需要跨网络进行。我们必须进行反范式的数据库设计，这种设计方式要求我们把需要一次性查询到的数据存储在一起。这样做使得我们的系统变得就像一个主键查询系统一样，于是我们开始思考，是否有其它更适合我们数据的数据模型。</li>
</ul>
<p>通常来说，舍弃多年以来的设计思路是不明智的。当你要把数据存到数据库，当考虑到SQL与关联型的数据模型，这些都是数十年的研究的开发成果，提供丰富的数据模型，提供复杂操作的保证。而当你的问题涉及到大数据量，高负载或者说你的数据结构在SQL与关联型数据模型下很难得到优化，NoSQL可能是更好的选择。</p>
<h3 id="13-1-2-nosql-">13.1.2 NoSQL的启示</h3>
<p>NoSQL运动受到了很多相关研究论文的启示，这所有论文中，最核心的有两个。</p>
<p>Google的BigTable[<a href="http://www.aosabook.org/en/bibliography.html#bib:bigtable" target="_blank">CDG+06</a>]提出了一种很有趣的数据模型，它将各列数据进行排序存储。数据值按范围分布在多台机器，数据更新操作有严格的一致性保证。</p>
<p>Amazon的Dynamo[<a href="http://www.aosabook.org/en/bibliography.html#bib:amazon:dynamo" target="_blank">DHJ+07</a>]使用的是另外一种分布式模型。Dynamo的模型更简单，它将数据按key进行hash存储。其数据分片模型有比较强的容灾性，因此它实现的是相对松散的弱一致性：最终一致性。</p>
<p>接下来我们会深入介绍这些设计思想，而实际上在现实中这些思想经常是混搭使用的。比如像HBase及其它一些NoSQL系统他们在设计上更接受BigTable的模型，而像Voldemort 系统它就和Dynamo更像。同时还有像Cassandra这种两种特性都具备的实现（它的数据模型和BigTable类似，分片策略和一致性机制和Dynamo类似）。</p>
<h3 id="13-1-3-">13.1.3 特性概述</h3>
<p>NoSQL系统舍弃了一些SQL标准中的功能，取而代之的是提供了一些简单灵活的功能。NoSQL 的构建思想就是尽量简化数据操作，尽量让执行操作的效率可预知。在很多NoSQL系统里，复杂的操作都是留给应用层来做的，这样的结果就是我们对数据层进行的操作得到简化，让操作效率可预知。</p>
<p>NoSQL系统不仅舍弃了很多关系数据库中的操作。它还可能不具备关系数据库以下的一些特性：比如通常银行系统中要求的事务保证，一致性保证以及数据可靠性的保证等。事务机制提供了在执行多个命令时的all-or-nothing保证。一致性保证了如果一个数据更新后，那么在其之后的操作中都能看到这个更新。可靠性保证如果一个数据被更新，它就会被写到持久化的存储设备上（比如说磁盘），并且保证在数据库崩溃后数据可恢复。</p>
<p>通过放宽对上述几点特性的要求，NoSQL系统可以为一些非银行类的业务提供以性能换稳定的策略。而同时，对这几点要求的放宽，又使得NoSQL系统能够轻松的实现分片策略，将远远超出单机容量的大量数据分布在多台机器上的。</p>
<p>由于NoSQL系统还处在萌芽阶段，本章中提到的很多NoSQL架构都是用于满足各种不同用户的需求的。对这些架构进行总结不太可能，因为它们总在变化。所以希望你能记住的一点是，不同的NoSQL系统的特点是不同的，通过本章的内容，希望你能该根据自己的业务情况来选择合适的NoSQL系统，而本章内容不可能给你直接的答案。</p>
<p>当你去考查一个NoSQL系统的时候，下面的的几点是值得注意的：</p>
<ul>
<li>数据模型及操作模型：你的应用层数据模型是行、对象还是文档型的呢？这个系统是否能支持你进行一些统计工作呢？</li>
<li>可靠性：当你更新数据时，新的数据是否立刻写到持久化存储中去了？新的数据是否同步到多台机器上了？</li>
<li>扩展性：你的数据量有多大，单机是否能容下？你的读写量求单机是否能支持？</li>
<li>分区策略：考虑到你对扩展性，可用性或者持久性的要求，你是否需要一份数据被存在多台机器上？你是否需要知道数据在哪台机器上，以及你能否知道。</li>
<li>一致性：你的数据是否被复制到了多台机器上，这些分布在不同点的数据如何保证一致性？</li>
<li>事务机制：你的业务是否需要ACID的事务机制？</li>
<li>单机性能：如果你打算持久化的将数据存在磁盘上，哪种数据结构能满足你的需求（你的需求是读多还是写多）？写操作是否会成为磁盘瓶颈？</li>
<li>负载可评估：对于一个读多写少的应用，诸如响应用户请求的web应用，我们总会花很多精力来关注负载情况。你可能需要进行数据规模的监控，对多个用户的数据进行汇总统计。你的应用场景是否需要这样的功能呢？</li>
</ul>
<p>尽管后三点在本章没有独立的小节进行描述，但它们和其它几点一样重要，下面就让我们对以上的几点进行阐述。</p>
<h2 id="13-2-nosql-">13.2 NoSQL数据模型及操作模型</h2>
<p>数据库的数据模型指的是数据在数据库中的组织方式，数据库的操作模型指的是存取这些数据的方式。通常数据模型包括关系模型、键值模型以及各种图结构模型。的操作语言可能包括SQL、键值查询及MapReduce等。NoSQL通常结合了多种数据模型和操作模型，提供了不一样的架构方式。</p>
<h3 id="13-2-1-key-nosql-">13.2.1 基于key值存储的NoSQL数据模型</h3>
<p>在键值型系统中，复杂的联合操作以及满足多个条件的取数据操作就不那么容易了，需要我们创造性的建立和使用键名。如果一个程序员既想通过员工号查到员工信息，又想通过部门号查到员工信息，那么他必须建立两种类型的键值对。例如 emplyee:30 这个键用于指向员工号为30的员工信息。employee_departments:20 可能用到指向一个包含在20号部门工作的所有员工工号的列表。这样数据库中的联合操作就被转换成业务层的逻辑了：要获取部门号为20的所有员工的信息，应用层可以先获取employee_departments:20 这个列表，然后再循环地拿这个列表中的ID通过获取employee:ID得到所有员工的信息。</p>
<p>键值查找的一个好处是，对数据库的操作模式是固定的，这些操作所产生的负载也是相对固定且可预知的。这样像分析整个应用中的性能瓶颈这种事，就变得简单多了。因为复杂的逻辑操作并不是放在数据库里面黑箱操作了。不过这样做之后，业务逻辑和数据逻辑可能就没那么容易分清了。</p>
<p>下面我们快速地把各种键值模型的数据结构简单描述一下。看看不同的NoSQL系统的在这方面的不同实现方式。</p>
<h3 id="key-value-">Key-Value 存储</h3>
<p>Key-Value存储可以说是最简单的NoSQL存储。每个key值对应一个任意的数据值。对NoSQL 系统来说，这个任意的数据值是什么，它并不关心。比如在员工信念数据库里，exployee:30 这个key对应的可能就是一段包含员工所有信息的二进制数据。这个二进制的格式可能是<a href="http://code.google.com/p/protobuf/" target="_blank">Protocol Buffer</a>、<a href="http://thrift.apache.org/" target="_blank">Thrift</a>或者<a href="http://avro.apache.org/" target="_blank">Avro</a>都无所谓。</p>
<p>如果你使用上面说的Key-Value存储来保存你的结构化数据，那么你就得在应用层来处理具体的数据结构：单纯的Key-Value存储是不提供针对数据中特定的某个属性值来进行操作。通常它只提供像set、get和delete这样的操作。以Dynamo为原型的Voldemort数据库，就只提供了分布式的Key-Value存储功能。BDB 是一个提供Key-Value操作的持久化数据存储引擎。</p>
<h3 id="key-">Key – 结构化数据 存储</h3>
<p>Key对应结构化数据存储，其典型代表是Redis，Redis将Key-Value存储的Value变成了结构化的数据类型。Value的类型包括数字、字符串、列表、集合以及有序集合。除了set/get/delete 操作以为，Redis还提供了很多针对以上数据类型的特殊操作，比如针对数字可以执行增、减操作，对list可以执行 push/pop 操作，而这些对特定数据类型的特定操作并没有对性能造成多大的影响。通过提供这种针对单个Value进行的特定类型的操作，Redis可以说实现了功能与性能的平衡。</p>
<h3 id="key-">Key – 文档 存储</h3>
<p>Key – 文档存储的代表有CouchDB、MongoDB和Riak。这种存储方式下Key-Value的Value是结构化的文档，通常这些文档是被转换成JSON或者类似于JSON的结构进行存储。文档可以存储列表，键值对以及层次结构复杂的文档。</p>
<p>MongoDB 将Key按业务分到各个collection里，这样以collection作为命名空间，员工信息和部门信息的Key就被隔开了。CouchDB和Riak把类型跟踪这种事留给了开发者去完成。文档型存储的灵活性和复杂性是一把双刃剑：一方面，开发者可以任意组织文档的结构，另一方面，应用层的查询需求会变得比较复杂。</p>
<h3 id="bigtable-">BigTable 的列簇式存储</h3>
<p>HBase和Cassandra的数据模型都借鉴自Google 的BigTable。这种数据模型的特点是列式存储，每一行数据的各项被存储在不同的列中（这些列的集合称作列簇）。而每一列中每一个数据都包含一个时间戳属性，这样列中的同一个数据项的多个版本都能保存下来。</p>
<p>列式存储可以理解成这样，将行ID、列簇号，列号以及时间戳一起，组成一个Key，然后将Value按Key的顺序进行存储。Key值的结构化使这种数据结构能够实现一些特别的功能。最常用的就是将一个数据的多个版本存成时间戳不同的几个值，这样就能很方便的保存历史数据。这种结构也能天然地进行高效的松散列数据（在很多行中并没有某列的数据）存储。当然，另一方面，对于那些很少有某一行有NULL值的列，由于每一个数据必须包含列标识，这又会造成空间的浪费。</p>
<p>这些NoSQL系统对BigTable数据模型的实现多少有些差别，这其中以Cassandra进行的变更最为显著。Cassandra引入了超级列（supercolumn）的概念，通过将列组织到相应的超级列中，可以在更高层级上进行数据的组织，索引等。这一做法也取代了locality groups的概念（这一概念的实现可以让相关的几个行的数据存储在一起，以提高存取性能）。</p>
<h3 id="13-2-2-">13.2.2 图结构存储</h3>
<p>图结构存储是NoSQL的另一种存储实现。图结构存储的一个指导思想是：数据并非对等的，关系型的存储或者键值对的存储，可能都不是最好的存储方式。图结构是计算机科学的基础结构之一，Neo4j和HyperGraphDB是当前最流行的图结构数据库。图结构的存储与我们之前讨论过的几种存储方式很不同，这种不同几乎体现在每一个方面，包括：数据模型、数据查询方式、数据在磁盘上的组织方式、在多个结点上的分布方式，甚至包括对事务机制的实现等等。由于篇幅的限制，对这些方面我们暂时不做深入的讨论，这里需要你了解的是，某些数据结构使用图结构的数据库进行存储可能会更好。</p>
<h3 id="13-2-3-">13.2.3 复杂查询</h3>
<p>在NoSQL存储系统中，有很多比键值查找更复杂的操作。比如MongoDB可以在任意数据行上建立索引，可以使用Javascript语法设定复杂的查询条件。BigTable型的系统通常支持对单独某一行的数据进行遍历，允许对单列的数据进行按特定条件地筛选。CouchDB允许你创建同一份数据的多个视图，通过运行MapReduce任务来实现一些更为复杂的查询或者更新操作。很多NoSQL系统都支持与Hadoop或者其它一些MapReduce框架结合来进行一些大规模数据分析工作。</p>
<h3 id="13-2-4-">13.2.4 事务机制</h3>
<p>传统的关系型数据库在功能支持上通常很宽泛，从简单的键值查询，到复杂的多表联合查询再到事务机制的支持。而与之不同的是，NoSQL系统通常注重性能和扩展性，而非事务机制。</p>
<p>传统的SQL数据库的事务通常都是支持ACID的强事务机制。A代表原子性，即在事务中执行多个操作是原子性的，要么事务中的操作全部执行，要么一个都不执行;C代表一致性，即保证进行事务的过程中整个数据加的状态是一致的，不会出现数据花掉的情况;I代表隔离性，即两个事务不会相互影响，覆盖彼此数据等;D表示持久化，即事务一量完成，那么数据应该是被写到安全的，持久化存储的设备上（比如磁盘）。</p>
<p>ACID的支持使得应用者能够很清楚他们当前的数据状态。即使如对于多个事务同时执行的情况下也能够保证数据状态的正常性。但是如果要保证数据的一致性，通常多个事务是不可能交叉执行的，这样就导致了可能一个很简单的操作需要等等一个复杂操作完成才能进行的情况。</p>
<p>对很多NoSQL系统来说，对性能的考虑远在ACID的保证之上。通常NoSQL系统仅提供对行级别的原子性保证，也就是说同时对同一个Key下的数据进行的两个操作，在实际执行的时候是会串行的执行，保证了每一个Key-Value对不会被破坏。对绝大多数应用场景来说，这样的保证并不会引起多大的问题，但其换来的执行效率却是非常可观的。当然，使用这样的系统可能需要我们在应用层的设计上多做容错性和修正机制的考虑。</p>
<p>在NoSQL中，Redis在事务支持这方面上不太一样，它提供了一个MULTI命令用来将多个命令进行组合式的操作，通过一个WATCH命令提供操作隔离性。这和其它一些提供test-and-set这样的低层级的隔离机制类似。</p>
<h3 id="13-2-5-schema-free-">13.2.5 Schema-free的存储</h3>
<p>还有一个很多NoSQL都有的共同点，就是它通常并没有强制的数据结构约束。即使是在文档型存储或者列式存储上，也不会要求某一个数据列在每一行数据上都必须存在。这在非结构化数据的存储上更方便，同时也省去了修改表结构的代价。而这一机制对应用层的容错性要求可能会更高。比如程序可能得确定如果某一个员工的信息里缺少lastname这一项，是否算是错误。或者说某个表结构的变更是否对所有数据行起了作用。还有一个问题，就是数据库的表结构可能会因为项目的多次迭代而变得混乱不堪。</p>
<h2 id="13-3-">13.3 数据可靠性</h2>
<p>最理想状态是，数据库会把所有写操作立刻写到持久化存储的设备，同时复制多个副本到不同地理位置的不同节点上以防止数据丢失。但是这种对数据安全性的要求对性能是有影响的，所以不同的NoSQL系统在自身性能的考虑下，在数据安全上采取了不太一样的策略。</p>
<p>一种典型的出错情况是重启机器或者机器断电了，这时候需要让数据从内存转存到磁盘才能保证数据的安全性，因为磁盘数据不会因断电而丢失。而要避免磁盘损坏这种故障，就需要将数据冗余的存在其它磁盘上，比如使用RAID来做镜像，或者将数据同步到不同机器。但是有些时候针对同一个数据中心来说，是不可能做到完全的数据安全的，比如一旦发生飓风地震这种天灾，整个机房机器可能都会损坏，所以，在这种情况下要保证数据的安全性，就必须将数据备份存储到其它地理位置上比较远的数据中心。所以，具体各个NoSQL系统在数据安全性和性能上的权衡策略也不太一样。</p>
<h3 id="13-3-1-">13.3.1 单机可靠性</h3>
<p>单机可靠性理解起来非常简单，它的定义是写操作不会由于机器重启或者断电而丢失。通常单机可靠性的保证是通过把数据写到磁盘来完成的，而这通常会造成磁盘IO成为整个系统的瓶颈。而事实上，即使你的程序每次都把数据写到了磁盘，实际上由于操作系统buffer层的存在，数据还是不会立刻被写到物理磁盘上，只有当你调用fsync这个系统调用的时候，操作系统才会尽可能的把数据写到磁盘。</p>
<p>一般的磁盘大概能进行每秒100-200次的随机访问，每秒30-100MB的顺序写入速度。而内存在这两方面的性能都有数量级上的提升。通过尽量减少随机写，取而代之的对每个磁盘设备进行顺序写，这样能够减少单机可靠性保证的代价。也就是说我们需要减少在两次fsync调用之间的写操作次数，而增加顺序写操作的数量。下面我们说一下一些在单机可靠性的保证下提高性能的方法。</p>
<h3 id="-fsync-">控制fsync的调用频率</h3>
<p>Memcached是一个纯内存的存储，由于其不进行磁盘上的持久化存储，从而换来了很高的性能。当然，在我们进行服务器重启或者服务器意外断电后，这些数据就全丢了。因此Memcached 是一个非常不错的缓存，但是做不了持久化存储。</p>
<p>Redis则提供了几种对fsync调用频率的控制方法。应用开发者可以配置Redis在每次更新操作后都执行一次fsync，这样会比较安全，当然也就比较慢。Redis也可以设置成N秒种调用一次fsync，这样性能会更好一点。但这样的后果就是一旦出现故障，最多可能导致N秒内的数据丢失。而对一些可靠性要求不太高的场合（比如仅仅把Redis当Cache用的时候），应用开发者甚至可以直接关掉fsync的调用：让操作系统来决定什么时候需要把数据flush到磁盘。
（译者：这只是Redis append only file的机制，Redis是可以关闭aof日志的，另外请注意：Redis 本身支持将内存中数据dump成rdb文件的机制，和上面说的不是一回事。）</p>
<h3 id="-">使用日志型的数据结构</h3>
<p>像B+ 树这样的一些数据结构，使得NoSQL系统能够快速的定位到磁盘上的数据，但是通常这些数据结构的更新操作是随机写操作，如果你在每次操作后再调用一次fsync，那就会造成频繁的磁盘随机访问了。为了避免产生这样的问题，像Cassandra、HBase、Redis和Riak都会把写操作顺序的写入到一个日志文件中。相对于存储系统中的其它数据结构，上面说到的日志文件可以频繁的进行fsync操作。这个日志文件记录了操作行为，可以用于在出现故障后恢复丢失那段时间的数据，这样就把随机写变成顺序写了。</p>
<p>虽然有的NoSQL系统，比如MongoDB，是直接在原数据上进行更新操作的，但也有许多NoSQL系统是采用了上面说到的日志策略。Cassandra和HBase借鉴了BigTable的做法，在数据结构上实现了一个日志型的查找树。Riak也使用了类似的方法实现了一个日志型的hash表（译者：也就是Riak的<a href="http://downloads.basho.com/papers/bitcask-intro.pdf" target="_blank">BitCask</a>模型）。CouchDB对传统的B+树结构进行了修改，使得对树的更新可以使用顺序的追加写操作来实现（译者：这种B+树被称作<a href="http://jchrisa.net/drl/nosql-oakland/btree-nosql-oak.pdf" target="_blank">append-only B-Tree</a>）。这些方法的使用，使得存储系统的写操作承载力更高，但同时为了防止数据异构后膨胀得过大，需要定时进行一些合并操作。</p>
<h3 id="-">通过合并写操作提高吞吐性能</h3>
<p>Cassandra有一个机制，它会把一小段时间内的几个并发的写操作放在一起进行一次fsync调用。这种做法叫group commit，它导致的一个结果就是更新操作的返回时间可能会变长，因为一个更新操作需要等就近的几个更新操作一起进行提交。这样做的好处是能够提高写操作承载力。作为HBase底层数据支持的Hadoop 分布式文件系统HDFS，它最近的一些补丁也在实现一些顺序写和group commit的机制。</p>
<h3 id="13-3-2-">13.3.2 多机可靠性</h3>
<p>由于硬件层面有时候会造成无法恢复的损坏，单机可靠性的保证在这方面就鞭长莫及了。对于一些重要数据，跨机器做备份保存是必备的安全措施。一些NoSQL系统提供了多机可靠性的支持。</p>
<p>Redis采用了传统的主从数据同步的方式。所有在master上执行的操作，都会通过类似于操作日志的结构顺序地传递给slave上再执行一遍。如果master发生宕机等事故，slave可以继续执行完master传来的操作日志并且成为新的master。可能这中间会导致一些数据丢失，因为master同步操作到slave是非阻塞的，master并不知道操作是否已经同步线slave了。CouchDB 实现了一个类似的指向性的同步功能，它使得一个写操作可以同步到其它节点上。</p>
<p>MongoDB提供了一个叫Replica Sets的架构方制，这个架构策略使得每一个文档都会保存在组成Replica Sets的所有机器上。MongoDB提供了一些选项，让开发者可以确定一个写操作是否已经同步到了所有节点上，也可以在节点数据并不是最新的情况下执行一些操作。很多其它的分布式NoSQL存储都提供了类似的多机可靠性支持。由于HBase的底层存储是HDFS，它也就自然的获得了HDFS提供的多机可靠性保证。HDFS的多机可靠性保证是通过把每个写操作都同步到两个以上的节点来实现的。</p>
<p>Riak、Cassandra和Voldemort提供了一些更灵活的可配置策略。这三个系统提供一个可配置的参数N，代表每一个数据会被备份的份数，然后还可以配置一个参数W，代表每个写操作需要同步到多少能机器上才返回成功。当然W是小于N的。</p>
<p>为了应对整个数据中心出现故障的情况，需要实现跨数据中心的多机备份功能。Cassandra、HBase和Voldemort都实现了一个机架位置可知的配置，这种配置方式使得整个分布式系统可以了解各个节点的地理位置分布情况。如果一个操作需要等待另外的数据中心的同步操作成功才返回给用户，那时间就太长了，所以通常跨数据中心的同步备份操作都是异步进行的。用户并不需要等待另一个数据中心同步的同步操作执行成功。</p>
<h2 id="13-4-">13.4 横向扩展带来性能提升</h2>
<p>上面我们讨论了对出错情况的处理，下面我们讨论另一种情况：成功！如果数据存储操作成功执行了，那么你的系统就要负责对这些数据进行处理。就要承担数据带来的负载。一个比较粗暴的解决方法是通过升级你的机器来提升单机性能：通过加大内存和添加硬盘来应对越来越大的负载。但是随着数据量的增大，投入在升级机器上的钱将将不会产生原来那么大的效果。这时候你就必须考虑把数据同步到不同的机器上，利用横向扩展来分担访问压力。</p>
<p>横向扩展的目标是达到线性的效果，即如果你增加一倍的机器，那么负载能力应该也能相应的增加一倍。其主要需要解决的问题是如何让数据在多台机器间分布。数据分片技术实际上就是将对数据和读写请求在多个机器节点上进行分配的技术，分片技术在很多NoSQL系统中都有实现，比如Cassandra、HBase、Voldemort和Riak等等，最近MongoDB和Redis也在做相应的实现。而有的项目并不提供内置的分片支持，比如CouchDB更加注重单机性能的提升。对于这些项目，通常我们可以借助一些其它的技术在上层来进行负载分配。</p>
<p>下面让我们来整理一些通用的概念。对于数据分片和分区，我们可以做同样的理解。对机器，服务器或者节点，我们可以统一的理解成物理上的存储数据的机器。最后，集群或者机器环都可以理解成为是组成你存储系统的集合。</p>
<p>分片的意思是，没有任何一台机器可以处理所有写请求，也没有任何一台机器可以处理对所有数据的读请求。很多NoSQL系统都是基于键值模型的，因此其查询条件也基本上是基于键值的查询，基本不会有对整个数据进行查询的时候。由于基本上所有的查询操作都是基本键值形式的，因此分片通常也基于数据的键来做：键的一些属性会决定这个键值对存储在哪台机器上。下面我们将会对hash分片和范围分片两种分片方式进行描述。</p>
<h3 id="13-4-1-">13.4.1 如非必要，请勿分片</h3>
<p>分片会导致系统复杂程序大增，所以，如果没有必要，请不要使用分片。下面我们先讲两种不用分片就能让系统具有扩展性的方法。</p>
<h3 id="-">读写分离</h3>
<p>大多数应用场景都是读多写少的场景。所以在这种情况下，可以用一个简单的方法来分担负载，就是把数据同步到多台机器上。这时候写请求还是由master机器处理，而读请求则可以分担给那些同步到数据的机器了。而同步数据的操作，通常是不会对master带来多大的压力的。</p>
<p>如果你已经使用了主从配置，将数据同步到多台机器以提供高可靠性了，那么你的slave机器应该能够为master分担不少压力了。对有些实时性要求不是非常高的查询请求，比如一些统计操作，你完全可以放到slave上来执行。通常来说，你的应用对实时性要求越低，你的slave机器就能承担越多的任务。</p>
<h3 id="-">使用缓存</h3>
<p>将一些经常访问的数据放到缓存层中，通常会带来很好的效果。Memcached 主要的作用就是将数据层的数据进行分布式的缓存。Memcached 通过客户端的算法（译者： 常见的一致性hash算法）来实现横向扩展，这样当你想增大你缓存池的大小时，只需要添加一台新的缓存机器即可。</p>
<p>由于Memcached仅仅是一个缓存存储，它并不具备一些持久存储的复杂特性。当你在考虑使用复杂的扩展方案时，希望你先考虑一下使用缓存来解决你的负载问题。注意，缓存并不是临时的处理方案：Facebook 就部署了总容量达到几十TB的Memcahced内存池。</p>
<p>通过读写分离和构建有效的缓存层，通常可以大大分担系统的读负载，但是当你的写请求越来越频繁的时候，你的master机器还是会承受越来越大的压力。对于这种情况，我们可能就要用到下面说到的数据分片技术了。</p>
<h3 id="13-4-2-">13.4.2 通过协调器进行数据分片</h3>
<p>由于CouchDB专注于单机性能，没有提供类似的横向扩展方案，于是出现了两个项目：Lounge 和 BigCouch，他们通过提供一个proxy层来对CouchDB中的数据进行分片。在这种架构中，proxy作为CouchDB集群的前端机器，接受和分配请求到后端的多台CouchDB上。后端的CouchDB 之间并没有交互。协调器会将按操作的key值将请求分配到下层的具体某台机器。</p>
<p>Twitter 自己实现了一个叫Gizzard的协调器，可以实现数据分片和备份功能。Gizzard不关心数据类型，它使用树结构来存储数据范围标识，你可以用它来对SQL或者NoSQL系统进行封装。通过对 Gizzard 进行配置，可以实现将特定范围内的数据进行冗余存储，以提高系统的容灾能力。</p>
<h3 id="13-4-3-hash-">13.4.3 一致性hash环算法</h3>
<p>好的hash算法可以使数据保持比较均匀的分布。这使得我们可以按这种分布将数据保存布多台机器上。一致性hash是一种被广泛应用的技术，其最早在一个叫distributed hash tables (DHTs)的系统中进行使用。那些类Dynamo的应用，比如Cassandra、Voldemort和Riak，基本上都使用了一致性hash算法。</p>
<h3 id="hash-">Hash环图</h3>
<p><a href="http://blog.nosqlfan.com/wp-content/uploads/2011/06/A-Distributed-Hash-Table-Ring.png" target="_blank"><img src="&quot;[A Distributed Hash Table Ring]&quot;" alt=""></a></p>
<p>一致性hash算法的工作原理如下：首先我们有一个hash函数H，可以通过数据的key值计算出一个数字型的hash值。然后我们将整个hash环的范围定义为［1，L］这个区间，我们将刚才算出的hash值对L进行取余，就能算出一个key值在这个环上的位置。而每一台真实服务器结点就会负责［1-L］之间的某个区间的数据。如上图，就是一个五个结点的hash环。</p>
<p>上面hash环的L值为1000，然后我们对ABCDE 5个点分别进行hash运算，H(A) mod L = 7, H(B) mod L = 234, H(C) mod L = 447, H(D) mod L = 660, and H(E) mod L = 875 ，这样，hash值在7-233之间的所有数据，我们都让它保存在A节点上。在实际动作中，我们对数据进行hash，算出其应该在哪个节点存储即可，例：H(‘employee30′) mod L = 899 那么它应该在E节点上，H(‘employee31′) mod L = 234 那么这个数据应该在B节点上。</p>
<h3 id="-">备份数据</h3>
<p>一致性hash下的数据备份通常采用下面的方法：将数据冗余的存在其归属的节点的顺序往下的节点，例如你的冗余系数为3（即数据会在不同节点中保存三份），那么如果通过hash计算你的数据在A区间［7，233］，你的数据会被同时保存在A，B，C三个节点上。这样如果A节点出现故障，那么B，C节点就能处理这部分数据的请求了。而某些设计会使E节点将自己的范围扩大到A233，以接受对出故障的A节点的请求。</p>
<h3 id="-">优化的数据分配策略</h3>
<p>虽然hash算法能够产生相对均匀的hash值。而且通常是节点数量越多，hash算法会越平均的分配key值。然而通常在项目初期不会有太多的数据，当然也不需要那么多的机器节点，这时候就会造成数据分配不平均的问题。比如上面的5个节点，其中A节点需要负责的hash区间范围大小为227，而E节点负责的区间范围为132。同时在这种情况下，出故障后数据请求转移到相邻节点的策略也可能不好实施了。</p>
<p>为了解决由于节点比较少导致数据分配不均的问题，很多DHT系统都实现了一种叫做虚拟节点的技术。例如4个虚拟节点的系统中，A节点可能被虚拟化成A_1，A_2，A_3，A_4这四个虚拟节点，然后对这四个虚拟节点再进行hash运算，A节点负责的key值区间就比较分散了。Voldemort 使用了与上面类似的策略，它允许对虚拟节点数进行配置，通常这个节点数会大于真实节点数，这样每个真实节点实际上是负责了N个虚拟节点上的数据。</p>
<p>Cassandra 并没有使用虚拟节点到真实节点映射的方法。这导致它的数据分配是不均匀的。为了解决这种不平衡，Cassandra 利用一个异步的进程根据各节点的历史负载情况来调节数据的分布。</p>
<h3 id="13-4-4-">13.4.4 连续范围分区</h3>
<p>使用连续范围分区的方法进行数据分片，需要我们保存一份映射关系表，标明哪一段key值对应存在哪台机器上。和一致性hash类似，连续范围分区会把key值按连续的范围分段，每段数据会被指定保存在某个节点上，然后会被冗余备份到其它的节点。和一致性hash不同的是，连续范围分区使得key值上相邻的两个数据在存储上也基本上是在同一个数据段。这样数据路由表只需记录某段数据的开始和结束点［start，end］就可以了。</p>
<p>通过动态调整数据段到机器结点的映射关系，可以更精确的平衡各节点机器负载。如果某个区段的数据负载比较大，那么负载控制器就可以通过缩短其所在节点负责的数据段，或者直接减少其负责的数据分片数目。通过添加这样一个监控和路由模块，使我们能够更好的对数据节点进行负载均衡。</p>
<h3 id="bigtable-">BigTable的处理方式</h3>
<p>Google BigTable 论文中描述了一种范围分区方式，它将数据切分成一个个的tablet数据块。每个tablet保存一定数量的键值对。然后每个Tablet 服务器会存储多个tablet块，具体每个Tablet服务器保存的tablet数据块数，则是由服务器压力来决定的。</p>
<p>每个tablet大概100-200MB大。如果tablet的尺寸变小，那么两个tablet可能会合并成一个tablet，同样的如果一个tablet过大，它也会被分裂成两个tablet，以保持每个tablet的大小在一定范围内。在整个系统中有一个master机器，会根据tablet的大小、负载情况以及机器的负载能力等因素动态地调整tablet在各个机器上的分布。</p>
<p><a href="http://blog.nosqlfan.com/wp-content/uploads/2011/06/BigTable-based-Range-Partitioning.png" target="_blank"><img src="&quot;[BigTable-based Range Partitioning]&quot;" alt=""></a>
master服务器会把 tablet 的归属关系存在元数据表里。当数据量非常大时，这个元数据表实际也会变得非常大，所以归属关系表实际上也是被切分成一个个的tablet保存在tablet服务器中的。这样整个数据存储就被分成了如上图的三层模型。</p>
<p>下面我们解释一下上面图中的例子。当某个客户端要从BigTable系统中获取key值为900的数据时，首先他会到第一级元数据服务器A（METADATA0）去查询，第一级元数据服务器查询自己的元数据表，500-1500这个区间中的所有元数据都存在B服务器中，于是会返回客户端说去B服务器查询，客户端再到B服务器中进行查询，B服务器判断到850-950这个区间中的数据都存在tablet服务器C中，于是会告知客户端到具体的tablet服务器C去查询。然后客户端再发起一次向C服务器的请求，就能获取到900对应的数据了。然后，客户端会把这个查询结果进行缓存，以避免对元数据服务器的频繁请求。在这样的三层架构下，只需要128MB的元数据存储，就能定位234 个tablet数据块了（按128MB一个数据块算，是261bytes的数据）。</p>
<h3 id="-">故障处理</h3>
<p>在BigTable中，master机器是一个故障单点，不过系统可以容忍短时间的master故障。另一方面，如果tablet 服务器故障，那么master可以把对其上tablet的所有请求分配到其它机器节点。</p>
<p>为了监测和处理节点故障，BigTable实现了一个叫Chubby的模块，Chubby是一个分布式的锁系统，用于管理集群成员及检测各成员是否存活。ZooKeeper是Chubby的一个开源实现，有很多基于 Hadoop 的项目都使用它来进行二级master和tablet节点的调度。</p>
<h3 id="-nosql-">基于范围分区的NoSQL项目</h3>
<p>HBase 借鉴了BigTable的分层理论来实现范围分区策略。tablet相关的数据存在HDFS里。HDFS 会处理数据的冗余备份，并负责保证各备份的一致性。而像处理数据请求，修改存储结构或者执行tablet的分裂和合并这种事，是具体的tablet服务器来负责的。</p>
<p>MongoDB也用了类似于BigTable的方案来实现范围分区。他用几台配置机器组成集群来管理数据在节点上的分布。这几台机器保存着一样的配置信息，他们采用 two-phase commit 协议来保证数据的一致性。这些配置节点实际上同时扮演了BigTable中的master的路由角色，及Chubby 的高可用性调度器的角色。而MongoDB具体的数据存储节点是通过其Replica Sets方案来实现数据冗余备份的。</p>
<p>Cassandra 提供了一个有序的分区表，使你可以快速对数据进行范围查询。Cassandra也使用了一致性hash算法进行数据分配，但是不同的是，它不是直接按单条数据进行hash，而是对一段范围内的数据进行hash，也就是说20号数据和21号数据基本上会被分配在同一台机器节点上。</p>
<p>Twitter的Gizzard框架也是通过使用范围分区来管理数据在多个节点间的备份与分配。路由服务器可以部署成多层，任何一层只负责对key值进行按范围的分配到下层的不同节点。也就是说路由服务器的下层既可以是真实的数据存储节点，也可能是下层的路由节点。Gizzard的数据备份机制是通过将写操作在多台机器上执行多次来实现的。Gizzard的路由节点处理失败的写操作的方式和其它NoSQL不太一样，他要求所有更新都是幂等的（意思是可以重复执行而不会出错）。于是当一个节点故障后，其上层的路由节点会把当前的写操作cache起来并且重复地让这个节点执行，直到其恢复正常。</p>
<h3 id="13-4-5-">13.4.5 选择哪种分区策略</h3>
<p>上面我们说到了Hash分区和范围分区两种策略，哪种更好呢？这要看情况了，如果你需要经常做范围查询，需要按顺序对key值进行操作，那么你选择范围分区会比较好。因为如果选择hash分区的话，要查询一个范围的数据可能就需要跨好几个节点来进行了。</p>
<p>那如果我不会进行范围查询或者顺序查询呢？这时候hash分区相对来说可能更方便一点，而且hash分区时可能通过虚拟结点的设置来解决hash不均的问题。在hash分区中，基本上只要在客户端执行相应的hash函数就能知道对应的数据存在哪个节点上了。而如果考虑到节点故障后的数据转移情况，可能获取到数据存放节点就会麻烦一些了。</p>
<p>范围分区要求在查询数据前对配置节点还要进行一次查询，如果没有特别好的高可用容灾方案，配置节点将会是一个危险的故障单点。当然，你可以把配置节点再进行一层负载均衡来减轻负载。而范围分区时如果某个节点故障了，它上面的数据可以被分配到多个节点上，而不像在一致性hash时，只能迁移到其顺序的后一个节点，造成下一个节点的负载飙升。</p>
<h2 id="13-5-">13.5 一致性</h2>
<p>上面我们讲到了通过将数据冗余存储到不同的节点来保证数据安全和减轻负载，下面我们来看看这样做引发的一个问题：保证数据在多个节点间的一致性是非常困难的。在实际应用中我们会遇到很多困难，同步节点可能会故障，甚至会无法恢复，网络可能会有延迟或者丢包，网络原因导致集群中的机器被分隔成两个不能互通的子域等等。在NoSQL中，通常有两个层次的一致性：第一种是强一致性，既集群中的所有机器状态同步保持一致。第二种是最终一致性，既可以允许短暂的数据不一致，但数据最终会保持一致。我们先来讲一下，在分布式集群中，为什么最终一致性通常是更合理的选择，然后再来讨论两种一致性的具体实现结节。</p>
<h3 id="13-5-1-cap-">13.5.1 关于CAP理论</h3>
<p>为什么我们会考虑削弱数据的一致性呢？其实这背后有一个关于分布式系统的理论依据。这个理论最早被 Eric Brewer 提出，称为CAP理论，尔后Gilbert 和 Lynch 对CAP进行了理论证明。这一理论首先把分布式系统中的三个特性进行了如下归纳：</p>
<ul>
<li>一致性（C）：在分布式系统中的所有数据备份，在同一时刻是否同样的值。</li>
<li>可用性（A）：在集群中一部分节点故障后，集群整体是否还能响应客户端的读写请求。</li>
<li>分区容忍性（P）：集群中的某些节点在无法联系后，集群整体是否还能继续进行服务。</li>
</ul>
<p>而CAP理论就是说在分布式存储系统中，最多只能实现上面的两点。而由于当前的网络硬件肯定会出现延迟丢包等问题，所以分区容忍性是我们必须需要实现的。所以我们只能在一致性和可用性之间进行权衡，没有NoSQL系统能同时保证这三点。</p>
<p>要保证数据一致性，最简单的方法是令写操作在所有数据节点上都执行成功才能返回成功。而这时如果某个结点出现故障，那么写操作就成功不了了，需要一直等到这个节点恢复。也就是说，如果要保证强一致性，那么就无法提供7×24的高可用性。</p>
<p>而要保证可用性的话，就意味着节点在响应请求时，不用完全考虑整个集群中的数据是否一致。只需要以自己当前的状态进行请求响应。由于并不保证写操作在所有节点都写成功，这可能会导致各个节点的数据状态不一致。</p>
<p>CAP理论导致了最终一致性和强一致性两种选择。当然，事实上还有其它的选择，比如在Yahoo! 的PNUTS中，采用的就是松散的一致性和弱可用性结合的方法。但是我们讨论的NoSQL系统没有类似的实现，所以我们在后续不会对其进行讨论。</p>
<h3 id="13-5-2-">13.5.2 强一致性</h3>
<p>强一致性的保证，要求所有数据节点对同一个key值在同一时刻有同样的value值。虽然实际上可能某些节点存储的值是不一样的，但是作为一个整体，当客户端发起对某个key的数据请求时，整个集群对这个key对应的数据会达成一致。下面就举例说明这种一致性是如何实现的。</p>
<p>假设在我们的集群中，一个数据会被备份到N个结点。这N个节点中的某一个可能会扮演协调器的作用。它会保证每一个数据写操作会在成功同步到W个节点后才向客户端返回成功。而当客户端读取数据时，需要至少R个节点返回同样的数据才能返回读操作成功。而NWR之间必须要满足下面关系：R＋W&gt;N</p>
<p>下面举个实在的例子。比如我们设定N＝3（数据会备份到A、B、C三个结点）。比如值 employee30:salary 当前的值是20000，我们想将其修改为30000。我们设定W＝2，下面我们会对A、B、C三个节点发起写操作（employee30:salary, 30000），当A、B两个节点返回写成功后，协调器就会返回给客户端说写成功了。至于节点C，我们可以假设它从来没有收到这个写请求，他保存的依然是20000那个值。之后，当一个协调器执行一个对employee30:salary的读操作时，他还是会发三个请求给A、B、C三个节点：</p>
<ul>
<li>如果设定R＝1，那么当C节点先返回了20000这个值时，那我们客户端实际得到了一个错误的值。</li>
<li>如果设定R＝2，则当协调器收到20000和30000两个值时，它会发现数据不太正确，并且会在收到第三个节点的30000的值后判断20000这个值是错误的。</li>
</ul>
<p>所以如果要保证强一致性，在上面的应用场景中，我们需要设定R＝2，W＝2</p>
<p>如果写操作不能收到W个节点的成功返回，或者写操作不能得到R个一致的结果。那么协调器可能会在某个设定的过期时间之后向客户端返回操作失败，或者是等到系统慢慢调整到一致。这可能就导致系统暂时处于不可用状态。</p>
<p>对于R和W的不同设定，会导致系统在进行不同操作时需要不同数量的机器节点可用。比如你设定在所有备份节点上都写入才算写成功，既W＝N，那么只要有一个备份节点故障，写操作就失败了。一般设定是R＋W = N+1，这是保证强一致性的最小设定了。一些强一致性的系统设定W＝N，R＝1，这样就根本不用考虑各个节点数据可能不一致的情况了。</p>
<p>HBase是借助其底层的HDFS来实现其数据冗余备份的。HDFS采用的就是强一致性保证。在数据没有完全同步到N个节点前，写操作是不会返回成功的。也就是说它的W＝N，而读操作只需要读到一个值即可，也就是说它R＝1。为了不至于让写操作太慢，对多个节点的写操作是并发异步进行的。在直到所有的节点都收到了新的数据后，会自动执行一个swap操作将新数据写入。这个操作是原子性和一致性的。保证了数据在所有节点有一致的值。</p>
<h3 id="13-5-3-">13.5.3 最终一致性</h3>
<p>像Voldemort，Cassandra和Riak这些类Dynamo的系统，通常都允许用户按需要设置N，R，W三个值，即使是设置成W＋R&lt;= N也是可以的。也就是说他允许用户在强一致性和最终一致性之间自由选择。而在用户选择了最终一致性，或者是W&lt;N的强一致性时，则总会出现一段各个节点数据不同步导致系统处理不一致的时间。为了提供最终一致性的支持，这些系统会提供一些工具来使数据更新被最终同步到所有相关节点。</p>
<p>下面我们会先讲一讲如何判断数据是最新的还是陈旧的，然后我们再讨论一下如何进行数据同步，最后我们再列举一些Dynamo里使用的加速同步过程的巧妙方法。</p>
<h3 id="-">版本控制与冲突</h3>
<p>由于同一份数据在不同的节点可能存在不同值，对数据的版本控制和冲突监测就变得尤为重要。类Dynamo的系统通常都使用了一种叫vector clock（向量时钟）的版本控制机制。一个vector clock可以理解成是一个向量，它包含了这个值在每一个备份节点中修改的次数。比如说有的数据会备份到A，B，C三个节点，那么这些值的vector clock值就是类似（NA，NB，NC），而其初始值为（0，0，0）。</p>
<p>每次一个key的值被修改，其vector clock相应的值就会加1。比如有一个key值当前的vector clock值为（39，1，5），然后他在B节点被修改了一次，那么它的cector clock值就会相应的变成（39，2，5）。而当另一个节点C在收到B节点的同步请求时，他会先用自己保存的vector clock值与B传来的vector clock值进行对比，如果自己的vector clock值的每一项都小于等于B传来的这个值，那么说明这次的修改值是在自已保存的值上的修改，不会有冲突，直接进行相应的修改，并把自己的vector clock值更新。但是如果C发现自己的vector clock有些项比B大，而某些项比B小，比如B的是（39，2，5）C的是（39，1，6），那么这时候说明B的这次修改并不是在C的基础上改的，数据出现冲突了。</p>
<h3 id="-">冲突解决</h3>
<p>不同的系统有不同的冲突解决策略。Dynamo选择把冲突留给应用层来解决。如果是两个节点保存的购物车信息冲突了，可以选择简单的通过把两个数据合并进行解决。但如果是对同一份文档进行的修改冲突了，可能就需要人工来解决冲突了（译者：像我们在SVN中做的一样）。Voldemort就是采用的后者，它在发现冲突后，会把有冲突的几份数据一起返回给应用层，把冲突解决留给应用层来做。</p>
<p>Cassandra通过为每一个操作保存一个时间戳的方法来解决冲突，在冲突的几个版本里，最后修改的一个会获胜成为新的值。相对于上面的方式，它减少了通过应用层解决冲突时需要的网络访问，同时也简化了客户端的操作API。但这种策略并不适合用来处理一些需要合并冲突的场合，比如上面的购物车的例子，或者是分布式的计数器这样的应用。而Riak把Voldemort和 Cassandra 的策略都实现了。CouchDB会把冲突的key进行标识，以便应用层可以主动进行人工修复，在修复完成前，客户端的请求是无法得到确定值的。</p>
<h3 id="-">读时修复</h3>
<p>在数据读取时，如果有R个节点返回了一致的数据，那么协调器就可以认为这个值是正确的并返回给客户端了。但是在总共返回的N个值中，如果协调器发现有的数据不是最新的。那么它可以通过读时修复机制来对这些节点进行处理。这种方式在Dynamo中有描述，在Voldemort 、 Cassandra和Riak中都得到了实现。当协调器发现有的节点数据不是最新时，它会在数据不一致的节点间启动一个冲突解决过程。这样主动的修复策略并不会有多大的工作量。因为读取操作时，各个节点都已经把数据返回给协调器了，所以解决冲突越快，实际上可能造成的后续的不一致的可能性也就越小。</p>
<h3 id="hinted-handoff">Hinted Handoff</h3>
<p>Cassandra、Riak和Voldemort都实现了一种叫Hinted Handoff的技术，用来保证在有节点故障后系统的写操作不受太大影响。它的过程是如果负责某个key值的某个节点宕机了，另一个节点会被选择作为其临时切换点，以临时保存在故障节点上面的写操作。这些写操作被单独保存起来，直到故障节点恢复正常，临时节点会把这些写操作重新迁移给刚刚恢复的节点。Dynamo 论文中提到一种叫“sloppy quorum”的方法，它会把通过 Hinted Handoff 写成功的临时节点也计算在成功写入数中。但是Cassandra和Voldemort并不会将临时节点也算在写入成功节点数内，如果写入操作并没有成功写在W个正式节点中，它们会返回写入失败。当然，Hinted Handoff 策略在这些系统中也有使用，不过只是用在加速节点恢复上。</p>
<h3 id="anti-entropy">Anti-Entropy</h3>
<p>如果一个节点故障时间太长，或者是其 Hinted Handoff 临时替代节点也故障了，那么新恢复的节点就需要从其它节点中同步数据了。（译者：实际上就是要找出经过这段时间造成的数据差异，并将差异部分同步过来）。这种情况下Cassandra和Riak都实现了在Dynamo文档中提到的一种方法，叫做anti-entropy。在anti-entropy过程中，节点间通过交换Merkle Tree来找出那些不一致的部分。Merkle Tree是一个分层的hash校验机制：如果包含某个key值范围的hash值在两个数据集中不相同，那么不同点就在这个key值范围，同理，如果顶层的hash值相同，那么其负责的所有key值范围内的值都认为是相同的。这种方法的好处是，在节点恢复时，不用把所有的值都传一遍来检查哪些值是有变化的。只需要传几个hash值就能找到不一致的数据，重传这个数据即可。</p>
<h3 id="gossip">Gossip</h3>
<p>当一个分布式系统越来越大，就很难搞清集群中的每个节点的状态了。上面说到的类Dynamo 应用都采用了Dynamo文档中说到的一种古老的方法：Gossip。通过这个方法，节点间能够互相保持联系并能够检测到故障节点。其具体做法是，每隔一段时间（比如一秒），一个节点就会随便找一个曾经有过通信的节点与其交换一下其它节点的健康状态。通过这种方式，节点能够比较快速的了解到集群中哪些节点故障了，从而把这些节点负责的数据分配到其它节点去。（译者：Gossip其实是仿生学的设计，Gossip意思为流言，节点传播其它节点的健康信息，就像一个小村镇里的无聊妇人们互相说别人的闲话一样，基本上谁家谁人出什么事了，都能比较快地被所有人知道）。</p>
<h2 id="13-6-">13.6 写在最后的话</h2>
<p>目前NoSQL系统来处在它的萌芽期，我们上面讨论到的很多NoSQL系统，他们的架构、设计和接口可能都会改变。本章的目的，不在于让你了解这些NoSQL系统目前是如何工作的，而在于让你理解这些系统之所以这样实现的原因。NoSQL系统把更多的设计工作留给了应用开发工作者来做。理解上面这些组件的架构，不仅能让您写出下一个NoSQL系统，更让您对现有系统应用得更好。</p>
<h2 id="13-7-">13.7 致谢</h2>
<p>非常感谢Jackie Carter, Mihir Kedia，以及所有对本章进行校对并且提出宝贵意见的人。没有这些年来NoSQL社区的专注工作，也不会有这一章内容的诞生。各位加油。</p>
<h2 id="-">相关信息</h2>
<p>原文: <a href="http://www.aosabook.org/en/nosql.html" target="_blank"><a href="http://www.aosabook.org/en/nosql.html">http://www.aosabook.org/en/nosql.html</a></a>
原作者：<a href="http://www.aosabook.org/en/intro.html#marcus-adam" target="_blank">Adam Marcus</a>
译者：<a href="http://lgone.com/" target="_blank">iammutex</a>
组织：<a href="http://nosqlfan.com/" target="_blank">NoSQLFan</a>
翻译时间：2011年6月</p>
<p>42区 VPS</p>
<p>42qu.com 云主机 , 卖给创业的你 。 <a href="http://vps.42qu.com/by/iammutex/rss" target="_blank">点击这里 , 查看详情</a></p>
<p>anyShare<strong>一切看了好文章不转的行为，都是耍流氓！</strong> <img src="" alt=""> <a href="http://v.t.sina.com.cn/share/share.php?url=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html&amp;title=[%E8%AF%91] NoSQL%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F %E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan" title="新浪微博" target="_blank"> </a><a href="http://v.t.qq.com/share/share.php?appkey=2e295ab2ff8245229d96fa3768a9f779&amp;url=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html&amp;title=[%E8%AF%91] NoSQL%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F %E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan" title="腾讯微博" target="_blank"> </a><a href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html" title="腾讯空间" target="_blank"> </a><a href="http://share.renren.com/share/buttonshare.do?link=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html&amp;title=[%E8%AF%91] NoSQL%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F %E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan" title="人人社区" target="_blank"> </a><a href="http://www.kaixin001.com/repaste/share.php?rurl=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html&amp;rtitle=[%E8%AF%91] NoSQL%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F %E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan" title="开心社区" target="_blank"> </a><a href="http://www.douban.com/recommend/?url=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html&amp;title=[%E8%AF%91] NoSQL%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F %E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan" title="豆瓣社区" target="_blank"> </a><a href="http://cang.baidu.com/do/add?iu=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html&amp;it=[%E8%AF%91] NoSQL%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F %E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan" title="百度搜藏" target="_blank"> </a><a href="http://www.follow5.com/f5/discuz/sharelogin.jsp?url=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html&amp;title=[%E8%AF%91] NoSQL%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F %E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan" title="Follow5" target="_blank"> </a><a href="http://www.facebook.com/share.php?u=http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html" title="facebook" target="_blank"> </a><a href="http://twitter.com/home?status=[%E8%AF%91] NoSQL%E7%94%9F%E6%80%81%E7%B3%BB%E7%BB%9F %E6%9D%A5%E8%87%AA%EF%BC%9A%40nosqlfan -http%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html" title="twitter" target="_blank"> </a></p>
<p>相关文章：</p>
<ul>
<li><a href="http://blog.nosqlfan.com/html/3202.html" target="_blank">十五分钟介绍 Redis数据结构</a></li>
<li><a href="http://blog.nosqlfan.com/html/3537.html" target="_blank">Redis资料汇总专题</a></li>
<li><a href="http://blog.nosqlfan.com/html/3548.html" target="_blank">MongoDB资料汇总专题</a></li>
<li><a href="http://blog.nosqlfan.com/html/2364.html" target="_blank">非同一般的Redis介绍</a></li>
<li><a href="http://blog.nosqlfan.com/html/2925.html" target="_blank">redis 适用场景与实现</a></li>
</ul>
<p><a href="http://www.wumii.com/widget/relatedItems" title="无觅相关文章插件" target="_blank">无觅</a></p>
<p><a href="http://www.wumii.com/widget/relatedItems.htm" target="_blank"><img src="" alt="无觅相关文章插件，快速提升流量"></a></p>
<p>分类 <a href="http://blog.nosqlfan.com/topics/cassandra" title="查看 Cassandra 的全部文章" target="_blank">Cassandra</a>, <a href="http://blog.nosqlfan.com/topics/couchdb" title="查看 CouchDB 的全部文章" target="_blank">CouchDB</a>, <a href="http://blog.nosqlfan.com/topics/hadoophbase" title="查看 Hadoop&amp;HBase 的全部文章" target="_blank">Hadoop&amp;HBase</a>, <a href="http://blog.nosqlfan.com/topics/mongodb" title="查看 MongoDB 的全部文章" target="_blank">MongoDB</a>, <a href="http://blog.nosqlfan.com/topics/neo4j" title="查看 Neo4j 的全部文章" target="_blank">Neo4j</a>, <a href="http://blog.nosqlfan.com/topics/nosql%e6%9d%82%e8%b0%88" title="查看 NoSQL杂谈 的全部文章" target="_blank">NoSQL杂谈</a>, <a href="http://blog.nosqlfan.com/topics/redis" title="查看 Redis 的全部文章" target="_blank">Redis</a>, <a href="http://blog.nosqlfan.com/topics/%e7%90%86%e8%ae%ba%e5%8e%9f%e5%9c%b0" title="查看 理论原地 的全部文章" target="_blank">理论原地</a> · tag <a href="http://blog.nosqlfan.com/tags/nosql" target="_blank">nosql</a>, <a href="http://blog.nosqlfan.com/tags/nosql%e7%94%9f%e6%80%81%e7%b3%bb%e7%bb%9f" target="_blank">nosql生态系统</a>, <a href="http://blog.nosqlfan.com/tags/the-architecture-of-open-source-applications" target="_blank">The Architecture of Open Source Applications</a>, <a href="http://blog.nosqlfan.com/tags/the-nosql-ecosystem" target="_blank">The NoSQL Ecosystem</a></p>
<p><a href=""></a> <a href=""></a></p>
<p><a href="">最新</a><a href="">最早</a><a href="">最热</a></p>
<ul>
<li><a href="">6条评论</a></li>
<li><p><a href="">277条新浪微博</a></p>
</li>
<li><p><img src="" alt="Parsifal"></p>
</li>
</ul>
<p>Parsifal</p>
<p>Tablet小块在 bigtable中占据了重要位置，应该是谷歌这帮人先搞出来的，感觉这个系统背后有模拟自然界微生物行为的意味。</p>
<p>2011年6月27日<a href="">回复</a><a href="">顶</a><a href="">转发</a><a href="">举报</a></p>
<ul>
<li><img src="" alt="372520302"></li>
</ul>
<p>372520302</p>
<p>Nothing is impossible.</p>
<p>2011年6月28日<a href="">回复</a><a href="">顶</a><a href="">转发</a><a href="">举报</a></p>
<ul>
<li><img src="" alt="651729138"></li>
</ul>
<p>651729138</p>
<p>so good.</p>
<p>2011年9月20日<a href="">回复</a><a href="">顶</a><a href="">转发</a><a href="">举报</a></p>
<ul>
<li><a href="http://zhouso.com/blog" title="小道" target="_blank"><img src="" alt="小道"></a></li>
</ul>
<p><a href="http://zhouso.com/blog" target="_blank">小道</a></p>
<p>翻译的很完美。毫无一般译著的生硬感。</p>
<p>2012年10月12日<a href="">回复</a><a href="">顶</a><a href="">转发</a><a href="">举报</a>
<a href="">1</a><a href=""></a></p>
<p>社交帐号登录:</p>
<ul>
<li><a href="http://nosqlfan.duoshuo.com/login/weibo/?sso=1&amp;redirect_uri=http%3A%2F%2Fblog.nosqlfan.com%2Fwp-login.php%3Faction%3Dduoshuo_login&amp;redirect_to%3Dhttp%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html" target="_blank">微博</a></li>
<li><a href="http://nosqlfan.duoshuo.com/login/qq/?sso=1&amp;redirect_uri=http%3A%2F%2Fblog.nosqlfan.com%2Fwp-login.php%3Faction%3Dduoshuo_login&amp;redirect_to%3Dhttp%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html" target="_blank">QQ</a></li>
<li><a href="http://nosqlfan.duoshuo.com/login/renren/?sso=1&amp;redirect_uri=http%3A%2F%2Fblog.nosqlfan.com%2Fwp-login.php%3Faction%3Dduoshuo_login&amp;redirect_to%3Dhttp%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html" target="_blank">人人</a></li>
<li><a href="http://nosqlfan.duoshuo.com/login/douban/?sso=1&amp;redirect_uri=http%3A%2F%2Fblog.nosqlfan.com%2Fwp-login.php%3Faction%3Dduoshuo_login&amp;redirect_to%3Dhttp%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html" target="_blank">豆瓣</a></li>
<li><p><a href="">更多»</a></p>
</li>
<li><p><a href="http://nosqlfan.duoshuo.com/login/kaixin/?sso=1&amp;redirect_uri=http%3A%2F%2Fblog.nosqlfan.com%2Fwp-login.php%3Faction%3Dduoshuo_login&amp;redirect_to%3Dhttp%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html" target="_blank">开心</a></p>
</li>
<li><a href="http://nosqlfan.duoshuo.com/login/netease/?sso=1&amp;redirect_uri=http%3A%2F%2Fblog.nosqlfan.com%2Fwp-login.php%3Faction%3Dduoshuo_login&amp;redirect_to%3Dhttp%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html" target="_blank">网易</a></li>
<li><a href="http://nosqlfan.duoshuo.com/login/sohu/?sso=1&amp;redirect_uri=http%3A%2F%2Fblog.nosqlfan.com%2Fwp-login.php%3Faction%3Dduoshuo_login&amp;redirect_to%3Dhttp%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html" target="_blank">搜狐</a></li>
<li><a href="http://nosqlfan.duoshuo.com/login/baidu/?sso=1&amp;redirect_uri=http%3A%2F%2Fblog.nosqlfan.com%2Fwp-login.php%3Faction%3Dduoshuo_login&amp;redirect_to%3Dhttp%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html" target="_blank">百度</a></li>
<li><a href="http://nosqlfan.duoshuo.com/login/google/?sso=1&amp;redirect_uri=http%3A%2F%2Fblog.nosqlfan.com%2Fwp-login.php%3Faction%3Dduoshuo_login&amp;redirect_to%3Dhttp%3A%2F%2Fblog.nosqlfan.com%2Fhtml%2F2171.html" target="_blank">谷歌</a>
<a href=""><img src="" alt=""></a></li>
</ul>
<p>发布</p>
<p><a href="http://duoshuo.com/" target="_blank">Powered by 多说</a></p>
<ol>
<li>Hshqcn on <a href="http://blog.nosqlfan.com/html/2171.html/comment-page-1#comment-844" target="_blank">2011年06月25日 at 03:36</a> said:</li>
</ol>
<p>先支持再看。</p>
<ol>
<li>Parsifal on <a href="http://blog.nosqlfan.com/html/2171.html/comment-page-1#comment-848" target="_blank">2011年06月27日 at 09:04</a> said:</li>
</ol>
<p>Tablet小块在 bigtable中占据了重要位置，应该是谷歌这帮人先搞出来的，感觉这个系统背后有模拟自然界微生物行为的意味。</p>
<ol>
<li>372520302 on <a href="http://blog.nosqlfan.com/html/2171.html/comment-page-1#comment-849" target="_blank">2011年06月28日 at 06:14</a> said:</li>
</ol>
<p>Nothing is impossible.</p>
<ol>
<li>651729138 on <a href="http://blog.nosqlfan.com/html/2171.html/comment-page-1#comment-958" target="_blank">2011年09月20日 at 16:45</a> said:</li>
</ol>
<p>so good.</p>
<ol>
<li>Wangjinpeng0417 on <a href="http://blog.nosqlfan.com/html/2171.html/comment-page-1#comment-1074" target="_blank">2011年12月1日 at 04:57</a> said:</li>
</ol>
<p>原文： On the flip side, columns which have few or no NULL values must still store the column identifier with each row, which leads to greater space consumption.
翻译：另一方面，对于那些很少有某一行有NULL值的列，由于每一个数据必须包含列标识，这又会造成空间的浪费
意思应该是： 另一方面，对于某些拥有非NULL的小值的列（比如值为1byte），数据还是要存储完整的行和列标识（作为Key），这会造成空间浪费（Key值可能比Value大好多）。
可能原文表达的本身不是特别清楚，我是根据BigTable数据模型来推断的。</p>
<ol>
<li><a href="http://zhouso.com/blog" target="_blank">小道</a> on <a href="http://blog.nosqlfan.com/html/2171.html/comment-page-1#comment-2473" target="_blank">2012年10月12日 at 17:44</a> said:</li>
</ol>
<p>翻译的很完美。毫无一般译著的生硬感。</p>
<p>*</p>
<ul>
<li><h2 id="-">关注与订阅</h2>
</li>
</ul>
<p><a href="http://twitter.com/nosqlfan" title="twitter" target="_blank"><img src="" alt=""></a> <a href="http://weibo.com/nosqlfan" title="新浪微博" target="_blank"><img src="" alt=""></a> <a href="http://t.qq.com/nosqlfan" title="腾迅微博" target="_blank"><img src="" alt=""></a> <a href="http://feed.feedsky.com/nosqlfan" title="RSS订阅" target="_blank"><img src="" alt=""></a></p>
<ul>
<li><h2 id="-">专题</h2>
</li>
<li><p><a href="http://blog.nosqlfan.com/html/3537.html" target="_blank">Redis资料汇总专题</a> new</p>
</li>
<li><a href="http://blog.nosqlfan.com/html/3548.html" target="_blank">MongoDB资料汇总专题</a> new</li>
<li><h2 id="-">赞助商</h2>
</li>
</ul>
<p>计算关于生命、宇宙以及一切的终极的答案。 <a href="http://vps.42qu.com/by/iammutex/sidebar" target="_blank"><img src="" alt=""></a> <a href="http://vps.42qu.com/by/iammutex/sidebar" target="_blank">42qu.com 主机空间</a></p>
<ul>
<li>中国 BGP 六线 / 美国五机房可选</li>
<li>独立 IP / root 权限</li>
<li><a href="http://www.vpsee.com/" target="_blank">vpsee</a> 专业技术支持</li>
<li>XEN 虚拟机，卖给创业的你</li>
<li><h2 id="nosql-">NoSQL问答</h2>
</li>
</ul>
<p>SegmentFault - 专注于中文开发者的技术问答！ <a href="http://segmentfault.com/t/nosql" target="_blank"><img src="" alt=""></a></p>
<ul>
<li><a href="http://segmentfault.com/t/redis" target="_blank">Redis</a></li>
<li><a href="http://segmentfault.com/t/mongodb" target="_blank">MongoDB</a></li>
<li><h2 id="nosqlfan-">NoSQLFan图书频道</h2>
</li>
</ul>
<p><a href="http://blog.nosqlfan.com/books" target="_blank"><img src="" alt=""></a></p>
<ul>
<li><h2 id="-">热门文章</h2>
</li>
<li><p><a href="http://blog.nosqlfan.com/html/3537.html" title="Redis资料汇总专题" target="_blank">Redis资料汇总专题</a></p>
</li>
<li><a href="http://blog.nosqlfan.com/html/3548.html" title="MongoDB资料汇总专题" target="_blank">MongoDB资料汇总专题</a></li>
<li><a href="http://blog.nosqlfan.com/html/3202.html" title="十五分钟介绍 Redis数据结构" target="_blank">十五分钟介绍 Redis数据结构</a></li>
<li><a href="http://blog.nosqlfan.com/html/2364.html" title="强烈推荐！非同一般的Redis介绍" target="_blank">强烈推荐！非同一般的Redis介绍</a></li>
<li><a href="http://blog.nosqlfan.com/html/1282.html" title="Redis资料汇总" target="_blank">Redis资料汇总</a></li>
<li><a href="http://blog.nosqlfan.com/html/213.html" title="MongoDB管理工具" target="_blank">MongoDB管理工具</a></li>
<li><a href="http://blog.nosqlfan.com/html/3139.html" title="Redis系统性介绍" target="_blank">Redis系统性介绍</a></li>
<li><a href="http://blog.nosqlfan.com/html/4209.html" title="2013年中国数据库大会PPT" target="_blank">2013年中国数据库大会PPT</a></li>
<li><a href="http://blog.nosqlfan.com/html/2395.html" title="一个很棒的Redis介绍PPT" target="_blank">一个很棒的Redis介绍PPT</a></li>
<li><a href="http://blog.nosqlfan.com/html/2171.html" title="[译] NoSQL生态系统" target="_blank">[译] NoSQL生态系统</a></li>
<li><h2 id="-">标签云</h2>
</li>
</ul>
<p><a href="http://blog.nosqlfan.com/tags/%e7%9b%91%e6%8e%a7" title="12 个主题" target="_blank">监控</a> <a href="http://blog.nosqlfan.com/tags/riak" title="17 个主题" target="_blank">Riak</a> <a href="http://blog.nosqlfan.com/tags/%e4%bb%8b%e7%bb%8d" title="12 个主题" target="_blank">介绍</a> <a href="http://blog.nosqlfan.com/tags/couchdb" title="52 个主题" target="_blank">CouchDB</a> <a href="http://blog.nosqlfan.com/tags/%e6%80%a7%e8%83%bd" title="11 个主题" target="_blank">性能</a> <a href="http://blog.nosqlfan.com/tags/cassandra" title="47 个主题" target="_blank">Cassandra</a> <a href="http://blog.nosqlfan.com/tags/mongodb" title="204 个主题" target="_blank">MongoDB</a> <a href="http://blog.nosqlfan.com/tags/leveldb" title="10 个主题" target="_blank">LevelDB</a> <a href="http://blog.nosqlfan.com/tags/nosql" title="75 个主题" target="_blank">nosql</a> <a href="http://blog.nosqlfan.com/tags/mysql" title="11 个主题" target="_blank">MySQL</a> <a href="http://blog.nosqlfan.com/tags/%e6%ba%90%e7%a0%81" title="18 个主题" target="_blank">源码</a> <a href="http://blog.nosqlfan.com/tags/node-js" title="10 个主题" target="_blank">node.js</a> <a href="http://blog.nosqlfan.com/tags/%e6%95%99%e7%a8%8b" title="11 个主题" target="_blank">教程</a> <a href="http://blog.nosqlfan.com/tags/replica-sets" title="10 个主题" target="_blank">Replica Sets</a> <a href="http://blog.nosqlfan.com/tags/hadoop" title="47 个主题" target="_blank">hadoop</a> <a href="http://blog.nosqlfan.com/tags/mapreduce" title="17 个主题" target="_blank">mapreduce</a> <a href="http://blog.nosqlfan.com/tags/neo4j" title="13 个主题" target="_blank">Neo4j</a> <a href="http://blog.nosqlfan.com/tags/python" title="14 个主题" target="_blank">Python</a> <a href="http://blog.nosqlfan.com/tags/hbase" title="33 个主题" target="_blank">hbase</a> <a href="http://blog.nosqlfan.com/tags/redis" title="157 个主题" target="_blank">Redis</a></p>
<ul>
<li><h2 id="-">分类</h2>
</li>
<li><p><a href="http://blog.nosqlfan.com/topics/cassandra" title="查看 Cassandra 下的所有文章" target="_blank">Cassandra</a> (41)</p>
</li>
<li><a href="http://blog.nosqlfan.com/topics/couchdb" title="查看 CouchDB 下的所有文章" target="_blank">CouchDB</a> (55)</li>
<li><a href="http://blog.nosqlfan.com/topics/hadoophbase" title="查看 Hadoop&amp;HBase 下的所有文章" target="_blank">Hadoop&amp;HBase</a> (57)</li>
<li><a href="http://blog.nosqlfan.com/topics/hypertable" title="查看 Hypertable 下的所有文章" target="_blank">Hypertable</a> (4)</li>
<li><a href="http://blog.nosqlfan.com/topics/kyoto-cabinet" title="查看 Kyoto Cabinet 下的所有文章" target="_blank">Kyoto Cabinet</a> (2)</li>
<li><a href="http://blog.nosqlfan.com/topics/mongodb" title="查看 MongoDB 下的所有文章" target="_blank">MongoDB</a> (203)</li>
<li><a href="http://blog.nosqlfan.com/topics/neo4j" title="查看 Neo4j 下的所有文章" target="_blank">Neo4j</a> (8)</li>
<li><a href="http://blog.nosqlfan.com/topics/nosql%e6%9d%82%e8%b0%88" title="查看 NoSQL杂谈 下的所有文章" target="_blank">NoSQL杂谈</a> (113)</li>
<li><a href="http://blog.nosqlfan.com/topics/redis" title="查看 Redis 下的所有文章" target="_blank">Redis</a> (160)</li>
<li><a href="http://blog.nosqlfan.com/topics/%e6%9c%aa%e5%88%86%e7%b1%bb" title="查看 未分类 下的所有文章" target="_blank">未分类</a> (74)</li>
<li><a href="http://blog.nosqlfan.com/topics/%e7%90%86%e8%ae%ba%e5%8e%9f%e5%9c%b0" title="查看 理论原地 下的所有文章" target="_blank">理论原地</a> (45)</li>
<li><a href="http://blog.nosqlfan.com/topics/%e7%ab%99%e5%86%85%e4%ba%8b%e5%8a%a1" title="查看 站内事务 下的所有文章" target="_blank">站内事务</a> (3)</li>
<li><h2 id="-">最近文章</h2>
</li>
<li><p><a href="http://blog.nosqlfan.com/html/4218.html" title="深入理解Redis主键失效原理及实现机制" target="_blank">深入理解Redis主键失效原理及实现机制</a></p>
</li>
<li><a href="http://blog.nosqlfan.com/html/4214.html" title="MongoDB 2.5版本将提供新的查询引擎" target="_blank">MongoDB 2.5版本将提供新的查询引擎</a></li>
<li><a href="http://blog.nosqlfan.com/html/4209.html" title="2013年中国数据库大会PPT" target="_blank">2013年中国数据库大会PPT</a></li>
<li><a href="http://blog.nosqlfan.com/html/4198.html" title="Redis核心解读系列" target="_blank">Redis核心解读系列</a></li>
<li><a href="http://blog.nosqlfan.com/html/4191.html" title="MongoDB 2.4版本发布" target="_blank">MongoDB 2.4版本发布</a></li>
<li><a href="http://blog.nosqlfan.com/html/4188.html" title="Redis核心解读–集群管理工具(Redis-sentinel)" target="_blank">Redis核心解读–集群管理工具(Redis-sentinel)</a></li>
<li><a href="http://blog.nosqlfan.com/html/4179.html" title="MapReduce的模式、算法和用例" target="_blank">MapReduce的模式、算法和用例</a></li>
<li><a href="http://blog.nosqlfan.com/html/4166.html" title="Redis监控技巧" target="_blank">Redis监控技巧</a></li>
<li><a href="http://blog.nosqlfan.com/html/4156.html" title="NoSQL反模式 – 文档数据库篇" target="_blank">NoSQL反模式 – 文档数据库篇</a></li>
<li><a href="http://blog.nosqlfan.com/html/4153.html" title="Redis如何处理客户端连接" target="_blank">Redis如何处理客户端连接</a></li>
<li><a href="http://blog.nosqlfan.com/html/4150.html" title="MongoDB查询迷题（1）" target="_blank">MongoDB查询迷题（1）</a></li>
<li><a href="http://blog.nosqlfan.com/html/4147.html" title="Twemproxy – Twitter 开源的 Redis proxy" target="_blank">Twemproxy – Twitter 开源的 Redis proxy</a></li>
<li><a href="http://blog.nosqlfan.com/html/4144.html" title="从MySQL到Redis，提升数据迁移的效率" target="_blank">从MySQL到Redis，提升数据迁移的效率</a></li>
<li><a href="http://blog.nosqlfan.com/html/4139.html" title="NoSQL数据库的分布式算法" target="_blank">NoSQL数据库的分布式算法</a></li>
<li><p><a href="http://blog.nosqlfan.com/html/4135.html" title="【翻译】Redis协议" target="_blank">【翻译】Redis协议</a></p>
</li>
<li><h2 id="-">热门文章</h2>
</li>
<li><p><a href="http://blog.nosqlfan.com/html/3537.html" title="Redis资料汇总专题" target="_blank">Redis资料汇总专题</a></p>
</li>
<li><a href="http://blog.nosqlfan.com/html/3548.html" title="MongoDB资料汇总专题" target="_blank">MongoDB资料汇总专题</a></li>
<li><a href="http://blog.nosqlfan.com/html/3202.html" title="十五分钟介绍 Redis数据结构" target="_blank">十五分钟介绍 Redis数据结构</a></li>
<li><a href="http://blog.nosqlfan.com/html/2364.html" title="强烈推荐！非同一般的Redis介绍" target="_blank">强烈推荐！非同一般的Redis介绍</a></li>
<li><a href="http://blog.nosqlfan.com/html/1282.html" title="Redis资料汇总" target="_blank">Redis资料汇总</a></li>
<li><a href="http://blog.nosqlfan.com/html/213.html" title="MongoDB管理工具" target="_blank">MongoDB管理工具</a></li>
<li><a href="http://blog.nosqlfan.com/html/3139.html" title="Redis系统性介绍" target="_blank">Redis系统性介绍</a></li>
<li><a href="http://blog.nosqlfan.com/html/4209.html" title="2013年中国数据库大会PPT" target="_blank">2013年中国数据库大会PPT</a></li>
<li><a href="http://blog.nosqlfan.com/html/2395.html" title="一个很棒的Redis介绍PPT" target="_blank">一个很棒的Redis介绍PPT</a></li>
<li><a href="http://blog.nosqlfan.com/html/2171.html" title="[译] NoSQL生态系统" target="_blank">[译] NoSQL生态系统</a></li>
<li><a href="http://blog.nosqlfan.com/html/2925.html" title="redis 适用场景与实现" target="_blank">redis 适用场景与实现</a></li>
<li><a href="http://blog.nosqlfan.com/html/983.html" title="百度Hadoop分布式系统揭秘：4000节点集群" target="_blank">百度Hadoop分布式系统揭秘：4000节点集群</a></li>
<li><a href="http://blog.nosqlfan.com/html/3295.html" title="新浪微博开放平台Redis实践" target="_blank">新浪微博开放平台Redis实践</a></li>
<li><a href="http://blog.nosqlfan.com/html/2235.html" title="Redis作者谈Redis应用场景" target="_blank">Redis作者谈Redis应用场景</a></li>
<li><a href="http://blog.nosqlfan.com/html/3729.html" title="Memcached真的过时了吗？" target="_blank">Memcached真的过时了吗？</a></li>
<li><h2 id="-">文章索引模板</h2>
</li>
<li><p><a href="http://blog.nosqlfan.com/html/date/2013/07" title="2013年七月" target="_blank">2013年七月</a></p>
</li>
<li><a href="http://blog.nosqlfan.com/html/date/2013/05" title="2013年五月" target="_blank">2013年五月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2013/04" title="2013年四月" target="_blank">2013年四月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2013/03" title="2013年三月" target="_blank">2013年三月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2013/02" title="2013年二月" target="_blank">2013年二月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2013/01" title="2013年一月" target="_blank">2013年一月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2012/11" title="2012年十一月" target="_blank">2012年十一月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2012/09" title="2012年九月" target="_blank">2012年九月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2012/08" title="2012年八月" target="_blank">2012年八月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2012/07" title="2012年七月" target="_blank">2012年七月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2012/06" title="2012年六月" target="_blank">2012年六月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2012/05" title="2012年五月" target="_blank">2012年五月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2012/04" title="2012年四月" target="_blank">2012年四月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2012/03" title="2012年三月" target="_blank">2012年三月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2012/02" title="2012年二月" target="_blank">2012年二月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2012/01" title="2012年一月" target="_blank">2012年一月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2011/12" title="2011年十二月" target="_blank">2011年十二月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2011/11" title="2011年十一月" target="_blank">2011年十一月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2011/10" title="2011年十月" target="_blank">2011年十月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2011/09" title="2011年九月" target="_blank">2011年九月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2011/08" title="2011年八月" target="_blank">2011年八月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2011/07" title="2011年七月" target="_blank">2011年七月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2011/06" title="2011年六月" target="_blank">2011年六月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2011/05" title="2011年五月" target="_blank">2011年五月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2011/04" title="2011年四月" target="_blank">2011年四月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2011/03" title="2011年三月" target="_blank">2011年三月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2011/02" title="2011年二月" target="_blank">2011年二月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2011/01" title="2011年一月" target="_blank">2011年一月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2010/12" title="2010年十二月" target="_blank">2010年十二月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2010/11" title="2010年十一月" target="_blank">2010年十一月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2010/10" title="2010年十月" target="_blank">2010年十月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2010/09" title="2010年九月" target="_blank">2010年九月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2010/08" title="2010年八月" target="_blank">2010年八月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2010/07" title="2010年七月" target="_blank">2010年七月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2010/06" title="2010年六月" target="_blank">2010年六月</a></li>
<li><a href="http://blog.nosqlfan.com/html/date/2010/05" title="2010年五月" target="_blank">2010年五月</a></li>
<li><p><a href="http://blog.nosqlfan.com/html/date/2010/04" title="2010年四月" target="_blank">2010年四月</a></p>
</li>
<li><h2 id="-">链接表</h2>
</li>
<li><p><a href="http://10gt.com/" title="10GT分享社区-发现你未知的 分享你知道的" target="_blank">10GT</a></p>
</li>
<li><a href="http://www.3wzhaopin.com/" title="3w招聘–互联网招聘" target="_blank">3w招聘–互联网招聘</a></li>
<li><a href="http://mongoic.grandcloud.cn/" title="盛大MongoDB云服务" target="_blank">Mongo IC – 盛大MongoDB云服务</a></li>
<li><a href="http://simple-is-better.com/" title="python-cn 新闻 招聘 分享 酷站" target="_blank">python-cn 新闻 招聘 分享 酷站</a></li>
<li><a href="http://www.searchdatabase.com.cn/" title="TechTarget数据库" target="_blank">TechTarget数据库</a></li>
<li><a href="http://www.vpsee.com/" title="VPSee" target="_blank">VPSee</a></li>
<li><a href="http://www.oschina.net/" title="开源中国社区" target="_blank">开源中国社区</a></li>
<li><a href="http://www.yankay.com/" target="_blank">我自然-颜开的博客</a></li>
<li><a href="http://blog.csdn.net/v_JULY_v" target="_blank">结构之法 算法之道</a></li>
<li><a href="http://www.douban.com/group/nosql/" title="豆瓣NoSQL小组，讨论NoSQL相关话题。" target="_blank">豆瓣NoSQL小组</a></li>
<li><a href="http://www.hoterran.info/" title="hoterran的技术博客" target="_blank">运维和开发</a></li>
</ul>
<p>© 2012 <a href="http://blog.nosqlfan.com/" target="_blank">NoSQLFan</a> · <a href="http://www.nosqlfan.com/" target="_blank">NoSQLFan</a> theme by @<a href="http://twitter.com/ninayan" target="_blank">ninayan</a> <a href="http://tongji.baidu.com/hm-web/welcome/ico?s=71f4346b63eebb9cf9c0390da32421a3" target="_blank"><img src="" alt=""></a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql--译NoSQL生态系统/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql--译NoSQL生态系统" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/139/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/137/">137</a></li><li><a class="page-number" href="/page/138/">138</a></li><li><a class="page-number" href="/page/139/">139</a></li><li class="active"><li><span class="page-number current">140</span></li><li><a class="page-number" href="/page/141/">141</a></li><li><a class="page-number" href="/page/142/">142</a></li><li><a class="page-number" href="/page/143/">143</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/141/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 16:55:37</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
