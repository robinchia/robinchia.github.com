
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 105 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Httpclient--关于HttpClient的中文参数编码问题-讨论区-开源中国社区/">关于HttpClient的中文参数编码问题 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-Httpclient--关于HttpClient的中文参数编码问题-讨论区-开源中国社区/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-httpclient-">关于HttpClient的中文参数编码问题 - 讨论区 - 开源中国社区</h1>
<ul>
<li><a href="http://www.oschina.net/" target="_blank">首页</a></li>
<li><a href="http://www.oschina.net/project" target="_blank">开源软件</a></li>
<li><a href="http://www.oschina.net/question" target="_blank">讨论区</a></li>
<li><a href="http://www.oschina.net/code/list" target="_blank">代码分享</a></li>
<li><a href="http://www.oschina.net/news" target="_blank">资讯</a></li>
<li><a href="http://www.oschina.net/blog" target="_blank">博客</a></li>
<li><a href="http://www.oschina.net/android" target="_blank">Android</a></li>
<li><a href="http://www.oschina.net/job" target="_blank">招聘</a></li>
</ul>
<p>当前访客身份：游客 [ <a href="http://www.oschina.net/home/login" target="_blank">登录</a> | <a href="http://www.oschina.net/home/reg" target="_blank">加入开源中国</a> ]</p>
<p>当前位置：<a href="http://www.oschina.net/question" target="_blank">讨论区</a> » <a href="http://www.oschina.net/question?catalog=2" target="_blank">技术分享</a> » <a href="http://www.oschina.net/p/httpclient" target="_blank">HttpComponents</a></p>
<p>软件 代码 讨论区 新闻 博客
<a href="http://my.oschina.net/javayou" target="_blank"><img src="&quot;红薯&quot;" alt="红薯"></a></p>
<h1 id="-httpclient-"><a href="">关于HttpClient的中文参数编码问题</a></h1>
<p><a href="http://my.oschina.net/javayou" target="_blank">红薯</a> 发表于 10-5 17:13 3年前, <a href="http://www.oschina.net/question/12_4535#answers" target="_blank">1</a>回/762阅, 最后回答: 4个月前
<strong><a href="http://www.oschina.net/question" target="_blank">讨论区</a> » <a href="http://www.oschina.net/question?catalog=2" target="_blank">技术分享</a></strong></p>
<p>开源扑克第二轮预售，截止时间 9 月 30 日 <a href="http://www.oschina.net/shop/item6/12" target="_blank">我要购买</a>
今天在使用HttpClient提交中文参数的时候发现服务器不管怎么处理得到的字符串都是乱码，考虑应该是客户端的问题，查阅 HttpClient的文档，提到这么一段：</p>
<p>The standard for URLs ( RFC1738 ) explictly states that URLs may only contain graphic printable characters of the US-ASCII coded character set and is defined in terms of octets. The octets 80-FF hexadecimal are not used in US-ASCII and the octets OO-1F hexadecimal represent control characters; characters in these ranges must be encoded.
Characters which cannot be represented by an 8-bit ASCII code, can not be used in an URL as there is no way to reliably encode them
(the encoding scheme for URLs is based off of octets). Despite this, some servers do support varying means of encoding double byte characters in URLs,
the most common technique seems to be to use UTF-8 encoding and encode each octet separately even if a pair of octets represents one character. This however, is not specified by the standard and is highly prone to error, so it is recommended that URLs be restricted to the 8-bit ASCII range.
因此在提交中文参数的时候必须进行转码：
NameValuePair content = new NameValuePair(&quot;content&quot;,new String(&quot; 你好中国&quot;.getBytes(),&quot;8859_1&quot;));
搞定！</p>
<p><strong>标签：</strong> <a href="http://www.oschina.net/question/tag/httpclient" title="Java的HTTP协议库 HttpComponents" target="_blank">HttpComponents</a> <a href="http://www.oschina.net/question/tag/httpclient_old" title=" HttpClient" target="_blank">HttpClient</a>
<a href="">补充话题说明»</a></p>
<p><strong>分享到</strong> <a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a>**</p>
<p><a href="&quot;收藏此话题&quot;">收藏</a>
**</p>
<p>1
**</p>
<p><a href="">举报</a>
**</p>
<p><a href="&quot;踩：这问题不知道在说什么，或者没什么用&quot;">踩</a> 0 | <a href="&quot;顶：这问题很有用或者很清晰明了&quot;">顶</a> 0
**</p>
<h2 id="-http-www-oschina-net-question-12_4535-answers-http-www-oschina-net-question-12_4535-sort-time-answers-http-www-oschina-net-question-12_4535-top-1-http-www-oschina-net-question-12_4535-answerform-"><a href="http://www.oschina.net/question/12_4535#answers" target="_blank">按默认排序</a> | <a href="http://www.oschina.net/question/12_4535?sort=time#answers" target="_blank">显示最新评论</a> | <a href="http://www.oschina.net/question/12_4535#top" target="_blank">回页面顶部</a>  <a href=""></a>共有<em>1</em>个评论 <a href="http://www.oschina.net/question/12_4535#answerform">发表评论»</a></h2>
<ul>
<li><a href="http://my.oschina.net/u/437619" target="_blank"><img src="&quot;hujiong&quot;" alt="hujiong"></a></li>
</ul>
<p><a href="http://my.oschina.net/u/437619" target="_blank">hujiong</a> 回答于 2012-05-08 09:25</p>
<p><a href="">举报</a>
<a href=""><img src="" alt=""></a>
<a href="&quot;这是一个好评论，能解决问题&quot;">有帮助</a><em>(0)</em> | <a href="&quot;这评论无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> | <a href="">评论</a><em>(0)</em> | <a href="http://www.oschina.net/question/answer?question=4535&amp;answer=211268" target="_blank">引用此评论</a></p>
<p><a href="http://www.oschina.net/question/$link.user($g_user" target="_blank"><img src="&quot;非会员用户&quot;" alt="非会员用户"></a>)   <a href="&quot;粗体(Ctrl+B"></a>&quot;)<a href="&quot;斜体(Ctrl+I"></a>&quot;)<a href="&quot;下划线(Ctrl+U"></a>&quot;)<a href="&quot;删除线&quot;"></a><a href="&quot;删除格式&quot;"></a><a href="&quot;编号&quot;"></a><a href="&quot;项目符号&quot;"></a><a href="&quot;文字颜色&quot;"></a><a href="&quot;文字背景&quot;"></a><a href="&quot;字体&quot;"></a><a href="&quot;文字大小&quot;"></a><a href="&quot;超级链接&quot;"></a><a href="&quot;取消超级链接&quot;"></a><a href="&quot;插入表情&quot;"></a><a href="&quot;插入程序代码或脚本&quot;"></a><a href="&quot;图片&quot;"></a><a href="&quot;插入Flash&quot;"></a><a href="&quot;引用某段文字&quot;"></a><a href="&quot;全选&quot;"></a><a href="&quot;HTML代码&quot;"></a><a href="&quot;关于&quot;"></a>
<a href="http://www.oschina.net/question/12_4535#answers" target="_blank">回评论顶部</a> | <a href="http://www.oschina.net/question/12_4535#top" target="_blank">回页面顶部</a>
有什么技术问题吗？ <a href="http://www.oschina.net/question/ask" target="_blank">我要提问</a></p>
<p><strong><a href="http://my.oschina.net/javayou/?ft=bbs&amp;scope=2&amp;showme=1" target="_blank">全部(4766)...</a><em>红薯</em>的其他问题</strong></p>
<ul>
<li><a href="http://www.oschina.net/question/12_70587" title="OSChina 用户动态设计说明" target="_blank">OSChina 用户动态设计说明</a>(2回/241阅,26分钟前)</li>
<li><a href="http://www.oschina.net/question/12_70313" title="提取 SQL Server 的日志信息并发送邮件" target="_blank">提取 SQL Server 的日志信息并发送邮件</a>(0回/71阅,3天前)</li>
<li><a href="http://www.oschina.net/question/12_70252" title="OSChina 的留言表设计说明" target="_blank">OSChina 的留言表设计说明</a>(59回/5932阅,3天前)</li>
<li><a href="http://www.oschina.net/question/12_70228" title="遠端管理 VirtualBox 的神兵利器－RemoteBox" target="_blank">遠端管理 VirtualBox 的神兵利器－RemoteBox</a>(0回/70阅,4天前)</li>
<li><p><a href="http://www.oschina.net/question/12_70166" title="在 Node.js 上运行 Perl 脚本" target="_blank">在 Node.js 上运行 Perl 脚本</a>(0回/75阅,5天前)
<strong>类似的话题</strong></p>
</li>
<li><p><a href="http://www.oschina.net/question/1092_2616" title="HttpClient 爬数据时  中文编码问题" target="_blank">HttpClient 爬数据时 中文编码问题</a>(2回/1351阅,2年前)</p>
</li>
<li><a href="http://www.oschina.net/question/157182_34442" title="HTTPClient PostMethod 中文乱码问题解决方法" target="_blank">HTTPClient PostMethod 中文乱码问题解决方法</a>(1回/382阅,9个月前)</li>
<li><a href="http://www.oschina.net/question/12_4534" title="应用HttpClient来对付各种顽固的WEB服务器" target="_blank">应用HttpClient来对付各种顽固的WEB服务器</a>(2回/1389阅,3年前)</li>
<li><a href="http://www.oschina.net/question/163910_34519" title="httpClient 4.x中，MultipartEntity中附加中文信息时的乱码解决" target="_blank">httpClient 4.x中，MultipartEntity中附加中文信息时的乱码解决</a>(1回/566阅,9个月前)</li>
<li><a href="http://www.oschina.net/question/54100_32895" title="Android 使用 httpClient 取消http请求的方法" target="_blank">Android 使用 httpClient 取消http请求的方法</a>(0回/411阅,9个月前)</li>
<li><a href="http://www.oschina.net/question/12_4839" title="使用 Apache HttpClient 突破 J2EE 站点认证" target="_blank">使用 Apache HttpClient 突破 J2EE 站点认证</a>(0回/361阅,3年前)</li>
<li><a href="http://www.oschina.net/question/129540_31320" title="为 Android 开发访问 JAX-RS Web 服务的 Apache HttpClient 客户端" target="_blank">为 Android 开发访问 JAX-RS Web 服务的 Apache HttpClient 客户端</a>(3回/714阅,10个月前)</li>
<li><a href="http://www.oschina.net/question/12_4532" title="使用 HttpClient 和 HtmlParser 实现简易爬虫" target="_blank">使用 HttpClient 和 HtmlParser 实现简易爬虫</a>(3回/2861阅,3年前)</li>
<li><a href="http://www.oschina.net/question/54100_31016" title="Android 与 HttpClient 通讯出现乱码问题的解决" target="_blank">Android 与 HttpClient 通讯出现乱码问题的解决</a>(0回/223阅,10个月前)</li>
<li><a href="http://www.oschina.net/question/54100_34472" title="Apache HttpClient Cookie rejected 解决方法" target="_blank">Apache HttpClient Cookie rejected 解决方法</a>(1回/279阅,9个月前)</li>
<li><a href="http://www.oschina.net/question/53600_13088" title="豆瓣API求帮助" target="_blank">豆瓣API求帮助</a>(0回/245阅,1年前)</li>
<li><a href="http://www.oschina.net/question/96637_11083" title="怎么自动注册一个账户，类似yahoo.com" target="_blank">怎么自动注册一个账户，类似yahoo.com</a>(18回/883阅,2年前)</li>
<li><a href="http://www.oschina.net/question/54100_33230" title="Android Http异步请求，Callback" target="_blank">Android Http异步请求，Callback</a>(0回/650阅,9个月前)</li>
<li><a href="http://www.oschina.net/question/166763_35390" title="Android中的几种网络请求方式详解" target="_blank">Android中的几种网络请求方式详解</a>(0回/1424阅,8个月前)</li>
<li><a href="http://www.oschina.net/question/12_29683" title="打造一款 Android 联网 tic-tac-toe 游戏" target="_blank">打造一款 Android 联网 tic-tac-toe 游戏</a>(4回/709阅,11个月前)</li>
<li><a href="http://www.oschina.net/question/54100_34407" title="HttpClient, 使用C#操作Web" target="_blank">HttpClient, 使用C/#操作Web</a>(0回/35阅,9个月前)</li>
</ul>
<p>© 开源中国社区(OsChina.NET) | <a href="http://www.oschina.net/home/about" target="_blank">关于我们</a> | <a href="mailto:oschina.net@gmail.com">广告联系</a> | <a href="http://weibo.com/oschina2010" target="_blank">@新浪微博</a> | <a href="http://m.oschina.net/" target="_blank">开源中国手机版</a> | 粤ICP备12009483号-3</p>
<p><a href=""></a><a href=""></a><a href=""></a>
<img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Httpclient/">Httpclient</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Httpclient/" class="label label-primary">Httpclient</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Httpclient--关于HttpClient的中文参数编码问题-讨论区-开源中国社区/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Httpclient--关于HttpClient的中文参数编码问题-讨论区-开源中国社区" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Httpclient--XMLHttpRequest的POST中文表单问题解决方案-esffor-JavaEye技术/">XMLHttpRequest的POST中文表单问题解决方案 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-Httpclient--XMLHttpRequest的POST中文表单问题解决方案-esffor-JavaEye技术/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="xmlhttprequest-post-esffor-javaeye-">XMLHttpRequest的POST中文表单问题解决方案 - esffor - JavaEye技术网站</h1>
<p><a href="http://www.javaeye.com/" target="_blank">首页</a> <a href="http://www.javaeye.com/news" target="_blank">新闻</a> <a href="http://www.javaeye.com/forums" target="_blank">论坛</a> <a href="http://www.javaeye.com/blogs" target="_blank">博客</a> <a href="http://www.javaeye.com/job" target="_blank">招聘</a> <a href="http://esffor.javaeye.com/blog/96320#" target="_blank">更多 ▼</a></p>
<p><a href="http://www.javaeye.com/ask" target="_blank">问答</a> <a href="http://www.javaeye.com/wiki" target="_blank">知识库</a> <a href="http://www.javaeye.com/groups" target="_blank">圈子</a> <a href="http://www.javaeye.com/google_search" target="_blank">搜索</a></p>
<p><a href="http://esffor.javaeye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://www.javaeye.com/all" target="_blank">我的应用</a> <a href="http://esffor.javaeye.com/login" target="_blank">登录</a> <a href="http://esffor.javaeye.com/signup" target="_blank">注册</a></p>
<h1 id="-esffor-http-esffor-javaeye-com-"><a href="http://esffor.javaeye.com/" target="_blank">esffor</a></h1>
<p>永久域名 <a href="http://esffor.javaeye.com/" target="_blank"><a href="http://esffor.javaeye.com/">http://esffor.javaeye.com/</a></a></p>
<p><a href="http://esffor.javaeye.com/blog/96019" title="Hibernate优化查询性能手段" target="_blank">Hibernate优化查询性能手段</a> | <a href="http://esffor.javaeye.com/blog/96485" title="今天开始，回到Csdn Blog中" target="_blank">今天开始，回到Csdn Blog中</a></p>
<p>2007-03-15</p>
<h3 id="-xmlhttprequest-post-http-esffor-javaeye-com-blog-96320-"><a href="http://esffor.javaeye.com/blog/96320" target="_blank">XMLHttpRequest的POST中文表单问题解决方案</a></h3>
<p>XMLHttpRequest的POST中文表单问题解决方案</p>
<p>由于XMLHttpRequest POST的内容是用UTF-8编码，所以在服务端要先把request的编码改为UTF-8.
而且客户端post的表单是x-www-form-urlencoded的，所以也要对post的内容进行编码encodeURIComponent()函数
escape() 只是为 ASCII字符 做转换工作，转换成的 %unnnn 这样的码，如果要用更多的字符如 UTF-8字符库
就一定要用 encodeURIComponent() 或 encodeURI() 转换才可以成 %nn%nn
还有
escape() 不编码这些字符:  @/<em>/+
encodeURI() 不编码这些字符:  [!@/#$&amp;/</em>()=:/;?+&#39;](mailto:!@)
encodeURIComponent() 不编码这些字符:  !/*()&#39;</p>
<p>还是推荐使用encodeURIComponent()函数来编码比较好。</p>
<p>代码如下：</p>
<p>在客户端的js脚本</p>
<script>
function myXMLHttpRequest(){
 var xmlHttp = false;
 try {
  xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
 } catch (e) {
  try {
   xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
  } catch (e2) {
   xmlHttp = false;
  }
 }
 if (!xmlHttp && typeof XMLHttpRequest != 'undefined') {
  xmlHttp = new XMLHttpRequest();
 }
 return xmlHttp;
}

  content = "user="+**encodeURIComponent("大发")**;
  xmlHttp.Open("POST", "doc.jsp", false);
  xmlHttp.setRequestHeader("Content-Length",content.length);
  xmlHttp.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded");
  xmlHttp.Send(content);
</script>

<p>JSP</p>
<p>&lt;<a href="mailto:%@page">%@page</a> language=&quot;java&quot; contentType=&quot;text/html;charset=gbk&quot;%&gt;
&lt;%
 <strong>request.setCharacterEncoding(&quot;UTF-8&quot;);</strong>
 System.out.println(request.getParameter(&quot;user&quot;));
%&gt;</p>
<p><a href="http://esffor.javaeye.com/blog/96019" title="Hibernate优化查询性能手段" target="_blank">Hibernate优化查询性能手段</a> | <a href="http://esffor.javaeye.com/blog/96485" title="今天开始，回到Csdn Blog中" target="_blank">今天开始，回到Csdn Blog中</a></p>
<ul>
<li>18:05</li>
<li>浏览 (841)</li>
<li><a href="http://esffor.javaeye.com/blog/96320#comments" target="_blank">评论</a> (0)</li>
<li><a href="http://www.javaeye.com/wiki/topic/96320" target="_blank">相关推荐</a></li>
</ul>
<h3 id="-">评论</h3>
<p><a href=""></a></p>
<h3 id="-">发表评论</h3>
<p>您还没有登录，请<a href="http://esffor.javaeye.com/login" target="_blank">登录</a>后发表评论(快捷键 Alt+S / Ctrl+Enter)</p>
<p><a href="http://esffor.javaeye.com/" target="_blank"><img src="&quot;esffor的博客: esffor&quot;" alt="esffor的博客"></a></p>
<p>esffor</p>
<ul>
<li>浏览: 242558 次</li>
<li>性别: <img src="&quot;男&quot;" alt="Icon_minigender_1"></li>
<li>来自: 北京</li>
<li><img src="" alt=""></li>
<li><a href="http://esffor.javaeye.com/blog/profile" target="_blank">详细资料</a> <a href="http://esffor.javaeye.com/blog/guest_book" target="_blank">留言簿</a></li>
</ul>
<h3 id="-">搜索本博客</h3>
<h3 id="-http-esffor-javaeye-com-blog-user_visits-">最近访客 <a href="http://esffor.javaeye.com/blog/user_visits" target="_blank">&gt;&gt;更多访客</a></h3>
<p><a href="http://xiehx.javaeye.com/" target="_blank"><img src="&quot;xiehx的博客: &quot;" alt="xiehx的博客"></a></p>
<p><a href="http://xiehx.javaeye.com/" target="_blank">xiehx</a></p>
<p><a href="http://jpacm.javaeye.com/" target="_blank"><img src="&quot;jpacm的博客: &quot;" alt="jpacm的博客"></a></p>
<p><a href="http://jpacm.javaeye.com/" target="_blank">jpacm</a>
<a href="http://shaochen.javaeye.com/" target="_blank"><img src="&quot;shaochen的博客: &quot;" alt="shaochen的博客"></a></p>
<p><a href="http://shaochen.javaeye.com/" target="_blank">shaochen</a></p>
<p><a href="http://only-java.javaeye.com/" target="_blank"><img src="&quot;only_java的博客: 用心学java&quot;" alt="only_java的博客"></a></p>
<p><a href="http://only-java.javaeye.com/" target="_blank">only_java</a></p>
<h3 id="-">博客分类</h3>
<ul>
<li><a href="http://esffor.javaeye.com/" target="_blank">全部博客 (628)</a></li>
<li><a href="http://esffor.javaeye.com/category/16050" target="_blank">Hibernate相关 (6)</a></li>
<li><a href="http://esffor.javaeye.com/category/16051" target="_blank">Spring相关 (6)</a></li>
<li><a href="http://esffor.javaeye.com/category/16052" target="_blank">JSF相关 (0)</a></li>
<li><p><a href="http://esffor.javaeye.com/category/16053" target="_blank">JSP/Servlet相关 (0)</a></p>
<h3 id="-">其他分类</h3>
</li>
<li><p><a href="http://esffor.javaeye.com/blog/favorite" target="_blank">我的收藏</a> (1)</p>
</li>
<li><a href="http://esffor.javaeye.com/blog/forum" target="_blank">我的论坛帖子</a> (1)</li>
<li><a href="http://esffor.javaeye.com/blog/article" target="_blank">我的精华良好贴</a> (0)</li>
</ul>
<h3 id="-">最近加入圈子</h3>
<h3 id="-">存档</h3>
<ul>
<li><a href="http://esffor.javaeye.com/blog/monthblog/2008-02" target="_blank">2008-02</a> (25)</li>
<li><a href="http://esffor.javaeye.com/blog/monthblog/2008-01" target="_blank">2008-01</a> (12)</li>
<li><a href="http://esffor.javaeye.com/blog/monthblog/2007-12" target="_blank">2007-12</a> (105)</li>
<li><a href="http://esffor.javaeye.com/blog/monthblog_more" target="_blank">更多存档...</a></li>
</ul>
<h3 id="-">最新评论</h3>
<ul>
<li><a href="http://esffor.javaeye.com/blog/168307#comments" title="hibernate查询方法选择（List()与Iterator()）" target="_blank">hibernate查询方法选择（ ...</a>
43385607 写道我觉得你说的有错误，list会利用二级缓存，但是前提是开启查 ...
-- by <a href="http://547600.javaeye.com/" target="_blank">yzzh9</a></li>
<li><a href="http://esffor.javaeye.com/blog/96158#comments" title="JAVA中实现四舍五入的两种方法" target="_blank">JAVA中实现四舍五入的两种 ...</a>
这两种有什么区别吗？
-- by <a href="http://luckpig.javaeye.com/" target="_blank">有话给鬼说</a></li>
<li><a href="http://esffor.javaeye.com/blog/168243#comments" title="Hibernate乐观锁实现之Version" target="_blank">Hibernate乐观锁实现之Ve ...</a>
好文章，非常感谢！
-- by <a href="http://springjava.javaeye.com/" target="_blank">SpringJava</a></li>
<li><a href="http://esffor.javaeye.com/blog/96214#comments" title="使用循环遍历Set" target="_blank">使用循环遍历Set</a>
,我晕
-- by <a href="http://yanzhenwei.javaeye.com/" target="_blank">还有也许</a></li>
<li><p><a href="http://esffor.javaeye.com/blog/96304#comments" title="使用javamail发送SMTP验证邮件" target="_blank">使用javamail发送SMTP验证 ...</a>
我也遇到这种情况，而且用其他邮箱发也直接进入了垃圾邮件箱，不知道怎么搞的？？
-- by <a href="http://highping.javaeye.com/" target="_blank">highping</a></p>
<h3 id="-">评论排行榜</h3>
</li>
<li><p><a href="http://esffor.javaeye.com/rss" target="_blank"><img src="" alt="Rss"></a></p>
</li>
<li><a href="http://fusion.google.com/add?feedurl=http://esffor.javaeye.com/rss" target="_blank"><img src="" alt="Rss_google"></a></li>
<li><a href="http://www.zhuaxia.com/add_channel.php?url=http://esffor.javaeye.com/rss" target="_blank"><img src="" alt="Rss_zhuaxia"></a></li>
<li><a href="http://www.xianguo.com/subscribe.php?url=http://esffor.javaeye.com/rss" target="_blank"><img src="" alt="Rss_xianguo"></a></li>
<li><a href="http://www.google.com/search?hl=zh-CN&amp;q=RSS" target="_blank">[什么是RSS?]</a>
声明：JavaEye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。
© 2003-2009 JavaEye.com. All rights reserved. 上海炯耐计算机软件有限公司 [ 沪ICP备05023328号 ]</li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Httpclient/">Httpclient</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Httpclient/" class="label label-primary">Httpclient</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Httpclient--XMLHttpRequest的POST中文表单问题解决方案-esffor-JavaEye技术/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Httpclient--XMLHttpRequest的POST中文表单问题解决方案-esffor-JavaEye技术" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Httpclient--HttpClient接收数据的问题/">HttpClient接收数据的问题</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-Httpclient--HttpClient接收数据的问题/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="httpclient-">HttpClient接收数据的问题</h1>
<h1 id="-http-blog-csdn-net-devoteinjava-"><a href="http://blog.csdn.net/devoteinjava" target="_blank">没有的专栏</a></h1>
<h1 id="-">#</h1>
<ul>
<li><a href="http://passport.csdn.net/UserLogin.aspx" target="_blank">登录</a></li>
<li><a href="http://passport.csdn.net/CSDNUserRegister.aspx" target="_blank">注册</a></li>
<li><a href="http://hi.csdn.net/" target="_blank">欢迎</a></li>
<li><a href="http://writeblog.csdn.net/Signout.aspx" target="_blank">退出</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">我的博客</a></li>
<li><a href="http://writeblog.csdn.net/configure.aspx" target="_blank">配置</a></li>
<li><a href="http://writeblog.csdn.net/PostEditPlain.aspx" target="_blank">写文章</a></li>
<li><a href="http://writeblog.csdn.net/PostList.aspx" target="_blank">文章管理</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">博客首页</a></li>
</ul>
<p>*</p>
<ul>
<li><p>全站 当前博客
*</p>
</li>
<li><p><a href="http://hi.csdn.net/devoteinjava" target="_blank">空间</a></p>
</li>
<li><a href="http://blog.csdn.net/devoteinjava" target="_blank">博客</a></li>
<li><a href="http://hi.csdn.net/!s/friend/list/devoteinjava" target="_blank">好友</a></li>
<li><a href="http://hi.csdn.net/!s/album/list/devoteinjava" target="_blank">相册</a></li>
<li><a href="http://hi.csdn.net/!s/wall/to/devoteinjava" target="_blank">留言</a></li>
</ul>
<p>用户操作<a href="http://hi.csdn.net/!s/wall/to/devoteinjava" target="_blank">[留言]</a>  <a href="http://hi.csdn.net/!s/msg/to/devoteinjava" target="_blank">[发消息]</a>  <a href="http://hi.csdn.net/!s/friend/add/devoteinjava" target="_blank">[加为好友]</a> 订阅我的博客<a href="http://feeds.feedsky.com/csdn.net/devoteinjava" target="_blank"><img src="" alt="XML聚合"></a>   <a href="http://feeds.feedsky.com/csdn.net/devoteinjava" target="_blank"><img src="" alt="FeedSky"></a><a href="http://www.xianguo.com/subscribe.php?url=http://feeds.feedsky.com/csdn.net/devoteinjava" target="_blank"><img src="" alt="订阅到鲜果"></a><a href="http://fusion.google.com/add?feedurl=http://feeds.feedsky.com/csdn.net/devoteinjava" target="_blank"><img src="" alt="订阅到Google"></a><a href="http://www.zhuaxia.com/add_channel.php?url=http://feeds.feedsky.com/csdn.net/devoteinjava" target="_blank"><img src="" alt="订阅到抓虾"></a>devoteinjava的公告文章分类存档* <a href="http://blog.csdn.net/devoteinjava/archive/2008/01.aspx" target="_blank">2008年01月(1)</a></p>
<ul>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2007/06.aspx" target="_blank">2007年06月(5)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2007/05.aspx" target="_blank">2007年05月(1)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2007/04.aspx" target="_blank">2007年04月(7)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2006/09.aspx" target="_blank">2006年09月(1)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2006/08.aspx" target="_blank">2006年08月(2)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2006/05.aspx" target="_blank">2006年05月(3)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2006/04.aspx" target="_blank">2006年04月(4)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2006/03.aspx" target="_blank">2006年03月(7)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2006/02.aspx" target="_blank">2006年02月(3)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2006/01.aspx" target="_blank">2006年01月(5)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2005/12.aspx" target="_blank">2005年12月(2)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2005/11.aspx" target="_blank">2005年11月(1)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2005/10.aspx" target="_blank">2005年10月(4)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2005/09.aspx" target="_blank">2005年09月(7)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2005/08.aspx" target="_blank">2005年08月(11)</a></li>
<li><a href="http://blog.csdn.net/devoteinjava/archive/2005/07.aspx" target="_blank">2005年07月(2)</a><h1 id="-httpclient-"><img src="" alt="原创">  HttpClient接收数据的问题 <a href="&quot;收藏到我的网摘中，并分享给我的朋友&quot;">收藏</a></h1>
</li>
</ul>
<p>背景：
竞价大厅和支持系统进行项目的部署和竞价数据回调时，涉及到了传输XML文件。
发送端采用的是HttpClient技术，将XML格式的String作为Http的Body发送。</p>
<p>原先的做法：
接收端通过Jsp的request对象的getInputStream()方法获取输入流，然后用read()方法,将输入流按照byte读取，存入byte[]，然后还原成对应编码的String，并进行解析。</p>
<p>大厅升级时，遇到的问题：
由于涉及多产品，发送端的数据量大大增加。如果发现String长度如果超过4K多，就会报告XML解析报错。
逐一调试分析，发现错误的核心是inputstream.read()方法,该方法只接收到了4096个byte。
使用inputstream.read(byte[], int off, int len )方法指定长度也不行，还是只读4096个字节。</p>
<p>解决：
增加一个缓冲，采用BufferedReader读取inputstream，然后针对BufferedReader逐行读取，则接收完全正常。</p>
<p>原因分析:
没发现inputStream读取有长度限制；写了个读file的Demo测试inputStream的read方法，再次确定不存在长度的问题。
对inputStream作2次read（），发现第二次是从第4097个字节开始往下读，看来问题和缓冲相关。
翻翻HttpClient的源代码，基本确定原因是：HttpClient的传输协议是对Socket进行了封装，而默认Socket的缓冲大小4096。Socket缓冲满了就flush,发送给客户端，那么如果接收端没有用缓冲接收，一次最大只能解收到4096个字节。</p>
<p>发表于 @ 2005年10月31日　15:28:00 | <a href="http://blog.csdn.net/devoteinjava/archive/2005/10/31/520014.aspx#FeedBack" title="评论" target="_blank">评论( loading...  )</a>| <a href="http://writeblog.csdn.net/PostEdit.aspx?entryId=520014" title="编辑" target="_blank">编辑</a>| <a href="mailto:yuexn@csdn.net?subject=Article%20Report!!!&amp;body=Author:devoteinjava%0D%0AURL:http://blog.csdn.net/ArticleContent.aspx?UserName=devoteinjava&amp;Entryid=520014">举报</a>| <a href="&quot;收藏到我的网摘中，并分享给我的朋友&quot;">收藏</a></p>
<h3 id="-http-blog-csdn-net-devoteinjava-archive-2005-10-21-510671-aspx-http-blog-csdn-net-devoteinjava-archive-2005-11-25-536796-aspx-"><a href="http://blog.csdn.net/devoteinjava/archive/2005/10/21/510671.aspx" target="_blank">旧一篇:产品列表完毕</a> | <a href="http://blog.csdn.net/devoteinjava/archive/2005/11/25/536796.aspx" target="_blank">新一篇:出差记事</a><a href=""></a></h3>
<p>Copyright © devoteinjavaPowered by CSDN Blog<img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Httpclient/">Httpclient</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Httpclient/" class="label label-primary">Httpclient</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Httpclient--HttpClient接收数据的问题/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Httpclient--HttpClient接收数据的问题" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Httpclient--httpclient中文乱码问题解决方法（收藏）_bingxuelian的空间_百度空间/">httpclient中文乱码问题解决方法（收藏）_bingxuelian的空间_百度空间</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-Httpclient--httpclient中文乱码问题解决方法（收藏）_bingxuelian的空间_百度空间/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="httpclient-_bingxuelian-_-">httpclient中文乱码问题解决方法（收藏）<em>bingxuelian的空间</em>百度空间</h1>
<p><img src="" alt=""></p>
<h3 id="-">分享到</h3>
<ul>
<li><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">QQ空间</a></li>
<li><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">新浪微博</a></li>
<li><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">百度搜藏</a></li>
<li><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">人人网</a></li>
<li><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">腾讯微博</a></li>
<li><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">开心网</a></li>
<li><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">腾讯朋友</a></li>
<li><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">更多...</a></li>
</ul>
<p><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">百度分享</a></p>
<p><a href="http://hi.baidu.com/"></a></p>
<ul>
<li><a href="http://hi.baidu.com/index" target="_blank">广场</a></li>
<li><a href="http://hi.baidu.com/go/login" target="_blank">登录</a>
*</li>
<li><a href="http://hi.baidu.com/go/reg?pmfrom=qingtop" target="_blank">注册</a>
<a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">关注此空间</a><h1 id="-bingxuelian-http-hi-baidu-com-new-rtgguumtrjjmqsr-"><a href="http://hi.baidu.com/new/rtgguumtrjjmqsr" target="_blank">bingxuelian的空间</a></h1>
</li>
</ul>
<p>安然学习的地方！冰雪莲！</p>
<p>2010-07-21 12:50</p>
<h2 id="httpclient-">httpclient中文乱码问题解决方法（收藏）</h2>
<p>这里，介绍一种解决抓取后网页内容显示为乱码的办法。
前几天，在抓取某网站的信息时(<a href="http://www.99sj.com/Price/Price/Default.aspx)，第一次碰到了这种应用下的乱码问题。于是上网查了一下，提供的解决办法大致有两种：" target="_blank">http://www.99sj.com/Price/Price/Default.aspx)，第一次碰到了这种应用下的乱码问题。于是上网查了一下，提供的解决办法大致有两种：</a>
１&gt;　　private static final String CONTENT<em>CHARSET = &quot;GBK&quot;;
httpClient.getParams().setContentCharset(&quot;UTF-8&quot;);
or
httpClient.getParams().setParameter(HttpMethodParams.HTTP_CONTENT_CHARSET, ＣONTENT_CHARSET);
2&gt;　　private static final String CONTENTTYPE = &quot; text/html; charset=GBK&quot;;
getMethod.setRequestHeader(&quot;Content-Type&quot;, CONTENTTYPE);
测试了，没有任何效果（换成UTF-8也不行）。也用了String result = new String(pageSrc.getBytes(&quot;UTF-8&quot;),&quot;GBK&quot;)，依然无效。
在焦头烂额时想到了以前在学校时经常用的一句话：找问题要会追根溯源。仔细想想，字符串里面的文本内容也是通过文件流获取的，既然转换字符串字符编码不起作用，那可以设置文件流的默认编码吗？查了jdk，是可行的。
private static final String CHARSET = &quot;UTF-8&quot;;
InputStream ins = getMethod.getResponseBodyAsStream();
//按指定的字符集构建文件流
BufferedReader br = new BufferedReader(new InputStreamReader(ins,CHARSET));
StringBuffer sbf = new StringBuffer();
String line = null;
while ((line = br.readLine()) != null)
{
sbf.append(line);
}
//<em>/</em> 回收资源 /<em>/
br.close();
getMethod.releaseConnection();
//</em>/<em> 页面源文件 /</em>/
pageSource = sbf.toString();
问题解决，^</em>^。这里的CHARSET要根据实际情况设置
<a href="http://hi.baidu.com/tag/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E--%E7%88%AC%E8%99%AB%E6%8A%80%E6%9C%AF/feeds" target="_blank">/#搜索引擎--爬虫技术</a></p>
<p><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">举报</a> 浏览(303) <a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">评论</a> <a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">转载</a></p>
<p><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/4c5e943cbb3be59eb80c03a5" title="上一篇"></a></p>
<p><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/9259a4973bc07ddb1f4271a5" title="下一篇"></a>
评论</p>
<p> 同时评论给 </p>
<p> 同时评论给原文作者 </p>
<p><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank"> 发布 </a></p>
<p>500/0</p>
<p><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">收起</a>|<a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#reply" target="_blank">查看更多</a></p>
<p><a href="http://hi.baidu.com/go/show/introduce" target="_blank">帮助中心</a> | <a href="http://tieba.baidu.com/p/1781683739" target="_blank">空间客服</a> | <a href="http://tousu.baidu.com/hi/add" target="_blank">投诉中心</a> | <a href="http://www.baidu.com/search/hi_contract.html" target="_blank">空间协议</a></p>
<p>©2012 Baidu
内容很精彩，关注此空间？<a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#"></a></p>
<p><a href="http://hi.baidu.com/new/rtgguumtrjjmqsr" title="bingxuelian666" target="_blank"><img src="" alt="bingxuelian666"></a></p>
<p><a href="http://hi.baidu.com/new/rtgguumtrjjmqsr" target="_blank">bingxuelian666</a></p>
<p>性别：女年龄：0岁</p>
<p>现居：<a href="&quot;陕西 西安 &quot;">陕西西安</a></p>
<p>粉丝：<a href="http://hi.baidu.com/rtgguumtrjjmqsr/qfriend/show/fans" target="_blank">37</a>关注：<a href="http://hi.baidu.com/rtgguumtrjjmqsr/qfriend/show/follow" target="_blank">47</a>
<a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">关注</a><a href="http://hi.baidu.com/rtgguumtrjjmqsr/item/7c49ab87b2b3ef804414cfa2#" target="_blank">暂不</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Httpclient/">Httpclient</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Httpclient/" class="label label-primary">Httpclient</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Httpclient--httpclient中文乱码问题解决方法（收藏）_bingxuelian的空间_百度空间/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Httpclient--httpclient中文乱码问题解决方法（收藏）_bingxuelian的空间_百度空间" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-虚拟化_Citrix--SmartAuditorEventAPIOverview-1/">SmartAuditor Event API Overview</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-虚拟化_Citrix--SmartAuditorEventAPIOverview-1/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="smartauditor-event-api-overview-1">SmartAuditor Event API Overview-1</h1>
<p>SmartAuditor Event API
Overview
SmartAuditor provides the ability to record ICA sessions. The purpose of the SmartAuditor Event API is to allow third parties to augment session recordings with application specific event data. Arbitrary data can be added to the SmartAuditor recording stream in real-time during recording, and the same data can be retrieved in real-time during playback.
Basic Concept
The SmartAuditor Agent provides a simple COM interface that third party applications can use to add application specific event data into the recorded session. Session Recording
SmartAuditor Event Data during recording
Citrix Presentation Server
Third Party Published Application SmartAuditor Agent
LogData
IUserAPI
Published Application being recorded SmartAuditor Event API
Event Data
Recorded Stream Storage
The above diagram shows a published application running on Presentation Server with SmartAuditor session recording enabled. During the lifetime of the recorded session, the published application can add application specific event data into the recorded stream using the LogData function provided by the IUserApi interface. Application specific event data are time stamped as they are added into the recorded stream. The same event data will be available during playback of the recorded session, synchronized with the playback stream in real-time.
Session Playback
The above diagram shows how application event data are consumed during session playback. Event data are displayed in the Events and Bookmarks panel of the SmartAuditor Player. The Player can also deliver the event data as recorded to a third party consumer application built using the Player SDK. The delivery of event data is synchronized with the playback in real-time.
SmartAuditor Event API COM Server
The SmartAuditor Event API is provided as a COM Server hosted by the SmartAuditor Agent, installed on each computer running Presentation Server with SmartAuditor enabled. The SmartAuditor Event API can be enabled or disabled on a per-server basis. The default setting for each SmartAuditor Agent installation is for the COM interface to be disabled. Any attempts to connect to the interface will fail until it is enabled by the Presentation Server administrator. Please refer to the SmartAuditor Administrator’s Guide for more information on configuring the SmartAuditor Agent. When the SmartAuditor Event API is enabled, a COM interface called IUserApi is made available for third party applications to add event data to the recorded stream. The IUserApi interface contains only one function called LogData.
Event Data Storage
Event data is stored in the data stream within the session recording. If the searchable flag is set when the data is added to the recording stream, a database entry will be created and indexed against the fully qualified type associated with the data. As there is some overhead in storing each searchable event, this flag should only be set if there is an intention to search on the event text. See CTX114748 - Citrix SmartAuditor Database Schema for more information on the database storage.
<img src="" alt=""> SmartAuditor Event Data Playback
Event data added to SmartAuditor recording files are automatically available during playback. Event data are organized in a similar manner as bookmarks, and are listed in the Events and Bookmarks panel of the SmartAuditor Player. The following screenshot shows the event data as seen in the Events and Bookmarks panel (lower left corner) of the SmartAuditor Player:
Event items are labelled with a yellow dot, both in the Events and Bookmarks panel and on the player window timeline bar. Note that only the event text is displayed in the SmartAuditor Player; event binary data can only be retrieved through custom applications built on the SmartAuditor Player SDK (see the next section for more details.) Recordings containing event data originally recorded with the searchable flag set can be found using the SmartAuditor Player’s advanced search form as shown below. This allows searching by both event text and event type name.
<img src="" alt=""><br>SmartAuditor Player SDK
As indicated in the previous section, text associated with event data are automatically made available during playback within the SmartAuditor Player. Event data can also be accessed during playback via a set of library functions provided by the SmartAuditor Player SDK. The use of the Player SDK is optional. Its primary use is the rendering binary data associated with each event during playback. The Player SDK is based on an event notification or callback interface, where a third party application registers an event handler where event data can be delivered in real-time during session playback. The following C++ code fragment illustrates a typical lifecycle of an application making use of the SmartAuditor Player SDK:
// initialize Player SDK CtxPlay_Initialize(); // register event handler for all event type CtxPlay_RegisterEventHandler(MyEventHandler, L &quot;/<em>&quot;); // wait for event processing is completed (ie. via the CtxPlay_Abort() call) CtxPlay_WaitForCompletion(); // clean up CtxPlay_Dispose();
Note that the code fragment assumes that a callback function MyEventHandler is defined elsewhere. MyEventHandler is responsible for receiving event data and perform any processing as appropriate, for example, rendering event data in a human readable form.
SmartAuditor Event API COM Server
The SmartAuditor Event API is provided as a COM Server hosted by the SmartAuditor Agent, installed on each computer running Presentation Server with SmartAuditor enabled. When the SmartAuditor Event API is enabled, a COM interface called IUserApi is made available for third party applications to add event data to the recorded stream. The IUserApi interface contains only one function called LogData. ProgID The ProgID for the SmartAuditor Agent COM server is Citrix.SmartAuditor.Agent.UserApi. The ProgID is used to locate and instantiate the COM objects within the third party application.
LogData The LogData function will record provided event data into the recorded session file associated with the Presentation Server / Terminal Services session ID specified. All parameters are validated for length and format before data is recorded. If the supplied session ID is not a current Terminal Services session, or the supplied session is not being recorded by the SmartAuditor Agent, then the function call will be ignored and no error will be returned to the caller. This is to prevent the Event API being used as a means for detecting whether a particular session is actually being recorded. The fully qualified type name associated with the event data is of the form typePart1.typePart2.typePart3. The type parts can be any string, but general good naming practise is CompanyName.Subsystem.Type. For example, AcmeInc.TradingApp.Transaction.
interface IUserApi : IDispatch { HRESULT LogData( [in] int sessionId, [in] BSTR typePart1, [in] BSTR typePart2, [in] BSTR typePart3, [in] BSTR text, [in] SAFEARRAY(byte)/</em> data, [in] byte searchable); };
Parameters sessionId ID of Presentation Server / Terminal Services session to log event data for. The session ID must be greater than or equal to 0. Logging data for unknown session IDs will simply be ignored (that is, no exception will be thrown). typePart1 Event type first part of the fully qualified type name. Length of each part must be between 1 and 32 characters and must not contain any “.” (dot) characters. typePart2 Event type second part of the fully qualified type name. Length of each part must be between 1 and 32 characters and must not contain any “.” (dot) characters. typePart3 Event type third (and final) part of the fully qualified type name. Length of each part must be between 1 and 32 characters and must not contain any “.” (dot) characters.
text Event text data. Length of string must be between 1 and 128 characters. data Event binary data. Length must be between 0 and 4096 bytes. searchable Flag indicating whether the text value is database searchable. If this flag is non-zero, a database entry indexed against the fully qualified type and text fields will be created in the SmartAuditor database for the event item. Return Values ERROR_SUCCESS (HRESULT value 0x00000000) if successful. If an invalid parameter value is detected, E_INVALIDARG (HRESULT value 0x8007057) is returned or if called from .NET managed code, a System.ArgumentException is thrown. Requirements Library Interface DLL
Interop.UserApi.idl Requires Interop.UserApi.dll</p>
<p>SmartAuditor Player SDK
CtxPlay_Initialize CtxPlay_Initialize is the initialization function which is called once to initialize the Player SDK.
BOOL <strong>stdcall CtxPlay_Initialize()
Parameters None Return Values The BOOL return value indicates whether the Player SDK initialization was successful. Requirements Header Library DLL See Also CtxPlay_UnregisterEventHandler
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
  CTXPLAY_EVENT_CALLBACK CTXPLAY_EVENT_CALLBACK is the prototype of the callback function used in CtxPlay_RegisterEventHandler.
typedef void (</strong>stdcall /<em> CTXPLAY_EVENT_CALLBACK) ( IN CONST WCHAR/</em> eventType, IN CONST WCHAR/<em> label, IN CONST BYTE/</em> data, IN DWORD dataLength, IN SYSTEMTIME frameTimeUtc, IN SYSTEMTIME frameTime );
Parameters eventType [in] Type of event this data was registered against. label [in] Unicode text identifying this event. data [in] Event data. dataLength [in] Count of bytes of the data parameter. frameTimeUtc [in] Time in UTC when this event occurred. frameTime [in] Time in the server local time when this event occurred. Requirements Header Library DLL See Also CtxPlay_RegisterEventHandler
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
  CtxPlay_RegisterEventHandler The CtxPlay_RegisterEventHandler function is used for registering a callback handler with the Player SDK. The callback handler receives events during the course of playback.
BOOL <strong>stdcall CtxPlay_RegisterEventHandler ( CTXPLAY_EVENT_CALLBACK handler, CONST WCHAR/<em> eventTypeFilter );
Parameters Handler The function that will be called upon an event being received from the SmartAuditor Player. eventTypeFilter A string identifying the type of events to receive notifications for. If a handler is registered as L&quot;/</em>&quot; then the handler will receive all events. Return Values The BOOL return value indicates whether the registration of the handler was successful. Requirements Header Library DLL See Also CtxPlay_UnregisterEventHandler
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
  CtxPlay_WaitForCompletion The CtxPlay_WaitForCompletion function waits for the completion of the event data processing or until CtxPlay_Abort is called. While event processing remains active, this routine will block.
void </strong>stdcall CtxPlay_WaitForCompletion()
Parameters None Return Values None Requirements Header Library DLL See Also CtxPlay_Abort
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
  CtxPlay_UnregisterAllEventHandlers The CtxPlay_UnregisterAllEventHandlers function un-registers all event handlers previously registered with CtxPlay_RegisterEventHandler.
void <strong>stdcall CtxPlay_UnregisterAllEventHandlers()
Parameters None Return Values None Requirements Header Library DLL See Also CtxPlay_RegisterEventHandler
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
  CtxPlay_Dispose The CtxPlay_Dispose function releases any resources that the Player SDK may have consumed.
void </strong>stdcall CtxPlay_Dispose()
Parameters None Return Values None Requirements Header Library DLL See Also CtxPlay_Initialize
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
  CtxPlay_Abort The CtxPlay_Abort function aborts the processing of events.
void __stdcall CtxPlay_Abort()
Parameters None Return Values None Requirements Header Library DLL
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
See Also CtxPlay_Initialize, CtxPlay_WaitForCompletion
Code Samples
Listed below are some code samples for logging and retrieving event data. Since the SmartAuditor Event API is implemented as a COM server, many programming languages are capable of being used as clients for logging event data. The code samples require the SmartAuditor Event API and Player SDK, which is available for download from the Citrix Developer Network <a href="http://support.citrix.com/" target="_blank">http://support.citrix.com/</a>.
Adding Event Data to Recorded Session
C/# In order to make use of the SmartAuditor Event API COM interface, you will need a .NET callable wrapper called Interop.UserApi.dll. You can find this DLL in the SmartAuditor Agent installation directory. The following code sample assumes that SmartAuditor Interop.UserApi.dll has been added as a reference in the C/# project.
using System; using System.Diagnostics; using System.Runtime.InteropServices; using Interop.UserApi; // Interop derived from IUserApi.idl
namespace UserApiSample { /// <summary> /// Class for logging SmartAuditor Event Data /// </summary> public class EventDataLogger { /// <summary> /// ProgID for SmartAuditor Event API /// </summary> private const string EventApiProgID = &quot;Citrix.SmartAuditor.Agent.UserApi&quot;; /// <summary> /// COM interface for calling the SmartAuditor Event API /// </summary> private IUserApi m_EventApi = null; /// <summary> /// Log event data for specified Terminal Services session /// </summary> /// <param name="sessionId">Terminal Services session ID</param> /// <param name="dataType1">part 1 of event data type</param> /// <param name="dataType2">part 2 of event data type</param> /// <param name="dataType3">part 3 of event data type</param> /// <param name="textData">event text data</param> /// <param name="binaryData">event binary data</param> /// <param name="searchable">indicate whether text data is searchable</param> public void LogData( int sessionId, string dataType1, string dataType2, string dataType3, string textData, byte[] binaryData, bool searchable) { try { if (null == m_EventApi) { // create instance of Event API COM object Type type = Type.GetTypeFromProgID(EventApiProgID, true); if (null != type) { object obj = Activator.CreateInstance(type); m_EventApi = (IUserApi)obj; } }
if (null != m_EventApi) { m_EventApi.LogData( sessionId, dataType1, dataType2, dataType3, textData, ref binaryData, Convert.ToByte(searchable) ); } else { Debug.WriteLine(&quot;Uninitialized Event API object&quot;); throw new InvalidComObjectException(&quot;Uninitialized Event API object&quot;); } } catch (System.Exception ex) { Debug.WriteLine(ex.Message); throw ex; } } } }
The following code fragment illustrates how to obtain the Terminal Session ID for the current application. Please refer to Microsoft Platform SDK documentation for more information on Terminal Services related functions.
/// <summary> /// Enum for TS session information /// </summary> public enum WTS_INFO_CLASS { WTSInitialProgram, WTSApplicationName, WTSWorkingDirectory, WTSOEMId, WTSSessionId, WTSUserName, WTSWinStationName, WTSDomainName, WTSConnectState, WTSClientBuildNumber, WTSClientName, WTSClientDirectory, WTSClientProductId, WTSClientHardwareId, WTSClientAddress, WTSClientDisplay, WTSClientProtocolType } /// <summary> /// ID for querying current TS session /// </summary> public const int WTS_CURRENT_SESSION = -1; /// <summary> /// pinvoke for WTSQuerySessionInformation /// </summary> [DllImport(&quot;Wtsapi32.dll&quot;)] public static extern bool WTSQuerySessionInformation( System.IntPtr hServer, int sessionId, WTS_INFO_CLASS wtsInfoClass, out System.IntPtr ppBuffer, out uint pBytesReturned);
/// <summary> /// Get the current TS session ID /// </summary> public int GetCurrentSessionID() { int sessionID = -1; uint bytesReturned = 0; System.IntPtr buffer = IntPtr.Zero; bool retCode = WTSQuerySessionInformation( System.IntPtr.Zero, WTS_CURRENT_SESSION, WTS_INFO_CLASS.WTSSessionId, out buffer, out bytesReturned); if (retCode) { sessionID = Marshal.ReadInt32(buffer); } return sessionID; }
The following code fragment illustrates how event data is added to the session recording. The application is assumed to be running as a published application, and the ICA session is currently being recorded. Note that no error will be generated if the ICA session is not being recorded; this is a security feature of the EventAPI to prevent users from determining if session recording is in effect.
try { // get the current Terminal Services session ID int sessionID = GetCurrentSessionID(); // create EventDataLogger instance EventDataLogger eventLogger = new EventDataLogger(); // log some event data eventLogger.LogData( sessionID, &quot;AcmeInc&quot;, &quot;TransactApp&quot;, &quot;Transaction&quot;, &quot;Order /#123 completed&quot;, new byte[0], true); } catch (System.Exception ex) { Debug.WriteLine(ex.Message); throw ex; }</p>
<p>Adding Event Data to Recorded Session
VB.Net In order to make use of the SmartAuditor Event API COM interface, you will need a .NET callable wrapper called Interop.UserApi.dll. You can find this DLL in the SmartAuditor Agent installation directory. The following code fragment assumes that SmartAuditor Interop.UserApi.dll has been added as a reference in the VB.Net project.
Imports System.Runtime.InteropServices &#39; Sub routine for logging event data Sub LogData( <em> ByVal sessionId As Int32, </em> ByVal text As String, <em> ByVal bytes As Byte(), </em> ByVal searchable As Byte) Dim eventApi As IUserApi = <em> CType(CreateObject(&quot;Citrix.SmartAuditor.Agent.UserApi&quot;), IUserApi) eventApi.LogData( </em> sessionId, <em> &quot;AcmeInc&quot;, </em> &quot;TransactApp&quot;, <em> &quot;Transaction&quot;, </em> textLabel.Text, <em> bytes, </em> searchable) End Sub</p>
<p>Retrieving Event Data during Session Playback
C++ The following code fragment illustrates a typical use of the SmartAuditor Player SDK to receive event data during session playback. Note that the /#include statement assumes that the SmartAuditor Player SDK is installed and available. This code uses the .NET extension to C++.
Using namespace System; /#include &quot;CtxPlaySDK.h&quot; //<em>/</em> /<em> Handle binary event data /</em>/ void HandleBinaryData(const BYTE/<em> data, int dataLength) { // handle binary data as appropriate... } //</em>/<em> /</em> Event data handler /<em>/ void __stdcall MyEventHandler( IN CONST WCHAR/</em> eventType, // type of event IN CONST WCHAR/<em> label, // event text data IN CONST BYTE/</em> data, // event binary data IN DWORD dataLength, // length of binary data IN SYSTEMTIME frameTimeUtc, // event time in UTC IN SYSTEMTIME frameTime) // event time in server local time { // display event information Console::WriteLine(L&quot;Event Received:&quot;); String^ typeString = gcnew String(eventType); Console::WriteLine(L&quot; Type: {0}&quot;, typeString); String^ labelString = gcnew String(label); Console::WriteLine(L&quot; Label: {0}&quot;, labelString); // display event time Console::WriteLine(L&quot; Time (UTC): {0}/{1}/{2} {3}:{4:d2}:{5:d2}&quot;, frameTimeUtc.wDay, frameTimeUtc.wMonth, frameTimeUtc.wYear, frameTimeUtc.wHour, frameTimeUtc.wMinute, frameTimeUtc.wSecond); Console::WriteLine(L&quot; Time (Local): {0}/{1}/{2} {3}:{4:d2}:{5:d2}&quot;, frameTime.wDay, frameTime.wMonth, frameTime.wYear, frameTime.wHour, frameTime.wMinute, frameTime.wSecond); // display binary data information Console::WriteLine(L&quot; Data ({0} bytes):&quot;, dataLength); // handle binary data HandleBinaryData(data, dataLength); Console::WriteLine(L&quot;---------------------------------------------------\n&quot;); } //<em>/</em> /<em> sample main /</em>/ int main(array<String^> ^args) { const wchar_t/<em> eventTypeFilter = L&quot;/</em>&quot;; // initialize and register an event handler for the event type filter specified CtxPlay_Initialize(); CtxPlay_RegisterEventHandler(MyEventHandler, eventTypeFilter); // wait for event data processing to complete or CtxPlay_Abort() CtxPlay_WaitForCompletion(); // clean up
CtxPlay_Dispose(); Console::WriteLine(L&quot;\nEvent data processing completed.&quot;); return 0; }</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/虚拟化_Citrix/">虚拟化_Citrix</a></li></span></span> | <span class="tags">Tagged <a href="/tags/虚拟化_Citrix/" class="label label-primary">虚拟化_Citrix</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-虚拟化_Citrix--SmartAuditorEventAPIOverview-1/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-虚拟化_Citrix--SmartAuditorEventAPIOverview-1" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/104/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/102/">102</a></li><li><a class="page-number" href="/page/103/">103</a></li><li><a class="page-number" href="/page/104/">104</a></li><li class="active"><li><span class="page-number current">105</span></li><li><a class="page-number" href="/page/106/">106</a></li><li><a class="page-number" href="/page/107/">107</a></li><li><a class="page-number" href="/page/108/">108</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/106/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-25 18:15:42</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
