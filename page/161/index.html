
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 161 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-编译脚本-ant--Antbuildxml中的各种变量/">Ant build.xml中的各种变量</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:27.000Z"> <a href="/2014/02/02/2014-02-02-编译脚本-ant--Antbuildxml中的各种变量/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="ant-build-xml-">Ant build.xml中的各种变量</h1>
<p>Ant build.xml中的各种变量</p>
<p>Ant环境变量分为四种：</p>
<ol>
<li><p>build.properties文件中定义的变量</p>
</li>
<li><p>build.xml文件中定义的变量，</p>
</li>
<li><p>windows系统默认自带的环境变量，</p>
</li>
<li><p>windows系统SET的环境变量。</p>
</li>
</ol>
<p>1，3，4都是为2提供变量支持</p>
<p>基础储备：</p>
<p>Builid.xml开头一般是固定形式如下：</p>
<!--变量设置 :name工程名 basedir相对根目录，为以后创建目录做参照 . 表示当前目录-->

<project name="project_name" basedir="." default="task_name" xmlns:ivy="antlib:fr.jayasoft.ivy.ant">

<pre><code>  &lt;!-- 变量设置 --&gt;

  &lt;!-- &lt;property environment=&quot;env&quot;/&gt; 必须放在最前面，可以确保能使用到编译平台的环境变量 --&gt;

  &lt;!-- &lt;property name=&quot;project.root&quot; value=&quot;${basedir}&quot; /&gt; 必须放在第二句，在build.properties中不需要再设置此属性 --&gt;

  &lt;property environment=&quot;env&quot; /&gt;

  &lt;property name=&quot;project.root&quot; value=&quot;${basedir}&quot; /&gt;
</code></pre><p>&lt;--以上两句一是引用环境变量声明，二是去定根目录，为后来的目录结构奠定基础--&gt;</p>
<pre><code>  &lt;!—下句是import进ant属性配置文件，properties文件里存放基本的配置变量。该变量可以在build.xml中直接引用 --&gt;

  &lt;property file=&quot;build.properties&quot; /&gt;
</code></pre><p>&lt;--上句是引用外部文件--&gt;</p>
<p>l        build.properties定义的变量</p>
<p>build.properties定义变量非常的方便只要paramname=paranamevalue的形式</p>
<p>具体一下形式：</p>
<p>/#直接定义</p>
<p>rel.dir=rel</p>
<p>project.name=some_project_name</p>
<p>project.revision=1.1.0</p>
<p>/#间接引用build.properties中定义的变量</p>
<p>publish.dir=${rel.dir}/${project.revision}</p>
<p>/#间接引用build.xml中定义的变量</p>
<p>deploy.exploded.dir=${project.root}/dist/${project.name}</p>
<p>deploy.ear.dir=${project.root}/dist/weblogic</p>
<p>/#引用系统环境变量，注意要加前缀env.这个已经在build.xml文件中声明了</p>
<p>lib.wls.dir=${env.WL_HOME}/server/lib</p>
<p>weblogic.jar=${lib.wls.dir}/weblogic.jar</p>
<p>l        Build.xml定义的变量</p>
<p>build.xml定义的变量又称为属性。</p>
<p>定义形式<property name="some_name"  value="some_value" /></p>
<p>Value中可以引用：</p>
<p>Build.xml前面定义的变量param 引用形式：${paramname}</p>
<p>系统SET的环境变量，通过${env.paramname}来引用</p>
<p>windows系统自带环境变量，直接用{param.name}引用</p>
<p>l        windows系统默认自带环境变量  </p>
<p>直接用{param.name}引用</p>
<p>${user.home}环境变量</p>
<p>user.home路径，linux下为/home/，windows下一般为C:Document and Settings。其中为当前用户名。也可以在Ant中利用系统环境变量结合进行设置，这样更为灵活。windwos下的环境变量为HOMEPATH，linux下为HOME。</p>
<p>${user.user}环境变量</p>
<p>这个可以在ant中直接引用，表示当前机器的用户名。</p>
<p>l        windows系统SET的环境变量</p>
<p><property environment="env" />通过该语句引进系统环境变量；一般该语句放在project的第一条。</p>
<p>通过${env.paramname}来引用</p>
<p>至此Ant中的变量都搞清楚了，也就是学习Ant的第一步走通了。这一步通了，读biuld.xml文件豁然开朗了。
来源： <a href="[http://blog.csdn.net/hittata/article/details/4744653](http://blog.csdn.net/hittata/article/details/4744653)">[http://blog.csdn.net/hittata/article/details/4744653](http://blog.csdn.net/hittata/article/details/4744653)</a> </p>
<h2 id="-ant-http-www-blogjava-net-zhyiwww-archive-2011-09-02-357823-html-"><a href="http://www.blogjava.net/zhyiwww/archive/2011/09/02/357823.html" target="_blank">命令行和ant脚本的参数传递</a></h2>
<p>比如在执行build.xml的某些任务时候，需要从外面的命令行传递参数给ant脚本。
可以通过以下的方式进行参数传入：
ant -f ../../build.xml idc.$type.$ismenu.war -Dparent_version=$parent_version -Dson_version=$son_version
使用方法：<br>    在build.xml文件定义如下属性：
   <property name="parent.version" value="${parent_version}" />
   <property name="son.version" value="${son_version}" /></p>
<p>来源： <a href="[http://www.blogjava.net/zhyiwww/archive/2011/09/02/357823.html](http://www.blogjava.net/zhyiwww/archive/2011/09/02/357823.html)">[http://www.blogjava.net/zhyiwww/archive/2011/09/02/357823.html](http://www.blogjava.net/zhyiwww/archive/2011/09/02/357823.html)</a> </p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/编译脚本/">编译脚本</a></li></span><span class="breadcrumb"><li><a href="/categories/编译脚本/">编译脚本</a></li><li><a href="/categories/编译脚本/ant/">ant</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ant/" class="label label-primary">ant</a><a href="/tags/编译脚本/" class="label label-success">编译脚本</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:27"datetime="2014-03-07 09:54:27"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-编译脚本-ant--Antbuildxml中的各种变量/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-编译脚本-ant--Antbuildxml中的各种变量" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-编译脚本-ant--Ant核心类型/">Ant核心类型</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:27.000Z"> <a href="/2014/02/02/2014-02-02-编译脚本-ant--Ant核心类型/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="ant-">Ant核心类型</h1>
<p>Ant核心类型： </p>
<p>利用Ant工具的核心类型能方便地定义变量，并可在target中进行引用。 
所有Ant工具的类型都有id和refid两个属性，id作为这个类型的唯一标识，refid只用指定要引用的类型。  </p>
<hr>
<p>1.Assertions Type:断言类型 </p>
<p>断言类型只有enableSystemAssertions一个属性，表示是否允许系统断言，默认为unspecified，代表没有指定 </p>
<assertions enableSystemAssertions="true"> 

  <enable package="org.apache"/> 
  <disable package="org.apache.tools.ant"/> 

  <enable class="org.apache.tools.ant.Main"/> 
</assertions> 

<p>这里允许系统断言，在Java包前缀为org.apache下的Java class允许执行java断言。 
同时限制org.apache.tools.ant前缀的Java包下的类不能执行断言，但是org.apache.tools.ant.Main这个Java类指定为允许执行断言。 </p>
<hr>
<p>2.Description Type:描述类型 </p>
<p><description></description> 
对构建文件或target进行说明 </p>
<hr>
<p>3.PatternSet Type:定义模式集合(可在FileSet和DirSet中引用) </p>
<p>用以定义文件或目录集合 </p>
<patternset id="sources"> 

  <include name="std//*/*//*.java"/> 
  <include name="prof//*/*//*.java" if="professional"/> 

  <exclude name="/*/*//*Test/*"/><br></patternset> 

<p>如果属性professional在构件文件中设定了，那么在PatternSet类型中将包含子目录prof下的所有java文件 </p>
<patternset includesfile="some-file"/> 

<!--//与下面的patternset定义作用一样--> 
<patternset> 

  <includesfile name="some-file"/> 
</patternset> 

<h2 id="-some-file-">文件名包含some-file的文件 </h2>
<p>4.DirSet Type:定义目录集合 </p>
<dirset dir="${build.dir}"> 

<p>  <include name="apps//*/*/classes"/> 
  <exclude name="apps//*/*//*Test/*"/> </p>
<p></dirset> 
定义一个目录集合，这个目录集合的根目录为${build.dir}，在这个目录集合中将包含所有目录名为classes且名称中不包含有Test字符的子目录 </p>
<patternset id="non.test.classes"> 
    <include name="apps//*/*/classes"/> 

    <exclude name="aps//*/*//*Test/*"/> 
</patternset> 

<p><dirset id="${build.dir}"> 
  <patternset refid="non.test.classes"/> </p>
<p></dirset> 
在目录集合中通过PatternSet类型来指定目录集合 </p>
<hr>
<p>5.FileSet Type:定义文件集合 </p>
<p>selector类型可看作是FileSet类型中的一个元素，用以对文件进行筛选 
(1).contains selector </p>
<p>选择包含text属性中指定的字符串的文件 </p>
<fileset dir="${doc.path}" includes="/*/*//*.html"> 

  <contains text="script" casesensitive="no"/> 
</fileset> 

<p>选择${doc.path}下所有包含script字符串的html文件 
(2).date selector </p>
<p>选择文件的修改时间在某个特定的时间之前或之后的文件 </p>
<fileset dir="${jar.path}" includes="/*/*//*.jar"> 

  <date datetime="01/01/2001 12:00 AM" when="before"/><br></fileset> 

<p>选择${jar.path}下所有修改时间在01/01/2001 12:00 AM之前的文件 
(3).depend selector </p>
<p>比较两个不同目录下名称相同的文件，然后选择文件修改时间迟的那个文件 </p>
<fileset dir="${ant.1.5}/src/main" includes="/*/*//*.java"> 

  <depend targetdir="${ant.1.4.1}/src/main"/><br></fileset> 

<p>选择相对于Ant1.4版本在Ant1.5版本中修改过的Java源文件 
(4).depth selector </p>
<p>指定选择文件的文件目录的深度 </p>
<fileset dir="${doc.path}" includes="/*/*//*"> 

  <depath max="1"/> 
</fileset> 

<p>选择根目录及根目录下的第一层子目录的所有文件 
(5).different selector </p>
<p>从两个目录中选择被认为不同的文件 
属性ignoreFileTimes默认为true，表示忽略文件修改时间 </p>
<fileset dir="${ant.1.5}" includes="/*/*//*.java"> 
  <different targetdir="${ant.1.4.1}/src/main" ignoreFileTimes="false"/><br>
</fileset> 
比较Ant工具1.4和1.5版本的Java源文件，从中选择不相同的文件，选择过程不忽略文件的修改时间 

(6).filename selector 
选择符合指定文件匹配模式的文件，通常为文件名匹配。这个selector的作用与PatternSet的include和exclude相似 

negate=&quot;true&quot;反效果，相当于exclude 
<fileset dir="${doc.path}" includes="/*/*//*"> 

  <filename name="/*/*//*.css"/><br></fileset> 

<p>选择${doc.path}下所有的css样式文件 
(7).present selector </p>
<p>从FileSet的指定的目录中选择在present的targetdir指定的目录中不存在或者两个目录中都存在的文件 
present=&quot;srconly&quot;代表只从FileSet目录中选取targetdir指定目录中不存在的文件 </p>
<p>present=&quot;both&quot;代表从FileSet目录和targetdir目录中选择两个目录都存在的文件 </p>
<fileset dir="${ant.1.5}/src/main" includes="/*/*//*.java"> 

  <present present="srconly" targetdir="${ant.1.4.1}/src/main"/><br></fileset> 

<p>从Ant1.5的src/main包中选择在ant1.4的src.main包中不存在的java源文件 
(8).containsregexp selector </p>
<p>选择符合正则表达式的文件 </p>
<fileset dir="${doc.path}" includes="/*.txt"> 

  <containsregexp expression="[4-6]/.[0-9]"/><br></fileset> 

<p>从${doc.path}目录中选择文件名包含4、5或6后面跟着一个&quot;.&quot;再跟着一个0-9的数字的txt文件 
(9).size selector </p>
<p>通过文件的大小对文件进行选择 </p>
<fileset dir="${jar.path}"> 

  <patternset> 
    <include name="/*/*//*.jar"/><br>
  </patternset> 
  <size value="" units="Ki" when="more"/><br>
</fileset> 
或 

<fileset dir="${jar.path}" includes="/*/*//*.jar"> 
  <size value="" units="Ki" when="more"/><br>
</fileset> 
选择在${jar.path}目录下所有大于4096bytes的jar文件 

(10).type selector 
用于指定要选择目录还是文件 

type=&quot;dir&quot;选择目录 
type=&quot;file&quot;选择文件 

<fileset dir="${src}"> 
  <type type="dir"/> 

</fileset> 
选择${src}目录下的所有子目录 

用FileSet类型内置的include,exclude属性来定义文件集合 
<fileset dir="${server.src}" casesensitive="yes"> 

  <include name="/*/*//*.java"/> 
  <exclude name="/*/*//*Test/*"/> 

</fileset> 
可用selector类型实现相同的效果 

<fileset dir="${server.src}" casesensitive="yes"> 
  <filename name="/*/*//*.java"/> 

  <filename name="/*/*//*Test/*" negate="true"/> 
</fileset> 

<p>这个文件集合包含根目录${server.src}下的所有java文件，但不包含文件名称中含有Test字符的文件。 
用PatternSet Type类定义文件集合的实例 </p>
<fileset dir="${server.src}" casesensitive="yes"> 
  <patternset id="non.test.sources"> 

    <include name="/*/*//*.java"/> 
    <exclude name="/*/*//*Test/*"/> 

  </patternset> 
</fileset> 

<p>如果在构件文件中已定义了PatternSet类型，那么可以通过PatternSet的引用以实现相同的功能 </p>
<fileset dir="${server.src}" casesensitive="yes"> 

  <patternset refid="non.test.sources"/> 
</fileset> 

<hr>
<p>6.FileList Type:定义文件列表 </p>
<p>FileList可以包含不存在的文件，而FileSet类型指定的文件一定要存在 </p>
<filelist dir="${doc.src}" files="foo.xml,bar.xml"/> 

<p>等同于 </p>
<filelist dir="${doc.src}"> 

<p>  <file name="foo.xml"/> 
  <file name="bar.xml"/> </p>
<h2 id="-filelist-"></filelist> </h2>
<p>7.Filter Type:文件过滤器定义 
定义一组文件过滤器，在移动或复制文件时对文件内容进行替换 </p>
<p>begintoken属性定义一个特殊字符用于指定要过滤的字符串的开始位置，默认为@ 
endtoken属性定义一个特殊字符用于指定要过滤的字符串的结束位置，默认为@ </p>
<p>在FilterSet类型中可以直接包含Filter类型，用以定义具体的文件过滤器 </p>
<target name="tokenFilterDemo" depends="prepare"> 

  <tstamp> 
    <format property="now" pattern="MMMM d yyyy hh:mm aa"/> 

  </tstamp> 
  <copy todir="build" filtering="true"> 

    <fileset dir="src"> 
      <include name="/*/*//*.java"/> 

    </fileset> 
    <filterset> 

      <filter token="BUILD_DATE" value="${now}"/> 
      <filter token="COPYRIGHT" value="Copyright(C)2002 O'Reily"/> 

    </filterset> 
  </copy> 

</target> 
用于替换所有java文件中的版权信息和创建时间 

自定义替换符的文件过滤器实例 
<copy file="${build.dir}/version.txt" toFile="${dist.dir}/version.txt"> 

  <filterset begintoken="%" endtoken="!"> 
    </filter token="DATE" value="${TODAY}"> 

  </filterset> 
</copy> 

等同于 
<filterset id="myFilterSet" begintoken="%" endtoken="!"> 

  </filter token="DATE" value="${TODAY}"> 
</filterset> 

<copy file="${build.dir}/version.txt" toFile="${dist.dir}/version.txt"> 
  <filterset refid="myFilterSet"/> 

</copy> 
当复制version.txt文件时替换%DATE!为当前日期 

在FilterSet类型中可以直接包含FiltersFile类型，用以指定一个Java属性文件来替换 
替换前src.txt的内容: 

This is the test sample. 
the message will be replaced:/#MESSAGE! 

abc.properties文件中的内容: 
MESSAGE=HELLO 

构件文件的内容: 
<project name="project1" default="target1"> 

  <target name="target1"> 
    <copy toDir="afterReplace"> 

      <fileset dir="."> 
        <include name="src.txt"/> 

      </fileset> 
      <filterset begintoken="/#" endtoken="!"> 

        <filtersfile file="abc.properties"/> 
      </filterset> 

    </copy> 
  </target> 

<p></project> 
把src.txt文件复制到afterReplace目录下，同时使用abc.properties中的内容去替换/#MESSAGE!。 </p>
<p>替换后在afterReplace目录下的src.txt文件的内容如下: 
This is the test sample. </p>
<h2 id="the-message-will-be-replace-hello-">the message will be replace:HELLO </h2>
<p>8.PropertySet Type:定义属性集合 
在PropertySet中可以通过Propertyref元素引用构件文件中的其他property， </p>
<p>而PropertySet类型之间可以互相引用。 </p>
<property name="lib1" value="lib1path"/> 

<p><property name="lib2" value="lib2path"/> </p>
<propertyset id="projectset1"> 

  <projectref name="lib1"/> 
  <projectref name="lib2"/> 

</propertyset> 
定义一个属性集合，这个集合包含名字为lib1和bib2两个属性 

<propertyset id="properties-starting-with-foo"> 
  <propertyref prefix="foo" negate="true"/> 

</propertyset> 
<propertyset id="properties-starting-with-bar"> 

  <propertyref prefix="bar" negate="true"/> 
</propertyset> 

<propertyset id="my-set"> 
  <propertyset refid="properties-starting-with-foo"/> 

  <propertyset refid="properties-starting-with-bar"/> 
</propertyset> 

<h2 id="-foo-bar-">定义一个属性集合，这个集合包含非foo、bar开头的属性 </h2>
<p>9.File Mapper Type:文件映射类型(定义文件间的相互关系) 
用type属性指定实现类型，可实现的类型如下 </p>
<p>(1).identity:指定源文件与目标文件具有相同的名称 
(2).flatten:指定源文件与目标文件的名称相同，但忽略源文件中的文件目录，仅包含文件 </p>
<p>(3).glob:源文件和目标文件的匹配模式中都包含/*的匹配符 
(4).merge:用于把打包的源文件进行合并。目标文件名称与源文件相同 </p>
<p>(5).regexp:用正则表达式匹配 
(6).package:与glob相似，模式中包含/*的匹配符。package可用于替换目录名称 </p>
<p>(7).composite:用于组合多个Mapper类型，每个Mapper类型都对源文件进行操作，最后返回所有操作后的结果 
(8).chained:可包括多个Mapper类型，源文件依次经过每个Mapper，上一个Mapper的输出作为下一个Mapper的输入 </p>
<p>(9).filtermapper:用于对文件名进行过滤 
用法如<mapper type="identity"/>或<identitymapper/>， </p>
<h2 id="-chained-type-">其中chained实现类不能用type属性指定。 </h2>
<p>10.ZipFileSet Type:zip格式的文件集 
通过Ant工具内建的zip任务实现打包zip文件的功能，同时可以在zip任务中引用ZipFileSet类型指定文件 </p>
<p><zip destfile="${dist}/manual.zip"> 
  <zipfileset dir="htdocs/manual" prefix="docs/user-guide"/> </p>
<p>  <zipfileset dir="." includes="ChangeLog27.txt" fullpath="docs/ChangeLog.txt"/> 
  <zipfileset src="example.zip" mce_src="example.zip" includes="/*/*//*.html" prefix="docs/examples"/> </p>
<p></zip> 
以zip文件的形式打包htdocs/manual目录下的所有文件到docs/user-guide目录下。 </p>
<p>同时添加ChangeLog27.txt到这个zip文件的docs目录下。 
在这个zip文件中同时包含example.zip文件，example.zip文件包含docs/examples目录及其子目录下的所有html文件。 </p>
<hr>
<p>11.FilterChains和FilterReaders:过滤链和过滤读取器 </p>
<p>在Ant工具的内建任务：Concat、Copy、LoadFile、LoadProperties和Move中可以直接使用FilterChain进行过滤 </p>
<copy file="${src.file}" tofile="${dest.file}"> 

<p>  <filterchain> 
    <filterreader classname="your.extension.of.java.io.FilterReader"> </p>
<pre><code>  &lt;param name=&quot;foo&quot; value=&quot;bar&quot;/&gt; 
&lt;/filterreader&gt; 

&lt;filterreader classname=&quot;another.extension.of.java.io.FilterReader&quot;&gt; 
    &lt;!-- 指定过滤器依赖的类库 --&gt; 

    &lt;classpath&gt; 
      &lt;pathelement path=&quot;${classpath}&quot;/&gt; 

    &lt;/classpath&gt; 
  &lt;param name=&quot;blah&quot; value=&quot;blee&quot;/&gt; 

  &lt;param type=&quot;abra&quot; value=&quot;cadabra&quot;/&gt; 
&lt;/filterreader&gt; 
</code></pre><p>  &lt;/filter</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/编译脚本/">编译脚本</a></li></span><span class="breadcrumb"><li><a href="/categories/编译脚本/">编译脚本</a></li><li><a href="/categories/编译脚本/ant/">ant</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ant/" class="label label-primary">ant</a><a href="/tags/编译脚本/" class="label label-success">编译脚本</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:27"datetime="2014-03-07 09:54:27"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-编译脚本-ant--Ant核心类型/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-编译脚本-ant--Ant核心类型" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JS用法--javascript求div宽度时去掉px的超高效写法-cai555-JavaEye技术网/">javascript 求div宽度时去掉px的超高效写法 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:27.000Z"> <a href="/2014/02/02/2014-02-02-JS用法--javascript求div宽度时去掉px的超高效写法-cai555-JavaEye技术网/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="javascript-div-px-cai555-javaeye-">javascript 求div宽度时去掉px的超高效写法 - cai555 - JavaEye技术网站</h1>
<p><a href="http://www.javaeye.com/" target="_blank">首页</a> <a href="http://www.javaeye.com/news" target="_blank">新闻</a> <a href="http://www.javaeye.com/forums" target="_blank">论坛</a> <a href="http://www.javaeye.com/blogs" target="_blank">博客</a> <a href="http://www.javaeye.com/job" target="_blank">招聘</a> <a href="http://cai555.javaeye.com/blog/187530#" target="_blank">更多 ▼</a></p>
<p><a href="http://www.javaeye.com/ask" target="_blank">问答</a> <a href="http://www.javaeye.com/wiki" target="_blank">知识库</a> <a href="http://www.javaeye.com/groups" target="_blank">圈子</a> <a href="http://www.javaeye.com/google_search" target="_blank">搜索</a></p>
<p><a href="http://cai555.javaeye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://www.javaeye.com/all" target="_blank">我的应用</a> <a href="http://cai555.javaeye.com/login" target="_blank">登录</a> <a href="http://cai555.javaeye.com/signup" target="_blank">注册</a></p>
<h1 id="-cai555-http-cai555-javaeye-com-"><a href="http://cai555.javaeye.com/" target="_blank">cai555</a></h1>
<p>永久域名 <a href="http://cai555.javaeye.com/" target="_blank"><a href="http://cai555.javaeye.com/">http://cai555.javaeye.com/</a></a></p>
<p><a href="http://cai555.javaeye.com/blog/188334" title="javascript获得DOM元素X,Y坐标的函数" target="_blank">javascript获得DOM元素X,Y坐标的函数</a> | <a href="http://cai555.javaeye.com/blog/182020" title="使用telnetd java类库制作守护线程" target="_blank">使用telnetd java类库制作守护线程</a></p>
<p>2008-04-28</p>
<h3 id="-javascript-div-px-http-cai555-javaeye-com-blog-187530-"><a href="http://cai555.javaeye.com/blog/187530" target="_blank">javascript 求div宽度时去掉px的超高效写法</a></h3>
<p>关键字: javascript 求div宽度时去掉px的超高效写法</p>
<html> <head> <style type="text/css"> div/#mydiv { width: 100px; height: 100px; background-color: red; } </style> <script language="JavaScript"> function addWidth() { var mydiv = document.getElementById(&quot;mydiv&quot;); alert(mydiv.style.width+&quot;,&quot;+parseInt(mydiv.style.width)); var curr_width = parseInt(mydiv.style.width); // removes the &quot;px&quot; at the end mydiv.style.width = (curr_width + 10) +&quot;px&quot;; } </script> </head> <body> <input type="button" value="Make Bigger" onclick="addWidth()" /> <div id="mydiv" style="width:100px"></div> </body> </html>

<p>主要是这句： var curr_width = parseInt(mydiv.style.width); // removes the &quot;px&quot; at the end</p>
<p>是不是很有意思？</p>
<p><a href="http://cai555.javaeye.com/blog/188334" title="javascript获得DOM元素X,Y坐标的函数" target="_blank">javascript获得DOM元素X,Y坐标的函数</a> | <a href="http://cai555.javaeye.com/blog/182020" title="使用telnetd java类库制作守护线程" target="_blank">使用telnetd java类库制作守护线程</a></p>
<ul>
<li>13:49</li>
<li>浏览 (1111)</li>
<li><a href="http://cai555.javaeye.com/blog/187530#comments" target="_blank">评论</a> (0)</li>
<li><a href="http://www.javaeye.com/wiki/topic/187530" target="_blank">相关推荐</a></li>
</ul>
<h3 id="-">评论</h3>
<p><a href=""></a></p>
<h3 id="-">发表评论</h3>
<p>您还没有登录，请<a href="http://cai555.javaeye.com/login" target="_blank">登录</a>后发表评论(快捷键 Alt+S / Ctrl+Enter)</p>
<p><a href="http://cai555.javaeye.com/" target="_blank"><img src="&quot;cai555的博客: cai555&quot;" alt="cai555的博客"></a></p>
<p>cai555</p>
<ul>
<li>浏览: 81308 次</li>
<li>性别: <img src="&quot;男&quot;" alt="Icon_minigender_1"></li>
<li>来自: 杭州</li>
<li><img src="" alt=""></li>
<li><a href="http://cai555.javaeye.com/blog/profile" target="_blank">详细资料</a> <a href="http://cai555.javaeye.com/blog/guest_book" target="_blank">留言簿</a></li>
</ul>
<h3 id="-">搜索本博客</h3>
<h3 id="-http-cai555-javaeye-com-blog-user_visits-">最近访客 <a href="http://cai555.javaeye.com/blog/user_visits" target="_blank">&gt;&gt;更多访客</a></h3>
<p><a href="http://ymfans.javaeye.com/" target="_blank"><img src="&quot;ymfans的博客: ymfans&quot;" alt="ymfans的博客"></a></p>
<p><a href="http://ymfans.javaeye.com/" target="_blank">ymfans</a></p>
<p><a href="http://yzjklove.javaeye.com/" target="_blank"><img src="&quot;yzjklove的博客: yzjklove&quot;" alt="yzjklove的博客"></a></p>
<p><a href="http://yzjklove.javaeye.com/" target="_blank">yzjklove</a>
<a href="http://o-hello.javaeye.com/" target="_blank"><img src="&quot;o_hello的博客: &quot;" alt="o_hello的博客"></a></p>
<p><a href="http://o-hello.javaeye.com/" target="_blank">o_hello</a></p>
<p><a href="http://qq807215177.javaeye.com/" target="_blank"><img src="&quot;qq807215177的博客: &quot;" alt="qq807215177的博客"></a></p>
<p><a href="http://qq807215177.javaeye.com/" target="_blank">qq807215177</a></p>
<h3 id="-">博客分类</h3>
<ul>
<li><a href="http://cai555.javaeye.com/" target="_blank">全部博客 (237)</a></li>
<li><a href="http://cai555.javaeye.com/category/26348" target="_blank">OpenCms (38)</a></li>
<li><a href="http://cai555.javaeye.com/category/34020" target="_blank">Java-Excel报表开发POI系列 (2)</a></li>
<li><a href="http://cai555.javaeye.com/category/34663" target="_blank">javascript (28)</a></li>
<li><a href="http://cai555.javaeye.com/category/34758" target="_blank">panorama (1)</a></li>
<li><a href="http://cai555.javaeye.com/category/35973" target="_blank">libraryh3lp (1)</a></li>
<li><a href="http://cai555.javaeye.com/category/41858" target="_blank">Django (2)</a></li>
<li><a href="http://cai555.javaeye.com/category/43355" target="_blank">java (30)</a></li>
<li><a href="http://cai555.javaeye.com/category/43819" target="_blank">CSS (2)</a></li>
<li><a href="http://cai555.javaeye.com/category/46689" target="_blank">php (14)</a></li>
<li><a href="http://cai555.javaeye.com/category/61534" target="_blank">Python (13)</a></li>
<li><a href="http://cai555.javaeye.com/category/73958" target="_blank">DataBase (18)</a></li>
<li><a href="http://cai555.javaeye.com/category/78172" target="_blank">OSGI-equinox (16)</a></li>
<li><a href="http://cai555.javaeye.com/category/79795" target="_blank">Java中的位运算 (2)</a></li>
<li><p><a href="http://cai555.javaeye.com/category/85801" target="_blank">JBPM (1)</a></p>
<h3 id="-http-cai555-javaeye-com-blog-guest_book-">我的留言簿 <a href="http://cai555.javaeye.com/blog/guest_book" target="_blank">&gt;&gt;更多留言</a></h3>
</li>
<li><p>你好啊 我把路径中的两个opencms去掉后 在online下图片显示不出来怎么办 ...
-- by <a href="http://cai555.javaeye.com/blog/guest_book#12069" target="_blank">abc19840124</a></p>
</li>
<li>能留个联系方式吗？我的qq是314879089
-- by <a href="http://cai555.javaeye.com/blog/guest_book#11937" target="_blank">dongwushengde</a></li>
<li>直接把jar包放到你的/WEB-INF/lib下面就可以了，然后就可以引用J-FT ...
-- by <a href="http://cai555.javaeye.com/blog/guest_book#8065" target="_blank">cai555</a></li>
</ul>
<h3 id="-">其他分类</h3>
<ul>
<li><a href="http://cai555.javaeye.com/blog/favorite" target="_blank">我的收藏</a> (147)</li>
<li><a href="http://cai555.javaeye.com/blog/forum" target="_blank">我的论坛帖子</a> (46)</li>
<li><a href="http://cai555.javaeye.com/blog/article" target="_blank">我的精华良好贴</a> (0)<h3 id="-">最近加入圈子</h3>
</li>
</ul>
<h3 id="-">存档</h3>
<ul>
<li><a href="http://cai555.javaeye.com/blog/monthblog/2009-12" target="_blank">2009-12</a> (3)</li>
<li><a href="http://cai555.javaeye.com/blog/monthblog/2009-11" target="_blank">2009-11</a> (9)</li>
<li><a href="http://cai555.javaeye.com/blog/monthblog/2009-10" target="_blank">2009-10</a> (7)</li>
<li><p><a href="http://cai555.javaeye.com/blog/monthblog_more" target="_blank">更多存档...</a></p>
<h3 id="-">最新评论</h3>
</li>
<li><p><a href="http://cai555.javaeye.com/blog/354411#comments" title="php读取二进制流（C语言结构体struct数据文件）" target="_blank">php读取二进制流（C语言 ...</a></p>
</li>
</ul>
<p>-- by <a href="http://liexusong.javaeye.com/" target="_blank">liexusong</a></p>
<ul>
<li><a href="http://cai555.javaeye.com/blog/468409#comments" title="Java compiler level does not match the version of the installed Java project fac" target="_blank">Java compiler level does ...</a>
谢谢！在项目上右键properties--&gt;Project Facets可 ...
-- by <a href="http://justdonow.javaeye.com/" target="_blank">JustDoNow</a></li>
<li><a href="http://cai555.javaeye.com/blog/202963#comments" title="POI实现插入一行操作，就像office excel插入一行的操作" target="_blank">POI实现插入一行操作，就 ...</a>
Util 哪个util啊
-- by <a href="http://ftp51423121.javaeye.com/" target="_blank">ftp51423121</a></li>
<li><a href="http://cai555.javaeye.com/blog/256856#comments" title="Opencms 静态导出子路径的设置" target="_blank">Opencms 静态导出子路径的 ...</a>
正是我要找的，赞一个
-- by <a href="http://qinghe3012.javaeye.com/" target="_blank">qinghe3012</a></li>
<li><a href="http://cai555.javaeye.com/blog/212385#comments" title="javamail Session.getDefaultInstance和getInstance的区别" target="_blank">javamail Session.getDefa ...</a>
好  谢谢了
-- by <a href="http://c8234933.javaeye.com/" target="_blank">c8234933</a></li>
</ul>
<h3 id="-">评论排行榜</h3>
<ul>
<li><a href="http://cai555.javaeye.com/blog/351750" title="让 php curl_exec直接返回字符串" target="_blank">让 php curl_exec直接返回字符串</a></li>
<li><a href="http://cai555.javaeye.com/blog/356626" title="IE6环境下遭遇winow.location.href=&#39;&#39;的跳转bug" target="_blank">IE6环境下遭遇winow.location.href=&#39;&#39;的跳 ...</a></li>
<li><a href="http://cai555.javaeye.com/blog/354411" title="php读取二进制流（C语言结构体struct数据文件）" target="_blank">php读取二进制流（C语言结构体struct数据 ...</a></li>
<li><a href="http://cai555.javaeye.com/blog/468409" title="Java compiler level does not match the version of the installed Java project fac" target="_blank">Java compiler level does not match the v ...</a></li>
<li><a href="http://cai555.javaeye.com/blog/346565" title="P2P之UDP穿透NAT的原理与实现(附源代码)" target="_blank">P2P之UDP穿透NAT的原理与实现(附源代码 ...</a></li>
<li><a href="http://cai555.javaeye.com/rss" target="_blank"><img src="" alt="Rss"></a></li>
<li><a href="http://fusion.google.com/add?feedurl=http://cai555.javaeye.com/rss" target="_blank"><img src="" alt="Rss_google"></a></li>
<li><a href="http://www.zhuaxia.com/add_channel.php?url=http://cai555.javaeye.com/rss" target="_blank"><img src="" alt="Rss_zhuaxia"></a></li>
<li><a href="http://www.xianguo.com/subscribe.php?url=http://cai555.javaeye.com/rss" target="_blank"><img src="" alt="Rss_xianguo"></a></li>
<li><a href="http://www.google.com/search?hl=zh-CN&amp;q=RSS" target="_blank">[什么是RSS?]</a>
声明：JavaEye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。
© 2003-2009 JavaEye.com. All rights reserved. 上海炯耐计算机软件有限公司 [ 沪ICP备05023328号 ]</li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/JS用法/">JS用法</a></li></span></span> | <span class="tags">Tagged <a href="/tags/JS用法/" class="label label-primary">JS用法</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:27"datetime="2014-03-07 09:54:27"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JS用法--javascript求div宽度时去掉px的超高效写法-cai555-JavaEye技术网/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JS用法--javascript求div宽度时去掉px的超高效写法-cai555-JavaEye技术网" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-编译脚本-maven--Maven实战（三）Eclipse构建Maven项目/">Maven实战（三）Eclipse构建Maven项目</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:26.000Z"> <a href="/2014/02/02/2014-02-02-编译脚本-maven--Maven实战（三）Eclipse构建Maven项目/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="maven-eclipse-maven-">Maven实战（三）Eclipse构建Maven项目</h1>
<p><strong>1. 安装m2eclipse插件 
</strong>   要用Eclipse构建Maven项目，我们需要先安装meeclipse插件 
   点击eclipse菜单栏Help-&gt;Eclipse Marketplace搜索到插件Maven Integration for Eclipse 并点击安装即可，如下图：</p>
<p><img src="" alt=""></p>
<p>安装成成之后我们在Eclipse菜单栏中点击File-&gt;New-&gt;Other,在弹出的对话框中会看到如下图所示：</p>
<p><img src="" alt=""></p>
<p><strong>2. 构建Maven项目</strong>  </p>
<pre><code>  以eclipse3.6为例

  1）创建简单Maven项目

       点击Eclipse菜单栏File-&gt;New-&gt;Ohter-&gt;Maven得到如下图所示对话框：
</code></pre><p><img src="" alt=""></p>
<p>选中Maven Project并点击Next，到下一个对话框继续点击Next得到如下对话框</p>
<p><img src="" alt="">
 如图示操作，选择maven-archetype-quickstart，点击Next</p>
<p><img src="" alt="">
 按图示填写好groupId, artfactId,version等信息，点击Finish。</p>
<p>由此我们成功创建了一个简单的Maven项目，项目结构如图所示</p>
<p><img src="" alt=""></p>
<pre><code> 2）创建Maven web项目

 操作跟创建简单Maven项目类似，点击Eclipse菜单File-&gt;New-&gt;Other-&gt;Maven-&gt;Maven Project

 在选择maven-archetype的界面进行如下操作：
</code></pre><p><img src="" alt="">
 点击Next,填写好相应的groupId,artifactId,version等信息，点击Finish</p>
<p>得到的Maven web项目结构如下图所示：</p>
<p><img src="" alt=""></p>
<p> 右击项目，点击Properties-&gt;Project Facets</p>
<p><img src="" alt=""></p>
<p>如上图可以看到项目为web2.3 java1.5 当然我们也可以改成我们所需要的版本，打开xml文件my-app-web/.settings/org.eclipse.wst.common.project.facet.core.xml，进行修改即可：
Xml代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"></a></p>
<ol>
<li>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  </li>
<li><faceted-project>  </li>
<li><fixed facet="wst.jsdt.web"/>  </li>
<li><installed facet="java" version="1.5"/>  </li>
<li><installed facet="jst.web" version="2.3"/>  </li>
<li><installed facet="wst.jsdt.web" version="1.0"/>  </li>
<li></faceted-project>  </li>
</ol>
<pre><code> 3）导入Maven项目

      在Eclipse project explorer中右击，在弹出框中选择import，得到如下图所示：          
</code></pre><p><img src="" alt=""></p>
<pre><code>  选择Existing Maven Projects，并点击Next，得到如下图所示对话框：
</code></pre><p><img src="" alt=""></p>
<p>选择一个已经创建好的Maven项目，并点击Finish。</p>
<p>由此，导入Maven项目成功</p>
<p><strong>3. 运行Maven命令</strong></p>
<pre><code>右击项目，点击Run as，如下图：
</code></pre><p><img src="" alt=""></p>
<p> 即可看到有很多现有的maven命令，点击即可运行，并在控制台可以看到运行信息</p>
<p> 如果你想运行的maven命令在这里没有找到，点击Maven build创建新的命令，操作如下图所示：</p>
<p><img src="" alt=""></p>
<p> 如下图填入Maven命令，点击Run即可</p>
<p><img src="" alt=""></p>
<p>新增的maven命令可以通过如下方式找到，并再次运行：</p>
<p><img src="" alt=""></p>
<p><img src="" alt="">
来源： <a href="[http://www.iteye.com/topic/1123225](http://www.iteye.com/topic/1123225)">[http://www.iteye.com/topic/1123225](http://www.iteye.com/topic/1123225)</a> </p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/编译脚本/">编译脚本</a></li></span><span class="breadcrumb"><li><a href="/categories/编译脚本/">编译脚本</a></li><li><a href="/categories/编译脚本/maven/">maven</a></li></span></span> | <span class="tags">Tagged <a href="/tags/maven/" class="label label-primary">maven</a><a href="/tags/编译脚本/" class="label label-success">编译脚本</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:26"datetime="2014-03-07 09:54:26"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-编译脚本-maven--Maven实战（三）Eclipse构建Maven项目/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-编译脚本-maven--Maven实战（三）Eclipse构建Maven项目" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-编译脚本-maven--maven配置篇之settingsxml/">maven 配置篇 之 settings.xml</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:26.000Z"> <a href="/2014/02/02/2014-02-02-编译脚本-maven--maven配置篇之settingsxml/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="maven-settings-xml">maven 配置篇 之 settings.xml</h1>
<pre><code>maven2 比起maven1 来说，需要配置的文件少多了，主要集中在pom.xml和settings.xml中。
先来说说settings.xml，settings.xml对于maven来说相当于全局性的配置，用于所有的项目。在maven2中存在两个 settings.xml，一个位于maven2的安装目录conf下面，作为全局性配置。对于团队设置，保持一致的定义是关键，所以 maven2/conf下面的settings.xml就作为团队共同的配置文件。保证所有的团队成员都拥有相同的配置。当然对于每个成员，都需要特殊的 自定义设置，如用户信息，所以另外一个settings.xml就作为本地配置。默认的位置为：${user.dir} /.m2/settings.xml目录中（${user.dir} 指windows 中的用户目录）。
settings.xml基本结构如下：
</code></pre><p>xml 代码</p>
<ol>
<li>&lt;settings xmlns=&quot;<a href="http://maven.apache.org/POM/4.0.0" target="_blank">http://maven.apache.org/POM/4.0.0</a>&quot;  </li>
<li>xmlns:xsi=&quot;<a href="http://www.w3.org/2001/XMLSchema-instance" target="_blank">http://www.w3.org/2001/XMLSchema-instance</a>&quot;  </li>
<li>xsi:schemaLocation=&quot;<a href="http://maven.apache.org/POM/4.0.0" target="_blank">http://maven.apache.org/POM/4.0.0</a>  </li>
<li><a href="http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;" target="_blank">http://maven.apache.org/xsd/settings-1.0.0.xsd&quot;&gt;</a>  </li>
<li><localRepository/>  </li>
<li><interactiveMode/>  </li>
<li><usePluginRegistry/>  </li>
<li><offline/>  </li>
<li><pluginGroups/>  </li>
<li><servers/>  </li>
<li><mirrors/>  </li>
<li><proxies/>  </li>
<li><profiles/>  </li>
<li><activeProfiles/>  </li>
<li></settings><br>简单介绍一下几个主要的配置因素：
<strong>localRepository：</strong>表示本地库的保存位置，也就是maven2主要的jar保存位置，默认在${user.dir}/.m2/repository，如果需要另外设置，就换成其他的路径。
<strong>offline：</strong>如果不想每次编译，都去查找远程中心库，那就设置为true。当然前提是你已经下载了必须的依赖包。
<strong>Servers</strong>
在POM中的 distributionManagement元素定义了开发库。然而，特定的username和pwd不能使用于pom.xml，所以通过此配置来保存server信息</li>
</ol>
<p>xml 代码</p>
<ol>
<li><servers>  </li>
<li><server>  </li>
<li><id>server001</id>  </li>
<li><username>my_login</username>  </li>
<li><password>my_password</password>  </li>
<li><privateKey>${usr.home}/.ssh/id_dsa</privateKey>  </li>
<li><passphrase>some_passphrase</passphrase>  </li>
<li><filePermissions>664</filePermissions>  </li>
<li><directoryPermissions>775</directoryPermissions>  </li>
<li><configuration></configuration>  </li>
<li></server>  </li>
<li></servers>   </li>
</ol>
<ul>
<li>id:server 的id,用于匹配distributionManagement库id，比较重要。</li>
<li>username, password:用于登陆此服务器的用户名和密码</li>
<li>privateKey, passphrase：设置private key，以及passphrase</li>
<li>filePermissions, directoryPermissions：当库文件或者目录创建后，需要使用权限进行访问。参照unix文件许可，如664和775
<strong>Mirrors</strong>
表示镜像库，指定库的镜像，用于增加其他库</li>
</ul>
<p>xml 代码</p>
<ol>
<li><mirrors>  </li>
<li><mirror>  </li>
<li><id>planetmirror.com</id>  </li>
<li><name>PlanetMirror Australia</name>  </li>
<li><url><a href="http://downloads.planetmirror.com/pub/maven2" target="_blank">http://downloads.planetmirror.com/pub/maven2</a></url>  </li>
<li><mirrorOf>central</mirrorOf>  </li>
<li></mirror>  </li>
<li></mirrors>  </li>
</ol>
<ul>
<li>id,name:唯一的标志，用于区别镜像</li>
<li>url:镜像的url</li>
<li>mirrorOf：此镜像指向的服务id
<strong>Proxies</strong>
此设置，主要用于无法直接访问中心的库用户配置。</li>
</ul>
<p>xml 代码</p>
<ol>
<li><proxies>  </li>
<li><proxy>  </li>
<li><id>myproxy</id>  </li>
<li><active>true</active>  </li>
<li><protocol>http</protocol>  </li>
<li><host>proxy.somewhere.com</host>  </li>
<li><port>8080</port>  </li>
<li><username>proxyuser</username>  </li>
<li><password>somepassword</password>  </li>
<li><nonProxyHosts>/*.google.com|ibiblio.org</nonProxyHosts>  </li>
<li></proxy>  </li>
<li></proxies>  </li>
</ol>
<ul>
<li>id:代理的标志</li>
<li>active：是否激活代理</li>
<li>protocol, host, port:protocol://host:port 代理</li>
<li>username, password：用户名和密码</li>
<li>nonProxyHosts: 不需要代理的host
<strong>Profiles</strong>
类似于pom.xml中的profile元素，主要包括activation,repositories,pluginRepositories 和properties元素
刚开始接触的时候，可能会比较迷惑，其实这是maven2中比较强大的功能。从字面上来说，就是个性配置。
单独定义profile后，并不会生效，需要通过满足条件来激活。
<strong>repositories 和pluginRepositories</strong>
定义其他开发库和插件开发库。对于团队来说，肯定有自己的开发库。可以通过此配置来定义。
如下的配置，定义了本地开发库，用于release 发布。</li>
</ul>
<p>xml 代码</p>
<ol>
<li><repositories>  </li>
<li><repository>  </li>
<li><id>repo-local</id>  </li>
<li><name>Internal 开发库</name>  </li>
<li><url><a href="http://192.168.0.2:8082/repo-local" target="_blank">http://192.168.0.2:8082/repo-local</a></url>  </li>
<li><releases>  </li>
<li><enabled>true</enabled>  </li>
<li><updatePolicy>never</updatePolicy>  </li>
<li><checksumPolicy>warn</checksumPolicy>  </li>
<li></releases>  </li>
<li><snapshots>  </li>
<li><enabled>false</enabled>  </li>
<li></snapshots>  </li>
<li><layout>default</layout>  </li>
<li></repository>  </li>
<li></repositories>  </li>
<li><pluginRepositories>  </li>
<li><pluginRepository>  </li>
<li><id>repo-local</id>  </li>
<li><name>Internal 开发库</name>  </li>
<li><url><a href="http://192.168.0.2:8082/repo-local" target="_blank">http://192.168.0.2:8082/repo-local</a></url>  </li>
<li><releases>  </li>
<li><enabled>true</enabled>  </li>
<li><updatePolicy>never</updatePolicy>  </li>
<li><checksumPolicy>warn</checksumPolicy>  </li>
<li></releases>  </li>
<li><snapshots>  </li>
<li><enabled>false</enabled>  </li>
<li></snapshots>  </li>
<li><layout>default</layout>  </li>
<li></pluginRepository>  </li>
<li><p></pluginRepositories><br>releases, snapshots:每个产品的版本的Release或者snapshot(注：release和snapshot的区别，release一般是比较稳定的版本，而snapshot基本上不稳定，只是作为快照）
<strong>properties</strong>
maven 的properties作为placeholder值，如ant的properties。
包括以下的5种类型值：</p>
</li>
<li><p>env.X，返回当前的环境变量</p>
</li>
<li>project.x:返回pom中定义的元素值，如project.version</li>
<li>settings.x：返回settings.xml中定义的元素</li>
<li>java 系统属性：所有经过java.lang.System.getProperties()返回的值</li>
<li>x：用户自己设定的值
<strong>Activation</strong>
用于激活此profile</li>
</ol>
<p>xml 代码</p>
<ol>
<li><activation>  </li>
<li><activeByDefault>false</activeByDefault>  </li>
<li><jdk>1.5</jdk>  </li>
<li><os>  </li>
<li><name>Windows XP</name>  </li>
<li><family>Windows</family>  </li>
<li><arch>x86</arch>  </li>
<li><version>5.1.2600</version>  </li>
<li></os>  </li>
<li><property>  </li>
<li><name>mavenVersion</name>  </li>
<li><value>2.0.3</value>  </li>
<li></property>  </li>
<li><file>  </li>
<li><exists>${basedir}/file2.properties</exists>  </li>
<li><missing>${basedir}/file1.properties</missing>  </li>
<li></file>  </li>
<li></activation>  </li>
</ol>
<ul>
<li>jdk:如果匹配指定的jdk版本，将会激活</li>
<li>os:操作系统</li>
<li>property：如果maven能检测到相应的属性</li>
<li>file: 用于判断文件是否存在或者不存在
除了使用activation来激活profile，同样可以通过activeProfiles来激活
<strong>Active Profiles</strong>
表示激活的profile,通过profile id来指定。</li>
</ul>
<p>xml 代码</p>
<ol>
<li><activeProfiles>  </li>
<li><activeProfile>env-test</activeProfile> 指定的profile id  </li>
<li></activeProfiles>  </li>
</ol>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/编译脚本/">编译脚本</a></li></span><span class="breadcrumb"><li><a href="/categories/编译脚本/">编译脚本</a></li><li><a href="/categories/编译脚本/maven/">maven</a></li></span></span> | <span class="tags">Tagged <a href="/tags/maven/" class="label label-primary">maven</a><a href="/tags/编译脚本/" class="label label-success">编译脚本</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:26"datetime="2014-03-07 09:54:26"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-编译脚本-maven--maven配置篇之settingsxml/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-编译脚本-maven--maven配置篇之settingsxml" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/160/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/158/">158</a></li><li><a class="page-number" href="/page/159/">159</a></li><li><a class="page-number" href="/page/160/">160</a></li><li class="active"><li><span class="page-number current">161</span></li></li><li><a class="page-number" href="/page/162/">162</a></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/162/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 16:55:37</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
