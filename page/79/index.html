
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 79 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-缓存-ehcache--EhCache配置文件-奈何桥收费站。。。-ITeye技术网站/">EhCache配置文件 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-缓存-ehcache--EhCache配置文件-奈何桥收费站。。。-ITeye技术网站/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="ehcache-iteye-">EhCache配置文件 - 奈何桥收费站。。。 - ITeye技术网站</h1>
<p><a href="http://www.iteye.com/" target="_blank">首页</a> <a href="http://www.iteye.com/news" target="_blank">资讯</a> <a href="http://www.iteye.com/magazines" target="_blank">精华</a> <a href="http://www.iteye.com/forums" target="_blank">论坛</a> <a href="http://www.iteye.com/ask" target="_blank">问答</a> <a href="http://www.iteye.com/blogs" target="_blank">博客</a> <a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a> <a href="http://www.iteye.com/groups" target="_blank">群组</a> <a href="http://zuzong.iteye.com/blog/1048714#" target="_blank">更多 ▼</a></p>
<p><a href="http://www.iteye.com/job" target="_blank">招聘</a> <a href="http://www.iteye.com/search" target="_blank">搜索</a></p>
<p><a href="http://zuzong.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://zuzong.iteye.com/login" target="_blank">登录</a> <a href="http://zuzong.iteye.com/signup" target="_blank">注册</a></p>
<h1 id="-http-zuzong-iteye-com-"><a href="http://zuzong.iteye.com/" target="_blank">奈何桥收费站。。。</a></h1>
<ul>
<li><a href="http://zuzong.iteye.com/" target="_blank"><strong>博客</strong></a></li>
<li><a href="http://zuzong.iteye.com/weibo" target="_blank">微博</a></li>
<li><a href="http://zuzong.iteye.com/album" target="_blank">相册</a></li>
<li><a href="http://zuzong.iteye.com/link" target="_blank">收藏</a></li>
<li><a href="http://zuzong.iteye.com/blog/guest_book" target="_blank">留言</a></li>
<li><a href="http://zuzong.iteye.com/blog/profile" target="_blank">关于我</a></li>
</ul>
<h3 id="-ehcache-"><a href="">EhCache配置文件</a> **</h3>
<p><strong>博客分类：</strong></p>
<ul>
<li><a href="http://zuzong.iteye.com/category/157174" target="_blank">缓存</a>
<a href="http://www.iteye.com/blogs/tag/Cache" target="_blank">Cache</a><a href="http://www.iteye.com/blogs/tag/%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank">应用服务器</a><a href="http://www.iteye.com/blogs/tag/Linux" target="_blank">Linux</a><a href="http://www.iteye.com/blogs/tag/%E5%B5%8C%E5%85%A5%E5%BC%8F" target="_blank">嵌入式</a><a href="http://www.iteye.com/blogs/tag/performance" target="_blank">performance</a> </li>
</ul>
<p>Xml代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;       </li>
<li>&lt;!--  </li>
<li></li>
<li>CacheManager配置  </li>
<li>==========================  </li>
<li></li>
<li></li>
<li>一个ehcache.xml 相当于一个单个的CacheManager  </li>
<li></li>
<li>学习下面的说明或者ehcache构架（ehcache.xsd）怎样配置  </li>
<li>系统资源标识在这个文件中能被具体制定，当配置被加载时，他们将会被替换。例如 multicastGroupPort=${multicastGroupPort}被环境变量的系统属性替换，或是使用如-DmulticastGroupPort=4446命令行开关指定一个系统属性。  </li>
<li></li>
<li><ehcache>的属性如下：  </li>
<li></li>
<li>/* name – CacheManager的可选名称。这个名称起初主要是用于文档记录或辨别Terracotta集群状态。对于Terracotta集群的缓存，一组CacheManager名称和cache名称唯一的鉴定了一个特定的存储于Terracotta集群存储器的缓存。  </li>
<li></li>
<li>/* updateCheck – 一个可选的boolean标识符，指定这个CacheManager是否通过Internet检查Ehcache的新版本。如果没有特别指明，updateCheck=&quot;true&quot;.  </li>
<li></li>
<li>/* monitoring – 一个可选的设置，决定CacheManager是否应该自动的用系统MBean服务器注册SampledCacheMBean。当下，这个监测。只有当使用Terracotta集群和使用Terracotta Developer Console时才有用。使用&quot;autodetect&quot;值，Terracotta集群的出现将被检测和监视，并通过Developer控制台激活。其他允许的值有：&quot;on&quot; 和 &quot;off&quot;。默认为&quot;autodetect&quot;。当使用JMX监测时，这个设置不会产生任何作用。  </li>
<li></li>
<li>/* dynamicConfig – 一个可选设置，能够使与这个CacheManager相关联的动态配置失活。这个设置的默认值是true-例如，动态配置是激活的。动态配置的缓存通过缓存的配置对象让他们的TTI, TTL 和maximum disk 和in-memory capacity在运行时改变。  </li>
<li>--&gt;    </li>
<li>&lt;ehcache xmlns:xsi=&quot;<a href="http://www.w3.org/2001/XMLSchema-instance" target="_blank">http://www.w3.org/2001/XMLSchema-instance</a>&quot;  </li>
<li>xsi:noNamespaceSchemaLocation=&quot;ehcache.xsd&quot;  </li>
<li>updateCheck=&quot;true&quot; monitoring=&quot;autodetect&quot;  </li>
<li>dynamicConfig=&quot;true&quot; &gt;  </li>
<li></li>
<li>&lt;!--  </li>
<li>DiskStore configuration  </li>
<li>=======================  </li>
<li>磁盘存储器是可选的。关闭磁盘存储路径创建，解释下面的磁盘存储器元素。  </li>
<li>对于任何缓存，如果你已经激活了overflowToDisk或diskPersistent，就要配置磁盘存储器。  </li>
<li>如果他未配置，并且创建了一个需要磁盘存储的缓存，将会发出一个警告并且java.io.tmpdir将会自动使用。  </li>
<li>磁盘存储器仅有一个属性- &quot;path&quot;。这个路径就是.data and .index文件被创建的目录路径。  </li>
<li>如果这个路径是下述Java系统属性之一，他将会被运行中的VM中的值替换。为了向后兼容，这些应该被特别规定，而不会被${token}替换语法封闭。  </li>
<li></li>
<li>下列属性翻译：  </li>
<li>/* user.home -用户的根目录  </li>
<li>/* user.dir – 用户的当前工作目录  </li>
<li>/* java.io.tmpdir – 默认临时文件路径  </li>
<li>/* ehcache.disk.store.dir – 一个系统属性，你通常用命令行指定；  </li>
<li>例如： java -Dehcache.disk.store.dir=/u01/myapp/diskdir ...  </li>
<li></li>
<li></li>
<li></li>
<li>子目录通过如下属性指定，例如：java.io.tmpdir/one  </li>
<li>--&gt;  </li>
<li><diskStore path="java.io.tmpdir"/>  </li>
<li></li>
<li></li>
<li>&lt;!--  </li>
<li>TransactionManagerLookup configuration  </li>
<li>======================================  </li>
<li>TransactionManagerLookup 配置  </li>
<li>这个类被ehcache用XA激活的ehcache来查找用于应用程序中的JTA TransactionManager。如果没有指定类，那么DefaultTransactionManagerLookup将以如下顺序找到TransactionManager。  </li>
<li></li>
<li>/*GenericJNDI（例如：jboss，属性jndiName控制TransactionManager对象的名称来查找）  </li>
<li>/*Websphere  </li>
<li>/*Bitronix  </li>
<li>/*Atomikos  </li>
<li>你可以提供自己的查找类实现net.sf.ehcache.transaction.manager.TransactionManagerLookup接口。  </li>
<li><transactionManagerLookup class="net.sf.ehcache.transaction.manager.DefaultTransactionManagerLookup" properties="" propertySeparator=":"/>  </li>
<li></li>
<li>&lt;!--  </li>
<li>CacheManagerEventListener  </li>
<li>=========================  </li>
<li>指定一个CacheManagerEventListenerFactory，当缓存被增加或从CacheManager移除时被告知。  </li>
<li></li>
<li>CacheManagerEventListenerFactory的属性有：  </li>
<li>/* class – 一个完全限定的工厂类名。  </li>
<li>/* properties – 逗号隔开的属性只对工厂有意义。  </li>
<li>overflowToDisk:设置元素是否能溢出磁盘，当存储器容量达到最大存储限制。  </li>
<li></li>
<li>如下属性和元素是可选的。  </li>
<li></li>
<li>timeToIdleSeconds:  </li>
<li>Sets the time to idle for an element before it expires.  </li>
<li>设置一个元素在过期前的空闲时间  </li>
<li>i.e. The maximum amount of time between accesses before an element expires  </li>
<li>Is only used if the element is not eternal.  </li>
<li>换言之，最大时间数在进入之后和元素过期之前这段时间之间，只有元素在非持久化时才有用。  </li>
<li>Optional attribute. A value of 0 means that an Element can idle for infinity.  </li>
<li>可选属性，0表示一个元素可以无限的空闲  </li>
<li>The default value is 0.  </li>
<li>默认值是0。  </li>
<li></li>
<li>timeToLiveSeconds:  </li>
<li>Sets the time to live for an element before it expires.  </li>
<li>i.e. The maximum time between creation time and when an element expires.  </li>
<li>Is only used if the element is not eternal.  </li>
<li>Optional attribute. A value of 0 means that and Element can live for infinity.  </li>
<li>The default value is 0.  </li>
<li>在元素过期之前，设置一个存留时间。换言之，最大时间在创建时间和元素过期之间。仅用于元素非持久化。可选属性。值为0表示元素可无限存留，默认值是0  </li>
<li></li>
<li>diskPersistent:  </li>
<li>Whether the disk store persists between restarts of the Virtual Machine.  </li>
<li>The default value is false.  </li>
<li>磁盘存储是否在虚拟机重启后持续存在。默认只是false。  </li>
<li></li>
<li>diskExpiryThreadIntervalSeconds:  </li>
<li>The number of seconds between runs of the disk expiry thread. The default value  </li>
<li>is 120 seconds.  </li>
<li>秒数在运行和磁盘终止线程之间，默认值是120秒。  </li>
<li></li>
<li>diskSpoolBufferSizeMB:  </li>
<li>This is the size to allocate the DiskStore for a spool buffer. Writes are made  </li>
<li>to this area and then asynchronously written to disk. The default size is 30MB.  </li>
<li>Each spool buffer is used only by its cache. If you get OutOfMemory errors consider  </li>
<li>lowering this value. To improve DiskStore performance consider increasing it. Trace level  </li>
<li>logging in the DiskStore will show if put back ups are occurring.  </li>
<li>这是为后台打印缓冲分配在DiskStore的大小。在这一区域进行写入，并同步写入磁盘。默认值是30M。每个后台缓冲区仅由他的缓存使用，如出现OutOfMemory错误，考虑降低该值。为了提高DiskStore性能，考虑增加它。跟踪级别的DiskStore工作 将显示是否推迟出现。  </li>
<li></li>
<li>clearOnFlush:  </li>
<li>whether the MemoryStore should be cleared when flush() is called on the cache.  </li>
<li>By default, this is true i.e. the MemoryStore is cleared.  </li>
<li>当flush()在缓存中被调用时，MemoryStore是否被清除。默认是true，即MemoryStore被清除。  </li>
<li></li>
<li>memoryStoreEvictionPolicy:  </li>
<li>Policy would be enforced upon reaching the maxElementsInMemory limit. Default  </li>
<li>policy is Least Recently Used (specified as LRU). Other policies available -  </li>
<li>First In First Out (specified as FIFO) and Less Frequently Used  </li>
<li>(specified as LFU)  </li>
<li></li>
<li>Cache elements can also contain sub elements which take the same format of a factory class  </li>
<li>and properties. Defined sub-elements are:  </li>
<li>当达到maxElementsInMemory限制时，策略将强制执行。策略是最近最少使用的算法（简称为LRU）。其他的策略通用。缓存元素也可以有子元素，子元素拥有相同格式的工厂类和属性。定义的sub-elements有：  </li>
<li></li>
<li>/* cacheEventListenerFactory - Enables registration of listeners for cache events, such as  </li>
<li>put, remove, update, and expire.  </li>
<li>/* cacheEventListenerFactory – 启用缓存事件监听器的注册，如put, remove, update, and expire.  </li>
<li></li>
<li>/* bootstrapCacheLoaderFactory - Specifies a BootstrapCacheLoader, which is called by a  </li>
<li>cache on initialisation to prepopulate itself.  </li>
<li>/* bootstrapCacheLoaderFactory – 指定一个BootstrapCacheLoader，它被一个缓存在初始化时调用，用来预填充自己。  </li>
<li></li>
<li>/* cacheExtensionFactory - Specifies a CacheExtension, a generic mechansim to tie a class  </li>
<li>which holds a reference to a cache to the cache lifecycle.  </li>
<li>/* cacheExtensionFactory – 指定一个CacheExtension，一个通用的mechansim来联系一个保存引用到缓存的类到缓存生命周期。  </li>
<li></li>
<li>/* cacheExceptionHandlerFactory - Specifies a CacheExceptionHandler, which is called when  </li>
<li>cache exceptions occur.  </li>
<li>/* cacheExceptionHandlerFactory – 指定一个CacheExceptionHandler，每当缓存异常出现时调用。  </li>
<li></li>
<li>/* cacheLoaderFactory - Specifies a CacheLoader, which can be used both asynchronously and  </li>
<li>synchronously to load objects into a cache. More than one cacheLoaderFactory element  </li>
<li>can be added, in which case the loaders form a chain which are executed in order. If a  </li>
<li>loader returns null, the next in chain is called.  </li>
<li>/* cacheLoaderFactory – 指定一个CacheLoader，能够同步和异步装载对象到一个缓存。可以添加多个cacheLoaderFactory元素，在这种情况装载机形成一个链，被有序的执行。如果一个装载机返回null，下一个链就被调用。  </li>
<li></li>
<li>Cache Event Listeners  </li>
<li>缓存事件监听器  </li>
<li></li>
<li>All cacheEventListenerFactory elements can take an optional property listenFor that describes  </li>
<li>which events will be delivered in a clustered environment.  The listenFor attribute has the  </li>
<li>following allowed values:  </li>
<li>所有的cacheEventListenerFactory元素能选取一个可选属性listenFor描述的事件将在一个集群环境中交付。这个listenFor属性有如下允许的值：  </li>
<li></li>
<li>/* all - the default is to deliver all local and remote events  </li>
<li>/* local - deliver only events originating in the current node  </li>
<li>/* remote - deliver only events originating in other nodes  </li>
<li>/* all – 默认交付所有的本地和远程事件  </li>
<li>/* local – 交付的只是源于当前节点的事件  </li>
<li>/* remote - 交付的只是源于其他节点  </li>
<li></li>
<li>Example of setting up a logging listener for local cache events:  </li>
<li>设置一个本地缓存事件监听器的例子：  </li>
<li></li>
<li>&lt;cacheEventListenerFactory class=&quot;my.company.log.CacheLogger&quot;  </li>
<li>listenFor=&quot;local&quot; /&gt;  </li>
<li></li>
<li></li>
<li>Cache Exception Handling  </li>
<li>缓存异常处理  </li>
<li>++++++++++++++++++++++++  </li>
<li></li>
<li>By default, most cache operations will propagate a runtime CacheException on failure. An  </li>
<li>interceptor, using a dynamic proxy, may be configured so that a CacheExceptionHandler can  </li>
<li>be configured to intercept Exceptions. Errors are not intercepted.  </li>
<li>通常，大多数cache运行失败将产生运行时CacheException。通过使用代理，一个拦截器应该被配置，以便于能够配置CacheExceptionHandler拦截异常。错误并不被拦截。  </li>
<li></li>
<li>It is configured as per the following example:  </li>
<li>按照下面的例子配置：  </li>
<li></li>
<li>&lt;cacheExceptionHandlerFactory class=&quot;com.example.ExampleExceptionHandlerFactory&quot;  </li>
<li>properties=&quot;logLevel=FINE&quot;/&gt;  </li>
<li></li>
<li>Caches with ExceptionHandling configured are not of type Cache, but are of type Ehcache only,  </li>
<li>and are not available using CacheManager.getCache(), but using CacheManager.getEhcache().  </li>
<li>有ExceptionHandling配置的缓存并不是典型的Cache，但却是典型的Ehcache，并且不能使用CacheManager.getCache()，但能够使用CacheManager.getEhcache()。  </li>
<li></li>
<li></li>
<li>Cache Loader  </li>
<li>缓存装载  </li>
<li>++++++++++++  </li>
<li></li>
<li>A default CacheLoader may be set which loads objects into the cache through asynchronous and  </li>
<li>synchronous methods on Cache. This is different to the bootstrap cache loader, which is used  </li>
<li>only in distributed caching.  </li>
<li>一个默认的CacheLoader应该被设置成这样，能够通过Cache中的同步和异步方法装载对象到缓存中。这和仅在分布是缓存中被用到的缓存装载引导程序是不同的。  </li>
<li></li>
<li>It is configured as per the following example:  </li>
<li>按照如下示例配置：  </li>
<li></li>
<li>&lt;cacheLoaderFactory class=&quot;com.example.ExampleCacheLoaderFactory&quot;  </li>
<li>properties=&quot;type=int,startCounter=10&quot;/&gt;  </li>
<li></li>
<li>XA Cache  </li>
<li>++++++++  </li>
<li></li>
<li>To enable an ehcache as a participant in the JTA Transaction, just have the following attribute  </li>
<li>使ehcache作为JTA事务的参与者，只需要如下属性。  </li>
<li></li>
<li>transactionalMode=&quot;xa&quot;, otherwise the default is transactionalMode=&quot;off&quot;  </li>
<li>transactionalMode=&quot;xa&quot;, 否则，默认是 transactionalMode=&quot;off&quot;  </li>
<li></li>
<li></li>
<li>Cache Writer  </li>
<li>++++++++++++  </li>
<li></li>
<li>A CacheWriter maybe be set to write to an underlying resource. Only one CacheWriter can be  </li>
<li>been to a cache.  </li>
<li>一个CacheWriter可以设置写到底层资源中。只有一个CacheWriter能够成为一个cache。  </li>
<li></li>
<li>It is configured as per the following example for write-through:  </li>
<li>按照如下示例配置write-through：  </li>
<li></li>
<li><cacheWriter writeMode="write-through" notifyListenersOnException="true">  </li>
<li>&lt;cacheWriterFactory class=&quot;net.sf.ehcache.writer.TestCacheWriterFactory&quot;  </li>
<li>properties=&quot;type=int,startCounter=10&quot;/&gt;  </li>
<li></cacheWriter>  </li>
<li></li>
<li>And it is configured as per the following example for write-behind:  </li>
<li>按照如下示例配置write-behind:  </li>
<li></li>
<li>&lt;cacheWriter writeMode=&quot;write-behind&quot; minWriteDelay=&quot;1&quot; maxWriteDelay=&quot;5&quot;  </li>
<li>rateLimitPerSecond=&quot;5&quot; writeCoalescing=&quot;true&quot; writeBatching=&quot;true&quot; writeBatchSize=&quot;1&quot;  </li>
<li>retryAttempts=&quot;2&quot; retryAttemptDelaySeconds=&quot;1&quot;&gt;  </li>
<li>&lt;cacheWriterFactory class=&quot;net.sf.ehcache.writer.TestCacheWriterFactory&quot;  </li>
<li>properties=&quot;type=int,startCounter=10&quot;/&gt;  </li>
<li></cacheWriter>  </li>
<li></li>
<li>The cacheWriter element has the following attributes:  </li>
<li>cacheWriter元素有如下属性：  </li>
<li>/* writeMode: the write mode, write-through or write-behind  </li>
<li></li>
<li>These attributes only apply to write-through mode:  </li>
<li>这些属性仅适用于write-through模式：  </li>
<li>/* notifyListenersOnException: Sets whether to notify listeners when an exception occurs on a writer operation.  </li>
<li>/* notifyListenersOnException:设置当一个写操作出现异常时是否告知监听器。  </li>
<li></li>
<li>These attributes only apply to write-behind mode:  </li>
<li>这些属性仅适用于write-behind模式：  </li>
<li></li>
<li>/* minWriteDelay: Set the minimum number of seconds to wait before writing behind. If set to a value greater than 0,  </li>
<li>it permits operations to build up in the queue. This is different from the maximum write delay in that by waiting  </li>
<li>a minimum amount of time, work is always being built up. If the minimum write delay is set to zero and the  </li>
<li>CacheWriter performs its work very quickly, the overhead of processing the write behind queue items becomes very  </li>
<li>noticeable in a cluster since all the operations might be done for individual items instead of for a collection  </li>
<li>of them.  </li>
<li>/* minWriteDelay:设置write-behind之前的等待最小秒数。如果设置值比0大，则允许操作建立在队列中。和最大写入延迟不同，通过等待的最短时间，工作将同时被建立。如果最小写入延迟设置成0，并且CacheWriter快速执行程序，在一个集群中处理队列项目后的写入开销将会非常显著，因为所有的运行被单个项目完成，代替他们的一个集合。  </li>
<li></li>
<li>/* maxWriteDelay: Set the maximum number of seconds to wait before writing behind. If set to a value greater than 0,  </li>
<li>it permits operations to build up in the queue to enable effective coalescing and batching optimisations.  </li>
<li>/* maxWriteDelay:设置在后面写入之前等待的最大秒数。如设置值为0，它允许在队列里建立运行程序，以便有效地合并和批量优化。  </li>
<li></li>
<li>/* writeBatching: Sets whether to batch write operations. If set to true, writeAll and deleteAll will be called on  </li>
<li>the CacheWriter rather than write and delete being called for each key. Resources such as databases can perform  </li>
<li>more efficiently if updates are batched, thus reducing load.  </li>
<li>/* writeBatching:设置是否批量写入操作。如果设为true，writeAll 和deleteAll将调用CacheWriter，而不是为每个键调用write和delete。如果更新是批量的，诸如数据库资源可以更高效的执行，因此减少了负荷。  </li>
<li>/* writeBatchSize: Sets the number of operations to include in each batch when writeBatching is enabled. If there are  </li>
<li>less entries in the write-behind queue than the batch size, the queue length size is used.  </li>
<li>/* writeBatchSize:当writeBatching处于激活时，设置每批包含的操作的数目。如果write-behind队列的实体数少于每批的数目，就使用队列的长度。  </li>
<li>/* rateLimitPerSecond: Sets the maximum number of write operations to allow per second when writeBatching is enabled.  </li>
<li>/* rateLimitPerSecond:当writeBatching激活时，设置写操作每秒允许的最大数目。  </li>
<li>/* writeCoalescing: Sets whether to use write coalescing. If set to true and multiple operations on the same key are  </li>
<li>present in the write-behind queue, only the latest write is done, as the others are redundant.  </li>
<li>/* writeCoalescing: 设置是否使用写入联合。如果设为true并且同样的键有多个操作出现在write-behind队列，只有最新的写入完成，因为其他的成了多余的。  </li>
<li>/* retryAttempts: Sets the number of times the operation is retried in the CacheWriter, this happens after the  </li>
<li>original operation.  </li>
<li>/* retryAttempts:设置CacheWriter中重复操作的总次数，这发生在初次操作之后。  </li>
<li>/* retryAttemptDelaySeconds: Sets the number of seconds to wait before retrying an failed operation.  </li>
<li>/* retryAttemptDelaySeconds:设置在失败操作重试之前等待的秒数。  </li>
<li></li>
<li>Cache Extension  </li>
<li>+++++++++++++++  </li>
<li></li>
<li>CacheExtensions are a general purpose mechanism to allow generic extensions to a Cache.  </li>
<li>CacheExtensions are tied into the Cache lifecycle.  </li>
<li>CacheExtensions是一个总的作用机制允许Cache有普通异常。CacheExtensions与Cache生命周期紧密相连。  </li>
<li>CacheExtensions are created using the CacheExtensionFactory which has a  </li>
<li><code>createCacheCacheExtension()</code> method which takes as a parameter a  </li>
<li>Cache and properties. It can thus call back into any public method on Cache, including, of  </li>
<li>course, the load methods.  </li>
<li>创建CacheExtensions 来使用CacheExtensionFactory，他有一个<code>createCacheCacheExtension()</code>方法可以当做一个参数一个Cache和属性。因此CacheExtensions能够回调所有Cache中的公有方法，当然，包括装载方法。  </li>
<li></li>
<li>Extensions are added as per the following example:  </li>
<li>按照如下示例增加Extensions：  </li>
<li></li>
<li>&lt;cacheExtensionFactory class=&quot;com.example.FileWatchingCacheRefresherExtensionFactory&quot;  </li>
<li>properties=&quot;refreshIntervalMillis=18000, loaderTimeout=3000,  </li>
<li>flushPeriod=whatever, someOtherProperty=someValue ...&quot;/&gt;  </li>
<li></li>
<li>Terracotta Clustering  </li>
<li>+++++++++++++++++++++  </li>
<li></li>
<li>Cache elements can also contain information about whether the cache can be clustered with Terracotta.  </li>
<li>The <terracotta> sub-element has the following attributes:  </li>
<li>Cache元素也包含了有关是否缓存能和Terracotta聚集的信息。<terracotta>子元素有如下属性：  </li>
<li></li>
<li>/* clustered=true|false - indicates whether this cache should be clustered with Terracotta. By  </li>
<li>default, if the <terracotta> element is included, clustered=true.  </li>
<li>/* clustered=true|false – 显示这个cache是否应该和Terracotta聚集。如果包括<terracotta>元素，默认的是clustered=true。  </li>
<li>/* valueMode=serialization|identity - indicates whether this cache should be clustered with  </li>
<li>serialized copies of the values or using Terracotta identity mode.  By default, values will  </li>
<li>be cached in serialization mode which is similar to other replicated Ehcache modes.  The identity  </li>
<li>mode is only available in certain Terracotta deployment scenarios and will maintain actual object  </li>
<li>identity of the keys and values across the cluster.  In this case, all users of a value retrieved from  </li>
<li>the cache are using the same clustered value and must provide appropriate locking for any changes  </li>
<li>made to the value (or objects referred to by the value).  </li>
<li>/* valueMode=serialization|identity – 指出是否这个cache和值的序列化拷贝聚合或者使用Terracotta鉴定模式。通常，值将会在序列化模式中缓存，这和其他的再生Ehcache模式相似。身份模式只有在某些Terracotta部署方案中有效，并且通过集群保持实际对象身份的键和值。在这种情况下，所有从缓存取值的用户都使用相同的集群值，并且必须对值（或者值所引用的对象）的任何改变提供了合适的锁定。  </li>
<li>/* synchronousWrites=true|false - When set to true, clustered caches use  </li>
<li>Terracotta SYNCHRONOUS WRITE locks. Asynchronous writes (synchronousWrites=&quot;false&quot;) maximize performance by  </li>
<li>allowing clients to proceed without waiting for a &quot;transaction received&quot; acknowledgement from the server.  </li>
<li>Synchronous writes (synchronousWrites=&quot;true&quot;) maximize data safety by requiring that a client receive server  </li>
<li>acknowledgement of a transaction before that client can proceed. If coherence mode is disabled using  </li>
<li>configuration (coherent=&quot;false&quot;) or through the coherence API, only asynchronous writes can occur  </li>
<li>(synchronousWrites=&quot;true&quot; is ignored). By default this value is false (i.e. clustered caches use normal  </li>
<li>Terracotta WRITE locks).  </li>
<li>/* synchronousWrites=true|false – 当设为true时，缓存集群使用Terracotta SYNCHRONOUS WRITE锁。异步写入(synchronousWrites=&quot;false&quot;)最大的性能允许客户端继续而无需等待&quot;transaction received&quot;服务器的回应。同步写入(synchronousWrites=&quot;true&quot;)最大数据安全性，要求客户端再继续之前接收服务器端的事务响应。如果coherence模式不能使用配置(coherent=&quot;false&quot;)或者通过coherence API，仅异步写入能够存在(synchronousWrites=&quot;true&quot;被忽略)。通常，这个值为false（例. 聚集缓存使用正常的Terracotta WRITE锁）。  </li>
<li>/* coherent=true|false - indicates whether this cache should have coherent reads and writes with guaranteed  </li>
<li>consistency across the cluster.  By default, its value is true.  If this attribute is set to false  </li>
<li>(or &quot;incoherent&quot; mode), values from the cache are read without locking, possibly yielding stale data.  </li>
<li>Writes to a cache in incoherent mode are batched and applied without acquiring cluster-wide locks,  </li>
<li>possibly creating inconsistent values across cluster. Incoherent mode is a performance optimization  </li>
<li>with weaker concurrency guarantees and should generally be used for bulk-loading caches, for loading  </li>
<li>a read-only cache, or where the application that can tolerate reading stale data. This setting overrides  </li>
<li>coherentReads, which is deprecated.  </li>
<li>/* coherent=true|false – 指出是否这个缓存应使读和写前后一致并通过集群确保其一致性。通常默认值是true。如这个属性被设为false（或&quot;incoherent&quot;模式），缓存里没有锁定直接读取的值，可能产生坏的数据。随着并发保证的减弱，Incoherent模式是最优化性能，应该用于bulk-loading缓存，用于装载一个只读缓存，或用于程序中能够容忍读取损坏数据的地方。这个设置重载了coherentReads，这是不赞成的。  </li>
<li>/* copyOnRead=true|false - indicates whether cache values are deserialized on every read or if the  </li>
<li>materialized cache value can be re-used between get() calls. This setting is useful if a cache  </li>
<li>is being shared by callers with disparate classloaders or to prevent local drift if keys/values  </li>
<li>are mutated locally w/o putting back to the cache. NOTE: This setting is only relevant for caches  </li>
<li>with valueMode=serialization  </li>
<li>/* copyOnRead=true|false – 指出是否每个读出的缓存值是反序列化的，或者，是否具体的缓存值能够在get()调用之间被重用。这个设置很有用，如果一个缓存被不同的类装载器的调用者共享，或是阻止本地偏移如果键/值被组织本地w/o放回缓存。注意：这个设置仅对valueMode=serialization的缓存有意义。  </li>
<li></li>
<li></li>
<li>Simplest example to indicate clustering:  </li>
<li>最简单的集群实例：  </li>
<li><terracotta/>  </li>
<li></li>
<li>To indicate the cache should not be clustered (or remove the <terracotta> element altogether):  </li>
<li>指明缓存不被聚集（或一起移除<terracotta>元素）   </li>
<li><terracotta clustered="false"/>  </li>
<li></li>
<li>To indicate the cache should be clustered using identity mode:  </li>
<li>表示使用模式聚集缓存：  </li>
<li><terracotta clustered="true" valueMode="identity"/>        </li>
<li></li>
<li>To indicate the cache should be clustered using incoherent mode for bulk load:  </li>
<li>对大量的装载使用incoherent模式聚集缓存。  </li>
<li><terracotta clustered="true" coherent="false"/>  </li>
<li></li>
<li>To indicate the cache should be clustered using synchronous-write locking level:  </li>
<li>使用synchronous-write锁定水平应该聚集缓存。  </li>
<li><terracotta clustered="true" synchronousWrites="true"/>  </li>
<li>--&gt;  </li>
<li></li>
<li>&lt;!--  </li>
<li>Mandatory Default Cache configuration. These settings will be applied to caches  </li>
<li>created programmtically using CacheManager.add(String cacheName).  </li>
<li>强制预设缓存配置。这个设置将应用于缓存创建CacheManager.add(String cacheName)。  </li>
<li></li>
<li>The defaultCache has an implicit name &quot;default&quot; which is a reserved cache name.  </li>
<li>defaultCache有一个内涵的名称“default”，是一个预设的缓存名称。  </li>
<li>--&gt;  </li>
<li>&lt;defaultCache  </li>
<li>maxElementsInMemory=&quot;0&quot;  </li>
<li>eternal=&quot;false&quot;  </li>
<li>timeToIdleSeconds=&quot;1200&quot;  </li>
<li>timeToLiveSeconds=&quot;1200&quot;&gt;  </li>
<li><terracotta/>  </li>
<li></defaultCache>  </li>
<li></li>
<li>&lt;!--  </li>
<li>Sample caches. Following are some example caches. Remove these before use.  </li>
<li>缓存样本。以下是一些缓存实例，在使用前删掉这些。  </li>
<li>--&gt;  </li>
<li></li>
<li>&lt;!--  </li>
<li>Sample cache named sampleCache1  </li>
<li>This cache contains a maximum in memory of 10000 elements, and will expire  </li>
<li>an element if it is idle for more than 5 minutes and lives for more than  </li>
<li>10 minutes.  </li>
<li>缓存实例名为sampleCache1，这个缓存的最大存储量为10000个元素，如果一个元素空闲时间超过5分钟就会失效并且生命周期超过10分钟。  </li>
<li></li>
<li>If there are more than 10000 elements it will overflow to the  </li>
<li>disk cache, which in this configuration will go to wherever java.io.tmp is  </li>
<li>defined on your system. On a standard Linux system this will be /tmp&quot;  </li>
<li>如果超过了10000个元素，磁盘缓存将会溢出，在这个缓存中，这个配置将找到你系统中任何定义java.io.tmp的地方。在标准的Linux系统中，这将会是/tmp&quot;。  </li>
<li></li>
<li></li>
<li>--&gt;  </li>
<li>&lt;cache name=&quot;sampleCache1&quot;  </li>
<li>maxElementsInMemory=&quot;10000&quot;  </li>
<li>maxElementsOnDisk=&quot;1000&quot;  </li>
<li>eternal=&quot;false&quot;  </li>
<li>overflowToDisk=&quot;true&quot;  </li>
<li>diskSpoolBufferSizeMB=&quot;20&quot;  </li>
<li>timeToIdleSeconds=&quot;300&quot;  </li>
<li>timeToLiveSeconds=&quot;600&quot;  </li>
<li>memoryStoreEvictionPolicy=&quot;LFU&quot;  </li>
<li>/&gt;  </li>
<li></li>
<li></li>
<li>&lt;!--  </li>
<li>Sample cache named sampleCache2  </li>
<li>实例缓存sampleCache2  </li>
<li>This cache has a maximum of 1000 elements in memory. There is no overflow to disk, so 1000  </li>
<li>is also the maximum cache size. Note that when a cache is eternal, timeToLive and  </li>
<li>timeToIdle are not used and do not need to be specified.  </li>
<li>这个缓存的最大存储容量是1000个元素。没有磁盘溢出，因此，1000也是缓存的最大长度。要注意的是，当缓存持久化后, timeToLive和timeToIdle将不被使用，并且不需要特别指定。  </li>
<li>--&gt;  </li>
<li>&lt;cache name=&quot;sampleCache2&quot;  </li>
<li>maxElementsInMemory=&quot;1000&quot;  </li>
<li>eternal=&quot;true&quot;  </li>
<li>overflowToDisk=&quot;false&quot;  </li>
<li>memoryStoreEvictionPolicy=&quot;FIFO&quot;  </li>
<li>/&gt;  </li>
<li></li>
<li></li>
<li>&lt;!--  </li>
<li>Sample cache named sampleCache3. This cache overflows to disk. The disk store is  </li>
<li>persistent between cache and VM restarts. The disk expiry thread interval is set to 10  </li>
<li>minutes, overriding the default of 2 minutes.  </li>
<li>示例sampleCache3。这个缓存溢出到磁盘。磁盘存储在缓存和VM重启的时候是持续的。磁盘期满间隔设置为10分钟，覆盖原来的2分钟。  </li>
<li>--&gt;  </li>
<li>&lt;cache name=&quot;sampleCache3&quot;  </li>
<li>maxElementsInMemory=&quot;500&quot;  </li>
<li>eternal=&quot;false&quot;  </li>
<li>overflowToDisk=&quot;true&quot;  </li>
<li>timeToIdleSeconds=&quot;300&quot;  </li>
<li>timeToLiveSeconds=&quot;600&quot;  </li>
<li>diskPersistent=&quot;true&quot;  </li>
<li>diskExpiryThreadIntervalSeconds=&quot;1&quot;  </li>
<li>memoryStoreEvictionPolicy=&quot;LFU&quot;  </li>
<li>/&gt;  </li>
<li></li>
<li>&lt;!--  </li>
<li>Sample Terracotta clustered cache named sampleTerracottaCache.  </li>
<li>This cache uses Terracotta to cluster the contents of the cache.  </li>
<li>Terracotta集群缓存示例sampleTerracottaCache。这个缓存使用Terracotta聚集缓存内容。  </li>
<li>--&gt;  </li>
<li>&lt;cache name=&quot;sampleTerracottaCache&quot;  </li>
<li>maxElementsInMemory=&quot;1000&quot;  </li>
<li>eternal=&quot;false&quot;  </li>
<li>timeToIdleSeconds=&quot;3600&quot;  </li>
<li>timeToLiveSeconds=&quot;1800&quot;  </li>
<li>overflowToDisk=&quot;false&quot;&gt;  </li>
<li></li>
<li><terracotta/>  </li>
<li></cache>  </li>
<li></li>
<li>&lt;!--  </li>
<li>Sample xa enabled cache name xaCache  </li>
<li>Xa激活缓存示例xaCache  </li>
<li>--&gt;  </li>
<li></li>
<li>&lt;cache name=&quot;xaCache&quot;  </li>
<li>maxElementsInMemory=&quot;500&quot;  </li>
<li>eternal=&quot;false&quot;  </li>
<li>timeToIdleSeconds=&quot;300&quot;  </li>
<li>timeToLiveSeconds=&quot;600&quot;  </li>
<li>overflowToDisk=&quot;false&quot;  </li>
<li>diskPersistent=&quot;false&quot;  </li>
<li>diskExpiryThreadIntervalSeconds=&quot;1&quot;  </li>
<li>transactionalMode=&quot;xa&quot;&gt;  </li>
<li><terracotta clustered="true"/>  </li>
<li></cache>  </li>
<li></li>
<li></li>
<li></ehcache>  </li>
<li></li>
<li></li>
<li></li>
<li>设置完全限定类名被注册为CacheManager事件监听器。  </li>
<li></li>
<li>事件包括：  </li>
<li>/* adding a Cache增加一个缓存  </li>
<li>/* removing a Cache移除一个缓存  </li>
<li>设置元素是否持久化，如果持久化，将忽视超时并且元素永不过期。  </li>
<li>回调监听器的方法有同步和异步两种。安全的处理潜在的麻烦和线程安全问题将是实施者的责任，这依取决于他们的监听器在干什么。  </li>
<li></li>
<li>如果没有类指定，就不会创建监听器。这里没有默认值。  </li>
<li><cacheManagerEventListenerFactory class="" properties=""/>  </li>
<li></li>
<li>&lt;!--  </li>
<li>TerracottaConfig  </li>
<li>========================  </li>
<li>maxElementsOnDisk:  </li>
<li></li>
<li>设置磁盘存储器维持的对象的最大数目。默认是0，意味着没有限制。  </li>
<li>eternal:  </li>
<li>激活Terracotta集群选项)  </li>
<li></li>
<li>注意：你需要安装运行一个或多个Terracotta服务器来使用Terracotta集群。  </li>
<li>参看<a href="http://www.terracotta.org/web/display/orgsite/Download" target="_blank">http://www.terracotta.org/web/display/orgsite/Download</a>  </li>
<li></li>
<li></li>
<li>使用多个Terracotta服务器实例URLs（容错能力）的例子  </li>
<li><terracottaConfig url="host1:9510,host2:9510,host3:9510"/>  </li>
<li>maxElementsInMemory:  </li>
<li></li>
<li>设置创建到存储器中的对象的最大数目。  </li>
<li>在ehcache配置文件中嵌入一个Terracotta配置文件简单的放置一个普通的Terracotta XML配置到<terracottaConfig>元素中。  </li>
<li></li>
<li>Example:  </li>
<li><terracottaConfig>  </li>
<li><tc-config>  </li>
<li><servers>  </li>
<li><server host="server1" name="s1"/>  </li>
<li><server host="server2" name="s2"/>  </li>
<li></servers>  </li>
<li><clients>  </li>
<li><logs>app/logs-%i</logs>  </li>
<li></clients>           </li>
<li></tc-config>  </li>
<li></terracottaConfig>  </li>
<li>更多的Terracotta信息，参看Terracotta文档。  </li>
<li>--&gt;  </li>
<li><terracottaConfig url="localhost:9510"/>  </li>
<li></li>
<li>&lt;!--  </li>
<li>Cache configuration  </li>
<li>===================  </li>
<li></li>
<li>The following attributes are required.  </li>
<li>如下属性都需要：  </li>
<li>name:  </li>
<li></li>
<li>设置缓存的名称。用于鉴定缓存，他必须是唯一的。  </li>
<li></li>
<li>指定一个TerracottaConfig用于为CacheManager配置Terracotta运行时。  </li>
<li></li>
<li>配置文件可以通过两种主要方式指定：通过引用配置文件或者使用Terracotta嵌入式配置文件。  </li>
<li></li>
<li>使用URL属性指定一个配置资源（或者多个）的引用。URL属性必须包含一个逗号隔开的列表：  </li>
<li>/* path（Terracotta配置文件的路径）(通常命名为 tc-config.xml)  </li>
<li>/* URL Terracotta配置文件的URL  </li>
<li>/* <server host>:<port> Terracotta服务器运行实例  </li>
<li>最简单的例子指出这台机器上的一个Terracotta服务器：  </li>
<li><terracottaConfig url="localhost:9510"/>  </li>
<li>使用Terracotta配置文件路径的例子：  </li>
<li><terracottaConfig url="/app/config/tc-config.xml"/>  </li>
<li>使用Terracotta配置文件URL的例子：  </li>
<li><terracottaConfig url="http://internal/ehcache/app/tc-config.xml"/><br>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; <!-- CacheManager配置 ========================== 一个ehcache.xml 相当于一个单个的CacheManager 学习下面的说明或者ehcache构架（ehcache.xsd）怎样配置 系统资源标识在这个文件中能被具体制定，当配置被加载时，他们将会被替换。例如 multicastGroupPort=${multicastGroupPort}被环境变量的系统属性替换，或是使用如-DmulticastGroupPort=4446命令行开关指定一个系统属性。 <ehcache>的属性如下： /* name – CacheManager的可选名称。这个名称起初主要是用于文档记录或辨别Terracotta集群状态。对于Terracotta集群的缓存，一组CacheManager名称和cache名称唯一的鉴定了一个特定的存储于Terracotta集群存储器的缓存。 /* updateCheck – 一个可选的boolean标识符，指定这个CacheManager是否通过Internet检查Ehcache的新版本。如果没有特别指明，updateCheck="true". /* monitoring – 一个可选的设置，决定CacheManager是否应该自动的用系统MBean服务器注册SampledCacheMBean。当下，这个监测。只有当使用Terracotta集群和使用Terracotta Developer Console时才有用。使用"autodetect"值，Terracotta集群的出现将被检测和监视，并通过Developer控制台激活。其他允许的值有："on" 和 "off"。默认为"autodetect"。当使用JMX监测时，这个设置不会产生任何作用。 /* dynamicConfig – 一个可选设置，能够使与这个CacheManager相关联的动态配置失活。这个设置的默认值是true-例如，动态配置是激活的。动态配置的缓存通过缓存的配置对象让他们的TTI, TTL 和maximum disk 和in-memory capacity在运行时改变。 --> <ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="ehcache.xsd" updateCheck="true" monitoring="autodetect" dynamicConfig="true" > <!-- DiskStore configuration ======================= 磁盘存储器是可选的。关闭磁盘存储路径创建，解释下面的磁盘存储器元素。 对于任何缓存，如果你已经激活了overflowToDisk或diskPersistent，就要配置磁盘存储器。 如果他未配置，并且创建了一个需要磁盘存储的缓存，将会发出一个警告并且java.io.tmpdir将会自动使用。 磁盘存储器仅有一个属性- "path"。这个路径就是.data and .index文件被创建的目录路径。 如果这个路径是下述Java系统属性之一，他将会被运行中的VM中的值替换。为了向后兼容，这些应该被特别规定，而不会被${token}替换语法封闭。 下列属性翻译： /* user.home -用户的根目录 /* user.dir – 用户的当前工作目录 /* java.io.tmpdir – 默认临时文件路径 /* ehcache.disk.store.dir – 一个系统属性，你通常用命令行指定； 例如： java -Dehcache.disk.store.dir=/u01/myapp/diskdir ... 子目录通过如下属性指定，例如：java.io.tmpdir/one --> <diskStore path="java.io.tmpdir"/> <!-- TransactionManagerLookup configuration ====================================== TransactionManagerLookup 配置 这个类被ehcache用XA激活的ehcache来查找用于应用程序中的JTA TransactionManager。如果没有指定类，那么DefaultTransactionManagerLookup将以如下顺序找到TransactionManager。 /*GenericJNDI（例如：jboss，属性jndiName控制TransactionManager对象的名称来查找） /*Websphere /*Bitronix /*Atomikos 你可以提供自己的查找类实现net.sf.ehcache.transaction.manager.TransactionManagerLookup接口。 <transactionManagerLookup class="net.sf.ehcache.transaction.manager.DefaultTransactionManagerLookup" properties="" propertySeparator=":"/> <!-- CacheManagerEventListener ========================= 指定一个CacheManagerEventListenerFactory，当缓存被增加或从CacheManager移除时被告知。 CacheManagerEventListenerFactory的属性有： /* class – 一个完全限定的工厂类名。 /* properties – 逗号隔开的属性只对工厂有意义。 overflowToDisk:设置元素是否能溢出磁盘，当存储器容量达到最大存储限制。 如下属性和元素是可选的。 timeToIdleSeconds: Sets the time to idle for an element before it expires. 设置一个元素在过期前的空闲时间 i.e. The maximum amount of time between accesses before an element expires Is only used if the element is not eternal. 换言之，最大时间数在进入之后和元素过期之前这段时间之间，只有元素在非持久化时才有用。 Optional attribute. A value of 0 means that an Element can idle for infinity. 可选属性，0表示一个元素可以无限的空闲 The default value is 0. 默认值是0。 timeToLiveSeconds: Sets the time to live for an element before it expires. i.e. The maximum time between creation time and when an element expires. Is only used if the element is not eternal. Optional attribute. A value of 0 means that and Element can live for infinity. The default value is 0. 在元素过期之前，设置一个存留时间。换言之，最大时间在创建时间和元素过期之间。仅用于元素非持久化。可选属性。值为0表示元素可无限存留，默认值是0 diskPersistent: Whether the disk store persists between restarts of the Virtual Machine. The default value is false. 磁盘存储是否在虚拟机重启后持续存在。默认只是false。 diskExpiryThreadIntervalSeconds: The number of seconds between runs of the disk expiry thread. The default value is 120 seconds. 秒数在运行和磁盘终止线程之间，默认值是120秒。 diskSpoolBufferSizeMB: This is the size to allocate the DiskStore for a spool buffer. Writes are made to this area and then asynchronously written to disk. The default size is 30MB. Each spool buffer is used only by its cache. If you get OutOfMemory errors consider lowering this value. To improve DiskStore performance consider increasing it. Trace level logging in the DiskStore will show if put back ups are occurring. 这是为后台打印缓冲分配在DiskStore的大小。在这一区域进行写入，并同步写入磁盘。默认值是30M。每个后台缓冲区仅由他的缓存使用，如出现OutOfMemory错误，考虑降低该值。为了提高DiskStore性能，考虑增加它。跟踪级别的DiskStore工作 将显示是否推迟出现。 clearOnFlush: whether the MemoryStore should be cleared when flush() is called on the cache. By default, this is true i.e. the MemoryStore is cleared. 当flush()在缓存中被调用时，MemoryStore是否被清除。默认是true，即MemoryStore被清除。 memoryStoreEvictionPolicy: Policy would be enforced upon reaching the maxElementsInMemory limit. Default policy is Least Recently Used (specified as LRU). Other policies available - First In First Out (specified as FIFO) and Less Frequently Used (specified as LFU) Cache elements can also contain sub elements which take the same format of a factory class and properties. Defined sub-elements are: 当达到maxElementsInMemory限制时，策略将强制执行。策略是最近最少使用的算法（简称为LRU）。其他的策略通用。缓存元素也可以有子元素，子元素拥有相同格式的工厂类和属性。定义的sub-elements有： /* cacheEventListenerFactory - Enables registration of listeners for cache events, such as put, remove, update, and expire. /* cacheEventListenerFactory – 启用缓存事件监听器的注册，如put, remove, update, and expire. /* bootstrapCacheLoaderFactory - Specifies a BootstrapCacheLoader, which is called by a cache on initialisation to prepopulate itself. /* bootstrapCacheLoaderFactory – 指定一个BootstrapCacheLoader，它被一个缓存在初始化时调用，用来预填充自己。 /* cacheExtensionFactory - Specifies a CacheExtension, a generic mechansim to tie a class which holds a reference to a cache to the cache lifecycle. /* cacheExtensionFactory – 指定一个CacheExtension，一个通用的mechansim来联系一个保存引用到缓存的类到缓存生命周期。 /* cacheExceptionHandlerFactory - Specifies a CacheExceptionHandler, which is called when cache exceptions occur. /* cacheExceptionHandlerFactory – 指定一个CacheExceptionHandler，每当缓存异常出现时调用。 /* cacheLoaderFactory - Specifies a CacheLoader, which can be used both asynchronously and synchronously to load objects into a cache. More than one cacheLoaderFactory element can be added, in which case the loaders form a chain which are executed in order. If a loader returns null, the next in chain is called. /* cacheLoaderFactory – 指定一个CacheLoader，能够同步和异步装载对象到一个缓存。可以添加多个cacheLoaderFactory元素，在这种情况装载机形成一个链，被有序的执行。如果一个装载机返回null，下一个链就被调用。 Cache Event Listeners 缓存事件监听器 All cacheEventListenerFactory elements can take an optional property listenFor that describes which events will be delivered in a clustered environment. The listenFor attribute has the following allowed values: 所有的cacheEventListenerFactory元素能选取一个可选属性listenFor描述的事件将在一个集群环境中交付。这个listenFor属性有如下允许的值： /* all - the default is to deliver all local and remote events /* local - deliver only events originating in the current node /* remote - deliver only events originating in other nodes /* all – 默认交付所有的本地和远程事件 /* local – 交付的只是源于当前节点的事件 /* remote - 交付的只是源于其他节点 Example of setting up a logging listener for local cache events: 设置一个本地缓存事件监听器的例子： <cacheEventListenerFactory class="my.company.log.CacheLogger" listenFor="local" /> Cache Exception Handling 缓存异常处理 ++++++++++++++++++++++++ By default, most cache operations will propagate a runtime CacheException on failure. An interceptor, using a dynamic proxy, may be configured so that a CacheExceptionHandler can be configured to intercept Exceptions. Errors are not intercepted. 通常，大多数cache运行失败将产生运行时CacheException。通过使用代理，一个拦截器应该被配置，以便于能够配置CacheExceptionHandler拦截异常。错误并不被拦截。 It is configured as per the following example: 按照下面的例子配置： <cacheExceptionHandlerFactory class="com.example.ExampleExceptionHandlerFactory" properties="logLevel=FINE"/> Caches with ExceptionHandling configured are not of type Cache, but are of type Ehcache only, and are not available using CacheManager.getCache(), but using CacheManager.getEhcache(). 有ExceptionHandling配置的缓存并不是典型的Cache，但却是典型的Ehcache，并且不能使用CacheManager.getCache()，但能够使用CacheManager.getEhcache()。 Cache Loader 缓存装载 ++++++++++++ A default CacheLoader may be set which loads objects into the cache through asynchronous and synchronous methods on Cache. This is different to the bootstrap cache loader, which is used only in distributed caching. 一个默认的CacheLoader应该被设置成这样，能够通过Cache中的同步和异步方法装载对象到缓存中。这和仅在分布是缓存中被用到的缓存装载引导程序是不同的。 It is configured as per the following example: 按照如下示例配置： <cacheLoaderFactory class="com.example.ExampleCacheLoaderFactory" properties="type=int,startCounter=10"/> XA Cache ++++++++ To enable an ehcache as a participant in the JTA Transaction, just have the following attribute 使ehcache作为JTA事务的参与者，只需要如下属性。 transactionalMode="xa", otherwise the default is transactionalMode="off" transactionalMode="xa", 否则，默认是 transactionalMode="off" Cache Writer ++++++++++++ A CacheWriter maybe be set to write to an underlying resource. Only one CacheWriter can be been to a cache. 一个CacheWriter可以设置写到底层资源中。只有一个CacheWriter能够成为一个cache。 It is configured as per the following example for write-through: 按照如下示例配置write-through： <cacheWriter writeMode="write-through" notifyListenersOnException="true"> <cacheWriterFactory class="net.sf.ehcache.writer.TestCacheWriterFactory" properties="type=int,startCounter=10"/> </cacheWriter> And it is configured as per the following example for write-behind: 按照如下示例配置write-behind: <cacheWriter writeMode="write-behind" minWriteDelay="1" maxWriteDelay="5" rateLimitPerSecond="5" writeCoalescing="true" writeBatching="true" writeBatchSize="1" retryAttempts="2" retryAttemptDelaySeconds="1"> <cacheWriterFactory class="net.sf.ehcache.writer.TestCacheWriterFactory" properties="type=int,startCounter=10"/> </cacheWriter> The cacheWriter element has the following attributes: cacheWriter元素有如下属性： /* writeMode: the write mode, write-through or write-behind These attributes only apply to write-through mode: 这些属性仅适用于write-through模式： /* notifyListenersOnException: Sets whether to notify listeners when an exception occurs on a writer operation. /* notifyListenersOnException:设置当一个写操作出现异常时是否告知监听器。 These attributes only apply to write-behind mode: 这些属性仅适用于write-behind模式： /* minWriteDelay: Set the minimum number of seconds to wait before writing behind. If set to a value greater than 0, it permits operations to build up in the queue. This is different from the maximum write delay in that by waiting a minimum amount of time, work is always being built up. If the minimum write delay is set to zero and the CacheWriter performs its work very quickly, the overhead of processing the write behind queue items becomes very noticeable in a cluster since all the operations might be done for individual items instead of for a collection of them. /* minWriteDelay:设置write-behind之前的等待最小秒数。如果设置值比0大，则允许操作建立在队列中。和最大写入延迟不同，通过等待的最短时间，工作将同时被建立。如果最小写入延迟设置成0，并且CacheWriter快速执行程序，在一个集群中处理队列项目后的写入开销将会非常显著，因为所有的运行被单个项目完成，代替他们的一个集合。 /* maxWriteDelay: Set the maximum number of seconds to wait before writing behind. If set to a value greater than 0, it permits operations to build up in the queue to enable effective coalescing and batching optimisations. /* maxWriteDelay:设置在后面写入之前等待的最大秒数。如设置值为0，它允许在队列里建立运行程序，以便有效地合并和批量优化。 /* writeBatching: Sets whether to batch write operations. If set to true, writeAll and deleteAll will be called on the CacheWriter rather than write and delete being called for each key. Resources such as databases can perform more efficiently if updates are batched, thus reducing load. /* writeBatching:设置是否批量写入操作。如果设为true，writeAll 和deleteAll将调用CacheWriter，而不是为每个键调用write和delete。如果更新是批量的，诸如数据库资源可以更高效的执行，因此减少了负荷。 /* writeBatchSize: Sets the number of operations to include in each batch when writeBatching is enabled. If there are less entries in the write-behind queue than the batch size, the queue length size is used. /* writeBatchSize:当writeBatching处于激活时，设置每批包含的操作的数目。如果write-behind队列的实体数少于每批的数目，就使用队列的长度。 /* rateLimitPerSecond: Sets the maximum number of write operations to allow per second when writeBatching is enabled. /* rateLimitPerSecond:当writeBatching激活时，设置写操作每秒允许的最大数目。 /* writeCoalescing: Sets whether to use write coalescing. If set to true and multiple operations on the same key are present in the write-behind queue, only the latest write is done, as the others are redundant. /* writeCoalescing: 设置是否使用写入联合。如果设为true并且同样的键有多个操作出现在write-behind队列，只有最新的写入完成，因为其他的成了多余的。 /* retryAttempts: Sets the number of times the operation is retried in the CacheWriter, this happens after the original operation. /* retryAttempts:设置CacheWriter中重复操作的总次数，这发生在初次操作之后。 /* retryAttemptDelaySeconds: Sets the number of seconds to wait before retrying an failed operation. /* retryAttemptDelaySeconds:设置在失败操作重试之前等待的秒数。 Cache Extension +++++++++++++++ CacheExtensions are a general purpose mechanism to allow generic extensions to a Cache. CacheExtensions are tied into the Cache lifecycle. CacheExtensions是一个总的作用机制允许Cache有普通异常。CacheExtensions与Cache生命周期紧密相连。 CacheExtensions are created using the CacheExtensionFactory which has a <code>createCacheCacheExtension()</code> method which takes as a parameter a Cache and properties. It can thus call back into any public method on Cache, including, of course, the load methods. 创建CacheExtensions 来使用CacheExtensionFactory，他有一个<code>createCacheCacheExtension()</code>方法可以当做一个参数一个Cache和属性。因此CacheExtensions能够回调所有Cache中的公有方法，当然，包括装载方法。 Extensions are added as per the following example: 按照如下示例增加Extensions： <cacheExtensionFactory class="com.example.FileWatchingCacheRefresherExtensionFactory" properties="refreshIntervalMillis=18000, loaderTimeout=3000, flushPeriod=whatever, someOtherProperty=someValue ..."/> Terracotta Clustering +++++++++++++++++++++ Cache elements can also contain information about whether the cache can be clustered with Terracotta. The <terracotta> sub-element has the following attributes: Cache元素也包含了有关是否缓存能和Terracotta聚集的信息。<terracotta>子元素有如下属性： /* clustered=true|false - indicates whether this cache should be clustered with Terracotta. By default, if the <terracotta> element is included, clustered=true. /* clustered=true|false – 显示这个cache是否应该和Terracotta聚集。如果包括<terracotta>元素，默认的是clustered=true。 /* valueMode=serialization|identity - indicates whether this cache should be clustered with serialized copies of the values or using Terracotta identity mode. By default, values will be cached in serialization mode which is similar to other replicated Ehcache modes. The identity mode is only available in certain Terracotta deployment scenarios and will maintain actual object identity of the keys and values across the cluster. In this case, all users of a value retrieved from the cache are using the same clustered value and must provide appropriate locking for any changes made to the value (or objects referred to by the value). /* valueMode=serialization|identity – 指出是否这个cache和值的序列化拷贝聚合或者使用Terracotta鉴定模式。通常，值将会在序列化模式中缓存，这和其他的再生Ehcache模式相似。身份模式只有在某些Terracotta部署方案中有效，并且通过集群保持实际对象身份的键和值。在这种情况下，所有从缓存取值的用户都使用相同的集群值，并且必须对值（或者值所引用的对象）的任何改变提供了合适的锁定。 /* synchronousWrites=true|false - When set to true, clustered caches use Terracotta SYNCHRONOUS WRITE locks. Asynchronous writes (synchronousWrites="false") maximize performance by allowing clients to proceed without waiting for a "transaction received" acknowledgement from the server. Synchronous writes (synchronousWrites="true") maximize data safety by requiring that a client receive server acknowledgement of a transaction before that client can proceed. If coherence mode is disabled using configuration (coherent="false") or through the coherence API, only asynchronous writes can occur (synchronousWrites="true" is ignored). By default this value is false (i.e. clustered caches use normal Terracotta WRITE locks). /* synchronousWrites=true|false – 当设为true时，缓存集群使用Terracotta SYNCHRONOUS WRITE锁。异步写入(synchronousWrites="false")最大的性能允许客户端继续而无需等待"transaction received"服务器的回应。同步写入(synchronousWrites="true")最大数据安全性，要求客户端再继续之前接收服务器端的事务响应。如果coherence模式不能使用配置(coherent="false")或者通过coherence API，仅异步写入能够存在(synchronousWrites="true"被忽略)。通常，这个值为false（例. 聚集缓存使用正常的Terracotta WRITE锁）。 /* coherent=true|false - indicates whether this cache should have coherent reads and writes with guaranteed consistency across the cluster. By default, its value is true. If this attribute is set to false (or "incoherent" mode), values from the cache are read without locking, possibly yielding stale data. Writes to a cache in incoherent mode are batched and applied without acquiring cluster-wide locks, possibly creating inconsistent values across cluster. Incoherent mode is a performance optimization with weaker concurrency guarantees and should generally be used for bulk-loading caches, for loading a read-only cache, or where the application that can tolerate reading stale data. This setting overrides coherentReads, which is deprecated. /* coherent=true|false – 指出是否这个缓存应使读和写前后一致并通过集群确保其一致性。通常默认值是true。如这个属性被设为false（或"incoherent"模式），缓存里没有锁定直接读取的值，可能产生坏的数据。随着并发保证的减弱，Incoherent模式是最优化性能，应该用于bulk-loading缓存，用于装载一个只读缓存，或用于程序中能够容忍读取损坏数据的地方。这个设置重载了coherentReads，这是不赞成的。 /* copyOnRead=true|false - indicates whether cache values are deserialized on every read or if the materialized cache value can be re-used between get() calls. This setting is useful if a cache is being shared by callers with disparate classloaders or to prevent local drift if keys/values are mutated locally w/o putting back to the cache. NOTE: This setting is only relevant for caches with valueMode=serialization /* copyOnRead=true|false – 指出是否每个读出的缓存值是反序列化的，或者，是否具体的缓存值能够在get()调用之间被重用。这个设置很有用，如果一个缓存被不同的类装载器的调用者共享，或是阻止本地偏移如果键/值被组织本地w/o放回缓存。注意：这个设置仅对valueMode=serialization的缓存有意义。 Simplest example to indicate clustering: 最简单的集群实例： <terracotta/> To indicate the cache should not be clustered (or remove the <terracotta> element altogether): 指明缓存不被聚集（或一起移除<terracotta>元素） <terracotta clustered="false"/> To indicate the cache should be clustered using identity mode: 表示使用模式聚集缓存： <terracotta clustered="true" valueMode="identity"/> To indicate the cache should be clustered using incoherent mode for bulk load: 对大量的装载使用incoherent模式聚集缓存。 <terracotta clustered="true" coherent="false"/> To indicate the cache should be clustered using synchronous-write locking level: 使用synchronous-write锁定水平应该聚集缓存。 <terracotta clustered="true" synchronousWrites="true"/> --> <!-- Mandatory Default Cache configuration. These settings will be applied to caches created programmtically using CacheManager.add(String cacheName). 强制预设缓存配置。这个设置将应用于缓存创建CacheManager.add(String cacheName)。 The defaultCache has an implicit name "default" which is a reserved cache name. defaultCache有一个内涵的名称“default”，是一个预设的缓存名称。 --> <defaultCache maxElementsInMemory="0" eternal="false" timeToIdleSeconds="1200" timeToLiveSeconds="1200"> <terracotta/> </defaultCache> <!-- Sample caches. Following are some example caches. Remove these before use. 缓存样本。以下是一些缓存实例，在使用前删掉这些。 --> <!-- Sample cache named sampleCache1 This cache contains a maximum in memory of 10000 elements, and will expire an element if it is idle for more than 5 minutes and lives for more than 10 minutes. 缓存实例名为sampleCache1，这个缓存的最大存储量为10000个元素，如果一个元素空闲时间超过5分钟就会失效并且生命周期超过10分钟。 If there are more than 10000 elements it will overflow to the disk cache, which in this configuration will go to wherever java.io.tmp is defined on your system. On a standard Linux system this will be /tmp" 如果超过了10000个元素，磁盘缓存将会溢出，在这个缓存中，这个配置将找到你系统中任何定义java.io.tmp的地方。在标准的Linux系统中，这将会是/tmp"。 --> <cache name="sampleCache1" maxElementsInMemory="10000" maxElementsOnDisk="1000" eternal="false" overflowToDisk="true" diskSpoolBufferSizeMB="20" timeToIdleSeconds="300" timeToLiveSeconds="600" memoryStoreEvictionPolicy="LFU" /> <!-- Sample cache named sampleCache2 实例缓存sampleCache2 This cache has a maximum of 1000 elements in memory. There is no overflow to disk, so 1000 is also the maximum cache size. Note that when a cache is eternal, timeToLive and timeToIdle are not used and do not need to be specified. 这个缓存的最大存储容量是1000个元素。没有磁盘溢出，因此，1000也是缓存的最大长度。要注意的是，当缓存持久化后, timeToLive和timeToIdle将不被使用，并且不需要特别指定。 --> <cache name="sampleCache2" maxElementsInMemory="1000" eternal="true" overflowToDisk="false" memoryStoreEvictionPolicy="FIFO" /> <!-- Sample cache named sampleCache3. This cache overflows to disk. The disk store is persistent between cache and VM restarts. The disk expiry thread interval is set to 10 minutes, overriding the default of 2 minutes. 示例sampleCache3。这个缓存溢出到磁盘。磁盘存储在缓存和VM重启的时候是持续的。磁盘期满间隔设置为10分钟，覆盖原来的2分钟。 --> <cache name="sampleCache3" maxElementsInMemory="500" eternal="false" overflowToDisk="true" timeToIdleSeconds="300" timeToLiveSeconds="600" diskPersistent="true" diskExpiryThreadIntervalSeconds="1" memoryStoreEvictionPolicy="LFU" /> <!-- Sample Terracotta clustered cache named sampleTerracottaCache. This cache uses Terracotta to cluster the contents of the cache. Terracotta集群缓存示例sampleTerracottaCache。这个缓存使用Terracotta聚集缓存内容。 --> <cache name="sampleTerracottaCache" maxElementsInMemory="1000" eternal="false" timeToIdleSeconds="3600" timeToLiveSeconds="1800" overflowToDisk="false"> <terracotta/> </cache> <!-- Sample xa enabled cache name xaCache Xa激活缓存示例xaCache --> <cache name="xaCache" maxElementsInMemory="500" eternal="false" timeToIdleSeconds="300" timeToLiveSeconds="600" overflowToDisk="false" diskPersistent="false" diskExpiryThreadIntervalSeconds="1" transactionalMode="xa"> <terracotta clustered="true"/> </cache> </ehcache> 设置完全限定类名被注册为CacheManager事件监听器。 事件包括： /<em> adding a Cache增加一个缓存 /</em> removing a Cache移除一个缓存 设置元素是否持久化，如果持久化，将忽视超时并且元素永不过期。 回调监听器的方法有同步和异步两种。安全的处理潜在的麻烦和线程安全问题将是实施者的责任，这依取决于他们的监听器在干什么。 如果没有类指定，就不会创建监听器。这里没有默认值。 <cacheManagerEventListenerFactory class="" properties=""/> <!-- TerracottaConfig ======================== maxElementsOnDisk: 设置磁盘存储器维持的对象的最大数目。默认是0，意味着没有限制。 eternal: 激活Terracotta集群选项) 注意：你需要安装运行一个或多个Terracotta服务器来使用Terracotta集群。 参看http://www.terracotta.org/web/display/orgsite/Download 使用多个Terracotta服务器实例URLs（容错能力）的例子 <terracottaConfig url="host1:9510,host2:9510,host3:9510"/> maxElementsInMemory: 设置创建到存储器中的对象的最大数目。 在ehcache配置文件中嵌入一个Terracotta配置文件简单的放置一个普通的Terracotta XML配置到<terracottaConfig>元素中。 Example: <terracottaConfig> <tc-config> <servers> <server host="server1" name="s1"/> <server host="server2" name="s2"/> </servers> <clients> <logs>app/logs-%i</logs> </clients> </tc-config> </terracottaConfig> 更多的Terracotta信息，参看Terracotta文档。 --> <terracottaConfig url="localhost:9510"/> &lt;!-- Cache configuration =================== The following attributes are required. 如下属性都需要： name: 设置缓存的名称。用于鉴定缓存，他必须是唯一的。 指定一个TerracottaConfig用于为CacheManager配置Terracotta运行时。 配置文件可以通过两种主要方式指定：通过引用配置文件或者使用Terracotta嵌入式配置文件。 使用URL属性指定一个配置资源（或者多个）的引用。URL属性必须包含一个逗号隔开的列表： /<em> path（Terracotta配置文件的路径）(通常命名为 tc-config.xml) /</em> URL Terracotta配置文件的URL /* <server host>:<port> Terracotta服务器运行实例 最简单的例子指出这台机器上的一个Terracotta服务器： <terracottaConfig url="localhost:9510"/> 使用Terracotta配置文件路径的例子： <terracottaConfig url="/app/config/tc-config.xml"/> 使用Terracotta配置文件URL的例子： <terracottaConfig url="http://internal/ehcache/app/tc-config.xml"/>
分享到： <a href="&quot;分享到新浪微博&quot;"><img src="" alt=""></a> <a href="&quot;分享到腾讯微博&quot;"><img src="" alt=""></a></li>
</ol>
<p><a href="http://zuzong.iteye.com/blog/1048731" title="Spring 3.0.5 MVC 基于注解ehcache.xml 配置方式" target="_blank">Spring 3.0.5 MVC 基于注解ehcache.xml 配 ...</a> | <a href="http://zuzong.iteye.com/blog/941759" title="过滤掉非指定保留的html元素，保留元素间的内容和指定的html" target="_blank">过滤掉非指定保留的html元素，保留元素间的 ...</a></p>
<ul>
<li>2011-05-18 17:20</li>
<li>浏览 507</li>
<li><a href="http://zuzong.iteye.com/blog/1048714#comments" target="_blank">评论(0)</a></li>
<li>分类:<a href="http://www.iteye.com/blogs/category/architecture" target="_blank">企业架构</a></li>
<li><a href="http://www.iteye.com/wiki/blog/1048714" target="_blank">相关推荐</a></li>
</ul>
<h3 id="-">评论</h3>
<p><a href=""></a></p>
<h3 id="-">发表评论</h3>
<p><a href="http://zuzong.iteye.com/login" target="_blank"><img src="" alt=""></a><a href="http://zuzong.iteye.com/login" target="_blank">您还没有登录,请您登录后再发表评论</a></p>
<p><a href="http://zuzong.iteye.com/" target="_blank"><img src="&quot;zuzong的博客: 奈何桥收费站。。。&quot;" alt="zuzong的博客"></a></p>
<p>zuzong</p>
<ul>
<li>浏览: 24410 次</li>
<li>性别: <img src="&quot;男&quot;" alt="Icon_minigender_1"></li>
<li>来自: 济南</li>
<li><img src="" alt=""><h3 id="-http-zuzong-iteye-com-blog-user_visits-">最近访客 <a href="http://zuzong.iteye.com/blog/user_visits" target="_blank">更多访客&gt;&gt;</a></h3>
</li>
</ul>
<p><a href="http://136203489-qq-com.iteye.com/" target="_blank"><img src="&quot;小菜菜的博客: &quot;" alt="小菜菜的博客"></a></p>
<p><a href="http://136203489-qq-com.iteye.com/" title="小菜菜" target="_blank">小菜菜</a></p>
<p><a href="http://donald3003a.iteye.com/" target="_blank"><img src="&quot;donald3003a的博客: &quot;" alt="donald3003a的博客"></a></p>
<p><a href="http://donald3003a.iteye.com/" title="donald3003a" target="_blank">donald3003a</a>
<a href="http://umex.iteye.com/" target="_blank"><img src="&quot;china_ymex的博客: &quot;" alt="china_ymex的博客"></a></p>
<p><a href="http://umex.iteye.com/" title="china_ymex" target="_blank">china_ymex</a></p>
<p><a href="http://dylinshi126.iteye.com/" target="_blank"><img src="&quot;dylinshi126的博客: &quot;" alt="dylinshi126的博客"></a></p>
<p><a href="http://dylinshi126.iteye.com/" title="dylinshi126" target="_blank">dylinshi126</a></p>
<h3 id="-">文章分类</h3>
<ul>
<li><a href="http://zuzong.iteye.com/" target="_blank">全部博客 (52)</a></li>
<li><a href="http://zuzong.iteye.com/category/51241" target="_blank">java (22)</a></li>
<li><a href="http://zuzong.iteye.com/category/51242" target="_blank">UI (4)</a></li>
<li><a href="http://zuzong.iteye.com/category/52900" target="_blank">临时 (1)</a></li>
<li><a href="http://zuzong.iteye.com/category/157174" target="_blank">缓存 (2)</a></li>
<li><a href="http://zuzong.iteye.com/category/157184" target="_blank">Python (1)</a></li>
<li><a href="http://zuzong.iteye.com/category/157246" target="_blank">安全 (1)</a></li>
<li><a href="http://zuzong.iteye.com/category/157330" target="_blank">Perl (1)</a></li>
<li><a href="http://zuzong.iteye.com/category/157455" target="_blank">软件设计 (4)</a></li>
<li><a href="http://zuzong.iteye.com/category/159555" target="_blank">MySQL (2)</a></li>
<li><a href="http://zuzong.iteye.com/category/181752" target="_blank">Groovy on Grails (1)</a></li>
<li><a href="http://zuzong.iteye.com/category/182760" target="_blank">Linux (11)</a></li>
<li><p><a href="http://zuzong.iteye.com/category/183872" target="_blank">Eclipse (1)</a></p>
<h3 id="-">社区版块</h3>
</li>
<li><p><a href="http://zuzong.iteye.com/blog/news" target="_blank">我的资讯</a> (0)</p>
</li>
<li><a href="http://zuzong.iteye.com/blog/post" target="_blank">我的论坛</a> (30)</li>
<li><a href="http://zuzong.iteye.com/blog/answered_problems" target="_blank">我的问答</a> (1)</li>
</ul>
<h3 id="-">存档分类</h3>
<ul>
<li><a href="http://zuzong.iteye.com/blog/monthblog/2011-10" target="_blank">2011-10</a> (17)</li>
<li><a href="http://zuzong.iteye.com/blog/monthblog/2011-09" target="_blank">2011-09</a> (1)</li>
<li><a href="http://zuzong.iteye.com/blog/monthblog/2011-06" target="_blank">2011-06</a> (5)</li>
<li><p><a href="http://zuzong.iteye.com/blog/monthblog_more" target="_blank">更多存档...</a></p>
<h3 id="-">最新评论</h3>
</li>
<li><p><a href="http://yangbaodi516.iteye.com/" title="yangbaodi516" target="_blank">yangbaodi516</a>： XMLInputFactory2 xmlif = (XMLIn ...
<a href="http://zuzong.iteye.com/blog/1073358#bc2240488" target="_blank">基于Woodstox的StAX 2 解析XML</a></p>
</li>
<li><a href="http://ak53pro.iteye.com/" title="AK53pro" target="_blank">AK53pro</a>： SSL证书怎么伪造啊...有数字签名的啊...
<a href="http://zuzong.iteye.com/blog/1050164#bc2237084" target="_blank">SSL中间人攻击及防范</a></li>
<li><a href="http://lysino.iteye.com/" title="lysino" target="_blank">lysino</a>： 若把此问题交给oracle的sequence来解决岂不是很简单 ...
<a href="http://zuzong.iteye.com/blog/1174278#bc2218914" target="_blank">一个循环流水号实现，求评</a></li>
<li><a href="http://zuzong.iteye.com/" title="zuzong" target="_blank">zuzong</a>： 写的时候，考虑过用indexof查一次，删一次，后来写着写着就 ...
<a href="http://zuzong.iteye.com/blog/941759#bc1948620" target="_blank">过滤掉非指定保留的html元素，保留元素间的内容和指定的html</a></li>
<li><a href="http://zuzong.iteye.com/" title="zuzong" target="_blank">zuzong</a>： 我一开始用的stringbuffer，发现删除了那些不需要的h ...
<a href="http://zuzong.iteye.com/blog/941759#bc1948610" target="_blank">过滤掉非指定保留的html元素，保留元素间的内容和指定的html</a>
声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。
© 2003-2012 ITeye.com. All rights reserved. [ 京ICP证110151号 京公网安备110105010620 ]
<img src="" alt=""></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/缓存/">缓存</a></li></span><span class="breadcrumb"><li><a href="/categories/缓存/">缓存</a></li><li><a href="/categories/缓存/ehcache/">ehcache</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ehcache/" class="label label-primary">ehcache</a><a href="/tags/缓存/" class="label label-success">缓存</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-缓存-ehcache--EhCache配置文件-奈何桥收费站。。。-ITeye技术网站/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-缓存-ehcache--EhCache配置文件-奈何桥收费站。。。-ITeye技术网站" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-缓存-ehcache--使用EhCache关于临时目录的一个注意事项-讨论区-开源中国社区/">使用 EhCache 关于临时目录的一个注意事项 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-缓存-ehcache--使用EhCache关于临时目录的一个注意事项-讨论区-开源中国社区/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-ehcache-">使用 EhCache 关于临时目录的一个注意事项 - 讨论区 - 开源中国社区</h1>
<ul>
<li><a href="http://www.oschina.net/" target="_blank">首页</a></li>
<li><a href="http://www.oschina.net/project" target="_blank">开源软件</a></li>
<li><a href="http://www.oschina.net/question" target="_blank">讨论区</a></li>
<li><a href="http://www.oschina.net/code/list" target="_blank">代码分享</a></li>
<li><a href="http://www.oschina.net/news" target="_blank">资讯</a></li>
<li><a href="http://www.oschina.net/blog" target="_blank">博客</a></li>
<li><a href="http://www.oschina.net/android" target="_blank">Android</a></li>
<li><a href="http://www.oschina.net/job" target="_blank">招聘</a></li>
</ul>
<p>当前访客身份：游客 [ <a href="http://www.oschina.net/home/login" target="_blank">登录</a> | <a href="http://www.oschina.net/home/reg" target="_blank">加入开源中国</a> ]</p>
<p>当前位置：<a href="http://www.oschina.net/question" target="_blank">讨论区</a> » <a href="http://www.oschina.net/question?catalog=2" target="_blank">技术分享</a> » <a href="http://www.oschina.net/p/ehcache" target="_blank">EhCache</a></p>
<p>软件 代码 讨论区 新闻 博客
<a href="http://my.oschina.net/javayou" target="_blank"><img src="&quot;红薯&quot;" alt="红薯"></a></p>
<h1 id="-ehcache-"><a href="">使用 EhCache 关于临时目录的一个注意事项</a></h1>
<p><a href="http://my.oschina.net/javayou" target="_blank">红薯</a> 发表于 8-20 09:24 3年前, <a href="http://www.oschina.net/question/12_2368#answers" target="_blank">0</a>回/524阅
<strong><a href="http://www.oschina.net/question" target="_blank">讨论区</a> » <a href="http://www.oschina.net/question?catalog=2" target="_blank">技术分享</a></strong></p>
<p>【杭州】开源中国-源创会第十三期开始报名 <a href="http://www.oschina.net/question/28_72721" target="_blank">我要报名»</a>
一般 ehcache 的配置中默认的 diskStore 的路径设置的是 java.io.tmpdir ，等于是当前系统的临时目录。</p>
<p>但是在 Tomcat  和 Resin 这两个应用服务器上，临时目录是有区别的，在 Tomcat 上运行的应用通过 java.io.tmpdir 系统变量获取到的路径是 <a href="http://www.oschina.net/p/tomcat" target="_blank">Tomcat</a> 目录下的 temp 子目录，而 <a href="http://www.oschina.net/p/resin" target="_blank">Resin</a> 返回的是系统的临时目录，linux下可能就是 /tmp</p>
<p>在 Linux 下如果我们使用的是 root 账号来启动 Tomcat 和 Resin 的话，那这个问题就不存在。但是我们非常不建议用 root 来启动 Tomcat 和 Resin，这时候我们会单独的创建一个非特权账号，假设该账号名为 www 来运行应用服务器。</p>
<p>我们需要将 Tomcat 和 Resin 所在的目录授权给 www 账号，这样应用服务器的日志文件才能正常的写入，但是由于 Resin 的临时目录是对应系统的 /tmp 目录，因此如果应用中使用了 ehcache 并设置了存储路径为 java.io.tmpdir ，你就会发现启动的时候报错，提示没有在 /tmp 目录下创建文件的权限，这是因为 www 账号没有写 tmp 目录的权限。</p>
<p>解决的办法就是修改 ehcache 的 diskStore 配置的值为  user.home ，将存储文件路径指定到用户的主目录下即可。</p>
<p>而 Tomcat 就没有这个问题，因为它的临时目录在 {tomcat}/temp ，而整个 {tomcat} 都已经授权给 www 账号了。</p>
<p><strong>标签：</strong> <a href="http://www.oschina.net/question/tag/ehcache" title="Java缓存框架 EhCache" target="_blank">EhCache</a> <a href="http://www.oschina.net/question/tag/cache" target="_blank">缓存</a>
<a href="">补充话题说明»</a></p>
<p><strong>分享到</strong> <a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a>**</p>
<p><a href="&quot;收藏此话题&quot;">收藏</a>
**</p>
<p>3
**</p>
<p><a href="">举报</a>
**</p>
<p><a href="&quot;踩：这问题不知道在说什么，或者没什么用&quot;">踩</a> 0 | <a href="&quot;顶：这问题很有用或者很清晰明了&quot;">顶</a> 0
**</p>
<h2 id="-http-www-oschina-net-question-12_2368-answers-http-www-oschina-net-question-12_2368-sort-time-answers-http-www-oschina-net-question-12_2368-top-0-http-www-oschina-net-question-12_2368-answerform-"><a href="http://www.oschina.net/question/12_2368#answers" target="_blank">按默认排序</a> | <a href="http://www.oschina.net/question/12_2368?sort=time#answers" target="_blank">显示最新评论</a> | <a href="http://www.oschina.net/question/12_2368#top" target="_blank">回页面顶部</a>  <a href=""></a>共有<em>0</em>个评论 <a href="http://www.oschina.net/question/12_2368#answerform">发表评论»</a></h2>
<p><a href="http://www.oschina.net/question/$link.user($g_user" target="_blank"><img src="&quot;非会员用户&quot;" alt="非会员用户"></a>)   <a href="&quot;粗体(Ctrl+B"></a>&quot;)<a href="&quot;斜体(Ctrl+I"></a>&quot;)<a href="&quot;下划线(Ctrl+U"></a>&quot;)<a href="&quot;删除线&quot;"></a><a href="&quot;删除格式&quot;"></a><a href="&quot;编号&quot;"></a><a href="&quot;项目符号&quot;"></a><a href="&quot;文字颜色&quot;"></a><a href="&quot;文字背景&quot;"></a><a href="&quot;字体&quot;"></a><a href="&quot;文字大小&quot;"></a><a href="&quot;超级链接&quot;"></a><a href="&quot;取消超级链接&quot;"></a><a href="&quot;插入表情&quot;"></a><a href="&quot;插入程序代码或脚本&quot;"></a><a href="&quot;图片&quot;"></a><a href="&quot;插入Flash&quot;"></a><a href="&quot;引用某段文字&quot;"></a><a href="&quot;全选&quot;"></a><a href="&quot;HTML代码&quot;"></a><a href="&quot;关于&quot;"></a>
<a href="http://www.oschina.net/question/12_2368#answers" target="_blank">回评论顶部</a> | <a href="http://www.oschina.net/question/12_2368#top" target="_blank">回页面顶部</a>
有什么技术问题吗？ <a href="http://www.oschina.net/question/ask" target="_blank">我要提问</a></p>
<p><strong><a href="http://my.oschina.net/javayou/?ft=bbs&amp;scope=2&amp;showme=1" target="_blank">全部(4786)...</a><em>红薯</em>的其他问题</strong></p>
<ul>
<li><a href="http://www.oschina.net/question/12_73010" title="解读 Oracle 12c 的 12 个新特性" target="_blank">解读 Oracle 12c 的 12 个新特性</a>(19回/2930阅,昨天(15:20))</li>
<li><a href="http://www.oschina.net/question/12_72989" title="配置 Gitosis" target="_blank">配置 Gitosis</a>(0回/17阅,昨天(13:10))</li>
<li><a href="http://www.oschina.net/question/12_72988" title="Git 服务器 Gitosis 架设指南" target="_blank">Git 服务器 Gitosis 架设指南</a>(1回/127阅,昨天(13:06))</li>
<li><a href="http://www.oschina.net/question/12_72813" title="MySQL 5.6.7-RC 的 tpcc-mysql 基准测试结果" target="_blank">MySQL 5.6.7-RC 的 tpcc-mysql 基准测试结果</a>(6回/1397阅,2天前)</li>
<li><p><a href="http://www.oschina.net/question/12_72796" title="使用 Web API 作为动态 TypeScript 编译器运行环境" target="_blank">使用 Web API 作为动态 TypeScript 编译器运行环境</a>(15回/3539阅,2天前)
<strong>类似的话题</strong></p>
</li>
<li><p><a href="http://www.oschina.net/question/12_12938" title="发布 oschina 缓存管理的源码，基于 ehcache" target="_blank">发布 oschina 缓存管理的源码，基于 ehcache</a>(4回/899阅,1年前)</p>
</li>
<li><a href="http://www.oschina.net/question/12_3699" title="快来看看 EhCache 卖掉后有多恶心" target="_blank">快来看看 EhCache 卖掉后有多恶心</a>(8回/1928阅,2年前)</li>
<li><a href="http://www.oschina.net/question/107963_13557" title="关于Ehcache集群缓存在应用重启后的加载问题" target="_blank">关于Ehcache集群缓存在应用重启后的加载问题</a>(0回/453阅,1年前)</li>
<li><a href="http://www.oschina.net/question/62530_4270" title="2010年3月9日ehcache 2.0发布" target="_blank">2010年3月9日ehcache 2.0发布</a>(3回/165阅,2年前)</li>
<li><a href="http://www.oschina.net/question/12_2940" title="EhCache的网友评论" target="_blank">EhCache的网友评论</a>(1回/186阅,2年前)</li>
<li><a href="http://www.oschina.net/question/12_7773" title="深入探讨在集群环境中使用 EhCache 缓存系统" target="_blank">深入探讨在集群环境中使用 EhCache 缓存系统</a>(4回/1372阅,2年前)</li>
<li><a href="http://www.oschina.net/question/12_3984" title="下载 EhCache 集群演示程序" target="_blank">下载 EhCache 集群演示程序</a>(29回/8486阅,2年前)</li>
<li><a href="http://www.oschina.net/question/1_5194" title="EhCache在acegi中的应用" target="_blank">EhCache在acegi中的应用</a>(1回/480阅,3年前)</li>
<li><a href="http://www.oschina.net/question/102297_17302" title="ehcache集群时同步不了" target="_blank">ehcache集群时同步不了</a>(3回/501阅,1年前)</li>
<li><a href="http://www.oschina.net/question/54100_31552" title="在 JPA、Hibernate 和 Spring 中配置 Ehcache 缓存" target="_blank">在 JPA、Hibernate 和 Spring 中配置 Ehcache 缓存</a>(2回/967阅,11个月前)</li>
<li><a href="http://www.oschina.net/question/12_4358" title="Ehcache 2.0 支持新的 Hibernate 3.3/3.5 缓存 SPI" target="_blank">Ehcache 2.0 支持新的 Hibernate 3.3/3.5 缓存 SPI</a>(1回/701阅,2年前)</li>
<li><a href="http://www.oschina.net/question/1_5192" title="EHCache 初步使用指南 " target="_blank">EHCache 初步使用指南</a>(0回/520阅,3年前)</li>
<li><a href="http://www.oschina.net/question/98610_14858" title="EhCache CacheManager 初次获取key值对象为空" target="_blank">EhCache CacheManager 初次获取key值对象为空</a>(4回/394阅,1年前)</li>
<li><a href="http://www.oschina.net/question/8676_3506" title="简述 EhCache 的几个模块" target="_blank">简述 EhCache 的几个模块</a>(1回/1623阅,2年前)</li>
<li><a href="http://www.oschina.net/question/12_8718" title="找到了 OSChina 出问题的原因了～～" target="_blank">找到了 OSChina 出问题的原因了～～</a>(2回/539阅,2年前)</li>
<li><a href="http://www.oschina.net/question/163220_62999" title="关于ehcahce配置" target="_blank">关于ehcahce配置</a>(0回/138阅,2个月前)</li>
</ul>
<p>© 开源中国社区(OsChina.NET) | <a href="http://www.oschina.net/home/about" target="_blank">关于我们</a> | <a href="mailto:oschina.net@gmail.com">广告联系</a> | <a href="http://weibo.com/oschina2010" target="_blank">@新浪微博</a> | <a href="http://m.oschina.net/" target="_blank">开源中国手机版</a> | 粤ICP备12009483号-3</p>
<p><a href=""></a><a href=""></a><a href=""></a>
<img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/缓存/">缓存</a></li></span><span class="breadcrumb"><li><a href="/categories/缓存/">缓存</a></li><li><a href="/categories/缓存/ehcache/">ehcache</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ehcache/" class="label label-primary">ehcache</a><a href="/tags/缓存/" class="label label-success">缓存</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-缓存-ehcache--使用EhCache关于临时目录的一个注意事项-讨论区-开源中国社区/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-缓存-ehcache--使用EhCache关于临时目录的一个注意事项-讨论区-开源中国社区" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-缓存-ehcache--基于EHCache实现缓存去重-passover【毕成功的博客】-51CTO技术博客/">基于EHCache实现缓存去重 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-缓存-ehcache--基于EHCache实现缓存去重-passover【毕成功的博客】-51CTO技术博客/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-ehcache-passover-51cto-">基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客</h1>
<h3 id="-">分享到</h3>
<ul>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">QQ空间</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">新浪微博</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">百度搜藏</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">人人网</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">腾讯微博</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">开心网</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">腾讯朋友</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">百度空间</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">豆瓣网</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">搜狐微博</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">百度新首页</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">QQ收藏</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">和讯微博</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">我的淘宝</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">百度贴吧</a></li>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">更多...</a></li>
</ul>
<p><a href="http://passover.blog.51cto.com/#" target="_blank">百度分享</a></p>
<p><a href="http://blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/head_blog_sibebar_logo.gif" alt=""></a><a href="http://www.51cto.com/" target="_blank">51CTO首页</a><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/top_bg_xian.gif" alt=""><a href="http://blog.51cto.com/" target="_blank">51CTO博客</a><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/top_bg_xian.gif" alt=""><a href="http://home.51cto.com/?reback=http%253A%252F%252Fpassover.blog.51cto.com%252F2431658%252F486709" target="_blank">我的博客</a><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/top_bg_xian.gif" alt=""> <a href="http://blog.51cto.com/search.php" target="_blank">搜索</a> <a href="">每日博报</a></p>
<p><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/top_shequ.gif" alt="">社区：<a href="http://bbs.51cto.com/" target="_blank">论坛</a><a href="http://blog.51cto.com/" target="_blank">博客</a><a href="http://down.51cto.com/" target="_blank">下载</a><a href="http://book.51cto.com/" target="_blank">读书</a><a href="">更多<img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/nav_ico1.gif" alt=""></a></p>
<p><a href="http://home.51cto.com/index.php?s=/Home/index" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/dia.gif" alt="" title="今天领无忧币了吗？"></a><a href="http://home.51cto.com/?reback=http%253A%252F%252Fpassover.blog.51cto.com%252F2431658%252F486709" target="_blank">登录</a><a href="http://ucenter.51cto.com/reg_01.php?reback=http%253A%252F%252Fpassover.blog.51cto.com%252F2431658%252F486709" target="_blank">注册</a></p>
<ul>
<li><a href="http://home.51cto.com/" target="_blank">家园</a></li>
<li><a href="http://t.51cto.com/" target="_blank">微博</a></li>
<li><a href="http://blog.51cto.com/" target="_blank">博客</a></li>
<li><a href="http://bbs.51cto.com/" target="_blank">论坛</a></li>
<li><a href="http://down.51cto.com/" target="_blank">下载</a></li>
<li><a href="http://selftest.51cto.com/" target="_blank">自测</a></li>
<li><a href="http://doctor.51cto.com/" target="_blank">门诊</a></li>
<li><a href="http://blog.51cto.com/newsletter/" target="_blank">周刊</a></li>
<li><a href="http://book.51cto.com/" target="_blank">读书</a></li>
<li><a href="http://g.51cto.com/" target="_blank">技术圈</a></li>
<li><a href="http://zhidao.51cto.com/" target="_blank">知道</a></li>
</ul>
<p><a href="http://blog.51cto.com/blogcommend" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/blogLogo01.png" alt=""></a></p>
<p>[</p>
<h1 id="passover-">passover【毕成功的博客】</h1>
<p>](<a href="http://passover.blog.51cto.com/" target="_blank">http://passover.blog.51cto.com/</a>)</p>
<p><a href="http://passover.blog.51cto.com/" target="_blank"><a href="http://passover.blog.51cto.com">http://passover.blog.51cto.com</a></a>  <a href="">【复制】</a> <a href="http://passover.blog.51cto.com/rss.php?uid=2431658" target="_blank"></a><a href="http://passover.blog.51cto.com/rss.php?uid=2431658">【订阅】</a></p>
<p><a href="http://passover.blog.51cto.com/2431658/o" title="察看passover所有原创文章" target="_blank">原创</a>:94<a href="http://passover.blog.51cto.com/2431658/t" title="察看passover所有翻译文章" target="_blank">翻译</a>:2<a href="http://passover.blog.51cto.com/2431658/c" title="察看passover所有转载文章" target="_blank">转载</a>:21</p>
<p><a href="http://passover.blog.51cto.com/" target="_blank">博 客</a>|<a href="http://passover.blog.51cto.com/pic/" target="_blank">图库</a>|<a href="http://passover.blog.51cto.com/addblog.php" target="_blank">写博文</a>|<a href="http://51ctoblog.blog.51cto.com/all/26414/4" target="_blank">帮 助</a></p>
<ul>
<li><a href="http://passover.blog.51cto.com/#" target="_blank">首页</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-1" target="_blank">Java</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-15" target="_blank">Game</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-11" target="_blank">Open Source</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-5" target="_blank">Design</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-4" target="_blank">Agile</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-9" target="_blank">Manage</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-7" target="_blank">Linux</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-6" target="_blank">Database</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-16" target="_blank">Server</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-13" target="_blank">Tool</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-10" target="_blank">Experience</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-3" target="_blank">Grails</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-2" target="_blank">Scala</a>|</li>
<li><a href="http://passover.blog.51cto.com/2431658/d-14" target="_blank">Other</a></li>
</ul>
<h2 id="-passover-blog"><strong>passover</strong> 的BLOG</h2>
<p><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar.php" alt=""></p>
<p><a href="http://51ctoblog.blog.51cto.com/26414/928875" target="_blank">头像升级了？来看看&gt;&gt;</a>
<a href="http://home.51cto.com/index.php?s=/space/2431658#message" target="_blank">写留言</a><a href="http://g.51cto.com/addgroup.php?uid=" target="_blank">邀请进圈子</a><a href="http://home.51cto.com/index.php?s=/Notify/write/uid/2431658" target="_blank">发消息</a> <a href="http://passover.blog.51cto.com/" target="_blank">加友情链接</a><a href="http://home.51cto.com/index.php?s=/space/2431658" target="_blank">进家园 加好友</a></p>
<h2 id="-">博客统计信息</h2>
<p><a href="http://blog.51cto.com/blogcommend" target="_blank"><strong>51CTO推荐博客</strong></a>
用户名：passover
文章数：117
评论数：174
访问量：162194
无忧币：1682
<a href="http://51ctoblog.blog.51cto.com/26414/5591" target="_blank">博客积分</a>：2780
<a href="http://51ctoblog.blog.51cto.com/26414/5591" target="_blank">博客等级</a>：7
注册日期：2010-11-16
<a href="http://blog.51cto.com/active/no1/ing.html" target="_blank">距离博客No.1争夺赛结束还有 10 天</a></p>
<h2 id="-">热门文章</h2>
<ul>
<li><a href="http://passover.blog.51cto.com/2431658/531075" target="_blank">按能力发薪酬？还是按贡..</a></li>
<li><a href="http://passover.blog.51cto.com/2431658/484673" target="_blank">利用Jsoup解析HTML</a></li>
<li><a href="http://passover.blog.51cto.com/2431658/648182" target="_blank">利用nginx+tomcat+memcac..</a></li>
<li><a href="http://passover.blog.51cto.com/2431658/517931" target="_blank">初试超轻量级actor框架—..</a></li>
<li><a href="">基于EHCache实现缓存去重</a></li>
<li><a href="http://passover.blog.51cto.com/2431658/568972" target="_blank">SolrJ学习的一点总结</a></li>
<li><a href="http://passover.blog.51cto.com/2431658/502232" target="_blank">代理IP自动切换的方法</a></li>
<li><a href="http://passover.blog.51cto.com/2431658/803094" target="_blank">Java游戏引擎libgdx的简介</a></li>
</ul>
<h2 id="-blog-">搜索BLOG文章</h2>
<h2 id="-2-http-passover-blog-51cto-com-mygroup-php-">我的技术圈(<a href="http://passover.blog.51cto.com/mygroup.php" target="_blank"><strong>2</strong></a>)</h2>
<p><a href="http://home.51cto.com/apps/group/index.php?s=/Index/index/" target="_blank">更多&gt;&gt;</a></p>
<ul>
<li><a href="http://g.51cto.com/soa" target="_blank">SOA讨论与实践</a>  </li>
<li><a href="http://g.51cto.com/scala" target="_blank">Scala</a>  </li>
</ul>
<h2 id="-">最近访客</h2>
<ul>
<li><a href="http://5985626.blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar(1" alt="">.php)</a></li>
</ul>
<p><a href="http://5985626.blog.51cto.com/" target="_blank">yyxxxn</a></p>
<ul>
<li><a href="http://vnet111.blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar(2" alt="">.php)</a></li>
</ul>
<p><a href="http://vnet111.blog.51cto.com/" target="_blank">vnet111</a></p>
<ul>
<li><a href="http://tntdba.blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar(3" alt="">.php)</a></li>
</ul>
<p><a href="http://tntdba.blog.51cto.com/" target="_blank">vbbb625</a></p>
<ul>
<li><a href="http://2739597.blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar(4" alt="">.php)</a></li>
</ul>
<p><a href="http://2739597.blog.51cto.com/" target="_blank">naxxmm</a></p>
<ul>
<li><a href="http://2951265.blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar(5" alt="">.php)</a></li>
</ul>
<p><a href="http://2951265.blog.51cto.com/" target="_blank">mumab..</a></p>
<ul>
<li><a href="http://4733437.blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar(6" alt="">.php)</a></li>
</ul>
<p><a href="http://4733437.blog.51cto.com/" target="_blank">wangj..</a></p>
<ul>
<li><a href="http://1711891.blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar(7" alt="">.php)</a></li>
</ul>
<p><a href="http://1711891.blog.51cto.com/" target="_blank">hjdon..</a></p>
<ul>
<li><a href="http://5920597.blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar(8" alt="">.php)</a></li>
</ul>
<p><a href="http://5920597.blog.51cto.com/" target="_blank">睡着了</a></p>
<ul>
<li><a href="http://fallenleaves.blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar(9" alt="">.php)</a></li>
</ul>
<p><a href="http://fallenleaves.blog.51cto.com/" target="_blank">李惟忠</a></p>
<ul>
<li><a href="http://2798724.blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar(10" alt="">.php)</a></li>
</ul>
<p><a href="http://2798724.blog.51cto.com/" target="_blank">李大玉</a></p>
<ul>
<li><a href="http://51ctohome.blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar(11" alt="">.php)</a></li>
</ul>
<p><a href="http://51ctohome.blog.51cto.com/" target="_blank">51cto..</a></p>
<ul>
<li><a href="http://glories.blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/avatar(12" alt="">.php)</a></li>
</ul>
<p><a href="http://glories.blog.51cto.com/" target="_blank">glories</a></p>
<h2 id="-">最新评论</h2>
<ul>
<li><a href="http://bbaobelief.blog.51cto.com/" target="_blank"><strong>bbaobelief</strong></a>：<a href="http://passover.blog.51cto.com/2431658/578817" target="_blank">你们是window啊，360修复一些漏洞，..</a></li>
<li><a href="http://aquarius.blog.51cto.com/" target="_blank"><strong>Aquarius_</strong></a>：<a href="http://passover.blog.51cto.com/2431658/1004429" target="_blank">呵呵，感谢博主分享了</a></li>
<li>[匿名]aaaa：<a href="http://passover.blog.51cto.com/2431658/648182" target="_blank">极其的不靠谱，配置起访问一直报400</a></li>
<li><a href="http://passover.blog.51cto.com/" target="_blank"><strong>passover</strong></a>：<a href="http://passover.blog.51cto.com/2431658/836918" target="_blank">回复 whocares: pm管理员就能拿到..</a></li>
<li>[匿名]whocares：<a href="http://passover.blog.51cto.com/2431658/836918" target="_blank">没有邀请码，等了半年都拿不到，郁闷啊</a></li>
<li>[匿名]33：<a href="http://passover.blog.51cto.com/2431658/487411" target="_blank">3333发达省份是地方</a></li>
</ul>
<h2 id="51cto-">51CTO推荐博文</h2>
<p><a href="http://blog.51cto.com/artcommend" target="_blank">更多&gt;&gt;</a></p>
<ul>
<li><a href="http://johnchina.blog.51cto.com/4390273/1017894" title="RSA加密解密相关 前端js加密，服务端java解密" target="_blank">RSA加密解密相关 前端js加密，服..</a></li>
<li><a href="http://mrwlh.blog.51cto.com/2238823/1017728" title="struts2.0中struts.xml配置文件详解 " target="_blank">struts2.0中struts.xml配置文件详解</a></li>
<li><a href="http://wzk89.blog.51cto.com/1660752/1017949" title="快速构建Windows 8风格应用16-SettingContract原理及构建" target="_blank">快速构建Windows 8风格应用16-Set..</a></li>
<li><a href="http://2745881.blog.51cto.com/2735881/1017921" title="如何处理ORA-00376错误的恢复问题" target="_blank">如何处理ORA-00376错误的恢复问题</a></li>
<li><a href="http://woshixy.blog.51cto.com/5637578/1018125" title="ajax效果模拟——隐藏的iframe无刷新效果" target="_blank">ajax效果模拟——隐藏的iframe无..</a></li>
<li><a href="http://zhanfeng.blog.51cto.com/6109904/1018081" title="用javascript做的一个简单的乒乓球游戏" target="_blank">用javascript做的一个简单的乒乓..</a></li>
<li><a href="http://virusswb.blog.51cto.com/115214/1019513" title="Rails开发细节《五》Migrations 数据迁移" target="_blank">Rails开发细节《五》Migrations ..</a></li>
<li><a href="http://yisuowushinian.blog.51cto.com/4241271/1016527" title="SQLServer存储过程和ADO.NET访问存储过程" target="_blank">SQLServer存储过程和ADO.NET访问..</a></li>
<li><a href="http://wzk89.blog.51cto.com/1660752/1017700" title="快速构建Windows 8风格应用15-ShareContract构建" target="_blank">快速构建Windows 8风格应用15-Sha..</a></li>
<li><a href="http://yisuowushinian.blog.51cto.com/4241271/1016524" title="网络工作室暑假后第二次培训资料（SQLServer存储过程和ADO.NET访问存储过程）整理（一）" target="_blank">网络工作室暑假后第二次培训资料..</a></li>
<li><p><a href="http://legend2011.blog.51cto.com/3018495/1015003" title="MyBatis多参数传递之注解方式示例" target="_blank">MyBatis多参数传递之注解方式示例</a></p>
<h2 id="-">友情链接</h2>
</li>
<li><p><a href="http://51ctoblog.blog.51cto.com/" title="51CTO博客开发" target="_blank">51CTO博客开发</a> <img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/tubiao3.gif" alt="本周内更新"></p>
</li>
</ul>
<p><a href="http://51ctomvp.blog.51cto.com/192695/1019865" target="_blank">2012年10月MVP名单公布啦！</a><a href="http://blog.51cto.com/newsletter/175/" target="_blank">周刊：从需求看《IT人员应聘建议》</a><a href="http://doctor.51cto.com/develop-271.html" target="_blank">【有奖门诊】探索式测试的奥秘</a></p>
<p><a href="http://passover.blog.51cto.com/all/2431658" target="_blank">博主的更多文章&gt;&gt;</a></p>
<p><a href="http://blog.51cto.com/artcommend" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/tj.png" alt=""></a></p>
<p><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/artType01.jpg" alt=""> 基于EHCache实现缓存去重 2011-01-27 16:15:10
标签：<a href="http://blog.51cto.com/tagindex.php?keyword=%BB%BA%B4%E6" target="_blank">缓存</a> <a href="http://blog.51cto.com/tagindex.php?keyword=%D6%B0%B3%A1" target="_blank">职场</a> <a href="http://blog.51cto.com/tagindex.php?keyword=%D0%DD%CF%D0" target="_blank">休闲</a> <a href="http://blog.51cto.com/tagindex.php?keyword=ehcache" target="_blank">ehcache</a></p>
<pre><code> 由于近期的工作主要集中在数据处理上，而性能问题时而暴露出来，我对需要处理的数据进行了一下简单的分析，发现存在大量的重复数据，这自然让我想到了去建立一个二级缓存把曾经处理过的数据缓存起来，避免重复处理。我们业务上其实就是对最近处理过的数据重复出现几率比较高，所以有一个几百兆的内存空间用LRU的策略进行去重应该就足够了。

其实可以选择的方案有很多，初步筛选了一下，我决定在对Java支持度比较好且应用广泛的OSCache和EHCache中选一个。上了官网一查，发现OSCache在几年前就停止更新了，而EHCache则一直有公司在维护，所以自然选定了后者。官方文档的地址是[http://www.ehcache.org/documentation/index.html](http://www.ehcache.org/documentation/index.html)。

先让同事研究了一下，弄的是1.7.0的版本，这个版本比较好的是对其他包的依赖很少，很快就把自己的demo建立起来了。然后上官网下载了最新的版本ehcache-core-2.3.1-distribution，里面其实就多了两个slf4j的包，原来的代码一行没动就可以运行起来了。这里新版本加入的内容比较多，jar包就是1.7.0的3倍大，看了下官方文档的说明，主要加入的就是对分布式的支持，当然还有很多新特性。新特性以后慢慢研究吧，我目前也用不到什么高级功能，既然新版本使用起来也很方便，那就用这个好了。

这里简单解释一下，我们原先想试一下他提供的FIFO和LRU的策略，结果刚开始测试输出的结果和预期居然不一致，官方文档上也没看到相应的解释。经过反复测试，感觉他不是严格按照这个策略来，可能是算法有些问题吧。

另外补充一下参数设置的经验。
</code></pre><ol>
<li>对于存储对象个数的设置：由于配置文件中只能指定maxElementsInMemory，这就会有可能存入的对象太多而超出VM的heap大小，当然你可以通过jvm参数增大heap大小，但这总还是有可能溢出。这里可以把maxElementsInMemory值设置到一个比较安全的大小，自己预先测试一下最好。如果内存仍然存不下你需要存的对象个数，那么可以开启overflowToDisk来增加可以存储的Element个数。这里要注意一下，EHCache不会自动帮助你去把内存对象写入到磁盘，当超过maxElementsInMemory程序会自动把更多的部分开始往硬盘写，但是内存的对象其实并没有清出去，这时需要手动使用Cache.flush()方法来把内存对象清出去。 对于是否需要用磁盘扩充缓存，这个还是根据自己应用判断。</li>
<li>重建上一次运行的缓存：这个需求肯定比较普遍，我们当然不希望一旦程序退出，整个缓存就要重建了。开启diskPersistent功能，只要使用的是CacheManager单例模式，下一次启动的时候就会调用上一次运行的缓存。比较麻烦的是写入磁盘的时间还是要自己调用 Cache.flush()方法。如果仅仅考虑到程序重启的话，我建议这里把diskStore写入到一个ramfs，这样性能就更高了，但重启电脑的话就不得不重建缓存了。</li>
<li>索引的建立：如果你测试的maxElementsOnDisk量比较大的话，我本地设置成100000，那么你会在临时文件目录下看到有index文件，这个文件显然是对磁盘上的文件建立索引，加快查询速度。所以这个索引是否建立是EHCache自动帮你做的，你不用操心了。</li>
<li>写入缓存的速度：在本地不断调整参数，惊讶的发现有时写入缓存的速度奇慢。因为开启了 diskPersistent功能，程序运行时经常会卡在backOffIfDiskSpoolFull方法上，作用是If the disk store spool is full wait a short time to give it a chance to catch up。这个参数对应的是diskSpoolBufferSizeMB，默认是30MB，如果存储的对象比较多，强烈建议调大，或者直接把 diskPersistent关掉。</li>
<li>缓存内容写入磁盘的速度：如果你把maxElementsOnDisk参数配置的远小于maxElementsInMemory值的话，你会发现速度又变得很慢，这是因为程序一直要去找到底哪些内容应该写入磁盘。建议这 maxElementsOnDisk值的配置应该不小于 maxElementsInMemory，其实正常用应该也会这么配置，只是我测试无聊试了下出问题了。</li>
<li>内存Element数量不能控制：一旦开启了 diskPersistent，惊讶的发现居然设置的 maxElementsInMemory无效了，内存的 Element数量一直在增长。反复测试，问题稳定重现，又找不到解释，无奈之下给官方提了个bug，等答复吧，汗...</li>
</ol>
<pre><code> 这里还是给出测试代码，主要用到的就是一个ehcache.xml的配置文件，定义了Cache的具体策略。程序调用的时候非常方便，就是典型key/value的方式。
</code></pre><ol>
<li>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; </li>
<li><ehcache> </li>
<li></li>
<li><diskStore path="java.io.tmpdir" /> </li>
<li></li>
<li>&lt;defaultCache  </li>
<li>maxElementsInMemory=&quot;10000&quot;  </li>
<li>eternal=&quot;false&quot; </li>
<li>timeToIdleSeconds=&quot;120&quot;  </li>
<li>timeToLiveSeconds=&quot;120&quot;  </li>
<li>overflowToDisk=&quot;true&quot; </li>
<li>diskPersistent=&quot;false&quot;  </li>
<li>diskExpiryThreadIntervalSeconds=&quot;120&quot; </li>
<li>memoryStoreEvictionPolicy=&quot;LRU&quot;  </li>
<li>/&gt; </li>
<li></li>
<li>&lt;cache name=&quot;sample&quot;          </li>
<li>maxElementsInMemory=&quot;5&quot;   </li>
<li>maxElementsOnDisk = &quot;5&quot;  </li>
<li>eternal=&quot;false&quot;   </li>
<li>timeToIdleSeconds=&quot;1440&quot;   </li>
<li>diskPersistent=&quot;false&quot;  </li>
<li>timeToLiveSeconds=&quot;2880&quot;   </li>
<li>overflowToDisk=&quot;false&quot;  </li>
<li>memoryStoreEvictionPolicy=&quot;FIFO&quot;  </li>
<li>statistics=&quot;true&quot;  </li>
<li>/&gt; </li>
<li></li>
<li><p></ehcache> </p>
<p> 以下就是测试代码：</p>
</li>
<li><strong>package ehcache; </strong></li>
<li><hr>
</li>
<li><strong>import org.apache.log4j.Logger; </strong></li>
<li><hr>
</li>
<li><strong>import net.sf.ehcache.Cache; </strong></li>
<li><strong>import net.sf.ehcache.CacheManager; </strong></li>
<li><strong>import net.sf.ehcache.Element; </strong></li>
<li><hr>
</li>
<li><strong>public class EhcacheTest { </strong></li>
<li><hr>
</li>
<li><strong>    private static final Logger logger = Logger.getLogger(EhcacheTest.class); </strong></li>
<li><hr>
</li>
<li><strong>    private static Cache sampleCache = null; </strong></li>
<li><hr>
</li>
<li><strong>    public static void main(String[] args) { </strong></li>
<li><strong>        init(); </strong></li>
<li><strong>        test(); </strong></li>
<li><strong>    } </strong></li>
<li><hr>
</li>
<li><strong>    private static void test() { </strong></li>
<li><strong>        logger.info(sampleCache.getMemoryStoreEvictionPolicy()); </strong></li>
<li><strong>        for(int i=0; i&lt;10; i++){ </strong></li>
<li><strong>            //写入缓存 </strong></li>
<li><strong>            sampleCache.put(new Element(i, &quot;v&quot; + i)); </strong></li>
<li><strong>            //打印当前缓存的所有值 </strong></li>
<li><strong>            logger.info(sampleCache.getKeys()); </strong></li>
<li><strong>            //读取缓存 </strong></li>
<li><strong>            Element e = sampleCache.get(i); </strong></li>
<li><strong>            logger.info(e.getValue()); </strong></li>
<li><strong>        } </strong></li>
<li><strong>        //打印命中统计 </strong></li>
<li><strong>        logger.info(sampleCache.getStatistics()); </strong></li>
<li><strong>    } </strong></li>
<li><hr>
</li>
<li><strong>    private static void init() { </strong></li>
<li><strong>        CacheManager manager = CacheManager.create(); </strong></li>
<li><strong>//      manager.addCache(&quot;sample&quot;); //已经在配置文件定义过了 </strong></li>
<li><strong>        sampleCache = manager.getCache(&quot;sample&quot;); 
</strong></li>
<li><strong>    } </strong></li>
<li><hr>
</li>
<li><strong>} </strong></li>
</ol>
<p><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/ssk.png" alt="分享至"> <a href="http://passover.blog.51cto.com/#" title="分享到新浪微博" target="_blank"></a> <a href="http://passover.blog.51cto.com/#" title="分享到QQ空间"></a> <a href="http://passover.blog.51cto.com/#" title="分享到腾讯微博" target="_blank"></a> <a href="http://passover.blog.51cto.com/#" title="分享到百度搜藏"></a> <a href="http://passover.blog.51cto.com/#" title="分享到人人网" target="_blank"></a> <a href="http://passover.blog.51cto.com/#" title="分享到QQ收藏"></a> <a href="http://passover.blog.51cto.com/#" title="分享到豆瓣网" target="_blank"></a> <a href="http://passover.blog.51cto.com/#" title="分享到百度空间"></a> <a href="http://passover.blog.51cto.com/#" title="分享到MSN" target="_blank"></a> ** 更多 <a href="http://passover.blog.51cto.com/#" title="累计分享0次">0</a> <a href="&quot;一键收藏，随时查看，分享好友！&quot;"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/favorite_add_small.gif" alt="一键收藏，随时查看，分享好友！"></a></p>
<p><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/icon01.png" alt=""> <a href="">姜周、倔强的土豆</a> 2人 了这篇文章</p>
<p>类别：<a href="http://passover.blog.51cto.com/2431658/d-11" target="_blank">Open Source</a>┆<a href="">技术圈</a>(0)┆阅读(3391)┆评论(2) ┆ <a href="http://passover.blog.51cto.com/#" target="_blank">推送到技术圈</a>┆<a href="http://passover.blog.51cto.com/" target="_blank">返回首页</a>
上一篇 <a href="http://passover.blog.51cto.com/2431658/484673" title="利用Jsoup解析HTML" target="_blank">利用Jsoup解析HTML</a> 下一篇 <a href="http://passover.blog.51cto.com/2431658/487411" title="初试Redis的感受" target="_blank">初试Redis的感受</a></p>
<h2 id="-">相关文章</h2>
<ul>
<li><a href="http://wujuxiang.blog.51cto.com/2250829/422377" title="EhCache构建Hibernate二级缓存" target="_blank">EhCache构建Hibernate二级缓存</a></li>
<li><a href="http://kerry.blog.51cto.com/172631/402923" title="CentOS 5.5环境下安装配置Varnish" target="_blank">CentOS 5.5环境下安装配置Varnish</a></li>
<li><a href="http://sdbaby.blog.51cto.com/149645/303987" title="如何删除系统漏洞修复的缓存文件夹" target="_blank">如何删除系统漏洞修复的缓存文件夹</a></li>
<li><a href="http://8807131.blog.51cto.com/2425232/435135" title="网站性能优化之应用程序缓存-初篇" target="_blank">网站性能优化之应用程序缓存-初篇</a></li>
<li><a href="http://rickyfang.blog.51cto.com/1213/130032" title="域账号缓存登陆的故障排除一例" target="_blank">域账号缓存登陆的故障排除一例</a></li>
<li><a href="http://yueyuanyuan.blog.51cto.com/1342062/337873" title="ASP.NET数据缓存" target="_blank">ASP.NET数据缓存</a>
<a href=""></a></li>
</ul>
<h2 id="-">文章评论</h2>
<p> <a href=""></a></p>
<p>[1楼]    <img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/reply.gif" alt="">  <a href="http://jiangzhou.blog.51cto.com/" target="_blank"><strong>姜周</strong></a> <a href="http://passover.blog.51cto.com/#" target="_blank">回复</a></p>
<p>2011-01-28 14:44:20
支持一个！
<a href=""></a></p>
<p>[2楼]    <img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/reply.gif" alt="">  <a href="http://juejiangdetudou.blog.51cto.com/" target="_blank"><strong>倔强的土豆</strong></a> <a href="http://passover.blog.51cto.com/#" target="_blank">回复</a></p>
<p>2012-08-24 17:55:22
不错，顶了。</p>
<p> <a href=""></a></p>
<p><a href=""></a></p>
<h2 id="-">发表评论</h2>
<p><a href="http://51ctomvp.blog.51cto.com/192695/1019565" target="_blank">2013年1月MVP申请公告[截止10月15日]</a>
昵  称： <a href="http://home.51cto.com/index.php?reback=http%253A%252F%252Fpassover.blog.51cto.com%252F2431658%252F486709" target="_blank">登录</a>  <a href="http://ucenter.51cto.com/reg_01.php?reback=http://blog.51cto.com" target="_blank">快速注册</a> 验证码： <img src="" alt=""></p>
<p>点击图片可刷新验证码请点击后输入验证码<a href="http://51ctoblog.blog.51cto.com/26414/5591" target="_blank">博客过2级，无需填写验证码</a> 内  容：</p>
<p>同时赞一个
返回顶部</p>
<p>Copyright By 51CTO.COM 版权所有
<a href="http://blog.51cto.com/" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/copyright.jpg" alt=""></a>
<a href="http://www.cnzz.com/stat/website.php?web_id=4274540" title="站长统计" target="_blank"><img src="http://./基于EHCache实现缓存去重 - passover【毕成功的博客】 - 51CTO技术博客_files/pic.gif" alt=""></a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/缓存/">缓存</a></li></span><span class="breadcrumb"><li><a href="/categories/缓存/">缓存</a></li><li><a href="/categories/缓存/ehcache/">ehcache</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ehcache/" class="label label-primary">ehcache</a><a href="/tags/缓存/" class="label label-success">缓存</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-缓存-ehcache--基于EHCache实现缓存去重-passover【毕成功的博客】-51CTO技术博客/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-缓存-ehcache--基于EHCache实现缓存去重-passover【毕成功的博客】-51CTO技术博客" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-缓存-ehcache--用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？-讨论区-开源/">用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？ </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-缓存-ehcache--用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？-讨论区-开源/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-ehcache-">用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？ - 讨论区 - 开源中国社区</h1>
<ul>
<li><a href="http://www.oschina.net/" target="_blank">首页</a></li>
<li><a href="http://www.oschina.net/project" target="_blank">开源软件</a></li>
<li><a href="http://www.oschina.net/question" target="_blank">讨论区</a></li>
<li><a href="http://www.oschina.net/code/list" target="_blank">代码分享</a></li>
<li><a href="http://www.oschina.net/news" target="_blank">资讯</a></li>
<li><a href="http://www.oschina.net/blog" target="_blank">博客</a></li>
<li><a href="http://www.oschina.net/android" target="_blank">Android</a></li>
<li><a href="http://www.oschina.net/job" target="_blank">招聘</a></li>
</ul>
<p>当前访客身份：游客 [ <a href="http://www.oschina.net/home/login" target="_blank">登录</a> | <a href="http://www.oschina.net/home/reg" target="_blank">加入开源中国</a> ]</p>
<p>当前位置：<a href="http://www.oschina.net/question" target="_blank">讨论区</a> » <a href="http://www.oschina.net/question?catalog=1" target="_blank">技术问答</a> » <a href="http://www.oschina.net/p/ehcache" target="_blank">EhCache</a></p>
<p>软件 代码 讨论区 新闻 博客
<a href="http://my.oschina.net/zwtlong" target="_blank"><img src="&quot;zwt&quot;" alt="zwt"></a></p>
<h1 id="-ehcache-"><a href="">用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？</a></h1>
<p><a href="http://my.oschina.net/zwtlong" target="_blank">zwt</a> 发表于 5-3 13:09 5个月前, <a href="http://www.oschina.net/question/146494_52050#answers" target="_blank">4</a>回/600阅, 最后回答: 1个月前
<strong><a href="http://www.oschina.net/question" target="_blank">讨论区</a> » <a href="http://www.oschina.net/question?catalog=1" target="_blank">技术问答</a></strong></p>
<p>【杭州】开源中国-源创会第十三期开始报名 <a href="http://www.oschina.net/question/28_72721" target="_blank">我要报名»</a>
在使用ehcache  如果碰到意外情况，断电或服务器挂掉，我希望重启后 ehcache 能自动加载之前的缓存，但一直试都不行，不知道要怎么配置；</p>
<p>目前在重启服务器的时候会提示：</p>
<p>警告: The index for data file stake.data is out of date, probably due to an unclean shutdown. Deleting index file stake.index</p>
<p>目前配置：
<a href="http://www.oschina.net/question/146494_52050#viewSource" title="view source" target="_blank">view source</a><a href="http://www.oschina.net/question/146494_52050#printSource" title="print" target="_blank">print</a><a href="http://www.oschina.net/question/146494_52050#about" title="?" target="_blank">?</a></p>
<p>01</p>
<p>&lt;</p>
<p>diskStore</p>
<p>path</p>
<p>=</p>
<p>&quot;java.io.tmpdir&quot;</p>
<p>/&gt;</p>
<p>02</p>
<p>03</p>
<p>&lt;</p>
<p>defaultCache</p>
<p>04</p>
<p>maxElementsInMemory</p>
<p>=</p>
<p>&quot;10000&quot;
05</p>
<p>eternal</p>
<p>=</p>
<p>&quot;false&quot;</p>
<p>06</p>
<p>timeToIdleSeconds</p>
<p>=</p>
<p>&quot;43200&quot;
07</p>
<p>timeToLiveSeconds</p>
<p>=</p>
<p>&quot;43200&quot;</p>
<p>08</p>
<p>overflowToDisk</p>
<p>=</p>
<p>&quot;true&quot;
09</p>
<p>diskPersistent</p>
<p>=</p>
<p>&quot;true&quot;</p>
<p>10</p>
<p>diskExpiryThreadIntervalSeconds</p>
<p>=</p>
<p>&quot;120&quot;
11</p>
<p>memoryStoreEvictionPolicy</p>
<p>=</p>
<p>&quot;LFU&quot;</p>
<p>12</p>
<p>/&gt;</p>
<p><strong>标签：</strong> <a href="http://www.oschina.net/question/tag/ehcache" title="Java缓存框架 EhCache" target="_blank">EhCache</a> <a href="http://www.oschina.net/question/tag/java" title="编程语言 Java" target="_blank">Java</a>
<a href="">我想问同样的问题</a>  共<em>1</em>个人想要问同样的问题 <a href="">补充话题说明»</a></p>
<p><strong>分享到</strong> <a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a>**</p>
<p><a href="&quot;收藏此话题&quot;">收藏</a>
**</p>
<p>6
**</p>
<p><a href="">举报</a>
**</p>
<p><a href="&quot;踩：这问题不知道在说什么，或者没什么用&quot;">踩</a> 0 | <a href="&quot;顶：这问题很有用或者很清晰明了&quot;">顶</a> 0
**</p>
<h2 id="-http-www-oschina-net-question-146494_52050-answers-http-www-oschina-net-question-146494_52050-sort-time-answers-http-www-oschina-net-question-146494_52050-top-4-http-www-oschina-net-question-146494_52050-answerform-"><a href="http://www.oschina.net/question/146494_52050#answers" target="_blank">按评价排序</a> | <a href="http://www.oschina.net/question/146494_52050?sort=time#answers" target="_blank">显示最新答案</a> | <a href="http://www.oschina.net/question/146494_52050#top" target="_blank">回页面顶部</a>  <a href=""></a>共有<em>4</em>个答案 <a href="http://www.oschina.net/question/146494_52050#answerform">我要回答»</a></h2>
<ul>
<li><a href="http://my.oschina.net/zwtlong" target="_blank"><img src="&quot;zwt&quot;" alt="zwt"></a></li>
</ul>
<p><a href="http://my.oschina.net/zwtlong" target="_blank">zwt</a> 回答于 2012-05-03 13:32</p>
<p><a href="">举报</a>
已经解决，在ehcache初始化之前</p>
<p>System.setProperty(&quot;net.sf.ehcache.enableShutdownHook&quot;,&quot;true&quot;);</p>
<p>请看 <a href="http://stackoverflow.com/questions/2373431/ehcache-disk-store-unclean-shutdown" target="_blank"><a href="http://stackoverflow.com/questions/2373431/ehcache-disk-store-unclean-shutdown">http://stackoverflow.com/questions/2373431/ehcache-disk-store-unclean-shutdown</a></a></p>
<p><a href="&quot;这是一个好答案，能解决问题&quot;">有帮助</a><em>(0)</em> | <a href="&quot;这答案无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> | <a href="">评论</a><em>(0)</em> | <a href="http://www.oschina.net/question/answer?question=52050&amp;answer=207929" target="_blank">引用此答案</a></p>
<ul>
<li><a href="http://my.oschina.net/u/558914" target="_blank"><img src="&quot;samsamsam&quot;" alt="samsamsam"></a></li>
</ul>
<p><a href="http://my.oschina.net/u/558914" target="_blank">samsamsam</a> 回答于 2012-05-14 16:29</p>
<p><a href="">举报</a>
我想请教，我按照</p>
<p>System.setProperty(&quot;net.sf.ehcache.enableShutdownHook&quot;,&quot;true&quot;);</p>
<p>这个方法试过还是The index for data file is out of date。。。。。
<strong>--- 共有 1 条评论 ---</strong></p>
<ul>
<li><a href="http://my.oschina.net/zwtlong" target="_blank"><img src="&quot;zwt&quot;" alt="zwt"></a>  你要在加载ehcache之前设置环境变量，设置成功后看会输出log (4个月前 by zwt) <a href="">回复</a></li>
</ul>
<p><a href="&quot;这是一个好答案，能解决问题&quot;">有帮助</a><em>(0)</em> | <a href="&quot;这答案无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> | <a href="">评论</a><em>(1)</em> | <a href="http://www.oschina.net/question/answer?question=52050&amp;answer=216080" target="_blank">引用此答案</a></p>
<ul>
<li><a href="http://my.oschina.net/u/732846" target="_blank"><img src="&quot;fbfan520&quot;" alt="fbfan520"></a></li>
</ul>
<p><a href="http://my.oschina.net/u/732846" target="_blank">fbfan520</a> 回答于 2012-09-05 14:00</p>
<p><a href="">举报</a>
 System.setProperty(&quot;net.sf.ehcache.enableShutdownHook&quot;,&quot;true&quot;);请问这句加在哪里
<strong>--- 共有 1 条评论 ---</strong></p>
<ul>
<li><a href="http://my.oschina.net/zwtlong" target="_blank"><img src="&quot;zwt&quot;" alt="zwt"></a>  在ehcache初始化之前 (1个月前 by zwt) <a href="">回复</a></li>
</ul>
<p><a href="&quot;这是一个好答案，能解决问题&quot;">有帮助</a><em>(0)</em> | <a href="&quot;这答案无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> | <a href="">评论</a><em>(1)</em> | <a href="http://www.oschina.net/question/answer?question=52050&amp;answer=297289" target="_blank">引用此答案</a></p>
<ul>
<li><a href="http://my.oschina.net/u/732846" target="_blank"><img src="&quot;fbfan520&quot;" alt="fbfan520"></a></li>
</ul>
<p><a href="http://my.oschina.net/u/732846" target="_blank">fbfan520</a> 回答于 2012-09-07 13:35</p>
<p><a href="">举报</a>
在ehcache初始化之前是什么意思？ public static CacheManager manager = CacheManager.create(&quot;D:\XML\ehcache.xml&quot;);
    public static Cache diskOnlyEternalCache = null;
    public static Cache diskEternalCache = null;
    public static Cache disk7DayCache = null;
    public static Cache diskSyn7DayCache = null;
    public static Cache disk1DayCache = null;</p>
<pre><code>private CacheManageService() {

}

public synchronized static Cache getDiskOnlyEternalCache() {

    if (diskOnlyEternalCache == null) {
        diskOnlyEternalCache = manager.getCache(&quot;diskOnlyEternalCache&quot;);
    }
    return diskOnlyEternalCache;
}
</code></pre><p>像这个程序我加在哪里？
<a href="&quot;这是一个好答案，能解决问题&quot;">有帮助</a><em>(0)</em> | <a href="&quot;这答案无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> | <a href="">评论</a><em>(0)</em> | <a href="http://www.oschina.net/question/answer?question=52050&amp;answer=298897" target="_blank">引用此答案</a></p>
<p><a href="http://www.oschina.net/question/$link.user($g_user" target="_blank"><img src="&quot;非会员用户&quot;" alt="非会员用户"></a>)   <a href="&quot;粗体(Ctrl+B"></a>&quot;)<a href="&quot;斜体(Ctrl+I"></a>&quot;)<a href="&quot;下划线(Ctrl+U"></a>&quot;)<a href="&quot;删除线&quot;"></a><a href="&quot;删除格式&quot;"></a><a href="&quot;编号&quot;"></a><a href="&quot;项目符号&quot;"></a><a href="&quot;文字颜色&quot;"></a><a href="&quot;文字背景&quot;"></a><a href="&quot;字体&quot;"></a><a href="&quot;文字大小&quot;"></a><a href="&quot;超级链接&quot;"></a><a href="&quot;取消超级链接&quot;"></a><a href="&quot;插入表情&quot;"></a><a href="&quot;插入程序代码或脚本&quot;"></a><a href="&quot;图片&quot;"></a><a href="&quot;插入Flash&quot;"></a><a href="&quot;引用某段文字&quot;"></a><a href="&quot;全选&quot;"></a><a href="&quot;HTML代码&quot;"></a><a href="&quot;关于&quot;"></a>
<a href="http://www.oschina.net/question/146494_52050#answers" target="_blank">回答案顶部</a> | <a href="http://www.oschina.net/question/146494_52050#top" target="_blank">回页面顶部</a>
有什么技术问题吗？ <a href="http://www.oschina.net/question/ask" target="_blank">我要提问</a></p>
<p><strong><a href="http://my.oschina.net/zwtlong/?ft=bbs&amp;scope=2&amp;showme=1" target="_blank">全部(3)...</a><em>zwt</em>的其他问题</strong></p>
<ul>
<li><a href="http://www.oschina.net/question/146494_68822" title="oschina 评论盖楼是怎么实现的？" target="_blank">oschina 评论盖楼是怎么实现的？</a>(1回/97阅,1个月前)</li>
<li><p><a href="http://www.oschina.net/question/146494_49003" title="extremetable 页数过多的情况显示怎么处理" target="_blank">extremetable 页数过多的情况显示怎么处理</a>(0回/50阅,6个月前)
<strong>类似的话题</strong></p>
</li>
<li><p><a href="http://www.oschina.net/question/257044_65201" title="ehcache并发的问题。" target="_blank">ehcache并发的问题。</a>(2回/151阅,1个月前)</p>
</li>
<li><a href="http://www.oschina.net/question/584947_60156" title="EhCache cluster 不能复制" target="_blank">EhCache cluster 不能复制</a>(2回/121阅,3个月前)</li>
<li><a href="http://www.oschina.net/question/731217_67787" title="EHCache RMI同步" target="_blank">EHCache RMI同步</a>(2回/98阅,1个月前)</li>
<li><a href="http://www.oschina.net/question/1705_22910" title="ehcache缓存失效问题" target="_blank">ehcache缓存失效问题</a>(4回/539阅,1年前)</li>
<li><a href="http://www.oschina.net/question/911_51821" title="请教ehcache的notifyElementExpired的事件用法" target="_blank">请教ehcache的notifyElementExpired的事件用法</a>(7回/138阅,5个月前)</li>
<li><a href="http://www.oschina.net/question/113136_43994" title="EhCache 缓存嵌入对象问题" target="_blank">EhCache 缓存嵌入对象问题</a>(7回/317阅,7个月前)</li>
<li><a href="http://www.oschina.net/question/109139_16386" title="ehcache如何增量加入缓存" target="_blank">ehcache如何增量加入缓存</a>(1回/410阅,1年前)</li>
<li><a href="http://www.oschina.net/question/254302_44560" title="ehcache分布式同步问题" target="_blank">ehcache分布式同步问题</a>(3回/360阅,7个月前)</li>
<li><a href="http://www.oschina.net/question/102297_12816" title="ehcache如何设置输出打印日志" target="_blank">ehcache如何设置输出打印日志</a>(4回/574阅,1年前)</li>
<li><a href="http://www.oschina.net/question/138851_19238" title="Ehcache 2.4.1 Search 问题！！！！" target="_blank">Ehcache 2.4.1 Search 问题！！！！</a>(3回/251阅,1年前)</li>
<li><a href="http://www.oschina.net/question/35932_3865" title="Ehcache配置文件中各项参数" target="_blank">Ehcache配置文件中各项参数</a>(1回/722阅,2年前)</li>
<li><a href="http://www.oschina.net/question/575002_57827" title="在ehcache中如何配置多个diskStore" target="_blank">在ehcache中如何配置多个diskStore</a>(2回/81阅,3个月前)</li>
<li><a href="http://www.oschina.net/question/106591_47184" title="ehcache2.5缓存问题，求解？？？？？？" target="_blank">ehcache2.5缓存问题，求解？？？？？？</a>(5回/294阅,6个月前)</li>
<li><a href="http://www.oschina.net/question/112732_14500" title="跑EhCache 集群演示程序读cache的值为null" target="_blank">跑EhCache 集群演示程序读cache的值为null</a>(0回/166阅,1年前)</li>
<li><a href="http://www.oschina.net/question/203545_45215" title="用了红薯大哥的EhCache缓存代码，调试后出错，各位大侠能否给一个些建议？" target="_blank">用了红薯大哥的EhCache缓存代码，调试后出错，各位大侠能否给一个些建议？</a>(7回/425阅,6个月前)</li>
<li><a href="http://www.oschina.net/question/37023_40508" title="Ehcache gzipFilter" target="_blank">Ehcache gzipFilter</a>(3回/250阅,7个月前)</li>
</ul>
<p>© 开源中国社区(OsChina.NET) | <a href="http://www.oschina.net/home/about" target="_blank">关于我们</a> | <a href="mailto:oschina.net@gmail.com">广告联系</a> | <a href="http://weibo.com/oschina2010" target="_blank">@新浪微博</a> | <a href="http://m.oschina.net/" target="_blank">开源中国手机版</a> | 粤ICP备12009483号-3</p>
<p><a href=""></a><a href=""></a><a href=""></a>
<img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/缓存/">缓存</a></li></span><span class="breadcrumb"><li><a href="/categories/缓存/">缓存</a></li><li><a href="/categories/缓存/ehcache/">ehcache</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ehcache/" class="label label-primary">ehcache</a><a href="/tags/缓存/" class="label label-success">缓存</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-缓存-ehcache--用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？-讨论区-开源/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-缓存-ehcache--用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？-讨论区-开源" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-缓存-ehcache--是使用分布式缓存Ehcache或者NoSQL数据库呢？-ThinkingInJdon/">是使用分布式缓存Ehcache或者NoSQL数据库呢？ </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-缓存-ehcache--是使用分布式缓存Ehcache或者NoSQL数据库呢？-ThinkingInJdon/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-ehcache-nosql-thinking-in-jdon">是使用分布式缓存Ehcache或者NoSQL数据库呢？ - Thinking In Jdon</h1>
<p> 标签的主题列表  <a href="http://www.jdon.com/tags/313" target="_blank"><strong>缓存Cache</strong>     </a><a href="http://www.jdon.com/account/protected/sub/subAction.shtml?subscribeType=2&amp;subscribeId=313" target="_blank"><img src="" alt="关注本标签 有新回复自动通知我"> 关注</a> <img src="" alt=""><a href="http://www.jdon.com/44212" title="通过cache来发挥同步与异步的优势" target="_blank">通过cache来发挥同步与异步的优势</a> <img src="" alt=""><a href="http://www.jdon.com/44161" title="关于CQRS中，对于一个领域对象的lock" target="_blank">关于CQRS中，对于一个领域对象的lock</a> <img src="" alt=""><a href="http://www.jdon.com/44132" title="JVM堆大小的建议" target="_blank">JVM堆大小的建议</a> <img src="" alt=""><a href="http://www.jdon.com/43889" title="关于牛XX的内存领域+事件驱动的问题！！！" target="_blank">关于牛XX的内存领域+事件驱动的问题！！！</a> <img src="" alt=""><a href="http://www.jdon.com/43818" title="Stack Overflow:memcached和Redis的比较" target="_blank">Stack Overflow:memcached和Redis的比较</a> <img src="" alt=""><a href="http://www.jdon.com/43802" title="海量数据的查询缓存问题" target="_blank">海量数据的查询缓存问题</a> <img src="" alt=""><a href="http://www.jdon.com/43760" title="为Domain寻求一种缓存" target="_blank">为Domain寻求一种缓存</a> <img src="" alt=""><a href="http://www.jdon.com/43743" title="突破JVM内存：开源DirectMemory" target="_blank">突破JVM内存：开源DirectMemory</a> <img src="" alt=""><a href="http://www.jdon.com/43724" title="数据网格 Data Grid和NoSQL相同和区别-异同" target="_blank">数据网格 Data Grid和NoSQL相同和区别-异同</a> <img src="" alt=""><a href="http://www.jdon.com/43717" title="高并发开发？？" target="_blank">高并发开发？？</a> <img src="" alt=""><a href="http://www.jdon.com/43246" title="弱一致性在现实世界中到处存在" target="_blank">弱一致性在现实世界中到处存在</a> <img src="" alt=""><a href="http://www.jdon.com/43156" title="一个常见但不是那么容易的架构问题" target="_blank">一个常见但不是那么容易的架构问题</a> <img src="" alt=""><a href="http://www.jdon.com/43067" title="如何处理频繁创建对象然后丢弃导致频繁GC的情况" target="_blank">如何处理频繁创建对象然后丢弃导致频繁GC的情况</a> <img src="" alt=""><a href="http://www.jdon.com/42736" title="使用ehcache元注释提高Spring 性能源码案例" target="_blank">使用ehcache元注释提高Spring 性能源码案例</a> <img src="" alt=""><a href="http://www.jdon.com/42661" title="SNS Webgame 社区类页面网游开发， 自己所用的架构，以及遇到的一些问题和困惑" target="_blank">SNS Webgame 社区类页面网游开发， 自己所用的架构，以及遇到的一些问题和困惑</a> <img src="" alt=""><a href="http://www.jdon.com/42451" title="JVM伪共享" target="_blank">JVM伪共享</a> <img src="" alt=""><a href="http://www.jdon.com/42438" title="数据管理的未来: “Disk-less” 风格数据库?" target="_blank">数据管理的未来: “Disk-less” 风格数据库?</a> <img src="" alt=""><a href="http://www.jdon.com/42361" title="亚马逊的弹性缓存" target="_blank">亚马逊的弹性缓存</a> <img src="" alt=""><a href="http://www.jdon.com/41686" title="如何驯服java GC导致暂停? 使用16GiB以上heap" target="_blank">如何驯服java GC导致暂停? 使用16GiB以上heap</a> <img src="" alt=""><a href="http://www.jdon.com/41612" title="使用设计模式后的副作用" target="_blank">使用设计模式后的副作用</a></p>
<h3 id="-">分享到</h3>
<ul>
<li><a href="http://www.jdon.com/39931#" target="_blank">QQ空间</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">新浪微博</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">百度搜藏</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">人人网</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">腾讯微博</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">开心网</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">腾讯朋友</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">百度空间</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">豆瓣网</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">搜狐微博</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">百度新首页</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">QQ收藏</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">和讯微博</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">我的淘宝</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">百度贴吧</a></li>
<li><a href="http://www.jdon.com/39931#" target="_blank">更多...</a></li>
</ul>
<p><a href="http://www.jdon.com/39931#" target="_blank">百度分享</a>
<a href="http://www.jdon.com/" target="_blank"><img src="" alt="JiveJdon Community Forums"></a><a href="">在线</a>    <a href="http://www.jdon.com/threads" target="_blank">主题表</a>   <a href="http://www.jdon.com/tags" target="_blank">标签</a>   <a href="http://www.jdon.com/query/threadViewQuery.shtml" target="_blank">查搜</a>   <a href="http://www.jdon.com/account/newAccountForm.shtml" target="_blank">注册</a>   <a href="">登陆</a>   <a href="http://www.jdon.com/forum/post.jsp" target="_blank">发帖</a>   <a href="http://www.jdon.com/followus.html" target="_blank">关注</a>   <a href="http://www.jdon.com/designpatterns/" target="_blank">设计模式</a> <a href="http://www.jdon.com/ddd.html" target="_blank">领域驱动设计</a> <a href="http://www.jdon.com/design.htm" target="_blank">云架构</a> <a href="http://www.jdon.com/jdonframework/jivejdon3/index.html" target="_blank">JiveJdon</a> <a href="http://www.jdon.com/jdonframework/" target="_blank">Jdon框架</a> <a href="http://www.jdon.com/consultant.html" target="_blank">企业咨询</a> <a href="http://www.jdon.com/threads" target="_blank">主题讨论</a></p>
<p>  用户      自动登陆 密码      <a href="http://www.jdon.com/account/newAccountForm.shtml" target="_blank">新用户注册</a> <a href="http://www.jdon.com/account/forgetPasswd.jsp" target="_blank">忘记密码?</a> <a href="http://www.jdon.com/account/oauth/sinaCallAction.shtml" target="_blank"><img src="" alt="登录">新浪微博</a> <a href="http://www.jdon.com/account/oauth/tecentCallAction.shtml" target="_blank"><img src="" alt="登录">腾讯微博</a> <a href="http://www.jdon.com/account/oauth/googleCallAction.shtml" target="_blank"><img src="" alt="登录">Google</a>
<strong><a href="http://www.jdon.com/" target="_blank">首页</a> » <a href="http://www.jdon.com/forum/" title="返回论坛列表" target="_blank">论坛</a> » <a href="http://www.jdon.com/forum/121" target="_blank">云架构等扩展性讨论</a></strong> <img src="" alt=""> <a href="&quot;网上收藏本主题&quot;">  </a></p>
<p><a href="&quot;手机条码扫描浏览本页&quot;">  </a>
<a href="http://www.jdon.com/account/protected/sub/subAction.shtml?subscribeType=1&amp;subscribeId=39931" title="关注本主题" target="_blank">  </a></p>
<p><a href="&quot;加入本帖到收藏夹&quot;">  </a></p>
<p>阅读3831次 1人关注</p>
<p>前往下页:
  <a href="http://www.jdon.com/message/messageAction.shtml?forum.forumId=121" target="_blank"><img src="" alt="发表新帖子"></a>  <a href=""><img src="" alt="回复该主题贴"></a> <a href=""></a></p>
<p><strong>banq</strong>
<a href="http://www.jdon.com/blog/banq"><img src="" alt="">
个人详介按这里
</a> <a href="http://www.jdon.com/query/threadViewQuery.shtml?queryType=userMessageQueryAction&amp;user=2" target="_blank">文章: 12593</a>
注册: 2002-08-03</p>
<ul>
<li>当前离线</li>
<li><a href="http://www.jdon.com/account/protected/sub/subAction.shtml?subscribeType=3&amp;subscribeId=2" title="我要关注该作者发言" target="_blank">184人关注</a></li>
<li><a href="">悄悄话</a></li>
<li><a href="http://www.jdon.com/profile.jsp?user=banq" target="_blank">个人博客</a></li>
</ul>
<p>是使用分布式缓存Ehcache或者NoSQL数据库呢？</p>
<p>2011-03-03 10:31
<a href="&quot;到本帖网址&quot;">  </a>  <a href="">  </a>  <a href="">  </a></p>
<p><a href="http://www.jdon.com/query/tagsList.shtml?count=150" title="标签" target="_blank"><img src="" alt="标签"></a> <a href="http://www.jdon.com/tags/313" target="_blank">缓存Cache</a>        <a href="http://www.jdon.com/tags/8600" target="_blank">NoSQL</a>        <a href="http://www.jdon.com/tags/1103" target="_blank">ehcache</a>        <a href="http://www.jdon.com/tags/2513" target="_blank">可扩展性Scalable</a><br>10</p>
<p><a href="">顶一下</a></p>
<h1 id="ehcache-java-http-www-jdon-com-cache-html-http-www-jdon-com-scalable-html-terracotta-ehcache-http-www-jdon-com-cache-html-schema-less-key-value-java-http-www-jdon-com-cache-html-key-value-">Ehcache实际是一个Java的开源<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>产品，用来提升性能，降低负载，方便可<a href="http://www.jdon.com/scalable.html" target="_blank"><strong>伸缩性</strong></a>。后面有秦始皇Terracotta兵马俑式的服务器矩阵支持, Ehcache成为一种线性可扩展的分布式<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>。它是一个无关系结构schema-less, key-value, 基于Java的分布式<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>，它提供可靠的一致性控制，可根据主键key 值value或属性索引搜索。</h1>
<p><strong>Flexible Consistency可靠的一致性</strong>
从Ehcache 和 Terracotta整合性来看, 我们可以激活相关的数据跨集群共享，按照CAP理论来说， 由于避免单机硬编码权衡考虑，我们在一个个<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>中创建了一个丰富的一致性模型；同时为了易于理解，我们采取统一标准客户端一致性模型来描述和配置它。
我们可以实现一个比<a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a>解决方案更加丰富的一致性富模型(模型驱动框架开源<a href="http://www.jdon.com/jdonframework/" target="_blank"><strong>Jdonframework</strong></a>缺省采取echcahe的原因)。我们可以为每一个<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>提供跨集群的如下特性:
1.通过悲观锁支持强壮的一致性(缺省，一致性也就是<a href="http://www.jdon.com/jivejdon/tags/354" target="_blank"><strong>事务</strong></a>性，数据<a href="http://www.jdon.com/jivejdon/tags/354" target="_blank"><strong>事务</strong></a>安全性)
2.未加锁的弱一致性，用来先写后读，或只读，或者只写。
3.乐观锁 Compare and Swap (“CAS”)，跨集群服务器的原子操作 。
4.XA分布式<a href="http://www.jdon.com/jivejdon/tags/354" target="_blank"><strong>事务</strong></a>和本地<a href="http://www.jdon.com/jivejdon/tags/354" target="_blank"><strong>事务</strong></a>机制transactions
5.一个显式的锁API，可以运行用户优化<a href="http://www.jdon.com/jivejdon/tags/354" target="_blank"><strong>事务</strong></a>一致性带来的性能问题。
Ehcache架构非常不同于<a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a>(如memorycache ). 每个服务器内存中会驻留使用最频繁(LRU算法)的数据或对象。可以有4-6 GB heap 空间, 如果辅助以BigMemory, 能够扩展至上百 GBs(注意这是每台，如果考虑集群多台，几乎可以把数据库中数据都加载到内存中，相当于一个内存数据库). 这是一种Level 1 (“L1”) <a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>，完全基于内存in-process. 访问L1 速度一般少于1 μs.
整个<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>一般都驻扎Terracotta服务器阵列中. 这是一种Level 2 (“L2”) <a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>. 访问L2少于2 ms.
你从这个架构中得到的依赖于你使用经验，最普通一个情况是：the Pareto distribution, 80% 数据从 L1获得 , 20%时间从L2获得， 这样，普通延迟性一般是少于.401 ms. 通过比较，Yahoo! Cloud Serving Benchmark 基准测试表明 HBase 和 Cassandra延迟性是在 8 to 18 ms.
这使得Ehcache要快于<a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a>一个数量级别.
<strong>持久化</strong>
缓存能够被设置为持久化，能够提供永久保存和可重启性。一般使用一种写日志。缓存将能够恢复到一种一致性状态. 当ehcache被配置为一种分布式<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>时，Ehcache将使用Terracotta Server Array 作为二级<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>Level 2 cache. Terracotta servers通常是每个区配置两个，有HA. 另外，Terracotta 使用JMX tools实现备份,备份或恢复都能立即进行。 RDBMS关系数据库典型提供一个广泛归档索引 ETL等系列功能, 正因为这些理由，作者认为 Ehcache具有一些持久化小特性. 当然，这和许多<a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a> 产品类似。
<strong>大数据量Big Data</strong>
大数据量指成打T级别terabytes甚至达到 petabytes.
Ehcache目前 可以达到2 TB. 以后会不断提升(banq注：集群的问题还是一个群的问题，群的规模是有上限天花板的，这和破坏了数据关系的<a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a>分布式是无法比拟的)
ehcache对大数据量的限制主要还是受制于关系数据库RDBMSs.
如果使用BigMemory，Terracotta server可以加载到每台服务器内存中有250GB或更多. <a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a> 解决方案使用内存和磁盘混合，基于Java的Cassandra问题可能是垃圾回收, 受其限制只能有很小的heaps. BigMemory 是脱离heap使用额外内存，使用NIO的 DirectByteBuffer. 最终结果你可以用很小的服务部署付出得到同样的回报。
<strong>进入分布式[</strong>缓存<strong>](<a href="http://www.jdon.com/cache.html" target="_blank">http://www.jdon.com/cache.html</a>)</strong>
如果Ehcahce不是<a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a>, 那它是什么? 答案是它是一个分布式<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>distributed cache. 象它的<a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a>表兄弟, 它经常用于传统数据库不能覆盖的领域，缓存一个web page或或者耗费CPU计算是经常碰到的情况.
关键问题是要更快地访问到这些计算好的结果，这时并不是需要持久化. 在Java中最快的访问架构就是in-process caching, 通过网络作为一种in-memory cache.
Gartner 和Forrester已经对分布式<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>Distributed Caching 和弹性<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>Elastic Caching有一个公开定义. Gartner： “分布式<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>Distributed caching平台让用户管理内存中非常大的in-memory data，以便使得关系数据库减轻负载、以及<a href="http://www.jdon.com/cloudcompute.html" target="_blank"><strong>云计算</strong></a>和云<a href="http://www.jdon.com/jivejdon/tags/354" target="_blank"><strong>事务</strong></a>处理、 以及更杰出性能的<a href="http://www.jdon.com/jivejdon/tags/354" target="_blank"><strong>事务</strong></a>处理，或复杂的事件处理以及高性能计算”.
他们也将分布式<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>作为一个服务(“aPaaS”) 加入他们应用平台。
当然，我们可以在RDBMSs 和 <a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a>两者之前都使用分布式<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>(因为<a href="http://www.jdon.com/jivejdon/tags/354" target="_blank"><strong>事务</strong></a>的需要)。
但是，同样<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>作为分布，而需要得到一些搜索之类企业特性时，和<a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a>自己区别就非常明显。
<strong>Use Cases场景用例</strong>
如果需要一个‘key-value plus search’key-value增强式的搜索，一旦数据量超过2 TB，那么<a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a>合适。
我们看看下面一些常用ehache缓存场景：
Hibernate Caching. JDBC caching. Web caching. Collection caching.使用echcache
快速的分析结果查询
信用卡等与钱有关......见原文
<strong>结论</strong>
NoSQL是瞄准替代RDBMS, <a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>是瞄准低延迟和速度，可以根据CAP理论来衡量。缓存主要和应用有关，可以帮助应用脱离任何存储技术，无论是RDBMS 和 <a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a>(这点比较认同，jdonframework将<a href="http://www.jdon.com/cache.html" target="_blank"><strong>缓存</strong></a>作为领域模型的生存空间，后面可以接关系数据库或<a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a>).
原文网址被封，需要翻墙。监管带来信息闭塞以致落后在我们经常看外文资料的人来说来感受非常明显。
<a href="http://nosql.mypopescu.com/post/3585092735/ehcache-distributed-cache-or-nosql-store" target="_blank">Ehcache: Distributed Cache or</a><a href="http://www.jdon.com/DistributedSystems.html" target="_blank"><strong>NoSQL</strong></a> Store? :: myNoSQL
[该贴被banq于2011-03-03 10:33修改过]
<a href=""></a></p>
<p><strong>banq</strong>
<a href="http://www.jdon.com/blog/banq"><img src="" alt="">
个人详介按这里
</a> <a href="http://www.jdon.com/query/threadViewQuery.shtml?queryType=userMessageQueryAction&amp;user=2" target="_blank">文章: 12593</a>
注册: 2002-08-03</p>
<ul>
<li>当前离线</li>
<li><a href="http://www.jdon.com/account/protected/sub/subAction.shtml?subscribeType=3&amp;subscribeId=2" title="我要关注该作者发言" target="_blank">184人关注</a></li>
<li><a href="">悄悄话</a></li>
<li><a href="http://www.jdon.com/profile.jsp?user=banq" target="_blank">个人博客</a></li>
</ul>
<p>1楼 是使用分布式缓存Ehcache或者NoSQL数据库呢？</p>
<p>2011-03-03 12:30
<a href="http://www.jdon.com/nav/39931/23131906#23131906" title="到本帖网址" target="_blank">  </a>  <a href="">  </a>  <a href="">  </a>
<a href="">顶一下</a></p>
<h1 id="ehcache-memcached-http-www-jdon-com-jivejdon-tags-354-memcached-hash-memcached-hash-">ehcache与memcached区别是在一致性，也就是<a href="http://www.jdon.com/jivejdon/tags/354" target="_blank"><strong>事务</strong></a>性方面，memcached使用HASH算法实现负载平衡，但是集群的另外一个要素：失败恢复，也就是服务器当了，数据还在其他地方存在共享；memcached的一台服务器宕了，上面数据就丢失了，由于采取Hash环，损失有限。</h1>
<p>但是也由于没有状态数据在服务器之间共享复制，memcached对于只读性能应该比集群的更好。
上面文章主要是在基于Java的比较。</p>
<p>-
<a href=""></a></p>
<p><strong>SpeedVan</strong>
<a href="http://www.jdon.com/blog/SpeedVan"><img src="" alt="">
个人详介按这里
</a> <a href="http://www.jdon.com/query/threadViewQuery.shtml?queryType=userMessageQueryAction&amp;user=71950" target="_blank">文章: 494</a>
注册: 2010-08-24</p>
<ul>
<li>当前离线</li>
<li><a href="http://www.jdon.com/account/protected/sub/subAction.shtml?subscribeType=3&amp;subscribeId=71950" title="我要关注该作者发言" target="_blank">8人关注</a></li>
<li><a href="">悄悄话</a></li>
<li><a href="http://www.jdon.com/profile.jsp?user=SpeedVan" target="_blank">个人博客</a></li>
</ul>
<p>是使用分布式缓存Ehcache或者NoSQL数据库呢？</p>
<p>2011-03-03 21:24
<a href="http://www.jdon.com/nav/39931/23131916#23131916" title="到本帖网址" target="_blank">  </a>  <a href="">  </a>  <a href="">  </a>
<a href="">顶一下</a></p>
<h1 id="-cache-repository-web-cache-web-">我现在使用cache，只是用Repository封装后，作为单系统内存接口来使用。分布技术，有待学习呢，真是路漫漫啊。自从认识web的cache之后，就知道了一个web架构，就相当于一个游戏引擎——缓存管理是其一个核心部分。</h1>
<p><a href="http://www.jdon.com/39931#" title="分享到QQ空间" target="_blank"></a> <a href="http://www.jdon.com/39931#" title="分享到新浪微博"></a> <a href="http://www.jdon.com/39931#" title="分享到腾讯微博" target="_blank"></a> <a href="http://www.jdon.com/39931#" title="分享到人人网"></a> 更多<a href="http://www.jdon.com/query/tagsList.shtml?count=150" title="标签" target="_blank"><img src="" alt="标签"></a> <a href="http://www.jdon.com/tags/313" target="_blank">缓存Cache(171)</a>       <a href="http://www.jdon.com/tags/8600" target="_blank">NoSQL(55)</a>       <a href="http://www.jdon.com/tags/1103" target="_blank">ehcache(9)</a>       <a href="http://www.jdon.com/tags/2513" target="_blank">可扩展性Scalable(98)</a><br>推荐贴列表  <strong>置顶热贴</strong> <img src="" alt=""><a href="http://www.jdon.com/42452" title="LMAX架构" target="_blank">LMAX架构</a> [<a href="http://www.jdon.com/tags/3380" target="_blank">EDA事件驱动</a> <a href="http://www.jdon.com/tags/544" target="_blank">异步编程</a> ] <img src="" alt=""><a href="http://www.jdon.com/42708" title="五年java人的一点感悟" target="_blank">五年java人的一点感悟</a> [<a href="http://www.jdon.com/tags/619" target="_blank">软件观点</a> <a href="http://www.jdon.com/tags/514" target="_blank">工具心得</a> ] <img src="" alt=""><a href="http://www.jdon.com/43463" title="分享我的：领域驱动设计（DDD）学习成果精简总结" target="_blank">分享我的：领域驱动设计（DDD）学习成果精简总结</a> [<a href="http://www.jdon.com/tags/272" target="_blank">DDD领域驱动设计</a> ] <img src="" alt=""><a href="http://www.jdon.com/43666" title="如何提高web系统的吞吐能力？" target="_blank">如何提高web系统的吞吐能力？</a> [<a href="http://www.jdon.com/tags/18277" target="_blank">吞吐量</a> <a href="http://www.jdon.com/tags/344" target="_blank">高性能</a> ] <img src="" alt=""><a href="http://www.jdon.com/43750" title="实践ddd，太让人沮丧了。。" target="_blank">实践ddd，太让人沮丧了。。</a> [<a href="http://www.jdon.com/tags/272" target="_blank">DDD领域驱动设计</a> <a href="http://www.jdon.com/tags/365" target="_blank">jivejdon</a> ] <img src="" alt=""><a href="http://www.jdon.com/43808" title="使用Disruptor实现并发编程 PPT文档" target="_blank">使用Disruptor实现并发编程 PPT文档</a> [<a href="http://www.jdon.com/tags/18365" target="_blank">disruptor</a> <a href="http://www.jdon.com/tags/4973" target="_blank">并发并行</a> ] <img src="" alt=""><a href="http://www.jdon.com/43851" title="jdon框架优缺点之我见" target="_blank">jdon框架优缺点之我见</a> [<a href="http://www.jdon.com/tags/315" target="_blank">JdonFramework</a> <a href="http://www.jdon.com/tags/1013" target="_blank">DSL领域特定语言</a> ] <img src="" alt=""><a href="http://www.jdon.com/43895" title="Instagram卖出10亿美金的启示" target="_blank">Instagram卖出10亿美金的启示</a> [<a href="http://www.jdon.com/tags/612" target="_blank">云计算</a> <a href="http://www.jdon.com/tags/13342" target="_blank">项目管理</a> ] <img src="" alt=""><a href="http://www.jdon.com/43937" title="Martin Fowler厌倦ORM了" target="_blank">Martin Fowler厌倦ORM了</a> [<a href="http://www.jdon.com/tags/564" target="_blank">对象数据库阻抗</a> <a href="http://www.jdon.com/tags/11737" target="_blank">ORM模式</a> ] <img src="" alt=""><a href="http://www.jdon.com/44074" title="Spring创始人Rod Johnson离开东家VMWARE" target="_blank">Spring创始人Rod Johnson离开东家VMWARE</a> [<a href="http://www.jdon.com/tags/253" target="_blank">spring</a> <a href="http://www.jdon.com/tags/10531" target="_blank">akka</a> ]-</p>
<p><a href="">使用帮助</a> <a href="">联系管理员</a> 探索 分享 交流 解惑 授道 OpenSource <a href="http://www.jdon.com/jdonframework/jivejdon3/index.html" target="_blank"><strong>JIVEJDON</strong></a> Powered by <a href="http://www.jdon.com/jdonframework/" target="_blank"><strong>JdonFramework</strong></a> Code © 2002-15 <a href="http://www.jdon.com/" target="_blank"><strong>jdon.com</strong></a>  <a href="http://www.jdon.com/common/503warn.jsp" target="_blank">anti spam</a></p>
<p>-</p>
<p>-</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/缓存/">缓存</a></li></span><span class="breadcrumb"><li><a href="/categories/缓存/">缓存</a></li><li><a href="/categories/缓存/ehcache/">ehcache</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ehcache/" class="label label-primary">ehcache</a><a href="/tags/缓存/" class="label label-success">缓存</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-缓存-ehcache--是使用分布式缓存Ehcache或者NoSQL数据库呢？-ThinkingInJdon/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-缓存-ehcache--是使用分布式缓存Ehcache或者NoSQL数据库呢？-ThinkingInJdon" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/78/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/76/">76</a></li><li><a class="page-number" href="/page/77/">77</a></li><li><a class="page-number" href="/page/78/">78</a></li><li class="active"><li><span class="page-number current">79</span></li><li><a class="page-number" href="/page/80/">80</a></li><li><a class="page-number" href="/page/81/">81</a></li><li><a class="page-number" href="/page/82/">82</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/80/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 15:12:18</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
