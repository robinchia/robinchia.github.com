
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 37 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--服务器以及浏览器缓存影响Web开发问题-品味开发乐趣-CSDN博客/">服务器以及浏览器缓存影响Web开发问题 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:43.000Z"> <a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--服务器以及浏览器缓存影响Web开发问题-品味开发乐趣-CSDN博客/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-web-csdn-">服务器以及浏览器缓存影响Web开发问题 - 品味开发乐趣 - CSDN博客</h1>
<h1 id="-http-blog-csdn-net-devfan-"><a href="http://blog.csdn.net/devfan" target="_blank">品味开发乐趣</a></h1>
<h2 id="-">寒雨连江夜入吴 平明送客楚山孤 洛阳亲友如相问 一片冰心在玉壶</h2>
<ul>
<li><a href="http://passport.csdn.net/UserLogin.aspx" target="_blank">登录</a></li>
<li><a href="http://passport.csdn.net/CSDNUserRegister.aspx" target="_blank">注册</a></li>
<li><a href="http://hi.csdn.net/" target="_blank">欢迎</a></li>
<li><a href="http://writeblog.csdn.net/Signout.aspx" target="_blank">退出</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">我的博客</a></li>
<li><a href="http://writeblog.csdn.net/configure.aspx" target="_blank">配置</a></li>
<li><a href="http://writeblog.csdn.net/PostEdit.aspx" target="_blank">写文章</a></li>
<li><a href="http://writeblog.csdn.net/PostList.aspx" target="_blank">文章管理</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">博客首页</a></li>
</ul>
<p>*</p>
<ul>
<li><p>全站 当前博客
*</p>
</li>
<li><p><a href="http://hi.csdn.net/devfan" target="_blank">空间</a></p>
</li>
<li><a href="http://blog.csdn.net/devfan" target="_blank">博客</a></li>
<li><a href="http://hi.csdn.net/!s/friend/list/devfan" target="_blank">好友</a></li>
<li><a href="http://hi.csdn.net/!s/album/list/devfan" target="_blank">相册</a></li>
<li><a href="http://hi.csdn.net/!s/wall/to/devfan" target="_blank">留言</a></li>
</ul>
<p>用户操作<a href="http://hi.csdn.net/!s/wall/to/devfan" target="_blank">[留言]</a>  <a href="http://hi.csdn.net/!s/msg/to/devfan" target="_blank">[发消息]</a>  <a href="http://hi.csdn.net/!s/friend/add/devfan" target="_blank">[加为好友]</a> 订阅我的博客<a href="http://feeds.feedsky.com/csdn.net/devfan" target="_blank"><img src="" alt="XML聚合"></a>   <a href="http://feeds.feedsky.com/csdn.net/devfan" target="_blank"><img src="" alt="FeedSky"></a><a href="http://www.xianguo.com/subscribe.php?url=http://feeds.feedsky.com/csdn.net/devfan" target="_blank"><img src="" alt="订阅到鲜果"></a><a href="http://fusion.google.com/add?feedurl=http://feeds.feedsky.com/csdn.net/devfan" target="_blank"><img src="" alt="订阅到Google"></a><a href="http://www.zhuaxia.com/add_channel.php?url=http://feeds.feedsky.com/csdn.net/devfan" target="_blank"><img src="" alt="订阅到抓虾"></a><a href="http://writeblog.csdn.net/configure.aspx" target="_blank">[编辑]</a>devfan的公告<a href="http://writeblog.csdn.net/EditCategories.aspx?catID=1" target="_blank">[编辑]</a>文章分类* <a href="http://blog.csdn.net/devfan/category/548005.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/devfan/category/548005.aspx" target="_blank">.NET</a></p>
<ul>
<li><a href="http://blog.csdn.net/devfan/category/548003.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/devfan/category/548003.aspx" target="_blank">AJAX</a></li>
<li><a href="http://blog.csdn.net/devfan/category/548004.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/devfan/category/548004.aspx" target="_blank">JAVA</a></li>
<li><a href="http://blog.csdn.net/devfan/category/562504.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/devfan/category/562504.aspx" title="Lucene学习研究" target="_blank">Lucene</a></li>
<li><a href="http://blog.csdn.net/devfan/category/621393.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/devfan/category/621393.aspx" title="乌图班" target="_blank">Ubuntu(乌图班)</a></li>
<li><a href="http://blog.csdn.net/devfan/category/548006.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/devfan/category/548006.aspx" target="_blank">Web</a></li>
<li><a href="http://blog.csdn.net/devfan/category/15985.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/devfan/category/15985.aspx" target="_blank">开发笔记</a></li>
<li><a href="http://blog.csdn.net/devfan/category/17509.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/devfan/category/17509.aspx" target="_blank">其他</a></li>
<li><a href="http://blog.csdn.net/devfan/category/17596.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/devfan/category/17596.aspx" target="_blank">收藏</a></li>
<li><a href="http://blog.csdn.net/devfan/category/15986.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/devfan/category/15986.aspx" target="_blank">随笔</a>存档* <a href="http://blog.csdn.net/devfan/archive/2009/11.aspx" target="_blank">2009年11月(3)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2009/10.aspx" target="_blank">2009年10月(3)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2009/09.aspx" target="_blank">2009年09月(1)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2009/08.aspx" target="_blank">2009年08月(10)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2009/07.aspx" target="_blank">2009年07月(3)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2009/06.aspx" target="_blank">2009年06月(3)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2009/05.aspx" target="_blank">2009年05月(11)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2009/04.aspx" target="_blank">2009年04月(3)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2009/03.aspx" target="_blank">2009年03月(6)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2009/02.aspx" target="_blank">2009年02月(3)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2008/11.aspx" target="_blank">2008年11月(2)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2008/10.aspx" target="_blank">2008年10月(4)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2008/09.aspx" target="_blank">2008年09月(1)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2005/06.aspx" target="_blank">2005年06月(7)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2005/05.aspx" target="_blank">2005年05月(3)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2004/09.aspx" target="_blank">2004年09月(1)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2004/08.aspx" target="_blank">2004年08月(4)</a></li>
<li><a href="http://blog.csdn.net/devfan/archive/2004/07.aspx" target="_blank">2004年07月(8)</a></li>
<li><p><a href="http://blog.csdn.net/devfan/archive/2004/06.aspx" target="_blank">2004年06月(14)</a></p>
<h1 id="-web-"><img src="" alt="原创">  服务器以及浏览器缓存影响Web开发问题 <a href="&quot;收藏到我的网摘中，并分享给我的朋友&quot;">收藏</a></h1>
<p>   在进行Web开发时候可能会发现自己明明修改程序,但在浏览器上确并没有发生改变.这个时候就应该注意缓存的问题了.缓存是解决性能问题的很有效的解决方案但在Web开发时候缓存成了大问题.两天自己 在用Eclipse+Tomcat进行AJAX开发时候就被缓存搞的找不到北了.</p>
<p>   对于Tomcat可以删除work目录下的东西,可以其实可以用RD命令删除整个目录，打开Tomcat的Bin目录下的tomcat\bin\startup.bat 文件，在开头加入rd/s/q &quot;D:\tomcat\work\Catalina&quot;路径根据自己实际情况做修改这样每次启动Tomcat的时候就会先删除页面缓存了，不用担心页面修改后没被重新编译</p>
<p>   对于浏览器(IE8)可以进行这样设置:工具-&gt;Internet选项-&gt;常规-&gt;浏览历史记录-&gt;设置-&gt;选择每次访问网页时检查所存网页较新版本即可</p>
</li>
</ul>
<p>发表于 @ 2009年05月08日　16:14:00 | <a href="http://blog.csdn.net/devfan/archive/2009/05/08/4161166.aspx#FeedBack" title="评论" target="_blank">评论( loading...  )</a>| <a href="http://writeblog.csdn.net/PostEdit.aspx?entryId=4161166" title="编辑" target="_blank">编辑</a>| <a href="mailto:webmaster@csdn.net?subject=Article Report!!!&amp;body=Author:devfanURL:http://blog.csdn.net/ArticleContent.aspx?UserName=devfan&amp;Entryid=4161166">举报</a>| <a href="&quot;收藏到我的网摘中，并分享给我的朋友&quot;">收藏</a></p>
<h3 id="-windows7-rc-http-blog-csdn-net-devfan-archive-2009-05-08-4159471-aspx-ie-session-http-blog-csdn-net-devfan-archive-2009-05-11-4169106-aspx-"><a href="http://blog.csdn.net/devfan/archive/2009/05/08/4159471.aspx" target="_blank">旧一篇:windows7 RC 体验(安装与汉化以及开发兼容性)</a> | <a href="http://blog.csdn.net/devfan/archive/2009/05/11/4169106.aspx" target="_blank">新一篇:直接关闭IE,释放Session</a><a href=""></a></h3>
<p>Copyright © devfanPowered by CSDN Blog<img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li></span><span class="breadcrumb"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li><li><a href="/categories/Java&J2EE/Java_总结类/">Java_总结类</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java&J2EE/" class="label label-primary">Java&J2EE</a><a href="/tags/Java_总结类/" class="label label-success">Java_总结类</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:43"datetime="2014-03-07 09:54:43"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--服务器以及浏览器缓存影响Web开发问题-品味开发乐趣-CSDN博客/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JavaJ2EE-Java_总结类--服务器以及浏览器缓存影响Web开发问题-品味开发乐趣-CSDN博客" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--探究Singleton设计模式/">探究 Singleton 设计模式</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:43.000Z"> <a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--探究Singleton设计模式/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-singleton-">探究 Singleton 设计模式</h1>
<p><strong>探究 Singleton 设计模式（构建分布式应用程序）</strong></p>
<p>来源：<a href="http://www.microsoft.com" target="_blank">www.microsoft.com</a>
来源：<a href="http://uml.org.cn/sjms/200506211.htm" target="_blank">UML软件工程组织</a></p>
<p><strong>摘要：</strong></p>
<p>讨论 Singleton 设计模式（指示如何以及何时创建对象的创造性模式）及其在 Microsoft .NET 框架中的有效使用。</p>
<p><strong>内容</strong></p>
<p><a href="http://sheneyan.com/tech/article/patterns/singleton.html#i1#i1" target="_blank">简介</a></p>
<p><a href="http://sheneyan.com/tech/article/patterns/singleton.html#i2#i2" target="_blank">Singleton 模式</a></p>
<p><a href="http://sheneyan.com/tech/article/patterns/singleton.html#i3#i3" target="_blank">结论</a></p>
<p><strong>简介</strong></p>
<p>在开发软件应用程序过程中，随着应用程序的开发，会出现重复性的模式。 随着整个软件系统的开发，很多相同的模式会逐渐显现出来。</p>
<p>这种重复性模式概念在其他应用中是非常明显的。 汽车制造就是一种此类应用。 很多不同的汽车型号使用相同的子构件，包括大多数基本部件（例如，灯泡和紧固零件）以及较大的构件（例如，底盘和发动机）。</p>
<p>在住宅建筑中，重复性模式概念适用于螺丝和螺钉以及整体总体建筑物配电系统。 无论组建的小组是为了开发新的汽车设计还是新的建筑物设计，它其通常不必没有考虑到以前已解决的问题。 如果设计和建筑住宅的小组必须重新构思和设计房子的每一个组成部分，则整个过程所花的时间比现在要长得多。 门高或灯开关功能等许多设计决策（例如，门高或灯开关功能）很容易理解。 房为满足给房子不同部分提供洗手功能的要求，房屋设计师不必重新设计和重新建造不同类型的输供水和蓄水设施：，以便达到为房子不同部分提供洗手功能的要求： 标准水槽以及标准的热水和冷水输入接头和排水输出接头是很容易理解非常常见的房屋建筑构件。 可以将重复性模式概念反复应用于我们周围的几乎每样东西上，包括软件。</p>
<p>汽车和住宅建筑示例有助于在软件设计和构造中体现某些一般性的抽象概念。 易于理解且明确定义的通用功能部件的概念是设计模式的源动力，它也是其他两篇设计模式文章探究工厂设计模式和探究观察者设计模式的重点。 这些模式几乎涵盖了面向对象的软件设计的各个方面，包括对象创建、对象交互和对象生存期。 在本文中，我们将讨论 Singleton 模式，它包含在创造性模式系列中。</p>
<p>创造性模式指示如何以及何时创建对象。 很多实例需要只能通过创造性方法解决的特殊行为，而不是在创建实例后强制实施所需的行为。 此类行为要求最好的例子之一包含在 Singleton 模式中。 Singleton 模式在 Design Patterns: Elements of Reusable Software 这一经典参考书目中有正式的定义，该书的作者包括 Erich Gamma、Richard Helm、Ralph Johnson 和 John Vlissides（也称为四人组或 GoF）。 在 Design Patterns 中，此模式是最简单也是使用最广泛的模式之一。 但是，正如我们将会看到的一样，在实现此模式时可能会出现一些问题。 本文试图通过 Singleton 模式的多个早期实现来从头开始分析 Singleton 模式，以及如何在 Microsoft_ .NET 应用程序开发中发挥其最佳用途。</p>
<p><strong>Singleton**</strong>模式**</p>
<p>按照 Design Patterns 中的定义，Singleton 模式的用途是 &quot;ensure a class has only one instance, and provide a global point of access to it&quot;（确保每个类只有一个实例，并提供它的全局访问点）。</p>
<p>它可以解决什么问题，或者换句话说，我们使用它的动机是什么？ 几乎在每个应用程序中，都需要有一个从中进行全局访问和维护某种类型数据的区域。 在面向对象的 (OO) 系统中也有这种情况，在此类系统中，在任何给定时间只应运行一个类或某个类的一组预定义数量的实例。 例如，当使用某个类来维护增量计数器时，此简单的计数器类需要跟踪在多个应用程序领域中使用的整数值。 此类需要能够增加该计数器并返回当前的值。 对于这种情况，所需的类行为应该仅使用一个类实例来维护该整数，而不是使用其它类实例来维护该整数。</p>
<p>最初，人们可能会试图将计数器类实例只作为静态全局变量来创建。 这是一种通用的方法，但实际上只解决一部分问题；它解决了全局可访问性问题，但没有采取任何措施来确保在任何给定的时间只运行一个类实例。 应该由类本身来负责只使用一个类实例，而不是由类用户来负责。 应该始终不要让类用户来监视和控制运行的类实例的数量。</p>
<p>所需要的是使用某种方法来控制如何创建类实例，然后确保在任何给定的时间只创建一个类实例。 这会确切地给我们提供所需的行为，并使客户端不必了解任何类细节。</p>
<p><strong>逻辑模型</strong></p>
<p>Singleton 模型非常简单直观。 （通常）只有一个 Singleton 实例。 客户端通过一个已知的访问点来访问 Singleton 实例。 在这种情况下，客户端是一个需要访问唯一 Singleton 实例的对象。 图 1 以图形方式显示此关系。</p>
<p><img src="" alt="图 1. Singleton 模式逻辑模型">
图1. Singleton模式逻辑模型</p>
<p><strong>物理模型</strong></p>
<p>Singleton 模式的物理模型也是非常简单的。 但是，随着时间的推移，实现 Singleton 的方式也略有不同。 让我们看一下原始的 GoF Singleton 实现。 图 2 显示按 Design Patterns 所定义的原始 Singleton 模式的 UML 模型。</p>
<p><img src="" alt="图 2. Design Patterns 中的 Singleton 模式物理模型">
图2. Design Patterns中的Singleton模式物理模型</p>
<p>我们看到的是一个简单的类图表，显示有一个 Singleton 对象的私有静态属性以及返回此相同属性的公共方法 Instance()。 这实际上是 Singleton 的核心。 还有其他一些属性和方法，用于说明在该类上允许执行的其他操作。 为了便于此次讨论，让我们将重点放在实例属性和方法上。</p>
<p>客户端仅通过实例方法来访问任何 Singleton 实例。 此处没有定义创建实例的方式。 我们还希望能够控制如何以及何时创建实例。 在 OO 开发中，通常可以在类的构造函数中最好地处理特殊对象的创建行为。 这种情况也不例外。 我们可以做的是，定义我们何时以及如何构造类实例，然后禁止任何客户端直接调用该构造函数。 这是在 Singleton 构造中始终使用的方法。 让我们看一下 Design Patterns 中的原始示例。 通常，将下面所示的 C++ Singleton 示例实现代码示例视为 Singleton 的默认实现。 本示例已移植到很多其他编程语言中，通常它在任何地方的形式与此几乎相同。</p>
<p><strong>C++ Singleton**</strong>示例实现代码**</p>
<p><strong>Language**</strong>：<strong><strong>cpp</strong></strong>, parsed in: 0.004 seconds, using GeSHi 1.0.7.12**</p>
<ol>
<li><p>// Declaration</p>
</li>
<li><p><strong>class</strong> Singleton {</p>
</li>
<li><p><strong>public</strong>:</p>
</li>
<li><p>static Singleton/* Instance();</p>
</li>
<li><p><strong>protected</strong>:</p>
</li>
<li><p>Singleton();</p>
</li>
<li><p><strong>private</strong>:</p>
</li>
<li><p>static Singleton/* _instance;</p>
</li>
<li><p>}</p>
</li>
<li></li>
<li><p>// Implementation</p>
</li>
<li><p>Singleton/* Singleton::_instance = 0;</p>
</li>
<li></li>
<li><p>Singleton/* Singleton::Instance() {</p>
</li>
<li><p>if (_instance == 0) {</p>
</li>
<li><p>_instance = new Singleton;</p>
</li>
<li><p>}</p>
</li>
<li><p>return _instance;</p>
</li>
<li><p>}</p>
</li>
<li></li>
</ol>
<p>让我们先花点时间分析一下此代码。 该简单类有一个成员变量，此变量是指向该类自身的指针。 注意，构造函数是受保护的，并且只有公共方法才是实例方法。 在实例方法实现中，有一个控制块 (if)，它检查成员变量是否已初始化，如果没有的话，则创建一个新实例。 控制块中这种惰性初始化意味着仅在第一次调用 Instance() 方法时初始化或创建 Singleton 实例。 对于很多应用程序，这种方法效果很好。 但对于多线程应用程序，这种方法证明具有潜在危险的副作用。 如果两个线程同时进入控制块，则可能会创建该成员变量的两个实例。 要解决这一问题，您可能想只将重要部分放在控制块周围以确保线程安全。 如果您这样做，则将对实例方法的所有调用进行序列化处理，并且可能会对性能产生不利影响（取决于应用程序）。 正是由于这个原因，创建了此模式的另一个版本，它使用某种称为双重检验机制的功能。 下一个代码示例显示使用 Java 语法的双重检验锁定。</p>
<p><strong>使用 Java 语法的双重检验锁定 Singleton 代码</strong></p>
<p><strong>Language**</strong>：<strong>**java, parsed in: 0.011 seconds, using GeSHi 1.0.7.12</strong></p>
<ol>
<li><p>// C++ port to Java</p>
</li>
<li><p><strong>class</strong> Singleton</p>
</li>
<li><p>{</p>
</li>
<li><p><strong>public</strong> <strong>static</strong> Singleton Instance() {</p>
</li>
<li><p>if (_instance == <strong>null</strong>) {</p>
</li>
<li><p><strong>synchronized</strong> (<strong>Class</strong>.forName(&quot;Singleton&quot;)) {</p>
</li>
<li><p>if (_instance == <strong>null</strong>) {</p>
</li>
<li><p>_instance = <strong>new</strong> Singleton();</p>
</li>
<li><p>}</p>
</li>
<li><p>}</p>
</li>
<li><p>}</p>
</li>
<li><p><strong>return</strong> _instance;     </p>
</li>
<li><p>}</p>
</li>
<li><p><strong>protected</strong> Singleton() {}</p>
</li>
<li><p><strong>private</strong> <strong>static</strong> Singleton _instance = <strong>null</strong>;</p>
</li>
<li><p>}</p>
</li>
<li></li>
</ol>
<p>在使用 Java 语法的双重检验锁定 Singleton 代码示例中，我们直接将 C++ 代码移植到 Java 代码，以便利用 Java 关键部分块（已同步）。 主要差别是不再有单独的声明和实现部分，没有指针数据类型，并且采用了新的双重检验机制。 双重检验发生在第一个 IF 块上。 如果成员变量为空，则执行进入关键部分块，该块再次双重检验该成员变量。 仅在通过此最终测试后，才会实例化该成员变量。 一般来说，两个线程无法使用这种方法创建两个类实例。 另外，因为在第一次检查时没有出现线程阻塞，所以对此方法的大多数调用不会由于必须进入锁定而导致性能下降。 目前，在实现 Singleton 模式时，很多 Java 应用程序中都广泛使用这种方法。 这种方法很巧妙，但也有瑕疵。 某些优化编译器可以将惰性初始化代码优化掉或对其重新进行排序，并且会重新产生线程安全问题。 有关更深入的解释，请参阅 &quot;The Double-Check Locking is Broken&quot; Declaration。</p>
<p>另一种试图解决此问题的方法可能是，在成员变量声明中使用 volatile 关键字。 这应该告诉编译器不要对代码重新排序，并且放弃优化。 目前，这是唯一建议的 JVM 内存模型，并且不会立即解决该问题。</p>
<p>实现 Singleton 的最好方法是什么？ 最终（而不是碰巧），Microsoft .NET 框架解决了所有这些问题，从而更易于实现 Singleton，却不会产生我们目前讨论的不利副作用。 .NET 框架以及 C/# 语言允许我们在必要时通过替换语言关键字，将上述的 Java 语法移植到 C/# 语法。 因此，Singleton 代码变为以下内容：</p>
<p><strong>以 C/# 编码的双重检验锁定</strong></p>
<p><strong>Language**</strong>：<strong><strong>csharp</strong></strong>, parsed in: 0.005 seconds, using GeSHi 1.0.7.12**</p>
<ol>
<li><p>// Port to C/#</p>
</li>
<li><p>class Singleton</p>
</li>
<li><p>{</p>
</li>
<li><p>public static Singleton Instance() {</p>
</li>
<li><p>if (_instance == null) {</p>
</li>
<li><p>lock (<a href="http://www.google.com/search?q=typeof+msdn.microsoft.com" target="_blank">typeof</a>(Singleton)) {</p>
</li>
<li><p>if (_instance == null) {</p>
</li>
<li><p>_instance = <a href="http://www.google.com/search?q=new+msdn.microsoft.com" target="_blank">new</a> Singleton();</p>
</li>
<li><p>}</p>
</li>
<li><p>}</p>
</li>
<li><p>}</p>
</li>
<li><p>return _instance;     </p>
</li>
<li><p>}</p>
</li>
<li><p>protected Singleton() {}</p>
</li>
<li><p>private static volatile Singleton _instance = null;</p>
</li>
<li><p>}</p>
</li>
<li></li>
</ol>
<p>此处，我们替换了锁定关键字来执行关键部分块，使用 typeof 操作并添加 volatile 关键字，以确保没有对代码进行优化程序重新排序。 虽然此代码或多或少是 GoF Singleton 模式的直接移植，但它可达到我们的目的，并且我们可获得所需的行为。 此代码还说明了将 C++ 移植到 Java 和将 Java 移植到 C/# 代码的一些相似之处和主要差别。 但是，正如任何代码移植一样，通常目标语言或平台的一些优点可能在移植过程中失去。 需要做的就是对代码重构，以便利用新目标语言或平台的功能。</p>
<p>在前面的每个代码示例中，Singleton 的原始实现随时间的推移而发生变化，以解决在每个新模式实现中发现的问题。 一些问题（例如，线程安全）要求对大多数实现进行更改，以满足在目前应用程序中日益增长的需要并解决演变发展问题。 .NET 在应用程序开发中提供了一个演变步骤。 可以在“框架”级别解决前面示例中出现的很多亟待解决的问题，而不是在实现级别解决。 虽然上一个示例显示了一个使用 .NET 框架和 C/# 的有效 Singleton 类，但只需更好地利用 .NET 框架本身就可以大大简化此代码。 以下示例使用 .NET，它是一个松散地基于原始 GoF 模式的最小限度的 Singleton 类，并且仍然可获得类似的行为。</p>
<p><strong>.NET Singleton**</strong>示例**</p>
<p><strong>Language**</strong>：<strong><strong>csharp</strong></strong>, parsed in: 0.002 seconds, using GeSHi 1.0.7.12**</p>
<ol>
<li><p>// .NET Singleton</p>
</li>
<li><p>sealed class Singleton</p>
</li>
<li><p>{</p>
</li>
<li><p>private Singleton() {}</p>
</li>
<li><p>public static readonly Singleton Instance = <a href="http://www.google.com/search?q=new+msdn.microsoft.com" target="_blank">new</a> Singleton();</p>
</li>
<li><p>}</p>
</li>
<li></li>
</ol>
<p>此版本已大大简化并且更加直观。 它仍然是 Singleton 吗？ 让我们看一下更改了哪些内容，然后再做决定。 我们修改了要密封的类本身（该类密封后是不可继承的），删除了惰性初始化代码，删除了 Instance() 方法，并且对 _instance 变量做了大量的修改。 对 _instance 变量所做的更改包括修改对公共方法的访问级别，将变量标记为只读，以及在声明时初始化该变量。 此处，我们可以直接定义所需的行为，而不关心实现的潜在有害的副作用。 那么，使用惰性初始化有什么优点以及使用多个线程有什么危险呢？ 在 .NET 框架中内置了所有正确的行为。 让我们先看第一种情况：惰性初始化。</p>
<p>最初使用惰性初始化的主要原因是要获取仅在第一次调用 Instance() 方法中创建实例的行为，还因为 C++ 规范中具有某种开放性，并不定义静态变量的确切初始化顺序。 要在 C++ 中获得所需的 Singleton 行为，必须采用涉及使用惰性初始化的运算方法。 我们真正关心的是在第一次（在该情况下）调用实例属性中创建该实例，还是在此调用之前创建该实例的，并且类中的静态变量是否有已定义的初始化顺序。 对于 .NET 框架，这就是我们获取的行为。 在 JIT 过程中，当（且仅当）任何方法使用静态属性时，“框架”将初始化此静态属性。 如果没有使用该属性，则不会创建实例。 更准确地说，在 JIT 过程中发生的事情就是，在任何调用方使用该类的任何静态成员时构造和加载该类。 在这种情况下，结果是相同的。</p>
<p>那么，线程安全初始化呢？ “框架”也解决了这一问题。 “框架”内部保证静态类型初始化的线程安全。 换句话说，在上面的示例中，只创建一个 Singleton 类实例。 还要注意，用于保存类实例的属性字段称为实例。 此选项更好地说明了，在本文中的讨论过程中，此值是类的实例。 在“框架”本身中，虽然使用的属性名称称为值，但有多个类使用此类型的 Singleton。 概念完全相同。</p>
<p>对类所做的其他更改意味着禁止划分子类。 添加密封类修饰符可确保不会将该类划分为子类。 GoF Singleton 模式详细介绍了试图对 Singleton 划分子类所产生的问题，该划分通常并不是小事。 在大多数情况下，可以很容易地开发没有父类的 Singleton，并且添加划分子类功能会增加通常根本不需要的新的复杂性级别。 随着复杂性的提高，测试、培训和文档编制等所需的时间也会增加。 通常，除非绝对必要，否则您不希望提高任何代码的复杂性。</p>
<p>让我们看一下如何使用 Singleton。 使用我们最初的计数器的有关动机的概念，我们可以创建一个简单的 Singleton 计数器类并说明我们将如何使用它。 图 3 显示了 UML 类说明将包含什么内容。</p>
<p><img src="" alt="图 3. UML 类图表">
图 3. UML 类图表</p>
<p>相应的类实现代码以及示例客户端使用如下所示。</p>
<p><strong>示例 Singleton 使用</strong></p>
<p><strong>Language**</strong>：<strong><strong>csharp</strong></strong>, parsed in: 0.007 seconds, using GeSHi 1.0.7.12**</p>
<ol>
<li><p>sealed class SingletonCounter {</p>
</li>
<li><p>public static readonly SingletonCounter Instance =</p>
</li>
<li><p><a href="http://www.google.com/search?q=new+msdn.microsoft.com" target="_blank">new</a> SingletonCounter();</p>
</li>
<li><p>private long Count = 0;</p>
</li>
<li><p>private SingletonCounter() {}</p>
</li>
<li><p>public long NextValue() {</p>
</li>
<li><p>return ++Count;</p>
</li>
<li><p>}</p>
</li>
<li><p>}</p>
</li>
<li></li>
<li><p>class SingletonClient {</p>
</li>
<li><p>[STAThread]</p>
</li>
<li><p>static void Main() {</p>
</li>
<li><p>for (int i=0; i&lt;20; i++) {</p>
</li>
<li><p>Console.WriteLine(&quot;Next singleton value: {0}&quot;,</p>
</li>
<li><p>SingletonCounter.Instance.NextValue());</p>
</li>
<li><p>}</p>
</li>
<li><p>}</p>
</li>
<li><p>}</p>
</li>
<li></li>
</ol>
<p>此处，我们还创建了一个 Singleton 类来维护具有 long 类型的增量计数。 客户端是一个简单的控制台应用程序，它显示计数器类的 20 个值。 虽然此示例极其简单，但它却说明了如何使用 .NET 来实现 Singleton，然后将其用在应用程序中。</p>
<p><strong>小结</strong></p>
<p>Singleton 设计模式是一个非常有用的机制，可用于在面向对象的应用程序中提供单个对象访问点。 无论使用的是什么实现，该模式提供一个大家所熟知的概念，以便其在设计和开发小组之间方便地进行共享。 但是，正如我们所发现的一样，注意到这些实现有多大差异及其潜在的副作用也是非常重要的。 .NET 框架为模式实现者在设计所需的功能类型方面提供了很大的帮助，实现者无需处理本文中所讨论的很多副作用。 在正确实现后，可以证实模式的最初目的的有效性。</p>
<p>设计模式是非常有用的软件设计概念，可使小组将重点放在提供最佳类型的应用程序上，而不考虑它们是什么应用程序。 关键在于正确而有效地使用设计模式，目前有很多关于将设计模式用于 Microsoft .NET 方面的 MSDN 系列文档，其中介绍了如何正确而有效地使用设计模式。</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li></span><span class="breadcrumb"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li><li><a href="/categories/Java&J2EE/Java_总结类/">Java_总结类</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java&J2EE/" class="label label-primary">Java&J2EE</a><a href="/tags/Java_总结类/" class="label label-success">Java_总结类</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:43"datetime="2014-03-07 09:54:43"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--探究Singleton设计模式/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JavaJ2EE-Java_总结类--探究Singleton设计模式" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--我的重构哪里不规范？讨论第2页/">我的重构哪里不规范？讨论第2页</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:43.000Z"> <a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--我的重构哪里不规范？讨论第2页/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-2-">我的重构哪里不规范？讨论第2页</h1>
<p><a href="http://www.javaeye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://www.javaeye.com/all" target="_blank">我的应用</a> <a href="http://www.javaeye.com/login" target="_blank">登录</a> <a href="http://www.javaeye.com/signup" target="_blank">注册</a></p>
<p><a href="http://www.javaeye.com/" target="_blank"><img src="&quot;JavaEye-最棒的软件开发交流社区&quot;" alt="JavaEye-最棒的软件开发交流社区"></a></p>
<p><a href="http://www.javaeye.com/forums" target="_blank">论坛首页</a> → <a href="http://www.javaeye.com/forums/board/develop" target="_blank">软件开发和项目管理版</a> → <a href="http://www.javaeye.com/forums/tag/test" target="_blank">软件测试</a> →</p>
<h1 id="-">我的重构哪里不规范？</h1>
<p><a href="http://www.javaeye.com/forums/board/develop" target="_blank">全部</a> <a href="http://www.javaeye.com/forums/tag/project-manage" target="_blank">项目管理</a> <a href="http://www.javaeye.com/forums/tag/agile" target="_blank">敏捷开发</a> <a href="http://www.javaeye.com/forums/tag/test" target="_blank">软件测试</a> <a href="http://www.javaeye.com/forums/tag/configuration" target="_blank">配置管理</a> <a href="http://www.javaeye.com/forums/tag/UseCase" target="_blank">UseCase</a> <a href="http://www.javaeye.com/forums/tag/UML" target="_blank">UML</a> <a href="http://www.javaeye.com/forums/tag/unitest" target="_blank">单元测试</a> <a href="http://www.javaeye.com/forums/tag/XP" target="_blank">XP</a> <a href="http://www.javaeye.com/forums/tag/TDD" target="_blank">TDD</a> <a href="http://www.javaeye.com/forums/tag/UP" target="_blank">UP</a> <a href="http://www.javaeye.com/forums/tag/CMM" target="_blank">CMM</a>
<a href="http://www.javaeye.com/topic/90347?page=1" target="_blank">« 上一页</a> <a href="http://www.javaeye.com/topic/90347?page=1" target="_blank">1</a> 2 <a href="http://www.javaeye.com/topic/90347?page=3" target="_blank">3</a> <a href="http://www.javaeye.com/topic/90347?page=4" target="_blank">4</a> <a href="http://www.javaeye.com/topic/90347?page=5" target="_blank">5</a> <a href="http://www.javaeye.com/topic/90347?page=3" target="_blank">下一页 »</a></p>
<p>浏览 17393 次 锁定老贴子 <a href="http://www.javaeye.com/topic/90347" target="_blank">主题：我的重构哪里不规范？</a></p>
<p>精华帖 (3) :: 良好帖 (0) :: 新手帖 (0) :: 隐藏帖 (1) 作者 正文 * gigix</p>
<ul>
<li>等级: <img src="&quot;资深会员&quot;" alt="资深会员">资深会员</li>
<li><a href="http://gigix.javaeye.com/" target="_blank"><img src="&quot;gigix的博客: 透明之眼&quot;" alt="gigix的博客"></a></li>
<li>文章: 4810</li>
<li>积分: 2991</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p><a href="http://www.javaeye.com/topic/90347?page=2#" target="_blank">&lt;</a> <a href="http://www.javaeye.com/topic/90347?page=2#" target="_blank">&gt;</a>  猎头职位: <a href="http://www.javaeye.com/jobs/712" target="_blank">北京:  Java搜索工程师</a></p>
<p>ojava 写道
公司新加代码规范条目：所定义的方法尽量不要超过100行。
某一方面来说，可以避免这种流水账式的代码吧！
并且强制我们进行Xiaohanne所说的面向接口不要面向实现的编程。
TDD is THE solution of your problem:
you just can&#39;t write a test for a hundred-lines-long method.
Actually, in normal cases,
methods should not be longer than 10 lines.
(I&#39;d say 5 lines indeed.) <a href="http://www.javaeye.com/topic/90347?page=2#" target="_blank">返回顶楼</a> <a href="http://gigix.javaeye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://gigix.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=gigix" title="发送站内短信" target="_blank"> </a> <a href="http://gigix.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=gigix" title="关注作者" target="_blank"> </a> <a href="http://www.javaeye.com/topic/90347?page=2#313291" title="gigix回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347?page=2#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347?page=2#" title="差" target="_blank">0</a> 请登录后投票  * 诺铁</p>
<ul>
<li>等级: <img src="&quot;四星会员&quot;" alt="四星会员"></li>
<li><a href="http://notyy.javaeye.com/" target="_blank"><img src="&quot;诺铁的博客: 诺铁心斋&quot;" alt="诺铁的博客"></a></li>
<li>文章: 277</li>
<li>积分: 398</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>因为要后续使用而把局部变量提到成员变量是最差的作法。
你需要的不是重构，是重设计。 <a href="http://www.javaeye.com/topic/90347?page=2#" target="_blank">返回顶楼</a> <a href="http://notyy.javaeye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://notyy.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=%E8%AF%BA%E9%93%81" title="发送站内短信" target="_blank"> </a> <a href="http://notyy.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=%E8%AF%BA%E9%93%81" title="关注作者" target="_blank"> </a> <a href="http://www.javaeye.com/topic/90347?page=2#313301" title="诺铁回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347?page=2#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347?page=2#" title="差" target="_blank">0</a> 请登录后投票  * gigix</p>
<ul>
<li>等级: <img src="&quot;资深会员&quot;" alt="资深会员">资深会员</li>
<li><a href="http://gigix.javaeye.com/" target="_blank"><img src="&quot;gigix的博客: 透明之眼&quot;" alt="gigix的博客"></a></li>
<li>文章: 4810</li>
<li>积分: 2991</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>诺铁 写道</p>
<p>因为要后续使用而把局部变量提到成员变量是最差的作法。
你需要的不是重构，是重设计。
please man ...
sigh <a href="http://www.javaeye.com/topic/90347?page=2#" target="_blank">返回顶楼</a> <a href="http://gigix.javaeye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://gigix.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=gigix" title="发送站内短信" target="_blank"> </a> <a href="http://gigix.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=gigix" title="关注作者" target="_blank"> </a> <a href="http://www.javaeye.com/topic/90347?page=2#313312" title="gigix回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347?page=2#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347?page=2#" title="差" target="_blank">0</a> 请登录后投票  * xly_971223</p>
<ul>
<li>等级: <img src="&quot;五星会员&quot;" alt="五星会员"></li>
<li><a href="http://xuliangyong.javaeye.com/" target="_blank"><img src="&quot;xly_971223的博客: 一生一火花&quot;" alt="xly_971223的博客"></a></li>
<li>文章: 1048</li>
<li>积分: 650</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>ojava 写道</p>
<p>公司新加代码规范条目：所定义的方法尽量不要超过100行。
某一方面来说，可以避免这种流水账式的代码吧！
并且强制我们进行Xiaohanne所说的面向接口不要面向实现的编程。
100行？太长了吧
我一般情况保持在20行左右 <a href="http://www.javaeye.com/topic/90347?page=2#" target="_blank">返回顶楼</a> <a href="http://xuliangyong.javaeye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://xuliangyong.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=xly_971223" title="发送站内短信" target="_blank"> </a> <a href="http://xuliangyong.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=xly_971223" title="关注作者" target="_blank"> </a> <a href="http://www.javaeye.com/topic/90347?page=2#313402" title="xly_971223回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347?page=2#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347?page=2#" title="差" target="_blank">0</a> 请登录后投票  * gigix</p>
<ul>
<li>等级: <img src="&quot;资深会员&quot;" alt="资深会员">资深会员</li>
<li><a href="http://gigix.javaeye.com/" target="_blank"><img src="&quot;gigix的博客: 透明之眼&quot;" alt="gigix的博客"></a></li>
<li>文章: 4810</li>
<li>积分: 2991</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>xly_971223 写道</p>
<p>ojava 写道</p>
<p>公司新加代码规范条目：所定义的方法尽量不要超过100行。
某一方面来说，可以避免这种流水账式的代码吧！
并且强制我们进行Xiaohanne所说的面向接口不要面向实现的编程。
100行？太长了吧
我一般情况保持在20行左右
3.5 lines in average <a href="http://www.javaeye.com/topic/90347?page=2#" target="_blank">返回顶楼</a> <a href="http://gigix.javaeye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://gigix.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=gigix" title="发送站内短信" target="_blank"> </a> <a href="http://gigix.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=gigix" title="关注作者" target="_blank"> </a> <a href="http://www.javaeye.com/topic/90347?page=2#313404" title="gigix回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347?page=2#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347?page=2#" title="差" target="_blank">0</a> 请登录后投票  * xly_971223</p>
<ul>
<li>等级: <img src="&quot;五星会员&quot;" alt="五星会员"></li>
<li><a href="http://xuliangyong.javaeye.com/" target="_blank"><img src="&quot;xly_971223的博客: 一生一火花&quot;" alt="xly_971223的博客"></a></li>
<li>文章: 1048</li>
<li>积分: 650</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>诺铁 写道</p>
<p>因为要后续使用而把局部变量提到成员变量是最差的作法。
你需要的不是重构，是重设计。
重构跟重新设计是冲突的吗
在功能不变的情况下，我们可以通过重新设计完成重构 <a href="http://www.javaeye.com/topic/90347?page=2#" target="_blank">返回顶楼</a> <a href="http://xuliangyong.javaeye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://xuliangyong.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=xly_971223" title="发送站内短信" target="_blank"> </a> <a href="http://xuliangyong.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=xly_971223" title="关注作者" target="_blank"> </a> <a href="http://www.javaeye.com/topic/90347?page=2#313406" title="xly_971223回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347?page=2#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347?page=2#" title="差" target="_blank">0</a> 请登录后投票  * xly_971223</p>
<ul>
<li>等级: <img src="&quot;五星会员&quot;" alt="五星会员"></li>
<li><a href="http://xuliangyong.javaeye.com/" target="_blank"><img src="&quot;xly_971223的博客: 一生一火花&quot;" alt="xly_971223的博客"></a></li>
<li>文章: 1048</li>
<li>积分: 650</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>gigix 写道</p>
<p>xly_971223 写道</p>
<p>ojava 写道</p>
<p>公司新加代码规范条目：所定义的方法尽量不要超过100行。
某一方面来说，可以避免这种流水账式的代码吧！
并且强制我们进行Xiaohanne所说的面向接口不要面向实现的编程。
100行？太长了吧
我一般情况保持在20行左右
3.5 lines in average
这个。。。。
有点难度 。。。 <a href="http://www.javaeye.com/topic/90347?page=2#" target="_blank">返回顶楼</a> <a href="http://xuliangyong.javaeye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://xuliangyong.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=xly_971223" title="发送站内短信" target="_blank"> </a> <a href="http://xuliangyong.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=xly_971223" title="关注作者" target="_blank"> </a> <a href="http://www.javaeye.com/topic/90347?page=2#313412" title="xly_971223回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347?page=2#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347?page=2#" title="差" target="_blank">0</a> 请登录后投票  * 抛出异常的爱</p>
<ul>
<li>等级: <img src="&quot;五钻会员&quot;" alt="五钻会员"></li>
<li><a href="http://loveexception.javaeye.com/" target="_blank"><img src="&quot;抛出异常的爱的博客: 设计可以拯救国家&quot;" alt="抛出异常的爱的博客"></a></li>
<li>文章: 12053</li>
<li>积分: 2782</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>javastudy 写道</p>
<p>ojava 写道</p>
<p>公司新加代码规范条目：所定义的方法尽量不要超过100行。
某一方面来说，可以避免这种流水账式的代码吧！
并且强制我们进行Xiaohanne所说的面向接口不要面向实现的编程。
得在设计时就得想到拉
我只能说呸。。。。只有日本人能想的到。。。 <a href="http://www.javaeye.com/topic/90347?page=2#" target="_blank">返回顶楼</a> <a href="http://loveexception.javaeye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://loveexception.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E7%9A%84%E7%88%B1" title="发送站内短信" target="_blank"> </a> <a href="http://loveexception.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E7%9A%84%E7%88%B1" title="关注作者" target="_blank"> </a> <a href="http://www.javaeye.com/topic/90347?page=2#313519" title="抛出异常的爱回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347?page=2#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347?page=2#" title="差" target="_blank">0</a> 请登录后投票  * sg552</p>
<ul>
<li>等级: <img src="&quot;一星会员&quot;" alt="一星会员"></li>
<li><a href="http://sg552.javaeye.com/" target="_blank"><img src="&quot;sg552的博客: sg552&quot;" alt="sg552的博客"></a></li>
<li>文章: 566</li>
<li>积分: 141</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>重构—— 改善现有代码的设计。 看看这本书吧。LZ
另外，多测试，常测试，保证每个重构都是成功的。
至于具体细节，就要看经验了。 <a href="http://www.javaeye.com/topic/90347?page=2#" target="_blank">返回顶楼</a> <a href="http://sg552.javaeye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://sg552.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=sg552" title="发送站内短信" target="_blank"> </a> <a href="http://sg552.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=sg552" title="关注作者" target="_blank"> </a> <a href="http://www.javaeye.com/topic/90347?page=2#313526" title="sg552回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347?page=2#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347?page=2#" title="差" target="_blank">0</a> 请登录后投票  * gigix</p>
<ul>
<li>等级: <img src="&quot;资深会员&quot;" alt="资深会员">资深会员</li>
<li><a href="http://gigix.javaeye.com/" target="_blank"><img src="&quot;gigix的博客: 透明之眼&quot;" alt="gigix的博客"></a></li>
<li>文章: 4810</li>
<li>积分: 2991</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>javastudy 写道</p>
<p>gigix 写道</p>
<p>xly_971223 写道</p>
<p>ojava 写道</p>
<p>公司新加代码规范条目：所定义的方法尽量不要超过100行。
某一方面来说，可以避免这种流水账式的代码吧！
并且强制我们进行Xiaohanne所说的面向接口不要面向实现的编程。
100行？太长了吧
我一般情况保持在20行左右
3.5 lines in average
有点太短了吧
that&#39;s our stat in previous project
you can try to show me an example: why do you need a method longer than 5 lines?
(some complex algorithm implementations are exceptions.) <a href="http://www.javaeye.com/topic/90347?page=2#" target="_blank">返回顶楼</a> <a href="http://gigix.javaeye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://gigix.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=gigix" title="发送站内短信" target="_blank"> </a> <a href="http://gigix.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=gigix" title="关注作者" target="_blank"> </a> <a href="http://www.javaeye.com/topic/90347?page=2#313548" title="gigix回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347?page=2#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347?page=2#" title="差" target="_blank">0</a> 请登录后投票</p>
<p><a href="http://www.javaeye.com/topic/90347?page=1" target="_blank">« 上一页</a> <a href="http://www.javaeye.com/topic/90347?page=1" target="_blank">1</a> 2 <a href="http://www.javaeye.com/topic/90347?page=3" target="_blank">3</a> <a href="http://www.javaeye.com/topic/90347?page=4" target="_blank">4</a> <a href="http://www.javaeye.com/topic/90347?page=5" target="_blank">5</a> <a href="http://www.javaeye.com/topic/90347?page=3" target="_blank">下一页 »</a>
<a href="http://www.javaeye.com/forums" target="_blank">论坛首页</a> → <a href="http://www.javaeye.com/forums/board/develop" target="_blank">软件开发和项目管理版</a> → <a href="http://www.javaeye.com/forums/tag/test" target="_blank">软件测试</a>
跳转论坛:Java编程和Java企业应用 Web前端技术 移动编程和手机应用开发 C/C++编程 Ruby编程 Python编程 PHP编程 Flash编程和RIA Microsoft .Net 综合技术 软件开发和项目管理 行业应用 入门讨论 招聘求职 海阔天空</p>
<ul>
<li><a href="http://www.javaeye.com/" target="_blank">首页</a></li>
<li><a href="http://www.javaeye.com/news" target="_blank">新闻</a></li>
<li><a href="http://www.javaeye.com/forums" target="_blank">论坛</a></li>
<li><a href="http://www.javaeye.com/ask" target="_blank">问答</a></li>
<li><a href="http://www.javaeye.com/wiki" target="_blank">专栏</a></li>
<li><a href="http://www.javaeye.com/blogs" target="_blank">博客</a></li>
<li><a href="http://www.javaeye.com/groups" target="_blank">圈子</a></li>
<li><a href="http://www.javaeye.com/job" target="_blank">招聘</a></li>
<li><a href="http://www.javaeye.com/index/service" target="_blank">服务</a></li>
<li><a href="http://www.javaeye.com/search" target="_blank">搜索</a></li>
<li><a href="http://java.javaeye.com/" target="_blank">Java</a></li>
<li><a href="http://webapp.javaeye.com/" target="_blank">Web</a></li>
<li><a href="http://ruby.javaeye.com/" target="_blank">Ruby</a></li>
<li><a href="http://python.javaeye.com/" target="_blank">Python</a></li>
<li><a href="http://agile.javaeye.com/" target="_blank">敏捷</a></li>
<li><a href="http://mysql.javaeye.com/" target="_blank">MySQL</a></li>
<li><a href="http://runqian.javaeye.com/" target="_blank">润亁报表</a></li>
<li><a href="http://book.javaeye.com/" target="_blank">图书</a></li>
<li><a href="http://www.javaeye.com/index/service" target="_blank">广告服务</a></li>
<li><a href="http://webmaster.javaeye.com/" target="_blank">JavaEye黑板报</a></li>
<li><a href="http://www.javaeye.com/index/aboutus" target="_blank">关于我们</a></li>
<li><a href="http://www.javaeye.com/index/contactus" target="_blank">联系我们</a></li>
<li><a href="http://www.javaeye.com/index/friend_links" target="_blank">友情链接</a></li>
</ul>
<p>© 2003-2010 JavaEye.com. 上海炯耐计算机软件有限公司版权所有 [ <a href="http://www.miibeian.gov.cn/" target="_blank">沪ICP备05023328号</a> ] <img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li></span><span class="breadcrumb"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li><li><a href="/categories/Java&J2EE/Java_总结类/">Java_总结类</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java&J2EE/" class="label label-primary">Java&J2EE</a><a href="/tags/Java_总结类/" class="label label-success">Java_总结类</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:43"datetime="2014-03-07 09:54:43"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--我的重构哪里不规范？讨论第2页/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JavaJ2EE-Java_总结类--我的重构哪里不规范？讨论第2页" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--我的重构哪里不规范？-软件测试/">我的重构哪里不规范？ </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:43.000Z"> <a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--我的重构哪里不规范？-软件测试/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-">我的重构哪里不规范？ - 软件测试</h1>
<p><a href="http://www.javaeye.com/login" title="登录" target="_blank">您还未登录 !</a><a href="http://www.javaeye.com/all" target="_blank">我的应用</a><a href="http://www.javaeye.com/login" target="_blank">登录</a><a href="http://www.javaeye.com/signup" target="_blank">注册</a></p>
<p><a href="http://www.javaeye.com/" target="_blank"><img src="&quot;JavaEye-最棒的软件开发交流社区&quot;" alt="JavaEye-最棒的软件开发交流社区"></a></p>
<p><a href="http://www.javaeye.com/forums" target="_blank">论坛首页</a> →<a href="http://www.javaeye.com/forums/board/develop" target="_blank">软件开发和项目管理版</a> →<a href="http://www.javaeye.com/forums/tag/test" target="_blank">软件测试</a> →</p>
<h1 id="-">我的重构哪里不规范？</h1>
<p><a href="http://www.javaeye.com/forums/board/develop" target="_blank">全部</a><a href="http://www.javaeye.com/forums/tag/project-manage" target="_blank">项目管理</a><a href="http://www.javaeye.com/forums/tag/agile" target="_blank">敏捷开发</a><a href="http://www.javaeye.com/forums/tag/test" target="_blank">软件测试</a><a href="http://www.javaeye.com/forums/tag/configuration" target="_blank">配置管理</a><a href="http://www.javaeye.com/forums/tag/UseCase" target="_blank">UseCase</a><a href="http://www.javaeye.com/forums/tag/UML" target="_blank">UML</a><a href="http://www.javaeye.com/forums/tag/unitest" target="_blank">单元测试</a><a href="http://www.javaeye.com/forums/tag/XP" target="_blank">XP</a><a href="http://www.javaeye.com/forums/tag/TDD" target="_blank">TDD</a><a href="http://www.javaeye.com/forums/tag/UP" target="_blank">UP</a><a href="http://www.javaeye.com/forums/tag/CMM" target="_blank">CMM</a>
« 上一页 1 <a href="http://www.javaeye.com/topic/90347?page=2" target="_blank">2</a> <a href="http://www.javaeye.com/topic/90347?page=3" target="_blank">3</a> <a href="http://www.javaeye.com/topic/90347?page=4" target="_blank">4</a> <a href="http://www.javaeye.com/topic/90347?page=5" target="_blank">5</a> <a href="http://www.javaeye.com/topic/90347?page=2" target="_blank">下一页 »</a></p>
<p>浏览 17393 次 锁定老贴子 <a href="">主题：我的重构哪里不规范？</a></p>
<p>精华帖 (3) :: 良好帖 (0) :: 新手帖 (0) :: 隐藏帖 (1) 作者 正文 * ojava</p>
<ul>
<li>等级: 初级会员</li>
<li><a href="http://ojava.javaeye.com/" target="_blank"><img src="&quot;ojava的博客: ojava&quot;" alt="ojava的博客"></a></li>
<li>文章: 7</li>
<li>积分: 33</li>
<li>来自: 烟台</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p><a href="http://www.javaeye.com/topic/90347#" target="_blank">&lt;</a><a href="http://www.javaeye.com/topic/90347#" target="_blank">&gt;</a>猎头职位:   <a href="http://www.javaeye.com/jobs/712" target="_blank">北京:  Java搜索工程师</a></p>
<p>相关文章: <a href="http://www.javaeye.com/topic/90347#" title="关闭" target="_blank"> </a></p>
<ul>
<li><a href="http://www.javaeye.com/topic/416297" title="你们的项目经常重构代码吗？" target="_blank">你们的项目经常重构代码吗？</a></li>
<li><a href="http://www.javaeye.com/topic/460125" title="重构的几大重要特点" target="_blank">重构的几大重要特点</a></li>
<li><a href="http://www.javaeye.com/topic/6426" title="讨论：重构的前提是不是 TDD" target="_blank">讨论：重构的前提是不是 TDD</a>
推荐圈子: <a href="http://mars.group.javaeye.com/" target="_blank">火星常驻JE办事处</a>
<a href="http://www.javaeye.com/wiki/topic/90347" target="_blank">更多相关推荐</a>
在项目中，由于没有经过大脑思考，结果产生了流水账形式的代码。
流水账代码：就是根据是详细设计书把整个业务的流程顺序完成到一个类的一个方法中，
而没有根据功能划分成若干个小的方法。
这种流水账式的代码非常不容易测试，因为详细设计中已经将设计细化到对字符串如何操作了，
所以从这样的设计书的高度看业务，简直就是乱七八糟！
所幸，还有重构这个工具，就重构，发现很多的局部变量，因为在多处改变值，而且后续还要使用，
所以只能把这种变量，提到类变量的高度，好多啊。
这样一来，
1。如果要用junit测试，还需要再给相应的提出来的变量加上set,get方法。
2。因为重构出来的方法都是private的，所以测试的时候还要用反射的方法。
上面这两种情况可以避免吗？这是一个问题。
还有一个对自己的警告：小心费力不讨好！
声明：JavaEye文章版权属于作者，受法律保护。没有作者书面许可不得转载。</li>
</ul>
<p>推荐链接</p>
<ul>
<li><a href="http://www.javaeye.com/clicks/373" target="_blank"><img src="&quot;adobe&quot;" alt="adobe"></a> <a href="http://www.javaeye.com/topic/90347#" target="_blank">返回顶楼</a> <a href="http://ojava.javaeye.com/" title="浏览作者的博客" target="_blank"> </a><a href="http://ojava.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a><a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=ojava" title="发送站内短信" target="_blank"> </a><a href="http://ojava.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a><a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=ojava" title="关注作者" target="_blank"> </a> * Xiaohanne</li>
<li>等级: <img src="&quot;四星会员&quot;" alt="四星会员"></li>
<li><a href="http://xiaohanne.javaeye.com/" target="_blank"><img src="&quot;Xiaohanne的博客: Xiaohanne&quot;" alt="Xiaohanne的博客"></a></li>
<li>文章: 183</li>
<li>积分: 389</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>面向接口不要面向实现，谢谢 <a href="http://www.javaeye.com/topic/90347#" target="_blank">返回顶楼</a> <a href="http://xiaohanne.javaeye.com/" title="浏览作者的博客" target="_blank"> </a><a href="http://xiaohanne.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a><a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=Xiaohanne" title="发送站内短信" target="_blank"> </a><a href="http://xiaohanne.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a><a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=Xiaohanne" title="关注作者" target="_blank"> </a><a href="http://www.javaeye.com/topic/90347#312955" title="Xiaohanne回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347#" title="差" target="_blank">0</a> 请登录后投票 * 抛出异常的爱</p>
<ul>
<li>等级: <img src="&quot;五钻会员&quot;" alt="五钻会员"></li>
<li><a href="http://loveexception.javaeye.com/" target="_blank"><img src="&quot;抛出异常的爱的博客: 设计可以拯救国家&quot;" alt="抛出异常的爱的博客"></a></li>
<li>文章: 12050</li>
<li>积分: 2782</li>
<li>来自: 北京</li>
<li><a href="http://www.javaeye.com/topic/743366" title="我正在看《纪念coding之路.祝福所有的coder都可以实现自己的梦想》" target="_blank"><img src="" alt=""></a>
  发表时间：2007-06-15  </li>
</ul>
<p><strong>ojava 写道：</strong>
在项目中，由于没有经过大脑思考，结果产生了流水账形式的代码。
流水账代码：就是根据是详细设计书把整个业务的流程顺序完成到一个类的一个方法中，
而没有根据功能划分成若干个小的方法。
这种新式的代码非常不容易测试，因为详细设计中已经将设计细化到对字符串如何操作了，
所以从这样的设计书的高度看业务，简直就是乱七八糟！
所幸，还有重构这个工具，就重构，发现很多的局部变量，因为在多处改变值，而且后续还要使用，
所以只能把这种变量，提到类变量的高度，好多啊。
这样一来，
1。如果要用junit测试，还需要再给相应的提出来的变量加上set,get方法。
2。因为重构出来的方法都是private的，所以测试的时候还要用反射的方法。
上面这两种情况可以避免吗？这是一个问题。
还有一个对自己的警告：小心费力不讨好！
无设计，无定义（对每个类与方法），无规则，的重构。。。叶公好龙 <a href="http://www.javaeye.com/topic/90347#" target="_blank">返回顶楼</a> <a href="http://loveexception.javaeye.com/" title="浏览作者的博客" target="_blank"> </a><a href="http://loveexception.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a><a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E7%9A%84%E7%88%B1" title="发送站内短信" target="_blank"> </a><a href="http://loveexception.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a><a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E7%9A%84%E7%88%B1" title="关注作者" target="_blank"> </a><a href="http://www.javaeye.com/topic/90347#312962" title="抛出异常的爱回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347#" title="差" target="_blank">0</a> 请登录后投票 * ojava</p>
<ul>
<li>等级: 初级会员</li>
<li><a href="http://ojava.javaeye.com/" target="_blank"><img src="&quot;ojava的博客: ojava&quot;" alt="ojava的博客"></a></li>
<li>文章: 7</li>
<li>积分: 33</li>
<li>来自: 烟台</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>无设计，无定义（对每个类与方法），无规则，的重构。。。叶公好龙
这句话，一针见血！！！
刚学习测试，准备在项目中实践，结果发现自己的代码根本没有办法测试，因为这个巨大的方法太大，看不清要实现的业务是什么！
头脑中就是因为缺少测试的思想，才导致出现这样的问题，果然没有思想是不行的，亡羊补牢，现在晚了吗？ <a href="http://www.javaeye.com/topic/90347#" target="_blank">返回顶楼</a> <a href="http://ojava.javaeye.com/" title="浏览作者的博客" target="_blank"> </a><a href="http://ojava.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a><a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=ojava" title="发送站内短信" target="_blank"> </a><a href="http://ojava.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a><a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=ojava" title="关注作者" target="_blank"> </a><a href="http://www.javaeye.com/topic/90347#312971" title="ojava回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347#" title="差" target="_blank">0</a> 请登录后投票 * gigix</p>
<ul>
<li>等级: <img src="&quot;资深会员&quot;" alt="资深会员">资深会员</li>
<li><a href="http://gigix.javaeye.com/" target="_blank"><img src="&quot;gigix的博客: 透明之眼&quot;" alt="gigix的博客"></a></li>
<li>文章: 4810</li>
<li>积分: 2991</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>First of all you should have tests for you original method.
During your refactoring those test should always pass.
So you don&#39;t have to test new (and quite possible private) methods/fields you extract out. <a href="http://www.javaeye.com/topic/90347#" target="_blank">返回顶楼</a> <a href="http://gigix.javaeye.com/" title="浏览作者的博客" target="_blank"> </a><a href="http://gigix.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a><a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=gigix" title="发送站内短信" target="_blank"> </a><a href="http://gigix.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a><a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=gigix" title="关注作者" target="_blank"> </a><a href="http://www.javaeye.com/topic/90347#312973" title="gigix回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347#" title="差" target="_blank">1</a> 请登录后投票 * 抛出异常的爱</p>
<ul>
<li>等级: <img src="&quot;五钻会员&quot;" alt="五钻会员"></li>
<li><a href="http://loveexception.javaeye.com/" target="_blank"><img src="&quot;抛出异常的爱的博客: 设计可以拯救国家&quot;" alt="抛出异常的爱的博客"></a></li>
<li>文章: 12050</li>
<li>积分: 2782</li>
<li>来自: 北京</li>
<li><a href="http://www.javaeye.com/topic/743366" title="我正在看《纪念coding之路.祝福所有的coder都可以实现自己的梦想》" target="_blank"><img src="" alt=""></a>
  发表时间：2007-06-15  </li>
</ul>
<p>gigix 写道</p>
<p>First of all you should have tests for you original method.
During your refactoring those test should always pass.
So you don&#39;t have to test new (and quite possible private) methods/fields you extract out.
是的，不用再加测试了，先写着，
不过对于拿不准的，写出来出错看不出来，找不到错的
还是要写中间测试帮助编码
PS:如果要测试中间的private方法，可以写在主函数中一个
public XXX (){ return 你要测试的方法 ；}
PS：天啊。。。变的够快。。。认不出来了 <a href="http://www.javaeye.com/topic/90347#" target="_blank">返回顶楼</a> <a href="http://loveexception.javaeye.com/" title="浏览作者的博客" target="_blank"> </a><a href="http://loveexception.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a><a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E7%9A%84%E7%88%B1" title="发送站内短信" target="_blank"> </a><a href="http://loveexception.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a><a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E7%9A%84%E7%88%B1" title="关注作者" target="_blank"> </a><a href="http://www.javaeye.com/topic/90347#312979" title="抛出异常的爱回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347#" title="差" target="_blank">0</a> 请登录后投票 * gigix</p>
<ul>
<li>等级: <img src="&quot;资深会员&quot;" alt="资深会员">资深会员</li>
<li><a href="http://gigix.javaeye.com/" target="_blank"><img src="&quot;gigix的博客: 透明之眼&quot;" alt="gigix的博客"></a></li>
<li>文章: 4810</li>
<li>积分: 2991</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>抛出异常的爱 写道</p>
<p>不过对于拿不准的，写出来出错看不出来，找不到错的
还是要写中间测试帮助编码
nope...
if you make any mistake during refactoring and break any test,
and if you can&#39;t fix it immediately,
you should revert to previous successful step immediately.
(that&#39;s why you should check in as frequently as you can.) <a href="http://www.javaeye.com/topic/90347#" target="_blank">返回顶楼</a> <a href="http://gigix.javaeye.com/" title="浏览作者的博客" target="_blank"> </a><a href="http://gigix.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a><a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=gigix" title="发送站内短信" target="_blank"> </a><a href="http://gigix.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a><a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=gigix" title="关注作者" target="_blank"> </a><a href="http://www.javaeye.com/topic/90347#313053" title="gigix回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347#" title="差" target="_blank">0</a> 请登录后投票 * 抛出异常的爱</p>
<ul>
<li>等级: <img src="&quot;五钻会员&quot;" alt="五钻会员"></li>
<li><a href="http://loveexception.javaeye.com/" target="_blank"><img src="&quot;抛出异常的爱的博客: 设计可以拯救国家&quot;" alt="抛出异常的爱的博客"></a></li>
<li>文章: 12050</li>
<li>积分: 2782</li>
<li>来自: 北京</li>
<li><a href="http://www.javaeye.com/topic/743366" title="我正在看《纪念coding之路.祝福所有的coder都可以实现自己的梦想》" target="_blank"><img src="" alt=""></a>
  发表时间：2007-06-15  </li>
</ul>
<p>gigix 写道</p>
<p>抛出异常的爱 写道</p>
<p>不过对于拿不准的，写出来出错看不出来，找不到错的
还是要写中间测试帮助编码
nope...
if you make any mistake during refactoring and break any test,
and if you can&#39;t fix it immediately,
you should revert to previous successful step immediately.
(that&#39;s why you should check in as frequently as you can.)
那么不动老的代码。。。
写新方法，新的测试，
所有需要的方法都写完了（小步前进？）
再一次把老的代码删去
用新的代码顶上？ <a href="http://www.javaeye.com/topic/90347#" target="_blank">返回顶楼</a> <a href="http://loveexception.javaeye.com/" title="浏览作者的博客" target="_blank"> </a><a href="http://loveexception.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a><a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E7%9A%84%E7%88%B1" title="发送站内短信" target="_blank"> </a><a href="http://loveexception.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a><a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E7%9A%84%E7%88%B1" title="关注作者" target="_blank"> </a><a href="http://www.javaeye.com/topic/90347#313088" title="抛出异常的爱回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347#" title="差" target="_blank">0</a> 请登录后投票 * gigix</p>
<ul>
<li>等级: <img src="&quot;资深会员&quot;" alt="资深会员">资深会员</li>
<li><a href="http://gigix.javaeye.com/" target="_blank"><img src="&quot;gigix的博客: 透明之眼&quot;" alt="gigix的博客"></a></li>
<li>文章: 4810</li>
<li>积分: 2991</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>抛出异常的爱 写道</p>
<p>gigix 写道</p>
<p>抛出异常的爱 写道</p>
<p>不过对于拿不准的，写出来出错看不出来，找不到错的
还是要写中间测试帮助编码
nope...
if you make any mistake during refactoring and break any test,
and if you can&#39;t fix it immediately,
you should revert to previous successful step immediately.
(that&#39;s why you should check in as frequently as you can.)
那么不动老的代码。。。
写新方法，新的测试，
所有需要的方法都写完了
再一次把老的代码删去
用新的代码顶上？
please man...
what is &quot;refactoring&quot;?
answer: to improve the internal structure of code, WITHOUT CHANGING ITS EXTERNAL BEHAVIOR
when you refactoring, you move forward by SMALL STEPS. you remove the bad smells little by little, and always keep all tests passing. <a href="http://www.javaeye.com/topic/90347#" target="_blank">返回顶楼</a> <a href="http://gigix.javaeye.com/" title="浏览作者的博客" target="_blank"> </a><a href="http://gigix.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a><a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=gigix" title="发送站内短信" target="_blank"> </a><a href="http://gigix.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a><a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=gigix" title="关注作者" target="_blank"> </a><a href="http://www.javaeye.com/topic/90347#313092" title="gigix回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347#" title="差" target="_blank">0</a> 请登录后投票 * ojava</p>
<ul>
<li>等级: 初级会员</li>
<li><a href="http://ojava.javaeye.com/" target="_blank"><img src="&quot;ojava的博客: ojava&quot;" alt="ojava的博客"></a></li>
<li>文章: 7</li>
<li>积分: 33</li>
<li>来自: 烟台</li>
<li><img src="" alt="">
  发表时间：2007-06-15  </li>
</ul>
<p>公司新加代码规范条目：所定义的方法尽量不要超过100行。
某一方面来说，可以避免这种流水账式的代码吧！
并且强制我们进行Xiaohanne所说的面向接口不要面向实现的编程。 <a href="http://www.javaeye.com/topic/90347#" target="_blank">返回顶楼</a> <a href="http://ojava.javaeye.com/" title="浏览作者的博客" target="_blank"> </a><a href="http://ojava.javaeye.com/blog/profile" title="浏览作者资料" target="_blank"> </a><a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=ojava" title="发送站内短信" target="_blank"> </a><a href="http://ojava.javaeye.com/blog/guest_book" title="给作者留言" target="_blank"> </a><a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=ojava" title="关注作者" target="_blank"> </a><a href="http://www.javaeye.com/topic/90347#313239" title="ojava回帖:我的重构哪里不规范？" target="_blank">回帖地址</a></p>
<p><a href="http://www.javaeye.com/topic/90347#" title="好" target="_blank">0</a> <a href="http://www.javaeye.com/topic/90347#" title="差" target="_blank">0</a> 请登录后投票</p>
<p>« 上一页 1 <a href="http://www.javaeye.com/topic/90347?page=2" target="_blank">2</a> <a href="http://www.javaeye.com/topic/90347?page=3" target="_blank">3</a> <a href="http://www.javaeye.com/topic/90347?page=4" target="_blank">4</a> <a href="http://www.javaeye.com/topic/90347?page=5" target="_blank">5</a> <a href="http://www.javaeye.com/topic/90347?page=2" target="_blank">下一页 »</a>
<a href="http://www.javaeye.com/forums" target="_blank">论坛首页</a> →<a href="http://www.javaeye.com/forums/board/develop" target="_blank">软件开发和项目管理版</a>→ <a href="http://www.javaeye.com/forums/tag/test" target="_blank">软件测试</a>
跳转论坛:Java编程和Java企业应用Web前端技术 移动编程和手机应用开发C/C++编程Ruby编程Python编程 PHP编程Flash编程和RIA Microsoft .Net综合技术软件开发和项目管理行业应用 入门讨论招聘求职海阔天空</p>
<ul>
<li><a href="http://www.javaeye.com/" target="_blank">首页</a></li>
<li><a href="http://www.javaeye.com/news" target="_blank">新闻</a></li>
<li><a href="http://www.javaeye.com/forums" target="_blank">论坛</a></li>
<li><a href="http://www.javaeye.com/ask" target="_blank">问答</a></li>
<li><a href="http://www.javaeye.com/wiki" target="_blank">专栏</a></li>
<li><a href="http://www.javaeye.com/blogs" target="_blank">博客</a></li>
<li><a href="http://www.javaeye.com/groups" target="_blank">圈子</a></li>
<li><a href="http://www.javaeye.com/job" target="_blank">招聘</a></li>
<li><a href="http://www.javaeye.com/index/service" target="_blank">服务</a></li>
<li><a href="http://www.javaeye.com/search" target="_blank">搜索</a></li>
<li><a href="http://java.javaeye.com/" target="_blank">Java</a></li>
<li><a href="http://webapp.javaeye.com/" target="_blank">Web</a></li>
<li><a href="http://ruby.javaeye.com/" target="_blank">Ruby</a></li>
<li><a href="http://python.javaeye.com/" target="_blank">Python</a></li>
<li><a href="http://agile.javaeye.com/" target="_blank">敏捷</a></li>
<li><a href="http://mysql.javaeye.com/" target="_blank">MySQL</a></li>
<li><a href="http://runqian.javaeye.com/" target="_blank">润亁报表</a></li>
<li><a href="http://book.javaeye.com/" target="_blank">图书</a></li>
<li><a href="http://www.javaeye.com/index/service" target="_blank">广告服务</a></li>
<li><a href="http://webmaster.javaeye.com/" target="_blank">JavaEye黑板报</a></li>
<li><a href="http://www.javaeye.com/index/aboutus" target="_blank">关于我们</a></li>
<li><a href="http://www.javaeye.com/index/contactus" target="_blank">联系我们</a></li>
<li><a href="http://www.javaeye.com/index/friend_links" target="_blank">友情链接</a></li>
</ul>
<p>© 2003-2010 JavaEye.com. 上海炯耐计算机软件有限公司版权所有 [ <a href="http://www.miibeian.gov.cn/" target="_blank">沪ICP备05023328号</a> ]  <img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li></span><span class="breadcrumb"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li><li><a href="/categories/Java&J2EE/Java_总结类/">Java_总结类</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java&J2EE/" class="label label-primary">Java&J2EE</a><a href="/tags/Java_总结类/" class="label label-success">Java_总结类</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:43"datetime="2014-03-07 09:54:43"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--我的重构哪里不规范？-软件测试/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JavaJ2EE-Java_总结类--我的重构哪里不规范？-软件测试" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--对遗留系统组织重构项目-透明思考CSDN/">对遗留系统组织重构项目 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:43.000Z"> <a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--对遗留系统组织重构项目-透明思考CSDN/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-csdn">对遗留系统组织重构项目 - 透明思考@CSDN</h1>
<h1 id="-http-blog-csdn-net-gigix-http-blog-csdn-net-gigix-"><a href="http://blog.csdn.net/gigix" target="_blank"><a href="http://blog.csdn.net/gigix">http://blog.csdn.net/gigix</a></a></h1>
<h2 id="-">思考着的程序员，程序员的思考</h2>
<ul>
<li><a href="http://hi.csdn.net/space-notice.html" target="_blank">条新通知</a></li>
<li><a href="http://passport.csdn.net/UserLogin.aspx" target="_blank">登录</a></li>
<li><a href="http://passport.csdn.net/CSDNUserRegister.aspx" target="_blank">注册</a></li>
<li><a href="http://hi.csdn.net/" target="_blank">欢迎</a></li>
<li><a href="http://writeblog.csdn.net/Signout.aspx" target="_blank">退出</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">我的博客</a></li>
<li><a href="http://writeblog.csdn.net/configure.aspx" target="_blank">配置</a></li>
<li><a href="http://writeblog.csdn.net/PostEdit.aspx" target="_blank">写文章</a></li>
<li><a href="http://writeblog.csdn.net/PostList.aspx" target="_blank">文章管理</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">博客首页</a></li>
</ul>
<p>*</p>
<ul>
<li><p>全站 当前博客
*</p>
</li>
<li><p><a href="http://hi.csdn.net/gigix" target="_blank">空间</a></p>
</li>
<li><a href="http://blog.csdn.net/gigix" target="_blank">博客</a></li>
<li><a href="http://hi.csdn.net/!s/friend/list/gigix" target="_blank">好友</a></li>
<li><a href="http://hi.csdn.net/!s/album/list/gigix" target="_blank">相册</a></li>
<li><a href="http://hi.csdn.net/!s/wall/to/gigix" target="_blank">留言</a></li>
</ul>
<p>用户操作<a href="http://hi.csdn.net/!s/wall/to/gigix" target="_blank">[留言]</a>  <a href="http://hi.csdn.net/!s/msg/to/gigix" target="_blank">[发消息]</a>  <a href="http://hi.csdn.net/!s/friend/add/gigix" target="_blank">[加为好友]</a> 订阅我的博客<a href="http://feeds.feedsky.com/csdn.net/gigix" target="_blank"><img src="" alt="XML聚合"></a>   <a href="http://feeds.feedsky.com/csdn.net/gigix" target="_blank"><img src="" alt="FeedSky"></a><a href="http://www.xianguo.com/subscribe.php?url=http://feeds.feedsky.com/csdn.net/gigix" target="_blank"><img src="" alt="订阅到鲜果"></a><a href="http://fusion.google.com/add?feedurl=http://feeds.feedsky.com/csdn.net/gigix" target="_blank"><img src="" alt="订阅到Google"></a><a href="http://www.zhuaxia.com/add_channel.php?url=http://feeds.feedsky.com/csdn.net/gigix" target="_blank"><img src="" alt="订阅到抓虾"></a><a href="http://writeblog.csdn.net/configure.aspx" target="_blank">[编辑]</a>gigix的公告<a href="http://writeblog.csdn.net/EditCategories.aspx?catID=1" target="_blank">[编辑]</a>文章分类* <a href="http://blog.csdn.net/gigix/category/9134.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/gigix/category/9134.aspx" target="_blank">《软件工艺》</a></p>
<ul>
<li><a href="http://blog.csdn.net/gigix/category/9135.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/gigix/category/9135.aspx" target="_blank">技术文章</a></li>
<li><a href="http://blog.csdn.net/gigix/category/9136.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/gigix/category/9136.aspx" target="_blank">人物访谈</a></li>
<li><a href="http://blog.csdn.net/gigix/category/9137.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/gigix/category/9137.aspx" target="_blank">散文随笔</a></li>
<li><a href="http://blog.csdn.net/gigix/category/9138.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/gigix/category/9138.aspx" target="_blank">剃刀书评</a></li>
<li><a href="http://blog.csdn.net/gigix/category/9139.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/gigix/category/9139.aspx" target="_blank">新闻评论</a><a href="http://writeblog.csdn.net/EditLinks.aspx" target="_blank">[编辑]</a>测试<a href="http://www.almaer.com/blog/archives/000639.html" target="_blank">Arrays.asList(&quot;Rod&quot;, &quot;Jane&quot;, &quot;Freddy&quot;);</a><a href="http://www.almaer.com/blog/mt-tb.cgi/639" target="_blank">(RSS)</a>存档* <a href="http://blog.csdn.net/gigix/archive/2010/03.aspx" target="_blank">2010年03月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2008/04.aspx" target="_blank">2008年04月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2008/03.aspx" target="_blank">2008年03月(2)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2008/02.aspx" target="_blank">2008年02月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2007/12.aspx" target="_blank">2007年12月(3)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2007/11.aspx" target="_blank">2007年11月(4)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2007/10.aspx" target="_blank">2007年10月(4)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2007/09.aspx" target="_blank">2007年09月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2007/08.aspx" target="_blank">2007年08月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2007/07.aspx" target="_blank">2007年07月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2007/06.aspx" target="_blank">2007年06月(3)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2007/05.aspx" target="_blank">2007年05月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2007/04.aspx" target="_blank">2007年04月(2)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2007/03.aspx" target="_blank">2007年03月(6)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2007/02.aspx" target="_blank">2007年02月(4)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2007/01.aspx" target="_blank">2007年01月(2)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2006/10.aspx" target="_blank">2006年10月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2006/09.aspx" target="_blank">2006年09月(2)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2006/08.aspx" target="_blank">2006年08月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2006/07.aspx" target="_blank">2006年07月(5)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2006/06.aspx" target="_blank">2006年06月(10)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2006/05.aspx" target="_blank">2006年05月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2006/04.aspx" target="_blank">2006年04月(2)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2006/03.aspx" target="_blank">2006年03月(12)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2006/02.aspx" target="_blank">2006年02月(9)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2006/01.aspx" target="_blank">2006年01月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2005/11.aspx" target="_blank">2005年11月(4)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2005/09.aspx" target="_blank">2005年09月(7)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2005/08.aspx" target="_blank">2005年08月(5)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2005/06.aspx" target="_blank">2005年06月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2005/02.aspx" target="_blank">2005年02月(2)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2005/01.aspx" target="_blank">2005年01月(2)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2004/08.aspx" target="_blank">2004年08月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2004/07.aspx" target="_blank">2004年07月(2)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2004/06.aspx" target="_blank">2004年06月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2004/05.aspx" target="_blank">2004年05月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2004/04.aspx" target="_blank">2004年04月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2004/03.aspx" target="_blank">2004年03月(4)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2004/02.aspx" target="_blank">2004年02月(3)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2003/12.aspx" target="_blank">2003年12月(7)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2003/11.aspx" target="_blank">2003年11月(8)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2003/10.aspx" target="_blank">2003年10月(2)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2003/09.aspx" target="_blank">2003年09月(9)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2003/08.aspx" target="_blank">2003年08月(9)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2003/07.aspx" target="_blank">2003年07月(7)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2003/06.aspx" target="_blank">2003年06月(14)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2003/05.aspx" target="_blank">2003年05月(15)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2003/04.aspx" target="_blank">2003年04月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2003/03.aspx" target="_blank">2003年03月(3)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2003/02.aspx" target="_blank">2003年02月(5)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2003/01.aspx" target="_blank">2003年01月(2)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2002/12.aspx" target="_blank">2002年12月(2)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2002/11.aspx" target="_blank">2002年11月(3)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2002/10.aspx" target="_blank">2002年10月(3)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2002/09.aspx" target="_blank">2002年09月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2002/08.aspx" target="_blank">2002年08月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2002/07.aspx" target="_blank">2002年07月(3)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2002/06.aspx" target="_blank">2002年06月(2)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2002/05.aspx" target="_blank">2002年05月(3)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2002/04.aspx" target="_blank">2002年04月(41)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2002/03.aspx" target="_blank">2002年03月(102)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2002/02.aspx" target="_blank">2002年02月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2001/11.aspx" target="_blank">2001年11月(1)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2001/10.aspx" target="_blank">2001年10月(4)</a></li>
<li><a href="http://blog.csdn.net/gigix/archive/2001/08.aspx" target="_blank">2001年08月(1)</a><h3 id="-http-forum-csdn-net-slist-blogsupport-http-blog-csdn-net-blogdevteam-">公告： <a href="http://forum.csdn.net/SList/blogSupport" target="_blank">[意见反馈]</a><a href="http://blog.csdn.net/blogdevteam" target="_blank">[官方博客]</a></h3>
</li>
</ul>
<h1 id="-"><img src="" alt="原创">  对遗留系统组织重构项目 <a href="&quot;收藏到我的网摘中，并分享给我的朋友&quot;">收藏</a></h1>
<p>很多IT组织都面临一个难题：老系统的维护、升级越来越难做。特别是那些价值高、生命周期长、规模大的核心业务系统，越到后来，要修复一个缺陷或者新增一个功能就需要越大的工作量。这是为什么呢？</p>
<p>软 件的质量体现在两方面：商业方面的质量，以及技术方面的质量。从商业的角度看来，“成功的软件”意味着它所创造的价值超出在它身上付出的代价。从技术的角 度看来，“成功的软件”意味着所有测试都通过、代码结构良好、并且容易理解和维护。很多商业上非常成功的软件系统忽视了技术方面的质量，所以尽管它们仍然 在为IT组织创造价值，但对它们的维护和升级越来越困难。最终技术质量的欠缺会反过来阻碍软件系统创造更大的商业价值。</p>
<p>为了保留并最大化软件资产的价值，适应新的需求变更，老系统总会面对维护和升级。当维护和升级的困难达到一定程度时，很多IT组织就会决定投入一整块资源和时间来改善这些老系统的技术质量，以便将来的维护升级能顺利进行。这样的做法通常被称为“重构项目”。</p>
<p>根据我们的经验，很多重构项目在目标管理、任务划分和质量保证等方面存在比较严重的问题，这些问题导致重构项目不能充分发挥价值。</p>
<h3 id="-">目标管理</h3>
<p>很多重构项目缺乏清晰的、可测试的目标。以ThoughtWorks参 与过的一个重构项目为例，该项目最初的目标只有“提高代码可维护性”等感性的描述，缺乏量化指标。目标不清晰的直接结果是，进行重构的程序员难以明确每一 步的重构工作应该做到什么程度，导致系统各个部分的优化程度不一致，一些部分在经过重构之后仍然质量低下，而且难以确定完成重构的时间。</p>
<p>和 新功能开发一样，重构也同样应该是可验收的，并且验收过程应该尽可能自动化。除了确保其功能性行为仍然保持原样不变之外，重构工作的验收条件还包括单元测 试覆盖率、代码复杂度、编码规范等指标。这些指标的报告应该自动化地生成，及时地展现给所有项目成员，为此我们需要一个持续集成环境来自动、频繁地验证所 有重构工作。</p>
<p>在ThoughtWorks参与的重构项目中，我们采用CruiseControl作为持续集成工具。每次开发者往代码库中签入（check in）代码时，就会触发CruiseControl对项目进行构建，构建的内容包括编译、连接（对于后台部分）、单元测试、测试覆盖率统计、代码复杂度统计、编码规范检查、部署到测试环境、功能测试等。</p>
<p>很多遗留还缺乏有效的项目自动化（automation）机制，使得持续集成环境无法发挥出它最大的价值。在建立持续集成环境的过程中，还应该对项目自动化机制进行改进，确保所有构建工作都能自动完成。于是完整的构建不仅在持续集成服务器上频繁运行，还在每个开发者的工作机器上更加频繁地运行。</p>
<h3 id="-">任务划分</h3>
<p>很多重构项目并没有明确的、细粒度的任务划分，实际进行重构的程序员得到的任务往往是类似“对安全模块进行重构”这样粗粒度、模块级的任务，而项目经理得到的反馈也是类似“可能需要两个月”这样粗略的估计，因此重构项目的进度往往难以控制。</p>
<p>和别的任何开发任务一样，重构任务（以及其他“技术债”类型的任务）也应该符合INVEST的标准：彼此独立（Independent），可讨论（Negotiatable），有价值（Valuable），可估算工作量（Estimatable），足够小（Small），可测试（Testable）。尤其是，它们的工作量应该得到估算，它们应该按照业务价值排列优先级。因为归根到底，重构（以及其他任何开发任务）都归结为“花在代码上的成本”与“对业务创造的价值”之间的权衡。</p>
<p>我们建议按照软件功能模块划分任务，而不区分是新功能开发还是重构。在实际工作中我们发现，对于同样的功能模块，新开发和重构的工作量差别不大。这也意味着重构工作可以被安排在日常开发工作中进行，并统一管理进度。</p>
<h3 id="-">质量保证</h3>
<p>在过去的咨询项目中，我们曾经不止一次见到这样的项目：在缺乏测试覆盖的情况下，程序员们修改旧系统中的代码，试图提高其可读性和可维护性。这些项目往往自称“重构项目”，但实际上它们并不是重构，因为它们缺乏必要的质量保证机制。</p>
<p>按 照定义，重构是对软件内部结构的一种调整，目的是在不改变“软件之可观察行为”的前提下，提高其可理解性，降低其修改成本。如果没有一套可靠的测试机制， 重构就无从谈起，因为你根本就无从知道自己做的调整是否改变了“软件之可观察行为”，甚至可能已经搞得系统不能运行还一无所知。</p>
<p>对 这种没有测试的系统进行重构，就像是编织一张网：先针对一小块功能编写验收测试，在这张“粗网”的保护下再逐渐给代码添加单元测试，有了粗细两层网的保护 再深入重构。随着重构的开展，这张频繁自动化运行的安全网也渐渐铺开。从不断提升的测试覆盖率和不断降低的代码复杂度，我们就能清晰地看到重构的进展情 况。</p>
<p><img src="" alt=""></p>
<p>有 时由于代码质量低劣，程序员们在试图重构时会遇到困难：那些最需要重构的代码也是最难进行单元测试的。通常这是因为模块之间的依赖过于复杂、建立依赖的方 式不佳，而导致无法将这些模块纳入测试。此时需要首先建立验收测试套件，然后用必要的解耦手段调整依赖关系，然后才能对这些模块进行单元测试，之后才能对 它们进行重构。</p>
<h2 id="thoughtworks-">ThoughtWorks能做什么？</h2>
<p>在重构项目的组织、管理、质量保证和实施技术等方面，ThoughtWorks具有无可比拟的能力和经验。我们曾为一些生命周期长至数年、规模大至上百万行代码的遗留系统进行过重构项目，并取得了良好的效果。</p>
<p>我们的咨询师可以和公司中的开发者共同工作，共同解决发现并解决问题。在这个过程中，ThoughtWorks的咨询师会迅速把更佳的工作方式和理念告诉作为客户的开发者，以便在将来没有ThoughtWorks咨询师的情况下，客户也可以坚持那些方发实践，并把它传播给更多的人。</p>
<p>发表于 @ 2008年02月25日　13:30:00 | <a href="http://blog.csdn.net/gigix/archive/2008/02/25/2118896.aspx#FeedBack" title="评论" target="_blank">评论( loading...  )</a>| <a href="http://writeblog.csdn.net/PostEdit.aspx?entryId=2118896" title="编辑" target="_blank">编辑</a>| <a href="mailto:webmaster@csdn.net?subject=Article Report!!!&amp;body=Author:gigixURL:http://blog.csdn.net/ArticleContent.aspx?UserName=gigix&amp;Entryid=2118896">举报</a>| <a href="&quot;收藏到我的网摘中，并分享给我的朋友&quot;">收藏</a></p>
<h3 id="-itechtag-http-blog-csdn-net-gigix-archive-2007-12-17-1943106-aspx-announcement-fluorida-0-0-1-http-blog-csdn-net-gigix-archive-2008-03-06-2154907-aspx-"><a href="http://blog.csdn.net/gigix/archive/2007/12/17/1943106.aspx" target="_blank">旧一篇:用一朵云重建软件开发者的声望——讲述iTechTag网站的故事</a> | <a href="http://blog.csdn.net/gigix/archive/2008/03/06/2154907.aspx" target="_blank">新一篇:Announcement: Fluorida 0.0.1</a></h3>
<p><a href="http://blog.csdn.net/" target="_blank">查看最新精华文章 请访问博客首页</a>相关文章<a href=""></a></p>
<ul>
<li><p>发表评论</p>
</li>
<li><p>表 情：</p>
</li>
<li><p><a href="http://blog.csdn.net/gigix/archive/2008/02/25/2118896.aspx#" target="_blank"><img src="&quot;顶&quot;" alt="顶"></a> <a href="http://blog.csdn.net/gigix/archive/2008/02/25/2118896.aspx#" target="_blank"><img src="&quot;砸&quot;" alt="砸"></a> <a href="http://blog.csdn.net/gigix/archive/2008/02/25/2118896.aspx#" target="_blank"><img src="&quot;棒&quot;" alt="棒"></a> <a href="http://blog.csdn.net/gigix/archive/2008/02/25/2118896.aspx#" target="_blank"><img src="&quot;大笑&quot;" alt="大笑"></a> <a href="http://blog.csdn.net/gigix/archive/2008/02/25/2118896.aspx#" target="_blank"><img src="&quot;愤怒&quot;" alt="愤怒"></a> <a href="http://blog.csdn.net/gigix/archive/2008/02/25/2118896.aspx#" target="_blank"><img src="&quot;大哭&quot;" alt="大哭"></a> <a href="http://blog.csdn.net/gigix/archive/2008/02/25/2118896.aspx#" target="_blank"><img src="&quot;疑问&quot;" alt="疑问"></a> <a href="http://blog.csdn.net/gigix/archive/2008/02/25/2118896.aspx#" target="_blank"><img src="&quot;汗&quot;" alt="汗"></a> <a href="http://blog.csdn.net/gigix/archive/2008/02/25/2118896.aspx#" target="_blank"><img src="&quot;呕吐&quot;" alt="呕吐"></a> <a href="http://blog.csdn.net/gigix/archive/2008/02/25/2118896.aspx#" target="_blank"><img src="&quot;送花&quot;" alt="送花"></a></p>
</li>
<li><p>评论内容：
*</p>
</li>
<li>用 户 名：</li>
<li><p><a href="">登录</a> <a href="http://passport.csdn.net/CSDNUserRegister.aspx" target="_blank">注册</a> 匿名评论</p>
</li>
<li><p>验 证 码：</p>
</li>
<li><a href=""><img src="" alt="验证码"></a> <a href="">重新获得验证码</a></li>
</ul>
<p><em>
</em></p>
<h3 id="-">热门招聘职位<img src="" alt=""></h3>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li></span><span class="breadcrumb"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li><li><a href="/categories/Java&J2EE/Java_总结类/">Java_总结类</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java&J2EE/" class="label label-primary">Java&J2EE</a><a href="/tags/Java_总结类/" class="label label-success">Java_总结类</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:43"datetime="2014-03-07 09:54:43"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JavaJ2EE-Java_总结类--对遗留系统组织重构项目-透明思考CSDN/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JavaJ2EE-Java_总结类--对遗留系统组织重构项目-透明思考CSDN" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/36/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/34/">34</a></li><li><a class="page-number" href="/page/35/">35</a></li><li><a class="page-number" href="/page/36/">36</a></li><li class="active"><li><span class="page-number current">37</span></li><li><a class="page-number" href="/page/38/">38</a></li><li><a class="page-number" href="/page/39/">39</a></li><li><a class="page-number" href="/page/40/">40</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/38/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 16:01:36</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
