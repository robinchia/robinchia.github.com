
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 42 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-gitgithub--Git详解之二：Git基础/">Git详解之二：Git基础</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:43.000Z"> <a href="/2014/02/02/2014-02-02-gitgithub--Git详解之二：Git基础/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="git-git-">Git详解之二：Git基础</h1>
<p>原文：<a href="http://git-scm.com/book/zh" target="_blank">《Pro Git》</a></p>
<p><strong>Git 基础</strong></p>
<p>读完本章你就能上手使用 Git 了（<a href="http://www.jobbole.com/" title="1" target="_blank">伯乐</a>在线注：如果你对Git还不了解，建议从本<a href="http://blog.jobbole.com/25775/" target="_blank">Git</a>系列<a href="http://blog.jobbole.com/25775/" target="_blank">第一篇文章</a>开始阅读）。本章将介绍几个最基本的，也是最常用的 Git 命令，以后绝大多数时间里用到的也就是这几个命令。读完本章，你就能初始化一个新的代码仓库，做一些适当配置；开始或停止跟踪某些文件；暂存或提交某些更 新。我们还会展示如何让 Git 忽略某些文件，或是名称符合特定模式的文件；如何既快且容易地撤消犯下的小错误；如何浏览项目的更新历史，查看某两次更新之间的差异；以及如何从远程仓库 拉数据下来或者推数据上去。</p>
<p><strong>2.1  取得项目的 Git 仓库</strong></p>
<p>有两种取得 Git 项目仓库的方法。第一种是在现存的目录下，通过导入所有文件来创建新的 Git 仓库。第二种是从已有的 Git 仓库克隆出一个新的镜像仓库来。</p>
<p><strong>在工作目录中初始化新仓库</strong></p>
<p>要对现有的某个项目开始用 Git 管理，只需到此项目所在的目录，执行：
1$ git init</p>
<p>初始化后，在当前目录下会出现一个名为 .git 的目录，所有 Git 需要的数据和资源都存放在这个目录中。不过目前，仅仅是按照既有的结构框架初始化好了里边所有的文件和目录，但我们还没有开始跟踪管理项目中的任何一个文件。（在第九章我们会详细说明刚才创建的</p>
<p>.git
 目录中究竟有哪些文件，以及都起些什么作用。）</p>
<p>如果当前目录下有几个文件想要纳入版本控制，需要先用 git add 命令告诉 Git 开始对这些文件进行跟踪，然后提交：
1</p>
<p>2
3$ git add /*.c</p>
<p>$ git add README
$ git commit -m</p>
<p>&#39;initial project version&#39;</p>
<p>稍后我们再逐一解释每条命令的意思。不过现在，你已经得到了一个实际维护着若干文件的 Git 仓库。</p>
<p><strong>从现有仓库克隆</strong></p>
<p>如果想对某个开源项目出一份力，可以先把该项目的 Git 仓库复制一份出来，这就需要用到 git clone 命令。如果你熟悉其他的 VCS 比如 Subversion，你可能已经注意到这里使用的是 clone 而不是 checkout。这是个非常重要的差别，Git 收取的是项目历史的所有数据（每一个文件的每一个版本），服务器上有的数据克隆之后本地也都有了。实际上，即便服务器的磁盘发生故障，用任何一个克隆出来 的客户端都可以重建服务器上的仓库，回到当初克隆时的状态（虽然可能会丢失某些服务器端的挂钩设置，但所有版本的数据仍旧还在，有关细节请参考第四章）。<a href="http://blog.jobbole.com/6492/" title="GitHub如何运作：时间并不决定一切" target="_blank">GitHub</a></p>
<p>克隆仓库的命令格式为 </p>
<p>git clone [url]
。比如，要克隆 Ruby 语言的 Git 代码仓库 Grit，可以用下面的命令：
1$ git clone git:</p>
<p>//github</p>
<p>.com</p>
<p>/schacon/grit</p>
<p>.git</p>
<p>这会在当前目录下创建一个名为“grit”的目录，其中包含一个 </p>
<p>.git
 的目录，用于保存下载下来的所有版本记录，然后从中取出最新版本的文件拷贝。如果进入这个新建的</p>
<p>grit
 目录，你会看到项目中的所有文件已经在里边了，准备好后续的开发和使用。如果希望在克隆的时候，自己定义要新建的项目目录名称，可以在上面的命令末尾指定新的名字：</p>
<p>1$ git clone git:</p>
<p>//github</p>
<p>.com</p>
<p>/schacon/grit</p>
<p>.git mygrit</p>
<p>唯一的差别就是，现在新建的目录成了 mygrit，其他的都和上边的一样。</p>
<p>Git 支持许多数据传输协议。之前的例子使用的是 </p>
<p>git://
 协议，不过你也可以用 </p>
<p>http(s)://
 或者</p>
<p>user@server:/path.git
表示的 SSH 传输协议。我们会在第四章详细介绍所有这些协议在服务器端该如何配置使用，以及各种方式之间的利弊。</p>
<p><strong>2.2  记录每次更新到仓库</strong></p>
<p>现在我们手上已经有了一个真实项目的 Git 仓库，并从这个仓库中取出了所有文件的工作拷贝。接下来，对这些文件作些修改，在完成了一个阶段的目标之后，提交本次更新到仓库。</p>
<p>请记住，工作目录下面的所有文件都不外乎这两种状态：已跟踪或未跟踪。已跟踪的文件是指本来就被纳入版本控制管理的文件，在上次快照中有它们的记 录，工作一段时间后，它们的状态可能是未更新，已修改或者已放入暂存区。而所有其他文件都属于未跟踪文件。它们既没有上次更新时的快照，也不在当前的暂存 区域。初次克隆某个仓库时，工作目录中的所有文件都属于已跟踪文件，且状态为未修改。</p>
<p>在编辑过某些文件之后，Git 将这些文件标为已修改。我们逐步把这些修改过的文件放到暂存区域，直到最后一次性提交所有这些暂存起来的文件，如此重复。所以使用 Git 时的文件状态变化周期如图 2-1 所示。</p>
<p><a href="http://cdn2.jobbole.com/2012/08/20120201121432_845.png" title="Git详解之二：Git基础" target="_blank"><img src="&quot;Git详解之二：Git基础&quot;" alt="Git详解之二：Git基础"></a></p>
<p>图 2-1. 文件的状态变化周期</p>
<p><strong>检查当前文件状态</strong></p>
<p>要确定哪些文件当前处于什么状态，可以用 git status 命令。如果在克隆仓库之后立即执行此命令，会看到类似这样的输出：
1$ git status</p>
<p>/# On branch master nothing to commit (working directory clean)</p>
<p>这说明你现在的工作目录相当干净。换句话说，当前没有任何跟踪着的文件，也没有任何文件在上次提交后更改过。此外，上面的信息还表明，当前目录下没 有出现任何处于未跟踪的新文件，否则 Git 会在这里列出来。最后，该命令还显示了当前所在的分支是 master，这是默认的分支名称，实际是可以修改的，现在先不用考虑。下一章我们就会详细讨论分支和引用。</p>
<p>现在让我们用 vim 编辑一个新文件 README，保存退出后运行 </p>
<p>git status
 会看到该文件出现在未跟踪文件列表中：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
$ vim README</p>
<p>$ git status
/# On branch master</p>
<p>/# Untracked files:
/#   (use &quot;git add</p>
<p>...&quot; to include</p>
<p>in</p>
<p>what will be committed)</p>
<p>/#
/#   README</p>
<p>nothing added to commit but untracked files present (use</p>
<p>&quot;git add&quot;</p>
<p>to track)</p>
<p>就是在“Untracked files”这行下面。Git 不会自动将之纳入跟踪范围，除非你明明白白地告诉它“我需要跟踪该文件”，因而不用担心把临时文件什么的也归入版本管理。不过现在的例子中，我们确实想要跟踪管理 README 这个文件。</p>
<p><strong>跟踪新文件</strong></p>
<p>使用命令 </p>
<p>git add
 开始跟踪一个新文件。所以，要跟踪 README 文件，运行：
1$ git add README</p>
<p>此时再运行 </p>
<p>git status
 命令，会看到 README 文件已被跟踪，并处于暂存状态：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9$ git status</p>
<p>/# On branch master
/# Changes to be committed:</p>
<p>/#   (use &quot;git reset HEAD</p>
<p>...&quot; to unstage)
/#</p>
<p>/#   new file:   README
/#</p>
<p>只要在 “Changes to be committed” 这行下面的，就说明是已暂存状态。如果此时提交，那么该文件此时此刻的版本将被留存在历史记录中。你可能会想起之前我们使用</p>
<p>git init
 后就运行了 </p>
<p>git add
 命令，开始跟踪当前目录下的文件。在 </p>
<p>git add
 后面可以指明要跟踪的文件或目录路径。如果是目录的话，就说明要递归跟踪该目录下的所有文件。（译注：其实</p>
<p>git add
 的潜台词就是把目标文件快照放入暂存区域，也就是 add file into staged area，同时未曾跟踪过的文件标记为需要跟踪。这样就好理解后续 add 操作的实际意义了。）</p>
<p><strong>暂存已修改文件</strong></p>
<p>现在我们修改下之前已跟踪过的文件 </p>
<p>benchmarks.rb
，然后再次运行 </p>
<p>status
 命令，会看到这样的状态报告：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
$ git status</p>
<p>/# On branch master
/# Changes to be committed:</p>
<p>/#   (use &quot;git reset HEAD</p>
<p>...&quot; to unstage)
/#</p>
<p>/#   new file:   README
/#</p>
<p>/# Changed but not updated:
/#   (use &quot;git add</p>
<p>...&quot; to update what will be committed)</p>
<p>/#
/#   modified:   benchmarks.rb</p>
<p>/#</p>
<p>文件 benchmarks.rb 出现在 “Changed but not updated” 这行下面，说明已跟踪文件的内容发生了变化，但还没有放到暂存区。要暂存这次更新，需要运行</p>
<p>git add
 命令（这是个多功能命令，根据目标文件的状态不同，此命令的效果也不同：可以用它开始跟踪新文件，或者把已跟踪的文件放到暂存区，还能用于合并时把有冲突的文件标记为已解决状态等）。现在让我们运行</p>
<p>git add
 将 benchmarks.rb 放到暂存区，然后再看看 </p>
<p>git status
 的输出：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11$ git add benchmarks.rb</p>
<p>$ git status
/# On branch master</p>
<p>/# Changes to be committed:
/#   (use &quot;git reset HEAD</p>
<p>...&quot; to unstage)</p>
<p>/#
/#   new file:   README</p>
<p>/#   modified:   benchmarks.rb
/#</p>
<p>现在两个文件都已暂存，下次提交时就会一并记录到仓库。假设此时，你想要在 benchmarks.rb 里再加条注释，重新编辑存盘后，准备好提交。不过且慢，再运行</p>
<p>git status
 看看：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
17</p>
<p>18
$ vim benchmarks.rb</p>
<p>$ git status
/# On branch master</p>
<p>/# Changes to be committed:
/#   (use &quot;git reset HEAD</p>
<p>...&quot; to unstage)</p>
<p>/#
/#   new file:   README</p>
<p>/#   modified:   benchmarks.rb
/#</p>
<p>/# Changed but not updated:
/#   (use &quot;git add</p>
<p>...&quot; to update what will be committed)</p>
<p>/#
/#   modified:   benchmarks.rb</p>
<p>/#</p>
<p>怎么回事？benchmarks.rb 文件出现了两次！一次算未暂存，一次算已暂存，这怎么可能呢？好吧，实际上 Git 只不过暂存了你运行 git add 命令时的版本，如果现在提交，那么提交的是添加注释前的版本，而非当前工作目录中的版本。所以，运行了</p>
<p>git add
 之后又作了修订的文件，需要重新运行 </p>
<p>git add
 把最新版本重新暂存起来：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11$ git add benchmarks.rb</p>
<p>$ git status
/# On branch master</p>
<p>/# Changes to be committed:
/#   (use &quot;git reset HEAD</p>
<p>...&quot; to unstage)</p>
<p>/#
/#   new file:   README</p>
<p>/#   modified:   benchmarks.rb
/#</p>
<p><strong>忽略某些文件</strong></p>
<p>一般我们总会有些文件无需纳入 Git 的管理，也不希望它们总出现在未跟踪文件列表。通常都是些自动生成的文件，比如日志文件，或者编译过程中创建的临时文件等。我们可以创建一个名为 .gitignore 的文件，列出要忽略的文件模式。来看一个实际的例子：
1$</p>
<p>cat</p>
<p>.gitignore /<em>.[oa] /</em>~</p>
<p>第一行告诉 Git 忽略所有以 .o 或 .a 结尾的文件。一般这类对象文件和存档文件都是编译过程中出现的，我们用不着跟踪它们的版本。第二行告诉 Git 忽略所有以波浪符（</p>
<p>~
）结尾的文件，许多文本编辑软件（比如 Emacs）都用这样的文件名保存副本。此外，你可能还需要忽略 log，tmp 或者 pid 目录，以及自动生成的文档等等。要养成一开始就设置好 .gitignore 文件的习惯，以免将来误提交这类无用的文件。</p>
<p>文件 .gitignore 的格式规范如下：</p>
<p>● 所有空行或者以注释符号 ＃ 开头的行都会被 Git 忽略。</p>
<p>● 可以使用标准的 glob 模式匹配。 /* 匹配模式最后跟反斜杠（</p>
<p>/
）说明要忽略的是目录。 /* 要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（</p>
<p>!
）取反。</p>
<p>所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。星号（</p>
<p>/*
）匹配零个或多个任意字符；</p>
<p>[abc]
 匹配任何一个列在方括号中的字符（这个例子要么匹配一个 a，要么匹配一个 b，要么匹配一个 c）；问号（</p>
<p>?
）只匹配一个任意字符；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如</p>
<p>[0-9]
 表示匹配所有 0 到 9 的数字）。</p>
<p>我们再看一个 .gitignore 文件的例子：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
/# 此为注释 – 将被 Git 忽略</p>
<p>/*.a      </p>
<p>/# 忽略所有 .a 结尾的文件
!lib.a   </p>
<p>/# 但 lib.a 除外</p>
<p>/TODO</p>
<p>/# 仅仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO
build/   </p>
<p>/# 忽略 build/ 目录下的所有文件</p>
<p>doc//*.txt</p>
<p>/# 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt</p>
<p><strong>查看已暂存和未暂存的更新</strong></p>
<p>实际上 </p>
<p>git status
 的显示比较简单，仅仅是列出了修改过的文件，如果要查看具体修改了什么地方，可以用 </p>
<p>git diff
 命令。稍后我们会详细介绍</p>
<p>git diff
，不过现在，它已经能回答我们的两个问题了：当前做的哪些更新还没有暂存？有哪些更新已经暂存起来准备好了下次提交？ </p>
<p>git diff
 会使用文件补丁的格式显示具体添加和删除的行。</p>
<p>假如再次修改 README 文件后暂存，然后编辑 benchmarks.rb 文件后先别暂存，运行 </p>
<p>status
 命令，会看到：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
$ git status</p>
<p>/# On branch master
/# Changes to be committed:</p>
<p>/#   (use &quot;git reset HEAD</p>
<p>...&quot; to unstage)
/#</p>
<p>/#   new file:   README
/#</p>
<p>/# Changed but not updated:
/#   (use &quot;git add</p>
<p>...&quot; to update what will be committed)</p>
<p>/#
/#   modified:   benchmarks.rb</p>
<p>/#</p>
<p>要查看尚未暂存的文件更新了哪些部分，不加参数直接输入 </p>
<p>git diff
：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
$ git</p>
<p>diff</p>
<p>diff</p>
<p>--git a</p>
<p>/benchmarks</p>
<p>.rb b</p>
<p>/benchmarks</p>
<p>.rb
index 3cb747f..da65585 100644</p>
<p>--- a</p>
<p>/benchmarks</p>
<p>.rb
+++ b</p>
<p>/benchmarks</p>
<p>.rb</p>
<p>@@ -36,6 +36,10 @@ def main</p>
<p>@commit.parents[0].parents[0].parents[0]</p>
<p>end</p>
<ul>
<li>run_code(x,</li>
</ul>
<p>&#39;commits 1&#39;</p>
<p>)</p>
<p>do</p>
<ul>
<li><p>git.commits.size</p>
</li>
<li><p>end
+</p>
</li>
</ul>
<p>run_code(x,</p>
<p>&#39;commits 2&#39;</p>
<p>)</p>
<p>do</p>
<p>log = git.commits(</p>
<p>&#39;master&#39;</p>
<p>, 15)</p>
<p>log.size</p>
<p>此命令比较的是工作目录中当前文件和暂存区域快照之间的差异，也就是修改之后还没有暂存起来的变化内容。</p>
<p>若要看已经暂存起来的文件和上次提交时的快照之间的差异，可以用 </p>
<p>git diff --cached
 命令。（Git 1.6.1 及更高版本还允许使用</p>
<p>git diff --staged
，效果是相同的，但更好记些。）来看看实际的效果：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
$ git</p>
<p>diff</p>
<p>--cached</p>
<p>diff</p>
<p>--git a</p>
<p>/README</p>
<p>b</p>
<p>/README
new</p>
<p>file</p>
<p>mode 100644</p>
<h2 id="index-0000000-03902a1">index 0000000..03902a1</h2>
<p>/dev/null</p>
<p>+++ b</p>
<p>/README2
@@ -0,0 +1,5 @@</p>
<p>+grit</p>
<ul>
<li><p>by Tom Preston-Werner, Chris Wanstrath</p>
</li>
<li><p>http:</p>
</li>
</ul>
<p>//github</p>
<p>.com</p>
<p>/mojombo/grit
+</p>
<p>+Grit is a Ruby library</p>
<p>for</p>
<p>extracting information from a Git repository</p>
<p>请注意，单单 </p>
<p>git diff
 不过是显示还没有暂存起来的改动，而不是这次工作和上次提交之间的差异。所以有时候你一下子暂存了所有更新过的文件后，运行</p>
<p>git diff
 后却什么也没有，就是这个原因。</p>
<p>像之前说的，暂存 benchmarks.rb 后再编辑，运行 </p>
<p>git status
 会看到暂存前后的两个版本：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13$ git add benchmarks.rb</p>
<p>$</p>
<p>echo</p>
<p>&#39;/# test line&#39;</p>
<blockquote>
<blockquote>
<p>benchmarks.rb
$ git status</p>
</blockquote>
</blockquote>
<p>/# On branch master
/#</p>
<p>/# Changes to be committed:
/#</p>
<p>/#   modified:   benchmarks.rb
/#</p>
<p>/# Changed but not updated:
/#</p>
<p>/#   modified:   benchmarks.rb
/#</p>
<p>现在运行 </p>
<p>git diff
 看暂存前后的变化：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
$ git</p>
<p>diff</p>
<p>diff</p>
<p>--git a</p>
<p>/benchmarks</p>
<p>.rb b</p>
<p>/benchmarks</p>
<p>.rb
index e445e28..86b2f7c 100644</p>
<p>--- a</p>
<p>/benchmarks</p>
<p>.rb
+++ b</p>
<p>/benchmarks</p>
<p>.rb</p>
<p>@@ -127,3 +127,4 @@ end</p>
<p>main()</p>
<p>/#/#pp Grit::GitRuby.cache_client.stats</p>
<p>+</p>
<p>/# test line</p>
<p>然后用 </p>
<p>git diff --cached
 查看已经暂存起来的变化：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
$ git</p>
<p>diff</p>
<p>--cached</p>
<p>diff</p>
<p>--git a</p>
<p>/benchmarks</p>
<p>.rb b</p>
<p>/benchmarks</p>
<p>.rb
index 3cb747f..e445e28 100644</p>
<p>--- a</p>
<p>/benchmarks</p>
<p>.rb
+++ b</p>
<p>/benchmarks</p>
<p>.rb</p>
<p>@@ -36,6 +36,10 @@ def main</p>
<p>@commit.parents[0].parents[0].parents[0]</p>
<p>end</p>
<ul>
<li>run_code(x,</li>
</ul>
<p>&#39;commits 1&#39;</p>
<p>)</p>
<p>do</p>
<ul>
<li><p>git.commits.size</p>
</li>
<li><p>end
+</p>
</li>
</ul>
<p>run_code(x,</p>
<p>&#39;commits 2&#39;</p>
<p>)</p>
<p>do</p>
<p>log = git.commits(</p>
<p>&#39;master&#39;</p>
<p>, 15)</p>
<p>log.size</p>
<p><strong>提交更新</strong></p>
<p>现在的暂存区域已经准备妥当可以提交了。在此之前，请一定要确认还有什么修改过的或新建的文件还没有 </p>
<p>git add
 过，否则提交的时候不会记录这些还没暂存起来的变化。所以，每次准备提交前，先用</p>
<p>git status
 看下，是不是都已暂存起来了，然后再运行提交命令 </p>
<p>git commit
：
1$ git commit</p>
<p>这种方式会启动文本编辑器以便输入本次提交的说明。（默认会启用 shell 的环境变量 </p>
<p>$EDITOR
 所指定的软件，一般都是 vim 或 emacs。当然也可以按照第一章介绍的方式，使用</p>
<p>git config --global core.editor
 命令设定你喜欢的编辑软件。）</p>
<p>编辑器会显示类似下面的文本信息（本例选用 Vim 的屏显方式展示）：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
/# Please enter the commit message for your changes. Lines starting</p>
<p>/# with &#39;/#&#39; will be ignored, and an empty message aborts the commit.
/# On branch master</p>
<p>/# Changes to be committed:
/#   (use &quot;git reset HEAD</p>
<p>...&quot; to unstage)</p>
<p>/#
/#       new file:   README</p>
<p>/#       modified:   benchmarks.rb
~</p>
<p>~
~</p>
<p>&quot;.git/COMMIT_EDITMSG&quot;</p>
<p>10L, 283C</p>
<p>可以看到，默认的提交消息包含最后一次运行 </p>
<p>git status
 的输出，放在注释行里，另外开头还有一空行，供你输入提交说明。你完全可以去掉这些注释行，不过留着也没关系，多少能帮你回想起这次更新的内容有哪些。（如果觉得这还不够，可以用</p>
<p>-v
 选项将修改差异的每一行都包含到注释中来。）退出编辑器时，Git 会丢掉注释行，将说明内容和本次更新提交到仓库。</p>
<p>另外也可以用 -m 参数后跟提交说明的方式，在一行命令中提交更新：
1</p>
<p>2
3</p>
<p>4
$ git commit -m</p>
<p>&quot;Story 182: Fix benchmarks for speed&quot;</p>
<p>[master]: created 463dc4f:</p>
<p>&quot;Fix benchmarks for speed&quot;</p>
<p>2 files changed, 3 insertions(+), 0 deletions(-)</p>
<p>create mode 100644 README</p>
<p>好，现在你已经创建了第一个提交！可以看到，提交后它会告诉你，当前是在哪个分支（master）提交的，本次提交的完整 SHA-1 校验和是什么（</p>
<p>463dc4f
），以及在本次提交中，有多少文件修订过，多少行添改和删改过。</p>
<p>记住，提交时记录的是放在暂存区域的快照，任何还未暂存的仍然保持已修改状态，可以在下次提交时纳入版本管理。每一次运行提交操作，都是对你项目作一次快照，以后可以回到这个状态，或者进行比较。</p>
<p><strong>跳过使用暂存区域</strong></p>
<p>尽管使用暂存区域的方式可以精心准备要提交的细节，但有时候这么做略显繁琐。Git 提供了一个跳过使用暂存区域的方式，只要在提交的时候，给 </p>
<p>git commit
 加上</p>
<p>-a
 选项，Git 就会自动把所有已经跟踪过的文件暂存起来一并提交，从而跳过 </p>
<p>git add
 步骤：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
$ git status</p>
<p>/# On branch master
/#</p>
<p>/# Changed but not updated:
/#</p>
<p>/#   modified:   benchmarks.rb
/#</p>
<p>$ git commit -a -m</p>
<p>&#39;added new benchmarks&#39;
[master 83e38c7] added new benchmarks</p>
<p>1 files changed, 5 insertions(+), 0 deletions(-)</p>
<p>看到了吗？提交之前不再需要 </p>
<p>git add
 文件 benchmarks.rb 了。</p>
<p><strong>移除文件</strong></p>
<p>要从 Git 中移除某个文件，就必须要从已跟踪文件清单中移除（确切地说，是从暂存区域移除），然后提交。可以用 </p>
<p>git rm
 命令完成此项工作，并连带从工作目录中删除指定的文件，这样以后就不会出现在未跟踪文件清单中了。</p>
<p>如果只是简单地从工作目录中手工删除文件，运行 </p>
<p>git status
 时就会在 “Changed but not updated” 部分（也就是<em>未暂存</em>清单）看到：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11$</p>
<p>rm</p>
<p>grit.gemspec</p>
<p>$ git status
/# On branch master</p>
<p>/#
/# Changed but not updated:</p>
<p>/#   (use &quot;git add/rm</p>
<p>...&quot; to update what will be committed)
/#</p>
<p>/#       deleted:    grit.gemspec
/#</p>
<p>然后再运行 </p>
<p>git rm
 记录此次移除文件的操作：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
$ git</p>
<p>rm</p>
<p>grit.gemspec</p>
<p>rm</p>
<p>&#39;grit.gemspec&#39;
$ git status</p>
<p>/# On branch master
/#</p>
<p>/# Changes to be committed:
/#   (use &quot;git reset HEAD</p>
<p>...&quot; to unstage)</p>
<p>/#
/#       deleted:    grit.gemspec</p>
<p>/#</p>
<p>最后提交的时候，该文件就不再纳入版本管理了。如果删除之前修改过并且已经放到暂存区域的话，则必须要用强制删除选项 </p>
<p>-f
（译注：即 force 的首字母），以防误删除文件后丢失修改的内容。</p>
<p>另外一种情况是，我们想把文件从 Git 仓库中删除（亦即从暂存区域移除），但仍然希望保留在当前工作目录中。换句话说，仅是从跟踪清单中删除。比如一些大型日志文件或者一堆</p>
<p>.a
 编译文件，不小心纳入仓库后，要移除跟踪但不删除文件，以便稍后在 </p>
<p>.gitignore
 文件中补上，用 </p>
<p>--cached
 选项即可：
1$ git</p>
<p>rm</p>
<p>--cached readme.txt</p>
<p>后面可以列出文件或者目录的名字，也可以使用 glob 模式。比方说：</p>
<p>1$ git</p>
<p>rm</p>
<p>log/\/*.log</p>
<p>注意到星号 </p>
<p>/*
 之前的反斜杠 </p>
<p>\
，因为 Git 有它自己的文件模式扩展匹配方式，所以我们不用 shell 来帮忙展开（译注：实际上不加反斜杠也可以运行，只不过按照 shell 扩展的话，仅仅删除指定目录下的文件而不会递归匹配。上面的例子本来就指定了目录，所以效果等同，但下面的例子就会用递归方式匹配，所以必须加反斜 杠。）。此命令删除所有</p>
<p>log/
 目录下扩展名为 </p>
<p>.log
 的文件。类似的比如：</p>
<p>1$ git</p>
<p>rm</p>
<p>\/*~</p>
<p>会递归删除当前目录及其子目录中所有 </p>
<p>~
 结尾的文件。</p>
<p><strong>移动文件</strong></p>
<p>不像其他的 VCS 系统，Git 并不跟踪文件移动操作。如果在 Git 中重命名了某个文件，仓库中存储的元数据并不会体现出这是一次改名操作。不过 Git 非常聪明，它会推断出究竟发生了什么，至于具体是如何做到的，我们稍后再谈。</p>
<p>既然如此，当你看到 Git 的 </p>
<p>mv
 命令时一定会困惑不已。要在 Git 中对文件改名，可以这么做：
1$ git</p>
<p>mv</p>
<p>file_from file_to</p>
<p>它会恰如预期般正常工作。实际上，即便此时查看状态信息，也会明白无误地看到关于重命名操作的说明：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
$ git</p>
<p>mv</p>
<p>README.txt README</p>
<p>$ git status
/# On branch master</p>
<p>/# Your branch is ahead of &#39;origin/master&#39; by 1 commit.
/#</p>
<p>/# Changes to be committed:
/#   (use &quot;git reset HEAD</p>
<p>...&quot; to unstage)</p>
<p>/#
/#       renamed:    README.txt -&gt; README</p>
<p>/#</p>
<p>其实，运行 </p>
<p>git mv
 就相当于运行了下面三条命令：</p>
<p>1$</p>
<p>mv</p>
<p>README.txt README $ git</p>
<p>rm</p>
<p>README.txt $ git add README</p>
<p>如此分开操作，Git 也会意识到这是一次改名，所以不管何种方式都一样。当然，直接用 </p>
<p>git mv
 轻便得多，不过有时候用其他工具批处理改名的话，要记得在提交前删除老的文件名，再添加新的文件名。</p>
<p><strong>2.3  查看提交历史</strong></p>
<p>在提交了若干更新之后，又或者克隆了某个项目，想回顾下提交历史，可以使用 </p>
<p>git log
 命令查看。</p>
<p>接下来的例子会用我专门用于演示的 simplegit 项目，运行下面的命令获取该项目源代码：
1git clone git:</p>
<p>//github</p>
<p>.com</p>
<p>/schacon/simplegit-progit</p>
<p>.git</p>
<p>然后在此项目中运行 </p>
<p>git log
，应该会看到下面的输出：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
17</p>
<p>18
19</p>
<p>20
21$ git log</p>
<p>commit ca82a6dff817ec66f44342007202690a93763949
Author: Scott Chacon</p>
<p>Date:   Mon Mar 17 21:52:11 2008 -0700</p>
<p>changed the version number</p>
<p>commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7</p>
<p>Author: Scott Chacon</p>
<p>Date:   Sat Mar 15 16:40:33 2008 -0700</p>
<p>removed unnecessary</p>
<p>test</p>
<p>code</p>
<p>commit a11bef06a3f659402fe7563abf99ad00de2209e6
Author: Scott Chacon</p>
<p>Date:   Sat Mar 15 10:31:28 2008 -0700</p>
<p>first commit</p>
<p>默认不用任何参数的话，</p>
<p>git log
 会按提交时间列出所有的更新，最近的更新排在最上面。看到了吗，每次更新都有一个 SHA-1 校验和、作者的名字和电子邮件地址、提交时间，最后缩进一个段落显示提交说明。</p>
<p>git log
 有许多选项可以帮助你搜寻感兴趣的提交，接下来我们介绍些最常用的。</p>
<p>我们常用 </p>
<p>-p
 选项展开显示每次提交的内容差异，用 </p>
<p>-2
 则仅显示最近的两次更新：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
17</p>
<p>18
19</p>
<p>20
21</p>
<p>22
23</p>
<p>24
25</p>
<p>26
27</p>
<p>28
29</p>
<p>30
31</p>
<p>32
33</p>
<p>34
35</p>
<p>36
37</p>
<p>38
39$ git log -p -2</p>
<p>commit ca82a6dff817ec66f44342007202690a93763949
Author: Scott Chacon</p>
<p>Date:   Mon Mar 17 21:52:11 2008 -0700</p>
<p>changed the version number</p>
<p>diff</p>
<p>--git a</p>
<p>/Rakefile</p>
<p>b</p>
<p>/Rakefile</p>
<p>index a874b73..8f94139 100644
--- a</p>
<p>/Rakefile</p>
<p>+++ b</p>
<p>/Rakefile
@@ -5,7 +5,7 @@ require</p>
<p>&#39;rake/gempackagetask&#39;</p>
<p>spec = Gem::Specification.new</p>
<p>do</p>
<p>|s|</p>
<ul>
<li>s.version   =  </li>
</ul>
<p>&quot;0.1.0&quot;</p>
<ul>
<li>s.version   =  </li>
</ul>
<p>&quot;0.1.1&quot;</p>
<p>s.author    =  </p>
<p>&quot;Scott Chacon&quot;</p>
<p>commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7</p>
<p>Author: Scott Chacon</p>
<p>Date:   Sat Mar 15 16:40:33 2008 -0700</p>
<p>removed unnecessary</p>
<p>test</p>
<p>code</p>
<p>diff</p>
<p>--git a</p>
<p>/lib/simplegit</p>
<p>.rb b</p>
<p>/lib/simplegit</p>
<p>.rb
index a0a60ae..47c6340 100644</p>
<p>--- a</p>
<p>/lib/simplegit</p>
<p>.rb
+++ b</p>
<p>/lib/simplegit</p>
<p>.rb</p>
<p>@@ -18,8 +18,3 @@ class SimpleGit</p>
<p>end</p>
<p>end</p>
<p>-
-</p>
<p>if</p>
<p>$0 == <strong>FILE</strong></p>
<ul>
<li>git = SimpleGit.new</li>
<li>puts git.show</li>
</ul>
<p>-end
\ No newline at end of</p>
<p>file</p>
<p>在做代码审查，或者要快速浏览其他协作者提交的更新都作了哪些改动时，就可以用这个选项。此外，还有许多摘要选项可以用，比如 </p>
<p>--stat
，仅显示简要的增改行数统计：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
17</p>
<p>18
19</p>
<p>20
21</p>
<p>22
23</p>
<p>24
25</p>
<p>26
27</p>
<p>28
29</p>
<p>30
31</p>
<p>32
$ git log --stat</p>
<p>commit ca82a6dff817ec66f44342007202690a93763949
Author: Scott Chacon</p>
<p>Date:   Mon Mar 17 21:52:11 2008 -0700</p>
<p>changed the version number</p>
<p>Rakefile |    2 +-</p>
<p>1 files changed, 1 insertions(+), 1 deletions(-)</p>
<p>commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7
Author: Scott Chacon</p>
<p>Date:   Sat Mar 15 16:40:33 2008 -0700</p>
<p>removed unnecessary</p>
<p>test</p>
<p>code</p>
<p>lib</p>
<p>/simplegit</p>
<p>.rb |    5 -----</p>
<p>1 files changed, 0 insertions(+), 5 deletions(-)</p>
<p>commit a11bef06a3f659402fe7563abf99ad00de2209e6
Author: Scott Chacon</p>
<p>Date:   Sat Mar 15 10:31:28 2008 -0700</p>
<p>first commit</p>
<p>README           |    6 ++++++</p>
<p>Rakefile         |   23 +++++++++++++++++++++++</p>
<p>lib</p>
<p>/simplegit</p>
<p>.rb |   25 +++++++++++++++++++++++++</p>
<p>3 files changed, 54 insertions(+), 0 deletions(-)</p>
<p>每个提交都列出了修改过的文件，以及其中添加和移除的行数，并在最后列出所有增减行数小计。还有个常用的 </p>
<p>--pretty
 选项，可以指定使用完全不同于默认格式的方式展示提交历史。比如用</p>
<p>oneline
 将每个提交放在一行显示，这在提交数很大时非常有用。另外还有 </p>
<p>short
，</p>
<p>full
 和</p>
<p>fuller
 可以用，展示的信息或多或少有些不同，请自己动手实践一下看看效果如何。</p>
<p>1</p>
<p>2
3</p>
<p>4
$ git log --pretty=oneline</p>
<p>ca82a6dff817ec66f44342007202690a93763949 changed the version number
085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7 removed unnecessary</p>
<p>test</p>
<p>code</p>
<p>a11bef06a3f659402fe7563abf99ad00de2209e6 first commit</p>
<p>但最有意思的是 </p>
<p>format
，可以定制要显示的记录格式，这样的输出便于后期编程提取分析，像这样：</p>
<p>1</p>
<p>2
3</p>
<p>4
$ git log --pretty=</p>
<p>format</p>
<p>:</p>
<p>&quot;%h - %an, %ar : %s&quot;</p>
<p>ca82a6d - Scott Chacon, 11 months ago : changed the version number
085bb3b - Scott Chacon, 11 months ago : removed unnecessary</p>
<p>test</p>
<p>code</p>
<p>a11bef0 - Scott Chacon, 11 months ago : first commit</p>
<p>表 2-1 列出了常用的格式占位符写法及其代表的意义。</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
选项   说明</p>
<p>%H  提交对象（commit）的完整哈希字串
%h  提交对象的简短哈希字串</p>
<p>%T  树对象（tree）的完整哈希字串
%t  树对象的简短哈希字串</p>
<p>%P  父对象（parent）的完整哈希字串
%p  父对象的简短哈希字串</p>
<p>%an 作者（author）的名字
%ae 作者的电子邮件地址</p>
<p>%ad 作者修订日期（可以用 -</p>
<p>date</p>
<p>= 选项定制格式）
%ar 作者修订日期，按多久以前的方式显示</p>
<p>%cn 提交者(committer)的名字
%ce 提交者的电子邮件地址</p>
<p>%</p>
<p>cd</p>
<p>提交日期
%cr 提交日期，按多久以前的方式显示</p>
<p>%s  提交说明</p>
<p>你一定奇怪<em>作者（author）</em>和<em>提交者（committer）</em>之间究竟有何差别，其实作者指的是实际作出修改的人，提交者指的是最后将此 工作成果提交到仓库的人。所以，当你为某个项目发布补丁，然后某个核心成员将你的补丁并入项目时，你就是作者，而那个核心成员就是提交者。我们会在第五章 再详细介绍两者之间的细微差别。</p>
<p>用 oneline 或 format 时结合 </p>
<p>--graph
 选项，可以看到开头多出一些 ASCII 字符串表示的简单图形，形象地展示了每个提交所在的分支及其分化衍合情况。在我们之前提到的 Grit 项目仓库中可以看到：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11$ git log --pretty=</p>
<p>format</p>
<p>:</p>
<p>&quot;%h %s&quot;</p>
<p>--graph</p>
<p>/* 2d3acf9 ignore errors from SIGCHLD on</p>
<p>trap
/*  5e3ee11 Merge branch</p>
<p>&#39;master&#39;</p>
<p>of git:</p>
<p>//github</p>
<p>.com</p>
<p>/dustin/grit</p>
<p>|\
| /* 420eac9 Added a method</p>
<p>for</p>
<p>getting the current branch.</p>
<p>/<em> | 30e367c timeout code and tests
/</em> | 5a09431 add timeout protection to grit</p>
<p>/* | e1193f8 support</p>
<p>for</p>
<p>heads with slashes</p>
<p>in</p>
<p>them
|/</p>
<p>/* d6016bc require</p>
<p>time</p>
<p>for</p>
<p>xmlschema
/*  11d191e Merge branch</p>
<p>&#39;defunkt&#39;</p>
<p>into</p>
<p>local</p>
<p>以上只是简单介绍了一些 </p>
<p>git log
 命令支持的选项。表 2-2 还列出了一些其他常用的选项及其释义。</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
选项 说明</p>
<p>-p 按补丁格式显示每个更新之间的差异。
--stat 显示每次更新的文件修改统计信息。</p>
<p>--shortstat 只显示 --stat 中最后的行数修改添加移除统计。
--name-only 仅在提交信息后显示已修改的文件清单。</p>
<p>--name-status 显示新增、修改、删除的文件清单。
--abbrev-commit 仅显示 SHA-1 的前几个字符，而非所有的 40 个字符。</p>
<p>--relative-</p>
<p>date</p>
<p>使用较短的相对时间显示（比如，“2 weeks ago”）。
--graph 显示 ASCII 图形表示的分支合并历史。</p>
<p>--pretty 使用其他格式显示历史提交信息。可用的选项包括 oneline，short，full，fuller 和</p>
<p>format</p>
<p>（后跟指定格式）。</p>
<p><strong>限制输出长度</strong></p>
<p>除了定制输出格式的选项之外，</p>
<p>git log
 还有许多非常实用的限制输出长度的选项，也就是只输出部分提交信息。之前我们已经看到过 </p>
<p>-2
 了，它只显示最近的两条提交，实际上，这是 </p>
<ul>
<li>选项的写法，其中的 </li>
</ul>
<p>n
 可以是任何自然数，表示仅显示最近的若干条提交。不过实践中我们是不太用这个选项的，Git 在输出所有提交时会自动调用分页程序（less），要看更早的更新只需翻到下页即可。</p>
<p>另外还有按照时间作限制的选项，比如 </p>
<p>--since
 和 </p>
<p>--until
。下面的命令列出所有最近两周内的提交：
1$ git log --since=2.weeks</p>
<p>你可以给出各种时间格式，比如说具体的某一天（“2008-01-15”），或者是多久以前（“2 years 1 day 3 minutes ago”）。</p>
<p>还可以给出若干搜索条件，列出符合的提交。用 </p>
<p>--author
 选项显示指定作者的提交，用 </p>
<p>--grep
 选项搜索提交说明中的关键字。（请注意，如果要得到同时满足这两个选项搜索条件的提交，就必须用</p>
<p>--all-match
 选项。）</p>
<p>如果只关心某些文件或者目录的历史提交，可以在 </p>
<p>git log
 选项的最后指定它们的路径。因为是放在最后位置上的选项，所以用两个短划线（</p>
<p>--
）隔开之前的选项和后面限定的路径名。</p>
<p>表 2-3 还列出了其他常用的类似选项。
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
选项 说明</p>
<p>-(n)    仅显示最近的 n 条提交
--since, --after 仅显示指定时间之后的提交。</p>
<p>--</p>
<p>until</p>
<p>, --before 仅显示指定时间之前的提交。
--author 仅显示指定作者相关的提交。</p>
<p>--committer 仅显示指定提交者相关的提交。</p>
<p>来看一个实际的例子，如果要查看 Git 仓库中，2008 年 10 月期间，Junio Hamano 提交的但未合并的测试脚本（位于项目的 t/ 目录下的文件），可以用下面的查询命令：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
$ git log --pretty=</p>
<p>&quot;%h - %s&quot;</p>
<p>--author=gitster --since=</p>
<p>&quot;2008-10-01&quot;</p>
<p>\</p>
<p>--before=</p>
<p>&quot;2008-11-01&quot;</p>
<p>--no-merges -- t/
5610e3b - Fix testcase failure when extended attribute</p>
<p>acd3b9e - Enhance hold<em>lock_file_for</em>{update,append}()
f563754 - demonstrate breakage of detached checkout wi</p>
<p>d1a43f2 - reset --hard</p>
<p>/read-tree</p>
<p>--reset -u: remove un
51a94af - Fix</p>
<p>&quot;checkout --track -b newbranch&quot;</p>
<p>on detac</p>
<p>b0ad11e - pull: allow &quot;git pull origin $something:$cur</p>
<p>Git 项目有 20,000 多条提交，但我们给出搜索选项后，仅列出了其中满足条件的 6 条。</p>
<h3 id="-">使用图形化工具查阅提交历史</h3>
<p>有时候图形化工具更容易展示历史提交的变化，随 Git 一同发布的 gitk 就是这样一种工具。它是用 Tcl/Tk 写成的，基本上相当于 </p>
<p>git log
 命令的可视化版本，凡是</p>
<p>git log
 可以用的选项也都能用在 gitk 上。在项目工作目录中输入 gitk 命令后，就会启动图 2-2 所示的界面。</p>
<p><a href="http://cdn2.jobbole.com/2012/08/20120201121433_829.png" title="Git详解之二：Git基础" target="_blank"><img src="&quot;Git详解之二：Git基础&quot;" alt="Git详解之二：Git基础"></a></p>
<p>图 2-2. gitk 的图形界面</p>
<p>上半个窗口显示的是历次提交的分支祖先图谱，下半个窗口显示当前点选的提交对应的具体差异。</p>
<p><strong>2.4  撤消操作</strong></p>
<p>任何时候，你都有可能需要撤消刚才所做的某些操作。接下来，我们会介绍一些基本的撤消操作相关的命令。请注意，有些操作并不总是可以撤消的，所以请务必谨慎小心，一旦失误，就有可能丢失部分工作成果。</p>
<p><strong>修改最后一次提交</strong></p>
<p>有时候我们提交完了才发现漏掉了几个文件没有加，或者提交信息写错了。想要撤消刚才的提交操作，可以使用 </p>
<p>--amend
选项重新提交：
1$ git commit --amend</p>
<p>此命令将使用当前的暂存区域快照提交。如果刚才提交完没有作任何改动，直接运行此命令的话，相当于有机会重新编辑提交说明，但将要提交的文件快照和之前的一样。</p>
<p>启动文本编辑器后，会看到上次提交时的说明，编辑它确认没问题后保存退出，就会使用新的提交说明覆盖刚才失误的提交。</p>
<p>如果刚才提交时忘了暂存某些修改，可以先补上暂存操作，然后再运行 </p>
<p>--amend
 提交：
1</p>
<p>2
3$ git commit -m</p>
<p>&#39;initial commit&#39;</p>
<p>$ git add forgotten_file
$ git commit --amend</p>
<p>上面的三条命令最终只是产生一个提交，第二个提交命令修正了第一个的提交内容。</p>
<p><strong>取消已经暂存的文件</strong></p>
<p>接下来的两个小节将演示如何取消暂存区域中的文件，以及如何取消工作目录中已修改的文件。不用担心，查看文件状态的时候就提示了该如何撤消，所以不需要死记硬背。来看下面的例子，有两个修改过的文件，我们想要分开提交，但不小心用</p>
<p>git add .
 全加到了暂存区域。该如何撤消暂存其中的一个文件呢？其实，</p>
<p>git status
 的命令输出已经告诉了我们该怎么做：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11$ git add .</p>
<p>$ git status
/# On branch master</p>
<p>/# Changes to be committed:
/#   (use &quot;git reset HEAD</p>
<p>...&quot; to unstage)</p>
<p>/#
/#       modified:   README.txt</p>
<p>/#       modified:   benchmarks.rb
/#</p>
<p>就在 “Changes to be committed” 下面，括号中有提示，可以使用 </p>
<p>git reset HEAD ... 
的方式取消暂存。好吧，我们来试试取消暂存 benchmarks.rb 文件：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
17</p>
<p>18
19</p>
<p>20
21$ git reset HEAD benchmarks.rb</p>
<p>benchmarks.rb: locally modified
$ git status</p>
<p>/# On branch master
/# Changes to be committed:</p>
<p>/#   (use &quot;git reset HEAD</p>
<p>...&quot; to unstage)
/#</p>
<p>/#       modified:   README.txt
/#</p>
<p>/# Changed but not updated:
/#   (use &quot;git add</p>
<p>...&quot; to update what will be committed)</p>
<p>/#   (use &quot;git checkout --</p>
<p>...&quot; to discard changes</p>
<p>in</p>
<p>working directory)
/#</p>
<p>/#       modified:   benchmarks.rb
/#</p>
<p>这条命令看起来有些古怪，先别管，能用就行。现在 benchmarks.rb 文件又回到了之前已修改未暂存的状态。</p>
<p><strong>取消对文件的修改</strong></p>
<p>如果觉得刚才对 benchmarks.rb 的修改完全没有必要，该如何取消修改，回到之前的状态（也就是修改之前的版本）呢？</p>
<p>git status
 同样提示了具体的撤消方法，接着上面的例子，现在未暂存区域看起来像这样：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
/# Changed but not updated:</p>
<p>/#   (use &quot;git add</p>
<p>...&quot; to update what will be committed)
/#   (use &quot;git checkout --</p>
<p>...&quot; to discard changes</p>
<p>in</p>
<p>working directory)</p>
<p>/#
/#       modified:   benchmarks.rb</p>
<p>/#</p>
<p>在第二个括号中，我们看到了抛弃文件修改的命令（至少在 Git 1.6.1 以及更高版本中会这样提示，如果你还在用老版本，我们强烈建议你升级，以获取最佳的用户体验），让我们试试看：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
$ git checkout -- benchmarks.rb</p>
<p>$ git status
/# On branch master</p>
<p>/# Changes to be committed:
/#   (use &quot;git reset HEAD</p>
<p>...&quot; to unstage)</p>
<p>/#
/#       modified:   README.txt</p>
<p>/#</p>
<p>可以看到，该文件已经恢复到修改前的版本。你可能已经意识到了，这条命令有些危险，所有对文件的修改都没有了，因为我们刚刚把之前版本的文件复制过 来重写了此文件。所以在用这条命令前，请务必确定真的不再需要保留刚才的修改。如果只是想回退版本，同时保留刚才的修改以便将来继续工作，可以用下章介绍 的 stashing 和分支来处理，应该会更好些。</p>
<p>记住，任何已经提交到 Git 的都可以被恢复。即便在已经删除的分支中的提交，或者用 </p>
<p>--amend
 重新改写的提交，都可以被恢复（关于数据恢复的内容见第九章）。所以，你可能失去的数据，仅限于没有提交过的，对 Git 来说它们就像从未存在过一样。</p>
<p><strong>2.5  远程仓库的使用</strong></p>
<p>要参与任何一个 Git 项目的协作，必须要了解该如何管理远程仓库。远程仓库是指托管在网络上的项目仓库，可能会有好多个，其中有些你只能读，另外有些可以写。同他人协作开发某 个项目时，需要管理这些远程仓库，以便推送或拉取数据，分享各自的工作进展。管理远程仓库的工作，包括添加远程库，移除废弃的远程库，管理各式远程库分 支，定义是否跟踪这些分支，等等。本节我们将详细讨论远程库的管理和使用。</p>
<p><strong>查看当前的远程库</strong></p>
<p>要查看当前配置有哪些远程仓库，可以用 </p>
<p>git remote
 命令，它会列出每个远程库的简短名字。在克隆完某个项目后，至少可以看到一个名为 origin 的远程库，Git 默认使用这个名字来标识你所克隆的原始仓库：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
$ git clone git:</p>
<p>//github</p>
<p>.com</p>
<p>/schacon/ticgit</p>
<p>.git</p>
<p>Initialized empty Git repository</p>
<p>in</p>
<p>/private/tmp/ticgit/</p>
<p>.git/
remote: Counting objects: 595,</p>
<p>done</p>
<p>.</p>
<p>remote: Compressing objects: 100% (269</p>
<p>/269</p>
<p>),</p>
<p>done</p>
<p>.
remote: Total 595 (delta 255), reused 589 (delta 253)</p>
<p>Receiving objects: 100% (595</p>
<p>/595</p>
<p>), 73.31 KiB | 1 KiB</p>
<p>/s</p>
<p>,</p>
<p>done</p>
<p>.
Resolving deltas: 100% (255</p>
<p>/255</p>
<p>),</p>
<p>done</p>
<p>.</p>
<p>$</p>
<p>cd</p>
<p>ticgit
$ git remote</p>
<p>origin</p>
<p>也可以加上 </p>
<p>-v
 选项（译注：此为 </p>
<p>--verbose
 的简写，取首字母），显示对应的克隆地址：</p>
<p>1</p>
<p>2
$ git remote -</p>
<p>v</p>
<p>origin  git:</p>
<p>//github</p>
<p>.com</p>
<p>/schacon/ticgit</p>
<p>.git</p>
<p>如果有多个远程仓库，此命令将全部列出。比如在我的 Grit 项目中，可以看到：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7$</p>
<p>cd</p>
<p>grit</p>
<p>$ git remote -</p>
<p>v
bakkdoor  git:</p>
<p>//github</p>
<p>.com</p>
<p>/bakkdoor/grit</p>
<p>.git</p>
<p>cho45     git:</p>
<p>//github</p>
<p>.com</p>
<p>/cho45/grit</p>
<p>.git
defunkt   git:</p>
<p>//github</p>
<p>.com</p>
<p>/defunkt/grit</p>
<p>.git</p>
<p>koke      git:</p>
<p>//github</p>
<p>.com</p>
<p>/koke/grit</p>
<p>.git
origin    git@ github.com:mojombo</p>
<p>/grit</p>
<p>.git</p>
<p>这样一来，我就可以非常轻松地从这些用户的仓库中，拉取他们的提交到本地。请注意，上面列出的地址只有 origin 用的是 SSH URL 链接，所以也只有这个仓库我能推送数据上去（我们会在第四章解释原因）。</p>
<p><strong>添加远程仓库</strong></p>
<p>要添加一个新的远程仓库，可以指定一个简单的名字，以便将来引用，运行 </p>
<p>git remote add [shortname] [url]
：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
$ git remote</p>
<p>origin
$ git remote add pb git:</p>
<p>//github</p>
<p>.com</p>
<p>/paulboone/ticgit</p>
<p>.git</p>
<p>$ git remote -</p>
<p>v
origin  git:</p>
<p>//github</p>
<p>.com</p>
<p>/schacon/ticgit</p>
<p>.git</p>
<p>pb  git:</p>
<p>//github</p>
<p>.com</p>
<p>/paulboone/ticgit</p>
<p>.git</p>
<p>现在可以用字串 pb 指代对应的仓库地址了。比如说，要抓取所有 Paul 有的，但本地仓库没有的信息，可以运行 </p>
<p>git fetch pb
：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
$ git fetch pb</p>
<p>remote: Counting objects: 58,</p>
<p>done</p>
<p>.
remote: Compressing objects: 100% (41</p>
<p>/41</p>
<p>),</p>
<p>done</p>
<p>.</p>
<p>remote: Total 44 (delta 24), reused 1 (delta 0)
Unpacking objects: 100% (44</p>
<p>/44</p>
<p>),</p>
<p>done</p>
<p>.</p>
<p>From git:</p>
<p>//github</p>
<p>.com</p>
<p>/paulboone/ticgit</p>
<p>/* [new branch]      master     -&gt; pb</p>
<p>/master</p>
<p>/* [new branch]      ticgit     -&gt; pb</p>
<p>/ticgit</p>
<p>现在，Paul 的主干分支（master）已经完全可以在本地访问了，对应的名字是 </p>
<p>pb/master
，你可以将它合并到自己的某个分支，或者切换到这个分支，看看有些什么有趣的更新。</p>
<p><strong>从远程仓库抓取数据</strong></p>
<p>正如之前所看到的，可以用下面的命令从远程仓库抓取数据到本地：
1$ git fetch [remote-name]</p>
<p>此命令会到远程仓库中拉取所有你本地仓库中还没有的数据。运行完成后，你就可以在本地访问该远程仓库中的所有分支，将其中某个分支合并到本地，或者只是取出某个分支，一探究竟。（我们会在第三章详细讨论关于分支的概念和操作。）</p>
<p>如果是克隆了一个仓库，此命令会自动将远程仓库归于 origin 名下。所以，</p>
<p>git fetch origin
 会抓取从你上次克隆以来别人上传到此远程仓库中的所有更新（或是上次 fetch 以来别人提交的更新）。有一点很重要，需要记住，fetch 命令只是将远端的数据拉到本地仓库，并不自动合并到当前工作分支，只有当你确实准备好了，才能手工合并。</p>
<p>如果设置了某个分支用于跟踪某个远端仓库的分支（参见下节及第三章的内容），可以使用 </p>
<p>git pull
 命令自动抓取数据下来，然后将远端分支自动合并到本地仓库中当前分支。在日常工作中我们经常这么用，既快且好。实际上，默认情况下</p>
<p>git clone
 命令本质上就是自动创建了本地的 master 分支用于跟踪远程仓库中的 master 分支（假设远程仓库确实有 master 分支）。所以一般我们运行</p>
<p>git pull
，目的都是要从原始克隆的远端仓库中抓取数据后，合并到工作目录中的当前分支。</p>
<p><strong>推送数据到远程仓库</strong></p>
<p>项目进行到一个阶段，要同别人分享目前的成果，可以将本地仓库中的数据推送到远程仓库。实现这个任务的命令很简单： </p>
<p>git push [remote-name] [branch-name]
。如果要把本地的 master 分支推送到</p>
<p>origin
 服务器上（再次说明下，克隆操作会自动使用默认的 master 和 origin 名字），可以运行下面的命令：
1$ git push origin master</p>
<p>只有在所克隆的服务器上有写权限，或者同一时刻没有其他人在推数据，这条命令才会如期完成任务。如果在你推数据前，已经有其他人推送了若干更新，那 你的推送操作就会被驳回。你必须先把他们的更新抓取到本地，合并到自己的项目中，然后才可以再次推送。有关推送数据到远程仓库的详细内容见第三章。</p>
<p><strong>查看远程仓库信息</strong></p>
<p>我们可以通过命令 </p>
<p>git remote show [remote-name]
 查看某个远程仓库的详细信息，比如要看所克隆的 </p>
<p>origin
 仓库，可以运行：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
$ git remote show origin</p>
<p>/* remote origin</p>
<p>URL: git:</p>
<p>//github</p>
<p>.com</p>
<p>/schacon/ticgit</p>
<p>.git</p>
<p>Remote branch merged with</p>
<p>&#39;git pull&#39;</p>
<p>while</p>
<p>on branch master</p>
<p>master</p>
<p>Tracked remote branches</p>
<p>master</p>
<p>ticgit</p>
<p>除了对应的克隆地址外，它还给出了许多额外的信息。它友善地告诉你如果是在 master 分支，就可以用 </p>
<p>git pull
 命令抓取数据合并到本地。另外还列出了所有处于跟踪状态中的远端分支。</p>
<p>上面的例子非常简单，而随着使用 Git 的深入，</p>
<p>git remote show
 给出的信息可能会像这样：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
17</p>
<p>18
19</p>
<p>20
21$ git remote show origin</p>
<p>/* remote origin</p>
<p>URL: git@ github.com:defunkt</p>
<p>/github</p>
<p>.git</p>
<p>Remote branch merged with</p>
<p>&#39;git pull&#39;</p>
<p>while</p>
<p>on branch issues</p>
<p>issues</p>
<p>Remote branch merged with</p>
<p>&#39;git pull&#39;</p>
<p>while</p>
<p>on branch master</p>
<p>master</p>
<p>New remote branches (next fetch will store</p>
<p>in</p>
<p>remotes</p>
<p>/origin</p>
<p>)</p>
<p>caching</p>
<p>Stale tracking branches (use</p>
<p>&#39;git remote prune&#39;</p>
<p>)</p>
<p>libwalker</p>
<p>walker2</p>
<p>Tracked remote branches</p>
<p>acl</p>
<p>apiv2</p>
<p>dashboard2</p>
<p>issues</p>
<p>master</p>
<p>postgres</p>
<p>Local branch pushed with</p>
<p>&#39;git push&#39;</p>
<p>master:master</p>
<p>它告诉我们，运行 </p>
<p>git push
 时缺省推送的分支是什么（译注：最后两行）。它还显示了有哪些远端分支还没有同步到本地（译注：第六行的</p>
<p>caching
 分支），哪些已同步到本地的远端分支在远端服务器上已被删除（译注：</p>
<p>Stale tracking branches
 下面的两个分支），以及运行</p>
<p>git pull
 时将自动合并哪些分支（译注：前四行中列出的 </p>
<p>issues
 和 </p>
<p>master
 分支）。</p>
<p><strong>远程仓库的删除和重命名</strong></p>
<p>在新版 Git 中可以用 </p>
<p>git remote rename
 命令修改某个远程仓库在本地的简短名称，比如想把 </p>
<p>pb
 改成</p>
<p>paul
，可以这么运行：
1</p>
<p>2
3</p>
<p>4
$ git remote rename pb paul</p>
<p>$ git remote
origin</p>
<p>paul</p>
<p>注意，对远程仓库的重命名，也会使对应的分支名称发生变化，原来的 </p>
<p>pb/master
 分支现在成了 </p>
<p>paul/master
。</p>
<p>碰到远端仓库服务器迁移，或者原来的克隆镜像不再使用，又或者某个参与者不再贡献代码，那么需要移除对应的远端仓库，可以运行 </p>
<p>git remote rm
 命令：
1</p>
<p>2
3$ git remote</p>
<p>rm</p>
<p>paul</p>
<p>$ git remote
origin</p>
<p><strong>2.6  打标签</strong></p>
<p>同大多数 VCS 一样，Git 也可以对某一时间点上的版本打上标签。人们在发布某个软件版本（比如 v1.0 等等）的时候，经常这么做。本节我们一起来学习如何列出所有可用的标签，如何新建标签，以及各种不同类型标签之间的差别。</p>
<p><strong>列显已有的标签</strong></p>
<p>列出现有标签的命令非常简单，直接运行 </p>
<p>git tag
 即可：
1$ git tag v0.1 v1.3</p>
<p>显示的标签按字母顺序排列，所以标签的先后并不表示重要程度的轻重。</p>
<p>我们可以用特定的搜索模式列出符合条件的标签。在 Git 自身项目仓库中，有着超过 240 个标签，如果你只对 1.4.2 系列的版本感兴趣，可以运行下面的命令：
1$ git tag -l</p>
<p>&#39;v1.4.2./*&#39;</p>
<p>v1.4.2.1 v1.4.2.2 v1.4.2.3 v1.4.2.4</p>
<p><strong>新建标签</strong></p>
<p>Git 使用的标签有两种类型：轻量级的（lightweight）和含附注的（annotated）。轻量级标签就像是个不会变化的分支，实际上它就是个指向特 定提交对象的引用。而含附注标签，实际上是存储在仓库中的一个独立对象，它有自身的校验和信息，包含着标签的名字，电子邮件地址和日期，以及标签说明，标 签本身也允许使用 GNU Privacy Guard (GPG) 来签署或验证。一般我们都建议使用含附注型的标签，以便保留相关信息；当然，如果只是临时性加注标签，或者不需要旁注额外信息，用轻量级标签也没问题。</p>
<p><strong>含附注的标签</strong></p>
<p>创建一个含附注类型的标签非常简单，用 </p>
<p>-a
 （译注：取 </p>
<p>annotated
 的首字母）指定标签名字即可：
1</p>
<p>2
3</p>
<p>4
5$ git tag -a v1.4 -m</p>
<p>&#39;my version 1.4&#39;</p>
<p>$ git tag
v0.1</p>
<p>v1.3
v1.4</p>
<p>而 </p>
<p>-m
 选项则指定了对应的标签说明，Git 会将此说明一同保存在标签对象中。如果没有给出该选项，Git 会启动文本编辑软件供你输入标签说明。</p>
<p>可以使用 </p>
<p>git show
 命令查看相应标签的版本信息，并连同显示打标签时的提交对象。
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
$ git show v1.4</p>
<p>tag v1.4
Tagger: Scott Chacon</p>
<p>Date:   Mon Feb 9 14:45:11 2009 -0800</p>
<p>my version 1.4</p>
<p>commit 15027957951b64cf874c3557a0f3547bd83b3ff6
Merge: 4a447f7... a6b4c97...</p>
<p>Author: Scott Chacon</p>
<p>Date:   Sun Feb 8 19:02:46 2009 -0800</p>
<p>Merge branch</p>
<p>&#39;experiment&#39;</p>
<p>我们可以看到在提交对象信息上面，列出了此标签的提交者和提交时间，以及相应的标签说明。</p>
<p><strong>签署标签</strong></p>
<p>如果你有自己的私钥，还可以用 GPG 来签署标签，只需要把之前的 </p>
<p>-a
 改为 </p>
<p>-s
 （译注： 取 </p>
<p>signed
 的首字母）即可：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
$ git tag -s v1.5 -m</p>
<p>&#39;my signed 1.5 tag&#39;</p>
<p>You need a passphrase to unlock the secret key</p>
<p>for
user: &quot;Scott Chacon</p>
<p>&quot;</p>
<p>1024-bit DSA key, ID F721C45A, created 2009-02-09</p>
<p>现在再运行 </p>
<p>git show
 会看到对应的 GPG 签名也附在其内：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
17</p>
<p>18
19</p>
<p>20
21$ git show v1.5</p>
<p>tag v1.5
Tagger: Scott Chacon</p>
<p>Date:   Mon Feb 9 15:22:20 2009 -0800</p>
<p>my signed 1.5 tag</p>
<p>-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.8 (Darwin)</p>
<p>iEYEABECAAYFAkmQurIACgkQON3DxfchxFr5cACeIMN+ZxLKggJQf0QYiQBwgySN</p>
<p>Ki0An2JeAVUCAiJ7Ox6ZEtK+NvZAj82/
=WryJ</p>
<p>-----END PGP SIGNATURE-----
commit 15027957951b64cf874c3557a0f3547bd83b3ff6</p>
<p>Merge: 4a447f7... a6b4c97...
Author: Scott Chacon</p>
<p>Date:   Sun Feb 8 19:02:46 2009 -0800</p>
<p>Merge branch</p>
<p>&#39;experiment&#39;</p>
<p>稍后我们再学习如何验证已经签署的标签。</p>
<p><strong>轻量级标签</strong></p>
<p>轻量级标签实际上就是一个保存着对应提交对象的校验和信息的文件。要创建这样的标签，一个 </p>
<p>-a
，</p>
<p>-s
 或 </p>
<p>-m
 选项都不用，直接给出标签名字即可：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7$ git tag v1.4-lw</p>
<p>$ git tag
v0.1</p>
<p>v1.3
v1.4</p>
<p>v1.4-lw
v1.5</p>
<p>现在运行 </p>
<p>git show
 查看此标签信息，就只有相应的提交对象摘要：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
$ git show v1.4-lw</p>
<p>commit 15027957951b64cf874c3557a0f3547bd83b3ff6
Merge: 4a447f7... a6b4c97...</p>
<p>Author: Scott Chacon</p>
<p>Date:   Sun Feb 8 19:02:46 2009 -0800</p>
<p>Merge branch</p>
<p>&#39;experiment&#39;</p>
<p><strong>验证标签</strong></p>
<p>可以使用 </p>
<p>git tag -v [tag-name]
 （译注：取 </p>
<p>verify
 的首字母）的方式验证已经签署的标签。此命令会调用 GPG 来验证签名，所以你需要有签署者的公钥，存放在 keyring 中，才能验证：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
17$ git tag -</p>
<p>v</p>
<p>v1.4.2.1</p>
<p>object 883653babd8ee7ea23e6a5c392bb739348b1eb61
type</p>
<p>commit</p>
<p>tag v1.4.2.1
tagger Junio C Hamano</p>
<p>1158138501 -0700</p>
<p>GIT 1.4.2.1</p>
<p>Minor fixes since 1.4.2, including git-</p>
<p>mv</p>
<p>and git-http with alternates.</p>
<p>gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A
gpg: Good signature from &quot;Junio C Hamano</p>
<p>&quot;</p>
<p>gpg:                 aka</p>
<p>&quot;[jpeg image of size 1513]&quot;
Primary key fingerprint: 3565 2A26 2040 E066 C9A7  4A7D C0C6 D9A4 F311 9B9A</p>
<p>若是没有签署者的公钥，会报告类似下面这样的错误：</p>
<p>1</p>
<p>2
3gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A</p>
<p>gpg: Can&#39;t check signature: public key not found
error: could not verify the tag</p>
<p>&#39;v1.4.2.1&#39;</p>
<p><strong>后期加注标签</strong></p>
<p>你甚至可以在后期对早先的某次提交加注标签。比如在下面展示的提交历史中：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11$ git log --pretty=oneline</p>
<p>15027957951b64cf874c3557a0f3547bd83b3ff6 Merge branch</p>
<p>&#39;experiment&#39;
a6b4c97498bd301d84096da251c98a07c7723e65 beginning write support</p>
<p>0d52aaab4479697da7686c15f77a3d64d9165190 one</p>
<p>more</p>
<p>thing
6d52a271eda8725415634dd79daabbc4d9b6008e Merge branch</p>
<p>&#39;experiment&#39;</p>
<p>0b7434d86859cc7b8c3d5e1dddfed66ff742fcbc added a commit</p>
<p>function
4682c3261057305bdd616e23b64b0857d832627b added a todo</p>
<p>file</p>
<p>166ae0c4d3f420721acbb115cc33848dfcc2121a started write support
9fceb02d0ae598e95dc970b74767f19372d61af8 updated rakefile</p>
<p>964f16d36dfccde844893cac5b347e7b3d44abbc commit the todo
8a5cbc430f1a9c3d00faaeffd07798508422908a updated readme</p>
<p>我们忘了在提交 “updated rakefile” 后为此项目打上版本号 v1.2，没关系，现在也能做。只要在打标签的时候跟上对应提交对象的校验和（或前几位字符）即可：</p>
<p>1$ git tag -a v1.2 9fceb02</p>
<p>可以看到我们已经补上了标签：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13</p>
<p>14
15</p>
<p>16
17</p>
<p>18
19</p>
<p>20
21</p>
<p>22
$ git tag</p>
<p>v0.1
v1.2</p>
<p>v1.3
v1.4</p>
<p>v1.4-lw
v1.5</p>
<p>$ git show v1.2</p>
<p>tag v1.2
Tagger: Scott Chacon</p>
<p>Date:   Mon Feb 9 15:32:16 2009 -0800</p>
<p>version 1.2</p>
<p>commit 9fceb02d0ae598e95dc970b74767f19372d61af8
Author: Magnus Chacon</p>
<p>Date:   Sun Apr 27 20:43:35 2008 -0700</p>
<p>updated rakefile</p>
<p>...</p>
<p><strong>分享标签</strong></p>
<p>默认情况下，</p>
<p>git push
 并不会把标签传送到远端服务器上，只有通过显式命令才能分享标签到远端仓库。其命令格式如同推送分支，运行</p>
<p>git push origin [tagname]
 即可：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7$ git push origin v1.5</p>
<p>Counting objects: 50,</p>
<p>done</p>
<p>.
Compressing objects: 100% (38</p>
<p>/38</p>
<p>),</p>
<p>done</p>
<p>.</p>
<p>Writing objects: 100% (44</p>
<p>/44</p>
<p>), 4.56 KiB,</p>
<p>done</p>
<p>.
Total 44 (delta 18), reused 8 (delta 1)</p>
<p>To git@ github.com:schacon</p>
<p>/simplegit</p>
<p>.git
/* [new tag]         v1.5 -&gt; v1.5</p>
<p>如果要一次推送所有本地新增的标签上去，可以使用 </p>
<p>--tags
 选项：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11$ git push origin --tags</p>
<p>Counting objects: 50,</p>
<p>done</p>
<p>.
Compressing objects: 100% (38</p>
<p>/38</p>
<p>),</p>
<p>done</p>
<p>.</p>
<p>Writing objects: 100% (44</p>
<p>/44</p>
<p>), 4.56 KiB,</p>
<p>done</p>
<p>.
Total 44 (delta 18), reused 8 (delta 1)</p>
<p>To git@ github.com:schacon</p>
<p>/simplegit</p>
<p>.git</p>
<p>/* [new tag]         v0.1 -&gt; v0.1</p>
<p>/* [new tag]         v1.2 -&gt; v1.2</p>
<p>/* [new tag]         v1.4 -&gt; v1.4</p>
<p>/* [new tag]         v1.4-lw -&gt; v1.4-lw</p>
<p>/* [new tag]         v1.5 -&gt; v1.5</p>
<p>现在，其他人克隆共享仓库或拉取数据同步后，也会看到这些标签。</p>
<p><strong>2.7  技巧和窍门</strong></p>
<p>在结束本章之前，我还想和大家分享一些 Git 使用的技巧和窍门。很多使用 Git 的开发者可能根本就没用过这些技巧，我们也不是说在读过本书后非得用这些技巧不可，但至少应该有所了解吧。说实话，有了这些小窍门，我们的工作可以变得更简单，更轻松，更高效。</p>
<p><strong>自动完成</strong></p>
<p>如果你用的是 Bash shell，可以试试看 Git 提供的自动完成脚本。下载 Git 的源代码，进入 </p>
<p>contrib/completion
 目录，会看到一个</p>
<p>git-completion.bash
 文件。将此文件复制到你自己的用户主目录中（译注：按照下面的示例，还应改名加上点：</p>
<p>cp git-completion.bash ~/.git-completion.bash
），并把下面一行内容添加到你的</p>
<p>.bashrc
 文件中：
1source</p>
<p>~/.git-completion.</p>
<p>bash</p>
<p>也可以为系统上所有用户都设置默认使用此脚本。Mac 上将此脚本复制到 </p>
<p>/opt/local/etc/bash_completion.d
 目录中，Linux 上则复制到</p>
<p>/etc/bash_completion.d/
 目录中。这两处目录中的脚本，都会在 Bash 启动时自动加载。</p>
<p>如果在 Windows 上安装了 msysGit，默认使用的 Git Bash 就已经配好了这个自动完成脚本，可以直接使用。</p>
<p>在输入 Git 命令的时候可以敲两次跳格键（Tab），就会看到列出所有匹配的可用命令建议：
1$ git co commit config</p>
<p>此例中，键入 git co 然后连按两次 Tab 键，会看到两个相关的建议（命令） commit 和 config。继而输入 </p>
<p>m 
会自动完成</p>
<p>git commit
 命令的输入。</p>
<p>命令的选项也可以用这种方式自动完成，其实这种情况更实用些。比如运行 </p>
<p>git log
 的时候忘了相关选项的名字，可以输入开头的几个字母，然后敲 Tab 键看看有哪些匹配的：
1</p>
<p>2
3$ git log --s</p>
<p>--shortstat  --since=  --src-prefix=  --stat   --summary</p>
<p>这个技巧不错吧，可以节省很多输入和查阅文档的时间。</p>
<p><strong>Git 命令别名</strong></p>
<p>Git 并不会推断你输入的几个字符将会是哪条命令，不过如果想偷懒，少敲几个命令的字符，可以用 </p>
<p>git config
 为命令设置别名。来看看下面的例子：
1</p>
<p>2
3</p>
<p>4
$ git config --global</p>
<p>alias</p>
<p>.co checkout</p>
<p>$ git config --global</p>
<p>alias</p>
<p>.br branch
$ git config --global</p>
<p>alias</p>
<p>.ci commit</p>
<p>$ git config --global</p>
<p>alias</p>
<p>.st status</p>
<p>现在，如果要输入 </p>
<p>git commit
 只需键入 </p>
<p>git ci
 即可。而随着 Git 使用的深入，会有很多经常要用到的命令，遇到这种情况，不妨建个别名提高效率。</p>
<p>使用这种技术还可以创造出新的命令，比方说取消暂存文件时的输入比较繁琐，可以自己设置一下：
1$ git config --global</p>
<p>alias</p>
<p>.unstage</p>
<p>&#39;reset HEAD --&#39;</p>
<p>这样一来，下面的两条命令完全等同：</p>
<p>1</p>
<p>2
$ git unstage fileA</p>
<p>$ git reset HEAD fileA</p>
<p>显然，使用别名的方式看起来更清楚。另外，我们还经常设置 </p>
<p>last
 命令：</p>
<p>1$ git config --global</p>
<p>alias</p>
<p>.last</p>
<p>&#39;log -1 HEAD&#39;</p>
<p>然后要看最后一次的提交信息，就变得简单多了：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9$ git last</p>
<p>commit 66938dae3329c7aebe598c2246a8e6af90d04646
Author: Josh Goebel</p>
<p>Date:   Tue Aug 26 19:48:51 2008 +0800</p>
<p>test</p>
<p>for</p>
<p>current</p>
<p>head</p>
<p>Signed-off-by: Scott Chacon</p>
<p>可以看出，实际上 Git 只是简单地在命令中替换了你设置的别名。不过有时候我们希望运行某个外部命令，而非 Git 的附属工具，这个好办，只需要在命令前加上 </p>
<p>!
 就行。如果你自己写了些处理 Git 仓库信息的脚本的话，就可以用这种技术包装起来。作为演示，我们可以设置用 </p>
<p>git visual
 启动</p>
<p>gitk
：</p>
<p>1$ git config --global</p>
<p>alias</p>
<p>.visual</p>
<p>&quot;!gitk&quot;</p>
<p><strong>2.8  小结</strong></p>
<p>到目前为止，你已经学会了最基本的 Git 操作：创建和克隆仓库，做出更新，暂存并提交这些更新，以及查看所有历史更新记录。接下来，我们将学习 Git 的必杀技特性：分支模型。
<img src="&quot;6 votes, average: 4.83 out of 5&quot;" alt="6 votes, average: 4.83 out of 5"><img src="&quot;6 votes, average: 4.83 out of 5&quot;" alt="6 votes, average: 4.83 out of 5"><img src="&quot;6 votes, average: 4.83 out of 5&quot;" alt="6 votes, average: 4.83 out of 5"><img src="&quot;6 votes, average: 4.83 out of 5&quot;" alt="6 votes, average: 4.83 out of 5"><img src="&quot;6 votes, average: 4.83 out of 5&quot;" alt="6 votes, average: 4.83 out of 5"> (<strong>*6</strong> 个评分，平均: <strong>4.83*</strong>)</p>
<p><img src="&quot;Loading ...&quot;" alt="Loading ..."> Loading ...</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/git&github/">git&github</a></li></span></span> | <span class="tags">Tagged <a href="/tags/git&github/" class="label label-primary">git&github</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:43"datetime="2014-03-07 09:54:43"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-gitgithub--Git详解之二：Git基础/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-gitgithub--Git详解之二：Git基础" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-gitgithub--Git详解之四：服务器上的Git/">Git详解之四：服务器上的Git</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:43.000Z"> <a href="/2014/02/02/2014-02-02-gitgithub--Git详解之四：服务器上的Git/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="git-git">Git详解之四：服务器上的Git</h1>
<p>原文：<a href="http://git-scm.com/book/zh" target="_blank">《Pro Git》</a></p>
<p><strong>服务器上的 Git</strong></p>
<p>到目前为止，你应该已经学会了使用 Git 来完成日常工作。然而，如果想与他人合作，还需要一个远程的 Git 仓库。尽管技术上可以从个人的仓库里推送和拉取修改内容，但我们不鼓励这样做，因为一不留心就很容易弄混其他人的进度。另外，你也一定希望合作者们即使在 自己不开机的时候也能从仓库获取数据 — 拥有一个更稳定的公共仓库十分有用。因此，更好的合作方式是建立一个大家都可以访问的共享仓库，从那里推送和拉取数据。我们将把这个仓库称为 “Git 服务器”；代理一个 Git 仓库只需要花费很少的资源，几乎从不需要整个服务器来支持它的运行。（<a href="http://www.jobbole.com/" title="1" target="_blank">伯乐</a>在线注：如果你对Git还不了解，建议从本<a href="http://blog.jobbole.com/25775/" target="_blank">Git</a>系列<a href="http://blog.jobbole.com/25775/" target="_blank">第一篇文章</a>开始阅读）</p>
<p>架设一台 Git 服务器并不难。第一步是选择与服务器通讯的协议。本章第一节将介绍可用的协议以及各自优缺点。下面一节将介绍一些针对各个协议典型的设置以及如何在服务器 上实施。最后，如果你不介意在他人服务器上保存你的代码，又想免去自己架设和维护服务器的麻烦，倒可以试试我们介绍的几个仓库托管服务。</p>
<p>如果你对架设自己的服务器没兴趣，可以跳到本章最后一节去看看如何申请一个代码托管服务的账户然后继续下一章，我们会在那里讨论分布式源码控制环境的林林总总。</p>
<p>远程仓库通常只是一个<em>裸仓库（bare repository）</em> — 即一个没有当前工作目录的仓库。因为该仓库只是一个合作媒介，所以不需要从硬盘上取出最新版本的快照；仓库里存放的仅仅是 Git 的数据。简单地说，裸仓库就是你工作目录中.git 子目录内的内容。</p>
<p><strong>4.1 协议</strong></p>
<p>Git 可以使用四种主要的协议来传输数据：本地传输，SSH 协议，Git 协议和 HTTP 协议。下面分别介绍一下哪些情形应该使用（或避免使用）这些协议。</p>
<p>值得注意的是，除了 HTTP 协议外，其他所有协议都要求在服务器端安装并运行 Git。</p>
<p><strong>本地协议</strong></p>
<p>最基本的就是<em>本地协议（Local protocol）</em>，所谓的远程仓库在该协议中的表示，就是硬盘上的另一个目录。这常见于团队每一个成员都对一个共享的文件系统（例如 NFS）拥有访问权，或者比较少见的多人共用同一台电脑的情况。后面一种情况并不安全，因为所有代码仓库实例都储存在同一台电脑里，增加了灾难性数据损失 的可能性。</p>
<p>如果你使用一个共享的文件系统，就可以在一个本地文件系统中克隆仓库，推送和获取。克隆的时候只需要将远程仓库的路径作为 URL 使用，比如下面这样：
1$ git clone</p>
<p>/opt/git/project</p>
<p>.git</p>
<p>或者这样：</p>
<p>1$ git clone</p>
<p>file</p>
<p>:</p>
<p>///opt/git/project</p>
<p>.git</p>
<p>如果在 URL 开头明确使用 file:// ，那么 Git 会以一种略微不同的方式运行。如果你只给出路径，Git 会尝试使用硬链接或直接复制它所需要的文件。如果使用了file:// ，Git 会调用它平时通过网络来传输数据的工序，而这种方式的效率相对较低。使用 file:// 前缀的主要原因是当你需要一个不包含无关引用或对象的干净仓库副本的时候 — 一般指从其他版本控制系统导入的，或类似情形（参见第 9 章的维护任务）。我们这里仅仅使用普通路径，这样更快。</p>
<p>要添加一个本地仓库作为现有 Git 项目的远程仓库，可以这样做：
1$ git remote add local_proj</p>
<p>/opt/git/project</p>
<p>.git</p>
<p>然后就可以像在网络上一样向这个远程仓库推送和获取数据了。</p>
<p><strong>优点</strong></p>
<p>基于文件仓库的优点在于它的简单，同时保留了现存文件的权限和网络访问权限。如果你的团队已经有一个全体共享的文件系统，建立仓库就十分容易了。你 只需把一份裸仓库的副本放在大家都能访问的地方，然后像对其他共享目录一样设置读写权限就可以了。我们将在下一节“在服务器上部署 Git ”中讨论如何导出一个裸仓库的副本。</p>
<p>这也是从别人工作目录中获取工作成果的快捷方法。假如你和你的同事在一个项目中合作，他们想让你检出一些东西的时候，运行类似 git pull /home/john/project 通常会比他们推送到服务器，而你再从服务器获取简单得多。</p>
<p><strong>缺点</strong></p>
<p>这种方法的缺点是，与基本的网络连接访问相比，难以控制从不同位置来的访问权限。如果你想从家里的笔记本电脑上推送，就要先挂载远程硬盘，这和基于网络连接的访问相比更加困难和缓慢。</p>
<p>另一个很重要的问题是该方法不一定就是最快的，尤其是对于共享挂载的文件系统。本地仓库只有在你对数据访问速度快的时候才快。在同一个服务器上，如果二者同时允许 Git 访问本地硬盘，通过 NFS 访问仓库通常会比 SSH 慢。</p>
<p><strong>SSH 协议</strong></p>
<p>‘Git 使用的传输协议中最常见的可能就是 SSH 了。这是因为大多数环境已经支持通过 SSH 对服务器的访问 — 即便还没有，架设起来也很容易。SSH 也是唯一一个同时支持读写操作的网络协议。另外两个网络协议（HTTP 和 Git）通常都是只读的，所以虽然二者对大多数人都可用，但执行写操作时还是需要 SSH。SSH 同时也是一个验证授权的网络协议；而因为其普遍性，一般架设和使用都很容易。</p>
<p>通过 SSH 克隆一个 Git 仓库，你可以像下面这样给出 ssh:// 的 URL：
1$ git clone</p>
<p>ssh</p>
<p>:</p>
<p>//user</p>
<p>@server:project.git</p>
<p>或者不指明某个协议 — 这时 Git 会默认使用 SSH ：</p>
<p>1$ git clone user@server:project.git</p>
<p>如果不指明用户，Git 会默认使用当前登录的用户名连接服务器。</p>
<p><strong>优点</strong></p>
<p>使用 SSH 的好处有很多。首先，如果你想拥有对网络仓库的写权限，基本上不可能不使用 SSH。其次，SSH 架设相对比较简单 — SSH 守护进程很常见，很多网络管理员都有一些使用经验，而且很多操作系统都自带了它或者相关的管理工具。再次，通过 SSH 进行访问是安全的 — 所有数据传输都是加密和授权的。最后，和 Git 及本地协议一样，SSH 也很高效，会在传输之前尽可能压缩数据。</p>
<p><strong>缺点</strong></p>
<p>SSH 的限制在于你不能通过它实现仓库的匿名访问。即使仅为读取数据，人们也必须在能通过 SSH 访问主机的前提下才能访问仓库，这使得 SSH 不利于开源的项目。如果你仅仅在公司网络里使用，SSH 可能是你唯一需要使用的协议。如果想允许对项目的匿名只读访问，那么除了为自己推送而架设 SSH 协议之外，还需要支持其他协议以便他人访问读取。</p>
<p><strong>Git 协议</strong></p>
<p>接下来是 Git 协议。这是一个包含在 Git 软件包中的特殊守护进程； 它会监听一个提供类似于 SSH 服务的特定端口（9418），而无需任何授权。打算支持 Git 协议的仓库，需要先创建git-export-daemon-ok 文件 — 它是协议进程提供仓库服务的必要条件 — 但除此之外该服务没有什么安全措施。要么所有人都能克隆 Git 仓库，要么谁也不能。这也意味着该协议通常不能用来进行推送。你可以允许推送操作；然而由于没有授权机制，一旦允许该操作，网络上任何一个知道项目 URL 的人将都有推送权限。不用说，这是十分罕见的情况。</p>
<p><strong>优点</strong></p>
<p>Git 协议是现存最快的传输协议。如果你在提供一个有很大访问量的公共项目，或者一个不需要对读操作进行授权的庞大项目，架设一个 Git 守护进程来供应仓库是个不错的选择。它使用与 SSH 协议相同的数据传输机制，但省去了加密和授权的开销。</p>
<p><strong>缺点</strong></p>
<p>Git 协议消极的一面是缺少授权机制。用 Git 协议作为访问项目的唯一方法通常是不可取的。一般的做法是，同时提供 SSH 接口，让几个开发者拥有推送（写）权限，其他人通过git:// 拥有只读权限。Git 协议可能也是最难架设的协议。它要求有单独的守护进程，需要定制 — 我们将在本章的 “Gitosis” 一节详细介绍它的架设 — 需要设定xinetd 或类似的程序，而这些工作就没那么轻松了。该协议还要求防火墙开放 9418 端口，而企业级防火墙一般不允许对这个非标准端口的访问。大型企业级防火墙通常会封锁这个少见的端口。</p>
<p><strong>HTTP/S 协议</strong></p>
<p>最后还有 HTTP 协议。HTTP 或 HTTPS 协议的优美之处在于架设的简便性。基本上，只需要把 Git 的裸仓库文件放在 HTTP 的根目录下，配置一个特定的post-update 挂钩（hook）就可以<a href="http://www.amazon.cn/gp/product/B007XPTAIS/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;tag=vastwork-23&amp;linkCode=as2&amp;camp=536&amp;creative=3200&amp;creativeASIN=B007XPTAIS" title="搞定(套装共3册) " target="_blank">搞定</a>（Git 挂钩的细节见第 7 章）。此后，每个能访问 Git 仓库所在服务器上 web 服务的人都可以进行克隆操作。下面的操作可以允许通过 HTTP 对仓库进行读取：
1</p>
<p>2
3</p>
<p>4
5$</p>
<p>cd</p>
<p>/var/www/htdocs/</p>
<p>$ git clone --bare</p>
<p>/path/to/git_project</p>
<p>gitproject.git</p>
<p>$</p>
<p>cd</p>
<p>gitproject.git</p>
<p>$</p>
<p>mv</p>
<p>hooks</p>
<p>/post-update</p>
<p>.sample hooks</p>
<p>/post-update</p>
<p>$</p>
<p>chmod</p>
<p>a+x hooks</p>
<p>/post-update</p>
<p>这样就可以了。Git 附带的 post-update 挂钩会默认运行合适的命令（git update-server-info）来确保通过 HTTP 的获取和克隆正常工作。这条命令在你用 SSH 向仓库推送内容时运行；之后，其他人就可以用下面的命令来克隆仓库：</p>
<p>1$ git clone http:</p>
<p>//example</p>
<p>.com</p>
<p>/gitproject</p>
<p>.git</p>
<p>在本例中，我们使用了 Apache 设定中常用的 /var/www/htdocs 路径，不过你可以使用任何静态 web 服务 — 把裸仓库放在它的目录里就行。 Git 的数据是以最基本的静态文件的形式提供的（关于如何提供文件的详情见第 9 章）。</p>
<p>通过 HTTP 进行推送操作也是可能的，不过这种做法不太常见，并且牵扯到复杂的 WebDAV 设定。由于很少用到，本书将略过对该内容的讨论。如果对 HTTP 推送协议感兴趣，不妨打开这个地址看一下操作方法：<a href="http://www.kernel.org/pub/software/scm/git/docs/howto/setup-git-server-over-http.txt" target="_blank">http://www.kernel.org/pub/software/scm/git/docs/howto/setup-git-server-over-http.txt</a> 。通过 HTTP 推送的好处之一是你可以使用任何 WebDAV 服务器，不需要为 Git 设定特殊环境；所以如果主机提供商支持通过 WebDAV 更新网站内容，你也可以使用这项功能。</p>
<p><strong>优点</strong></p>
<p>使用 HTTP 协议的好处是易于架设。几条必要的命令就可以让全世界读取到仓库的内容。花费不过几分钟。HTTP 协议不会占用过多服务器资源。因为它一般只用到静态的 HTTP 服务提供所有数据，普通的 Apache 服务器平均每秒能支撑数千个文件的并发访问 — 哪怕让一个小型服务器超载都很难。</p>
<p>你也可以通过 HTTPS 提供只读的仓库，这意味着你可以加密传输内容；你甚至可以要求客户端使用特定签名的 SSL 证书。一般情况下，如果到了这一步，使用 SSH 公共密钥可能是更简单的方案；不过也存在一些特殊情况，这时通过 HTTPS 使用带签名的 SSL 证书或者其他基于 HTTP 的只读连接授权方式是更好的解决方案。</p>
<p>HTTP 还有个额外的好处：HTTP 是一个如此常见的协议，以至于企业级防火墙通常都允许其端口的通信。</p>
<p><strong>缺点</strong></p>
<p>HTTP 协议的消极面在于，相对来说客户端效率更低。克隆或者下载仓库内容可能会花费更多时间，而且 HTTP 传输的体积和网络开销比其他任何一个协议都大。因为它没有按需供应的能力 — 传输过程中没有服务端的动态计算 — 因而 HTTP 协议经常会被称为<em>傻瓜（dumb）</em>协议。更多 HTTP 协议和其他协议效率上的差异见第 9 。</p>
<p><strong>4.2 在服务器上部署 Git</strong></p>
<p>开始架设 Git 服务器前，需要先把现有仓库导出为裸仓库 — 即一个不包含当前工作目录的仓库。做法直截了当，克隆时用 –bare 选项即可。裸仓库的目录名一般以.git 结尾，像这样：
1</p>
<p>2
$ git clone --bare my_project my_project.git</p>
<p>Initialized empty Git repository</p>
<p>in</p>
<p>/opt/projects/my_project</p>
<p>.git/</p>
<p>该命令的输出或许会让人有些不解。其实 clone 操作基本上相当于 git init 加 git fetch，所以这里出现的其实是git init 的输出，先由它建立一个空目录，而之后传输数据对象的操作并无任何输出，只是悄悄在幕后执行。现在 my_project.git 目录中已经有了一份 Git 目录数据的副本。</p>
<p>整体上的效果大致相当于：
1$</p>
<p>cp</p>
<p>-Rf my_project/.git my_project.git</p>
<p>但在配置文件中有若干小改动，不过对用户来讲，使用方式都一样，不会有什么影响。它仅取出 Git 仓库的必要原始数据，存放在该目录中，而不会另外创建工作目录。</p>
<p><strong>把裸仓库移到服务器上</strong></p>
<p>有了裸仓库的副本后，剩下的就是把它放到服务器上并设定相关协议。假设一个域名为 git.example.com 的服务器已经架设好，并可以通过 SSH 访问，我们打算把所有 Git 仓库储存在/opt/git 目录下。只要把裸仓库复制过去：
1$</p>
<p>scp</p>
<p>-r my_project.git user@ git.example.com:</p>
<p>/opt/git</p>
<p>现在，所有对该服务器有 SSH 访问权限，并可读取 /opt/git 目录的用户都可以用下面的命令克隆该项目：</p>
<p>1$ git clone user@ git.example.com:</p>
<p>/opt/git/my_project</p>
<p>.git</p>
<p>如果某个 SSH 用户对 /opt/git/my_project.git 目录有写权限，那他就有推送权限。如果到该项目目录中运行 git init 命令，并加上 –shared 选项，那么 Git 会自动修改该仓库目录的组权限为可写（译注：实际上 –shared 可以指定其他行为，只是默认为将组权限改为可写并执行 g+sx，所以最后会得到 rws。）。</p>
<p>1</p>
<p>2
3$</p>
<p>ssh</p>
<p>user@ git.example.com</p>
<p>$</p>
<p>cd</p>
<p>/opt/git/my_project</p>
<p>.git</p>
<p>$ git init --bare --shared</p>
<p>由此可见，根据现有的 Git 仓库创建一个裸仓库，然后把它放上你和同事都有 SSH 访问权的服务器是多么容易。现在已经可以开始在同一项目上密切合作了。</p>
<p>值得注意的是，这的的确确是架设一个少数人具有连接权的 Git 服务的全部 — 只要在服务器上加入可以用 SSH 登录的帐号，然后把裸仓库放在大家都有读写权限的地方。一切都准备停当，无需更多。</p>
<p>下面的几节中，你会了解如何扩展到更复杂的设定。这些内容包含如何避免为每一个用户建立一个账户，给仓库添加公共读取权限，架设网页界面，使用 Gitosis 工具等等。然而，只是和几个人在一个不公开的项目上合作的话，仅仅是一个 SSH 服务器和裸仓库就足够了，记住这点就可以了。</p>
<p><strong>小型安装</strong></p>
<p>如果设备较少或者你只想在小型开发团队里尝试 Git ，那么一切都很简单。架设 Git 服务最复杂的地方在于账户管理。如果需要仓库对特定的用户可读，而给另一部分用户读写权限，那么访问和许可的安排就比较困难。</p>
<p><strong>SSH 连接</strong></p>
<p>如果已经有了一个所有开发成员都可以用 SSH 访问的服务器，架设第一个服务器将变得异常简单，几乎什么都不用做（正如上节中介绍的那样）。如果需要对仓库进行更复杂的访问控制，只要使用服务器操作系统的本地文件访问许可机制就行了。</p>
<p>如果需要团队里的每个人都对仓库有写权限，又不能给每个人在服务器上建立账户，那么提供 SSH 连接就是唯一的选择了。我们假设用来共享仓库的服务器已经安装了 SSH 服务，而且你通过它访问服务器。</p>
<p>有好几个办法可以让团队的每个人都有访问权。第一个办法是给每个人建立一个账户，直截了当但略过繁琐。反复运行 adduser 并给所有人设定临时密码可不是好玩的。</p>
<p>第二个办法是在主机上建立一个 git 账户，让每个需要写权限的人发送一个 SSH 公钥，然后将其加入 git 账户的~/.ssh/authorized_keys 文件。这样一来，所有人都将通过 git 账户访问主机。这丝毫不会影响提交的数据 — 访问主机用的身份不会影响提交对象的提交者信息。</p>
<p>另一个办法是让 SSH 服务器通过某个 LDAP 服务，或者其他已经设定好的集中授权机制，来进行授权。只要每个人都能获得主机的 shell 访问权，任何可用的 SSH 授权机制都能达到相同效果。</p>
<p><strong>4.3 生成 SSH 公钥</strong></p>
<p>大多数 Git 服务器都会选择使用 SSH 公钥来进行授权。系统中的每个用户都必须提供一个公钥用于授权，没有的话就要生成一个。生成公钥的过程在所有操作系统上都差不多。首先先确认一下是否已经有一个公钥了。SSH 公钥默认储存在账户的主目录下的~/.ssh 目录。进去看看：
1</p>
<p>2
3</p>
<p>4
$</p>
<p>cd</p>
<p>~/.</p>
<p>ssh</p>
<p>$</p>
<p>ls</p>
<p>authorized_keys2 id_dsa known_hosts</p>
<p>config id_dsa.pub</p>
<p>关键是看有没有用 something 和 something.pub 来命名的一对文件，这个 something 通常就是 id_dsa 或 id_rsa。有 .pub 后缀的文件就是公钥，另一个文件则是密钥。假如没有这些文件，或者干脆连.ssh 目录都没有，可以用 ssh-keygen 来创建。该程序在 Linux/Mac 系统上由 SSH 包提供，而在 Windows 上则包含在 MSysGit 包里：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9$</p>
<p>ssh</p>
<p>-keygen</p>
<p>Generating public</p>
<p>/private</p>
<p>rsa key pair.</p>
<p>Enter</p>
<p>file</p>
<p>in</p>
<p>which</p>
<p>to save the key (</p>
<p>/Users/schacon/</p>
<p>.</p>
<p>ssh</p>
<p>/id_rsa</p>
<p>):</p>
<p>Enter passphrase (empty</p>
<p>for</p>
<p>no passphrase):</p>
<p>Enter same passphrase again:</p>
<p>Your identification has been saved</p>
<p>in</p>
<p>/Users/schacon/</p>
<p>.</p>
<p>ssh</p>
<p>/id_rsa</p>
<p>.</p>
<p>Your public key has been saved</p>
<p>in</p>
<p>/Users/schacon/</p>
<p>.</p>
<p>ssh</p>
<p>/id_rsa</p>
<p>.pub.</p>
<p>The key fingerprint is:</p>
<p>43:c5:5b:5f:b1:f1:50:43:ad:20:a6:92:6a:1f:9a:3a schacon@ agadorlaptop.</p>
<p>local</p>
<p>它先要求你确认保存公钥的位置（.ssh/id_rsa），然后它会让你重复一个密码两次，如果不想在使用公钥的时候输入密码，可以留空。</p>
<p>现在，所有做过这一步的用户都得把它们的公钥给你或者 Git 服务器的管理员（假设 SSH 服务被设定为使用公钥机制）。他们只需要复制 .pub 文件的内容然后发邮件给管理员。公钥的样子大致如下：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7$</p>
<p>cat</p>
<p>~/.</p>
<p>ssh</p>
<p>/id_rsa</p>
<p>.pub</p>
<p>ssh</p>
<p>-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAklOUpkDHrfHY17SbrmTIpNLTGK9Tjom</p>
<p>/BWDSU</p>
<p>GPl+nafzlHDTYW7hdI4yZ5ew18JH4JW9jbhUFrviQzM7xlELEVf4h9lFX5QVkbPppSwg0cda3</p>
<p>Pbv7kOdJ</p>
<p>/MTyBlWXFCR</p>
<p>+HAo3FXRitBqxiX1nKhXpHAZsMciLq8V6RjsNAQwdsdMFvSlVK</p>
<p>/7XA</p>
<p>t3FaoJoAsncM1Q9x5+3V0Ww68</p>
<p>/eIFmb1zuUFljQJKprrX88XypNDvjYNby6vw/Pb0rwert/En</p>
<p>mZ+AW4OZPnTPI89ZPmVMLuayrD2cE86Z</p>
<p>/il8b</p>
<p>+gw3r3+1nKatmIkjn2so1d01QraTlMqVSsbx</p>
<p>NrRFi9wrf+M7Q== schacon@ agadorlaptop.</p>
<p>local</p>
<p>关于在多个操作系统上设立相同 SSH 公钥的教程，可以查阅 <a href="http://blog.jobbole.com/6492/" title="GitHub如何运作：时间并不决定一切" target="_blank">GitHub</a> 上有关 SSH 公钥的向导：<a href="http://github.com/guides/providing-your-ssh-key。" target="_blank">http://github.com/guides/providing-your-ssh-key。</a></p>
<p><strong>4.4 架设服务器</strong></p>
<p>现在我们过一边服务器端架设 SSH 访问的流程。本例将使用 authorized_keys 方法来给用户授权。我们还将假定使用类似 Ubuntu 这样的标准 Linux 发行版。首先，创建一个名为 ‘git’ 的用户，并为其创建一个.ssh 目录。
1</p>
<p>2
3</p>
<p>4
$</p>
<p>sudo</p>
<p>adduser git</p>
<p>$</p>
<p>su</p>
<p>git</p>
<p>$</p>
<p>cd</p>
<p>$</p>
<p>mkdir</p>
<p>.</p>
<p>ssh</p>
<p>接下来，把开发者的 SSH 公钥添加到这个用户的 authorized_keys 文件中。假设你通过电邮收到了几个公钥并存到了临时文件里。重复一下，公钥大致看起来是这个样子：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7$</p>
<p>cat</p>
<p>/tmp/id_rsa</p>
<p>.john.pub</p>
<p>ssh</p>
<p>-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCB007n</p>
<p>/ww</p>
<p>+ouN4gSLKssMxXnBOvf9LGt4L</p>
<p>ojG6rs6hPB09j9R</p>
<p>/T17/x4lhJA0F3FR1rP6kYBRsWj2aThGw6HXLm9/5zytK6Ztg3RPKK</p>
<p>+4k</p>
<p>Yjh6541NYsnEAZuXz0jTTyAUfrtU3Z5E003C4oxOj6H0rfIF1kKI9MAQLMdpGW1GYEIgS9Ez</p>
<p>Sdfd8AcCIicTDWbqLAcU4UpkaX8KyGlLwsNuuGztobF8m72ALC</p>
<p>/nLF6JLtPofwFBlgc</p>
<p>+myiv</p>
<p>O7TCUSBdLQlgMVOFq1I2uPWQOkOWQAHukEOmfjy2jctxSDBQ220ymjaNsHT4kgtZg2AYYgPq</p>
<p>dAv8JggJICUvax2T9va5 gsg-keypair</p>
<p>只要把它们逐个追加到 authorized_keys 文件尾部即可：</p>
<p>1</p>
<p>2
3$</p>
<p>cat</p>
<p>/tmp/id_rsa</p>
<p>.john.pub &gt;&gt; ~/.</p>
<p>ssh</p>
<p>/authorized_keys</p>
<p>$</p>
<p>cat</p>
<p>/tmp/id_rsa</p>
<p>.josie.pub &gt;&gt; ~/.</p>
<p>ssh</p>
<p>/authorized_keys</p>
<p>$</p>
<p>cat</p>
<p>/tmp/id_rsa</p>
<p>.jessica.pub &gt;&gt; ~/.</p>
<p>ssh</p>
<p>/authorized_keys</p>
<p>现在可以用 –bare 选项运行 git init 来建立一个裸仓库，这会初始化一个不包含工作目录的仓库。</p>
<p>1</p>
<p>2
3</p>
<p>4
$</p>
<p>cd</p>
<p>/opt/git</p>
<p>$</p>
<p>mkdir</p>
<p>project.git</p>
<p>$</p>
<p>cd</p>
<p>project.git</p>
<p>$ git --bare init</p>
<p>这时，Join，Josie 或者 Jessica 就可以把它加为远程仓库，推送一个分支，从而把第一个版本的项目文件上传到仓库里了。值得注意的是，每次添加一个新项目都需要通过 shell 登入主机并创建一个裸仓库目录。我们不妨以gitserver 作为 git 用户及项目仓库所在的主机名。如果在网络内部运行该主机，并在 DNS 中设定 gitserver 指向该主机，那么以下这些命令都是可用的：</p>
<p>/# 在 John 的电脑上
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
$</p>
<p>cd</p>
<p>myproject</p>
<p>$ git init</p>
<p>$ git add .</p>
<p>$ git commit -m</p>
<p>&#39;initial commit&#39;</p>
<p>$ git remote add origin git@gitserver:</p>
<p>/opt/git/project</p>
<p>.git</p>
<p>$ git push origin master</p>
<p>这样，其他人的克隆和推送也一样变得很简单：</p>
<p>1</p>
<p>2
3</p>
<p>4
$ git clone git@gitserver:</p>
<p>/opt/git/project</p>
<p>.git</p>
<p>$ vim README</p>
<p>$ git commit -am</p>
<p>&#39;fix for the README file&#39;</p>
<p>$ git push origin master</p>
<p>用这个方法可以很快捷地为少数几个开发者架设一个可读写的 Git 服务。</p>
<p>作为一个额外的防范措施，你可以用 Git 自带的 git-shell 工具限制 git 用户的活动范围。只要把它设为git 用户登入的 shell，那么该用户就无法使用普通的 bash 或者 csh 什么的 shell 程序。编辑 /etc/passwd 文件：
1$</p>
<p>sudo</p>
<p>vim</p>
<p>/etc/passwd</p>
<p>在文件末尾，你应该能找到类似这样的行：</p>
<p>1git:x:1000:1000::</p>
<p>/home/git</p>
<p>:</p>
<p>/bin/sh</p>
<p>把 bin/sh 改为 /usr/bin/git-shell （或者用 which git-shell 查看它的实际安装路径）。该行修改后的样子如下：</p>
<p>1git:x:1000:1000::</p>
<p>/home/git</p>
<p>:</p>
<p>/usr/bin/git-shell</p>
<p>现在 git 用户只能用 SSH 连接来推送和获取 Git 仓库，而不能直接使用主机 shell。尝试普通 SSH 登录的话，会看到下面这样的拒绝信息：</p>
<p>1</p>
<p>2
3$</p>
<p>ssh</p>
<p>git@gitserver</p>
<p>fatal: What</p>
<p>do</p>
<p>you think I am? A shell?</p>
<p>Connection to gitserver closed.</p>
<p><strong>4.5 公共访问</strong></p>
<p>匿名的读取权限该怎么实现呢？也许除了内部私有的项目之外，你还需要托管一些开源项目。或者因为要用一些自动化的服务器来进行编译，或者有一些经常变化的服务器群组，而又不想整天生成新的 SSH 密钥 — 总之，你需要简单的匿名读取权限。</p>
<p>或许对小型的配置来说最简单的办法就是运行一个静态 web 服务，把它的根目录设定为 Git 仓库所在的位置，然后开启本章第一节提到的 post-update 挂钩。这里继续使用之前的例子。假设仓库处于/opt/git 目录，主机上运行着 Apache 服务。重申一下，任何 web 服务程序都可以达到相同效果；作为范例，我们将用一些基本的 Apache 设定来展示大体需要的步骤。</p>
<p>首先，开启挂钩：
1</p>
<p>2
3$</p>
<p>cd</p>
<p>project.git</p>
<p>$</p>
<p>mv</p>
<p>hooks</p>
<p>/post-update</p>
<p>.sample hooks</p>
<p>/post-update</p>
<p>$</p>
<p>chmod</p>
<p>a+x hooks</p>
<p>/post-update</p>
<p>如果用的是 Git 1.6 之前的版本，则可以省略 mv 命令 — Git 是从较晚的版本才开始在挂钩实例的结尾添加 .sample 后缀名的。</p>
<p>post-update 挂钩是做什么的呢？其内容大致如下：
1</p>
<p>2
3$</p>
<p>cat</p>
<p>.git</p>
<p>/hooks/post-update</p>
<p>/#!/bin/sh</p>
<p>exec</p>
<p>git-update-server-info</p>
<p>意思是当通过 SSH 向服务器推送时，Git 将运行这个 git-update-server-info 命令来更新匿名 HTTP 访问获取数据时所需要的文件。</p>
<p>接下来，在 Apache 配置文件中添加一个 VirtualHost 条目，把文档根目录设为 Git 项目所在的根目录。这里我们假定 DNS 服务已经配置好，会把对.gitserver 的请求发送到这台主机：</p>
<p>1</p>
<p>2
3</p>
<p>4
ServerName git.gitserver</p>
<p>DocumentRoot</p>
<p>/opt/git
Order allow, deny</p>
<p>allow from all</p>
<p>另外，需要把 /opt/git 目录的 Unix 用户组设定为 www-data ，这样 web 服务才可以读取仓库内容，因为运行 CGI 脚本的 Apache 实例进程默认就是以该用户的身份起来的：
1$</p>
<p>chgrp</p>
<p>-R www-data</p>
<p>/opt/git</p>
<p>重启 Apache 之后，就可以通过项目的 URL 来克隆该目录下的仓库了。</p>
<p>1$ git clone http:</p>
<p>//git</p>
<p>.gitserver</p>
<p>/project</p>
<p>.git</p>
<p>这一招可以让你在几分钟内为相当数量的用户架设好基于 HTTP 的读取权限。另一个提供非授权访问的简单方法是开启一个 Git 守护进程，不过这将要求该进程作为后台进程常驻 — 接下来的这一节就要讨论这方面的细节。</p>
<p><strong>4.6 GitWeb</strong></p>
<p>现在我们的项目已经有了可读可写和只读的连接方式，不过如果能有一个简单的 web 界面访问就更好了。Git 自带一个叫做 GitWeb 的 CGI 脚本，运行效果可以到<a href="http://git.kernel.org" target="_blank">http://git.kernel.org</a> 这样的站点体验下（见图 4-1）。</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server1.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>Figure 4-1. 基于网页的 GitWeb 用户界面</p>
<p>如果想看看自己项目的效果，不妨用 Git 自带的一个命令，可以使用类似 lighttpd 或 webrick 这样轻量级的服务器启动一个临时进程。如果是在 Linux 主机上，通常都预装了lighttpd ，可以到项目目录中键入 git instaweb 来启动。如果用的是 Mac ，Leopard 预装了 Ruby，所以webrick 应该是最好的选择。如果要用 lighttpd 以外的程序来启动 git instaweb，可以通过–httpd 选项指定：
1</p>
<p>2
3$ git instaweb --httpd=webrick</p>
<p>[2009-02-21 10:02:21] INFO WEBrick 1.3.1</p>
<p>[2009-02-21 10:02:21] INFO ruby 1.8.6 (2008-03-03) [universal-darwin9.0]</p>
<p>这会在 1234 端口开启一个 HTTPD 服务，随之在<a href="http://blog.jobbole.com/12749/" title="浏览器" target="_blank">浏览器</a>中显示该页，十分简单。关闭服务时，只需在原来的命令后面加上 –stop 选项就可以了：</p>
<p>1$ git instaweb --httpd=webrick --stop</p>
<p>如果需要为团队或者某个开源项目长期运行 GitWeb，那么 CGI 脚本就要由正常的网页服务来运行。一些 Linux 发行版可以通过 apt 或yum 安装一个叫做 gitweb 的软件包，不妨首先尝试一下。我们将快速介绍一下手动安装 GitWeb 的流程。首先，你需要 Git 的源码，其中带有 GitWeb，并能生成定制的 CGI 脚本：</p>
<p>1</p>
<p>2
3</p>
<p>4
5$ git clone git:</p>
<p>//git</p>
<p>.kernel.org</p>
<p>/pub/scm/git/git</p>
<p>.git</p>
<p>$</p>
<p>cd</p>
<p>git/</p>
<p>$</p>
<p>make</p>
<p>GITWEB_PROJECTROOT=</p>
<p>&quot;/opt/git&quot;</p>
<p>\</p>
<p>prefix=</p>
<p>/usr</p>
<p>gitweb</p>
<p>/gitweb</p>
<p>.cgi</p>
<p>$</p>
<p>sudo</p>
<p>cp</p>
<p>-Rf gitweb</p>
<p>/var/www/</p>
<p>注意，通过指定 GITWEB_PROJECTROOT 变量告诉编译命令 Git 仓库的位置。然后，设置 Apache 以 CGI 方式运行该脚本，添加一个 VirtualHost 配置：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
ServerName gitserver</p>
<p>DocumentRoot</p>
<p>/var/www/gitweb
Options ExecCGI +FollowSymLinks +SymLinksIfOwnerMatch</p>
<p>AllowOverride All</p>
<p>order allow,deny</p>
<p>Allow from all</p>
<p>AddHandler cgi-script cgi</p>
<p>DirectoryIndex gitweb.cgi</p>
<p>不难想象，GitWeb 可以使用任何兼容 CGI 的网页服务来运行；如果偏向使用其他 web 服务器，配置也不会很麻烦。现在，通过 <a href="http://gitserver" target="_blank">http://gitserver</a> 就可以在线访问仓库了，在<a href="http://git.server" target="_blank">http://git.server</a> 上还可以通过 HTTP 克隆和获取仓库的内容。</p>
<p><strong>4.7 Gitosis</strong></p>
<p>把所有用户的公钥保存在 authorized_keys 文件的做法，只能凑和一阵子，当用户数量达到几百人的规模时，管理起来就会十分痛苦。每次改删用户都必须登录服务器不去说，这种做法还缺少必要的权限管理 — 每个人都对所有项目拥有完整的读写权限。</p>
<p>幸好我们还可以选择应用广泛的 Gitosis 项目。简单地说，Gitosis 就是一套用来管理 authorized_keys 文件和实现简单连接限制的脚本。有趣的是，用来添加用户和设定权限的并非通过网页程序，而只是管理一个特殊的 Git 仓库。你只需要在这个特殊仓库内做好相应的设定，然后推送到服务器上，Gitosis 就会随之改变运行策略，听起来就很酷，对吧？</p>
<p>Gitosis 的安装算不上傻瓜化，但也不算太难。用 Linux 服务器架设起来最简单 — 以下例子中，我们使用装有 Ubuntu 8.10 系统的服务器。</p>
<p>Gitosis 的工作依赖于某些 Python 工具，所以首先要安装 Python 的 setuptools 包，在 Ubuntu 上称为 python-setuptools：
1$ apt-get</p>
<p>install</p>
<p>python-setuptools</p>
<p>接下来，从 Gitosis 项目主页克隆并安装：</p>
<p>1</p>
<p>2
3$ git clone git:</p>
<p>//eagain</p>
<p>.net</p>
<p>/gitosis</p>
<p>.git</p>
<p>$</p>
<p>cd</p>
<p>gitosis</p>
<p>$</p>
<p>sudo</p>
<p>python setup.py</p>
<p>install</p>
<p>这会安装几个供 Gitosis 使用的工具。默认 Gitosis 会把 /home/git 作为存储所有 Git 仓库的根目录，这没什么不好，不过我们之前已经把项目仓库都放在/opt/git 里面了，所以为方便起见，我们可以做一个符号连接，直接划转过去，而不必重新配置：</p>
<p>1$</p>
<p>ln</p>
<p>-s</p>
<p>/opt/git</p>
<p>/home/git/repositories</p>
<p>Gitosis 将会帮我们管理用户公钥，所以先把当前控制文件改名备份，以便稍后重新添加，准备好让 Gitosis 自动管理 authorized_keys 文件：</p>
<p>1$</p>
<p>mv</p>
<p>/home/git/</p>
<p>.</p>
<p>ssh</p>
<p>/authorized_keys</p>
<p>/home/git/</p>
<p>.</p>
<p>ssh</p>
<p>/ak</p>
<p>.bak</p>
<p>接下来，如果之前把 git 用户的登录 shell 改为 git-shell 命令的话，先恢复 ‘git’ 用户的登录 shell。改过之后，大家仍然无法通过该帐号登录（译注：因为authorized_keys 文件已经没有了。），不过不用担心，这会交给 Gitosis 来实现。所以现在先打开 /etc/passwd 文件，把这行：</p>
<p>1git:x:1000:1000::</p>
<p>/home/git</p>
<p>:</p>
<p>/usr/bin/git-shell</p>
<p>改回:</p>
<p>1git:x:1000:1000::</p>
<p>/home/git</p>
<p>:</p>
<p>/bin/sh</p>
<p>好了，现在可以初始化 Gitosis 了。你可以用自己的公钥执行 </p>
<p>gitosis-init
 命令，要是公钥不在服务器上，先临时复制一份：</p>
<p>1</p>
<p>2
3$</p>
<p>sudo</p>
<p>-H -u git gitosis-init &lt;</p>
<p>/tmp/id_dsa</p>
<p>.pub</p>
<p>Initialized empty Git repository</p>
<p>in</p>
<p>/opt/git/gitosis-admin</p>
<p>.git/
Reinitialized existing Git repository</p>
<p>in</p>
<p>/opt/git/gitosis-admin</p>
<p>.git/</p>
<p>这样该公钥的拥有者就能修改用于配置 Gitosis 的那个特殊 Git 仓库了。接下来，需要手工对该仓库中的 </p>
<p>post-update
 脚本加上可执行权限：</p>
<p>1$</p>
<p>sudo</p>
<p>chmod</p>
<p>755</p>
<p>/opt/git/gitosis-admin</p>
<p>.git</p>
<p>/hooks/post-update</p>
<p>基本上就算是好了。如果设定过程没出什么差错，现在可以试一下用初始化 Gitosis 的公钥的拥有者身份 SSH 登录服务器，应该会看到类似下面这样：</p>
<p>1</p>
<p>2
3</p>
<p>4
$</p>
<p>ssh</p>
<p>git@gitserver</p>
<p>PTY allocation request failed on channel 0
fatal: unrecognized</p>
<p>command</p>
<p>&#39;gitosis-serve schacon@quaternion&#39;</p>
<p>Connection to gitserver closed.</p>
<p>说明 Gitosis 认出了该用户的身份，但由于没有运行任何 Git 命令，所以它切断了连接。那么，现在运行一个实际的 Git 命令 — 克隆 Gitosis 的控制仓库：</p>
<p>/# 在你本地计算机上</p>
<p>$ git clone git@gitserver:gitosis-admin.git</p>
<p>这会得到一个名为 </p>
<p>gitosis-admin
 的工作目录，主要由两部分组成：
$ cd gitosis-admin</p>
<p>$ find .
./gitosis.conf</p>
<p>./keydir
./keydir/scott.pub</p>
<p>gitosis.conf
 文件是用来设置用户、仓库和权限的控制文件。</p>
<p>keydir
 目录则是保存所有具有访问权限用户公钥的地方— 每人一个。在</p>
<p>keydir
 里的文件名（比如上面的 </p>
<p>scott.pub
）应该跟你的不一样 — Gitosis 会自动从使用 </p>
<p>gitosis-init
 脚本导入的公钥尾部的描述中获取该名字。</p>
<p>看一下 </p>
<p>gitosis.conf
 文件的内容，它应该只包含与刚刚克隆的 </p>
<p>gitosis-admin
 相关的信息：
$ cat gitosis.conf</p>
<p>[gitosis]
[group gitosis-admin]</p>
<p>writable = gitosis-admin
members = scott</p>
<p>它显示用户 </p>
<p>scott
 — 初始化 Gitosis 公钥的拥有者 — 是唯一能管理 </p>
<p>gitosis-admin
 项目的人。</p>
<p>现在我们来添加一个新项目。为此我们要建立一个名为 </p>
<p>mobile
 的新段落，在其中罗列手机开发团队的开发者，以及他们拥有写权限的项目。由于 ‘scott’ 是系统中的唯一用户，我们把他设为唯一用户，并允许他读写名为</p>
<p>iphone_project
 的新项目：
[group mobile]</p>
<p>writable = iphone_project
members = scott</p>
<p>修改完之后，提交 </p>
<p>gitosis-admin
 里的改动，并推送到服务器使其生效：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
$ git commit -am</p>
<p>&#39;add iphone_project and mobile group&#39;</p>
<p>[master]: created 8962da8:</p>
<p>&quot;changed name&quot;</p>
<p>1 files changed, 4 insertions(+), 0 deletions(-)</p>
<p>$ git push
Counting objects: 5,</p>
<p>done</p>
<p>.</p>
<p>Compressing objects: 100% (2</p>
<p>/2</p>
<p>),</p>
<p>done</p>
<p>.
Writing objects: 100% (3</p>
<p>/3</p>
<p>), 272 bytes,</p>
<p>done</p>
<p>.</p>
<p>Total 3 (delta 1), reused 0 (delta 0)
To git@gitserver:</p>
<p>/opt/git/gitosis-admin</p>
<p>.git</p>
<p>fb27aec..8962da8  master -&gt; master</p>
<p>在新工程 </p>
<p>iphone_project
 里首次推送数据到服务器前，得先设定该服务器地址为远程仓库。但你不用事先到服务器上手工创建该项目的裸仓库— Gitosis 会在第一次遇到推送时自动创建：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
$ git remote add origin git@gitserver:iphone_project.git</p>
<p>$ git push origin master</p>
<p>Initialized empty Git repository</p>
<p>in</p>
<p>/opt/git/iphone_project</p>
<p>.git/</p>
<p>Counting objects: 3,</p>
<p>done</p>
<p>.</p>
<p>Writing objects: 100% (3</p>
<p>/3</p>
<p>), 230 bytes,</p>
<p>done</p>
<p>.</p>
<p>Total 3 (delta 0), reused 0 (delta 0)</p>
<p>To git@gitserver:iphone_project.git</p>
<p>/* [new branch] master -&gt; master</p>
<p>请注意，这里不用指明完整路径（实际上，如果加上反而没用），只需要一个冒号加项目名字即可 — Gitosis 会自动帮你映射到实际位置。</p>
<p>要和朋友们在一个项目上协同工作，就得重新添加他们的公钥。不过这次不用在服务器上一个一个手工添加到 ~/.ssh/authorized_keys 文件末端，而只需管理keydir 目录中的公钥文件。文件的命名将决定在 gitosis.conf 中对用户的标识。现在我们为 John，Josie 和 Jessica 添加公钥：
1</p>
<p>2
3$</p>
<p>cp</p>
<p>/tmp/id_rsa</p>
<p>.john.pub keydir</p>
<p>/john</p>
<p>.pub</p>
<p>$</p>
<p>cp</p>
<p>/tmp/id_rsa</p>
<p>.josie.pub keydir</p>
<p>/josie</p>
<p>.pub</p>
<p>$</p>
<p>cp</p>
<p>/tmp/id_rsa</p>
<p>.jessica.pub keydir</p>
<p>/jessica</p>
<p>.pub</p>
<p>然后把他们都加进 ‘mobile’ 团队，让他们对 iphone_project 具有读写权限：</p>
<p>1</p>
<p>2
3[group mobile]</p>
<p>writable = iphone_project</p>
<p>members = scott john josie jessica</p>
<p>如果你提交并推送这个修改，四个用户将同时具有该项目的读写权限。</p>
<p>Gitosis 也具有简单的访问控制功能。如果想让 John 只有读权限，可以这样做：
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
[group mobile]</p>
<p>writable = iphone_project</p>
<p>members = scott josie jessica</p>
<p>[group mobile_ro]</p>
<p>readonly</p>
<p>= iphone_project</p>
<p>members = john</p>
<p>现在 John 可以克隆和获取更新，但 Gitosis 不会允许他向项目推送任何内容。像这样的组可以随意创建，多少不限，每个都可以包含若干不同的用户和项目。甚至还可以指定某个组为成员之一（在组名前加上@ 前缀），自动继承该组的成员：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
[group mobile_committers]</p>
<p>members = scott josie jessica
[group mobile]</p>
<p>writable = iphone_project</p>
<p>members = @mobile_committers</p>
<p>[group mobile_2]</p>
<p>writable = another_iphone_project</p>
<p>members = @mobile_committers john</p>
<p>如果遇到意外问题，试试看把 loglevel=DEBUG 加到 [gitosis] 的段落（译注：把日志设置为调试级别，记录更详细的运行信息。）。如果一不小心搞错了配置，失去了推送权限，也可以手工修改服务器上的/home/git/.gitosis.conf 文件 — Gitosis 实际是从该文件读取信息的。它在得到推送数据时，会把新的 gitosis.conf 存到该路径上。所以如果你手工编辑该文件的话，它会一直保持到下次向 gitosis-admin 推送新版本的配置内容为止。</p>
<p><strong>4.8 Gitolite</strong></p>
<p>Note: the latest copy of this section of the ProGit book is always available within thegitolite documentation. The author would also like to humbly state that, while this section is accurate, andcan (and often has) been used to install gitolite without reading any other documentation, it is of necessity not complete, and cannot completely replace the enormous amount of documentation that gitolite comes with.</p>
<p>Git has started to become very popular in corporate environments, which tend to have some additional requirements in terms of access control. Gitolite was originally created to help with those requirements, but it turns out that it’s equally useful in the open source world: the Fedora Project controls access to their package management repositories (over 10,000 of them!) using gitolite, and this is probably the largest gitolite installation anywhere too.</p>
<p>Gitolite allows you to specify permissions not just by repository, but also by branch or tag names within each repository. That is, you can specify that certain people (or groups of people) can only push certain “refs” (branches or tags) but not others.</p>
<p><strong>Installing</strong></p>
<p>Installing Gitolite is very easy, even if you don’t read the extensive documentation that comes with it. You need an account on a Unix server of some kind; various Linux flavours, and Solaris 10, have been tested. You do not need root access, assuming git, perl, and an openssh compatible ssh server are already installed. In the examples below, we will use thegitolite account on a host called gitserver.</p>
<p>Gitolite is somewhat unusual as far as “server” software goes – access is via ssh, and so every userid on the server is a potential “gitolite host”. As a result, there is a notion of “installing” the software itself, and then “setting up” a user as a “gitolite host”.</p>
<p>Gitolite has 4 methods of installation. People using Fedora or Debian systems can obtain an RPM or a DEB and install that. People with root access can install it manually. In these two methods, any user on the system can then become a “gitolite host”.</p>
<p>People without root access can install it within their own userids. And finally, gitolite can be installed by running a scripton the workstation, from a bash shell. (Even the bash that comes with msysgit will do, in case you’re wondering.)</p>
<p>We will describe this last method in this article; for the other methods please see the documentation.</p>
<p>You start by obtaining public key based access to your server, so that you can log in from your workstation to the server without getting a password prompt. The following method works on Linux; for other workstation OSs you may have to do this manually. We assume you already had a key pair generated using ssh-keygen.
1$</p>
<p>ssh</p>
<p>-copy-</p>
<p>id</p>
<p>-i ~/.</p>
<p>ssh</p>
<p>/id_rsa</p>
<p>gitolite@gitserver</p>
<p>This will ask you for the password to the gitolite account, and then set up public key access. This isessential for the install script, so check to make sure you can run a command without getting a password prompt:</p>
<p>1</p>
<p>2
$</p>
<p>ssh</p>
<p>gitolite@gitserver</p>
<p>pwd</p>
<p>/home/gitolite</p>
<p>Next, you clone Gitolite from the project’s main site and run the “easy install” script (the third argument is your name as you would like it to appear in the resulting gitolite-admin repository):</p>
<p>1</p>
<p>2
3$ git clone git:</p>
<p>//github</p>
<p>.com</p>
<p>/sitaramc/gitolite</p>
<p>$</p>
<p>cd</p>
<p>gitolite</p>
<p>/src</p>
<p>$ .</p>
<p>/gl-easy-install</p>
<p>-q gitolite gitserver sitaram</p>
<p>And you’re done! Gitolite has now been installed on the server, and you now have a brand new repository calledgitolite-admin in the home directory of your workstation. You administer your gitolite setup by making changes to this repository and pushing.</p>
<p>That last command does produce a fair amount of output, which might be interesting to read. Also, the first time you run this, a new keypair is created; you will have to choose a passphrase or hit enter for none. Why a second keypair is needed, and how it is used, is explained in the “ssh troubleshooting” document that comes with Gitolite. (Hey the documentation has to be good forsomething!)</p>
<p>Repos named gitolite-admin and testing are created on the server by default. If you wish to clone either of these locally (from an account that has SSH console access to the gitolite account viaauthorized_keys), type:
1</p>
<p>2
$ git clone gitolite:gitolite-admin</p>
<p>$ git clone gitolite:testing</p>
<p>To clone these same repos from any other account:</p>
<p>1</p>
<p>2
$ git clone gitolite@servername:gitolite-admin</p>
<p>$ git clone gitolite@servername:testing</p>
<p><strong>Customising the Install</strong></p>
<p>While the default, quick, install works for most people, there are some ways to customise the install if you need to. If you omit the-q argument, you get a “verbose” mode install – detailed information on what the install is doing at each step. The verbose mode also allows you to change certain server-side parameters, such as the location of the actual repositories, by editing an “rc” file that the server uses. This “rc” file is liberally commented so you should be able to make any changes you need quite easily, save it, and continue. This file also contains various settings that you can change to enable or disable some of gitolite’s advanced features.</p>
<p>Config File and Access Control Rules
Once the install is done, you switch to the gitolite-admin repository (placed in your HOME directory) and poke around to see what you got:</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9</p>
<p>10
11</p>
<p>12
13$</p>
<p>cd</p>
<p>~</p>
<p>/gitolite-admin/</p>
<p>$</p>
<p>ls</p>
<p>conf/ keydir/</p>
<p>$</p>
<p>find</p>
<p>conf keydir -</p>
<p>type</p>
<p>f</p>
<p>conf</p>
<p>/gitolite</p>
<p>.conf</p>
<p>keydir</p>
<p>/sitaram</p>
<p>.pub</p>
<p>$</p>
<p>cat</p>
<p>conf</p>
<p>/gitolite</p>
<p>.conf</p>
<p>/#gitolite conf</p>
<p>/# please see conf/example.conf for details on syntax and features</p>
<p>repo gitolite-admin</p>
<p>RW+ = sitaram</p>
<p>repo testing</p>
<p>RW+ = @all</p>
<p>Notice that “sitaram” (the last argument in the gl-easy-install command you gave earlier) has read-write permissions on thegitolite-admin repository as well as a public key file of the same name.</p>
<p>The config file syntax for gitolite is liberally documented in conf/example.conf, so we’ll only mention some highlights here.</p>
<p>You can group users or repos for convenience. The group names are just like macros; when defining them, it doesn’t even matter whether they are projects or users; that distinction is only made when youuse the “macro”.</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
@oss_repos = linux perl rakudo git gitolite</p>
<p>@secret_repos = fenestra pear
@admins = scott</p>
<p>/# Adams, not Chacon, sorry <img src="http://blog.jobbole.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" class="wp-smiley"></p>
<p>@interns = ashok</p>
<p>/# get the spelling right, Scott!</p>
<p>@engineers = sitaram dilbert wally alice</p>
<p>@staff = @admins @engineers @interns</p>
<p>You can control permissions at the “ref” level. In the following example, interns can only push the “int” branch. Engineers can push any branch whose name starts with “eng-“, and tags that start with “rc” followed by a digit. And the admins can do anything (including rewind) to any ref.</p>
<p>1</p>
<p>2
3</p>
<p>4
5repo @oss_repos</p>
<p>RW int$ = @interns</p>
<p>RW eng- = @engineers</p>
<p>RW refs</p>
<p>/tags/rc</p>
<p>[0-9] = @engineers</p>
<p>RW+ = @admins</p>
<p>The expression after the RW or RW+ is a regular expression (regex) that the refname (ref) being pushed is matched against. So we call it a “refex”! Of course, a refex can be far more powerful than shown here, so don’t overdo it if you’re not comfortable with perl regexes.</p>
<p>Also, as you probably guessed, Gitolite prefixes refs/heads/ as a syntactic convenience if the refex does not begin withrefs/.</p>
<p>An important feature of the config file’s syntax is that all the rules for a repository need not be in one place. You can keep all the common stuff together, like the rules for alloss_repos shown above, then add specific rules for specific cases later on, like so:
1</p>
<p>2
repo gitolite</p>
<p>RW+ = sitaram</p>
<p>That rule will just get added to the ruleset for the gitolite repository.</p>
<p>At this point you might be wondering how the access control rules are actually applied, so let’s go over that briefly.</p>
<p>There are two levels of access control in gitolite. The first is at the repository level; if you have read (or write) access toany ref in the repository, then you have read (or write) access to the repository.</p>
<p>The second level, applicable only to “write” access, is by branch or tag within a repository. The username, the access being attempted (W or+), and the refname being updated are known. The access rules are checked in order of appearance in the config file, looking for a match for this combination (but remember that the refname is regex-matched, not merely string-matched). If a match is found, the push succeeds. A fallthrough results in access being denied.</p>
<p><strong>Advanced Access Control with “deny” rules</strong></p>
<p>So far, we’ve only seen permissions to be one or R, RW, orRW+. However, gitolite allows another permission: -, standing for “deny”. This gives you a lot more power, at the expense of some complexity, because now fallthrough is not theonly way for access to be denied, so the order of the rules now matters!</p>
<p>Let us say, in the situation above, we want engineers to be able to rewind any branchexcept master and integ. Here’s how to do that:
1</p>
<p>2
3RW master integ = @engineers</p>
<ul>
<li>master integ = @engineers</li>
</ul>
<p>RW+ = @engineers</p>
<p>Again, you simply follow the rules top down until you hit a match for your access mode, or a deny. Non-rewind push to master or integ is allowed by the first rule. A rewind push to those refs does not match the first rule, drops down to the second, and is therefore denied. Any push (rewind or non-rewind) to refs other than master or integ won’t match the first two rules anyway, and the third rule allows it.</p>
<p><strong>Restricting pushes by files changed</strong></p>
<p>In addition to restricting what branches a user can push changes to, you can also restrict what files they are allowed to touch. For example, perhaps the Makefile (or some other program) is really not supposed to be changed by just anyone, because a lot of things depend on it or would break if the changes are not done just right. You can tell gitolite:</p>
<p>1</p>
<p>2
3</p>
<p>4
5repo foo</p>
<p>RW = @junior_devs @senior_devs
RW NAME/ = @senior_devs</p>
<ul>
<li>NAME</li>
</ul>
<p>/Makefile</p>
<p>= @junior_devs</p>
<p>RW NAME/ = @junior_devs</p>
<p>This powerful feature is documented in conf/example.conf.</p>
<p><strong>Personal Branches</strong></p>
<p>Gitolite also has a feature called “personal branches” (or rather, “personal branch namespace”) that can be very useful in a corporate environment.</p>
<p>A lot of code exchange in the git world happens by “please pull” requests. In a corporate environment, however, unauthenticated access is a no-no, and a developer workstation cannot do authentication, so you have to push to the central server and ask someone to pull from there.</p>
<p>This would normally cause the same branch name clutter as in a centralised VCS, plus setting up permissions for this becomes a chore for the admin.</p>
<p>Gitolite lets you define a “personal” or “scratch” namespace prefix for each developer (for example,refs/personal/ //* ); see the “personal branches” section in doc/3-faq-tips-etc.mkd for details.</p>
<p><strong>“Wildcard” repositories</strong></p>
<p>Gitolite allows you to specify repositories with wildcards (actually perl regexes), like, for exampleassignments/s[0-9][0-9]/a[0-9][0-9], to pick a random example. This is avery powerful feature, which has to be enabled by setting $GL_WILDREPOS = 1; in the rc file. It allows you to assign a new permission mode (”C”) which allows users to create repositories based on such wild cards, automatically assigns ownership to the specific user who created it, allows him/her to hand out R and RW permissions to other users to collaborate, etc. This feature is documented indoc/4-wildcard-repositories.mkd.</p>
<p><strong>Other Features</strong></p>
<p>We’ll round off this discussion with a sampling of other features, all of which, and many more, are described in great detail in the “faqs, tips, etc” and other documents.</p>
<p>Logging: Gitolite logs all successful accesses. If you were somewhat relaxed about giving people rewind permissions (RW+) and some kid blew away “master”, the log file is a life saver, in terms of easily and quickly finding the SHA that got hosed.</p>
<p>Git outside normal PATH: One extremely useful convenience feature in gitolite is support for git installed outside the normal$PATH (this is more common than you think; some corporate environments or even some hosting providers refuse to install things system-wide and you end up putting them in your own directories). Normally, you are forced to make theclient-side git aware of this non-standard location of the git binaries in some way. With gitolite, just choose a verbose install and set$GIT_PATH in the “rc” files. No client-side changes are required after that <img src="" alt=":-)"></p>
<p>Access rights reporting: Another convenient feature is what happens when you try and just ssh to the server. Gitolite shows you what repos you have access to, and what that access may be. Here’s an example:
1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9hello sitaram, the gitolite version here is v1.5.4-19-ga3397d4</p>
<p>the gitolite config gives you the following access:</p>
<p>R anu-wsd</p>
<p>R entrans</p>
<p>R W git-notes</p>
<p>R W gitolite</p>
<p>R W gitolite-admin</p>
<p>R indic_web_input</p>
<p>R shreelipi_converter</p>
<p>Delegation: For really large installations, you can delegate responsibility for groups of repositories to various people and have them manage those pieces independently. This reduces the load on the main admin, and makes him less of a bottleneck. This feature has its own documentation file in the doc/ directory.</p>
<p>Gitweb support: Gitolite supports gitweb in several ways. You can specify which repos are visible via gitweb. You can set the “owner” and “description” for gitweb from the gitolite config file. Gitweb has a mechanism for you to implement access control based on HTTP authentication, so you can make it use the “compiled” config file that gitolite produces, which means the same access control rules (for read access) apply for gitweb and gitolite.</p>
<p>Mirroring: Gitolite can help you maintain multiple mirrors, and switch between them easily if the primary server goes down.</p>
<p><strong>4.9 Git 守护进程</strong></p>
<p>对于提供公共的，非授权的只读访问，我们可以抛弃 HTTP 协议，改用 Git 自己的协议，这主要是出于性能和速度的考虑。Git 协议远比 HTTP 协议高效，因而访问速度也快，所以它能节省很多用户的时间。</p>
<p>重申一下，这一点只适用于非授权的只读访问。如果建在防火墙之外的服务器上，那么它所提供的服务应该只是那些公开的只读项目。如果是在防火墙之内的 服务器上，可用于支撑大量参与人员或自动系统（用于<a href="http://www.amazon.cn/gp/product/B008AY9XCY/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=536&amp;creative=3200&amp;creativeASIN=B008AY9XCY&amp;linkCode=as2&amp;tag=vastwork-23" title="持续集成:软件质量改进和风险降低之道" target="_blank">持续集成</a>或编译的主机）只读访问的项目，这样可以省去逐一配置 SSH 公钥的麻烦。</p>
<p>但不管哪种情形，Git 协议的配置设定都很简单。基本上，只要以守护进程的形式运行该命令即可：
1git daemon --reuseaddr --base-path=</p>
<p>/opt/git/</p>
<p>/opt/git/</p>
<p>这里的 –reuseaddr 选项表示在重启服务前，不等之前的连接超时就立即重启。而 –base-path 选项则允许克隆项目时不必给出完整路径。最后面的路径告诉 Git 守护进程允许开放给用户访问的仓库目录。假如有防火墙，则需要为该主机的 9418 端口设置为允许通信。</p>
<p>以守护进程的形式运行该进程的方法有很多，但主要还得看用的是什么操作系统。在 Ubuntu 主机上，可以用 Upstart 脚本达成。编辑该文件：
1/etc/event</p>
<p>.d</p>
<p>/local-git-daemon</p>
<p>加入以下内容：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
start on startup</p>
<p>stop on</p>
<p>shutdown</p>
<p>exec</p>
<p>/usr/bin/git</p>
<p>daemon \</p>
<p>--user=git --group=git \</p>
<p>--reuseaddr \</p>
<p>--base-path=</p>
<p>/opt/git/</p>
<p>\</p>
<p>/opt/git/</p>
<p>respawn</p>
<p>出于安全考虑，强烈建议用一个对仓库只有读取权限的用户身份来运行该进程 — 只需要简单地新建一个名为 git-ro 的用户（译注：新建用户默认对仓库文件不具备写权限，但这取决于仓库目录的权限设定。务必确认git-ro 对仓库只能读不能写。），并用它的身份来启动进程。这里为了简化，后面我们还是用之前运行 Gitosis 的用户 ‘git’。</p>
<p>这样一来，当你重启计算机时，Git 进程也会自动启动。要是进程意外退出或者被杀掉，也会自行重启。在设置完成后，不重启计算机就启动该守护进程，可以运行：
1initctl start</p>
<p>local</p>
<p>-git-daemon</p>
<p>而在其他操作系统上，可以用 xinetd，或者 sysvinit 系统的脚本，或者其他类似的脚本 — 只要能让那个命令变为守护进程并可监控。</p>
<p>接下来，我们必须告诉 Gitosis 哪些仓库允许通过 Git 协议进行匿名只读访问。如果每个仓库都设有各自的段落，可以分别指定是否允许 Git 进程开放给用户匿名读取。比如允许通过 Git 协议访问 iphone_project，可以把下面两行加到gitosis.conf 文件的末尾：
1</p>
<p>2
[repo iphone_project]</p>
<p>daemon =</p>
<p>yes</p>
<p>在提交和推送完成后，运行中的 Git 守护进程就会响应来自 9418 端口对该项目的访问请求。</p>
<p>如果不考虑 Gitosis，单单起了 Git 守护进程的话，就必须到每一个允许匿名只读访问的仓库目录内，创建一个特殊名称的空文件作为标志：
1</p>
<p>2
$</p>
<p>cd</p>
<p>/path/to/project</p>
<p>.git</p>
<p>$</p>
<p>touch</p>
<p>git-daemon-</p>
<p>export</p>
<p>-ok</p>
<p>该文件的存在，表明允许 Git 守护进程开放对该项目的匿名只读访问。</p>
<p>Gitosis 还能设定哪些项目允许放在 GitWeb 上显示。先打开 GitWeb 的配置文件 /etc/gitweb.conf，添加以下四行：
1</p>
<p>2
3</p>
<p>4
$projects_list =</p>
<p>&quot;/home/git/gitosis/projects.list&quot;</p>
<p>;</p>
<p>$projectroot =</p>
<p>&quot;/home/git/repositories&quot;</p>
<p>;</p>
<p>$export_ok =</p>
<p>&quot;git-daemon-export-ok&quot;</p>
<p>;</p>
<p>@git_base_url_list = (</p>
<p>&#39;git://gitserver&#39;</p>
<p>);</p>
<p>接下来，只要配置各个项目在 Gitosis 中的 gitweb 参数，便能达成是否允许 GitWeb 用户浏览该项目。比如，要让 iphone_project 项目在 GitWeb 里出现，把repo 的设定改成下面的样子：</p>
<p>1</p>
<p>2
3[repo iphone_project]</p>
<p>daemon =</p>
<p>yes</p>
<p>gitweb =</p>
<p>yes</p>
<p>在提交并推送过之后，GitWeb 就会自动开始显示 iphone_project 项目的细节和历史。</p>
<p><strong>4.10 Git 托管服务</strong></p>
<p>如果不想经历自己架设 Git 服务器的麻烦，网络上有几个专业的仓库托管服务可供选择。这样做有几大优点：托管账户的建立通常比较省时，方便项目的启动，而且不涉及服务器的维护和监 控。即使内部创建并运行着自己的服务器，同时为开源项目提供一个公共托管站点还是有好处的 — 让开源社区更方便地找到该项目，并给予帮助。</p>
<p>目前，可供选择的托管服务数量繁多，各有利弊。在 Git 官方 wiki 上的 Githosting 页面有一个最新的托管服务列表：
1http:</p>
<p>//git</p>
<p>.or.cz</p>
<p>/gitwiki/GitHosting</p>
<p>由于本书无法全部一一介绍，而本人（译注：指本书作者 Scott Chacon。）刚好在其中一家公司工作，所以接下来我们将会介绍如何在 GitHub 上建立新账户并启动项目。至于其他托管服务大体也是这么一个过程，基本的想法都是差不多的。</p>
<p>GitHub 是目前为止最大的开源 Git 托管服务，并且还是少数同时提供公共代码和私有代码托管服务的站点之一，所以你可以在上面同时保存开源和商业代码。事实上，本书就是放在 GitHub 上合作编著的。（译注：本书的翻译也是放在 GitHub 上广泛协作的。）</p>
<p><strong>GitHub</strong></p>
<p>GitHub 和大多数的代码托管站点在处理项目命名空间的方式上略有不同。GitHub 的设计更侧重于用户，而不是完全基于项目。也就是说，如果我在 GitHub 上托管一个名为grit 的项目的话，它的地址不会是 github.com/grit，而是按在用户底下 github.com/shacon/grit （译注：本书作者 Scott Chacon 在 GitHub 上的用户名是shacon。）。不存在所谓某个项目的官方版本，所以假如第一作者放弃了某个项目，它可以无缝转移到其它用户的名下。</p>
<p>GitHub 同时也是一个向使用私有仓库的用户收取费用的商业公司，但任何人都可以方便快捷地申请到一个免费账户，并在上面托管数量不限的开源项目。接下来我们快速介绍一下 GitHub 的基本使用。</p>
<p><strong>建立新账户</strong></p>
<p>首先注册一个免费账户。访问 Pricing and Signup 页面 <a href="http://github.com/plans" target="_blank">http://github.com/plans</a> 并点击 Free acount 里的 Sign Up 按钮（见图 4-2），进入注册页面。</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server2.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-2. GitHub 服务简介页面</p>
<p>选择一个系统中尚未使用的用户名，提供一个与之相关联的电邮地址，并输入密码（见图 4-3）：</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server3.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-3. GitHub 用户注册表单</p>
<p>如果方便，现在就可以提供你的 SSH 公钥。我们在前文的”小型安装” 一节介绍过生成新公钥的方法。把新生成的公钥复制粘贴到 SSH Public Key 文本框中即可。要是对生成公钥的步骤不太清楚，也可以点击 “explain ssh keys” 链接，会显示各个主流操作系统上完成该步骤的介绍。点击 “I agree，sign me up” 按钮完成用户注册，并转到该用户的 dashboard 页面（见图 4-4）:</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server4.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-4. GitHub 的用户面板</p>
<p>接下来就可以建立新仓库了。</p>
<p><strong>建立新仓库</strong></p>
<p>点击用户面板上仓库旁边的 “create a new one” 链接，显示 Create a New Repository 的表单（见图 4-5）：</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server5.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-5. 在 GitHub 上建立新仓库</p>
<p>当然，项目名称是必不可少的，此外也可以适当描述一下项目的情况或者给出官方站点的地址。然后点击 “Create Repository” 按钮，新仓库就建立起来了（见图 4-6）：</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server6.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-6. GitHub 上各个项目的概要信息</p>
<p>由于尚未提交代码，点击项目地址后 GitHub 会显示一个简要的指南，告诉你如何新建一个项目并推送上来，如何从现有项目推送，以及如何从一个公共的 Subversion 仓库导入项目（见图 4-7）：</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server7.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-7. 新仓库指南</p>
<p>该指南和本书前文介绍的类似，对于新的项目，需要先在本地初始化为 Git 项目，添加要管理的文件并作首次提交：
1</p>
<p>2
3$ git init</p>
<p>$ git add .</p>
<p>$ git commit -m</p>
<p>&#39;initial commit&#39;</p>
<p>然后在这个本地仓库内把 GitHub 添加为远程仓库，并推送 master 分支上来：</p>
<p>1</p>
<p>2
$ git remote add origin git@ github.com:testinguser</p>
<p>/iphone_project</p>
<p>.git</p>
<p>$ git push origin master</p>
<p>现在该项目就托管在 GitHub 上了。你可以把它的 URL 分享给每位对此项目感兴趣的人。本例的 URL 是 <a href="http://github.com/testinguser/iphone_project。而在项目页面的摘要部分，你会发现有两个" target="_blank">http://github.com/testinguser/iphone_project。而在项目页面的摘要部分，你会发现有两个</a> Git URL 地址（见图 4-8）：</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server8.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-8. 项目摘要中的公共 URL 和私有 URL</p>
<p>Public Clone URL 是一个公开的，只读的 Git URL，任何人都可以通过它克隆该项目。可以随意散播这个 URL，比如发布到个人网站之类的地方等等。</p>
<p>Your Clone URL 是一个基于 SSH 协议的可读可写 URL，只有使用与上传的 SSH 公钥对应的密钥来连接时，才能通过它进行读写操作。其他用户访问该项目页面时只能看到之前那个公共的 URL，看不到这个私有的 URL。</p>
<p><strong>从 Subversion 导入项目</strong></p>
<p>如果想把某个公共 Subversion 项目导入 Git，GitHub 可以帮忙。在指南的最后有一个指向导入 Subversion 页面的链接。点击它会看到一个表单，包含有关导入流程的信息以及一个用来粘贴公共 Subversion 项目连接的文本框（见图 4-9）：</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server9.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-9. Subversion 导入界面</p>
<p>如果项目很大，采用非标准结构，或者是私有的，那就无法借助该工具实现导入。到第 7 章，我们会介绍如何手工导入复杂工程的具体方法。</p>
<p><strong>添加协作开发者</strong></p>
<p>现在把团队里的其他人也加进来。如果 John，Josie 和 Jessica 都在 GitHub 注册了账户，要赋予他们对该仓库的推送权限，可以把他们加为项目协作者。这样他们就可以通过各自的公钥访问我的这个仓库了。</p>
<p>点击项目页面上方的 “edit” 按钮或者顶部的 Admin 标签，进入该项目的管理页面（见图 4-10）：</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server10.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-10. GitHub 的项目管理页面</p>
<p>为了给另一个用户添加项目的写权限，点击 “Add another collaborator” 链接，出现一个用于输入用户名的表单。在输入的同时，它会自动跳出一个符合条件的候选名单。找到正确用户名之后，点 Add 按钮，把该用户设为项目协作者（见图 4-11）：</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server11.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-11. 为项目添加协作者</p>
<p>添加完协作者之后，就可以在 Repository Collaborators 区域看到他们的名单（见图 4-12）：</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server12.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-12. 项目协作者名单</p>
<p>如果要取消某人的访问权，点击 “revoke” 即可取消他的推送权限。对于将来的项目，你可以从现有项目复制协作者名单，或者直接借用协作者群组。</p>
<p><strong>项目页面</strong></p>
<p>在推送或从 Subversion 导入项目之后，你会看到一个类似图 4-13 的项目主页：</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server13.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-13. GitHub 上的项目主页</p>
<p>别人访问你的项目时看到的就是这个页面。它有若干导航标签，Commits 标签用于显示提交历史，最新的提交位于最上方，这和 git log 命令的输出类似。Network 标签展示所有派生了该项目并做出贡献的用户的关系图谱。Downloads 标签允许你上传项目的二进制文件，提供下载该项目各个版本的 tar/zip 包。Wiki 标签提供了一个用于撰写文档或其他项目相关信息的 wiki 站点。Graphs 标签包含了一些可视化的项目信息与数据。默认打开的 Source 标签页面，则列出了该项目的目录结构和概要信息，并在下方自动展示 README 文件的内容（如果该文件存在的话），此外还会显示最近一次提交的相关信息。</p>
<p><strong>派生项目</strong></p>
<p>如果要为一个自己没有推送权限的项目贡献代码，GitHub 鼓励使用派生（fork）。到那个感兴趣的项目主页上，点击页面上方的 “fork” 按钮，GitHub 就会为你复制一份该项目的副本到你的仓库中，这样你就可以向自己的这个副本推送数据了。</p>
<p>采取这种办法的好处是，项目拥有者不必忙于应付赋予他人推送权限的工作。随便谁都可以通过派生得到一个项目副本并在其中展开工作，事后只需要项目维护者将这些副本仓库加为远程仓库，然后提取更新合并即可。</p>
<p>要派生一个项目，到原始项目的页面（本例中是 mojombo/chronic）点击 “fork” 按钮（见图 4-14）：</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server14.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-14. 点击 “fork” 按钮获得任意项目的可写副本</p>
<p>几秒钟之后，你将进入新建的项目页面，会显示该项目派生自哪一个项目（见图 4-15）：</p>
<p><a href="http://cdn2.jobbole.com/2012/08/Git-on-the-server16.png" title="Git详解之四：服务器上的Git" target="_blank"><img src="&quot;Git详解之四：服务器上的Git&quot;" alt="Git详解之四：服务器上的Git"></a></p>
<p>图 4-15. 派生后得到的项目副本</p>
<p><strong>GitHub 小结</strong></p>
<p>关于 GitHub 就先介绍这么多，能够快速达成这些事情非常重要（译注：门槛的降低和完成基本任务的简单高效，对于推动开源项目的协作发展有着举足轻重的意义。）。短短几 分钟内，你就能创建一个新账户，添加一个项目并开始推送。如果项目是开源的，整个庞大的开发者社区都可以立即访问它，提供各式各样的帮助和贡献。最起码， 这也是一种 Git 新手立即体验尝试 Git 的捷径。</p>
<p><strong>4.11 小结</strong></p>
<p>我们讨论并介绍了一些建立远程 Git 仓库的方法，接下来你可以通过这些仓库同他人分享或合作。</p>
<p>运行自己的服务器意味着更多的控制权以及在防火墙内部操作的可能性，当然这样的服务器通常需要投入一定的时间精力来架设维护。如果直接托管，虽然能免去这部分工作，但有时出于安全或版权的考虑，有些公司禁止将商业代码托管到第三方服务商。</p>
<p>所以究竟采取哪种方案，并不是个难以取舍的问题，或者其一，或者相互配合，哪种合适就用哪种。</p>
<p><img src="&quot;1 vote, average: 4.00 out of 5&quot;" alt="1 vote, average: 4.00 out of 5"><img src="&quot;1 vote, average: 4.00 out of 5&quot;" alt="1 vote, average: 4.00 out of 5"><img src="&quot;1 vote, average: 4.00 out of 5&quot;" alt="1 vote, average: 4.00 out of 5"><img src="&quot;1 vote, average: 4.00 out of 5&quot;" alt="1 vote, average: 4.00 out of 5"><img src="&quot;1 vote, average: 4.00 out of 5&quot;" alt="1 vote, average: 4.00 out of 5"> (<strong>*1</strong> 个评分，平均: <strong>4.00*</strong>)</p>
<p><img src="&quot;Loading ...&quot;" alt="Loading ..."> Loading ...</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/git&github/">git&github</a></li></span></span> | <span class="tags">Tagged <a href="/tags/git&github/" class="label label-primary">git&github</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:43"datetime="2014-03-07 09:54:43"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-gitgithub--Git详解之四：服务器上的Git/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-gitgithub--Git详解之四：服务器上的Git" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-业务--BOSS业务介绍-计费与营帐系统-MSCBSC移动通信论坛国内领先的通信技术论坛/">BOSS业务介绍 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:43.000Z"> <a href="/2014/02/02/2014-02-02-业务--BOSS业务介绍-计费与营帐系统-MSCBSC移动通信论坛国内领先的通信技术论坛/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="boss-mscbsc-">BOSS业务介绍 - 计费与营帐系统 - MSCBSC 移动通信论坛 国内领先的通信技术论坛</h1>
<p><img src="" alt=""> 设MSCBSC为首页</p>
<p><a href="http://www.mscbsc.com/" target="_blank">移动通信网</a> | <a href="http://www.mscbsc.com/news/" target="_blank">通信要闻</a> | <a href="http://www.mscbsc.com/askpro/" target="_blank">技术问答</a> | <a href="http://www.mscbsc.com/blog/" target="_blank">博客</a> | <a href="http://www.mscbsc.com/group/" target="_blank">圈子</a> | <a href="http://www.telecomhr.com/" target="_blank">人才</a> | <a href="http://www.mscbsc.com/bbs/" target="_blank">论坛</a> | <a href="http://www.mscbsc.com/bbs/forum-74-1.html" target="_blank">资料</a> | <a href="http://www.mscbsc.com/bbs/forum-185-1.html" target="_blank">论坛指南</a> | <a href="http://www.mscbsc.com/bbs/thread-129-1-1.html" target="_blank">积分说明</a> | <a href="http://www.mscbsc.com/bbs/thread-66084-1-1.html" target="_blank">帐号的保护和激活</a><br><a href="http://www.mscbsc.com/bbs/index.php" target="_blank"><img src="" alt="MSCBSC 移动通信论坛"></a> <a href="http://www.mscbsc.com/askpro" target="_blank"><img src="" alt=""></a></p>
<p>游客:  <a href="http://www.mscbsc.com/bbs/register.php" target="_blank">注册</a> | <a href="http://www.mscbsc.com/bbs/logging.php?action=login" target="_blank">登录</a> | <a href="http://search.mscbsc.com/" target="_blank">搜索</a> | <a href="http://www.mscbsc.com/bbs/memcp.php?action=credits&amp;operation=addfunds" target="_blank">充值威望</a> | <a href="http://www.mscbsc.com/bbs/invitecode.php" target="_blank">邀请注册</a> | <a href="http://www.mscbsc.com/askpro/index.php" target="_blank">技术问答</a> | 扩展功能<img src="" alt=""> | <a href="http://www.mscbsc.com/bbs/faq.php" target="_blank">帮助</a>
 <a href="http://www.mscbsc.com/askpro/" target="_blank">问答区</a> | <a href="http://www.mscbsc.com/bbs/search.php?srchfrom=&amp;searchsubmit=yes" target="_blank">新帖区</a> | <a href="http://www.mscbsc.com/bbs/digest.php" target="_blank">精华区</a></p>
<p>全部 帖子 资料 问答 招聘  <a href=""></a>  </p>
<p><a href="http://www.mscbsc.com/bbs/index.php" target="_blank">MSCBSC 移动通信论坛</a> » <a href="http://www.mscbsc.com/bbs/forum-216-1.html" target="_blank">计费与营帐系统</a> » BOSS业务介绍
<a href=""> 16 </a><a href=""> 1/2 </a><a href="">1</a><a href="http://www.mscbsc.com/bbs/thread-141782-2-1.html" target="_blank">2</a><a href="http://www.mscbsc.com/bbs/thread-141782-2-1.html" target="_blank">››</a><img src="" alt=""><a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt=""></a></p>
<p><a href="http://www.mscbsc.com/bbs/post.php?action=newthread&amp;fid=216&amp;extra=page%3D1" target="_blank">讨论帖</a> <a href="http://www.mscbsc.com/bbs/post.php?action=newthread&amp;fid=216&amp;extra=page%3D1&amp;data=yes" target="_blank">资料帖</a> <a href="http://www.mscbsc.com/bbs/post.php?action=newthread&amp;fid=216&amp;extra=page%3D1&amp;poll=yes" target="_blank">投票帖</a> <a href="http://www.mscbsc.com/bbs/post.php?action=newthread&amp;fid=216&amp;extra=page%3D1&amp;reward=yes" target="_blank">悬赏帖</a></p>
<ul>
<li><em>1883</em>阅读</li>
<li><em>15</em>回复 <a href="http://www.mscbsc.com/bbs/misc.php?action=emailfriend&amp;tid=141782" target="_blank">推荐</a> | <a href="http://www.mscbsc.com/bbs/my.php?item=subscriptions&amp;subadd=141782" target="_blank">订阅</a> | <a href="http://www.mscbsc.com/bbs/my.php?item=favorites&amp;tid=141782" target="_blank">收藏</a>  <a href="http://www.mscbsc.com/bbs/forumdisplay.php?fid=216&amp;filter=type&amp;typeid=8" target="_blank">[交流]</a> BOSS业务介绍</li>
</ul>
<p><a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-1000457.html">chendaji</a> <a href="http://www.mscbsc.com/bbs/thread-52231-1-1.html" title="认证专家3级" target="_blank"><img src="" alt=""></a> <img src="&quot;离线&quot;" alt="">
资深元老
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=1000457" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=1000457&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
<img src="" alt="专家·终级勋章">   <img src="" alt="纪念勋章·三周年">   <img src="" alt="纪念勋章·四周年"><br>积分 38634
帖子 961
威望 14000 个
礼品兑换分 1390 个
专家指数 3723
注册 2008-10-16
专业方向  无线网络
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=1000457" target="_blank">1534</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=1000457" target="_blank">306</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-1000457.html" target="_blank">20%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#1</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=1551912" target="_blank">使用道具</a><br>发表于 2009-8-16 16:13:37  <a href="http://www.mscbsc.com/bbs/viewthread.php?tid=141782&amp;extra=page%3D1&amp;originator=yes" target="_blank">只看楼主</a>  <strong>BOSS系统介绍</strong>mscbsc 移动通信论坛拥有30万通信专业人员，超过50万份GSM/3G等通信技术资料，是国内领先专注于通信技术和通信人生活的社区。 E&quot;U6D/<em>\6t9x
移动通信业务运营支撑系统（Business &amp; Operation Support System，简称BOSS）分为营业、计费、帐务三大分系统，各分系统间通过一定的接口相互通信，以完成对整体业务的支撑作用。
(V:\&quot;L8l&#39;V8Y4hwww.mscbsc.com<strong>营业分系统</strong>移动通信,通信工程师的家园,通信人才,求职招聘,网络优化,通信工程,出差住宿,通信企业黑名单%c-S)C.L5{&amp;x
营业分系统又可进一步分为营业受理子系统、营业管理子系统、客户服务子系统。营业受理子系统直接面对移动客户，主要进行移动运营商直辖的各大营业厅及代销点的营业受理，营业管理子系统主要由业务管理人员进行后台业务管理，客户服务子系统主要负责客户服务与投诉受理。
%@;M:I4`7s8Q/#W;amscbsc 移动通信论坛拥有30万通信专业人员，超过50万份GSM/3G等通信技术资料，是国内领先专注于通信技术和通信人生活的社区。营业子系统由营业主服务器、各子系统服务器及各类终端组成。营业主服务器负责对三个子系统进行统一管理，记录用户的基本资料，如IMSI号、MSISDN号（手机号）、品牌（如全球通、神州行、神州行2000等）、当前状态（如正常、欠费停机、报停、销户等）、入网时间、用户姓名、用户身份证号、用户联系地址、用户密码等，以及用户所拥有的各项附加功能，如主叫显示、国际长途、语音信箱、短信功能、省际漫游、国际漫游等。营业主服务器同时还要记录用户申请的各项优惠业务，如话费套餐、VPN等，对于每项优惠业务需记录申请时间、生效时间、优惠级别等等。移动通信,通信工程师的家园,通信人才,求职招聘,网络优化,通信工程,出差住宿,通信企业黑名单(F0o$m5Q-z&quot;S4R&quot;~&quot;S
营业受理子系统负责进行各营业厅、代销点的业务受理，由营业受理服务器及前台受理终端组成。前台终端在营业厅、各代销点使用，由营业员操作，负责日常业务受理。营业受理服务器负责运行前台受理终端使用的受理程序，接收来自终端的受理工单，并向营业主服务器发送，同时根据受理记录修改营业主服务器上的资料。;X-J&#39;F&amp;? G/#b
营业管理子系统主要负责号段管理、SIM卡管理及日常统计报表分析等工作，由后台业务管理人员使用。由于终端数量较少，一般不另设服务器，而是直接使用营业主服务器。
;G4E,c/</em>|&quot;F,K/d(G/A移动通信,通信工程师的家园,通信人才,求职招聘,网络优化,通信工程,出差住宿,通信企业黑名单客户服务子系统又分为普通客户服务子系统及大客户服务子系统。普通客户服务子系统负责处理日常用户的咨询、投诉等，如1860客户服务中心。普通客户服务系统通过客服服务器与营业主服务器连接，向营业主服务器发送客服受理工单。大客户服务子系统负责处理与大客户相关的各类受理及对大客户的特殊服务，通过大客户服务器与营业主服务器连接。www.mscbsc.com/<em>d.^%X&#39;^8E;W9l7U&amp;z(g;L
移动通信,通信工程师的家园,通信人才,求职招聘,网络优化,通信工程,出差住宿,通信企业黑名单&amp;J6m3[8a5L)t.\/#n
&#39;E7?0E&quot;c(F0j9z/</em>\mscbsc 移动通信论坛拥有30万通信专业人员，超过50万份GSM/3G等通信技术资料，是国内领先专注于通信技术和通信人生活的社区。
/#y;t/<em>w2B.p(\ } P5mmscbsc 移动通信论坛拥有30万通信专业人员，超过50万份GSM/3G等通信技术资料，是国内领先专注于通信技术和通信人生活的社区。　　各类营业受理工单通过HLR派单接口向HLR发送指令，以修改HLR中的用户数据。HLR派单机连接营业主服务器与HLR，接口程序将营业主服务器上存储的受理工单转换成HLR能够识别的指令向HLR发送。HLR派单接口可以使用LAN口连接，也可以使用COM端口连接。使用LAN口可以获得较快的传输速度，有利于大批量的处理。在修改HLR数据的工单处理过程中，必须考虑到工单失败问题与工单碰撞问题。+F/a!S/M4}1K7f
由于智能网业务的不断发展，对智能用户（如&quot;神州行&quot;）的管理也逐步纳入了业务运营支撑系统管理的范畴。智能网主要由SMP（业务管理点）、SCP（业务控制点）等设备构成。SMP主要负责对智能用户资料的管理；SCP主要负责对智能用户的话单进行计费并扣帐。智能用户资料除了要在HLR中记录外，还必须在智能网中记录。业务运营支撑系统可以采用与HLR派单接口类似的做法通过与SMP的派单接口来实现对智能用户资料的管理。各类派单接口设计是营业分系统设计中的一大重点，也是一大难点。成功的派单接口设计能大大减少用户的投诉，建立良好的信誉，因此派单接口设计往往成为衡量营业分系统设计是否优良的一个重要标准。mscbsc 移动通信论坛拥有30万通信专业人员，超过50万份GSM/3G等通信技术资料，是国内领先专注于通信技术和通信人生活的社区。2I/l8U9m/i
<strong>计费分系统</strong>MSCBSC 移动通信论坛!j3b8v8d9(y$W!H
计费分系统又可分为采集子系统、计费子系统、结算子系统。采集子系统负责从各个话单采集点采集话单，并传送至计费中心。计费子系统负责对各类话单进行计费并存入话单库，结算子系统负责处理与各省、各国之间的话费结算问题。9j$q/l$X%n7l
移动通信网络系统中的采集点主要有移动交换机、关口局、短信中心、短信网关、语音信箱、GPRS计费网关、智能网SCP等。移动交换机主要产生语音通话话单，关口局产生外网与本网间的通信话单，短讯中心产生短讯业务话单，短讯网关产生以短讯为基础的移动梦网等业务话单，语音信箱产生用户语音留言、传真留言等增值业务话单。GPRS计费网关（CG）用以收集用户使用GPRS的通信记录并合并生成话单。智能网SCP上产生智能网用户的话单。所有由网络通信设备产生的话单被称为原始话单，是相对于计费分系统计费后入库的计费话单而言的。由于智能网用户的话单直接在SCP上计费并扣帐，因此计费分系统无需对SCP上产生的话单进行再计费。其余网络通信设备上产生的话单都是未计费的，或是由合作运营商计费后仍需由计费分系统重新确认的（如梦网话单）。采集一般采用FTP、FTAM等协议，将原始话单传送至计费中心。采集子系统的采集实时性直接决定了计费子系统的实时性，因此在移动通信业务运营支撑系统中对采集的实时性要求相当高。为了保证能实时采集到话单，除了以2M以上速率的传输线路确保采集畅通外，各个采集点也应能实时生成话单。移动交换机必须能够对长时间通话的话单进行分段处理，如用户通话超过30分钟，必须能够做到每30分钟即产生一条话单。移动交换机还必须能根据话单量及时间两个要素来生成话单。在通话高峰期能够每满一定的话单量即向外推送话单文件，在通话低谷期能够每过一定时间即向外推送话单文件。移动通信,通信工程师的家园,通信人才,求职招聘,网络优化,通信工程,出差住宿,通信企业黑名单 A%r,I4I/</em>a;I,<code>计费子系统分为格式化、一次批价、二次批价、漫游接收上发等流程。格式化是指从网络通信设备产生的原始话单中提取出计费所需的所有内容，并转化为计费程序能够处理的格式。计费系统必需的计费信息有：呼叫类型（如主叫、被叫、呼转等）、IMSI号（记录SIM卡的国际唯一标识号）、MSISDN（手机号）、对方号码、通话起始时间、通话时长、小区位置（LAC、CELLID等）、动态漫游号（MSRN）等。数据业务，如GPRS还必须提取出上行流量、下行流量、服务质量（QoS）等。各个话单采集点在某些异常情况下可能产生重复话单，因此格式化必须有剔除重单的功能，可采用记录一段时间内所有话单的做法，只须记录有唯一性标识作用的呼叫类型、IMSI、通话起始时间、对方号码等，在格式化新话单时将新话单与已记录的话单进行比较，相同的作为重单处理。MSCBSC 移动通信论坛(U;H5F6m8{&#39;T
计费子系统一次批价根据格式化提供的标准格式话单，结合费率表、号段表、区号表等计费资料对话单进行计费。费率表中记录的信息主要有：基本计费单元、基本通话费率、长途计费单元、长途通话费率、优惠时段起始时间、优惠时段终止时间、优惠时段费率等。mscbsc 移动通信论坛拥有30万通信专业人员，超过50万份GSM/3G等通信技术资料，是国内领先专注于通信技术和通信人生活的社区。&quot;U.C/#l9X6i9_
计费子系统二次批价在一次批价的基础上，根据用户入网所享受的各项优惠对话单进行重计费，以最终生成向用户收费的话单。用户所享受的各项优惠记录在营业分系统的用户资料中，因此二次批价必须结合营业资料进行。如果对每一条话单进行二次批价时都进行一次对营业数据库的查询操作，势必会大大增加数据库的负担，严重影响营业、计费分系统的运行速度。因此必须为二次批价专门建立一个营业资料数据库，存放二次批价需要的用户数据，并定时与营业数据库进行同步操作。同时必须采用内存数据库技术，将二次批价中需要频繁用到的营业资料载入内存，以大大提高二次批价对营业资料访问的速度，同时减小主服务器的负担。采用内存数据库技术就必须对计费主机的内存实行优化，各个计费进程必须能合理地使用主机内存。二次批价根据不同的优惠业务采用流水线式的处理流程。各个不同的优惠业务彼此间相互渗透，因此二次批价中各个优惠业务间的处理顺序显得尤为重要。
:p V2T&#39;L+{$k6A0c4TMSCBSC 移动通信论坛漫游是移动通信的特性，漫游类型分为非漫游、省内漫游、省际漫游、国际漫游等。许多原始话单中都没有用户是否漫游的标志，计费子系统就必须根据原始话单产生地结合号段表来进行判定。由于话单一般产生在到访地，如果原始话单中包含了异地手机用户的话单，则表明此用户漫游至话单产生地。如果许多不同地域的话单都集中于同一地点产生，根据原始话单产生地也无法判定用户的漫游类型，就必须通过原始话单中记录的用户通话时的位置（如LAC、CELLID等）来进行判定了。
$H$}+R&amp;z3i&amp;Twww.mscbsc.com动态漫游号主要用于判定移动通信计费中特殊的同城计费原则，即两个用户在同一城市行政区域内通话时不收取长途费。动态漫游号是用户发起主叫时由被叫用户所在的交换机分配给主叫用户的临时号码，不同的城市行政区域使用不同的号段。根据主叫方的动态漫游号结合被叫方的漫游位置即可判定主被叫用户是否同城。而对于被叫用户由于没有动态漫游号，同城原则只能根据主叫号码的归属地进行判定。若主叫方归属地不在被叫漫游位置，即使主叫方漫游与被叫同城，也无法对被叫实现同城优惠。例如：两个福州的用户同时漫游至北京时相互通话，主叫方可以享受同城优惠，而被叫方就无法享受同城优惠。/Z z&quot;R/Y6^:c!R;N)H
计费子系统需将漫游至本地的外地用户的话单转换为标准格式上发给外地的移动运营商，同时还必须接收外地运营商传来的本地用户漫游至外地的话单并计费。这些话单也是结算的依据。漫游话单的上下发一般由一个全国性中心局来负责统一处理。
&#39;n)f&#39;|:T,x+J&quot;A.}5NMSCBSC 移动通信论坛结算子系统用于处理与其它运营商之间的话费结算问题。结算的总原则是：若其它运营商的客户使用了我运营商的通信资源，则其运营商需向我运营商支付费用；若我运营商的客户使用了其它运营商的通信资源，则我运营商需向其它运营商支付费用。结算包括网内漫游结算及网间结算。网内漫游结算是指同一运营商内部各公司间因用户互相漫游而发生的结算，一般体现为各省之间的漫游结算，例如福建的用户漫游到北京，则福建需向北京支付结算费用。网间结算包括国内网间结算及国际网间结算。网间结算既可能因为漫游而使用了其它运营商的通信资源而产生，即网间漫游结算，也可能因为进行网间通信时使用了其它运营商的通信资源而产生，即网间通信结算。目前我国各移动运营商间尚未实现基站共享，因此国内网间结算均为网间通信结算。例如中国移动的用户如果直接拨打异地的中国电信固定电话（即区号+固定电话号码），则使用了中国电信的长途通信资源，中国移动须向中国电信支付长途结算费用；如果中国移动的用户使用17951拨打异地的中国电信固定电话（即17951+区号+固定电话号码），则使用中国移动的IP长途通信资源，中国移动就不必向中国电信支付长途结算费用。国际网间结算既可能有网间漫游结算，也可能有网间通信结算。例如，芬兰的移动客户漫游至中国，使用了中国的移动通信资源，则芬兰的移动运营商需向中国的移动运营商支付费用，这就是国际网间漫游结算。在移动通信网的设计中，可在不同运营商的网络间设立关口局用于处理网间通信结算问题，由关口局记录双方用户使用对方网络资源的状况，结算子系统直接从关口局读取原始话单计算结算费用。由于各运营商间的结算一般采用按月、季等时间单元进行，因而结算子系统对于实时性要求不高，在移动业务运营支撑系统的设计中显得相对简单。&quot;\0E:F-~5~6E3v
**帐务分系统**MSCBSC 移动通信论坛,K)[/*P6[-P&#39;w+U/m/B&quot;U&quot;M/*l
帐务分系统又可分为实时出帐子系统、月出帐子系统和销帐子系统。实时出帐子系统将计费子系统计费后的话单金额进行实时累加，达到一定额度后出帐。月出帐子系统负责对用户每月应固定缴纳的费用进行出帐。销帐子系统对各类帐单进行收费。4N7m!s x9Z/#v0D r
实时出帐子系统通过与计费分系统的接口获取计费后的话单，并对每一个用户的话单金额进行实时累加，生成实时帐单。由于用户可能因为SIM卡损坏等原因更换SIM卡，即可能变更IMSI号，因此实时帐单不能根据IMSI号进行累加；由于用户也可能申请变更手机号，因此实时帐单也不能根据MSISDN（手机号）进行累加。为此，在营业分系统中就必须对所有用户建立唯一标识，我们不妨称之为用户ID，无论用户更换SIM卡或是更改手机号，用户ID都保持不变，以唯一标识每一个用户，并对用户的IMSI、MSISDN的变更都留下历史记录。实时出帐子系统就可以根据用户ID来累加实时帐单。原始话单中不可能存在用户ID，计费子系统可在结合营业资料进行二次批价时在计费话单中加入用户ID，这本身也可以提高二次批价的速度。或是在实时出帐时再根据话单中的IMSI或MSISDN结合营业资料来查询用户ID。第一种方法显然是首选，可以避免实时出帐时再对营业资料进行访问。合帐时除了对用户累加总帐单金额外，还可以根据不同的帐目类别（如本地通话费、漫游通话费、长途通话费、短信费用等）分别累加帐目金额，以满足业务统计、财务报表等方面的需求。+U4b!p1D/n t&amp;\
实时出帐子系统与月出帐子系统生成的帐单通过销帐子系统送到缴费接口进行销帐，即向用户收费。销帐子系统中须为每一用户建立一个现金帐户，记录用户已缴金额。随着用户数量的不断增加，传统的营业厅现金缴费的方式已无法满足实际的需要，通过与银行配合的方式是解决这一矛盾的有效途径，如可以采用银行代缴、银行代扣等缴费方式。使用银行代缴的用户在银行的营业网点缴纳手机话费时，银行通过与移动运营商的网络通信接口将代收的话费信息传送至移动业务运营支撑系统，由销帐子系统将用户所缴纳的话费向用户的现金帐户充值，并向银行返回确认信息，银行的营业网点即通知用户缴费成功。除此以外，还可以采用充值卡等方式提供用户缴费。以上各类缴费方式中，银行代扣将用户帐户放在银行，我们称之为&quot;代扣缴费&quot;，其余的都将用户帐户放在移动业务运营支撑系统，实时出帐子系统与月出帐子系统生成的帐单根据用户的缴费方式送往不同的缴费接口。采用现金缴费的用户的帐单直接从现金帐户上扣款，采用代扣缴费方式的用户的帐单通过与各大银行的接口送往用户指定的银行帐户。销帐结果可分为：完全销帐、部分销帐、未销帐。部分销帐与未销帐即用户欠费，若用户的欠费额超过用户的停机信用度，销帐子系统即向营业分系统发出停机命令，由营业分系统通过与HLR的接口修改HLR中的用户数据。停机可分为单停、全停，单停指的是用户有呼出限制，但仍可接听电话，全停指的是用户无法呼出也无法呼入。营业分系统可以根据用户的消费状况、缴费及时率等条件给不同的用户设立不同的单停信用度、全停信用度，对于不同的欠费额采用不同的停机处理。欠费帐单专门存储，在用户缴费后立即销帐，超过一定期限才被销帐的帐单由销帐子系统计算滞纳金，与欠费帐单同时销帐。为保证滞纳金计算合理，在用户缴费后应从最早出帐的帐单开始销帐。能够完全销帐的由销帐子系统向营业分系统发出复机命令，由营业分系统通过与HLR的接口修改HLR中的用户数据。超过一定期限始终未缴费的欠费停机用户，可由营业分系统进行欠费销户处理，其欠费帐单可作坏帐处理。
7G&amp;l;K,H4c;F&#39;x移动通信,通信工程师的家园,通信人才,求职招聘,网络优化,通信工程,出差住宿,通信企业黑名单**未来发展方向**
1D,H3G&#39;s/#u0</code> |  国内领先的通信技术论坛目前，移动通信业务运营支撑系统已经越来越朝着集中化的方向发展，从原先的地市级集中向省级集中。集中化可以方便地进行异地业务受理，节约设备成本及软件开发维护费用。随着电信市场的逐步开放，各移动运营商间的竞争也将日趋激烈，各类以吸引客户为目的的优惠业务将不断涌现，对于业务运营支撑系统的要求也将越来越高。在强大的市场竞争压力下，在用系统新增业务的开发周期直接影响到移动通信企业的竞争力。因此，移动业务运营支撑系统必须具有良好的可扩展性、强大的业务适应能力，这都对系统设计提出了更高的要求。一个理想化的业务运营支撑系统必须能够通过修改业务配置表的方式来实现绝大多数的优惠业务，而不必再开发额外的程序，这就要求业务运营支撑系统必须实现智能化。智能化的关键是在系统中能够对所有业务按照系统实现的方式进行分类，建立各类业务模型，如计费单位（以分钟计费、以秒计费）、计费原则（单向计费、双向计费）、套餐类业务（包月费、各档优惠资费标准、各档非优惠资费标准）、VPN类业务（集团内优惠资费标准、集团外非优惠资费标准）等。各类业务万变不离其宗，根据其本质内容建立抽象的业务模型，再根据各类业务的特征通过继承的方式建立子类，以及对子类的再继承来实现对所有业务模型的建立，这是面向对象的思想在软件高层设计中的应用。智能化已经成为业务运营支撑系统未来的发展方向，也是今后在这一领域需要重点研究的课题
:A&amp;~,A/#A&amp;I2`9]:P |  国内领先的通信技术论坛对子类的再继承来实现对所有业务模型的建立，这是面向对象的思想在软件高层设计中的应用。智能化已经成为业务运营支撑系统未来的发展方向，也是今后在这一领域需要重点研究的课题
<img src="" alt=""><a href="http://www.mscbsc.com/bbs/down_pdf.php?tid=141782" target="_blank">免费免威望下载本帖内容PDF版</a></p>
<p><a href=""></a></p>
<p>-<img src="" alt="">
<img src="" alt=""><a href="http://www.91cool.net/" target="_blank"><img src="" alt=""></a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> <a href="http://www.mscbsc.com/bbs/memcp.php?action=credits&amp;operation=addfunds" target="_blank"><img src="" alt=""></a>[<a href="http://www.mscbsc.com/bbs/memcp.php?action=credits&amp;operation=addfunds" target="_blank">充值威望，立即自动到帐</a>] [<a href="http://www.mscbsc.com/pay/vippay.php" target="_blank">VIP贵宾权限+威望套餐</a>] 另有大量优惠赠送活动，请光临充值中心
充值拥有大量的威望和最高的下载权限，下载站内资料无忧
<a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-3643240.html">wenpan007hot</a> <img src="&quot;离线&quot;" alt="">
中级会员
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=3643240" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=3643240&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
积分 984
帖子 196
威望 1464 个
礼品兑换分 10 个
专家指数 4
注册 2009-8-14
专业方向  GPRS
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3643240" target="_blank">0</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3643240" target="_blank">0</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-3643240.html" target="_blank">0%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#2</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=1554787" target="_blank">使用道具</a><br>发表于 2009-8-17 14:54:13  技术问题，回答得专家指数，快速升级</p>
<ul>
<li>· <a href="http://www.mscbsc.com/askpro/question42908" title="爱立信BSC级的切换参数有哪些？" target="_blank">爱立信BSC级的切换参数有哪些？</a></li>
<li>· <a href="http://www.mscbsc.com/askpro/question42907" title="为什么我的Pilot Navigator软件在分析log时，临区框里的内容不跟着log的位置而变化" target="_blank">为什么我的Pilot Navigator软件在分析log时，临区框里的内容不跟着log的位置而变化</a></li>
<li>· <a href="http://www.mscbsc.com/askpro/question42906" title="频点干扰问题" target="_blank">频点干扰问题</a></li>
<li>· <a href="http://www.mscbsc.com/askpro/question42905" title="扫楼是只看有没有信号不就行了。。。" target="_blank">扫楼是只看有没有信号不就行了。。。</a></li>
<li>· <a href="http://www.mscbsc.com/askpro/question42904" title="寻呼丢弃如何优化？" target="_blank">寻呼丢弃如何优化？</a></li>
<li>· <a href="http://www.mscbsc.com/askpro/question42903" title="网规网优新手工资待遇问题" target="_blank">网规网优新手工资待遇问题</a></li>
<li>· <a href="http://www.mscbsc.com/askpro/question42902" title="TD系统中影响接通率和掉话率的无线参数有哪些？" target="_blank">TD系统中影响接通率和掉话率的无线参数有哪些？</a></li>
<li>· <a href="http://www.mscbsc.com/askpro/question42901" title="那位大侠能讲一讲目前GSM接入信道的物理层详细流程吗？？" target="_blank">那位大侠能讲一讲目前GSM接入信道的物理层详细流程吗？？</a></li>
<li>· <a href="http://www.mscbsc.com/askpro/question42900" title="做通信设计（无线专业）可以转做网优吗？做网优更好还是设计更好呢？" target="_blank">做通信设计（无线专业）可以转做网优吗？做网优更好还是设计更好呢？</a></li>
<li>· <a href="http://www.mscbsc.com/askpro/question42899" title="一个基站同时出现严重上行干扰，该怎么解决" target="_blank">一个基站同时出现严重上行干扰，该怎么解决</a></li>
</ul>
<p>学习了。。。呵呵。。谢谢楼主的资料<a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> [<a href="http://www.mscbsc.com/bbs/memcp.php?action=credits&amp;operation=addfunds" target="_blank">现在充值，立即获得威望，安全、简单、快速！</a>] [<a href="http://www.telecomhr.com/" target="_blank">怎样免费获得高薪通信职位？简单的秘密</a>]</p>
<p><a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-1000430.html">nj_green</a> <img src="&quot;离线&quot;" alt="">
金牌会员
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=1000430" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=1000430&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
积分 6216
帖子 973
威望 -32 个
礼品兑换分 0 个
专家指数 0
注册 2008-10-15
专业方向  核心网
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=1000430" target="_blank">0</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=1000430" target="_blank">0</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-1000430.html" target="_blank">0%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#3</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=1600502" target="_blank">使用道具</a><br>发表于 2009-9-1 12:29:16  学习一下   呵呵<a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> 最新通信职位：<a href="http://gd.telecomhr.com/" target="_blank">广东通信人才网</a> | <a href="http://bj.telecomhr.com/" target="_blank">北京通信人才网</a> | <a href="http://sh.telecomhr.com/" target="_blank">上海通信人才网</a> | <a href="http://nj.telecomhr.com/" target="_blank">南京通信人才网</a> | <a href="http://xa.telecomhr.com/" target="_blank">西安通信人才网</a> | <a href="http://cq.telecomhr.com/" target="_blank">重庆通信人才网</a>
<a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-3647822.html">huanghou</a> <img src="&quot;离线&quot;" alt="">
中级会员
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=3647822" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=3647822&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
积分 617
帖子 124
威望 190 个
礼品兑换分 0 个
专家指数 -3
注册 2009-9-26
专业方向  网络优化
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3647822" target="_blank">1</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3647822" target="_blank">0</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-3647822.html" target="_blank">0%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#4</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=1693299" target="_blank">使用道具</a><br>发表于 2009-9-27 09:29:57  你那个系统是哪个版本的哦 好像现在升级成4个系统了<a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> [<a href="http://www.mscbsc.com/pay/vippay.php" target="_blank">2分钟拥有VIP权限和充足威望，可下载站内任何资料</a>] [<a href="http://www.telecomhr.com/" target="_blank">快速找到一份高薪的通信行业职位</a>]</p>
<p><a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-3647822.html">huanghou</a> <img src="&quot;离线&quot;" alt="">
中级会员
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=3647822" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=3647822&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
积分 617
帖子 124
威望 190 个
礼品兑换分 0 个
专家指数 -3
注册 2009-9-26
专业方向  网络优化
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3647822" target="_blank">1</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3647822" target="_blank">0</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-3647822.html" target="_blank">0%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#5</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=1693305" target="_blank">使用道具</a><br>发表于 2009-9-27 09:32:03  非常感谢楼主的帖子哈 我是刚进移动的 看到你的这些介绍能更快的学习了解  谢谢诶哦  顶个<a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> 最新通信职位：<a href="http://gd.telecomhr.com/" target="_blank">广东通信人才网</a> | <a href="http://bj.telecomhr.com/" target="_blank">北京通信人才网</a> | <a href="http://sh.telecomhr.com/" target="_blank">上海通信人才网</a> | <a href="http://nj.telecomhr.com/" target="_blank">南京通信人才网</a> | <a href="http://xa.telecomhr.com/" target="_blank">西安通信人才网</a> | <a href="http://cq.telecomhr.com/" target="_blank">重庆通信人才网</a>
<a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-10685.html">youfeng</a> <img src="&quot;离线&quot;" alt="">
论坛元老
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=10685" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=10685&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
积分 23743
帖子 2161
威望 5406 个
礼品兑换分 10 个
专家指数 328
注册 2006-9-20
专业方向  移动通信交换
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=10685" target="_blank">223</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=10685" target="_blank">12</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-10685.html" target="_blank">5%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#6</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=1703946" target="_blank">使用道具</a><br>发表于 2009-10-6 10:35:49  呵呵，只是知道这个BOSS，今天才知道具体的称呼。<a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> [<a href="http://www.mscbsc.com/pay/vippay.php" target="_blank">2分钟拥有VIP权限和充足威望，可下载站内任何资料</a>] [<a href="http://www.telecomhr.com/" target="_blank">快速找到一份高薪的通信行业职位</a>]</p>
<p><a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-3643480.html">mssbsc</a> <a href="http://www.mscbsc.com/bbs/thread-52231-1-1.html" title="认证专家1级" target="_blank"><img src="" alt=""></a> <img src="&quot;离线&quot;" alt="">
银牌会员
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=3643480" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=3643480&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
<img src="" alt="专家·初级勋章"><br>积分 4810
帖子 894
威望 9949 个
礼品兑换分 0 个
专家指数 340
注册 2009-8-17
专业方向  MSS RNC
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3643480" target="_blank">8</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3643480" target="_blank">1</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-3643480.html" target="_blank">13%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#7</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=1736270" target="_blank">使用道具</a><br>发表于 2009-10-18 15:31:10  谢谢楼主的资料<img src="" alt=""><a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> 热点： <a href="http://search.mscbsc.com/?keywords=%D5%D0%C6%B8" target="_blank">通信招聘职位</a> | <a href="http://search.mscbsc.com/?keywords=%CD%F8%C2%E7%D3%C5%BB%AF" target="_blank">网络优化全集</a> | <a href="http://search.mscbsc.com/?keywords=WCDMA" target="_blank">WCDMA精品</a> | <a href="http://search.mscbsc.com/?keywords=TD" target="_blank">TD-SCDMA学习资料</a> | <a href="http://search.mscbsc.com/?keywords=EVDO" target="_blank">EVDO</a> | <a href="http://search.mscbsc.com/?keywords=MGW" target="_blank">MGW媒体网关资料</a>
<a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-3650861.html">funny2007888</a> <a href="http://www.mscbsc.com/bbs/thread-52231-1-1.html" title="认证专家1级" target="_blank"><img src="" alt=""></a> <img src="&quot;离线&quot;" alt="">
金牌会员
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=3650861" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=3650861&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
<img src="" alt="专家·初级勋章">   <img src="" alt="纪念勋章·四周年"><br>积分 5838
帖子 1076
威望 1646 个
礼品兑换分 100 个
专家指数 458
注册 2009-11-5
专业方向  Network Management
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3650861" target="_blank">141</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3650861" target="_blank">46</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-3650861.html" target="_blank">33%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#8</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=1798532" target="_blank">使用道具</a><br>发表于 2009-11-8 01:41:06  谢谢楼主的分享
&quot;\9c(b/#t2]1u%L2iwww.mscbsc.comThanks a Lot<a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> 热点： <a href="http://search.mscbsc.com/?keywords=%D5%D0%C6%B8" target="_blank">通信招聘职位</a> | <a href="http://search.mscbsc.com/?keywords=%CD%F8%C2%E7%D3%C5%BB%AF" target="_blank">网络优化全集</a> | <a href="http://search.mscbsc.com/?keywords=WCDMA" target="_blank">WCDMA精品</a> | <a href="http://search.mscbsc.com/?keywords=TD" target="_blank">TD-SCDMA学习资料</a> | <a href="http://search.mscbsc.com/?keywords=EVDO" target="_blank">EVDO</a> | <a href="http://search.mscbsc.com/?keywords=MGW" target="_blank">MGW媒体网关资料</a></p>
<p><a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-3647583.html">mashanyou</a> <img src="&quot;离线&quot;" alt="">
初级会员
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=3647583" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=3647583&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
积分 310
帖子 62
威望 7339 个
礼品兑换分 0 个
专家指数 0
注册 2009-9-24
专业方向  营业稽核
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3647583" target="_blank">0</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3647583" target="_blank">0</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-3647583.html" target="_blank">0%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#9</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=1839175" target="_blank">使用道具</a><br>发表于 2009-11-22 13:35:32  谢谢楼主分享<img src="" alt=""><a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> 热点： <a href="http://search.mscbsc.com/?keywords=%D5%D0%C6%B8" target="_blank">通信招聘职位</a> | <a href="http://search.mscbsc.com/?keywords=%CD%F8%C2%E7%D3%C5%BB%AF" target="_blank">网络优化全集</a> | <a href="http://search.mscbsc.com/?keywords=WCDMA" target="_blank">WCDMA精品</a> | <a href="http://search.mscbsc.com/?keywords=TD" target="_blank">TD-SCDMA学习资料</a> | <a href="http://search.mscbsc.com/?keywords=EVDO" target="_blank">EVDO</a> | <a href="http://search.mscbsc.com/?keywords=MGW" target="_blank">MGW媒体网关资料</a>
<a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-10006224.html">hammer_cool</a> <img src="&quot;离线&quot;" alt="">
新手上路
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=10006224" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=10006224&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
积分 35
帖子 7
威望 121 个
礼品兑换分 0 个
专家指数 0
注册 2010-2-5
专业方向  IT
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=10006224" target="_blank">0</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=10006224" target="_blank">0</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-10006224.html" target="_blank">0%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#10</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=2141897" target="_blank">使用道具</a><br>发表于 2010-3-4 13:04:25  非常感谢！！！！！<a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> 热点： <a href="http://search.mscbsc.com/?keywords=%D5%D0%C6%B8" target="_blank">通信招聘职位</a> | <a href="http://search.mscbsc.com/?keywords=%CD%F8%C2%E7%D3%C5%BB%AF" target="_blank">网络优化全集</a> | <a href="http://search.mscbsc.com/?keywords=WCDMA" target="_blank">WCDMA精品</a> | <a href="http://search.mscbsc.com/?keywords=TD" target="_blank">TD-SCDMA学习资料</a> | <a href="http://search.mscbsc.com/?keywords=EVDO" target="_blank">EVDO</a> | <a href="http://search.mscbsc.com/?keywords=MGW" target="_blank">MGW媒体网关资料</a></p>
<p><a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-3637918.html">yang0709h</a> <img src="&quot;离线&quot;" alt="">
初级会员
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=3637918" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=3637918&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
积分 59
帖子 11
威望 51 个
礼品兑换分 0 个
专家指数 0
注册 2009-6-26
专业方向  计费
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3637918" target="_blank">0</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3637918" target="_blank">0</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-3637918.html" target="_blank">0%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#11</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=2149083" target="_blank">使用道具</a><br>发表于 2010-3-6 11:04:06  谢谢楼主分享，学习了~~<a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> 热点： <a href="http://search.mscbsc.com/?keywords=%D5%D0%C6%B8" target="_blank">通信招聘职位</a> | <a href="http://search.mscbsc.com/?keywords=%CD%F8%C2%E7%D3%C5%BB%AF" target="_blank">网络优化全集</a> | <a href="http://search.mscbsc.com/?keywords=WCDMA" target="_blank">WCDMA精品</a> | <a href="http://search.mscbsc.com/?keywords=TD" target="_blank">TD-SCDMA学习资料</a> | <a href="http://search.mscbsc.com/?keywords=EVDO" target="_blank">EVDO</a> | <a href="http://search.mscbsc.com/?keywords=MGW" target="_blank">MGW媒体网关资料</a>
<a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-3645523.html">0500220114</a> <img src="&quot;离线&quot;" alt="">
银牌会员
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=3645523" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=3645523&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
积分 2568
帖子 512
威望 9794 个
礼品兑换分 0 个
专家指数 8
注册 2009-9-6
专业方向  TD
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3645523" target="_blank">3</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3645523" target="_blank">0</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-3645523.html" target="_blank">0%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#12</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=2345656" target="_blank">使用道具</a><br>发表于 2010-4-23 10:59:00  顶，很不错<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> :victory: :victory: :victory: :victory:<img src="" alt="">
你能走多远不在于你的脚有多大，而在于你的意志力有多强！ <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> 热点： <a href="http://search.mscbsc.com/?keywords=%D5%D0%C6%B8" target="_blank">通信招聘职位</a> | <a href="http://search.mscbsc.com/?keywords=%CD%F8%C2%E7%D3%C5%BB%AF" target="_blank">网络优化全集</a> | <a href="http://search.mscbsc.com/?keywords=WCDMA" target="_blank">WCDMA精品</a> | <a href="http://search.mscbsc.com/?keywords=TD" target="_blank">TD-SCDMA学习资料</a> | <a href="http://search.mscbsc.com/?keywords=EVDO" target="_blank">EVDO</a> | <a href="http://search.mscbsc.com/?keywords=MGW" target="_blank">MGW媒体网关资料</a></p>
<p><a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-125606.html">网优先锋</a> <img src="&quot;离线&quot;" alt="">
银牌会员
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=125606" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=125606&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
积分 4360
帖子 757
威望 1106 个
礼品兑换分 10 个
专家指数 66
注册 2008-8-2
专业方向  移动网络优化
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=125606" target="_blank">6</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=125606" target="_blank">1</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-125606.html" target="_blank">17%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#13</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=2380382" target="_blank">使用道具</a><br>发表于 2010-5-1 21:34:01  学习学习，增加阅历。<a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> 热点： <a href="http://search.mscbsc.com/?keywords=%D5%D0%C6%B8" target="_blank">通信招聘职位</a> | <a href="http://search.mscbsc.com/?keywords=%CD%F8%C2%E7%D3%C5%BB%AF" target="_blank">网络优化全集</a> | <a href="http://search.mscbsc.com/?keywords=WCDMA" target="_blank">WCDMA精品</a> | <a href="http://search.mscbsc.com/?keywords=TD" target="_blank">TD-SCDMA学习资料</a> | <a href="http://search.mscbsc.com/?keywords=EVDO" target="_blank">EVDO</a> | <a href="http://search.mscbsc.com/?keywords=MGW" target="_blank">MGW媒体网关资料</a>
<a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-3645286.html">acool1234</a> <img src="&quot;离线&quot;" alt="">
初级会员
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=3645286" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=3645286&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
积分 145
帖子 29
威望 150 个
礼品兑换分 0 个
专家指数 0
注册 2009-9-4
专业方向  通信
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3645286" target="_blank">0</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=3645286" target="_blank">0</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-3645286.html" target="_blank">0%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#14</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=2427723" target="_blank">使用道具</a><br>发表于 2010-5-13 16:10:39  学习一下   呵呵<a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> 热点： <a href="http://search.mscbsc.com/?keywords=%D5%D0%C6%B8" target="_blank">通信招聘职位</a> | <a href="http://search.mscbsc.com/?keywords=%CD%F8%C2%E7%D3%C5%BB%AF" target="_blank">网络优化全集</a> | <a href="http://search.mscbsc.com/?keywords=WCDMA" target="_blank">WCDMA精品</a> | <a href="http://search.mscbsc.com/?keywords=TD" target="_blank">TD-SCDMA学习资料</a> | <a href="http://search.mscbsc.com/?keywords=EVDO" target="_blank">EVDO</a> | <a href="http://search.mscbsc.com/?keywords=MGW" target="_blank">MGW媒体网关资料</a></p>
<p><a href=""></a> <a href="http://www.mscbsc.com/bbs/space-uid-10008625.html">xl376</a> <img src="&quot;离线&quot;" alt="">
初级会员
<img src="" alt="">
<img src="" alt=""> <a href="http://www.mscbsc.com/bbs/pm.php?action=send&amp;uid=10008625" target="_blank">发短消息</a>  <img src="" alt=""> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist&amp;newbuddyid=10008625&amp;buddysubmit=yes" target="_blank">关注Ta</a> 
积分 120
帖子 24
威望 8814 个
礼品兑换分 0 个
专家指数 0
注册 2010-3-7
专业方向  软件
回答问题数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=10008625" target="_blank">0</a>
回答被采纳数 <a href="http://www.mscbsc.com/askpro/member.php?command=answer&amp;uid=10008625" target="_blank">0</a>
回答采纳率 <a href="http://www.mscbsc.com/askpro/member-10008625.html" target="_blank">0%</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" title="复制帖子链接到剪贴板" target="_blank">/#15</a>   <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">大</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">中</a> <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank">小</a></p>
<p><a href="http://www.mscbsc.com/bbs/magic.php?action=user&amp;pid=3088228" target="_blank">使用道具</a><br>发表于 2010-12-4 16:17:04  呵呵，谢谢楼主的资料！<a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt="顶部"></a> 热点： <a href="http://search.mscbsc.com/?keywords=%D5%D0%C6%B8" target="_blank">通信招聘职位</a> | <a href="http://search.mscbsc.com/?keywords=%CD%F8%C2%E7%D3%C5%BB%AF" target="_blank">网络优化全集</a> | <a href="http://search.mscbsc.com/?keywords=WCDMA" target="_blank">WCDMA精品</a> | <a href="http://search.mscbsc.com/?keywords=TD" target="_blank">TD-SCDMA学习资料</a> | <a href="http://search.mscbsc.com/?keywords=EVDO" target="_blank">EVDO</a> | <a href="http://search.mscbsc.com/?keywords=MGW" target="_blank">MGW媒体网关资料</a>
<a href=""> 16 </a><a href=""> 1/2 </a><a href="">1</a><a href="http://www.mscbsc.com/bbs/thread-141782-2-1.html" target="_blank">2</a><a href="http://www.mscbsc.com/bbs/thread-141782-2-1.html" target="_blank">››</a><img src="" alt=""><a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html###" target="_blank"><img src="" alt=""></a></p>
<p><a href="http://www.mscbsc.com/bbs/post.php?action=newthread&amp;fid=216&amp;extra=page%3D1" target="_blank">讨论帖</a> <a href="http://www.mscbsc.com/bbs/post.php?action=newthread&amp;fid=216&amp;extra=page%3D1&amp;data=yes" target="_blank">资料帖</a> <a href="http://www.mscbsc.com/bbs/post.php?action=newthread&amp;fid=216&amp;extra=page%3D1&amp;poll=yes" target="_blank">投票帖</a> <a href="http://www.mscbsc.com/bbs/post.php?action=newthread&amp;fid=216&amp;extra=page%3D1&amp;reward=yes" target="_blank">悬赏帖</a></p>
<p>本主题发布已超过3年，不能再回复，谢谢您的关注
最近访问的论坛 ... 中国移动通信</p>
<p><a href="http://www.mscbsc.com/bbs/memcp.php" target="_blank">个人中心首页</a> <a href="http://www.mscbsc.com/bbs/memcp.php?action=profile" target="_blank">编辑个人资料</a> <a href="http://www.mscbsc.com/bbs/memcp.php?action=credits" target="_blank">积分交易</a> <a href="http://www.mscbsc.com/bbs/memcp.php?action=usergroups" target="_blank">公众用户组</a> <a href="http://www.mscbsc.com/bbs/memcp.php?action=buddylist" target="_blank">好友列表</a> <a href="http://www.mscbsc.com/bbs/memcp.php?action=spacemodule" target="_blank">个人空间管理</a> <a href="http://www.mscbsc.com/?uid/0" target="_blank">升级我的博客</a>
<a href="http://www.mscbsc.com/bbs/plugins.php?p=nkflash" target="_blank">社区游戏区</a> <a href="http://www.mscbsc.com/bbs/plugin.php?identifier=bank&amp;module=bank" target="_blank">社区银行</a> <a href="http://www.mscbsc.com/bbs/plugin.php?identifier=invite&amp;module=invite" target="_blank">购买邀请码</a> <a href="http://www.mscbsc.com/bbs/flack.php" target="_blank">宣传中心</a> <a href="http://www.mscbsc.com/bbs/plugin.php?identifier=ditu&amp;module=ditu" target="_blank"><strong>全国地图</strong></a></p>
<p><a href="http://www.mscbsc.com/bbs/stats.php" target="_blank">基本概况</a> <a href="http://www.mscbsc.com/bbs/stats.php?type=views" target="_blank">流量统计</a><a href="http://www.mscbsc.com/bbs/stats.php?type=agent" target="_blank">客户软件</a><a href="http://www.mscbsc.com/bbs/stats.php?type=posts" target="_blank">发帖量记录</a> <a href="http://www.mscbsc.com/bbs/stats.php?type=forumsrank" target="_blank">论坛排行</a><a href="http://www.mscbsc.com/bbs/stats.php?type=threadsrank" target="_blank">主题排行</a><a href="http://www.mscbsc.com/bbs/stats.php?type=postsrank" target="_blank">发帖排行</a><a href="http://www.mscbsc.com/bbs/stats.php?type=creditsrank" target="_blank">积分排行</a> <a href="http://www.mscbsc.com/bbs/stats.php?type=trade" target="_blank">交易排行</a> <a href="http://www.mscbsc.com/bbs/stats.php?type=onlinetime" target="_blank">在线时间</a> <a href="http://www.mscbsc.com/bbs/stats.php?type=team" target="_blank">管理团队</a> <a href="http://www.mscbsc.com/bbs/stats.php?type=modworks" target="_blank">管理统计</a>
精彩通信图库<a href="http://www.mscbsc.com/bbs/picture.php"><img src="" alt="超牛的电信广告  摄于家乡某小区">
超牛的电信广告 摄于家乡某.</a><a href="http://www.mscbsc.com/bbs/picture.php"><img src="" alt="老挝当地见到的游戏，老少皆宜~~">
老挝当地见到的游戏，老少皆.</a><a href="http://www.mscbsc.com/bbs/picture.php"><img src="" alt="城市人，别小看农村的学校。">
城市人，别小看农村的学校。</a><a href="http://www.mscbsc.com/bbs/picture.php"><img src="" alt="第一次见这么粗的打孔水钻">
第一次见这么粗的打孔水钻</a><a href="http://www.mscbsc.com/bbs/picture.php"><img src="" alt="拨测时还真有人认为是卖手机的。。。">
拨测时还真有人认为是卖手机.</a></p>
<p>-
当前时区 GMT+8, 现在时间是 2011-11-28 17:50:45
<a href="http://www.miibeian.gov.cn/" target="_blank">粤ICP备06047514号</a>  <a href="http://www.mscbsc.com/" target="_blank">Copyright @ 2006-2011 mscbsc.com</a>  本站统一服务邮箱：mscbsc@163.com</p>
<p><a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html#top" target="_blank"><img src="" alt=""></a>
Processed in 0.097753 second(s), 40 queries , Gzip enabled <a href="http://www.mscbsc.com/bbs/thread-141782-1-1.html#top" target="_blank">TOP</a>
<a href="http://www.mscbsc.com/bbs/member.php?action=clearcookies&amp;formhash=f3161c38" target="_blank">清除 Cookies</a> - <a href="mailto:mscbsc@163.com">联系我们</a> - <a href="http://www.mscbsc.com/" target="_blank">移动通信网</a> - <a href="http://www.mscbsc.com/" target="_blank">移动通信论坛</a> - <a href="http://www.telecomhr.com/" target="_blank">通信招聘网</a> - <a href="http://www.mscbsc.com/bbs/archiver/" target="_blank">Archiver</a> - <a href="http://www.mscbsc.com/bbs/wap/" target="_blank">WAP</a> <a href=""></a></p>
<p><a href="http://tongji.baidu.com/hm-web/welcome/ico?s=73bd8be2cbf9ded0b6047737756e5af2" target="_blank"><img src="" alt=""></a> <a href="http://www.51.la/?786775" title="我要啦免费统计 VIP 用户" target="_blank">贵宾统计</a> <img src="" alt="">
<img src="" alt=""> <img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/业务/">业务</a></li></span></span> | <span class="tags">Tagged <a href="/tags/业务/" class="label label-primary">业务</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:43"datetime="2014-03-07 09:54:43"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-业务--BOSS业务介绍-计费与营帐系统-MSCBSC移动通信论坛国内领先的通信技术论坛/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-业务--BOSS业务介绍-计费与营帐系统-MSCBSC移动通信论坛国内领先的通信技术论坛" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-gitgithub--Markdown语法说明简体中文版/">Markdown 语法说明(简体中文版)</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:43.000Z"> <a href="/2014/02/02/2014-02-02-gitgithub--Markdown语法说明简体中文版/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="markdown-">Markdown 语法说明(简体中文版)</h1>
<p>&lt;&lt; <a href="http://wowubuntu.com/" target="_blank">访问 Wow!Ubuntu</a></p>
<p><strong>NOTE:</strong> This is Simplelified Chinese Edition Document of Markdown Syntax. If you are seeking for English Edition Document. Please refer to <a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">Markdown: Syntax</a>.</p>
<p><strong>声明：</strong> 这份文档派生(fork)于<a href="http://markdown.tw/" target="_blank">繁体中文版</a>，在此基础上进行了繁体转简体工作，并进行了适当的润色。此文档用 Markdown 语法编写，你可以到这里<a href="http://gitcafe.com/riku/Markdown-Syntax-CN/blob/master/syntax.md" target="_blank">查看它的源文件</a>。「繁体中文版的原始文件可以<a href="https://github.com/othree/markdown-syntax-zhtw/blob/master/syntax.md" target="_blank">查看这里</a> 。」--By @<a href="http://twitter.com/riku" target="_blank">riku</a></p>
<p><strong>注：</strong> 本项目托管于 <a href="http://gitcafe.com/riku/Markdown-Syntax-CN/" target="_blank">GitCafe</a>上，请通过&quot;派生&quot;和&quot;合并请求&quot;来帮忙改进本项目。</p>
<h1 id="markdown-http-wowubuntu-com-markdown-basic-html-">Markdown 语法说明 (简体中文版) / (<a href="http://wowubuntu.com/markdown/basic.html" target="_blank">点击查看快速入门</a>)</h1>
<ul>
<li><p><a href="http://wowubuntu.com/markdown/#overview" target="_blank">概述</a></p>
</li>
<li><p><a href="http://wowubuntu.com/markdown/#philosophy" target="_blank">宗旨</a></p>
</li>
<li><a href="http://wowubuntu.com/markdown/#html" target="_blank">兼容 HTML</a></li>
<li><a href="http://wowubuntu.com/markdown/#autoescape" target="_blank">特殊字符自动转换</a></li>
<li><p><a href="http://wowubuntu.com/markdown/#block" target="_blank">区块元素</a></p>
</li>
<li><p><a href="http://wowubuntu.com/markdown/#p" target="_blank">段落和换行</a></p>
</li>
<li><a href="http://wowubuntu.com/markdown/#header" target="_blank">标题</a></li>
<li><a href="http://wowubuntu.com/markdown/#blockquote" target="_blank">区块引用</a></li>
<li><a href="http://wowubuntu.com/markdown/#list" target="_blank">列表</a></li>
<li><a href="http://wowubuntu.com/markdown/#precode" target="_blank">代码区块</a></li>
<li><a href="http://wowubuntu.com/markdown/#hr" target="_blank">分隔线</a></li>
<li><p><a href="http://wowubuntu.com/markdown/#span" target="_blank">区段元素</a></p>
</li>
<li><p><a href="http://wowubuntu.com/markdown/#link" target="_blank">链接</a></p>
</li>
<li><a href="http://wowubuntu.com/markdown/#em" target="_blank">强调</a></li>
<li><a href="http://wowubuntu.com/markdown/#code" target="_blank">代码</a></li>
<li><a href="http://wowubuntu.com/markdown/#img" target="_blank">图片</a></li>
<li><p><a href="http://wowubuntu.com/markdown/#misc" target="_blank">其它</a></p>
</li>
<li><p><a href="http://wowubuntu.com/markdown/#backslash" target="_blank">反斜杠</a></p>
</li>
<li><a href="http://wowubuntu.com/markdown/#autolink" target="_blank">自动链接</a></li>
<li><a href="http://wowubuntu.com/markdown/#acknowledgement" target="_blank">感谢</a></li>
<li><a href="http://wowubuntu.com/markdown/#editor" target="_blank">Markdown 免费编辑器</a></li>
</ul>
<h2 id="-">概述</h2>
<h3 id="-">宗旨</h3>
<p>Markdown 的目标是实现「易读易写」。</p>
<p>可读性，无论如何，都是最重要的。一份使用 Markdown 格式撰写的文件应该可以直接以纯文本发布，并且看起来不会像是由许多标签或是格式指令所构成。Markdown 语法受到一些既有 text-to-HTML 格式的影响，包括 <a href="http://docutils.sourceforge.net/mirror/setext.html" target="_blank">Setext</a>、<a href="http://www.aaronsw.com/2002/atx/" target="_blank">atx</a>、<a href="http://textism.com/tools/textile/" target="_blank">Textile</a>、<a href="http://docutils.sourceforge.net/rst.html" target="_blank">reStructuredText</a>、<a href="http://www.triptico.com/software/grutatxt.html" target="_blank">Grutatext</a> 和 <a href="http://ettext.taint.org/doc/" target="_blank">EtText</a>，而最大灵感来源其实是纯文本电子邮件的格式。</p>
<p>总之， Markdown 的语法全由一些符号所组成，这些符号经过精挑细选，其作用一目了然。比如：在文字两旁加上星号，看起来就像/<em>强调/</em>。Markdown 的列表看起来，嗯，就是列表。Markdown 的区块引用看起来就真的像是引用一段文字，就像你曾在电子邮件中见过的那样。</p>
<h3 id="-html">兼容 HTML</h3>
<p>Markdown 语法的目标是：成为一种适用于网络的<em>书写</em>语言。</p>
<p>Markdown 不是想要取代 HTML，甚至也没有要和它相近，它的语法种类很少，只对应 HTML 标记的一小部分。Markdown 的构想<em>不是</em>要使得 HTML 文档更容易书写。在我看来， HTML 已经很容易写了。Markdown 的理念是，能让文档更容易读、写和随意改。HTML 是一种<em>发布</em>的格式，Markdown 是一种<em>书写</em>的格式。就这样，Markdown 的格式语法只涵盖纯文本可以涵盖的范围。</p>
<p>不在 Markdown 涵盖范围之内的标签，都可以直接在文档里面用 HTML 撰写。不需要额外标注这是 HTML 或是 Markdown；只要直接加标签就可以了。</p>
<p>要制约的只有一些 HTML 区块元素――比如</p>
<div>
、

<table>
、

<pre>
、

<p>
等标签，必须在前后加上空行与其它内容区隔开，还要求它们的开始标签与结尾标签不能用制表符或空格来缩进。Markdown 的生成器有足够智能，不会在 HTML 区块标签外加上不必要的

<p>
标签。

例子如下，在 Markdown 文件里加上一段 HTML 表格：
这是一个普通段落。 <table> <tr> <td>Foo</td> </tr> </table> 这是另一个普通段落。

请注意，在 HTML 区块标签间的 Markdown 格式语法将不会被处理。比如，你在 HTML 区块内使用 Markdown 样式的

/<em>强调/</em>
会没有效果。

HTML 的区段（行内）标签如

<span>
、

<cite>
、

<del>
可以在 Markdown 的段落、列表或是标题里随意使用。依照个人习惯，甚至可以不用 Markdown 格式，而直接采用 HTML 标签来格式化。举例说明：如果比较喜欢 HTML 的

<a>
或

<img>
标签，可以直接使用这些标签，而不用 Markdown 提供的链接或是图像标签语法。

和处在 HTML 区块标签间不同，Markdown 语法在 HTML 区段标签间是有效的。

### 特殊字符自动转换

在 HTML 文件中，有两个字符需要特殊处理：

&lt;
和

&amp;
。

&lt;
符号用于起始标签，

&amp;
符号则用于标记 HTML 实体，如果你只是想要显示这些字符的原型，你必须要使用实体的形式，像是

&lt;
和

&amp;
。

&amp;
字符尤其让网络文档编写者受折磨，如果你要打「

AT&amp;T
」 ，你必须要写成「

AT&amp;T
」。而网址中的

&amp;
字符也要转换。比如你要链接到：
<a href="http://images.google.com/images?num=30&amp;q=larry+bird" target="_blank">http://images.google.com/images?num=30&amp;q=larry+bird</a>

你必须要把网址转换写为：

<a href="http://images.google.com/images?num=30&amp;q=larry+bird" target="_blank">http://images.google.com/images?num=30&amp;q=larry+bird</a>

才能放到链接标签的

href
属性里。不用说也知道这很容易忽略，这也可能是 HTML 标准检验所检查到的错误中，数量最多的。

Markdown 让你可以自然地书写字符，需要转换的由它来处理好了。如果你使用的

&amp;
字符是 HTML 字符实体的一部分，它会保留原状，否则它会被转换成

&amp;amp
;。

所以你如果要在文档中插入一个版权符号

©
，你可以这样写：
&copy;

Markdown 会保留它不动。而若你写：

AT&amp;T

Markdown 就会将它转为：

AT&amp;T

类似的状况也会发生在

&lt;
符号上，因为 Markdown 允许 <a href="http://wowubuntu.com/markdown/#html" target="_blank">兼容 HTML</a> ，如果你是把

&lt;
符号作为 HTML 标签的定界符使用，那 Markdown 也不会对它做任何转换，但是如果你写：

4 &lt; 5

Markdown 将会把它转换为：

4 &lt; 5

不过需要注意的是，code 范围内，不论是行内还是区块，

&lt;
和

&amp;
两个符号都<em>一定</em>会被转换成 HTML 实体，这项特性让你可以很容易地用 Markdown 写 HTML code （和 HTML 相对而言， HTML 语法中，你要把所有的

&lt;
和

&amp;
都转换为 HTML 实体，才能在 HTML 文件里面写出 HTML code。）

## 区块元素

### 段落和换行

一个 Markdown 段落是由一个或多个连续的文本行组成，它的前后要有一个以上的空行（空行的定义是显示上看起来像是空的，便会被视为空行。比方说，若某一行只包含空格和制表符，则该行也会被视为空行）。普通段落不该用空格或制表符来缩进。

「由一个或多个连续的文本行组成」这句话其实暗示了 Markdown 允许段落内的强迫换行（插入换行符），这个特性和其他大部分的 text-to-HTML 格式不一样（包括 Movable Type 的「Convert Line Breaks」选项），其它的格式会把每个换行符都转成

<br />
标签。

如果你<em>确实</em>想要依赖 Markdown 来插入

<br />
标签的话，在插入处先按入两个以上的空格然后回车。

的确，需要多费点事（多加空格）来产生

<br />
，但是简单地「每个换行都转换为

<br />
」的方法在 Markdown 中并不适合， Markdown 中 email 式的 <a href="http://wowubuntu.com/markdown/#blockquote" target="_blank">区块引用</a> 和多段落的 <a href="http://wowubuntu.com/markdown/#list" target="_blank">列表</a> 在使用换行来排版的时候，不但更好用，还更方便阅读。

### 标题

Markdown 支持两种标题的语法，类 <a href="http://docutils.sourceforge.net/mirror/setext.html" target="_blank">Setext</a> 和类 <a href="http://www.aaronsw.com/2002/atx/" target="_blank">atx</a> 形式。

类 Setext 形式是用底线的形式，利用

=
（最高阶标题）和

-
（第二阶标题），例如：
This is an H1 ============= This is an H2 -------------

任何数量的

=
和

-
都可以有效果。

类 Atx 形式则是在行首插入 1 到 6 个

/#
，对应到标题 1 到 6 阶，例如：
/# 这是 H1 /#/# 这是 H2 /#/#/#/#/#/# 这是 H6

你可以选择性地「闭合」类 atx 样式的标题，这纯粹只是美观用的，若是觉得这样看起来比较舒适，你就可以在行尾加上

/#
，而行尾的

/#
数量也不用和开头一样（行首的井字符数量决定标题的阶数）：

/# 这是 H1 /# /#/# 这是 H2 /#/# /#/#/# 这是 H3 /#/#/#/#/#/#

### 区块引用 Blockquotes

Markdown 标记区块引用是使用类似 email 中用

&gt;
的引用方式。如果你还熟悉在 email 信件中的引言部分，你就知道怎么在 Markdown 文件中建立一个区块引用，那会看起来像是你自己先断好行，然后在每行的最前面加上

&gt;
：
&gt; This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, &gt; consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. &gt; Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. &gt; &gt; Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse &gt; id sem consectetuer libero luctus adipiscing.

Markdown 也允许你偷懒只在整个段落的第一行最前面加上

&gt;
：

&gt; This is a blockquote with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. &gt; Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse id sem consectetuer libero luctus adipiscing.

区块引用可以嵌套（例如：引用内的引用），只要根据层次加上不同数量的

&gt;
：

&gt; This is the first level of quoting. &gt; &gt; &gt; This is nested blockquote. &gt; &gt; Back to the first level.

引用的区块内也可以使用其他的 Markdown 语法，包括标题、列表、代码区块等：

&gt; /#/# 这是一个标题。 &gt; &gt; 1. 这是第一行列表项。 &gt; 2. 这是第二行列表项。 &gt; &gt; 给出一些例子代码： &gt; &gt; return shell_exec(&quot;echo $input | $markdown_script&quot;);

任何像样的文本编辑器都能轻松地建立 email 型的引用。例如在 BBEdit 中，你可以选取文字后然后从选单中选择<em>增加引用阶层</em>。

### 列表

Markdown 支持有序列表和无序列表。

无序列表使用星号、加号或是减号作为列表标记：
/<em> Red /</em> Green /<em> Blue

等同于：

+ Red + Green + Blue

也等同于：

- Red - Green - Blue

有序列表则使用数字接着一个英文句点：

1. Bird 2. McHale 3. Parish

很重要的一点是，你在列表标记上使用的数字并不会影响输出的 HTML 结果，上面的列表所产生的 HTML 标记为：

<ol> <li>Bird</li> <li>McHale</li> <li>Parish</li> </ol>

如果你的列表标记写成：

1. Bird 1. McHale 1. Parish

或甚至是：

3. Bird 1. McHale 8. Parish

你都会得到完全相同的 HTML 输出。重点在于，你可以让 Markdown 文件的列表数字和输出的结果相同，或是你懒一点，你可以完全不用在意数字的正确性。

如果你使用懒惰的写法，建议第一个项目最好还是从 1. 开始，因为 Markdown 未来可能会支持有序列表的 start 属性。

列表项目标记通常是放在最左边，但是其实也可以缩进，最多 3 个空格，项目标记后面则一定要接着至少一个空格或制表符。

要让列表看起来更漂亮，你可以把内容用固定的缩进整理好：
/</em> Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. /<em> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse id sem consectetuer libero luctus adipiscing.

但是如果你懒，那也行：

/</em> Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. /<em> Donec sit amet nisl. Aliquam semper ipsum sit amet velit. Suspendisse id sem consectetuer libero luctus adipiscing.

如果列表项目间用空行分开，在输出 HTML 时 Markdown 就会将项目内容用

<p>
标签包起来，举例来说：

/</em> Bird /<em> Magic

会被转换为：

<ul> <li>Bird</li> <li>Magic</li> </ul>

但是这个：

/</em> Bird /<em> Magic

会被转换为：

<ul> <li><p>Bird</p></li> <li><p>Magic</p></li> </ul>

列表项目可以包含多个段落，每个项目下的段落都必须缩进 4 个空格或是 1 个制表符：

1. This is a list item with two paragraphs. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aliquam hendrerit mi posuere lectus. Vestibulum enim wisi, viverra nec, fringilla in, laoreet vitae, risus. Donec sit amet nisl. Aliquam semper ipsum sit amet velit. 2. Suspendisse id sem consectetuer libero luctus adipiscing.

如果你每行都有缩进，看起来会看好很多，当然，再次地，如果你很懒惰，Markdown 也允许：

/</em> This is a list item with two paragraphs. This is the second paragraph in the list item. You&#39;re only required to indent the first line. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. /<em> Another item in the same list.

如果要在列表项目内放进引用，那

&gt;
就需要缩进：

/</em> A list item with a blockquote: &gt; This is a blockquote &gt; inside a list item.

如果要放代码区块的话，该区块就需要缩进<em>两次</em>，也就是 8 个空格或是 2 个制表符：

/<em> 一列表项包含一个列表区块： &lt;代码写在这&gt;

当然，项目列表很可能会不小心产生，像是下面这样的写法：

1986. What a great season.

换句话说，也就是在行首出现</em>数字-句点-空白*，要避免这样的状况，你可以在句点前面加上反斜杠。

1986. What a great season.

### 代码区块

和程序相关的写作或是标签语言原始码通常会有已经排版好的代码区块，通常这些区块我们并不希望它以一般段落文件的方式去排版，而是照原来的样子显示，Markdown 会用

<pre>
和

<code>
标签来把代码区块包起来。

要在 Markdown 中建立代码区块很简单，只要简单地缩进 4 个空格或是 1 个制表符就可以，例如，下面的输入：
这是一个普通段落： 这是一个代码区块。

Markdown 会转换成：

<p>这是一个普通段落：</p> <pre><code>这是一个代码区块。 </code></pre>

这个每行一阶的缩进（4 个空格或是 1 个制表符），都会被移除，例如：

Here is an example of AppleScript: tell application &quot;Foo&quot; beep end tell

会被转换为：

<p>Here is an example of AppleScript:</p> <pre><code>tell application &quot;Foo&quot; beep end tell </code></pre>

一个代码区块会一直持续到没有缩进的那一行（或是文件结尾）。

在代码区块里面，

&amp;
、

&lt;
和

&gt;
会自动转成 HTML 实体，这样的方式让你非常容易使用 Markdown 插入范例用的 HTML 原始码，只需要复制贴上，再加上缩进就可以了，剩下的 Markdown 都会帮你处理，例如：
<div class="footer"> &copy; 2004 Foo Corporation </div>

<p>会被转换为：</p>
<pre><code>&lt;div class="footer"&gt; &amp;copy; 2004 Foo Corporation &lt;/div&gt; </code></pre>

<p>代码区块中，一般的 Markdown 语法不会被转换，像是星号便只是星号，这表示你可以很容易地以 Markdown 语法撰写 Markdown 语法相关的文件。</p>
<h3 id="-">分隔线</h3>
<p>你可以在一行中用三个以上的星号、减号、底线来建立一个分隔线，行内不能有其他东西。你也可以在星号或是减号中间插入空格。下面每种写法都可以建立分隔线：
/<em> /</em> /<em> /</em>/<em>/</em> /<em>/</em>/<em>/</em>/* - - - ---------------------------------------</p>
<h2 id="-">区段元素</h2>
<h3 id="-">链接</h3>
<p>Markdown 支持两种形式的链接语法： <em>行内式</em>和<em>参考式</em>两种形式。</p>
<p>不管是哪一种，链接文字都是用 [方括号] 来标记。</p>
<p>要建立一个<em>行内式</em>的链接，只要在方块括号后面紧接着圆括号并插入网址链接即可，如果你还想要加上链接的 title 文字，只要在网址后面，用双引号把 title 文字包起来即可，例如：
This is <a href="http://example.com/" title="Title" target="_blank">an example</a> inline link. <a href="http://example.net/" target="_blank">This link</a> has no title attribute.</p>
<p>会产生：</p>
<p>This is <a href="http://example.com/" title="Title" target="_blank"> an example</a> inline link.</p> <p><a href="http://example.net/" target="_blank">This link</a> has no title attribute.</p>

<p>如果你是要链接到同样主机的资源，你可以使用相对路径：</p>
<p>See my <a href="/about/">About</a> page for details.</p>
<p><em>参考式</em>的链接是在链接文字的括号后面再接上另一个方括号，而在第二个方括号里面要填入用以辨识链接的标记：</p>
<p>This is <a href="url/to/image" title="Optional title attribute">an example</a> reference-style link.</p>
<p>你也可以选择性地在两个方括号中间加上一个空格：</p>
<p>This is <a href="url/to/image" title="Optional title attribute">an example</a> reference-style link.</p>
<p>接着，在文件的任意处，你可以把这个标记的链接内容定义出来：</p>
<p>链接内容定义的形式为：</p>
<ul>
<li>方括号（前面可以选择性地加上至多三个空格来缩进），里面输入链接文字</li>
<li>接着一个冒号</li>
<li>接着一个以上的空格或制表符</li>
<li>接着链接的网址</li>
<li>选择性地接着 title 内容，可以用单引号、双引号或是括弧包着</li>
</ul>
<p>下面这三种链接的定义都是相同：</p>
<p><strong>请注意：</strong>有一个已知的问题是 Markdown.pl 1.0.1 会忽略单引号包起来的链接 title。</p>
<p>链接网址也可以用方括号包起来：</p>
<p>你也可以把 title 属性放到下一行，也可以加一些缩进，若网址太长的话，这样会比较好看：</p>
<p>网址定义只有在产生链接的时候用到，并不会直接出现在文件之中。</p>
<p>链接辨别标签可以有字母、数字、空白和标点符号，但是并<em>不</em>区分大小写，因此下面两个链接是一样的：
[link text][a] [link text][A]</p>
<p><em>隐式链接标记</em>功能让你可以省略指定链接标记，这种情形下，链接标记会视为等同于链接文字，要用隐式链接标记只要在链接文字后面加上一个空的方括号，如果你要让 &quot;Google&quot; 链接到 google.com，你可以简化成：</p>
<p><a href="http://google.com/" target="_blank">Google</a></p>
<p>然后定义链接内容：</p>
<p>由于链接文字可能包含空白，所以这种简化型的标记内也许包含多个单词：</p>
<p>Visit <a href="http://daringfireball.net/" target="_blank">Daring Fireball</a> for more information.</p>
<p>然后接着定义链接：</p>
<p>链接的定义可以放在文件中的任何一个地方，我比较偏好直接放在链接出现段落的后面，你也可以把它放在文件最后面，就像是注解一样。</p>
<p>下面是一个参考式链接的范例：
I get 10 times more traffic from [Google] [1] than from [Yahoo] [2] or [MSN] [3]. [1]: <a href="http://google.com/" target="_blank">http://google.com/</a> &quot;Google&quot; [2]: <a href="http://search.yahoo.com/" target="_blank">http://search.yahoo.com/</a> &quot;Yahoo Search&quot; [3]: <a href="http://search.msn.com/" target="_blank">http://search.msn.com/</a> &quot;MSN Search&quot;</p>
<p>如果改成用链接名称的方式写：</p>
<p>I get 10 times more traffic from <a href="http://google.com/" target="_blank">Google</a> than from [Yahoo][] or [MSN][]. <a href="http://google.com/" target="_blank">google</a>: <a href="http://google.com/" target="_blank">http://google.com/</a> &quot;Google&quot; [yahoo]: <a href="http://search.yahoo.com/" target="_blank">http://search.yahoo.com/</a> &quot;Yahoo Search&quot; [msn]: <a href="http://search.msn.com/" target="_blank">http://search.msn.com/</a> &quot;MSN Search&quot;</p>
<p>上面两种写法都会产生下面的 HTML。</p>
<p>I get 10 times more traffic from <a href="http://google.com/" title="Google" target="_blank">Google</a> than from <a href="http://search.yahoo.com/" title="Yahoo Search" target="_blank">Yahoo</a> or <a href="http://search.msn.com/" title="MSN Search" target="_blank">MSN</a>.</p>

<p>下面是用行内式写的同样一段内容的 Markdown 文件，提供作为比较之用：</p>
<p>I get 10 times more traffic from <a href="http://google.com/" title="Google" target="_blank">Google</a> than from <a href="http://search.yahoo.com/" title="Yahoo Search" target="_blank">Yahoo</a> or <a href="http://search.msn.com/" title="MSN Search" target="_blank">MSN</a>.</p>
<p>参考式的链接其实重点不在于它比较好写，而是它比较好读，比较一下上面的范例，使用参考式的文章本身只有 81 个字符，但是用行内形式的却会增加到 176 个字元，如果是用纯 HTML 格式来写，会有 234 个字元，在 HTML 格式中，标签比文本还要多。</p>
<p>使用 Markdown 的参考式链接，可以让文件更像是浏览器最后产生的结果，让你可以把一些标记相关的元数据移到段落文字之外，你就可以增加链接而不让文章的阅读感觉被打断。</p>
<h3 id="-">强调</h3>
<p>Markdown 使用星号（</p>
<p>/*
）和底线（</p>
<p>_
）作为标记强调字词的符号，被</p>
<p>/*
或</p>
<p>_
包围的字词会被转成用</p>
<p><em>
标签包围，用两个</p>
<p>/*
或</p>
<p>_
包起来的话，则会被转成</p>
<p><strong>
，例如：
/<em>single asterisks/</em> <em>single underscores</em> /<em>/</em>double asterisks/<em>/</em> <strong>double underscores</strong></p>
<p>会转成：</p>
<p><em>single asterisks</em> <em>single underscores</em> <strong>double asterisks</strong> <strong>double underscores</strong></p>
<p>你可以随便用你喜欢的样式，唯一的限制是，你用什么符号开启标签，就要用什么符号结束。</p>
<p>强调也可以直接插在文字中间：
un/<em>frigging/</em>believable</p>
<p>但是**如果你的</p>
<p>/*
和</p>
<p>_
两边都有空白的话，它们就只会被当成普通的符号**。</p>
<p>如果要在文字前后直接插入普通的星号或底线，你可以用反斜线：
\/<em>this text is surrounded by literal asterisks\/</em></p>
<h3 id="-">代码</h3>
<p>如果要标记一小段行内代码，你可以用反引号把它包起来（</p>
<p><code>），例如：
Use the</code>printf()` function.</p>
<p>会产生：</p>
<p>Use the <code>printf()</code> function.</p>

<p>如果要在代码区段内插入反引号，你可以用多个反引号来开启和结束代码区段：</p>
<p><code>There is a literal backtick (`) here.</code></p>
<p>这段语法会产生：</p>
<p><code>There is a literal backtick (`) here.</code></p>

<p>代码区段的起始和结束端都可以放入一个空白，起始端后面一个，结束端前面一个，这样你就可以在区段的一开始就插入反引号：</p>
<p>A single backtick in a code span: <code>` </code> A backtick-delimited string in a code span: <code>`foo` </code></p>
<p>会产生：</p>
<p>A single backtick in a code span: <code><code>&lt;/code&gt;&lt;/p&gt; &lt;p&gt;A backtick-delimited string in a code span: &lt;code&gt;</code>foo`</code></p>

<p>在代码区段内，</p>
<p>&amp;
和方括号<strong>都</strong>会被自动地转成 HTML 实体，这使得插入 HTML 原始码变得很容易，Markdown 会把下面这段：</p>
<p>Please don&#39;t use any <code>&lt;blink&gt;</code> tags.</p>
<p>转为：</p>
<p>Please don&#39;t use any <code>&lt;blink&gt;</code> tags.</p>

<p>你也可以这样写：</p>
<p><code>&amp;/#8212;</code> is the decimal-encoded equivalent of <code>&amp;mdash;</code>.</p>
<p>以产生：</p>
<p><code>&amp;/#8212;</code> is the decimal-encoded equivalent of <code>&amp;mdash;</code>.</p>

<h3 id="-">图片</h3>
<p>很明显地，要在纯文字应用中设计一个「自然」的语法来插入图片是有一定难度的。</p>
<p>Markdown 使用一种和链接很相似的语法来标记图片，同样也允许两种样式： <em>行内式</em>和<em>参考式</em>。</p>
<p>行内式的图片语法看起来像是：
<img src="/path/to/img.jpg" alt="Alt text"> <img src="/path/to/img.jpg" alt="Alt text" title="Optional title"></p>
<p>详细叙述如下：</p>
<ul>
<li>一个惊叹号</li>
</ul>
<p>!</p>
<ul>
<li>接着一个方括号，里面放上图片的替代文字</li>
<li>接着一个普通括号，里面放上图片的网址，最后还可以用引号包住并加上 选择性的 &#39;title&#39; 文字。</li>
</ul>
<p>参考式的图片语法则长得像这样：
<img src="url/to/image" alt="Alt text" title="Optional title attribute"></p>
<p>「id」是图片参考的名称，图片参考的定义方式则和连结参考一样：</p>
<p>到目前为止， Markdown 还没有办法指定图片的宽高，如果你需要的话，你可以使用普通的</p>
<p><img>
标签。</p>
<h2 id="-">其它</h2>
<h3 id="-">自动链接</h3>
<p>Markdown 支持以比较简短的自动链接形式来处理网址和电子邮件信箱，只要是用方括号包起来， Markdown 就会自动把它转成链接。一般网址的链接文字就和链接地址一样，例如：
<a href="http://example.com/" target="_blank">http://example.com/</a></p>
<p>Markdown 会转为：</p>
<p><a href="http://example.com/" target="_blank"><a href="http://example.com/">http://example.com/</a></a></p>
<p>邮址的自动链接也很类似，只是 Markdown 会先做一个编码转换的过程，把文字字符转成 16 进位码的 HTML 实体，这样的格式可以糊弄一些不好的邮址收集机器人，例如：</p>
<p><a href="&#x6d;&#97;&#105;&#108;&#x74;&#111;&#58;&#x61;&#x64;&#100;&#114;&#x65;&#115;&#115;&#64;&#x65;&#120;&#x61;&#x6d;&#x70;&#108;&#x65;&#x2e;&#99;&#x6f;&#x6d;">&#x61;&#x64;&#100;&#114;&#x65;&#115;&#115;&#64;&#x65;&#120;&#x61;&#x6d;&#x70;&#108;&#x65;&#x2e;&#99;&#x6f;&#x6d;</a></p>
<p>Markdown 会转成：</p>
<p><a href="&/#x6D;&/#x61;i&/#x6C;&/#x74;&/#x6F;:&/#x61;&/#x64;&/#x64;&/#x72;&/#x65; &/#115;&/#115;&/#64;&/#101;&/#120;&/#x61;&/#109;&/#x70;&/#x6C;e&/#x2E;&/#99;&/#111; &/#109;">&amp;/#x61;&amp;/#x64;&amp;/#x64;&amp;/#x72;&amp;/#x65;&amp;/#115;&amp;/#115;&amp;/#64;&amp;/#101;&amp;/#120;&amp;/#x61; &amp;/#109;&amp;/#x70;&amp;/#x6C;e&amp;/#x2E;&amp;/#99;&amp;/#111;&amp;/#109;</a></p>
<p>在浏览器里面，这段字串（其实是</p>
<p><a href="mailto:address@example.com">address@example.com</a>
）会变成一个可以点击的「address@example.com」链接。</p>
<p>（这种作法虽然可以糊弄不少的机器人，但并不能全部挡下来，不过总比什么都不做好些。不管怎样，公开你的信箱终究会引来广告信件的。）</p>
<h3 id="-">反斜杠</h3>
<p>Markdown 可以利用反斜杠来插入一些在语法中有其它意义的符号，例如：如果你想要用星号加在文字旁边的方式来做出强调效果（但不用</p>
<p><em>
标签），你可以在星号的前面加上反斜杠：
\/<em>literal asterisks\/</em></p>
<p>Markdown 支持以下这些符号前面加上反斜杠来帮助插入普通的符号：</p>
<p>\ 反斜线 ` 反引号 /* 星号 _ 底线 {} 花括号 [] 方括号 () 括弧 /# 井字号 + 加号 - 减号 . 英文句点 ! 惊叹号</p>
<h2 id="-">感谢</h2>
<p>感谢 <a href="https://twitter.com/#!/leafy7382" target="_blank">leafy7382</a> 协助翻译，<a href="http://iamhlb.com/" target="_blank">hlb</a>、<a href="http://twitter.com/randylien" target="_blank">Randylien</a> 帮忙润稿，<a href="https://twitter.com/#!/ethantw" target="_blank">ethantw</a> 的<a href="http://ethantw.net/projects/han/" target="_blank">汉字标准格式・CSS Reset</a>， <a href="http://kidwm.net/" target="_blank">WM</a> 回报文字错误。</p>
<p>感谢 <a href="https://github.com/fenprace" target="_blank">fenprace</a>，<a href="https://github.com/addv" target="_blank">addv</a>。</p>
<h2 id="markdown-">Markdown 免费编辑器</h2>
<p>Windows 平台</p>
<ul>
<li><a href="http://markdownpad.com/" target="_blank">MarkdownPad</a></li>
<li><a href="http://code52.org/DownmarkerWPF/" target="_blank">MarkPad</a></li>
</ul>
<p>Linux 平台</p>
<ul>
<li><a href="http://sourceforge.net/p/retext/home/ReText/" target="_blank">ReText</a></li>
</ul>
<p>Mac 平台</p>
<ul>
<li><a href="http://mouapp.com/" target="_blank">Mou</a></li>
</ul>
<p>在线编辑器</p>
<ul>
<li><a href="http://markable.in/" target="_blank">Markable.in</a></li>
<li><a href="http://dillinger.io/" target="_blank">Dillinger.io</a></li>
</ul>
<p>浏览器插件</p>
<ul>
<li><a href="https://chrome.google.com/webstore/detail/oknndfeeopgpibecfjljjfanledpbkog" target="_blank">MaDe</a> (Chrome)</li>
</ul>
<p>高级应用</p>
<ul>
<li><a href="http://www.sublimetext.com/2" target="_blank">Sublime Text 2</a> + <a href="http://ttscoff.github.com/MarkdownEditing/" target="_blank">MarkdownEditing</a> / <a href="http://lucifr.com/2012/07/12/markdownediting-for-sublime-text-2/" target="_blank">教程</a></li>
</ul>
<p>/<em>/</em>/* 如有更好的 Markdown 免费编辑器推荐，请到<a href="https://gitcafe.com/riku/Markdown-Syntax-CN/tickets/1" target="_blank">这里反馈</a>，谢谢！</p>
<p>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" target="_blank">comments powered by Disqus.</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/git&github/">git&github</a></li></span></span> | <span class="tags">Tagged <a href="/tags/git&github/" class="label label-primary">git&github</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:43"datetime="2014-03-07 09:54:43"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-gitgithub--Markdown语法说明简体中文版/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-gitgithub--Markdown语法说明简体中文版" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-gitgithub--git-api/">git</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:43.000Z"> <a href="/2014/02/02/2014-02-02-gitgithub--git-api/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="git-api">git-api</h1>
<p><img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/git&github/">git&github</a></li></span></span> | <span class="tags">Tagged <a href="/tags/git&github/" class="label label-primary">git&github</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:43"datetime="2014-03-07 09:54:43"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-gitgithub--git-api/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-gitgithub--git-api" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/41/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/39/">39</a></li><li><a class="page-number" href="/page/40/">40</a></li><li><a class="page-number" href="/page/41/">41</a></li><li class="active"><li><span class="page-number current">42</span></li><li><a class="page-number" href="/page/43/">43</a></li><li><a class="page-number" href="/page/44/">44</a></li><li><a class="page-number" href="/page/45/">45</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/43/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 16:33:41</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
