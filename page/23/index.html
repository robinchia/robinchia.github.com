
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 23 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--JAVA中Stringformat的用法/">JAVA中String.format的用法 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--JAVA中Stringformat的用法/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="java-string-format-xytop-">JAVA中String.format的用法 - xytop - 博客园</h1>
<p><a href="http://www.cnblogs.com/xytop/" target="_blank">xytop</a></p>
<h2 id="java-string-format-">JAVA String.format 方法使用介绍</h2>
<p>1.对整数进行格式化：%[index$][标识][最小宽度]转换方式
        我们可以看到，格式化字符串由4部分组成，其中%[index$]的含义我们上面已经讲过，[最小宽度]的含义也很好理解，就是最终该整数转化的字符串最少包含多少位数字。我们来看看剩下2个部分的含义吧：
<img src="" alt="">标识： 
<img src="" alt="">&#39;-&#39;    在最小宽度内左对齐，不可以与“用0填充”同时使用
<img src="" alt="">&#39;/#&#39;    只适用于8进制和16进制，8进制时在结果前面增加一个0，16进制时在结果前面增加0x
<img src="" alt="">&#39;+&#39;    结果总是包括一个符号（一般情况下只适用于10进制，若对象为BigInteger才可以用于8进制和16进制）
<img src="" alt="">&#39;  &#39;    正值前加空格，负值前加负号（一般情况下只适用于10进制，若对象为BigInteger才可以用于8进制和16进制）
<img src="" alt="">&#39;0&#39;    结果将用零来填充
<img src="" alt="">&#39;,&#39;    只适用于10进制，每3位数字之间用“，”分隔
<img src="" alt="">&#39;(&#39;    若参数是负数，则结果中不添加负号而是用圆括号把数字括起来（同‘+’具有同样的限制）
<img src="" alt="">
<img src="" alt="">转换方式：
<img src="" alt="">d-十进制   o-八进制   x或X-十六进制</p>
<pre><code>    上面的说明过于枯燥，我们来看几个具体的例子。需要特别注意的一点是：大部分标识字符可以同时使用。
</code></pre><p><img src="" alt="">        System.out.println(String.format(&quot;%1$,09d&quot;, -3123));
<img src="" alt="">        System.out.println(String.format(&quot;%1$9d&quot;, -31));
<img src="" alt="">        System.out.println(String.format(&quot;%1$-9d&quot;, -31));
<img src="" alt="">        System.out.println(String.format(&quot;%1$(9d&quot;, -31));
<img src="" alt="">        System.out.println(String.format(&quot;%1$/#9x&quot;, 5689));
<img src="" alt="">
<img src="" alt="">//结果为：
<img src="" alt="">//-0003,123
<img src="" alt="">//      -31
<img src="" alt="">//-31<br><img src="" alt="">//     (31)
<img src="" alt="">//   0x1639</p>
<p>2.对浮点数进行格式化：%[index$][标识][最少宽度][.精度]转换方式
        我们可以看到，浮点数的转换多了一个“精度”选项，可以控制小数点后面的位数。</p>
<p><img src="" alt="">标识： 
<img src="" alt="">&#39;-&#39;    在最小宽度内左对齐，不可以与“用0填充”同时使用
<img src="" alt="">&#39;+&#39;    结果总是包括一个符号
<img src="" alt="">&#39;  &#39;    正值前加空格，负值前加负号
<img src="" alt="">&#39;0&#39;    结果将用零来填充
<img src="" alt="">&#39;,&#39;    每3位数字之间用“，”分隔（只适用于fgG的转换）
<img src="" alt="">&#39;(&#39;    若参数是负数，则结果中不添加负号而是用圆括号把数字括起来（只适用于eEfgG的转换）
<img src="" alt="">
<img src="" alt="">转换方式：
<img src="" alt="">&#39;e&#39;, &#39;E&#39;  --  结果被格式化为用计算机科学记数法表示的十进制数
<img src="" alt="">&#39;f&#39;          --  结果被格式化为十进制普通表示方式
<img src="" alt="">&#39;g&#39;, &#39;G&#39;    --  根据具体情况，自动选择用普通表示方式还是科学计数法方式
<img src="" alt="">&#39;a&#39;, &#39;A&#39;    --   结果被格式化为带有效位数和指数的十六进制浮点数</p>
<p>3.对字符进行格式化：
        对字符进行格式化是非常简单的，c表示字符，标识中&#39;-&#39;表示左对齐，其他就没什么了。
4.对百分比符号进行格式化：
        看了上面的说明，大家会发现百分比符号“%”是特殊格式的一个前缀。那么我们要输入一个百分比符号该怎么办呢？肯定是需要转义字符的,但是要注意的是，在这里转义字符不是“\”，而是“%”。换句话说，下面这条语句可以输出一个“12%”：
System.out.println(String.format(&quot;%1$d%%&quot;, 12));
5.取得平台独立的行分隔符：
        System.getProperty(&quot;line.separator&quot;)可以取得平台独立的行分隔符，但是用在format中间未免显得过于烦琐了。于是format函数自带了一个平台独立的行分隔符那就是String.format(&quot;%n&quot;)。
6.对日期类型进行格式化：
         以下日期和时间转换的后缀字符是为 &#39;t&#39; 和 &#39;T&#39; 转换定义的。这些类型相似于但不完全等同于那些由 GNU date 和 POSIX strftime(3c) 定义的类型。提供其他转换类型是为了访问特定于 Java 的功能（如将 &#39;L&#39; 用作秒中的毫秒）。
以下转换字符用来格式化时间：
&#39;H&#39;     24 小时制的小时，被格式化为必要时带前导零的两位数，即 00 - 23。
&#39;I&#39;     12 小时制的小时，被格式化为必要时带前导零的两位数，即 01 - 12。
&#39;k&#39;     24 小时制的小时，即 0 - 23。
&#39;l&#39;     12 小时制的小时，即 1 - 12。
&#39;M&#39;     小时中的分钟，被格式化为必要时带前导零的两位数，即 00 - 59。
&#39;S&#39;     分钟中的秒，被格式化为必要时带前导零的两位数，即 00 - 60 （&quot;60&quot; 是支持闰秒所需的一个特殊值）。
&#39;L&#39;     秒中的毫秒，被格式化为必要时带前导零的三位数，即 000 - 999。
&#39;N&#39;     秒中的毫微秒，被格式化为必要时带前导零的九位数，即 000000000 - 999999999。
&#39;p&#39;     特定于语言环境的 上午或下午 标记以小写形式表示，例如 &quot;am&quot; 或 &quot;pm&quot;。使用转换前缀 &#39;T&#39; 可以强行将此输出转换为大写形式。
&#39;z&#39;     相对于 GMT 的 RFC 822 格式的数字时区偏移量，例如 -0800。
&#39;Z&#39;     表示时区缩写形式的字符串。Formatter 的语言环境将取代参数的语言环境（如果有）。
&#39;s&#39;     自协调世界时 (UTC) 1970 年 1 月 1 日 00:00:00 至现在所经过的秒数，即 Long.MIN_VALUE/1000 与 Long.MAX_VALUE/1000 之间的差值。
&#39;Q&#39;     自协调世界时 (UTC) 1970 年 1 月 1 日 00:00:00 至现在所经过的毫秒数，即 Long.MIN_VALUE 与 Long.MAX_VALUE 之间的差值。
以下转换字符用来格式化日期：
&#39;B&#39;     特定于语言环境的月份全称，例如 &quot;January&quot; 和 &quot;February&quot;。
&#39;b&#39;     特定于语言环境的月份简称，例如 &quot;Jan&quot; 和 &quot;Feb&quot;。
&#39;h&#39;     与 &#39;b&#39; 相同。
&#39;A&#39;     特定于语言环境的星期几全称，例如 &quot;Sunday&quot; 和 &quot;Monday&quot;
&#39;a&#39;     特定于语言环境的星期几简称，例如 &quot;Sun&quot; 和 &quot;Mon&quot;
&#39;C&#39;     除以 100 的四位数表示的年份，被格式化为必要时带前导零的两位数，即 00 - 99
&#39;Y&#39;     年份，被格式化为必要时带前导零的四位数（至少），例如，0092 等于格里高利历的 92 CE。
&#39;y&#39;     年份的最后两位数，被格式化为必要时带前导零的两位数，即 00 - 99。
&#39;j&#39;     一年中的天数，被格式化为必要时带前导零的三位数，例如，对于格里高利历是 001 - 366。
&#39;m&#39;     月份，被格式化为必要时带前导零的两位数，即 01 - 13。
&#39;d&#39;     一个月中的天数，被格式化为必要时带前导零两位数，即 01 - 31
&#39;e&#39;     一个月中的天数，被格式化为两位数，即 1 - 31。
以下转换字符用于格式化常见的日期/时间组合。
&#39;R&#39;     24 小时制的时间，被格式化为 &quot;%tH:%tM&quot;
&#39;T&#39;     24 小时制的时间，被格式化为 &quot;%tH:%tM:%tS&quot;。
&#39;r&#39;     12 小时制的时间，被格式化为 &quot;%tI:%tM:%tS %Tp&quot;。上午或下午标记 (&#39;%Tp&#39;) 的位置可能与语言环境有关。
&#39;D&#39;     日期，被格式化为 &quot;%tm/%td/%ty&quot;。
&#39;F&#39;     ISO 8601 格式的完整日期，被格式化为 &quot;%tY-%tm-%td&quot;。
&#39;c&#39;     日期和时间，被格式化为 &quot;%ta %tb %td %tT %tZ %tY&quot;，例如 &quot;Sun Jul 20 16:17:00 EDT 1969&quot;。</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-04-07 16:43:33"datetime="2014-04-07 16:43:33"> abr. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--JAVA中Stringformat的用法/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--JAVA中Stringformat的用法" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--Java对XML节点的修改、添加、删除–ByXstream框架/">Java对XML节点的修改、添加、删除 –By Xstream框架 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--Java对XML节点的修改、添加、删除–ByXstream框架/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="java-xml-by-xstream-">Java对XML节点的修改、添加、删除 –By Xstream框架</h1>
<p> 用最简洁的页面描述企业应用与Java艺术!   <a href="http://www.javabloger.com/about_njthnet.html" target="_blank">关于作者</a> </p>
<h2 id="java-xml-by-xstream-">Java对XML节点的修改、添加、删除 –By Xstream框架</h2>
<p>12 三月, 2010 (10:36) | <a href="http://www.javabloger.com/article/category/code" title="查看 代码 的全部文章" target="_blank">代码</a> |  <a href="http://translate.google.com/translate?langpair=zh-CN%7Czh-TW&amp;u=http://www.javabloger.com/article/java-xml-node-add-delete-update.html" target="_blank">繁体</a> <a href="http://translate.google.com/translate?langpair=zh-CN%7Cen&amp;u=http://www.javabloger.com/article/java-xml-node-add-delete-update.html" target="_blank">English</a>        作者: H.E. </p>
<p>在J2EE、Java项目中对xml操作是一项非常常见的事情，在我认识了XStream以后，才彻底明白XML模型对象的概念，使用XStream让我XML的设计不由自主更符合OO的风格。另外，除了在设计上得到的体验，还在实际操作中得到了便捷的体验。</p>
<p>简单来说，我在IBM的Java开发园地上看过一些操作XML经典的文章被广为流传，但是无论是采用DOM4J还是JDOM对XML文件中的节点或者整个文件的进行 修改、添加、删除 都没有XStream 简单、方便。</p>
<p>下面来看一下 XStream 官方网站上的例子，网站地址：     <a href="http://xstream.codehaus.org/tutorial.html。" target="_blank">http://xstream.codehaus.org/tutorial.html。</a></p>
<p>官方网站上的例子只是提供了一个例子，并没有说明如何对 XML节点进行修改、添加、删除，XStream 官方网站上只是给出了一个从对象到XML，从XML到对象的例子。</p>
<p>Javabloger的作者H.E.通过实践发现采用 XStream可以很简单的对XML节点进行 修改、添加、删除，比传统的XML框架简单很多倍，用过一次的人都不会忘记，<strong>因为实在是太方便了</strong>。</p>
<p><strong>修改XML节点代码示例如下：</strong></p>
<pre><code>public void upDateMySQLRecentHost(String  HostID)  throws  Exception {
    List &lt;RecentHost&gt; list=null;
    try {
            list=getMySQLRecentHost();   **// 1. 先通过 XStream读取XML文件，变成List集合里面包含节点对象。**

            for (int i=0;i&lt;list.size();i++){      **  //  2. 遍历整个 List 对象集合**
                if (list.get(i).getId().equals(HostID )){        **// 3. 比较 需要进行修改的节点 ID**
                    list.remove(i);                                     **//  4. 移除 指定的节点  **
                    list.add(recentHost);                          **  //  5. 添加 定义的新节点**
                }
            }                                                                **   //  完成操作，对节点进行 匹配的删除和添加 这个就修改。**

       *    //  以下代码H.E.就不一一介绍了，大致意思就是 将修改过的List 对象集合，重新写入XML中。*
            xstream.alias(&quot;RecentHost&quot;,  RecentHost.class);         
            String xml=&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;+xstream.toXML(list);
             System.out.println ( xml );
            FileWriter resultFile = new FileWriter(recentLoginHostCaseXMLFile);
            PrintWriter myFile = new PrintWriter(resultFile);
            myFile.println(xml);
            resultFile.close();
        }
    catch ( Exception e) {
        logger.error(e);
    }
}
</code></pre><p><strong>添加XML节点代码示例如下：</strong></p>
<pre><code>public void AddMySQLRecentHost(RecentHost RecentHostInfo)  throws  Exception {
    List &lt;RecentHost&gt; list=null;
    try {
            list=getMySQLRecentHost(); **  // 1. 先通过 XStream读取XML文件，变成List集合里面包含节点对象。**
            list.add( RecentHostInfo  );    **//   2. 添加到  List集合里面。**

            xstream.alias(&quot;RecentHost&quot;,  RecentHost.class);  **// 3.进行XML对象映射**
            String xml=&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;+xstream.toXML(list);

         *   //  以下代码H.E.就不一一介绍了，大致意思就是 将添加过的List 对象集合，重新写入XML中。*
            FileWriter resultFile = new FileWriter(recentLoginHostCaseXMLFile);
            PrintWriter myFile = new PrintWriter(resultFile);
            myFile.println(xml);
            resultFile.close();      
        }
    catch ( Exception e) {
        logger.error(e);
    }
}
</code></pre><p><strong>删除XML节点代码示例如下：</strong></p>
<pre><code>public void deleteMySQLRecentHost(String id)  throws  Exception {
    List &lt;RecentHost&gt; list=null;
    try {
            list=getMySQLRecentHost();   **// 1. 先通过 XStream读取XML文件，变成List集合里面包含节点对象。**

            for (int i=0;i&lt;list.size();i++){      **  //  2. 遍历整个 List 对象集合**
                if (list.get(i).getId().equals(HostID )){       **// 3. 比较 需要进行修改的节点 ID**
                    list.remove(i);                                    **  //  4. 移除 指定的节点  **
                }                                                                                                                     
            }                                                             **      //  完成删除操作。**                            

*            //  以下代码H.E.就不一一介绍了，大致意思就是 将修改过的List 对象集合，重新写入XML中。*
            xstream.alias(&quot;RecentHost&quot;,  RecentHost.class);                                     
            String xml=&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;+xstream.toXML(list);
             System.out.println ( xml );                                                   
            FileWriter resultFile = new FileWriter(recentLoginHostCaseXMLFile);
            PrintWriter myFile = new PrintWriter(resultFile);                                      
            myFile.println(xml);                                                                                        
            resultFile.close();                                                                                           
        }                                                                                                                              
    catch ( Exception e) {                                                                                              
        logger.error(e);                                                                                                    
    }                                                                                                                                  
}
</code></pre><p>–end–</p>
<p><strong>H.E.@Info:</strong>
J2EE Architect/<strong>J</strong>Evangelist
Life@NanJing
Hobby@Photography
Email@njthnet(at)gmail.com</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-04-07 16:42:22"datetime="2014-04-07 16:42:22"> abr. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--Java对XML节点的修改、添加、删除–ByXstream框架/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--Java对XML节点的修改、添加、删除–ByXstream框架" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--XStream-AnnotationsTutorial/">XStream </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--XStream-AnnotationsTutorial/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="xstream-annotations-tutorial">XStream - Annotations Tutorial</h1>
<p><a href="http://xstream.codehaus.org/index.html" target="_blank"><img src="" alt="XStream"></a></p>
<h1 id="annotations-tutorial">Annotations Tutorial</h1>
<h2 id="motivation">Motivation</h2>
<p>Sometimes it can get tedious to call all those XStream aliases/register converter methods or you might simply like the new trend on configuring POJOs: Java annotations.</p>
<p>This tutorial will show you how to use some of the annotations provided by XStream in order to make configuration easier. Let&#39;s start with a custom Message class:
package com.thoughtworks.xstream; package com.thoughtworks.xstream; public class RendezvousMessage { private int messageType; public RendezvousMessage(int messageType) { this.messageType = messageType; } }</p>
<p>Let&#39;s code the XStream calls which generate the XML file:</p>
<p>package com.thoughtworks.xstream; public class Tutorial { public static void main(String[] args) { XStream stream = new XStream(); RendezvousMessage msg = new RendezvousMessage(15); System.out.println(stream.toXML(msg)); } }</p>
<p>Results in the following XML:</p>
<p><com.thoughtworks.xstream.RendezvousMessage> <messageType>15</messageType> </com.thoughtworks.xstream.RendezvousMessage></p>
<h2 id="aliasing-annotation">Aliasing Annotation</h2>
<p>The most basic annotation is the one responsible for type and field aliasing: @XStreamAlias. Let&#39;s annotate both our type and field and run the tutorial method again:
@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; public RendezvousMessage(int messageType) { this.messageType = messageType; } }</p>
<p>In some strange way, the result is the same. What happened here? XStream does not read this annotation by default as it would be impossible to deserialize the XML code. Therefore we need to tell XStream to read the annotations from this type:</p>
<p>public static void main(String[] args) { XStream stream = new XStream(); xstream.processAnnotations(RendezvousMessage.class); RendezvousMessage msg = new RendezvousMessage(15); System.out.println(stream.toXML(msg)); }</p>
<p>Note that we have called the processAnnotations method of XStream. This method registers all aliases annotations in the XStream instance passed as first argument. You may also use the overloaded version of this method taking an array of types. The resulting XML is now what we have expected:</p>
<message> <type>15</type> </message>

<p>If you let XStream process the annotations of a type, it will also process all annotations of the related types i.e. all super types, implemented interfaces, the class types of the members and all their generic types.</p>
<h2 id="implicit-collections">Implicit Collections</h2>
<p>Let&#39;s add a List of content to our RendezvousMessage. We desire the same functionality obtained with implicit collections:
@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; private List<String> content; public RendezvousMessage(int messageType, String ... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>public static void main(String[] args) { XStream stream = new XStream(); xstream.processAnnotations(RendezvousMessage.class); RendezvousMessage msg = new RendezvousMessage(15, &quot;firstPart&quot;,&quot;secondPart&quot;); System.out.println(stream.toXML(msg)); }</p>
<p>The resulting XML shows the collection name before its elements:</p>
<message> <type>15</type> <content class="java.util.Arrays$ArrayList"> <a class="string-array"> <string>firstPart</string> <string>secondPart</string> </a> </content> </message>

<p>This is not what we desire therefore we will annotate the content list to be recognized as an implicit collection:</p>
<p>@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; @XStreamImplicit private List<String> content; public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>Resulting in an XML which ignores the field name (content) of the list:</p>
<message> <type>15</type> <a class="string-array"> <string>firstPart</string> <string>secondPart</string> </a> </message>

<p>We are almost there... we still want to remove the &#39;a&#39; tag, and define each content part with the tag &#39;part&#39;. In order to do so, let&#39;s add another attribute to our implicit collection annotation. The attribute field defines the name of the tag used for data contained inside this collection:</p>
<p>@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>Resulting in a cleaner XML:</p>
<message> <type>15</type> <part>firstPart</part> <part>secondPart</part> </message>

<h2 id="local-converters">Local Converters</h2>
<p>Let&#39;s create another attribute which defines the timestamp when the message was created:
@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; private Calendar created = new GregorianCalendar(); public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>Resulting in the following xml:</p>
<message> <type>15</type> <part>firstPart</part> <part>secondPart</part> <created> <time>1154097812245</time> <timezone>America/Sao_Paulo</timezone> </created> </message>

<p>Now we face the following problem: We want to use a custom converter locally for this Calendar, but only for this Calendar, this exact field in this exact type. Easy... let&#39;s annotate it with the custom converter annotation:</p>
<p>@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; @XStreamConverter(SingleValueCalendarConverter.class) private Calendar created = new GregorianCalendar(); public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>Let&#39;s create the custom converter:</p>
<p>public class SingleValueCalendarConverter implements Converter { public void marshal(Object source, HierarchicalStreamWriter writer, MarshallingContext context) { Calendar calendar = (Calendar) source; writer.setValue(String.valueOf(calendar.getTime().getTime())); } public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext context) { GregorianCalendar calendar = new GregorianCalendar(); calendar.setTime(new Date(Long.parseLong(reader.getValue()))); return calendar; } public boolean canConvert(Class type) { return type.equals(GregorianCalendar.class); } }</p>
<p>And we end up with the converter being used and generating the following XML:</p>
<message> <type>15</type> <part>firstPart</part> <part>secondPart</part> <created>1154097812245</created> </message>

<h2 id="attributes">Attributes</h2>
<p>The client may asks for the type tag to be an attribute inside the message tag, as follows:</p>
<message type="15"> <part>firstPart</part> <part>secondPart</part> <created>1154097812245</created> </message>

<p>All you need to do is add the @XStreamAsAttribute annotation:</p>
<p>@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) @XStreamAsAttribute private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; @XStreamConverter(SingleValueCalendarConverter.class) private Calendar created = new GregorianCalendar(); public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<h2 id="omitting-fields">Omitting Fields</h2>
<p>Sometimes a class may contain elements that should not be part of the resulting XML. In our case we may now drop the &#39;messageType&#39;, since we are only interested at the content. This is easy using the @XStreamOmitField annotation:
@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamOmitField private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; @XStreamConverter(SingleValueCalendarConverter.class) private Calendar created = new GregorianCalendar(); public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>The resulting XML does not contain the type of the message anymore:</p>
<message> <part>firstPart</part> <part>secondPart</part> <created>1154097812245</created> </message>

<h2 id="auto-detect-annotations">Auto-detect Annotations</h2>
<p>Until now we have always told you, that you have to call processAnnotation to configure the XStream instance with the present annotations in the different classes. However, this is only half the truth. You can run XStream also in a lazy mode, where it auto-detects the annotations while processing the object graph and configure the XStream instance on-the-fly:
package com.thoughtworks.xstream; public class Tutorial { public static void main(String[] args) { XStream stream = new XStream(); xstream.autodetectAnnotations(true); RendezvousMessage msg = new RendezvousMessage(15); System.out.println(stream.toXML(msg)); } }</p>
<p>The resulting XML will look as expected! Nevertheless you have to understand the implications, therefore some words of warning:</p>
<ol>
<li><strong>Chicken-and-egg problem</strong></li>
</ol>
<p>An XStream instance caches all class types processed for annotations. Every time XStream converts an object it will in auto-detection mode first process the object&#39;s type and all the types related (as explained <a href="http://xstream.codehaus.org/annotations-tutorial.html#Aliasing" target="_blank">above</a>). Therefore it is no problem to serialize an object graph into XML, since XStream will know of all types in advance. This is no longer true at deserialization time. XStream has to know the alias to turn it into the proper type, but it can find the annotation for the alias only if it has processed the type in advance. Therefore deserialization will fail if the type has not already been processed either by having called XStream&#39;s processAnnotations method or by already having serialized this type. However, @XStreamAlias is the only annotation that may fail in this case.</p>
<ol>
<li><strong>Concurrency</strong></li>
</ol>
<p>XStream is not thread-safe while it is configured, thread-safety is only guaranteed during marshalling and unmarshalling. However an annotation is defining a change in configuration that is now applied while object marshalling is processed. Therefore will the auto-detection mode turn XStream&#39;s marshalling process in a thread-unsafe operation any you may run under certain circumstances into concurrency problems.</p>
<ol>
<li><strong>Exceptions</strong></li>
</ol>
<p>XStream uses a well-defined exception hierarchy. Normally an InitializationException is only thrown while XStream is configured. If annotations are processed on the fly they can be thrown obviously also in a marshalling process.</p>
<ol>
<li><strong>Performance</strong></li>
</ol>
<p>In auto-detection mode XStream will have to examine any unknown class type for annotations. This will slow down the marshalling process until all processed types have been examined once.</p>
<p>Please note, that any call to XStream.processAnnotations will turn off the auto-detection mode.</p>
<h2 id="summing-up">Summing up</h2>
<p>The XStream annotations support might help you configuring your class mappings in some ways, as the custom configuration will appear in your types, but might not be the solution for other problems, i.e. when you need to map the same type to two different XML &#39;standards&#39;. Others might claim that the configuration should be clearly stated in a Java class and not mixed with your model, its up to you to pick the best approach in your case: Annotations or direct method calls to the XStream instance. Annotations do not provide more functionality, but may improve convenience.</p>
<h1 id="software">Software</h1>
<ul>
<li><a href="http://xstream.codehaus.org/index.html" target="_blank">About XStream</a></li>
<li><a href="http://xstream.codehaus.org/news.html" target="_blank">News</a></li>
<li><a href="http://xstream.codehaus.org/changes.html" target="_blank">Change History</a></li>
<li><a href="http://xstream.codehaus.org/versioning.html" target="_blank">About Versioning</a></li>
</ul>
<h1 id="evaluating-xstream">Evaluating XStream</h1>
<ul>
<li><a href="http://xstream.codehaus.org/tutorial.html" target="_blank">Two Minute Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/graphs.html" target="_blank">Object references</a></li>
<li><a href="http://xstream.codehaus.org/manual-tweaking-output.html" target="_blank">Tweaking the Output</a></li>
<li><a href="http://xstream.codehaus.org/license.html" target="_blank">License</a></li>
<li><a href="http://xstream.codehaus.org/download.html" target="_blank">Download</a></li>
<li><a href="http://xstream.codehaus.org/references.html" target="_blank">References</a></li>
<li><p><a href="http://www.ohloh.net/projects/3459" target="_blank">Statistics</a></p>
<h1 id="using-xstream">Using XStream</h1>
</li>
<li><p><a href="http://xstream.codehaus.org/architecture.html" target="_blank">Architecture Overview</a></p>
</li>
<li><a href="http://xstream.codehaus.org/converters.html" target="_blank">Converters</a></li>
<li><a href="http://xstream.codehaus.org/faq.html" target="_blank">Frequently Asked Questions</a></li>
<li><a href="http://xstream.codehaus.org/list-user.html" target="_blank">Users&#39; Mailing List</a></li>
<li><a href="http://xstream.codehaus.org/javadoc/index.html" target="_blank">JavaDoc Core</a></li>
<li><a href="http://xstream.codehaus.org/benchmark-javadoc/index.html" target="_blank">JavaDoc Benchmark</a></li>
<li><a href="http://xstream.codehaus.org/issues.html" target="_blank">Reporting Issues</a></li>
</ul>
<h1 id="tutorials">Tutorials</h1>
<ul>
<li><a href="http://xstream.codehaus.org/tutorial.html" target="_blank">Two Minute Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/alias-tutorial.html" target="_blank">Alias Tutorial</a></li>
<li>Annotations Tutorial</li>
<li><a href="http://xstream.codehaus.org/converter-tutorial.html" target="_blank">Converter Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/objectstream.html" target="_blank">Object Streams Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/persistence-tutorial.html" target="_blank">Persistence API Tutorial</a></li>
<li><p><a href="http://xstream.codehaus.org/json-tutorial.html" target="_blank">JSON Tutorial</a></p>
<h1 id="developing-xstream">Developing XStream</h1>
</li>
<li><p><a href="http://xstream.codehaus.org/how-to-contribute.html" target="_blank">How to Contribute</a></p>
</li>
<li><a href="http://xstream.codehaus.org/list-dev.html" target="_blank">Developers&#39; Mailing List</a></li>
<li><a href="http://xstream.codehaus.org/team.html" target="_blank">Development Team</a></li>
<li><a href="http://xstream.codehaus.org/repository.html" target="_blank">Source Repository</a></li>
<li><a href="http://bamboo.ci.codehaus.org/browse/XSTREAM" target="_blank">Continuous Integration</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--XStream-AnnotationsTutorial/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--XStream-AnnotationsTutorial" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--XStream-FrequentlyAskedQuestions/">XStream </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--XStream-FrequentlyAskedQuestions/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="xstream-frequently-asked-questions">XStream - Frequently Asked Questions</h1>
<p><a href="http://xstream.codehaus.org/index.html" target="_blank"><img src="" alt="XStream"></a></p>
<h1 id="frequently-asked-questions">Frequently Asked Questions</h1>
<ol>
<li><a href="http://xstream.codehaus.org/faq.html#Compatibility" target="_blank">Compatibility</a></li>
<li><a href="http://xstream.codehaus.org/faq.html#Serialization" target="_blank">Serialization</a></li>
<li><a href="http://xstream.codehaus.org/faq.html#XML" target="_blank">XML specifics</a></li>
<li><a href="http://xstream.codehaus.org/faq.html#JSON" target="_blank">JSON specifics</a></li>
<li><a href="http://xstream.codehaus.org/faq.html#Other_Products" target="_blank">Comparison to other products</a></li>
<li><a href="http://xstream.codehaus.org/faq.html#Scalability" target="_blank">Scalability</a></li>
<li><a href="http://xstream.codehaus.org/faq.html#Uses" target="_blank">Uses of XStream</a></li>
</ol>
<h1 id="compatibility">Compatibility</h1>
<h2 id="which-jdk-is-required-to-use-xstream-">Which JDK is required to use XStream?</h2>
<p>1.3 or later.</p>
<h2 id="does-xstream-behave-differently-across-different-jvms-">Does XStream behave differently across different JVMs?</h2>
<p>XStream has two modes of operation: <strong>Pure Java</strong> and <strong>Enhanced</strong>. In pure Java mode, XStream behaves in the same way across different JVMs, however its features are limited to what reflection allows, meaning it cannot serialize certain classes or fields. In <strong>enhanced</strong> mode, XStream does not have these limitations, however this mode of operation is not available to all JVMs.</p>
<h2 id="which-jvms-allow-xstream-to-operate-in-enhanced-mode-">Which JVMs allow XStream to operate in enhanced mode?</h2>
<p>Currently on the Sun, Apple, HP, IBM and Blackdown 1.4 JVMs and onwards. Also for Hitachi, SAP and Diablo from 1.5 and onwards. Support for BEA JRockit starting with R25.1.0. For all other JVMs, XStream should be used in pure Java mode.</p>
<h2 id="what-are-the-advantages-of-using-enhanced-mode-over-pure-java-mode-">What are the advantages of using enhanced mode over pure Java mode?</h2>
<p>Feature Pure Java Enhanced Mode Public classes Yes Yes Non public classes No Yes Static inner classes Yes Yes Non-static inner classes No Yes Anonymous inner classes No Yes With default constructor Yes Yes Without default constructor No Yes Private fields Yes Yes Final fields Yes &gt;= JDK 1.5 Yes</p>
<h2 id="can-i-use-xstream-in-an-android-application-">Can I use XStream in an Android application?</h2>
<p>XStream does work in Android 1.0, but has limited capabilities. XStream does not support enhanced mode for Android. Additionally Android reports itself as implementation of JDK specification 0.9, so it is not possible to write into final fields. Android also does not include the java.beans package. Therefore you cannot use the JavaBeanConverter.</p>
<h2 id="why-does-xstream-fail-on-harmony-">Why does XStream fail on Harmony?</h2>
<p>Since JDK 5 it is possible according the Java specification to write into final fields using reflection. This is not yet supported by Harmony and therefore the PureJavaReflectionProvider fails. We have also already investigated into enhanced mode in Harmony, but the Harmony JVM currently crashes running the unit tests. It is simply not yet ready.</p>
<h2 id="are-there-plans-to-provide-enhanced-mode-support-to-other-jvms-">Are there plans to provide enhanced mode support to other JVMs?</h2>
<p>Yes. <a href="http://xstream.codehaus.org/list-user.html" target="_blank">Let us know</a> which JVM you would like supported.</p>
<h2 id="when-should-i-use-xstream-not-in-enhanced-mode-">When should I use XStream not in enhanced mode?</h2>
<p>Running XStream in a secured environment can prevent XStream from running in enhanced mode. This is especially true when running XStream in an applet. You may also try to use the JavaBeanConverter as alternative to the ReflectionConverter running in enhanced or pure Java mode.</p>
<h2 id="which-permissions-does-xstream-need-when-running-with-an-active-securitymanager-">Which permissions does XStream need when running with an active SecurityManager?</h2>
<p>This depends on the mode XStream is running in. Refer to the <a href="http://svn.xstream.codehaus.org/browse/xstream/trunk/xstream/src/test/com/thoughtworks/acceptance/SecurityManagerTest.java" target="_blank">SecurityManagerTest</a> for details.</p>
<h2 id="why-does-xstream-1-2-no-longer-read-xml-generated-with-xstream-1-1-x-">Why does XStream 1.2 no longer read XML generated with XStream 1.1.x?</h2>
<p>The architecture in XStream has slightly changed. Starting with XStream 1.2 the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/HierarchicalStreamDriver.html" target="_blank">HierarchicalStreamDriver</a> implementation is responsible to ensure that XML tags and attributes are valid names in XML, in XStream 1.1.x this responsibility was part of the ClassMapper implementations. Under some rare circumstances this will result in an unreadable XML due to the different processing order in the workflow of such problematic tag names.</p>
<p>You can run XStream in 1.1 compatibility mode though:
XStream xstream = new XStream(new XppDriver(new XStream11XmlFriendlyReplacer())) { protected boolean useXStream11XmlFriendlyMapper() { return true; } };</p>
<h2 id="xstream-1-3-ignores-suddenly-annotated-converters-xstreamconverter-and-xstreamconverters-">XStream 1.3 ignores suddenly annotated converters (@XStreamConverter and @XStreamConverters)?</h2>
<p>XStream treats now all annotations the same and therefore it no longer auto-detects any annotation by default. You can configure XStream to run in auto-detection mode, but be aware if the <a href="http://xstream.codehaus.org/annotations-tutorial.html#AutoDetect" target="_blank">implications</a>. As alternative you might register the deprecated AnnotationReflectionConverter, that was used for XStream pre 1.3.x, but as drawback the functionality to register a local converter with XStream.registerLocalConverter will no longer work.</p>
<h2 id="xstream-1-3-suddenly-has-a-different-field-order-">XStream 1.3 suddenly has a different field order?</h2>
<p>Yes. This was announced with the last 1.2.x release and was done to support the type inheritance of XML schemas. However, XStream is delivered with the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/HierarchicalStreamDriver.html" target="_blank">XStream12FieldKeySorter</a> that can be used to <a href="http://xstream.codehaus.org/faq.html#Serialization_sort_fields" target="_blank">sort the fields</a> according XStream 1.2.2.</p>
<h1 id="serialization">Serialization</h1>
<h2 id="which-class-types-can-be-serialized-by-xstream-">Which class types can be serialized by XStream?</h2>
<p>In contrast to the JDK XStream is not tied to a marker interface to serialize a class. XStream ships with some specialized <a href="http://xstream.codehaus.org/converters.html" target="_blank">converters</a>, but will use reflection by default for &quot;unknown&quot; classes to examine, read and write the class&#39; data. Therefore XStream can handle quite any class, especially the ones referred as POJO (Plain Old Java Object).</p>
<p>However, some types of classes exist with typical characteristics, that cannot be handled - at least not out of the box:</p>
<ol>
<li>Objects that are based on threads or thread local data: Thread, Timer, ThreadLocal and so on. These classes keep different data for different threads and there&#39;s no possibility to recreate a thread in a generic way nor recreating thread specific data. There might be special use cases, but this will always involve a custom converter where threads can be recreated in a specific way tied to that use case.</li>
<li>Class types that are based on generated classes. Such types have often names that are unique to the current process and will have no meaning in a different process. A custom converter might help to write the appropriate data into the serializing stream to be able to recreate a equivalent class at deserialization time.</li>
<li>Types that keep and use system resources like file handles, sockets, pipes and so on. ClassLoader, FileInputStream, FileOutputStream, Socket and so on. To deserialize such a class the converter must be able to claim the appropriate resource from the system again. With the help of a custom converter this might be possible, but with the reflection converter the deserialized class might refer a system resource that is no longer valid or belongs to somebody else. Behavior is undefined then.</li>
<li>A very special case of such allocated system resources are those classes that keep handles to system memory directly, because they are partly implemented native. It is known to be true for the Linux version of Sun&#39;s JDK that the BufferedImage references some system specific types of the JDK that themselves have member fields with such memory handles. While it is possible at first sight to serialize and deserialize a BufferedImage, the reflection converter will also duplicate the memory handle. As a result the JVM might crash easily because of freeing unallocated memory or freeing the same memory twice. It might be possible to create a custom converter, but the data structure is really complex in this area and nobody has been investigating so far to such an extent. However, <strong>do not use the reflection converter for these types! You have been warned!</strong></li>
</ol>
<h2 id="how-do-i-specify-that-a-field-should-not-be-serialized-">How do I specify that a field should not be serialized?</h2>
<p>Make it</p>
<p>transient
, specify it with</p>
<p>XStream.omitField()
or annotate it with @XStreamOmitField</p>
<h2 id="how-do-i-initialize-a-transient-field-at-deserialization-">How do I initialize a transient field at deserialization?</h2>
<p>XStream uses the same mechanism as the JDK serialization. Example:
class ThreadAwareComponent { private transient ThreadLocal component; // ... private Object readResolve() { component = new ThreadLocal(); return this; } }</p>
<h2 id="xstream-is-not-calling-the-default-constructor-during-deserialization-">XStream is not calling the default constructor during deserialization.</h2>
<p>This is, in fact, the same case as above. XStream uses the same mechanism as the JDK serialization. When using the enhanced mode with the optimized reflection API, it does not invoke the default constructor. The solution is to implement the readResolve method as above:
class MyExecutor { private Object readResolve() { // do what you need to do here System.out.println(&quot;After instantiating MyExecutor&quot;); // at the end returns itself return this; } }</p>
<h2 id="what-do-serialized-collections-look-like-">What do serialized collections look like?</h2>
<p>See example for the <a href="http://xstream.codehaus.org/converters.html#java.util" target="_blank">CollectionConverter</a>.</p>
<p>Note, that it is possible to configure XStream to omit the container element toys using implicit collections.</p>
<h2 id="do-my-classes-have-to-implement-serializable-if-xstream-is-to-serialize-them-">Do my classes have to implement Serializable if XStream is to serialize them?</h2>
<p>No.</p>
<h2 id="can-dynamic-proxies-be-serialized-">Can dynamic proxies be serialized?</h2>
<p>Yes.</p>
<h2 id="can-cglib-proxies-be-serialized-">Can CGLIB proxies be serialized?</h2>
<p>Only limitedly. A proxy generated with the CGLIB Enhancer is supported, if the proxy uses either a factory or only one callback. Then it is possible to recreate the proxy instance at unmarshalling time. Starting with XStream 1.3.1 CGLIB support is no longer automatically installed because of possible classloader problems and side-effects, because of incompatible ASM versions. You can enable CGLIB support with:
XStream xstream = new XStream() { protected MapperWrapper wrapMapper(MapperWrapper next) { return new CGLIBMapper(next); } }; xstream.registerConverter(new CGLIBEnhancedConverter(xstream.getMapper(), xstream.getReflectionProvider()));</p>
<h2 id="cglibenhancedconverter-fails-at-initialization-with-exceptionininitializererror">CGLIBEnhancedConverter fails at initialization with ExceptionInInitializerError</h2>
<p>This is not a problem of XStream. You have incompatible ASM versions in your classpath. CGLIB 2.1.x and below is based on ASM 1.5.x which is incompatible to newer versions that are used by common packages like Hibernate, Groovy or Guice. Check your dependencies and ensure that you are using either using cglib-nodep-2.x.jar instead of cglib-2.x.jar or update to cglib-2.2.x that depends on ASM 3.1. However, the <em>nodep</em> version contains a copy of the ASM classes with private packages and will therefore not raise class incompatibilities at all.</p>
<h2 id="serialization-fails-with-nosuchmethoderror-net-sf-cglib-proxy-enhancer-isenhanced-ljava-lang-class-z">Serialization fails with NoSuchMethodError: net.sf.cglib.proxy.Enhancer.isEnhanced(Ljava/lang/Class;)Z</h2>
<p>XStream uses this method to detect a CGLIB-enhanced proxy. Unfortunately the method is not available in the cglib-2.0 version. Since this version is many years old and the method is available starting with cglib-2.0.1, please consider an upgrade of the dependency, it works usually smoothly.</p>
<h2 id="my-attributes-are-interpreted-by-xstream-itself-and-cause-unexpected-behavior">My attributes are interpreted by XStream itself and cause unexpected behavior</h2>
<p>XStream&#39;s generic converters and the marshalling strategies use a number of attributes on their own. Especially the attributes named <em>id</em>, <em>class</em> and <em>reference</em> are likely to cause such collisions. Main reason is XStream&#39;s history, because originally user defined attributes were not supported and all attribute were system generated. Starting with XStream 1.3.1 you can redefine those attributes to allow the names to be used for your own ones. The following snippet defines XStream to use different system attributes for <em>id</em> and <em>class</em> while the field <em>id</em> of YourClass is written into the attribute <em>class</em>:
XStream xstream = new XStream() { xstream.useAttributeFor(YourClass.class, &quot;id&quot;); xstream.aliasAttribute(&quot;class&quot;, &quot;id&quot;); xstream.aliasSystemAttribute(&quot;type&quot;, &quot;class&quot;); xstream.aliasSystemAttribute(&quot;refid&quot;, &quot;id&quot;);</p>
<h2 id="can-i-select-the-field-order-in-which-xstream-serializes-objects-">Can I select the field order in which XStream serializes objects?</h2>
<p>Yes. XStream&#39;s ReflectionConverter uses the defined field order by default. You can override it by using an specific FieldKeySorter:
SortableFieldKeySorter sorter = new SortableFieldKeySorter(); sorter.registerFieldOrder(MyType.class, new String[] { &quot;firstToSerialize&quot;, &quot;secondToSerialize&quot;, &quot;thirdToSerialize&quot; }); xstream = new XStream(new Sun14ReflectionProvider(new FieldDictionary(sorter)));</p>
<h2 id="how-does-xstream-deal-with-newer-versions-of-classes-">How does XStream deal with newer versions of classes?</h2>
<ul>
<li>If a new field is added to the class, deserializing an old version will leave the field uninitialized.</li>
<li>If a field is removed from the class, deserializing an old version that contains the field will cause an exception. Leaving the field in place but declaring it as transient will avoid the exception, but XStream will not try to deserialize it.</li>
<li>If a class is renamed, aliases can be used to create an abstraction between the name used in XML and the real class name.</li>
<li>If a field is renamed, this should be treated as adding a field and removing a field.</li>
</ul>
<p>For more advanced class migrations, you may</p>
<ul>
<li>have to do custom pre-processing of the XML before sending it to XStream (for example, with XSLT or DOM manipulations)</li>
<li>declare new fields as transient</li>
<li>implement your own converter, that can handle the situation</li>
<li>add a readResolve() method to your class, that initializes the object accordingly</li>
<li>implement a custom mapper to ignore unknown fields automatically (see acceptance test CustomMapperTest.testCanBeUsedToOmitUnexpectedElements())</li>
</ul>
<p>Future versions of XStream will include features to make these type of migrations easier.</p>
<h2 id="how-does-xstream-cope-with-isolated-class-loaders-">How does XStream cope with isolated class loaders?</h2>
<p>Serializing an object graph is never a problem, even if the classes of those objects have been loaded by a different class loader. The situation changes completely at deserialization time. In this case you must set the class loader to use with:
xstream.setClassLoader(yourClassLoader);</p>
<p>Although XStream caches a lot of type related information to gain speed, it keeps those information in tables with weak references that should be cleaned by the garbage collector when the class loader is freed.</p>
<p>Note, that this call should be made quite immediately after creating the XStream and before any other configuration is done. Otherwise configuration based on special types might refer classes loaded with the wrong classloader.</p>
<h1 id="xml-specifics">XML specifics</h1>
<h2 id="why-does-xstream-not-respect-the-encoding-in-the-xml-declaration-">Why does XStream not respect the encoding in the XML declaration?</h2>
<p>XStream architecture is based on IO Readers and Writers, while the XML declaration is the responsibility of XML parsers. XStream all <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/HierarchicalStreamDriver.html" target="_blank">HierarchicalStreamDriver</a> implementation respect the encoding since version 1.3, but only if you provide an <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/io/InputStream.html" target="_blank">InputStream</a>. If XStream consumes a <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/io/Reader.html" target="_blank">Reader</a> you have to initialize the reader with the appropriate encoding yourself, since it is now the reader&#39;s task to perform the encoding and no XML parser can change the encoding of a Reader and any encoding definition in the XML header will be ignored.</p>
<h2 id="why-does-xstream-not-write-an-xml-declaration-">Why does XStream not write an XML declaration?</h2>
<p>XStream is designed to write XML snippets, so you can embed its output into an existing stream or string. You can write the XML declaration yourself into the Writer before using it to call XStream.toXML(writer).</p>
<h2 id="why-does-xstream-not-write-xml-in-utf-8-">Why does XStream not write XML in UTF-8?</h2>
<p>XStream does no character encoding by itself, it relies on the configuration of the underlying XML writer. By default it uses its own PrettyPrintWriter which writes into the default encoding of the current locale. To write UTF-8 you have to provide a <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/io/Writer.html" target="_blank">Writer</a> with the appropriate encoding yourself.</p>
<h2 id="why-do-field-names-suddenly-have-double-underscores-in-the-generated-xml-">Why do field names suddenly have double underscores in the generated XML?</h2>
<p>XStream maps Java class names and field names to XML tags or attributes. Unfortunately this mapping cannot be 1:1, since some identifiers of Java contain a dollar sign which is invalid in XML names. Therefore XStream uses an <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/xml/XmlFriendlyReplacer.html" target="_blank">XmlFriendlyReplacer</a> to replace this character with a replacement. By default this replacement uses an underscore and therefore the replacer must escape the underscore itself also. You may provide a different configured instance of the XmlFriendlyReplacer or a complete own implementation, but you must ensure, that the resulting names are valid for XML.</p>
<h2 id="xstream-fails-to-unmarshal-my-given-xml-and-i-do-not-know-why-">XStream fails to unmarshal my given XML and I do not know why?</h2>
<p>By default XStream is written for persistence i.e. it will read the XML it can write. If you have to transform a given XML into an object graph, you should go the other way round. Use XStream to transfer your objects into XML. If the written XML matches your schema, XStream is also able to read it. This way is much easier, since you can spot the differences in the XML much more easy than to interpret the exceptions XStream will throw if it cannot match the XML into your objects.</p>
<h2 id="my-parser-claims-the-x0-character-to-be-invalid-but-it-was-written-with-xstream-">My parser claims the &amp;/#x0; character to be invalid, but it was written with XStream!</h2>
<p>Your parser is basically right! A character of value 0 is not valid as part of XML according the XML specification (see version <a href="http://www.w3.org/TR/2006/REC-xml-20060816/#charsets" target="_blank">1.0</a> or <a href="http://www.w3.org/TR/2006/REC-xml11-20060816/#charsets" target="_blank">1.1</a>), neither directly nor as character entity nor within CDATA. But not every parser respects this part of the specification (e.g. Xpp3 will ignore it and read character entities). If you expect such characters in your strings and you do not use the Xpp3 parser, you should consider to use a converter that writes the string as byte array in Base64 code. As alternative you may force the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/xml/PrettyPrintWriter.html" target="_blank">PrettyPrintWriter</a> or derived writers to be XML 1.0 or 1.1. compliant, i.e. in this mode a StreamException is thrown.</p>
<h2 id="my-parser-claims-a-control-character-to-be-invalid-but-it-was-written-with-xstream-">My parser claims a control character to be invalid, but it was written with XStream!</h2>
<p>Your parser is probably right! Control characters are only valid as part of XML 1.1. You should add an XML header declaring this version or use a parser that does not care about this part of the specification (e.g. Xpp3 parser).</p>
<h2 id="why-is-my-element-not-written-as-xml-attribute-although-i-have-configured-it-">Why is my element not written as XML attribute although I have configured it?</h2>
<p>You can only write types as attributes that are represented as a single String value and are handled therefore by SingleValueConverter implementations. If your type is handled by a Converter implementation, the configuration of XStream to write an attribute (using XStream.useAttributeFor() or @XStreamAsAttribute) is simply ignored.</p>
<h2 id="why-are-whitespace-characters-missing-in-my-attribute-values-after-deserialization-">Why are whitespace characters missing in my attribute values after deserialization?</h2>
<p>This is part of the XML specification and a required functionality for any XML parser called <a href="http://www.w3.org/TR/2006/REC-xml-20060816/#AVNormalize" target="_blank">attribute value normalization</a>. It cannot be influenced by XStream. Do not use attributes if your values contain leading or trailing whitespaces, other whitespaces than blanks, or sequences of whitespaces.</p>
<h2 id="why-does-xstream-not-have-any-namespace-support-">Why does XStream not have any namespace support?</h2>
<p>Not every XML parser supports namespaces and not every XML parser that supports namespaces can be configured within XStream to use those. Basically namespaces must be supported individually for the different XML parsers and the only support for namespaces that has currently been implemented in XStream is for the StAX paser. Therefore use and configure the StaxDriver of XStream to use namespaces.</p>
<h1 id="json-specifics">JSON specifics</h1>
<h2 id="why-are-there-two-json-driver-implementations-">Why are there two JSON driver implementations?</h2>
<p>As always, first for historical reasons! Main difference is that the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/json/JettisonMappedXmlDriver.html" target="_blank">JettisonMappedXmlDriver</a> is a thin wrapper around <a href="http://jettison.codehaus.org/" target="_blank">Jettison</a> in combination with the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/xml/StaxDriver.html" target="_blank">StaxDriver</a>, while the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/json/JsonHierarchicalStreamDriver.html" target="_blank">JsonHierarchicalStreamDriver</a> uses an own more flexible implementation, but can only be used to generate JSON, deserialization is not implemented.</p>
<h2 id="why-is-it-not-possible-to-deserialize-a-json-string-starting-with-an-array-">Why is it not possible to deserialize a JSON string starting with an array?</h2>
<p>XStream&#39;s implementation to deserialize JSON is based on Jettison and StAX. Jettison implements a XMLStreamReader of StaX and transforms the processed JSON virtually into XML first. However, if the JSON string starts with an array it is not possible for Jettison to create a valid root element, since it has no name.</p>
<h2 id="xstream-fails-to-unmarshal-my-json-string-and-i-do-not-know-why-">XStream fails to unmarshal my JSON string and I do not know why?</h2>
<p>Deserialization of JSON is currently done by Jettison, that transforms the JSON string into a StAX stream. XStream itself does nothing know about the JSON format here. If your JSON string reaches some kind of complexity and you do not know how to design your Java objects and configure XStream to match those, you should have a look at the intermediate XML that is processed by XStream in the end. This might help to identify the problematic spots. Also consider then <a href="http://xstream.codehaus.org/faq.html#XML_unmarshalling_fails" target="_blank">marshalling your Java objects into XML first</a>. You can use following code to generate the XML:
String json = &quot;{\&quot;string\&quot;: \&quot;foo\&quot;}&quot;; HierarchicalStreamDriver driver = new JettisonMappedXmlDriver(); StringReader reader = new StringReader(json); HierarchicalStreamReader hsr = driver.createReader(reader); StringWriter writer = new StringWriter(); new HierarchicalStreamCopier().copy(hsr, new PrettyPrintWriter(writer)); writer.close(); System.out.println(writer.toString());</p>
<h2 id="what-limitations-has-xstream-s-json-support-">What limitations has XStream&#39;s JSON support?</h2>
<p>JSON represents a very simple data model for easy data transfer. Especially it has no equivalent for XML attributes. Those are written with a leading &quot;@&quot; character, but this is not always possible without violating the syntax (e.g. for array types). Those may silently dropped (and makes it therefore difficult to implement deserialization). References are another issue in the serialized object graph, since JSON has no possibility to express such a construct. You should therefore always set the NO_REFERENCES mode of XStream.</p>
<h2 id="why-are-there-invalid-characters-in-my-json-representation-">Why are there invalid characters in my JSON representation?</h2>
<p>The JSON spec requires any JSON string to be in UTF-8 encoding. However, XStream ensures this only if you provide an InputStream or an OutputStream. If you provide a Reader or Writer you have to ensure this requirement on your own.</p>
<h2 id="the-generated-json-is-invalid-it-contains-a-dash-in-the-label-">The generated JSON is invalid, it contains a dash in the label!</h2>
<p>Well, no, the JSON is valid! Please check yourself with the <a href="http://www.jslint.com/" target="_blank">JSON syntax checker</a>. However, some JavaScript libraries silently assume that the JSON labels are valid JavaScript identifiers, because JavaScript supports a convenient way to address an element, <strong>if</strong> the label is a valid JavaScript identifier:
var json = {&quot;label&quot;: &quot;foo&quot;, &quot;label-with-dash&quot;: &quot;bar&quot;}; var fooVar = json.label; // works for labels that are JavaScript identifiers var barVar = json[&quot;label-with-dash&quot;]; // using an array index works always</p>
<p>As alternative you may wrap the JsonWriter and replace any dash with an underscore:</p>
<p>HierarchicalStreamDriver driver = new JsonHierarchicalStreamDriver() { public HierarchicalStreamWriter createWriter(Writer out) { return new WriterWrapper(super.createWriter(out)) { public void startNode(String name) { startNode(name, null); } public void startNode(String name, Class clazz) { wrapped.startNode(name.replace(&#39;-&#39;, &#39;_&#39;), clazz); } } } }; XStream xstream = new XStream(driver);</p>
<h1 id="comparison-to-other-products">Comparison to other products</h1>
<h2 id="how-does-xstream-compare-to-java-beans-xmlencoder-">How does XStream compare to java.beans.XMLEncoder?</h2>
<p>XStream is designed for serializing objects using internal fields, whereas <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/beans/XMLEncoder.html" target="_blank">XMLEncoder</a> is designed for serializing JavaBeans using public API methods (typically in the form of</p>
<p>getXXX()
,</p>
<p>setXXX()
,</p>
<p>addXXX()
and</p>
<p>removeXXX()
methods.</p>
<h2 id="how-does-xstream-compare-to-jaxb-java-api-for-xml-binding-">How does XStream compare to JAXB (Java API for XML Binding)?</h2>
<p>JAXB is a Java binding tool. It generates Java code from a schema and you are able to transform from those classes into XML matching the processed schema and back. Note, that you cannot use your own objects, you have to use what is generated.</p>
<h1 id="scalability">Scalability</h1>
<h2 id="is-xstream-thread-safe-">Is XStream thread safe?</h2>
<p>Yes. Once the XStream instance has been created and configured, it may be shared across multiple threads allowing objects to be serialized/deserialized concurrently (unless you enable the auto.detection and processing of annotations). Actually the creation and initialization of XStream is quite expensive, therefore it is recommended to keep the XStream instance itself.</p>
<h2 id="how-much-memory-does-xstream-consume-">How much memory does XStream consume?</h2>
<p>This cannot be answered in general, but following topics have impact on the memory:</p>
<ol>
<li>XML parser technology in use: You should use a streaming parser like Xpp3 or StAX. DOM-based parsers process the complete XML and create their document model in memory before the first converter of XStream is called.</li>
<li>Your object model: Is it necessary to keep the complete object graph in memory at once. As alternative you might use <a href="http://xstream.codehaus.org/objectstream.html" target="_blank">object streams</a> or write custom converters that can load and save objects of your object model on the fly without adding them to the object graph physically. As example see the implementation of the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/persistence/XmlArrayList.html" target="_blank">XmlArrayList</a> in combination with the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/persistence/FileStreamStrategy.html" target="_blank">FileStreamStrategy</a> to keep parts of the object graph separate.</li>
<li>References: By default XStream supports references to the same object in an object graph. This implies that XStream keeps track of all serialized and deserialized objects internally. These references are kept with WeakReferences, so that the memory can be freed as soon as nobody references these objects anymore.</li>
<li>XML values: Any tag and attribute value that is converted into a Java String in the object graph will use the same String instance.</li>
<li>XStream caches: To increase performance XStream caches quite a lot like classes, converters to use, aliasing, tag names. All those caches make usage of WeakReferences or will exist only while marshalling one object graph resp. unmarshalling one input stream.</li>
</ol>
<h2 id="can-the-performance-of-xstream-be-increased-">Can the performance of XStream be increased?</h2>
<p>XStream is a generalizing library, it inspects and handles your types on the fly. Therefore it will normally be slower than a piece of optimized Java code generated out of a schema. However, it is possible to increase the performance anyway:</p>
<ul>
<li>Write custom converters for those of your types that occur very often in your XML.</li>
<li>Keep a configured XStream instance for multiple usage. Creation and initialization is quite expensive compared to the overhead of XStream when calling marshall or unmarshal.</li>
<li>Use Xpp3 or StAX parsers.</li>
</ul>
<p>Note, you should never try to optimize code for performance simply because you <strong>believe</strong> that you have detected a bottle neck. Always use proper tools like a profiler to verify where your hotspots are and whether your optimization was really successful or not.</p>
<h1 id="uses-of-xstream">Uses of XStream</h1>
<h2 id="is-xstream-a-data-binding-tool-">Is XStream a data binding tool?</h2>
<p>No. It is a serialization tool.</p>
<h2 id="can-xstream-generate-classes-from-xsd-">Can XStream generate classes from XSD?</h2>
<p>No. For this kind of work a data binding tool such as <a href="http://xmlbeans.apache.org/" target="_blank">XMLBeans</a> is appropriate.</p>
<h2 id="why-is-there-no-saxreader-">Why is there no SaxReader?</h2>
<p>XStream works on a stream-based parser model, while SAX is event-based. The stream based model implies, that the caller consumes the individual tokens from the XML parser on demand, while in an event-based model the parser controls the application flow on its own and will use callbacks to support client processing. The different architecture makes it therefore impossible for XStream to use an event-driven XML parser.</p>
<h1 id="software">Software</h1>
<ul>
<li><a href="http://xstream.codehaus.org/index.html" target="_blank">About XStream</a></li>
<li><a href="http://xstream.codehaus.org/news.html" target="_blank">News</a></li>
<li><a href="http://xstream.codehaus.org/changes.html" target="_blank">Change History</a></li>
<li><a href="http://xstream.codehaus.org/versioning.html" target="_blank">About Versioning</a></li>
</ul>
<h1 id="evaluating-xstream">Evaluating XStream</h1>
<ul>
<li><a href="http://xstream.codehaus.org/tutorial.html" target="_blank">Two Minute Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/graphs.html" target="_blank">Object references</a></li>
<li><a href="http://xstream.codehaus.org/manual-tweaking-output.html" target="_blank">Tweaking the Output</a></li>
<li><a href="http://xstream.codehaus.org/license.html" target="_blank">License</a></li>
<li><a href="http://xstream.codehaus.org/download.html" target="_blank">Download</a></li>
<li><a href="http://xstream.codehaus.org/references.html" target="_blank">References</a></li>
<li><p><a href="http://www.ohloh.net/projects/3459" target="_blank">Statistics</a></p>
<h1 id="using-xstream">Using XStream</h1>
</li>
<li><p><a href="http://xstream.codehaus.org/architecture.html" target="_blank">Architecture Overview</a></p>
</li>
<li><a href="http://xstream.codehaus.org/converters.html" target="_blank">Converters</a></li>
<li>Frequently Asked Questions</li>
<li><a href="http://xstream.codehaus.org/list-user.html" target="_blank">Users&#39; Mailing List</a></li>
<li><a href="http://xstream.codehaus.org/javadoc/index.html" target="_blank">JavaDoc Core</a></li>
<li><a href="http://xstream.codehaus.org/benchmark-javadoc/index.html" target="_blank">JavaDoc Benchmark</a></li>
<li><a href="http://xstream.codehaus.org/issues.html" target="_blank">Reporting Issues</a></li>
</ul>
<h1 id="tutorials">Tutorials</h1>
<ul>
<li><a href="http://xstream.codehaus.org/tutorial.html" target="_blank">Two Minute Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/alias-tutorial.html" target="_blank">Alias Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/annotations-tutorial.html" target="_blank">Annotations Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/converter-tutorial.html" target="_blank">Converter Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/objectstream.html" target="_blank">Object Streams Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/persistence-tutorial.html" target="_blank">Persistence API Tutorial</a></li>
<li><p><a href="http://xstream.codehaus.org/json-tutorial.html" target="_blank">JSON Tutorial</a></p>
<h1 id="developing-xstream">Developing XStream</h1>
</li>
<li><p><a href="http://xstream.codehaus.org/how-to-contribute.html" target="_blank">How to Contribute</a></p>
</li>
<li><a href="http://xstream.codehaus.org/list-dev.html" target="_blank">Developers&#39; Mailing List</a></li>
<li><a href="http://xstream.codehaus.org/team.html" target="_blank">Development Team</a></li>
<li><a href="http://xstream.codehaus.org/repository.html" target="_blank">Source Repository</a></li>
<li><a href="http://bamboo.ci.codehaus.org/browse/XSTREAM" target="_blank">Continuous Integration</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--XStream-FrequentlyAskedQuestions/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--XStream-FrequentlyAskedQuestions" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-服务器-Squid--认识Squid_inJava_百度空间/">认识Squid_inJava_百度空间</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-服务器-Squid--认识Squid_inJava_百度空间/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-squid_injava_-">认识Squid<em>inJava</em>百度空间</h1>
<p><a href="http://hi.baidu.com/"></a></p>
<ul>
<li><a href="http://xiangce.baidu.com/" target="_blank">相册</a></li>
<li><a href="http://hi.baidu.com/index/" target="_blank">广场</a></li>
<li><a href="http://hi.baidu.com/go/login" target="_blank">登录</a>
*</li>
<li><a href="http://hi.baidu.com/go/reg?pmfrom=qingtop" target="_blank">注册</a>
<a href="http://hi.baidu.com/injava/item/b6886fc1fc72af52ac00ef7d#" target="_blank">关注此空间</a></li>
</ul>
<h1 id="-injava-http-hi-baidu-com-injava-"><a href="http://hi.baidu.com/injava" target="_blank">inJava</a></h1>
<p>J2EE、架构、搜索引擎、数据挖掘、互联网、创业、媒体、资料库</p>
<p>2008-03-22 13:48</p>
<h2 id="-squid">认识Squid</h2>
<p>Squid是什么?
Squid能做什么?
Squid如何工作的?
[Squid是什么]
   Squid是一个高性能的代理缓存服务器，Squid支持FTP、gopher和HTTP协议。和一般的代理缓存软件不同，Squid用一个单独的、非模块化的、I/O驱动的进程来处理所有的客户端请求。
   Squid将数据元缓存在内存中，同时也缓存DNS查询的结果，除此之外，它还支持非模块化的DNS查询，对失败的请求进行消极缓存。Squid支持SSL，支持访问控制。由于使用了ICP（轻量Internet缓存协议），Squid能够实现层叠的代理阵列，从而最大限度地节约带宽。
   Squid由一个主要的服务程序squid,一个DNS查询程序dnsserver，几个重写请求和执行认证的程序，以及几个管理工具组成。当Squid启动以后，它可以派生出预先指定数目的dnsserver进程，而每一个dnsserver进程都可以执行单独的DNS查询，这样一来就大大减少了服务器等待DNS查询的时间。
Squid是一个缓存internet数据的一个软件，它接收用户的下载申请，并自动处理所下载的数据。也就是说，当一个用户象要下载一个主页时，它向Squid发出一个申请，要Squid替它下载，然后Squid连接所申请网站并请求该主页，接着把该主页传给用户同时保留一个备份，当别的用户申请同样的页面时，Squid把保存的备份立即传给用户，使用户觉得速度相当快。目前，Squid 可以代理HTTP, FTP, GOPHER, SSL 和 WAIS 协议，暂不能代理POP, NNTP等协议。不过，已经有人开始修改Squid，相信不久的将来，Squid能够代理这些协议。</p>
<p>Squid能够缓存任何数据吗？不是的。象缓存信用卡帐号、可以远方执行的scripts、经常变换的主页等是不合适的也是不安全的。Squid可以自动的进行处理，你也可以根据自己的需要设置Squid，使之过滤掉你不想要的东西。</p>
<p>Squid可以工作在很多的操作系统中，如AIX, Digital Unix, FreeBSD, HP-UX, Irix, Linux, NetBSD, Nextstep, SCO, Solaris，OS/2等，也有不少人在其他操作系统中重新编译过Squid。</p>
<p>Squid对硬件的要求是内存一定要大，不应小于128M，硬盘转速越快越好，最好使用服务器专用SCSI硬盘，处理器要求不高，400MH以上既可。
[SQUID能做什么]
    1、代理服务器
    2、透明代理
    3、反向代理
什么是代理服务器
    做为代理服务器，这是SQUID的最基本功能；通过在squid.conf文件里添加一系列访问及控制规则，用户在客户端设置服务器地址和端口，即可通过SQUID访问INTERNET。
什么是透明代理
   所谓透明代理，是相对于代理服务器而言，客户端不需要做任何和代理服务器相关的设置和操作，对用户而言，更本感觉不到代理服务器的存在，所以称之为透明代理。
透明代理流程说明
   用户A发送一个访问请求到防火墙，由防火墙将该用户的访问请求转发到SQUID，SQUID在先检查自身缓存中有无该用户请求的访问内容，如果没有，则请求远端目的服务器，获取该用户的访问内容，在返回给用户的同时，在自身缓存保留一份记录以备下次调用；当用户B发送一个和用户A相同的访问请求时，由防火墙将转发该用户请求到SQUID，SQUID检查自身缓存发现有同样内容后，直接将该内容返回给用户。
注：在实际使用中，通常将SQUID和防火墙放在同一台机器上，为了更清楚的象浏览者描述其工作流程，在以下的流程图中将防火墙和SQUID分开显示。
   <img src="" alt="">
什么是反向代理
   普通代理方式是代理内部网络用户访问internet上服务器的连接请求，客户端必须指定代理服务器,并将本来要直接发送到internet上服务器的连接请求发送给代理服务器处理。反向代理（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。</p>
<p>反向代理流程说明
   SQUID做为反向代理服务器，通常工作在一个服务器集群的前端，在用户端看来，SQUID服务器就是他所要访问的服务器，而实际意义上SQUID只是接受用户的请求，同时将用户请求转发给内网真正的WEB服务器，如果SQUID本身有用户要访问的内容，则SQUID直接将数据返回给用户。
<img src="" alt="">
[SQUID如何工作]
     <img src="" alt="">
<a href="http://hi.baidu.com/tag/linux%2Bwindows/feeds" target="_blank">/#linux+windows</a></p>
<p>分享到： <a href=""></a><a href=""></a><a href=""></a><a href=""></a></p>
<p><a href="http://hi.baidu.com/injava/item/b6886fc1fc72af52ac00ef7d#" target="_blank">举报</a>浏览(117) <a href="http://hi.baidu.com/injava/item/b6886fc1fc72af52ac00ef7d#" target="_blank">评论</a><a href="http://hi.baidu.com/injava/item/b6886fc1fc72af52ac00ef7d#" target="_blank">转载</a></p>
<h3 id="-">你可能也喜欢</h3>
<ul>
<li><a href="http://hi.baidu.com/nieve_kx/item/b48fff87fa92a5ef98255fea" target="_blank"><img src="&quot;一组速写风景画❤ ~&quot;" alt="一组速写风景画❤ ~"></a><a href="http://hi.baidu.com/nieve_kx/item/b48fff87fa92a5ef98255fea" target="_blank">一组速写风景画❤ ~</a></li>
<li><a href="http://hi.baidu.com/ajnsfms/item/b1d2c5ab45b47bde5af191b2" target="_blank"><img src="&quot;David Scheirer萌猫酷狗水彩画&quot;" alt="David Scheirer萌猫酷狗水彩画"></a><a href="http://hi.baidu.com/ajnsfms/item/b1d2c5ab45b47bde5af191b2" target="_blank">David Scheirer萌猫酷狗水彩画</a></li>
<li><a href="http://hi.baidu.com/xunyaoyang/item/3bfd319772fa24de7b7f01b0" target="_blank"><img src="&quot;你的梦是什么颜色？&quot;" alt="你的梦是什么颜色？"></a><a href="http://hi.baidu.com/xunyaoyang/item/3bfd319772fa24de7b7f01b0" target="_blank">你的梦是什么颜色？</a></li>
<li><a href="http://hi.baidu.com/wxljjoujlibfjvd/item/6d14f0ead253353f8c3ea87d" target="_blank"><img src="&quot;世界上最远的距离&quot;" alt="世界上最远的距离"></a><a href="http://hi.baidu.com/wxljjoujlibfjvd/item/6d14f0ead253353f8c3ea87d" target="_blank">世界上最远的距离</a></li>
<li><a href="http://hi.baidu.com/jfvkwmnvjkbcqrd/item/d30978d0635bf5c13cc2cb6e" target="_blank"><img src="&quot;板绘&quot;" alt="板绘"></a><a href="http://hi.baidu.com/jfvkwmnvjkbcqrd/item/d30978d0635bf5c13cc2cb6e" target="_blank">板绘</a></li>
<li><a href="http://hi.baidu.com/cangbto/item/007c0630e7eb8bafb611dbec" target="_blank"><img src="&quot;水彩芭蕾&quot;" alt="水彩芭蕾"></a><a href="http://hi.baidu.com/cangbto/item/007c0630e7eb8bafb611dbec" target="_blank">水彩芭蕾</a></li>
<li><a href="http://hi.baidu.com/injava/item/1e0d9e602de5d1157cdecc7a" target="_blank"><img src="&quot;apache限制并发数 IP 带宽设置教程&quot;" alt="apache限制并发数 IP 带宽设置教程"></a><a href="http://hi.baidu.com/injava/item/1e0d9e602de5d1157cdecc7a" target="_blank">apache限制并发数 IP 带宽设置教程</a>
<a href="http://hi.baidu.com/injava/item/34ac120d7fa07b113b53ee7d" title="上一篇"></a></li>
</ul>
<p><a href="http://hi.baidu.com/injava/item/c444ec13283138011994ec7d" title="下一篇"></a></p>
<p>评论
<a href="http://help.baidu.com/question?prod_en=hi" target="_blank">帮助中心</a> | <a href="http://tieba.baidu.com/p/1781683739" target="_blank">空间客服</a> | <a href="http://tousu.baidu.com/hi/add" target="_blank">投诉中心</a> | <a href="http://www.baidu.com/search/hi_contract.html" target="_blank">空间协议</a></p>
<p>©2013 Baidu</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/服务器/">服务器</a></li></span><span class="breadcrumb"><li><a href="/categories/服务器/">服务器</a></li><li><a href="/categories/服务器/Squid/">Squid</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Squid/" class="label label-primary">Squid</a><a href="/tags/服务器/" class="label label-success">服务器</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-服务器-Squid--认识Squid_inJava_百度空间/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-服务器-Squid--认识Squid_inJava_百度空间" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/22/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/20/">20</a></li><li><a class="page-number" href="/page/21/">21</a></li><li><a class="page-number" href="/page/22/">22</a></li><li class="active"><li><span class="page-number current">23</span></li><li><a class="page-number" href="/page/24/">24</a></li><li><a class="page-number" href="/page/25/">25</a></li><li><a class="page-number" href="/page/26/">26</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/161/">161</a></li><li><a class="page-number" href="/page/162/">162</a></li><li><a class="extend next" href="/page/24/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Site powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a>  update time: <em>2014-04-07 17:30:36</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
