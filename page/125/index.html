
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 125 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-oracle--Oraclenotin查不到应有的结果2/">Oracle not in查不到应有的结果 (2)</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:34.000Z"> <a href="/2014/02/02/2014-02-02-DB-oracle--Oraclenotin查不到应有的结果2/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="oracle-not-in-2-">Oracle not in查不到应有的结果 (2)</h1>
<p><a href="http://g.live.com/9uxp9en-us/hdr_main1??su=http://shared.live.com/" target="_blank"><img src="" alt="Windows Live">Windows Live™</a></p>
<ul>
<li><a href="http://g.live.com/9uxp9en-us/hdr_main1??su=http://shared.live.com/Live.Spaces" target="_blank">Home</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_main2??su=http://shared.live.com/Live.Spaces" target="_blank">Profile</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_main3??su=http://shared.live.com/Live.Spaces" target="_blank">People</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_main4??su=http://shared.live.com/Live.Spaces" target="_blank">Mail</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_main5??su=http://shared.live.com/Live.Spaces" target="_blank">Photos</a></li>
<li><p><a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#" target="_blank">More ▼</a></p>
</li>
<li><p><a href="http://g.live.com/9uxp9en-us/hdr_main6??su=http://shared.live.com/Live.Spaces" target="_blank">Calendar</a></p>
</li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more12??su=http://shared.live.com/Live.Spaces" target="_blank">Events</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more2??su=http://shared.live.com/Live.Spaces" target="_blank">SkyDrive</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more1??su=http://shared.live.com/Live.Spaces" target="_blank">Groups</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more11??su=http://shared.live.com/Live.Spaces" target="_blank">Spaces</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more4??su=http://shared.live.com/Live.Spaces" target="_blank">Family Safety</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more6??su=http://shared.live.com/Live.Spaces" target="_blank">Mobile</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more5??su=http://shared.live.com/Live.Spaces" target="_blank">Downloads</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more9??su=http://shared.live.com/Live.Spaces" target="_blank">Office Live</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more13??su=http://shared.live.com/Live.Spaces" target="_blank">All services</a></li>
<li><p><a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#" target="_blank">MSN ▼</a></p>
</li>
<li><p><a href="http://g.live.com/9uxp9msn/mhm-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Home</a></p>
</li>
<li><a href="http://g.live.com/9uxp9msn/mau-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Autos</a></li>
<li><a href="http://g.live.com/9uxp9msn/mga-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Games</a></li>
<li><a href="http://g.live.com/9uxp9msn/mmo-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Money</a></li>
<li><a href="http://g.live.com/9uxp9msn/mmv-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Movies</a></li>
<li><a href="http://g.live.com/9uxp9msn/mmu-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Music</a></li>
<li><a href="http://g.live.com/9uxp9msn/mnw-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">News</a></li>
<li><a href="http://g.live.com/9uxp9msn/msp-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Sports</a></li>
<li><p><a href="http://g.live.com/9uxp9msn/mwe-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Weather</a>
Search People or web</p>
</li>
<li><p><a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#" target="_blank">Search People</a></p>
</li>
<li><a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#" target="_blank">Search the web</a>
<a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#" target="_blank"><img src="&quot;Search&quot;" alt="Search"></a>
<a href="http://login.live.com/login.srf?wa=wsignin1.0&amp;rpsnv=11&amp;ct=1269518164&amp;rver=5.5.4177.0&amp;wp=MBI&amp;wreply=http:%2F%2Fx-spirit.spaces.live.com%2Fblog%2Fcns!CC0B04AE126337C0!844.entry%3F&amp;lc=1033&amp;id=73625&amp;mkt=en-US" target="_blank">Sign in</a><a href="http://login.live.com/login.srf?wa=wsignin1.0&amp;rpsnv=11&amp;ct=1269518164&amp;rver=5.5.4177.0&amp;wp=MBI&amp;wreply=http:%2F%2Fx-spirit.spaces.live.com%2Fblog%2Fcns!CC0B04AE126337C0!844.entry%3F&amp;lc=1033&amp;id=73625&amp;mkt=en-US" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://cid-cc0b04ae126337c0.profile.live.com/" target="_blank">威&#39;s profile</a><a href="http://x-spirit.spaces.live.com/default.aspx" target="_blank">X-Spirit</a><a href="http://cid-cc0b04ae126337c0.skydrive.live.com/albums.aspx" target="_blank">Photos</a><a href="http://x-spirit.spaces.live.com/blog/" target="_blank">Blog</a><a href="http://cid-cc0b04ae126337c0.profile.live.com/Lists/" target="_blank">Lists</a><a href="http://x-spirit.spaces.live.com/" target="_blank">More <img src="" alt=""></a></p>
<ul>
<li><a href="http://x-spirit.spaces.live.com/guestbook/" target="_blank">Guestbook</a></li>
<li><p><a href="http://people.live.com/?rru=friends%3fcid%3dcc0b04ae126337c0" target="_blank">Network</a>
<a href="http://x-spirit.spaces.live.com/" target="_blank"><img src="" alt=""> Tools <img src="" alt=""></a></p>
</li>
<li><p><a href="http://spaces.live.com/api.aspx?wx_action=sendMessage&amp;wxp_toCid=-3743893519549122624&amp;wx_ru=http%3a%2f%2fx-spirit.spaces.live.com%2fblog%2fcns!CC0B04AE126337C0!844.entry" target="_blank">Send a private message</a></p>
</li>
<li><a href="http://cid-cc0b04ae126337c0.users.api.live.net/Users(-3743893519549122624" target="_blank">Subscribe to RSS feed</a>/Main?$format=rss20)</li>
<li><a href="mailto:?subject=http://x-spirit.spaces.live.com/&amp;body=http://x-spirit.spaces.live.com/">Tell a friend</a></li>
<li><a href="http://my.msn.com/addtomymsn.armx?id=rss&amp;ut=http%3a%2f%2fcid-cc0b04ae126337c0.users.api.live.net%2fUsers%28-3743893519549122624%29%2fMain%3f%24format%3drss20&amp;ru=http%3a%2f%2fx-spirit.spaces.live.com%2f" target="_blank">Add to My MSN</a></li>
<li><a href="http://www.live.com/?add=http://cid-cc0b04ae126337c0.users.api.live.net/Users(-3743893519549122624" target="_blank">Add to Live.com</a>/Main?$format=rss20)</li>
<li><a href="http://profile.live.com/connect/send.aspx?cid=0xcc0b04ae126337c0&amp;scontext=0&amp;name=&amp;ru=http%3a%2f%2fx-spirit.spaces.live.com%2fblog%2fcns%21CC0B04AE126337C0%21844.entry" target="_blank">Add to your network</a></li>
<li><a href="http://signup.alerts.live.com/alerts/userSignup.do?partner=spaces&amp;ut=http://x-spirit.spaces.live.com/feed.rss&amp;mkt=en-us&amp;returnURL=http%3a%2f%2fx-spirit.spaces.live.com%2fblog%2fcns!CC0B04AE126337C0!844.entry" target="_blank">Sign up for alerts</a>
<a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#" target="_blank">Help</a></li>
</ul>
<h2 id="blog">Blog</h2>
<ul>
<li>[<img src="" alt=""></li>
</ul>
<p>Entries
](<a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart" target="_blank">http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart</a>)</p>
<ul>
<li>[<img src="" alt=""></li>
</ul>
<p>Summary
](<a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=summary&amp;_c=BlogPart" target="_blank">http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=summary&amp;_c=BlogPart</a>)
Listed by:  Date Category</p>
<ul>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d3%26ayear%3d2010" title="View all entries published during this time period" target="_blank">March 2010</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d2%26ayear%3d2010" title="View all entries published during this time period" target="_blank">February 2010</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d1%26ayear%3d2010" title="View all entries published during this time period" target="_blank">January 2010</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d12%26ayear%3d2009" title="View all entries published during this time period" target="_blank">December 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d11%26ayear%3d2009" title="View all entries published during this time period" target="_blank">November 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d10%26ayear%3d2009" title="View all entries published during this time period" target="_blank">October 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d9%26ayear%3d2009" title="View all entries published during this time period" target="_blank">September 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d8%26ayear%3d2009" title="View all entries published during this time period" target="_blank">August 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d7%26ayear%3d2009" title="View all entries published during this time period" target="_blank">July 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d6%26ayear%3d2009" title="View all entries published during this time period" target="_blank">June 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d5%26ayear%3d2009" title="View all entries published during this time period" target="_blank">May 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d4%26ayear%3d2009" title="View all entries published during this time period" target="_blank">April 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d3%26ayear%3d2009" title="View all entries published during this time period" target="_blank">March 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d2%26ayear%3d2009" title="View all entries published during this time period" target="_blank">February 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d1%26ayear%3d2009" title="View all entries published during this time period" target="_blank">January 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d12%26ayear%3d2008" title="View all entries published during this time period" target="_blank">December 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d11%26ayear%3d2008" title="View all entries published during this time period" target="_blank">November 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d10%26ayear%3d2008" title="View all entries published during this time period" target="_blank">October 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d9%26ayear%3d2008" title="View all entries published during this time period" target="_blank">September 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d8%26ayear%3d2008" title="View all entries published during this time period" target="_blank">August 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d7%26ayear%3d2008" title="View all entries published during this time period" target="_blank">July 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d6%26ayear%3d2008" title="View all entries published during this time period" target="_blank">June 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d5%26ayear%3d2008" title="View all entries published during this time period" target="_blank">May 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d4%26ayear%3d2008" title="View all entries published during this time period" target="_blank">April 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d3%26ayear%3d2008" title="View all entries published during this time period" target="_blank">March 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d2%26ayear%3d2008" title="View all entries published during this time period" target="_blank">February 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d1%26ayear%3d2008" title="View all entries published during this time period" target="_blank">January 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d12%26ayear%3d2007" title="View all entries published during this time period" target="_blank">December 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d11%26ayear%3d2007" title="View all entries published during this time period" target="_blank">November 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d10%26ayear%3d2007" title="View all entries published during this time period" target="_blank">October 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d9%26ayear%3d2007" title="View all entries published during this time period" target="_blank">September 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d8%26ayear%3d2007" title="View all entries published during this time period" target="_blank">August 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d7%26ayear%3d2007" title="View all entries published during this time period" target="_blank">July 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d6%26ayear%3d2007" title="View all entries published during this time period" target="_blank">June 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d5%26ayear%3d2007" title="View all entries published during this time period" target="_blank">May 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d4%26ayear%3d2007" title="View all entries published during this time period" target="_blank">April 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d3%26ayear%3d2007" title="View all entries published during this time period" target="_blank">March 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d2%26ayear%3d2007" title="View all entries published during this time period" target="_blank">February 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d1%26ayear%3d2007" title="View all entries published during this time period" target="_blank">January 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d12%26ayear%3d2006" title="View all entries published during this time period" target="_blank">December 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d11%26ayear%3d2006" title="View all entries published during this time period" target="_blank">November 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d10%26ayear%3d2006" title="View all entries published during this time period" target="_blank">October 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d9%26ayear%3d2006" title="View all entries published during this time period" target="_blank">September 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d8%26ayear%3d2006" title="View all entries published during this time period" target="_blank">August 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d7%26ayear%3d2006" title="View all entries published during this time period" target="_blank">July 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d6%26ayear%3d2006" title="View all entries published during this time period" target="_blank">June 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d5%26ayear%3d2006" title="View all entries published during this time period" target="_blank">May 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d4%26ayear%3d2006" title="View all entries published during this time period" target="_blank">April 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d3%26ayear%3d2006" title="View all entries published during this time period" target="_blank">March 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d2%26ayear%3d2006" title="View all entries published during this time period" target="_blank">February 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d1%26ayear%3d2006" title="View all entries published during this time period" target="_blank">January 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d12%26ayear%3d2005" title="View all entries published during this time period" target="_blank">December 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d11%26ayear%3d2005" title="View all entries published during this time period" target="_blank">November 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d10%26ayear%3d2005" title="View all entries published during this time period" target="_blank">October 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d9%26ayear%3d2005" title="View all entries published during this time period" target="_blank">September 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d8%26ayear%3d2005" title="View all entries published during this time period" target="_blank">August 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d7%26ayear%3d2005" title="View all entries published during this time period" target="_blank">July 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d6%26ayear%3d2005" title="View all entries published during this time period" target="_blank">June 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d5%26ayear%3d2005" title="View all entries published during this time period" target="_blank">May 2005</a> *    <a href="http://x-spirit.spaces.live.com/blog/cns!CC0B04AE126337C0!829.entry" title="Go to: Linux下面利用crontab来实现mysql数据库的定时备份" target="_blank">&lt; Previous</a>   <a href="http://x-spirit.spaces.live.com/blog/cns!CC0B04AE126337C0!845.entry" title="Go to: Oracle数据库导入命令，导出换成exp就可以了" target="_blank">Next &gt;</a></li>
</ul>
<p>Sorry, your entry can&#39;t be deleted right now. Please try again later.</p>
<p>January 25</p>
<h3 id="oracle-not-in-">Oracle not in查不到应有的结果</h3>
<p>首先我要感谢aa和Liu Xing帮我发现了我日志中的错误。之前比较粗心，把3条SQL语句写成一样的了，对于给读者造成的麻烦，我深表抱歉。
今天我把原文做了修订，为了对得起读者对我的关注，我重新深入的研究了这个问题，在后面，我会把来龙去脉写清楚。
<em>问题：
语句1：
</em></p>
<p><em>Select /</em> from  table1 A where A.col1 not in ( select col1 from table2 B )
<em>
</em>如果这样，本来应该有一条数据，结果没有。
如果我改写成这样：
语句2：
*</p>
<p><em>select /</em> from table1 A where not exists (SELECT /<em> FROM table2 B where B.col1 = A.col1)</em>
<em>结果就正确，有一条数据显示。
经过一番搜索，原以为是子查询结果集太大的原因。</em> <em>后来有网上强人指点：子查询里面有空集。即子查询的结果集里面有NULL的结果。</em> <em>把查询语句修改成：**语句3：
</em></p>
<p><em>Select /</em> from  table1 A where A.col1 not in ( select col1 from table2 B where B.col1 is not null )
<em>
</em>果然就查出来了。而且一点不差。。。厉害阿～～～<em>
下面是针对本文题的分析：
1。 首先来说说Oracle中的NULL。
Oracle中的NULL代表的是无意义，或者没有值。将NULL和其他的值进行逻辑运算，运算过程中，NULL的表现更象是FALSE。
下面请看真值表：
 AND NULL
  OR NULL  TRUE  NULL  TRUE  FALSE  FALSE  NULL  NULL  NULL
  NULL
另外，NULL和其他的值进行比较或者算术运算（&lt;、&gt;、=、!=、+、-、/</em>、/），结果仍是NULL。
如果想要判定某个值是否为NULL，可以用IS NULL或者IS NOT NULL。</p>
<ol>
<li>再来说说Oracle中的IN。
in是一个成员条件, 对于给定的一个集合或者子查询,它会比较每一个成员值。
IN功能上相当于 =ANY 的操作，而NOT IN 功能上相当于 !=ALL 的操作。
IN在逻辑上实际上就是对给定的成员集合或者子查询结果集进行逐条的判定，例如：
SELECT /<em> FROM table1 A WHERE A.col1 in (20,50,NULL);实际上就是执行了
SELECT /</em> FROM table1 A WHERE A.col1=20 OR A.col1=50 OR A.col1=NULL;这样，根据NULL的运算特点和真值表，我们可以看出，上边这个WHERE 字句可以被简化(如果返回NULL则无结果集返回，这一点和FALSE是一样的)为
WHERE A.col1=20 OR A.col1=50也就是说，如果你的table1中真的存在含有NULL值的col1列，则执行该语句，无法查询出那些值为null的记录。
再来看看NOT IN。根据逻辑运算关系，我们知道，NOT (X=Y OR N=M) 等价于 X!=Y AND N!=M，那么：
SELECT /<em> FROM table1 A WHERE A.col1 not in (20,50,NULL)等价于
SELECT /</em> FROM table1 A WHERE A.col1!=20 AND A.col1!=50 AND A.col1!=NULL根据NULL的运算特性和真值表，该语句无论前两个判定条件是否为真，其结果一定是NULL或者FALSE。故绝对没有任何记录可以返回。
这就是为什么语句1查不到应有结果的原因。当然，如果你用NOT IN的时候，预先在子查询里把NULL去掉的话，那就没问题了，例如语句3。
有些童鞋可能要问了：那如果我想把A表里面那些和B表一样col1列的值一样的记录都查出来，即便A、B两表里面的col1列都包括值为NULL的记录的话，用这一条语句就没办法了吗？
我只能很遗憾的告诉你，如果你想在WHERE后面单纯用IN 似乎不太可能了，当然，你可以在外部的查询语句中将NULL条件并列进去，例如：
SELECT /* FROM table1 A WHERE A.col1 in (SELECT B.col1 FROM table2 B) OR A.col1 IS NULL;</li>
<li>最后谈谈EXISTS。
有人说EXISTS的性能比IN要好。但这是很片面的。我们来看看EXISTS的执行过程：
select /<em> from t1 where exists ( select /</em> from t2 where t2.col1 = t1.col1 )相当于：
for x in ( select /<em> from t1 )
loop
   if ( exists ( select /</em> from t2 where t2.col1 = x.col1 )
   then<pre><code>  OUTPUT THE RECORD in x
</code></pre>   end if
end loop
也就是说，EXISTS语句实际上是通过循环外部查询的结果集，来过滤出符合子查询标准的结果集。于是外部查询的结果集数量对该语句执行性能影响最大，故如果外部查询的结果集数量庞大，用EXISTS语句的性能也不一定就会好很多。
当然，有人说NOT IN是对外部查询和子查询都做了全表扫描，如果有索引的话，还用不上索引，但是NOT EXISTS是做连接查询，所以，如果连接查询的两列都做了索引，性能会有一定的提升。
当然至于实际的查询效率，我想还是具体情况具体分析吧。
那么我们不妨来分析一下语句2为什么能够的到正确的结果吧：
语句2是这样的：**</li>
</ol>
<p><em>select /</em> from table1 A where not exists (SELECT B.col1 FROM table2 B where B.col1 = A.col1)<em>
实际上是这样的执行过程：
for x in ( select /</em> from table1 A )
   loop
      if (not exists ( select /<em> from table2 B where B.col1 = x.col1 )
      then
         OUTPUT THE RECORD in x
      end if
end loop
由于表A中不包含NULL的记录，所以，遍历完表A，也只能挑出表A中独有的记录。
这就是为什么语句2能够完成语句3的任务的原因。
但如果表A中存在NULL记录而表B中不存在呢？
这个问题请大家自己分析吧。哈哈。有答案了可以给我留言哦。
答案：A表中的NULL也会被查出来。因为select /</em> from table2 B where B.col1 = NULL不返回结果，故
not exists ( select /* from table2 B where B.col1 = x.col1 )的值为真。
以上SQL运行结果在MySQL和Oracle上都已经通过。</p>
<p>11:33 AM | <a href="&quot;Blog about this entry in your space&quot;">Blog it</a> | <a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=cat%3d%25e8%25ae%25a1%25e7%25ae%2597%25e6%259c%25ba%25e4%25b8%258e%2520Internet" title="Show all entries for this category" target="_blank">计算机与 Internet</a></p>
<p><a href=""></a><a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#"></a></p>
<h3 id="comments-1-">Comments (1)</h3>
<p>Please wait...</p>
<p>Sorry, the comment you entered is too long. Please shorten it.
You didn&#39;t enter anything. Please try again.</p>
<p>Sorry, we can&#39;t add your comment right now. Please try again later.
To add a comment, you need permission from your parent. <a href="https://fss.live.com/krl/AddContact.aspx?Rurl=http%3a%2f%2fx-spirit.spaces.live.com%2fblog%2fcns%21CC0B04AE126337C0%21844.entry%23comment" target="_blank">Ask for permission</a></p>
<p>Your parent has turned off comments.
Sorry, we can&#39;t delete your comment right now. Please try again later.</p>
<p>You&#39;ve exceeded the maximum number of comments that can be left in one day. Please try again in 24 hours.
Your account has had the ability to leave comments disabled because our systems indicate that you may be spamming other users. If you believe that your account has been disabled in error please contact <a href="http://support.live.com/eform.aspx?productKey=wlspaces&amp;ct=eformts" target="_blank">Windows Live support</a>.</p>
<p>Complete the security check below to finish leaving your comment.
The characters you type in the security check must match the characters in the picture or audio.
To add a comment, sign in with your Windows Live ID (if you use Hotmail, Messenger, or Xbox LIVE, you have a Windows Live ID). <a href="http://login.live.com/login.srf?wa=wsignin1.0&amp;rpsnv=11&amp;ct=1269518164&amp;rver=5.5.4177.0&amp;wp=MBI&amp;wreply=http:%2F%2Fx-spirit.spaces.live.com%2Fblog%2Fcns!CC0B04AE126337C0!844.entry&amp;lc=1033&amp;id=73625" target="_blank">Sign in</a></p>
<p>Don&#39;t have a Windows Live ID? <a href="https://signup.live.com/signup.aspx?ID=62862&amp;mkt=en-US&amp;RU=http%3a%2f%2fx-spirit.spaces.live.com%2fblog%2fcns%21CC0B04AE126337C0%21844.entry&amp;RX=http%3a%2f%2fx-spirit.spaces.live.com%2fblog%2fcns%21CC0B04AE126337C0%21844.entry&amp;cp=1" target="_blank">Sign up</a> <a href="http://cid-09e46a4d043ff077.profile.live.com/" title="Picture of Xing Liu" target="_blank"><img src="" alt="Picture of Xing Liu"></a></p>
<p><img src="" alt="Picture of Xing Liu"> <a href="http://cid-09e46a4d043ff077.profile.live.com/" title="Xing Liu" target="_blank">Xing Liu</a>wrote:</p>
<p>这几个命令行怎么都一样啊?</p>
<p>Feb. 11</p>
<h3 id="trackbacks">Trackbacks</h3>
<p>The trackback URL for this entry is:</p>
<p><a href="http://x-spirit.spaces.live.com/blog/cns!CC0B04AE126337C0!844.trak" target="_blank">http://x-spirit.spaces.live.com/blog/cns!CC0B04AE126337C0!844.trak</a>
Weblogs that reference this entry</p>
<ul>
<li>None</li>
<li><a href="http://g.live.com/9uxp9en-us/ftr1" target="_blank">© 2010 Microsoft</a></li>
<li><a href="http://go.microsoft.com/fwlink/?LinkId=74170" target="_blank">Privacy</a></li>
<li><a href="http://g.msn.com/0TO_/enus" target="_blank">Terms of use</a><ul>
<li><a href="http://help.live.com/help.aspx?mkt=en-us&amp;project=tou&amp;querytype=keyword&amp;query=coc" target="_blank">Code of Conduct</a></li>
</ul>
</li>
<li><a href="http://support.live.com/default.aspx?productKey=WLSpacesAbuse" target="_blank">Report Abuse</a></li>
<li><a href="http://help.live.com/help.aspx?mkt=en-us&amp;project=WL_Spacesv3&amp;querytype=keyword&amp;query=spitpot&amp;format=b1" target="_blank">Safety</a></li>
<li><a href="http://g.live.com/9uxp9en-us/ftr3" target="_blank">Account</a></li>
<li><a href="http://g.live.com/9uxp9en-us/ftr4?productkey=WLSpaces" target="_blank">Feedback</a>    <img src="" alt=""><img src="" alt=""></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/oracle/">oracle</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/oracle/" class="label label-success">oracle</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:34"datetime="2014-03-07 09:54:34"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-oracle--Oraclenotin查不到应有的结果2/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-oracle--Oraclenotin查不到应有的结果2" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-oracle--SQLLoader学习小记命令行参考/">SQL Loader学习小记(命令行参考)</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:34.000Z"> <a href="/2014/02/02/2014-02-02-DB-oracle--SQLLoader学习小记命令行参考/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="sql-loader-">SQL Loader学习小记(命令行参考)</h1>
<p>SQL Loader 命令行参考
   Command line Sample:
   SQLLDR CONTROL=sample.ctl, LOG=sample.log, BAD=baz.bad, DATA=etc.dat
   USERID=scott/tiger, ERRORS=999, LOAD=2000, DISCARD=toss.dsc,
   DISCARDMAX=5
   常用的keywords:
userid     -- orACLE username/password
control    -- control file name
log        -- log file name
bad        -- bad file name
data       -- data file name
discard    -- discard file name
discardmax -- number of discards to allow (Default all)
skip       -- number of logical records to skip (Default 0)
load       -- number of logical records to load (Default all)
errors     -- number of errors to allow (Default 50)(允许出错的记录数)
rows       -- number of rows in conventional path bind array or between direct path data saves
               (Default: Conventional path 64, Direct path all)(每次提交的记录数)
bindsize   -- size of conventional path bind array in bytes (Default 256000)
silent     -- suppress messages during run (header,feedback,errors,discards,partitions)(是否显示load信息)
direct     -- use direct path (Default FALSE)
parfile    -- parameter file: name of file that contains parameter specifications
parallel   -- do parallel load (Default FALSE)
file       -- file to allocate extents from
skip_unusable_indexes  -- disallow/allow unusable indexes or index partitions(Default FALSE)
skip_index_maintenance -- do not maintain indexes, mark affected indexes as unusable (Default FALSE)
commit_discontinued    -- commit loaded rows when load is discontinued (Default FALSE)
readsize           -- size of read buffer (Default 1048576)
external_table     -- use external table for load; NOT_USED, GENERATE_ONLY, EXECUTE (Default NOT_USED)
columnarrayrows    -- number of rows for direct path column array (Default 5000)
streamsize         -- size of direct path stream buffer in bytes (Default 256000)
multithreading     -- use multithreading in direct path
resumable          -- enable or disable resumable for current session (Default FALSE)
resumable_name     -- text string to help identify resumable statement
resumable_timeout  -- wait time (in seconds) for RESUMABLE (Default 7200)
date_cache         -- size (in entries) of date conversion cache (Default 1000)
    上述大部分的参数定义可以入在control file中的option里。
    执行结果返回代码
All rows loaded successfully      EX_SUCC
All or some rows rejected      EX_WARN
All or some rows discarded      EX_WARN
Discontinued load EX_WARN
Command-line or syntax errors      EX_FAIL
oracle errors nonrecoverable for SQL/*Loader    EX_FAIL
Operating system errors (such as file open/close and malloc)  EX_FAIL
    For UNIX, the exit codes are as follows:
EX_SUCC 0
EX_FAIL 1
EX_WARN 2
EX_FTL  3</p>
<p>来源： <a href="[http://www.wudongqi.com/article/540.htm](http://www.wudongqi.com/article/540.htm)">[http://www.wudongqi.com/article/540.htm](http://www.wudongqi.com/article/540.htm)</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/oracle/">oracle</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/oracle/" class="label label-success">oracle</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:34"datetime="2014-03-07 09:54:34"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-oracle--SQLLoader学习小记命令行参考/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-oracle--SQLLoader学习小记命令行参考" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-oracle--OracleParallelExecution并行执行/">Oracle Parallel Execution(并行执行)</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:34.000Z"> <a href="/2014/02/02/2014-02-02-DB-oracle--OracleParallelExecution并行执行/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="oracle-parallel-execution-">Oracle Parallel Execution(并行执行)</h1>
<p>您还未登录！|<a href="https://passport.csdn.net/account/login" target="_blank">登录</a>|<a href="https://passport.csdn.net/account/register" target="_blank">注册</a>|<a href="https://passport.csdn.net/help/faq" target="_blank">帮助</a></p>
<ul>
<li><a href="http://www.csdn.net/" target="_blank">首页</a></li>
<li><a href="http://news.csdn.net/" target="_blank">业界</a></li>
<li><a href="http://mobile.csdn.net/" target="_blank">移动</a></li>
<li><a href="http://cloud.csdn.net/" target="_blank">云计算</a></li>
<li><a href="http://sd.csdn.net/" target="_blank">研发</a></li>
<li><a href="http://bbs.csdn.net/" target="_blank">论坛</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">博客</a></li>
<li><a href="http://download.csdn.net/" target="_blank">下载</a></li>
<li><h2 id="-"><a href="">更多</a></h2>
</li>
</ul>
<h1 id="-david-dai-focus-on-oracle-http-blog-csdn-net-tianlesoftware-"><a href="http://blog.csdn.net/tianlesoftware" target="_blank">David Dai -- Focus on Oracle</a></h1>
<h2 id="the-important-thing-in-life-is-to-have-a-great-aim-and-the-determination-to-attain-it-">The important thing in life is to have a great aim ,and the determination to attain it！</h2>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware?viewmode=contents" target="_blank"><img src="" alt="">目录视图</a></li>
<li><a href="http://blog.csdn.net/tianlesoftware?viewmode=list" target="_blank"><img src="" alt="">摘要视图</a></li>
<li><a href="http://blog.csdn.net/tianlesoftware/rss/list" target="_blank"><img src="" alt="">订阅</a>
<a href="https://code.csdn.net/blog/12" target="_blank">公告：博客新增直接引用代码功能</a>        <a href="http://www.csdn.net/article/2013-08-06/2816471" target="_blank">专访李铁军：从医生到金山首席安全专家的转变</a>      <a href="http://blog.csdn.net/csdnproduct/article/details/9495139" target="_blank">CSDN博客频道自定义域名、标签搜索功能上线啦！</a>      <a href="http://blog.csdn.net/adali/article/details/9813651" target="_blank">独一无二的职位：开源社区经理</a></li>
</ul>
<h3 id="-oracle-parallel-execution-"><a href="">Oracle Parallel Execution(并行执行)</a></h3>
<p>分类： <a href="http://blog.csdn.net/tianlesoftware/article/category/706520" target="_blank">Oracle Advanced Knowledge</a> <a href="http://blog.csdn.net/tianlesoftware/article/category/668807" target="_blank">Oracle Performance</a>  2010-09-01 02:20 14688人阅读 <a href="">评论</a>(7) <a href="&quot;收藏&quot;">收藏</a> <a href="&quot;举报&quot;">举报</a>
<a href="http://blog.csdn.net/tag/details.html?tag=parallel" target="_blank">parallel</a><a href="http://blog.csdn.net/tag/details.html?tag=oracle" target="_blank">oracle</a><a href="http://blog.csdn.net/tag/details.html?tag=sql" target="_blank">sql</a><a href="http://blog.csdn.net/tag/details.html?tag=insert" target="_blank">insert</a><a href="http://blog.csdn.net/tag/details.html?tag=table" target="_blank">table</a><a href="http://blog.csdn.net/tag/details.html?tag=iterator" target="_blank">iterator</a></p>
<p>关于Oracle 的并行执行，Oracle 官方文档有详细的说明：</p>
<pre><code>                            Using Parallel Execution
</code></pre><p><a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel.htm#VLDBG010" target="_blank"><a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel.htm/#VLDBG010">http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel.htm/#VLDBG010</a></a></p>
<p>This chapter covers tuning in a parallel execution environment and discusses the following topics:</p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel001.htm#CACEEBJJ" target="_blank">Introduction to Parallel Execution</a></p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel002.htm#i1014083" target="_blank">How Parallel Execution Works</a></p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel003.htm#CACBAABB" target="_blank">Types of Parallelism</a></p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel004.htm#i1007196" target="_blank">Initializing and Tuning Parameters for Parallel Execution</a></p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel005.htm#i1007962" target="_blank">Tuning General Parameters for Parallel Execution</a></p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel006.htm#i1008510" target="_blank">Monitoring Parallel Execution Performance</a></p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel007.htm#i1008847" target="_blank">Miscellaneous Parallel Execution Tuning Tips</a></p>
<p>一．     并行（Parallel）和OLAP系统</p>
<p>并行的实现机制是： 首先，Oracle 会创建一个进程用于协调并行服务进程之间的信息传递，这个协调进程将需要操作的数据集（比如表的数据块）分割成很多部分，称为并行处理单元，然后并行协调进程给每个并行进程分配一个数据单元。比如有四个并行服务进程，他们就会同时处理各自分配的单元，当一个并行服务进程处理完毕后，协调进程就会给它们分配另外的单元，如此反复，直到表上的数据都处理完毕，最后协调进程负责将每个小的集合合并为一个大集合作为最终的执行结果，返回给用户。</p>
<p>并行处理的机制实际上就是把一个要扫描的数据集分成很多小数据集，Oracle 会启动几个并行服务进程同时处理这些小数据集，最后将这些结果汇总，作为最终的处理结果返回给用户。</p>
<p>这种数据并行处理方式在OLAP系统中非常有用，OLAP系统的表通常来说都是非常大，如果系统的CPU比较多，让所有的CPU共同来处理这些数据，效果就会比串行执行要高的多。</p>
<p>然而对于OLTP系统，通常来讲，并行并不合适，原因是OLTP系统上几乎在所有的SQL操作中，数据访问路劲基本上以索引访问为主，并且返回结果集非常小，这样的SQL 操作的处理速度一般非常快，不需要启用并行。</p>
<p>二． 并行处理的机制</p>
<pre><code>            当Oracle 数据库启动的时候，实例会根据初始化参数：

                            PARALLEL_MIN_SERVERS=n

            的值来预先分配n个并行服务进程，当一条SQL 被CBO判断为需要并行执行时发出SQL的会话进程变成并行协助进程，它按照并行执行度的值来分配进程服务器进程。



            首先协调进程会使用ORACLE 启动时根据参数： parallel_min_servers=n的值启动相应的并行服务进程，如果启动的并行服务器进程数不足以满足并行度要求的并行服务进程数，则并行协调进程将额外启动并行服务进程以提供更多的并行服务进程来满足执行的需求。 然后星星协调进程将要处理的对象划分成小数据片，分给并行服务进程处理；并行服务进程处理完毕后将结果发送给并行协调进程，然后由并行协调进程将处理结果汇总并发送给用户。



            刚才讲述的是一个并行处理的基本流程。 实际上，在一个并行执行的过程中，还存在着并行服务进程之间的通信问题。

            在一个并行服务进程需要做两件事情的时候，它会再启用一个进程来配和当前的进程完成一个工作，比如这样的一条SQL语句：

            Select /* from employees order by last_name;



            假设employees表中last_name 列上没有索引，并且并行度为4，此时并行协调进程会分配4个并行服务进程对表employees进行全表扫描操作，因为需要对结果集进行排序，所以并行协调进程会额外启用4个并行服务进程，用于处理4个进程传送过来的数据，这新启用的用户处理传递过来数据的进程称为父进程，用户传出数据（最初的4个并行服务进程）成为子进程，这样整个并行处理过程就启用了8个并行服务进程。 其中每个单独的并行服务进程的行为叫作并行的内部操作，而并行服务进程之间的数据交流叫做并行的交互操作。

            这也是有时我们发现并行服务进程数量是并行度的2倍，就是因为启动了并行服务父进程操作的缘故。
</code></pre><p>三. 读懂一个并行处理的执行计划</p>
<p>CREATE TABLE emp2 AS SELECT /* FROM employees;</p>
<p>ALTER TABLE emp2 PARALLEL 2;</p>
<p>EXPLAIN PLAN FOR</p>
<p>  SELECT SUM(salary) FROM emp2 GROUP BY department_id;</p>
<p>SELECT PLAN_TABLE_OUTPUT FROM TABLE(DBMS_XPLAN.DISPLAY());</p>
<hr>
<p>| Id  | Operation                | Name     | Rows  | Bytes | Cost (%CPU) |    TQ  |IN-OUT| PQ Distrib |</p>
<hr>
<p>|   0 | SELECT STATEMENT         |          |   107 |  2782 |     3 (34)  |        |      |            |</p>
<p>|   1 |  PX COORDINATOR          |          |       |       |             |        |      |            |</p>
<p>|   2 |   PX SEND QC (RANDOM)    | :TQ10001 |   107 |  2782 |     3 (34)  |  Q1,01 | P-&gt;S | QC (RAND)  |</p>
<p>|   3 |    HASH GROUP BY         |          |   107 |  2782 |     3 (34)  |  Q1,01 | PCWP |            |</p>
<p>|   4 |     PX RECEIVE           |          |   107 |  2782 |     3 (34)  |  Q1,01 | PCWP |            |</p>
<p>|   5 |      PX SEND HASH        | :TQ10000 |   107 |  2782 |     3 (34)  |  Q1,00 | P-&gt;P | HASH       |</p>
<p>|   6 |       HASH GROUP BY      |          |   107 |  2782 |     3 (34)  |  Q1,00 | PCWP |            |</p>
<p>|   7 |        PX BLOCK ITERATOR |          |   107 |  2782 |     2 (0)   |  Q1,00 | PCWP |            |</p>
<p>|   8 |         TABLE ACCESS FULL| EMP2     |   107 |  2782 |     2 (0)   |  Q1,00 | PCWP |            |</p>
<hr>
<p>The table EMP2 is scanned in parallel by one set of slaves while the aggregation for the GROUP BY is done by the second set. The PX BLOCK ITERATOR row source represents the splitting up of the table EMP2 into pieces so as to divide the scan workload between the parallel scan slaves. The PX SEND and PX RECEIVE row sources represent the pipe that connects the two slave sets as rows flow up from the parallel scan, get repartitioned through the HASH table queue, and then read by and aggregated on the top slave set. The PX SEND QC row source represents the aggregated values being sent to the QC in random (RAND) order. The PX COORDINATOR row source represents the QC or Query Coordinator which controls and schedules the parallel plan appearing below it in the plan tree.</p>
<pre><code>            上面这段文字是从Oracle 联机文档上荡下来的。
</code></pre><p><a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/ex_plan.htm#PFGRF94687" target="_blank"><a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/ex_plan.htm/#PFGRF94687">http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/ex_plan.htm/#PFGRF94687</a></a></p>
<p>通过执行计划，我们来看一下它的执行步骤：</p>
<pre><code>            （1）并行服务进程对EMP2表进行全表扫描。

            （2）并行服务进程以ITERATOR（迭代）方式访问数据块，也就是并行协调进程分给每个并行服务进程一个数据片，在这个数据片上，并行服务进程顺序地访问每个数据块（Iterator），所有的并行服务进程将扫描的数据块传给另一组并行服务进程（父进程）用于做Hash Group操作。

            （3）并行服务父进程对子进程传递过来的数据做Hash Group操作。

            （4）并行服务进程（子进程）将处理完的数据发送出去。

            （5）并行服务进程（父进程）接收到处理过的数据。

            （6）合并处理过的数据，按照随即的顺序发给并行协调进程（QC：Query Conordinator）。

            （7）并行协调进程将处理结果发给用户。
</code></pre><p>当使用了并行执行，SQL的执行计划中就会多出一列：in-out。 该列帮助我们理解数据流的执行方法。 它的一些值的含义如下：</p>
<p>Parallel to Serial（P-&gt;S）: 表示一个并行操作发送数据给一个串行操作，通常是并行incheng将数据发送给并行调度进程。</p>
<p>Parallel to Parallel（P-&gt;P）：表示一个并行操作向另一个并行操作发送数据，疆场是两个从属进程之间的数据交流。</p>
<p>Parallel Combined with parent(PCWP): 同一个从属进程执行的并行操作，同时父操作也是并行的。</p>
<p>Parallel Combined with Child(PCWC): 同一个从属进程执行的并行操作，子操作也是并行的。</p>
<p>Serial to Parallel（S-&gt;P）: 一个串行操作发送数据给并行操作，如果select 部分是串行操作，就会出现这个情况。</p>
<p>四．并行执行等待事件</p>
<pre><code>            在做并行执行方面的性能优化的时候，可能会遇到如下等待时间：

                            PX Deq Credit: send blkd

            这是一个有并行环境的数据库中，从statspack 或者AWR中经常可以看到的等待事件。 在Oracle 9i 里面， 这个等待时间被列入空闲等待。 关于等待时间参考：

            Oracle 常见的33个等待事件

            [http://blog.csdn.net/tianlesoftware/archive/2010/08/12/5807800.aspx](http://blog.csdn.net/tianlesoftware/archive/2010/08/12/5807800.aspx)
</code></pre><p>一般来说空闲等待可以忽略它，但是实际上空闲等待也是需要关注的，因为一个空闲的等待，它反映的是另外的资源已经超负荷运行了。 基于这个原因，在Oracle 10g里已经把PX Deq Credit: send blkd等待时间不在视为空闲等待，而是列入了Others 等待事件范围。</p>
<p>PX Deq Credit: send blkd 等待事件的意思是： 当并行服务进程向并行协调进程QC（也可能是上一层的并行服务进程）发送消息时，同一时间只有一个并行服务进程可以向上层进程发送消息，这时候如果有其他的并行服务进程也要发送消息，就只能等待了。 知道获得一个发送消息的信用信息（Credit），这时候会触发这个等待事件，这个等待事件的超时时间为2秒钟。</p>
<pre><code>            如果我们启动了太多的并行进程，实际上系统资源（CPU）或者QC 无法即时处理并行服务发送的数据，那么等待将不可避免。 对于这种情况，我们就需要降低并行处理的并行度。



            当出现PX Deq Credit：send blkd等待的时间很长时，我们可以通过平均等待时间来判断等待事件是不是下层的并行服务进程空闲造成的。该等待事件的超时时间是2秒，如果平均等待时间也差不多是2秒，就说明是下层的并行进程“无事所做”，处于空闲状态。 如果和2秒的差距很大，就说明不是下层并行服务超时导致的空闲等待，而是并行服务之间的竞争导致的，因为这个平均等待事件非常短，说明并行服务进程在很短时间的等待之后就可以获取资源来处理数据。
</code></pre><p>所以对于非下层的并行进程造成的等待，解决的方法就是降低每个并行执行的并行度，比如对象（表，索引）上预设的并行度或者查询Hint 指定的并行度。</p>
<p>五． 并行执行的使用范围</p>
<p>Oracle的并行技术在下面的场景中可以使用：</p>
<p>（1）       Parallel Query（并行查询）</p>
<p>（2）       Parallel DDL（并行DDL操作，如建表，建索引等）</p>
<p>（3）       Parallel DML（并行DML操作，如insert，update，delete等）</p>
<p>5.1 并行查询</p>
<pre><code>            并行查询可以在查询语句，子查询语句中使用，但是不可以使用在一个远程引用的对象上（如DBLINK）。



            一个查询能够并行执行，需要满足一下条件：
</code></pre><p>（1）       SQL语句中有Hint提示，比如Parallel 或者 Parallel_index.</p>
<p>（2）       SQL语句中引用的对象被设置了并行属性。</p>
<p>（3）       多表关联中，至少有一个表执行全表扫描（Full table scan）或者跨分区的Index range SCAN。</p>
<p>如： select  //<em>+parallel(t 4) /</em> from t;</p>
<p>5.2 并行DDL 操作</p>
<p>5.2.1 表操作的并行执行</p>
<pre><code>            以下表操作可以使用并行执行：
</code></pre><p>CREATE TABLE … AS SELECT</p>
<pre><code>   ALTER TABLE … move partition

   Alter table … split partition

   Alter table … coalesce partition
</code></pre><p>DDL操作，我们可以通过trace 文件来查看它的执行过程。</p>
<p>示例：</p>
<p>查看当前的trace 文件：</p>
<p><em>//</em> Formatted on 2010/8/31 23:33:00 (QP5 v5.115.810.9015) /<em>/</em></p>
<p>SELECT      u_dump.VALUE</p>
<pre><code>     || &#39;/&#39;

     || db_name.VALUE

     || &#39;_ora_&#39;

     || v$process.spid

     || NVL2 (v$process.traceid, &#39;_&#39; || v$process.traceid, NULL)

     || &#39;.trc&#39;

        &quot;Trace File&quot;
</code></pre><p>  FROM            v$parameter u_dump</p>
<pre><code>           CROSS JOIN

              v$parameter db_name

        CROSS JOIN

           v$process

     JOIN

        v$session

     ON v$process.addr = v$session.paddr
</code></pre><p> WHERE       u_dump.name = &#39;user_dump_dest&#39;</p>
<pre><code>     AND db_name.name = &#39;db_name&#39;

     AND v$session.audsid = SYS_CONTEXT (&#39;userenv&#39;, &#39;sessionid&#39;);
</code></pre><p>Trace File</p>
<hr>
<p>d:/app/administrator/diag/rdbms/orcl/orcl/trace/orcl_ora_5836.trc</p>
<p>d:/app/administrator/diag/rdbms/orcl/orcl/trace/orcl_ora_3048.trc</p>
<p>SQL&gt; alter session set events &#39;10046 trace name context forever,level 12&#39;;</p>
<p>会话已更改。</p>
<p>SQL&gt; create table 怀宁 parallel 4 as select /* from dba_objects;</p>
<p>表已创建。</p>
<p>SQL&gt; alter session set events &#39;10046 trace name context off&#39; ;</p>
<p>会话已更改。</p>
<p>这里用到了ORACLE的event 时间。 10046事件是用来跟踪SQL语句的。开启事件后，相关的信息会写道trace 文件中，这也是之前我们查看trace 文件名的原因。 关于event事件，参考我的blog：</p>
<pre><code>            Oracle 跟踪事件 set event

            [http://blog.csdn.net/tianlesoftware/archive/2009/12/13/4977827.aspx](http://blog.csdn.net/tianlesoftware/archive/2009/12/13/4977827.aspx)
</code></pre><p>有了trace文件， 我们可以用tkprof 工具，来查看trace 文件的内容。 关于tkprof 工具介绍，参考blog：</p>
<pre><code>            使用 Tkprof 分析 ORACLE 跟踪文件

            [http://blog.csdn.net/tianlesoftware/archive/2010/05/29/5632003.aspx](http://blog.csdn.net/tianlesoftware/archive/2010/05/29/5632003.aspx)
</code></pre><p>进入trace 目录，用tkprof命令生成txt 文件，然后查看txt 文件。</p>
<p>d:/app/Administrator/diag/rdbms/orcl/orcl/trace&gt;tkprof orcl_ora_3048.trc 安庆.txt sys=no</p>
<p>TKPROF: Release 11.2.0.1.0 - Development on 星期二 8月 31 23:45:25 2010</p>
<p>Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.</p>
<p>d:/app/Administrator/diag/rdbms/orcl/orcl/trace&gt;</p>
<p>5.2.2 创建索引的并行执行</p>
<pre><code>            创建索引时使用并行方式在系统资源充足的时候会使性能得到很大的提高，特别是在OLAP系统上对一些很大的表创建索引时更是如此。 以下的创建和更改索引的操作都可以使用并行：

            Create index

            Alter index … rebuild

            Alter index … rebuild partition

            Alter index … split partition
</code></pre><p>一个简单的语法：create index t_ind on t(id) parallel 4;</p>
<p>监控这个过程和5.2.1 中表一样，需要通过10046事件。 这里就不多说了。</p>
<p>有关减少创建时间方法，参考blog：</p>
<pre><code>            如何加快建 index 索引 的时间

            [http://blog.csdn.net/tianlesoftware/archive/2010/07/11/5664019.aspx](http://blog.csdn.net/tianlesoftware/archive/2010/07/11/5664019.aspx)
</code></pre><hr>
<p>总结：</p>
<p>使用并行方式，不论是创建表，修改表，创建索引，重建索引，他们的机制都是一样的，那就是Oracle 给每个并行服务进程分配一块空间，每个进程在自己的空间里处理数据，最后将处理完毕的数据汇总，完成SQL的操作。</p>
<p>5.3 并行DML 操作</p>
<pre><code>            Oracle 可以对DML操作使用并行执行，但是有很多限制。 如果我们要让DML 操作使用并行执行，必须显示地在会话里执行如下命令：

            SQL&gt; alter session enable parallel dml;
</code></pre><p>会话已更改。</p>
<pre><code>            只有执行了这个操作，Oracle 才会对之后符合并行条件的DML操作并行执行，如果没有这个设定，即使SQL中指定了并行执行，Oracle也会忽略它。
</code></pre><p>5.3.1 delete，update和merge 操作</p>
<pre><code>            Oracle 对Delete,update,merge的操作限制在，只有操作的对象是分区表示，Oracle 才会启动并行操作。原因在于，对于分区表，Oracle 会对每个分区启用一个并行服务进程同时进行数据处理，这对于非分区表来说是没有意义的。
</code></pre><p>5.3.2 Insert 的并行操作</p>
<pre><code>            实际上只有对于insert into … select … 这样的SQL语句启用并行才有意义。 对于insert into .. values… 并行没有意义，因为这条语句本身就是一个单条记录的操作。



            Insert 并行常用的语法是：

                            Insert //*+parallel(t 2) /*/ into t select //*+parallel(t1 2) /*/ /* from t1;



            这条SQL 语句中，可以让两个操作insert 和select 分别使用并行，这两个并行是相互独立，互补干涉的，也可以单独使用其中的一个并行。
</code></pre><p>六． 并行执行的设定</p>
<p>6.1 并行相关的初始话参数</p>
<p>6.1.1 parallel_min_servers=n</p>
<pre><code>            在初始化参数中设置了这个值，Oracle 在启动的时候就会预先启动N个并行服务进程，当SQL执行并行操作时，并行协调进程首先根据并行度的值，在当前已经启动的并行服务中条用n个并行服务进程，当并行度大于n时，Oracle将启动额外的并行服务进程以满足并行度要求的并行服务进程数量。
</code></pre><p>6.1.2 parallel_max_servers=n</p>
<pre><code>            如果并行度的值大于parallel_min_servers或者当前可用的并行服务进程不能满足SQL的并行执行要求，Oracle将额外创建新的并行服务进程，当前实例总共启动的并行服务进程不能超过这个参数的设定值。
</code></pre><p>6.1.3 parallel_adaptive_multi_user=true|false</p>
<pre><code>            Oracle 10g R2下，并行执行默认是启用的。 这个参数的默认值为true，它让Oracle根据SQL执行时系统的负载情况，动态地调整SQL的并行度，以取得最好的SQL    执行性能。
</code></pre><p>6.1.4 parallel_min_percent</p>
<pre><code>            这个参数指定并行执行时，申请并行服务进程的最小值，它是一个百分比，比如我们设定这个值为50. 当一个SQL需要申请20个并行进程时，如果当前并行服务进程不足，按照这个参数的要求，这个SQL比如申请到20/*50%=10个并行服务进程，如果不能够申请到这个数量的并行服务，SQL 将报出一个ORA-12827的错误。

            当这个值设为Null时，表示所有的SQL在做并行执行时，至少要获得两个并行服务进程。
</code></pre><p>6.2 并行度的设定</p>
<pre><code>            并行度可以通过以下三种方式来设定：
</code></pre><p>（1）使用Hint 指定并行度。</p>
<p>（2）使用alter session force parallel 设定并行度。</p>
<p>（3）使用SQL中引用的表或者索引上设定的并行度，原则上Oracle 使用这些对象中并行度最高的那个值作为当前执行的并行度。</p>
<p>示例：</p>
<pre><code>            SQL&gt;Select //*+parallel(t 4) /*/ count(/*) from t;

            SQL&gt;Alter table t parallel 4;

            SQL&gt;Alter session force parallel query parallel 4;
</code></pre><p>Oracle 默认并行度计算方式：</p>
<p>（1）Oracle 根据CPU的个数，RAC实例的个数以及参数parallel_threads_per_cpu的值，计算出一个并行度。</p>
<p>（2）对于并行访问分区操作，取需要访问的分区数为并行度。</p>
<p>并行度的优先级别从高到低：</p>
<pre><code>            Hint-&gt;alter session force parallel-&gt;表，索引上的设定-&gt; 系统参数
</code></pre><p>实际上，并行只有才系统资源比较充足的情况下，才会取得很好的性能，如果系统负担很重，不恰当的设置并行，反而会使性能大幅下降。</p>
<p>七． 直接加载</p>
<pre><code>            在执行数据插入或者数据加载的时候，可以通过append hint的方式进行数据的直接加载。
</code></pre><p>在insert 的SQL中使用APPEND，如：</p>
<pre><code>                            Insert //*+append /*/ into t select /* from t1;
</code></pre><p>还可以在SQL/*LOADER里面使用直接加载：</p>
<pre><code>   Sqlldr userid=user/pwd control=load.ctl direct=true
</code></pre><p>Oracle 执行直接加载时，数据直接追加到数据段的最后，不需要花费时间在段中需找空间，数据不经过data buffer直接写到数据文件中，效率要比传统的加载方式高。</p>
<p>示例：</p>
<p>SQL&gt; create table t as select /* from user_tables;</p>
<p>表已创建。</p>
<p>SQL&gt; select segment_name,extent_id,bytes from user_extents where segment_name=&#39;T&#39;;</p>
<p>SEGMENT_NA  EXTENT_ID      BYTES</p>
<hr>
<p>T                   0      65536</p>
<p>T                   1      65536</p>
<p>T                   2      65536</p>
<p>T                   3      65536</p>
<p>T                   4      65536</p>
<p>这里我们创建了一张表，分配了5个extents。</p>
<p>SQL&gt; delete from t;</p>
<p>已删除979行。</p>
<p>SQL&gt; select segment_name,extent_id,bytes from user_extents where segment_name=&#39;T&#39;;</p>
<p>SEGMENT_NA  EXTENT_ID      BYTES</p>
<hr>
<p>T                   0      65536</p>
<p>T                   1      65536</p>
<p>T                   2      65536</p>
<p>T                   3      65536</p>
<p>T                   4      65536</p>
<p>这里删除了表里的数据，但是查询，依然占据5个extents。因为delete不会收缩表空间，不能降低高水位。</p>
<p>SQL&gt; insert into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>SQL&gt; commit;</p>
<p>提交完成。</p>
<p>SQL&gt; select segment_name,extent_id,bytes from user_extents where segment_name=&#39;T&#39;;</p>
<p>SEGMENT_NA  EXTENT_ID      BYTES</p>
<hr>
<p>T                   0      65536</p>
<p>T                   1      65536</p>
<p>T                   2      65536</p>
<p>T                   3      65536</p>
<p>T                   4      65536</p>
<p>用传统方式插入，数据被分配到已有的空闲空间里。</p>
<p>SQL&gt; delete from t;</p>
<p>已删除980行。</p>
<p>SQL&gt; commit;</p>
<p>提交完成。</p>
<p>SQL&gt; select segment_name,extent_id,bytes from user_extents where segment_name=&#39;T&#39;;</p>
<p>SEGMENT_NA  EXTENT_ID      BYTES</p>
<hr>
<p>T                   0      65536</p>
<p>T                   1      65536</p>
<p>T                   2      65536</p>
<p>T                   3      65536</p>
<p>T                   4      65536</p>
<p>删除数据，用append直接插入看一下。</p>
<p>SQL&gt; insert //<em>+append /</em>/ into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>SQL&gt; commit;</p>
<p>提交完成。</p>
<p>SQL&gt; select segment_name,extent_id,bytes from user_extents where segment_name=&#39;T&#39;;</p>
<p>SEGMENT_NA  EXTENT_ID      BYTES</p>
<hr>
<p>T                   0      65536</p>
<p>T                   1      65536</p>
<p>T                   2      65536</p>
<p>T                   3      65536</p>
<p>T                   4      65536</p>
<p>T                   5      65536</p>
<p>T                   6      65536</p>
<p>T                   7      65536</p>
<p>T                   8      65536</p>
<p>T                   9      65536</p>
<p>已选择10行。</p>
<p>从结果可以看出，直接加载方式时，虽然表中有很多空的数据块，Oracle 仍然会额外的分配4个extent用于直接加载数据。</p>
<pre><code>            直接加载的数据放在表的高水位（High water Mark：hwm）以上，当直接加载完成后，Oracle 将表的高水位线移到新加入的数据之后，这样新的数据就可以被用户使用了。
</code></pre><p>Oracle 高水位(HWM)</p>
<p><a href="http://blog.csdn.net/tianlesoftware/archive/2009/10/22/4707900.aspx" target="_blank"><a href="http://blog.csdn.net/tianlesoftware/archive/2009/10/22/4707900.aspx">http://blog.csdn.net/tianlesoftware/archive/2009/10/22/4707900.aspx</a></a></p>
<p>7.1 直接加载和REDO</p>
<pre><code>            直接加载在logging模式下，与传统加载方式产生的redo 日志差别不大，因为当一个表有logging属性时，即使使用直接加载，所有改变的数据依然要产生redo，实际上是所有修改的数据块全部记录redo，以便于以后的恢复，这时候直接加载并没有太大的优势。



            直接加载最常见的是和nologging一起使用，这时候可以有效地减少redo 的生成量。 注意的是，在这种情况下，直接加载的数据块是不产生redo的，只有一些其他改变的数据产生一些redo，比如表空间分配需要修改字典表或者修改段头数据块，这些修改会产生少量的redo。



            实际上，对于nologging 方式的直接加载，undo 的数据量也产生的很少，因为直接加载的数据并不会在回滚段中记录，这些记录位于高水位之上，在事务提交之前，对于其他用户来说是不可见的，所以不需要产生undo，事务提交时，Oracle 将表的高水位线移到新的数据之后，如果事务回滚，只需要保持高水位线不动即可，就好像什么都没有发生一样。



            注意，由于在nologging模式下，redo 不记录数据修改的信息，所以直接加载完后，需要立即进行相关的备份操作，因为这些数据没有记录在归档日志中，一旦数据损坏，只能用备份来恢复，而不能使用归档恢复。
</code></pre><p>Logging模式下示例：</p>
<p>SQL&gt; set autot trace stat;</p>
<p>SQL&gt; insert //<em>+append /</em>/ into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>    132  recursive calls

     87  db block gets

   8967  consistent gets

      0  physical reads

 286572  redo size

    911  bytes sent via SQL/*Net to client

   1017  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      2  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>SQL&gt; rollback;</p>
<p>回退已完成。</p>
<p>SQL&gt; insert into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>      0  recursive calls

    144  db block gets

   9027  consistent gets

      0  physical reads

 267448  redo size

    927  bytes sent via SQL/*Net to client

   1004  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      2  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>Nologging模式下示例：</p>
<p>SQL&gt; alter table t nologging;</p>
<p>表已更改。</p>
<p>SQL&gt; insert into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>    239  recursive calls

    132  db block gets

   9061  consistent gets

      0  physical reads

 262896  redo size

    927  bytes sent via SQL/*Net to client

   1004  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      7  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>SQL&gt; rollback;</p>
<p>回退已完成。</p>
<p>SQL&gt; insert //<em>+append /</em>/ into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>      8  recursive calls

     40  db block gets

   8938  consistent gets

      0  physical reads

    340  redo size  -- redo 减少很多

    911  bytes sent via SQL/*Net to client

   1017  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      2  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>这部分内容也可参考Blog：</p>
<pre><code>            Oracle DML NOLOGGING
</code></pre><p><a href="http://blog.csdn.net/tianlesoftware/archive/2010/07/11/5701596.aspx" target="_blank"><a href="http://blog.csdn.net/tianlesoftware/archive/2010/07/11/5701596.aspx">http://blog.csdn.net/tianlesoftware/archive/2010/07/11/5701596.aspx</a></a></p>
<p>7.2 直接加载和索引</p>
<pre><code>            如果直接加载的表上有索引，Oracle不会像加载数据的方式那样来处理索引的数据，但是它同样需要维护一个索引，这个成本很高，同时会生成很多的redo。

            所以当使用直接加载时，通常是针对一些数据量非常大的表。如果这些表存在索引，将会带来很大的性能影响，这时可以考虑先将索引disable或者drop掉，等加载数据后，之后在重新建立索引。
</code></pre><p>nologging示例：</p>
<p>SQL&gt; insert //<em>+append /</em>/ into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>      0  recursive calls

     40  db block gets

   8936  consistent gets

      0  physical reads

    384  redo size

    911  bytes sent via SQL/*Net to client

   1017  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      2  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>SQL&gt; rollback;</p>
<p>回退已完成。</p>
<p>SQL&gt; create index t_ind on t(table_name);</p>
<p>索引已创建。</p>
<p>SQL&gt; insert //<em>+append /</em>/ into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>     40  recursive calls

    170  db block gets

   8955  consistent gets

      4  physical reads

 149424  redo size

    911  bytes sent via SQL/*Net to client

   1017  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      3  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>SQL&gt; rollback;</p>
<p>回退已完成。</p>
<p>SQL&gt; insert  into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>      8  recursive calls

    828  db block gets

   9037  consistent gets

      0  physical reads

 382832  redo size

    927  bytes sent via SQL/*Net to client

   1005  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      2  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>SQL&gt; rollback;</p>
<p>回退已完成。</p>
<p>7.3 直接加载和并行</p>
<pre><code>            直接加载可以和并行执行一同使用，这样可以并行地向表中插入数据。 如：
</code></pre><p>SQL&gt;alter session enable parallel dml;  -- 这里必须显示的申明</p>
<p>SQL&gt;insert //<em>+append parallel(t,2) /</em>/ into t select /* from t1;</p>
<p>SQL&gt;insert //<em>+append /</em>/ into t select /* from t1;</p>
<p>注：在对insert 使用并行时，Oracle自动使用直接加载的方式进行数据加载，所以在这种情况下append是可以省略的。</p>
<pre><code>            当使用并行加载时，Oracle 会按照并行度启动相应数量的并行服务进程，像串行执行的直接加载的方式一样，每个并行服务进程都单独分配额外的空间用于加载数据，实际上Oracle 为每个并行服务进程分配了一个临时段，每个并行服务进程将数据首先加载到各自的临时段上，当所有的并行进程执行完毕后，将各自的数据块合并到一起，放到高水位之后，如果事务提交，则将高水位移到新加载的数据之后。
</code></pre><p>7.4 直接加载和SQL/*LOADER</p>
<pre><code>            在SQL/*LOADER中也可以使用直接加载，它比传统方式效率更高，因为它绕开了SQL的解析和数据缓冲区，直接将数据加载到数据文件，这对OLAP或者数据仓库系统非常有用。
</code></pre><p>指定加载：</p>
<pre><code>            Sqlldr userid=user/pwd control=control.ctl direct=true
</code></pre><p>指定并行和加载：</p>
<pre><code>            Sqlldr userid=user/pwd control=control.ctl direct=true parallel=true
</code></pre><p>SQL/*LOADER直接加载对索引的影响：</p>
<p>（1）索引为非约束性，直接加载可以在加载完毕后维护索引的完整性。</p>
<p>（2）索引为约束性索引，比如主键，直接加载仍然会将数据加载入库，但是会将索引置为unusable.</p>
<p>如果使用SQL/*LOADER的并行直接加载选项，并且表上有索引，将导致加载失败，这是我们可以在sqlloader中指定skip_index_maintenance=true, 来允许加载完成，但是索引状态会变成unusable，需要手工rebuild.</p>
<p>关于SQL/*LOADER的更多内容，参考blog：</p>
<pre><code>            Oracle SQL Loader

            [http://blog.csdn.net/tianlesoftware/archive/2009/10/16/4674063.aspx](http://blog.csdn.net/tianlesoftware/archive/2009/10/16/4674063.aspx)
</code></pre><hr>
<p>整理自《让Oracle 跑的更快》</p>
<hr>
<p>Blog： <a href="http://blog.csdn.net/tianlesoftware" target="_blank">http://blog.csdn.net/tianlesoftware</a></p>
<p>网上资源： <a href="http://tianlesoftware.download.csdn.net" target="_blank">http://tianlesoftware.download.csdn.net</a></p>
<p>相关视频：<a href="http://blog.csdn.net/tianlesoftware/archive/2009/11/27/4886500.aspx" target="_blank">http://blog.csdn.net/tianlesoftware/archive/2009/11/27/4886500.aspx</a></p>
<p>DBA1 群：62697716(满); DBA2 群：62697977(满)</p>
<p>DBA3 群：63306533;     聊天 群：40132017
分享到： <a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a></p>
<ul>
<li>上一篇：<a href="http://blog.csdn.net/tianlesoftware/article/details/5852106" target="_blank">Oracle 索引扫描的五种类型</a></li>
<li>下一篇：<a href="http://blog.csdn.net/tianlesoftware/article/details/5856430" target="_blank">Oracle 绑定变量 详解</a>
查看评论<a href=""></a></li>
</ul>
<p>7楼 <a href="http://blog.csdn.net/tiankui6658" target="_blank">tiankui6658</a> 2013-03-31 11:16发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/tiankui6658" target="_blank"><img src="" alt=""></a>简直就是官方教材啊6楼 <a href="http://blog.csdn.net/syzcch" target="_blank">syzcch</a> 2012-10-16 13:05发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/syzcch" target="_blank"><img src="" alt=""></a>总结的很到位啊5楼 <a href="http://blog.csdn.net/syzcch" target="_blank">syzcch</a> 2012-09-13 14:18发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/syzcch" target="_blank"><img src="" alt=""></a>| 0 | SELECT STATEMENT | | 107 | 2782 | 3 (34) | | |
| 1 | PX COORDINATOR | | | | | | |
| 2 | PX SEND QC (RANDOM) | :TQ10001 | 107 | 2782 | 3 (34) | Q1,01 | P-&gt;S | QC (RAND) |
| 3 | HASH GROUP BY | | 107 | 2782 | 3 (34) | Q1,01 | PCWP |
| 4 | PX RECEIVE | | 107 | 2782 | 3 (34) | Q1,01 | PCWP | |
| 5 | PX SEND HASH | :TQ10000 | 107 | 2782 | 3 (34) | Q1,00 | P-&gt;P | HASH
| 6 | HASH GROUP BY | | 107 | 2782 | 3 (34) | Q1,00 | PCWP |
| 7 | PX BLOCK ITERATOR | | 107 | 2782 | 2 (0) | Q1,00 | PCWP |
| 8 | TABLE ACCESS FULL| EMP2 | 107 | 2782 | 2 (0) | Q1,00 | PCWP |
在这个例子中，我觉得是有两组并行服务进程，分别用Q1，00和Q1,01来标注的吧 比如paralle（degree 4） 说明Q1,00是4个进程在跑，而Q1,01也是4个，他们的关系类似于生产者和消费者，请问这样理解对吗？ 谢谢！4楼 <a href="http://blog.csdn.net/scogeek" target="_blank">我个名叫麦兜_sco</a> 2012-02-14 15:44发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/scogeek" target="_blank"><img src="" alt=""></a>有空希望能把你的文章看完...3楼 <a href="http://blog.csdn.net/aimingl" target="_blank">aimingl</a> 2011-09-21 09:55发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/aimingl" target="_blank"><img src="" alt=""></a>牛人，顶一下；再学习。。。2楼 <a href="http://blog.csdn.net/gaopengtttt" target="_blank">gaopengtttt</a> 2011-07-20 11:56发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/gaopengtttt" target="_blank"><img src="" alt=""></a>bu cuo o1楼 <a href="http://blog.csdn.net/fendou1314" target="_blank">fendou1314</a> 2011-06-22 23:58发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/fendou1314" target="_blank"><img src="" alt=""></a>[e01][e01][e01][e03]
太棒了@！
您还没有登录,请<a href="">[登录]</a>或<a href="http://passport.csdn.net/account/register?from=http%3A%2F%2Fblog.csdn.net%2Ftianlesoftware%2Farticle%2Fdetails%2F5854583" target="_blank">[注册]</a></p>
<p>/* 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场<a href=""></a><a href=""></a>
<a href="&quot;回到顶部&quot;"><img src="" alt="TOP"></a></p>
<p>个人资料</p>
<p><a href="http://my.csdn.net/tianlesoftware" target="_blank"><img src="&quot;访问我的空间&quot;" alt=""></a>
<a href="http://my.csdn.net/tianlesoftware" target="_blank">Dave</a></p>
<p><a href="&quot;[加关注]&quot;"></a> <a href="&quot;[发私信]&quot;"></a>
<a href="http://medal.blog.csdn.net/allmedal.aspx" target="_blank"><img src="" alt=""></a><a href="http://medal.blog.csdn.net/allmedal.aspx" target="_blank"><img src="" alt=""></a><a href="http://medal.blog.csdn.net/allmedal.aspx" target="_blank"><img src="" alt=""></a></p>
<ul>
<li>访问：4265571次</li>
<li>积分：49439分</li>
<li><p>排名：第13名</p>
</li>
<li><p>原创：1009篇</p>
</li>
<li>转载：96篇</li>
<li>译文：1篇</li>
<li>评论：1481条</li>
</ul>
<p>文章搜索</p>
<p><a href=""></a></p>
<p>Dave&#39;s Links</p>
<ul>
<li>QQ:251097186</li>
<li>Email:tianlesoftware@gmail.com</li>
<li>Skype:tianlesoftware</li>
<li><a href="http://cn.linkedin.com/in/tianlesoftware" target="_blank">My LinkedIn</a></li>
<li><a href="http://www.facebook.com/tianlesoftware" target="_blank">My FaceBook</a></li>
<li><a href="http://twitter.com/tianlesoftware" target="_blank">My Twitter</a></li>
<li><a href="http://weibo.com/tianlesoftware" target="_blank">My Sina Weibo</a></li>
<li><a href="http://t.qq.com/tianlesoftware" target="_blank">My Tencent Weibo</a></li>
<li><p><a href="http://tongji.linezing.com/mystat.html" target="_blank">LineZing</a>
文章分类</p>
</li>
<li><p><a href="http://blog.csdn.net/tianlesoftware/article/category/684508" target="_blank">Dave 随笔</a>(39)</p>
</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/679087" target="_blank">Oracle Troubleshooting</a>(186)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/1092236" target="_blank">My Blog Summary</a>(14)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/1154895" target="_blank">Tools &amp; Scripts</a>(11)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/746816" target="_blank">IBM AIX</a>(35)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/569752" target="_blank">Linux</a>(96)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/668414" target="_blank">Storage</a>(19)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/657796" target="_blank">Network</a>(9)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/811179" target="_blank">MySQL</a>(14)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/915216" target="_blank">Oracle Exadata</a>(0)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/1076473" target="_blank">Oracle 12c</a>(1)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/799909" target="_blank">Oracle ASM</a>(85)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/700326" target="_blank">Oracle Data Guard</a>(38)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/776328" target="_blank">Oracle Golden Gate</a>(21)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/700327" target="_blank">Oracle RAC</a>(110)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/697504" target="_blank">Oracle RMAN</a>(45)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/729879" target="_blank">Oracle Stream</a>(2)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/804599" target="_blank">Oracle Timesten</a>(0)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/569751" target="_blank">Oracle Basic Knowledge</a>(222)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/706520" target="_blank">Oracle Advanced Knowledge</a>(190)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/698471" target="_blank">Oracle Backup &amp; Recovery</a>(14)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/719638" target="_blank">Oracle Developer</a>(22)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/714767" target="_blank">Oracle Certification</a>(9)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/668807" target="_blank">Oracle Performance</a>(87)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/1169693" target="_blank">System Architecture</a>(1)</li>
</ul>
<p>文章存档</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/08" target="_blank">2013年08月</a>(3)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/07" target="_blank">2013年07月</a>(8)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/06" target="_blank">2013年06月</a>(5)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/05" target="_blank">2013年05月</a>(1)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/04" target="_blank">2013年04月</a>(3)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/03" target="_blank">2013年03月</a>(7)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/02" target="_blank">2013年02月</a>(5)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/01" target="_blank">2013年01月</a>(4)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/12" target="_blank">2012年12月</a>(15)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/11" target="_blank">2012年11月</a>(23)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/10" target="_blank">2012年10月</a>(7)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/09" target="_blank">2012年09月</a>(5)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/08" target="_blank">2012年08月</a>(3)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/07" target="_blank">2012年07月</a>(21)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/06" target="_blank">2012年06月</a>(16)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/05" target="_blank">2012年05月</a>(9)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/04" target="_blank">2012年04月</a>(5)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/03" target="_blank">2012年03月</a>(26)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/02" target="_blank">2012年02月</a>(34)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/01" target="_blank">2012年01月</a>(7)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/12" target="_blank">2011年12月</a>(29)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/11" target="_blank">2011年11月</a>(37)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/10" target="_blank">2011年10月</a>(34)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/09" target="_blank">2011年09月</a>(26)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/08" target="_blank">2011年08月</a>(24)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/07" target="_blank">2011年07月</a>(34)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/06" target="_blank">2011年06月</a>(45)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/05" target="_blank">2011年05月</a>(20)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/04" target="_blank">2011年04月</a>(96)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/03" target="_blank">2011年03月</a>(52)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/02" target="_blank">2011年02月</a>(30)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/01" target="_blank">2011年01月</a>(53)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/12" target="_blank">2010年12月</a>(56)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/11" target="_blank">2010年11月</a>(42)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/10" target="_blank">2010年10月</a>(23)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/09" target="_blank">2010年09月</a>(29)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/08" target="_blank">2010年08月</a>(26)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/07" target="_blank">2010年07月</a>(26)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/06" target="_blank">2010年06月</a>(22)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/05" target="_blank">2010年05月</a>(18)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/04" target="_blank">2010年04月</a>(24)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/03" target="_blank">2010年03月</a>(25)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/02" target="_blank">2010年02月</a>(11)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/01" target="_blank">2010年01月</a>(14)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2009/12" target="_blank">2009年12月</a>(25)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2009/11" target="_blank">2009年11月</a>(30)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2009/10" target="_blank">2009年10月</a>(47)</li>
</ul>
<p>展开
国外技术链接</p>
<ul>
<li><a href="http://www.ixora.com.au/notes/" target="_blank">ixora</a></li>
<li><a href="http://dioncho.wordpress.com/" target="_blank">dioncho</a></li>
<li><a href="http://www.oradba.ch/" target="_blank">OraDBA</a></li>
<li><a href="http://gavinsoorma.com/" target="_blank">Gavin Soorma</a></li>
<li><a href="http://www.oracle-base.com/" target="_blank">oracle-base</a></li>
<li><a href="http://www.oracle-developer.net/" target="_blank">oracle-developer</a></li>
<li><a href="http://www.databasejournal.com/" target="_blank">databasejournal</a></li>
<li><a href="http://www.juliandyke.com/" target="_blank">Julian Dyke</a></li>
<li><a href="http://jonathanlewis.wordpress.com/" target="_blank">Jonathan Lewis(Oracle Core)</a></li>
<li><a href="http://www.oracle-scripts.net/" target="_blank">oracle-scripts</a></li>
<li><a href="http://www.oaktable.net/" target="_blank">oaktable</a></li>
</ul>
<p>官网链接</p>
<ul>
<li><a href="https://edelivery.oracle.com/" target="_blank">E-Delivery</a></li>
<li><a href="http://public-yum.oracle.com/" target="_blank">Oracle Public-Yum</a></li>
<li><a href="http://tahiti.oracle.com/" target="_blank">Oracle Documents</a></li>
<li><a href="http://dev.mysql.com/doc/" target="_blank">MySQL Documents</a></li>
<li><a href="http://download.oracle.com/docs/cd/E22355_01/index.htm" target="_blank">GG Documents</a></li>
<li><a href="http://www.oracle.com/technology/deploy/security/alerts.htm" target="_blank">ORACLE CPU（Critical Patch Update）</a></li>
<li><a href="http://wiki.oracle.com/page/Patchset Number Overview" target="_blank">Patchset Number Overview</a></li>
<li><a href="http://www.oracle.com/technology/software/products/database/index.html" target="_blank">Oracle 10g/11g 下载</a></li>
<li><a href="http://www.unix-center.net/" target="_blank">Unix-Center</a></li>
<li><a href="http://www.ibm.com/developerworks/library/" target="_blank">IBM Technical library</a></li>
<li><a href="http://www-900.ibm.com/cn/support/viewdoc/knowledgebase" target="_blank">IBM 技术知识库</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/aix/aixcert/" target="_blank">IBM AIX 认证专题</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/" target="_blank">IBM DeveloperWorks</a></li>
<li><a href="http://www.idevelopment.info/" target="_blank">idevelopment</a></li>
<li><p><a href="http://education.oracle.com/education/otn/" target="_blank">OCM 查询</a>
国内技术链接</p>
</li>
<li><p><a href="http://warehouse.itpub.net/" target="_blank">warehouse</a></p>
</li>
<li><a href="http://dbsnake.com/" target="_blank">dbsnake</a></li>
<li><a href="http://www.eygle.com/" target="_blank">eygle</a></li>
<li><a href="http://www.dbanotes.net/" target="_blank">冯大辉(Fenng)</a></li>
<li><a href="http://www.hellodb.net/" target="_blank">HelloDBA</a></li>
<li><a href="http://www.dbform.com/" target="_blank">Kamus</a></li>
<li><a href="http://hi.baidu.com/edeed/blog" target="_blank">骨骨</a></li>
<li><a href="http://space.itpub.net/7199859/spacelist-blog" target="_blank">paul</a></li>
<li><a href="http://www.killdb.com/" target="_blank">Roger</a></li>
<li><a href="http://www.oracledatabase12g.com/" target="_blank">Maclean</a></li>
<li><a href="http://www.laoxiong.net/" target="_blank">老 熊</a></li>
<li><a href="http://tomszrp.itpub.net/" target="_blank">Tomas Zhang</a></li>
<li><a href="http://www.ixora.com.au/notes/" target="_blank">ixora</a></li>
<li><a href="http://tianlesoftware.wordpress.com/" target="_blank">tianlesoftware</a></li>
<li><a href="http://www.anysql.net/" target="_blank">d.c.b.a</a></li>
<li><a href="http://www.xifenfei.com/" target="_blank">xifenfei</a></li>
<li><a href="http://www.ludatou.com/" target="_blank">Ludatou</a></li>
<li><a href="http://blog.csdn.net/robinson1988" target="_blank">robinson1988</a></li>
<li><a href="http://isky000.com/" target="_blank">简朝阳</a></li>
<li><a href="http://www.mysqlops.com/" target="_blank">mysqlops</a></li>
<li><a href="http://www.zhihong.org/" target="_blank">数据工人（boypoo）</a></li>
<li><a href="http://www.database-consultant.net/" target="_blank">Jerry Wu</a></li>
<li><a href="http://www.mythdata.com/" target="_blank">文本时代</a></li>
<li><a href="http://www.d-zero.com.cn/" target="_blank">d-zero</a></li>
<li><a href="http://blog.csdn.net/huangchao_sky" target="_blank">道道</a></li>
<li><a href="http://blog.csdn.net/laven54" target="_blank">邓伟</a></li>
</ul>
<p>最新评论</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/5547565#comments" target="_blank">Oracle Data Guard Linux 平台 Physical Standby 搭建实例</a></li>
</ul>
<p><a href="http://blog.csdn.net/wdnq1022" target="_blank">SP1022</a>: 大哥，在主库执行startup pfile=&#39;/home/oracle/product/10.2.0...</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/9468081#comments" target="_blank">2013年7月22日 匆匆</a></li>
</ul>
<p><a href="http://blog.csdn.net/chen0032" target="_blank">暖爱_晨</a>: @chen0032:如果细想这个世界什么东西跟我们有关，那就只有感激每天的生活</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/9468081#comments" target="_blank">2013年7月22日 匆匆</a></li>
</ul>
<p><a href="http://blog.csdn.net/chen0032" target="_blank">暖爱_晨</a>: 被突然的非技术类文章吸引，便决定关注lz!一篇在旅途的文章，一段追梦的旅程，一份难以割舍的亲情，一个...</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/4976998#comments" target="_blank">Oracle Rman 命令详解(List report backup configure)</a></li>
</ul>
<p><a href="http://blog.csdn.net/bule2011orange" target="_blank">bule2011orange</a>: 很详细，谢谢dave</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/9468081#comments" target="_blank">2013年7月22日 匆匆</a></li>
</ul>
<p><a href="http://blog.csdn.net/houxp666" target="_blank">houxp666</a>: 文笔真不错，淡而美</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/7241488#comments" target="_blank">Oracle Data Guard 支持的异构平台 说明</a></li>
</ul>
<p><a href="http://blog.csdn.net/enward" target="_blank">Enward</a>: 很好，很强大，学些了</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/7335660#comments" target="_blank">Dave Oracle 学习 手册 第一版 下载 说明</a></li>
</ul>
<p><a href="http://blog.csdn.net/Theven" target="_blank">Theven</a>: @mn900809:哦？我还是下载完，不能打开。你那个要是能打开，给我发一份吧！邮箱：aolin.w...</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/7335660#comments" target="_blank">Dave Oracle 学习 手册 第一版 下载 说明</a></li>
</ul>
<p><a href="http://blog.csdn.net/mn900809" target="_blank">mn900809</a>: 我下载下来了 您现在有没？ 需要给您发送一份么？</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/5642883#comments" target="_blank">Linux 下挂载硬盘的 方法</a></li>
</ul>
<p><a href="http://blog.csdn.net/u010148545" target="_blank">已经擦肩而过</a>: 不错啊，但有的我的自启动怎么是这样的啊？UUID=f5c84165-6890-470f-b731-d...</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/8741873#comments" target="_blank">Linux SWAP 交换分区配置说明</a></li>
</ul>
<p><a href="http://blog.csdn.net/zhanglu668" target="_blank">zhanglu668</a>: @liyoubaidu:swap就是交换的意思，这里都指的是交换分区。
阅读排行</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/4915223" title="Oracle 字符集的查看和修改" target="_blank">Oracle 字符集的查看和修改</a>(118984)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/5315039" title="Linux Crontab 定时任务 命令详解" target="_blank">Linux Crontab 定时任务 命令详解</a>(108658)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/5347098" title="Oracle  索引 详解" target="_blank">Oracle 索引 详解</a>(38296)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/6278273" title="Linux awk 命令 说明" target="_blank">Linux awk 命令 说明</a>(33921)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/4699320" title="RMAN 备份与恢复 实例" target="_blank">RMAN 备份与恢复 实例</a>(29596)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/4787074" title="有关 ORA-00604 错误的总结" target="_blank">有关 ORA-00604 错误的总结</a>(28877)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/4717318" title="Oracle 分区表  总结" target="_blank">Oracle 分区表 总结</a>(26157)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/4682300" title="Oracle AWR（Automatic Workload Repository） 说明" target="_blank">Oracle AWR（Automatic Workload Repository） 说明</a>(25712)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/5872593" title="Redhat 5.4 + ASM + RAW+ Oracle 10g  RAC 安装文档" target="_blank">Redhat 5.4 + ASM + RAW+ Oracle 10g RAC 安装文档</a>(24895)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/5314541" title="Oracle ASM 详解" target="_blank">Oracle ASM 详解</a>(22268)</li>
</ul>
<p><a href="http://www.csdn.net/company/about.html" target="_blank">公司简介</a>|<a href="http://www.csdn.net/company/recruit.html" target="_blank">招贤纳士</a>|<a href="http://www.csdn.net/company/marketing.html" target="_blank">广告服务</a>|<a href="http://www.csdn.net/company/account.html" target="_blank">银行汇款帐号</a>|<a href="http://www.csdn.net/company/contact.html" target="_blank">联系方式</a>|<a href="http://www.csdn.net/company/statement.html" target="_blank">版权声明</a>|<a href="http://www.csdn.net/company/layer.html" target="_blank">法律顾问</a>|<a href="mailto:webmaster@csdn.net">问题报告</a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=2355263776&amp;site=qq&amp;menu=yes" target="_blank">QQ客服</a> <a href="http://e.weibo.com/csdnsupport/profile" target="_blank">微博客服</a> <a href="http://bbs.csdn.net/forums/Service" target="_blank">论坛反馈</a> <a href="mailto:webmaster@csdn.net">联系邮箱：webmaster@csdn.net</a> 服务热线：400-600-2320京 ICP 证 070598 号北京创新乐知信息技术有限公司 版权所有世纪乐知(北京)网络技术有限公司 提供技术支持江苏乐知网络技术有限公司 提供商务支持Copyright © 1999-2012, CSDN.NET, All Rights Reserved <a href="http://www.hd315.gov.cn/beian/view.asp?bianhao=010202001032100010" target="_blank"><img src="" alt="GongshangLogo"></a>
<img src="http://counter.csdn.net/pv.aspx?id=24" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/oracle/">oracle</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/oracle/" class="label label-success">oracle</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:34"datetime="2014-03-07 09:54:34"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-oracle--OracleParallelExecution并行执行/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-oracle--OracleParallelExecution并行执行" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-oracle--oracle的表空间，分区表，以及索引的总结_开拓者_百度空间2/">oracle的表空间，分区表，以及索引的总结_开拓者_百度空间 (2)</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:34.000Z"> <a href="/2014/02/02/2014-02-02-DB-oracle--oracle的表空间，分区表，以及索引的总结_开拓者_百度空间2/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="oracle-_-_-2-">oracle的表空间，分区表，以及索引的总结<em>开拓者</em>百度空间 (2)</h1>
<h3 id="-">分享到</h3>
<ul>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">QQ空间</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">新浪微博</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">百度搜藏</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">人人网</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">腾讯微博</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">开心网</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">腾讯朋友</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">百度空间</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">豆瓣网</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">搜狐微博</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">百度新首页</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">QQ收藏</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">和讯微博</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">我的淘宝</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">百度贴吧</a></li>
<li><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">更多...</a></li>
</ul>
<p><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">百度分享</a></p>
<p><a href="http://hi.baidu.com/"></a></p>
<ul>
<li><a href="http://hi.baidu.com/index" target="_blank">广场</a></li>
<li><a href="https://passport.baidu.com/center" target="_blank">jywv</a>
*</li>
<li><a href="https://passport.baidu.com/?logout&amp;bdstoken=aa9855a9aad4216b27441b12182ad1a7&amp;u=http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3" target="_blank">退出</a>
<a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">关注此空间</a><h1 id="-http-hi-baidu-com-new-cnbxj-"><a href="http://hi.baidu.com/new/cnbxj" target="_blank">开拓者</a></h1>
</li>
</ul>
<p>开拓者</p>
<p>2008-06-02 22:46</p>
<h2 id="oracle-">oracle的表空间，分区表，以及索引的总结</h2>
<p>表空间：
Oracle的UNDOTBS01.DBF文件太大的解决办法
1、.禁止undo tablespace自动增长
alter database datafile &#39;full_path\undotbs01.dbf&#39; autoextend off;
2.-- 创建一个新的小空间的undo tablespace
create undo tablespace undotBS2 datafile &#39;full_path\UNDOTBS02.DBF&#39; size 100m;
-- 设置新的表空间为系统undo_tablespace
alter system set undo_tablespace=undotBS2;
-- Drop 旧的表空间
drop tablespace undotbs1 including contents;
--查看所有表空间的情况
select /<em> from dba_tablespaces
--创建表空间
create tablespace HRPM0
datafile &#39;/oradata/misdb/HRPM0.DBF&#39; size 5m autoextend on next 10m maxsize unlimited
--删除表空间
DROP TABLESPACE data01 INCLUDING CONTENTS AND DATAFILES;
--修改表空间大小
alter database datafile &#39;/path/NADDate05.dbf&#39; resize 100M
分区表：
当表中的数据量不断增大，查询数据的速度就会变慢，应用程序的性能就会下降，这时就应该考虑对表进行分区。表进行分区后，逻辑上表仍然是一张完整的表，只是将表中的数据在物理上存放到多个表空间(物理文件上)，这样查询数据时，不至于每次都扫描整张表。
Oracle中提供了以下几种表分区：
一、范围分区：这种类型的分区是使用列的一组值，通常将该列成为分区键。
示例1：假设有一个CUSTOMER表，表中有数据200000行，我们将此表通过CUSTOMER_ID进行分区，每个分区存储100000行，我们将每个分区保存到单独的表空间中，这样数据文件就可以跨越多个物理磁盘。下面是创建表和分区的代码，如下：
CREATE TABLE CUSTOMER
(
CUSTOMER_ID NUMBER NOT NULL PRIMARY KEY,
FIRST_NAME VARCHAR2(30) NOT NULL,
LAST_NAME VARCHAR2(30) NOT NULL,
PHONE VARCHAR2(15) NOT NULL,
EMAIL VARCHAR2(80),
STATUS CHAR(1)
)
PARTITION BY RANGE (CUSTOMER_ID)
(
PARTITION CUS_PART1 VALUES LESS THAN (100000) TABLESPACE CUS_TS01,
PARTITION CUS_PART2 VALUES LESS THAN (200000) TABLESPACE CUS_TS02
)
注意：在创建表进行分区时，表空间必须先存在，而且建议将不同的分区放入不同的表空间中。
示例2：假设有ORDER_ACTIVITIES表，每6个月对订单进行清理，我们可以按月份对表进行分区，分区代码如下：
CREATE TABLE ORDER_ACTIVITIES
(
ORDER_ID NUMBER(7) NOT NULL,
ORDER_DATE DATE,
TOTAL_AMOUNT NUMBER,
CUSTOTMER_ID NUMBER(7),
PAID CHAR(1)
)
PARTITION BY RANGE (ORDER_DATE)
(
PARTITION ORD_ACT_PART01 VALUES LESS THAN (TO_DATE(&#39;01-MAY-2003&#39;,&#39;DD-MON-YYYY&#39;)) TABLESPACE ORD_TS01,
PARTITION ORD_ACT_PART02 VALUES LESS THAN (TO_DATE(&#39;01-JUN-2003&#39;,&#39;DD-MON-YYYY&#39;)) TABLESPACE ORD_TS02,
PARTITION ORD_ACT_PART02 VALUES LESS THAN (TO_DATE(&#39;01-JUL-2003&#39;,&#39;DD-MON-YYYY&#39;)) TABLESPACE ORD_TS03
)
二、列表分区：该分区的特点是某列的值只有几个，基于这样的特点我们可以采用列表分区。
示例1：
CREATE TABLE PROBLEM_TICKETS
(
PROBLEM_ID NUMBER(7) NOT NULL PRIMARY KEY,
DESCRIPTION VARCHAR2(2000),
CUSTOMER_ID NUMBER(7) NOT NULL,
DATE_ENTERED DATE NOT NULL,
STATUS VARCHAR2(20)
)
PARTITION BY LIST (STATUS)
(
PARTITION PROB_ACTIVE VALUES (&#39;ACTIVE&#39;) TABLESPACE PROB_TS01,
PARTITION PROB_INACTIVE VALUES (&#39;INACTIVE&#39;) TABLESPACE PROB_TS02
)
三、散列分区：这类分区是在列值上使用散列算法，以确定将行放入哪个分区中。当列的值没有合适的条件时，建议使用散列分区。请看下列示例：
示例1：
CREATE TABLE HASH_TABLE
(
COL NUMBER(8),
INF VARCHAR2(100)
)
PARTITION BY HASH (COL)
(
PARTITION PART01 TABLESPACE HASH_TS01,
PARTITION PART02 TABLESPACE HASH_TS02,
PARTITION PART03 TABLESPACE HASH_TS03
)
四、复合范围列表分区：这种分区是基于范围分区和列表分区，表首先按某列进行范围分区，然后再按某列进行列表分区，分区之中的分区被称为子分区。
示例1：
CREATE TABLE SALES
(
PRODUCT_ID VARCHAR2(5),
SALES_DATE DATE,
SALES_COST NUMBER(10),
STATUS VARCHAR2(20)
)
PARTITION BY RANGE(SALES_DATE)
SUBPARTITION BY LIST (STATUS)
(
PARTITION P1 VALUES LESS THAN (TO_DATE(&#39;2003-01-01&#39;,&#39;YYYY-MM-DD&#39;)) TABLESPACE P1_TS
(
SUBPARTITION P1SUB1 VALUES (&#39;ACTIVE&#39;) TABLESPACE SUBP1_TS1,
SUBPARTITION P1SUB2 VALUES (&#39;INACTIVE&#39;) TABLESPACE SUBP1_TS2
),
PARTITION P2 VALUES LESS THAN (TO_DATE(&#39;2003-03-01&#39;,&#39;YYYY-MM-DD&#39;)) TABLESPACE P2_TS
(
SUBPARTITION P2SUB1 VALUES (&#39;ACTIVE&#39;) TABLESPACE SUBP2_TS1,
SUBPARTITION P2SUB2 VALUES (&#39;INACTIVE&#39;) TABLESPACE SUBP2_TS2
)
)
示例2：使用TEMPLATE模板
CREATE TABLE SALES
(
PRODUCT_ID VARCHAR2(5),
SALES_DATE DATE,
SALES_COST NUMBER(10),
STATUS VARCHAR2(20)
)
PARTITION BY RANGE(SALES_DATE)
SUBPARTITION BY LIST (STATUS)
SUBPARTITION TEMPLATE
(
SUBPARTITION SUB1 VALUES (&#39;ACTIVE&#39;) TABLESPACE SUBP1_TS1,
SUBPARTITION SUB2 VALUES (&#39;INACTIVE&#39;) TABLESPACE SUBP2_TS2
)
(
PARTITION P1 VALUES LESS THAN (TO_DATE(&#39;2003-01-01&#39;,&#39;YYYY-MM-DD&#39;)) TABLESPACE P1_TS,
PARTITION P2 VALUES LESS THAN (TO_DATE(&#39;2003-03-01&#39;,&#39;YYYY-MM-DD&#39;)) TABLESPACE P2_TS
)
五、复合范围散列分区：这种分区是基于范围分区和散列分区，表首先按某列进行范围分区，然后再按某列进行散列分区。与上面的定义方式非常的类似，在此不单独举例。
表分区对于用户来说是透明的，我们在插入数据时Oracle会自动判断插入的数据，然后放入相应的表分区中。但有时我们想单独查询某个分区中的数据时，就必须手工指定分区的名称。
示例1：(此示例基于：四、复合范围列表分区的示例一)
向SALES表插入记录，不必指定表分区。
INSERT INTO SALES VALUES(&#39;00001&#39;,&#39;01-1月-02&#39;,100,&#39;ACTIVE&#39;)
/
INSERT INTO SALES VALUES(&#39;00002&#39;,&#39;01-1月-01&#39;,200,&#39;ACTIVE&#39;)
/
INSERT INTO SALES VALUES(&#39;00003&#39;,&#39;01-2月-03&#39;,300,&#39;INACTIVE&#39;)
/
INSERT INTO SALES VALUES(&#39;00004&#39;,&#39;04-2月-03&#39;,300,&#39;INACTIVE&#39;)
/
INSERT INTO SALES VALUES(&#39;00005&#39;,&#39;04-2月-02&#39;,300,&#39;INACTIVE&#39;)
/
不指定表分区查看SALES表信息：
SELECT /</em> FROM SALES; 结果如下所示：
指定P1表分区查询SALES表信息：
SELECT /<em> FROM SALES PARTITION(P1); 结果如下所示：
指定P1SUB1子分区查询SALES表信息:
SELECT /</em> FROM SALES SUBPARTITION(P1SUB1); 结果如下所示：
示例2：(此示例基于：四、复合范围列表分区的示例二)
示例2基于TEMPLATE模板的表分区，查询稍稍烦琐一点。
指定P1表分区查询SALES表信息：
SELECT /<em> FROM SALES PARTITION(P1); 结果如下所示,和刚才查询一致。
指定SUB1子分区查询SALES表信息:
SELECT /</em> FROM SALES SUBPARTITION(SUB1); 出现如下错误信息：
怎么解决以上问题呢？我们通过sys模式查看分区信息的数据字典,如下：
可以看出子分区不叫SUB1，而是P1_SUB1,重新查询信息，如下图所示：
有关表分区的一些维护性操作：
一、添加分区
以下代码给SALES表添加了一个P3分区
ALTER TABLE SALES ADD PARTITION P3 VALUES LESS THAN(TO_DATE(&#39;2003-06-01&#39;,&#39;YYYY-MM-DD&#39;));
注意：以上添加的分区界限应该高于最后一个分区界限。
以下代码给SALES表的P3分区添加了一个P3SUB1子分区
ALTER TABLE SALES MODIFY PARTITION P3 ADD SUBPARTITION P3SUB1 VALUES(&#39;COMPLETE&#39;);
二、删除分区
以下代码删除了P3表分区：
ALTER TABLE SALES DROP PARTITION P3;
在以下代码删除了P4SUB1子分区：
ALTER TABLE SALES DROP SUBPARTITION P4SUB1;
注意：如果删除的分区是表中唯一的分区，那么此分区将不能被删除，要想删除此分区，必须删除表。
三、截断分区
截断某个分区是指删除某个分区中的数据，并不会删除分区，也不会删除其它分区中的数据。当表中即使只有一个分区时，也可以截断该分区。通过以下代码截断分区：
ALTER TABLE SALES TRUNCATE PARTITION P2;
通过以下代码截断子分区：
ALTER TABLE SALES TRUNCATE SUBPARTITION P2SUB2;
四、合并分区
合并分区是将相邻的分区合并成一个分区，结果分区将采用较高分区的界限，值得注意的是，不能将分区合并到界限较低的分区。以下代码实现了P1 P2分区的合并：
ALTER TABLE SALES MERGE PARTITIONS P1,P2 INTO PARTITION P2;
五、拆分分区
拆分分区将一个分区拆分两个新分区，拆分后原来分区不再存在。注意不能对HASH类型的分区进行拆分。
ALTER TABLE SALES SBLIT PARTITION P2 AT(TO_DATE(&#39;2003-02-01&#39;,&#39;YYYY-MM-DD&#39;))
INTO (PARTITION P21,PARTITION P22);
六、接合分区(coalesca)
结合分区是将散列分区中的数据接合到其它分区中，当散列分区中的数据比较大时，可以增加散列分区，然后进行接合，值得注意的是，接合分区只能用于散列分区中。通过以下代码进行接合分区：
ALTER TABLE SALES COALESCA PARTITION;
七、重命名表分区
以下代码将P21更改为P2
ALTER TABLE SALES RENAME PARTITION P21 TO P2;
九、跨分区查询
select sum( /<em>) from (
(select count(/</em>) cn from t_table_SS PARTITION (P200709_1)
union all
select count(/<em>) cn from t_table_SS PARTITION (P200709_2));
十、查询表上有多少分区
SELECT /</em> FROM useR_TAB_PARTITIONS WHERE TABLE_NAME=&#39;tableName&#39;
十一、查询索引信息
select object_name,object_type,tablespace_name,sum(value)
from v$segment_statistics
where statistic_name IN (&#39;physical reads&#39;,&#39;physical write&#39;,&#39;logical reads&#39;)and object_type=&#39;INDEX&#39;
group by object_name,object_type,tablespace_name
order by 4 desc
--显示数据库所有分区表的信息：
select /<em> from DBA_PART_TABLES
--显示当前用户可访问的所有分区表信息:
select /</em> from ALL_PART_TABLES
--显示当前用户所有分区表的信息：
select /<em> from USER_PART_TABLES
--显示表分区信息 显示数据库所有分区表的详细分区信息：
select /</em> from DBA_TAB_PARTITIONS
--显示当前用户可访问的所有分区表的详细分区信息：
select /<em> from ALL_TAB_PARTITIONS
--显示当前用户所有分区表的详细分区信息：
select /</em> from USER_TAB_PARTITIONS
--显示子分区信息 显示数据库所有组合分区表的子分区信息：
select /<em> from DBA_TAB_SUBPARTITIONS
--显示当前用户可访问的所有组合分区表的子分区信息：
select /</em> from ALL_TAB_SUBPARTITIONS
--显示当前用户所有组合分区表的子分区信息：
select /<em> from USER_TAB_SUBPARTITIONS
--显示分区列 显示数据库所有分区表的分区列信息：
select /</em> from DBA_PART_KEY_COLUMNS
--显示当前用户可访问的所有分区表的分区列信息：
select /<em> from ALL_PART_KEY_COLUMNS
--显示当前用户所有分区表的分区列信息：
select /</em> from USER_PART_KEY_COLUMNS
--显示子分区列 显示数据库所有分区表的子分区列信息：
select /<em> from DBA_SUBPART_KEY_COLUMNS
--显示当前用户可访问的所有分区表的子分区列信息：
select /</em> from ALL_SUBPART_KEY_COLUMNS
--显示当前用户所有分区表的子分区列信息：
select /<em> from USER_SUBPART_KEY_COLUMNS
--怎样查询出oracle数据库中所有的的分区表
select /</em> from user_tables a where a.partitioned=&#39;YES&#39;
--删除一个表的数据是
truncate table table_name;
--删除分区表一个分区的数据是
alter table table_name truncate partition p5;
注：分区根据具体情况选择。
表分区有以下优点：
1、数据查询：数据被存储到多个文件上，减少了I/O负载，查询速度提高。
2、数据修剪：保存历史数据非常的理想。
3、备份：将大表的数据分成多个文件，方便备份和恢复。</p>
<h1 id="4-dml-">4、并行性：可以同时向表中进行DML操作，并行性性能提高。</h1>
<p>索引：
1、一般索引：
create index index_name on table(col_name);
2、Oracle 分区索引详解
语法：Table Index
CREATE [UNIQUE|BITMAP] INDEX [schema.]index_name
ON [schema.]table_name [tbl_alias]
(col [ASC | DESC]) index_clause index_attribs
index_clauses:
分以下两种情况</p>
<ol>
<li>Local Index
就是索引信息的存放位置依赖于父表的Partition信息，换句话说创建这样的索引必须保证父表是Partition
1.1 索引信息存放在父表的分区所在的表空间。但是仅可以创建在父表为HashTable或者composite分区表的。
LOCAL STORE IN (tablespace)
1.2 仅可以创建在父表为HashTable或者composite分区表的。并且指定的分区数目要与父表的分区数目要一致
LOCAL STORE IN (tablespace) (PARTITION [partition [LOGGING|NOLOGGING] [TABLESPACE {tablespace|DEFAULT}] [PCTFREE int] [PCTUSED int] [INITRANS int] [MAXTRANS int] [STORAGE storage_clause] [STORE IN {tablespace_name|DEFAULT] [SUBPARTITION [subpartition [TABLESPACE tablespace]]]])
1.3 索引信息存放在父表的分区所在的表空间，这种语法最简单，也是最常用的分区索引创建方式。
Local
1.4 并且指定的Partition 数目要与父表的Partition要一致
LOCAL (PARTITION [partition
[LOGGING|NOLOGGING]
[TABLESPACE {tablespace|DEFAULT}]
[PCTFREE int]
[PCTUSED int]
[INITRANS int]
[MAXTRANS int]
[STORAGE storage_clause]
[STORE IN {tablespace_name|DEFAULT]
[SUBPARTITION [subpartition [TABLESPACE tablespace]]]])
Global Index
索引信息的存放位置与父表的Partition信息完全不相干。甚至父表是不是分区表都无所谓的。语法如下：
GLOBAL PARTITION BY RANGE (col_list)
( PARTITION partition VALUES LESS THAN (value_list)
[LOGGING|NOLOGGING]
[TABLESPACE {tablespace|DEFAULT}]
[PCTFREE int]
[PCTUSED int]
[INITRANS int]
[MAXTRANS int]
[STORAGE storage_clause] )
但是在这种情况下，如果父表是分区表，要删除父表的一个分区都必须要更新Global Index ,否则索引信息不正确
ALTER TABLE TableName DROP PARTITION PartitionName Update Global Indexes
--查询索引
select object_name,object_type,tablespace_name,sum(value)
from v$segment_statistics
where statistic_name IN (&#39;physical reads&#39;,&#39;physical write&#39;,&#39;logical reads&#39;)and object_type=&#39;INDEX&#39;
group by object_name,object_type,tablespace_name
order by 4 desc
<a href="http://hi.baidu.com/tag/Oracle/feeds" target="_blank">/#Oracle</a></li>
</ol>
<p>分享到： <a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" title="分享到QQ空间" target="_blank"></a> <a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" title="分享到新浪微博"></a> <a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" title="分享到腾讯微博" target="_blank"></a> <a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" title="分享到人人网"></a></p>
<p><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">举报</a> 浏览(64) <a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">评论</a> <a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">转载</a></p>
<h3 id="-">您可能也喜欢</h3>
<p><a href="http://hi.baidu.com/cnbxj/item/7e7a9de4639d4ab72f140be7" title="上一篇"></a></p>
<p><a href="http://hi.baidu.com/cnbxj/item/535c1a31f17a51f1e7bb7ae7" title="下一篇"></a></p>
<p>评论</p>
<p> 同时评论给 </p>
<p> 同时评论给原文作者 </p>
<p><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank"> 发布 </a></p>
<p>500/0</p>
<p><a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#" target="_blank">收起</a>|<a href="http://hi.baidu.com/cnbxj/item/9b1f8128e885e90842634ae3#reply" target="_blank">查看更多</a></p>
<p><a href="http://hi.baidu.com/go/show/introduce" target="_blank">帮助中心</a> | <a href="http://tieba.baidu.com/p/1781683739" target="_blank">空间客服</a> | <a href="http://tousu.baidu.com/hi/add" target="_blank">投诉中心</a> | <a href="http://www.baidu.com/search/hi_contract.html" target="_blank">空间协议</a></p>
<p>©2012 Baidu</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/oracle/">oracle</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/oracle/" class="label label-success">oracle</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:34"datetime="2014-03-07 09:54:34"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-oracle--oracle的表空间，分区表，以及索引的总结_开拓者_百度空间2/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-oracle--oracle的表空间，分区表，以及索引的总结_开拓者_百度空间2" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-oracle--提高select查询效率/">提高select查询效率</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:34.000Z"> <a href="/2014/02/02/2014-02-02-DB-oracle--提高select查询效率/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-select-">提高select查询效率</h1>
<p>1.对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引。
2.应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描，如：
select id from t where num is null 
可以在num上设置默认值0，确保表中num列没有null值，然后这样查询： 
select id from t where num=0 
3.应尽量避免在 where 子句中使用!=或&lt;&gt;操作符，否则将引擎放弃使用索引而进行全表扫描。 
4.应尽量避免在 where 子句中使用 or 来连接条件，否则将导致引擎放弃使用索引而进行全表扫描，如： 
select id from t where num=10 or num=20 
可以这样查询： 
select id from t where num=10 
union all 
select id from t where num=20 
5.in 和 not in 也要慎用，否则会导致全表扫描，如： 
select id from t where num in(1,2,3) 
对于连续的数值，能用 between 就不要用 in 了： 
select id from t where num between 1 and 3
6.下面的查询也将导致全表扫描： 
select id from t where name like &#39;%abc%&#39; 
若要提高效率，可以考虑全文检索。
7.如果在 where 子句中使用参数，也会导致全表扫描。因为SQL只有在运行时才会解析局部变量，但优化程序不能将访问计划的选择推迟到运行时；它必须在编译时进行选择。然而，如果在编译时建立访问计划，变量的值还是未知的，因而无法作为索引选择的输入项。如下面语句将进行全表扫描： 
select id from t where num=@num 
可以改为强制查询使用索引： 
select id from t with(index(索引名)) where num=@num 
8.应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描。如： 
select id from t where num/2=100 
应改为: 
select id from t where num=100/<em>2
9.应尽量避免在where子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如： 
select id from t where substring(name,1,3)=&#39;abc&#39;--name以abc开头的id 
select id from t where datediff(day,createdate,&#39;2005-11-30&#39;)=0--‘2005-11-30’生成的id 
应改为: 
select id from t where name like &#39;abc%&#39; 
select id from t where createdate&gt;=&#39;2005-11-30&#39; and createdate&lt;&#39;2005-12-1&#39; 
10.不要在 where 子句中的“=”左边进行函数、算术运算或其他表达式运算，否则系统将可能无法正确使用索引。 
11.在使用索引字段作为条件时，如果该索引是复合索引，那么必须使用到该索引中的第一个字段作为条件时才能保证系统使用该索引，否则该索引将不会被使用，并且应尽可能的让字段顺序与索引顺序相一致。 
12.不要写一些没有意义的查询，如需要生成一个空表结构： 
select col1,col2 into /#t from t where 1=0 
这类代码不会返回任何结果集，但是会消耗系统资源的，应改成这样： 
create table /#t(...) 
13.很多时候用 exists 代替 in 是一个好的选择： 
select num from a where num in(select num from b) 
用下面的语句替换： 
select num from a where exists(select 1 from b where num=a.num) 
14.并不是所有索引对查询都有效，SQL是根据表中数据来进行查询优化的，当索引列有大量数据重复时，SQL查询可能不会去利用索引，如一表中有字段sex，male、female几乎各一半，那么即使在sex上建了索引也对查询效率起不了作用。 
15.索引并不是越多越好，索引固然可以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，因为 insert 或 update 时有可能会重建索引，所以怎样建索引需要慎重考虑，视具体情况而定。一个表的索引数最好不要超过6个，若太多则应考虑一些不常使用到的列上建的索引是否有必要。 
16.应尽可能的避免更新 clustered 索引数据列，因为 clustered 索引数据列的顺序就是表记录的物理存储顺序，一旦该列值改变将导致整个表记录的顺序的调整，会耗费相当大的资源。若应用系统需要频繁更新 clustered 索引数据列，那么需要考虑是否应将该索引建为 clustered 索引。
17.尽量使用数字型字段，若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并会增加存储开销。这是因为引擎在处理查询和连接时会逐个比较字符串中每一个字符，而对于数字型而言只需要比较一次就够了。
18.尽可能的使用 varchar/nvarchar 代替 char/nchar ，因为首先变长字段存储空间小，可以节省存储空间，其次对于查询来说，在一个相对较小的字段内搜索效率显然要高些。
19.任何地方都不要使用 select /</em> from t ，用具体的字段列表代替“/*”，不要返回用不到的任何字段。 
20.尽量使用表变量来代替临时表。如果表变量包含大量数据，请注意索引非常有限（只有主键索引）。 
21.避免频繁创建和删除临时表，以减少系统表资源的消耗。 
22.临时表并不是不可使用，适当地使用它们可以使某些例程更有效，例如，当需要重复引用大型表或常用表中的某个数据集时。但是，对于一次性事件，最好使用导出表。
23.在新建临时表时，如果一次性插入数据量很大，那么可以使用 select into 代替 create table，避免造成大量 log ，以提高速度；如果数据量不大，为了缓和系统表的资源，应先create table，然后insert。 
24.如果使用到了临时表，在存储过程的最后务必将所有的临时表显式删除，先 truncate table ，然后drop table ，这样可以避免系统表的较长时间锁定。 
25.尽量避免使用游标，因为游标的效率较差，如果游标操作的数据超过1万行，那么就应该考虑改写。
26.使用基于游标的方法或临时表方法之前，应先寻找基于集的解决方案来解决问题，基于集的方法通常更有效。 
27.与临时表一样，游标并不是不可使用。对小型数据集使用 FAST_FORWARD 游标通常要优于其他逐行处理方法，尤其是在必须引用几个表才能获得所需的数据时。在结果集中包括“合计”的例程通常要比使用游标执行的速度快。如果开发时间允许，基于游标的方法和基于集的方法都可以尝试一下，看哪一种方法的效果更好。 
28.在所有的存储过程和触发器的开始处设置 SET NOCOUNT ON ，在结束时设置 SET NOCOUNT OFF 。无需在执行存储过程和触发器的每个语句后向客户端发送 DONE_IN_PROC 消息。 
29.尽量避免大事务操作，提高系统并发能力。 
30.尽量避免向客户端返回大数据量，若数据量过大，应该考虑相应需求是否合理。</p>
<p>来源： <a href="[http://www.wudongqi.com/article/502.htm](http://www.wudongqi.com/article/502.htm)">[http://www.wudongqi.com/article/502.htm](http://www.wudongqi.com/article/502.htm)</a></p>
<p><strong>查询语句（Select）的优化建议</strong>
1、合理使用索引：where子句中变量顺序应与索引字键顺序相同。
如：create index test_idx on test(hm, rq, xx)
索引字键顺序：首先是号码hm，其次是日期rq，最后是标志xx，所以where子句
变量顺序应是where hm&lt;=“P1234”and rq=“06/06/1999”and xx=“DDD”,不应
是where xx=“DDD” and rq=“06/06/1999” and hm &lt;=“P1234”这样的不按索引字键顺序写法。
2、将最具有限制性的条件放在前面，大值在前，小值在后。
如：where colA&lt;=10000 AND colA&gt;=1　效率高
where colA&gt;=1 AND colA&lt;=10000 效率低
3、避免采用MATCHES和LIKE通配符匹配查询
通配符匹配查询特别耗费时间。即使在条件字段上建立了索引，在这种情况下也还是采用顺序扫描的方式。
例如语句：Select ＊ FROM customer Where zipcode MATCHES “524/<em>”
可以考虑将它改为Select ＊ FROM customer Where ZipCode&lt;=“524999” AND ZipCode &gt;=“524000”，则在执行查询时就会利用索引来查询，显然会大大提高速度。
4、避免非开始的子串
例如语句：Select ＊ FROM customer Where zipcode[2，3] &gt;“24”，在where子句中采用了非开始子串，因而这个语句也不会使用索引。
5、避免相关子查询
一个字段的标签同时在主查询和where子句中的查询中出现，那么很可能当主查询中的字段值改变之后，子查询必须重新查询一次。查询嵌套层次越多，效率越低，因此应当尽量避免子查询。如果子查询不可避免，那么要在子查询中过滤掉尽可能多的行。
例如：将下面的语句
select hm,rq from TabA
where item IN (select item form TabB where TabB.num=50)
改为：select hm,bf from TabA, TabB
where TabA.item=TabB.item AND TabB.num=50
6、避免或简化排序
应当简化或避免对大型表进行重复的排序。当能够利用索引自动以适当的次序产生输出时，优化器就避免了排序的步骤。以下是一些影响因素：
◆ 索引中不包括一个或几个待排序的字段；
◆ group by或order by子句中字段的次序与索引的次序不一样；
◆ 排序的字段来自不同的表。
为了避免不必要的排序，就要正确地增建索引，合理地合并数据库表（尽管有时可能影响表的规范化，但相对于效率的提高是值得的）。如果排序不可避免，那么应当试图简化它，如缩小排序的字段的范围等。
7、消除对大型表行数据的顺序存取
在嵌套查询中，对表的顺序存取对查询效率可能产生致命的影响。比如采用顺序存取策略，一个嵌套3层的查询，如果每层都查询1000行，那么这个查询就要查询10亿行数据。避免这种情况的主要方法就是对连接的字段进行索引。
例如，两个表：学生表（学号、姓名、年龄……）和选课表（学号、课程号、成绩）。如果两个表要做连接，就要在“学号”这个连接字段上建立索引。还可以使用并集来避免顺序存取。尽管在所有的检查列上都有索引，但某些形式的where子句强迫优化器使用顺序存取。下面的查询将强迫对orders表执行顺序/</em>作：
Select ＊ FROM orders Where (cust_num=126 AND order_num&gt;1001) or order_num=1008
虽然在cust_num和order_num上建有索引，但是在上面的语句中优化器还是使用顺序存取路径扫描整个表。
因为这个语句要检索的是分离的行的集合，所以应该改为如下语句：
Select ＊ FROM orders Where cust_num=126 AND order_num&gt;1001
  UNION
Select ＊ FROM orders Where order_num=1008
这样就能利用索引路径处理查询。
8、对于大数据量的求和应避免使用单一的sum命令处理，可采用group by方式与其结合，有时其效率可提高几倍甚至百倍。
9、避免会引起磁盘读写的rowid操作。在where子句中或select语句中，用rowid要产生磁盘读写，是一个物理过程，会影响性能。
10、使用临时表加速查询
把表的一个子集进行排序并创建临时表，有时能加速查询。它有助于避免多重排序/*作，而且在其他方面还能简化优化器的工作。
但要注意：临时表创建后不会反映主表的修改。在主表中数据频繁修改的情况下，注意不要丢失数据。</p>
<p>来源： <a href="[http://www.wudongqi.com/article/503.htm](http://www.wudongqi.com/article/503.htm)">[http://www.wudongqi.com/article/503.htm](http://www.wudongqi.com/article/503.htm)</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/oracle/">oracle</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/oracle/" class="label label-success">oracle</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:34"datetime="2014-03-07 09:54:34"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-oracle--提高select查询效率/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-oracle--提高select查询效率" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/124/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/122/">122</a></li><li><a class="page-number" href="/page/123/">123</a></li><li><a class="page-number" href="/page/124/">124</a></li><li class="active"><li><span class="page-number current">125</span></li><li><a class="page-number" href="/page/126/">126</a></li><li><a class="page-number" href="/page/127/">127</a></li><li><a class="page-number" href="/page/128/">128</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/161/">161</a></li><li><a class="page-number" href="/page/162/">162</a></li><li><a class="extend next" href="/page/126/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Site powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a>  update time: <em>2014-04-07 19:25:40</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
