
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 56 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_多线程-并发--J2EE事务并发控制策略总结/">J2EE事务并发控制策略总结</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:41.000Z"> <a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_多线程-并发--J2EE事务并发控制策略总结/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="j2ee-">J2EE事务并发控制策略总结</h1>
<p>J2EE事务并发控制策略总结</p>
<p>本文结合Hibernate以及JPA标准，对J2EE当前持久层设计所遇到的几个问题进行总结：</p>
<p>事务并发访问控制策略</p>
<p>当前J2EE项目中，面临的一个共同问题就是如果控制事务的并发访问，虽然有些持久层框架已经为我们做了很多工作，但是理解原理，对于我们开发来说还是很有用处的。</p>
<p>事务并发访问主要可以分为两类，分别是同一个系统事务和跨事务访问的并发访问控制，其中同一个系统事务可以采取乐观锁以及悲观锁策略，而跨多个系统事务时则需要乐观离线锁和悲观离线锁。在讨论这四种并发访问控制策略之前，先需要明确一下数据库事务隔离级别的问题，ANSI标准规定了四个数据库事务隔离级别，它们分别是：</p>
<p>读取未提交（Read Uncommitted)</p>
<p>这是最低的事务隔离级别，读事务不会阻塞读事务和写事务，写事务也不会阻塞读事务，但是会阻塞写事务。这样造成的一个结果就是当一个写事务没有提交的时候，读事务照样可以读取，那么造成了脏读的现象。</p>
<p>读取已提交(Read Committed)</p>
<p>采用此种隔离界别的时候，写事务就会阻塞读事务和写事务，但是读事务不会阻塞读事务和写事务，这样因为写事务会阻塞读取事务，那么从而读取事务就不能读到脏数据，但是因为读事务不会阻塞其它的事务，这样还是会造成不可重复读的问题。</p>
<p>可重复读（Repeatable Read)</p>
<p>采用此种隔离级别，读事务会阻塞写事务，但是读事务不会阻塞读事务，但是写事务会阻塞写事务和读事务。因为读事务阻塞了写事务，这样以来就不会造成不可重复读的问题，但是这样还是不能避免幻影读问题。</p>
<p>序列化（serializable)</p>
<p>此种隔离级别是最严格的隔离级别，如果设置成这个级别，那么就不会出现以上所有的问题（脏读，不可重复读，幻影读）。但是这样以来会极大的影响到我们系统的性能，因此我们应该避免设置成为这种隔离级别，相反的，我们应该采用较低的隔离界别，然后再采用并发控制策略来进行事务的并发访问控制）。</p>
<p>其实我们也可以把事务隔离级别设置为serializable，这样就不需要采用并发控制策略了，数据库就会为我们做好一切并发控制，但是这样以来会严重影响我们系统的伸缩性和性能，所以在实践中，我们一般采用读取已提交或者更低的事务隔离级别，配合各种并发访问控制策略来达到并发事务控制的目的。下面总结一下常用的控制策略：</p>
<p>1 乐观锁</p>
<p>乐观锁是在同一个数据库事务中我们常采取的策略，因为它能使得我们的系统保持高的性能的情况下，提高很好的并发访问控制。乐观锁，顾名思义就是保持一种乐观的态度，我们认为系统中的事务并发更新不会很频繁，即使冲突了也没事，大不了重新再来一次。它的基本思想就是每次提交一个事务更新时，我们想看看要修改的东西从上次读取以后有没有被其它事务修改过，如果修改过，那么更新就会失败,。</p>
<p>最后我们需要明确一个问题，因为乐观锁其实并不会锁定任何记录，所以如果我们数据库的事务隔离级别设置为读取已提交或者更低的隔离界别，那么是不能避免不可重复读问题的（因为此时读事务不会阻塞其它事务），所以采用乐观锁的时候，系统应该要容许不可重复读问题的出现。</p>
<p>了解了乐观锁的概念以后，那么当前我们系统中又是如何来使用这种策略的呢？一般可以采用以下三种方法：</p>
<p>版本(Version)字段：在我们的实体中增加一个版本控制字段，每次事务更新后就将版本字段的值加1.</p>
<p>时间戳（timestamps)：采取这种策略后，当每次要提交更新的时候就会将系统当前时间和实体加载时的时间进行比较，如果不一致，那么就报告乐观锁失败，从而回滚事务或者重新尝试提交。采用时间戳有一些不足，比如在集群环境下，每个节点的时间同步也许会成问题，并且如果并发事务间隔时间小于当前平台最小的时钟单位，那么就会发生覆盖前一个事务结果的问题。因此一般采用版本字段比较好。</p>
<p>基于所有属性进行检测：采用这种策略的时候，需要比较每个字段在读取以后有没有被修改过，所以这种策略实现起来比较麻烦，要求对每个属性都进行比较，如果采用hiernate的话，因为Hibernate在一级缓存中可以进行脏检测，那么可以判断那些字段被修改过，从而动态的生成sql语句进行更新。</p>
<p>下面再总结一下如何在JDBC和Hibernate中使用乐观锁：</p>
<p>JDBC中使用乐观锁：如果我们采用JDBC来实现持久层的话，那么就可以采用以上将的三种支持乐观锁的策略，在实体中增加一个version字段或者一个Date字段，也可以采用基于所有属性的策略，下面就采用version字段来做一演示：</p>
<p>假如系统中有一个Account的实体类，我们在Account中多加一个version字段，那么我们JDBC Sql语句将如下写：</p>
<p>Select a.version....from Account as a where (where condition..)
Update Account set version = version+1.....(another field) where version =?...(another contidition)</p>
<p>这样以来我们就可以通过更新结果的行数来进行判断，如果更新结果的行数为0，那么说明实体从加载以来已经被其它事务更改了，所以就抛出自定义的乐观锁定异常（或者也可以采用Spring封装的异常体系）。具体实例如下：</p>
<p>.......
int rowsUpdated = statement.executeUpdate(sql);
If(rowsUpdated= =0){
throws new OptimisticLockingFailureException();
}
........</p>
<p>在使用JDBC API的情况下，我们需要在每个update语句中，都要进行版本字段的更新以及判断，因此如果稍不小心就会出现版本字段没有更新的问题，相反当前的 ORM框架却为我们做好了一切，我们仅仅需要做的就是在每个实体中都增加version或者是Date字段。</p>
<p>Hibernate中使用乐观锁：如果我们采用Hibernate做为持久层的框架，那么实现乐观锁将变得非常容易，因为框架会帮我们生成相应的sql语句，不仅减少了开发人员的负担，而且不容易出错。下面同样采用version字段的方式来总结一下：</p>
<p>同样假如系统中有一个Account的实体类，我们在Account中多加一个version字段，</p>
<p>public class Account{
Long id ;
.......
@Version //也可以采用XML文件进行配置
Int version
.......
}</p>
<p>这样以来每次我们提交事务时，hibernate内部会生成相应的SQL语句将版本字段加1，并且进行相应的版本检测，如果检测到并发乐观锁定异常，那么就抛出StaleObjectStateException.</p>
<p>2 悲观锁</p>
<p>所谓悲观锁，顾名思义就是采用一种悲观的态度来对待事务并发问题，我们认为系统中的并发更新会非常频繁，并且事务失败了以后重来的开销很大，这样以来，我们就需要采用真正意义上的锁来进行实现。悲观锁的基本思想就是每次一个事务读取某一条记录后，就会把这条记录锁住，这样其它的事务要想更新，必须等以前的事务提交或者回滚解除锁。</p>
<p>最后我们还是需要明确一个问题，假如我们数据库事务的隔离级别设置为读取已提交或者更低，那么通过悲观锁，我们控制了不可重复读的问题，但是不能避免幻影读的问题（因为要想避免我们就需要设置数据库隔离级别为Serializable,而一般情况下我们都会采取读取已提交或者更低隔离级别，并配合乐观或者悲观锁来实现并发控制，所以幻影读问题是不能避免的，如果想避免幻影读问题，那么你只能依靠数据库的serializable隔离级别（幸运的是幻影读问题一般情况下不严重）。</p>
<p>下面就分别以JDBC和Hibernate来总结一下：</p>
<p>JDBC中使用悲观锁：在JDBC中使用悲观锁，需要使用select for update语句，假如我们系统中有一个Account的类，我们可以采用如下的方式来进行：</p>
<p>Select /* from Account where ...(where condition).. for update.</p>
<p>当使用了for update语句后，每次在读取或者加载一条记录的时候，都会锁住被加载的记录，那么当其他事务如果要更新或者是加载此条记录就会因为不能获得锁而阻塞，这样就避免了不可重复读以及脏读的问题，但是其他事务还是可以插入和删除记录，这样也许同一个事务中的两次读取会得到不同的结果集，但是这不是悲观锁锁造成的问题，这是我们数据库隔离级别所造成的问题。</p>
<p>最后还需要注意的一点就是每个冲突的事务中，我们必须使用select for update 语句来进行数据库的访问，如果一些事务没有使用select for update语句，那么就会很容易造成错误，这也是采用JDBC进行悲观控制的缺点。</p>
<p>Hibernate中使用悲观锁：相比于JDBC使用悲观锁来说，在Hibernate中使用悲观锁将会容易很多，因为Hibernate有API让我们来调用，从而避免直接写SQL语句。下面就Hibernate使用悲观锁做一总结：</p>
<p>首先先要明确一下Hibernate中支持悲观锁的两种模式LockMode.UPGRADE以LockMode.UPGRADE_NO_WAIT.(PS:在JPA中，对应的锁模式是LockModeType.Read，这与Hibernate是不一样的呵呵)</p>
<p>假如我们系统中有一个Account的类，那么具体的操作可以像这样：</p>
<p>.......
session.lock(account, LockMode.UPGRADE);
......</p>
<p>或者也可以采用如下方式来加载对象：</p>
<p>session.get(Account.class,identity,LockMode.UPGRADE).</p>
<p>这样以来当加载对象时，hibernate内部会生成相应的select for update语句来加载对象，从而锁定对应的记录，避免其它事务并发更新。</p>
<p>以上两种策略都是针对同一个事务而言的，如果我们要实现跨多个事务的并发控制就要采用其它两种并发控制策略了，下面做一总结：</p>
<p>C++与java是两种完全不同风格的东西，C++是由程序员创造的，由程序员完善的，然后才出的标准的，也就是说C++的标准完全落后与C++的发展。java恰好相反，它是先有标准（可能还没有实现），然后后有的实现，而且它是由公司主导开发的，虽然现在开源了，但是标准并不是谁都能定的。这就造就了C++是百花齐放，博大精深，很少有人敢说自己C++很厉害。java却是另外的一种感觉，一切都规定好了，你只需要按照规定去做，符合标准才可以的。所以C++是那种既可以做的堂堂正正，博大精深（比如标准库），又可以实现的匪夷所思，天马行空（写 Boost库的人太牛了）。java不行，java要求如此只能如此，不能越雷池一步。</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li></span><span class="breadcrumb"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li><li><a href="/categories/Java&J2EE/Java_多线程/">Java_多线程</a></li><li><a href="/categories/Java&J2EE/Java_多线程/并发/">并发</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java&J2EE/" class="label label-primary">Java&J2EE</a><a href="/tags/Java_多线程/" class="label label-success">Java_多线程</a><a href="/tags/并发/" class="label label-info">并发</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:41"datetime="2014-03-07 09:54:41"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JavaJ2EE-Java_多线程-并发--J2EE事务并发控制策略总结/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JavaJ2EE-Java_多线程-并发--J2EE事务并发控制策略总结" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_多线程--用apache的configuration实现实时配置-steven_cheng-ITeye/">用apache的configuration实现实时配置 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:41.000Z"> <a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_多线程--用apache的configuration实现实时配置-steven_cheng-ITeye/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-apache-configuration-steven_cheng-iteye-">用apache的configuration实现实时配置 - steven_cheng - ITeye技术网站</h1>
<p><a href="http://www.iteye.com/" target="_blank">首页</a> <a href="http://www.iteye.com/news" target="_blank">新闻</a> <a href="http://www.iteye.com/forums" target="_blank">论坛</a> <a href="http://www.iteye.com/ask" target="_blank">问答</a> <a href="http://www.iteye.com/blogs" target="_blank">博客</a> <a href="http://www.iteye.com/job" target="_blank">招聘</a> <a href="http://steven-cheng.iteye.com/blog/70634#" target="_blank">更多 ▼</a></p>
<p><a href="http://www.iteye.com/wiki" target="_blank">专栏</a>  <a href="http://www.iteye.com/groups" target="_blank">群组</a> <a href="http://www.iteye.com/search" target="_blank">搜索</a></p>
<p><a href="http://steven-cheng.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://www.iteye.com/all" target="_blank">我的应用</a> <a href="http://steven-cheng.iteye.com/login" target="_blank">登录</a> <a href="http://steven-cheng.iteye.com/signup" target="_blank">注册</a></p>
<h1 id="-steven_cheng-http-steven-cheng-iteye-com-"><a href="http://steven-cheng.iteye.com/" target="_blank">steven_cheng</a></h1>
<p>永久域名 <a href="http://steven-cheng.iteye.com/" target="_blank"><a href="http://steven-cheng.iteye.com">http://steven-cheng.iteye.com</a></a></p>
<p><a href="http://steven-cheng.iteye.com/blog/87667" title="异常处理" target="_blank">异常处理</a></p>
<p>2006-03-24</p>
<h3 id="-apache-configuration-"><a href="">用apache的configuration实现实时配置</a></h3>
<p>关键字: java 开源
apache下commons有一个configeration包，对于做配置很方便，尤其是实时热配置。可以自动监测到配置文件的更改而reload配置文件。在项目中使用所以进行了一下封装。
java 代码</p>
<ol>
<li>public class DefaultRealTimeXMLConfiger {   </li>
<li></li>
<li>private static Log logger = LogFactory.getLog(DefaultRealTimeXMLConfiger.class);   </li>
<li></li>
<li>private String fileName;   </li>
<li></li>
<li>private long reloadPeriod;   </li>
<li></li>
<li>private XMLConfiguration config;   </li>
<li></li>
<li>public void init()   </li>
<li>{   </li>
<li>String filePath = GlobalConfigerImpl.getConfDir()+&quot;/&quot;+fileName;   </li>
<li>logger.debug(&quot;will config with XML file[&quot;+filePath+&quot;]&quot;);   </li>
<li></li>
<li>File file = new File(filePath);   </li>
<li>if (!file.exists() || !file.isFile()) {   </li>
<li>logger.error(&quot; can&#39;t find file[&quot; + filePath + &quot;]&quot;);   </li>
<li>throw new IllegalArgumentException(&quot;config error! can&#39;t find file[&quot; + filePath + &quot;]&quot;);   </li>
<li>}   </li>
<li>this.init(file);   </li>
<li>}   </li>
<li></li>
<li>public void init(File file) {   </li>
<li>try {   </li>
<li>config = new XMLConfiguration(file);   </li>
<li>FileChangedReloadingStrategy fs = new FileChangedReloadingStrategy();   </li>
<li>fs.setConfiguration(config);   </li>
<li></li>
<li>if(this.reloadPeriod&gt;0)   </li>
<li>{   </li>
<li>fs.setRefreshDelay(this.reloadPeriod);   </li>
<li>}   </li>
<li>config.setReloadingStrategy(fs);   </li>
<li></li>
<li>} catch (ConfigurationException e) {   </li>
<li>logger.error(&quot;error! configer error[&quot;+file.getPath()+&quot;]&quot;);   </li>
<li>logger.error(e);   </li>
<li>e.printStackTrace();   </li>
<li>}   </li>
<li>}   </li>
<li></li>
<li>public Object getProperty(String name) {   </li>
<li>Object s = this.config.getProperty(name);   </li>
<li>return s;   </li>
<li>}   </li>
<li></li>
<li>public String getString(String name) {   </li>
<li>Object s = this.config.getProperty(name);   </li>
<li>String result = null;   </li>
<li>if (s != null)   </li>
<li>result = (String) s;   </li>
<li></li>
<li>return result;   </li>
<li>}   </li>
<li></li>
<li>public String[] getStringArray(String name) {   </li>
<li>String[] target = this.config.getStringArray(name);   </li>
<li></li>
<li>return target;   </li>
<li>}   </li>
<li></li>
<li></li>
<li>//<em>/</em>  </li>
<li>/* @return Returns the fileName.  </li>
<li>/*/  </li>
<li>public String getFileName() {   </li>
<li>return fileName;   </li>
<li>}   </li>
<li></li>
<li>//<em>/</em>  </li>
<li>/* @param fileName The fileName to set.  </li>
<li>/*/  </li>
<li>public void setFileName(String fileName) {   </li>
<li>this.fileName = fileName;   </li>
<li>}   </li>
<li></li>
<li>//<em>/</em>  </li>
<li>/* @return Returns the reloadPeriod.  </li>
<li>/*/  </li>
<li>public long getReloadPeriod() {   </li>
<li>return reloadPeriod;   </li>
<li>}   </li>
<li></li>
<li>//<em>/</em>  </li>
<li>/* @param reloadPeriod The reloadPeriod to set.  </li>
<li>/*/  </li>
<li>public void setReloadPeriod(long reloadPeriod) {   </li>
<li>this.reloadPeriod = reloadPeriod;   </li>
<li>}   </li>
<li>}<br><a href="http://steven-cheng.iteye.com/blog/87667" title="异常处理" target="_blank">异常处理</a></li>
</ol>
<ul>
<li>06:34</li>
<li>浏览 (988)</li>
<li><a href="http://steven-cheng.iteye.com/blog/70634#comments" target="_blank">评论</a> (0)</li>
<li>分类: <a href="http://steven-cheng.iteye.com/category/12345" target="_blank">java</a></li>
<li><a href="http://www.iteye.com/wiki/topic/70634" target="_blank">相关推荐</a><h3 id="-">评论</h3>
</li>
</ul>
<p><a href=""></a></p>
<h3 id="-">发表评论</h3>
<h3 id="-">表情图标</h3>
<p><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""></p>
<p>字体颜色: 标准深红红色橙色棕色黄色绿色橄榄青色蓝色深蓝靛蓝紫色灰色白色黑色 字体大小: 标准1 (xx-small)2 (x-small)3 (small)4 (medium)5 (large)6 (x-large)7 (xx-large) 对齐: 标准居左居中居右</p>
<p>提示：选择您需要装饰的文字, 按上列按钮即可添加上相应的标签</p>
<p>您还没有登录，请<a href="http://steven-cheng.iteye.com/login" target="_blank">登录</a>后发表评论(快捷键 Alt+S / Ctrl+Enter)</p>
<p><a href="http://steven-cheng.iteye.com/" target="_blank"><img src="&quot;steven_cheng的博客: steven_cheng&quot;" alt="steven_cheng的博客"></a></p>
<p>steven_cheng</p>
<ul>
<li>浏览: 6938 次</li>
<li>来自: 北京</li>
<li><img src="" alt=""></li>
<li><a href="http://steven-cheng.iteye.com/blog/profile" target="_blank">详细资料</a> <a href="http://steven-cheng.iteye.com/blog/guest_book" target="_blank">留言簿</a></li>
</ul>
<h3 id="-">搜索本博客</h3>
<h3 id="-http-steven-cheng-iteye-com-blog-user_visits-">最近访客 <a href="http://steven-cheng.iteye.com/blog/user_visits" target="_blank">&gt;&gt;更多访客</a></h3>
<p><a href="http://loudyn.iteye.com/" target="_blank"><img src="&quot;Loudyn的博客: &quot;" alt="Loudyn的博客"></a></p>
<p><a href="http://loudyn.iteye.com/" target="_blank">Loudyn</a></p>
<p><a href="http://hepeng19861212.iteye.com/" target="_blank"><img src="&quot;hepeng19861212的博客: 火柴天堂&quot;" alt="hepeng19861212的博客"></a></p>
<p><a href="http://hepeng19861212.iteye.com/" target="_blank">hepeng19861212</a>
<a href="http://osacar.iteye.com/" target="_blank"><img src="&quot;osacar的博客: &quot;" alt="osacar的博客"></a></p>
<p><a href="http://osacar.iteye.com/" target="_blank">osacar</a></p>
<p><a href="http://kevin-gzhz.iteye.com/" target="_blank"><img src="&quot;kevin_gzhz的博客: kevin_gzhz&quot;" alt="kevin_gzhz的博客"></a></p>
<p><a href="http://kevin-gzhz.iteye.com/" target="_blank">kevin_gzhz</a></p>
<h3 id="-">博客分类</h3>
<ul>
<li><a href="http://steven-cheng.iteye.com/" target="_blank">全部博客 (8)</a></li>
<li><a href="http://steven-cheng.iteye.com/category/4287" target="_blank">默认类别 (0)</a></li>
<li><a href="http://steven-cheng.iteye.com/category/12345" target="_blank">java (6)</a></li>
<li><a href="http://steven-cheng.iteye.com/category/24850" target="_blank">单元测试和TDD (0)</a></li>
<li><a href="http://steven-cheng.iteye.com/category/48191" target="_blank">freemarker (1)</a></li>
<li><a href="http://steven-cheng.iteye.com/category/73657" target="_blank">linux (1)</a></li>
<li><p><a href="http://steven-cheng.iteye.com/category/75601" target="_blank">restlet (1)</a></p>
<h3 id="-http-steven-cheng-iteye-com-blog-guest_book-">我的留言簿 <a href="http://steven-cheng.iteye.com/blog/guest_book" target="_blank">&gt;&gt;更多留言</a></h3>
</li>
<li><p>steven_cheng 写道restlet那片原文是你的吗，如果是给个原文连接。 ...
-- by <a href="http://steven-cheng.iteye.com/blog/guest_book#6151" target="_blank">whaosoft</a></p>
</li>
</ul>
<h3 id="-">其他分类</h3>
<ul>
<li><a href="http://steven-cheng.iteye.com/blog/favorite" target="_blank">我的收藏</a> (15)</li>
<li><a href="http://steven-cheng.iteye.com/blog/code_favorite" target="_blank">我的代码</a> (0)</li>
<li><a href="http://steven-cheng.iteye.com/blog/topic" target="_blank">我的论坛主题帖</a> (1)</li>
<li><a href="http://steven-cheng.iteye.com/blog/post" target="_blank">我的所有论坛帖</a> (8)</li>
<li><a href="http://steven-cheng.iteye.com/blog/article" target="_blank">我的精华良好帖</a> (0)</li>
<li><p><a href="http://steven-cheng.iteye.com/blog/solution" target="_blank">我解决的问题</a> (1)</p>
<h3 id="-">最近加入群组</h3>
</li>
<li><p><a href="http://restlet.group.iteye.com/" target="_blank">Restlet</a></p>
</li>
<li><a href="http://freemarker.group.iteye.com/" target="_blank">FreeMarker</a></li>
</ul>
<h3 id="-">存档</h3>
<ul>
<li><a href="http://steven-cheng.iteye.com/blog/monthblog/2010-02" target="_blank">2010-02</a> (1)</li>
<li><a href="http://steven-cheng.iteye.com/blog/monthblog/2009-09" target="_blank">2009-09</a> (2)</li>
<li><a href="http://steven-cheng.iteye.com/blog/monthblog/2009-07" target="_blank">2009-07</a> (1)</li>
<li><p><a href="http://steven-cheng.iteye.com/blog/monthblog_more" target="_blank">更多存档...</a></p>
<h3 id="-">评论排行榜</h3>
</li>
<li><p><a href="http://steven-cheng.iteye.com/rss" target="_blank"><img src="" alt="Rss"></a></p>
</li>
<li><a href="http://fusion.google.com/add?feedurl=http://steven-cheng.iteye.com/rss" target="_blank"><img src="" alt="Rss_google"></a></li>
</ul>
<p>声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。
© 2003-2011 ITeye.com. All rights reserved. [ 京ICP证110151号 ]
<img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li></span><span class="breadcrumb"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li><li><a href="/categories/Java&J2EE/Java_多线程/">Java_多线程</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java&J2EE/" class="label label-primary">Java&J2EE</a><a href="/tags/Java_多线程/" class="label label-success">Java_多线程</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:41"datetime="2014-03-07 09:54:41"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JavaJ2EE-Java_多线程--用apache的configuration实现实时配置-steven_cheng-ITeye/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JavaJ2EE-Java_多线程--用apache的configuration实现实时配置-steven_cheng-ITeye" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_多线程--探索java多线程（连载）1守护线程-ikon-BlogJava/">探索java多线程（连载）1 守护线程 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:41.000Z"> <a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_多线程--探索java多线程（连载）1守护线程-ikon-BlogJava/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-java-1-ikon-blogjava">探索java多线程（连载）1 守护线程 - ikon - BlogJava</h1>
<h1 id="-ikon-http-www-blogjava-net-ikon-"><a href="http://www.blogjava.net/ikon/" target="_blank">ikon</a></h1>
<p>posts - 1, comments - 0, trackbacks - 0, articles - 1   <a href="http://www.blogjava.net/" target="_blank">BlogJava</a> :: <a href="http://www.blogjava.net/ikon/" target="_blank">首页</a> :: <a href="http://www.blogjava.net/ikon/admin/EditPosts.aspx?opt=1" target="_blank">新随笔</a> :: <a href="http://www.blogjava.net/ikon/contact.aspx?id=1" target="_blank">联系</a> :: <a href="http://www.blogjava.net/ikon/rss" target="_blank">聚合</a> <a href="http://www.blogjava.net/ikon/rss" target="_blank"><img src="" alt=""></a> :: <a href="http://www.blogjava.net/ikon/admin/EditPosts.aspx" target="_blank">管理</a> <img src="" alt=""></p>
<h3 id="-">日历</h3>
<p><a href="&quot;Go to the previous month&quot;">&lt;</a>2011年3月<a href="&quot;Go to the next month&quot;">&gt;</a>日一二三四五六2728123456789101112131415161718192021<a href="http://www.blogjava.net/ikon/archive/2011/03/22.html" target="_blank">22</a>232425262728293031123456789</p>
<p><img src="" alt=""></p>
<h3 id="-">常用链接</h3>
<ul>
<li><a href="http://www.blogjava.net/ikon/MyPosts.html" target="_blank">我的随笔</a></li>
<li><a href="http://www.blogjava.net/ikon/MyComments.html" target="_blank">我的评论</a></li>
<li><a href="http://www.blogjava.net/ikon/OtherPosts.html" target="_blank">我的参与</a>
<img src="" alt=""></li>
</ul>
<h3 id="-">留言簿</h3>
<ul>
<li><a href="http://www.blogjava.net/ikon/Contact.aspx?id=1" target="_blank">给我留言</a></li>
<li><a href="http://www.blogjava.net/ikon/default.aspx?opt=msg" target="_blank">查看公开留言</a></li>
<li><a href="http://www.blogjava.net/ikon/admin/MyMessages.aspx" target="_blank">查看私人留言</a></li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-">随笔档案</h3>
<ul>
<li><a href="http://www.blogjava.net/ikon/archive/2011/03.html" target="_blank">2011年3月 (1)</a>
<img src="" alt=""></li>
</ul>
<h3 id="-">搜索</h3>
<ul>
<li></li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-http-www-blogjava-net-ikon-commentsrss-aspx-java-1-">最新评论 <a href="http://www.blogjava.net/ikon/CommentsRSS.aspx" target="_blank"><img src="" alt=""></a> ## <a href="">探索java多线程（连载）1 守护线程</a></h3>
<p>Posted on 2011-03-22 19:25 <a href="http://www.blogjava.net/ikon/" target="_blank">ikon</a> 阅读(1692) <a href="http://www.blogjava.net/ikon/archive/2011/03/22/346738.html#Post" target="_blank">评论(0)</a>  <a href="http://www.blogjava.net/ikon/admin/EditPosts.aspx?postid=346738" target="_blank">编辑</a>  <a href="http://www.blogjava.net/ikon/AddToFavorite.aspx?id=346738" target="_blank">收藏</a> <img src="" alt=""></p>
<pre><code>  在java中有一类线程，专门在后台提供服务，此类线程无需显式关闭，当程序结束了，它也就结束了，这就是守护线程 daemon thread。如果还有非守护线程的线程在执行，它就不会结束。      守护线程有何用处呢？让我们来看个实践中的例子。

  在我们的系统中经常应用各种配置文件（黑名单，禁用词汇），当修改配置文件后，一般要重启服务，系统才能够加载；当重启服务的代价比较高的情况下，这种加载方式不能满足我们的要求，这个时候守护线程该发挥它的作用了，它可以实时加载你的配置文件，无需重启。（当然，相当重要的配置文件，不推荐实时加载）
</code></pre><p><img src="" alt="">package com.ikon.thread.daemon;
<img src="" alt="">
<img src="" alt="">import java.io.File;
<img src="" alt="">import java.util./<em>;
<img src="" alt="">
<img src="" alt=""><img src="" alt="">//</em>/<em> /</em>///<em>/</em>
<img src="" alt=""> /<em> 文件监测
<img src="" alt=""> /</em> @author ikon99999
<img src="" alt=""> /<em> 
<img src="" alt=""> /</em>/
<img src="" alt=""><img src="" alt="">public abstract class FileWatchdog extends Thread <img src="" alt="">{
<img src="" alt="">
<img src="" alt=""> 
<img src="" alt="">  static final public long DEFAULT_DELAY = 20/*1000; 
<img src="" alt=""> 
<img src="" alt=""><br><img src="" alt="">  protected HashMap fileList;
<img src="" alt=""> 
<img src="" alt="">  protected long delay = DEFAULT_DELAY; 
<img src="" alt=""><br><img src="" alt="">  boolean warnedAlready = false;
<img src="" alt=""><br><img src="" alt="">  boolean interrupted = false;
<img src="" alt="">
<img src="" alt="">  public static class Entity
<img src="" alt=""><img src="" alt="">  <img src="" alt="">{
<img src="" alt="">        File file;
<img src="" alt="">        long lastModify;
<img src="" alt="">        Entity(File file,long lastModify)
<img src="" alt=""><img src="" alt="">        <img src="" alt="">{
<img src="" alt="">            this.file = file;
<img src="" alt="">            this.lastModify = lastModify;
<img src="" alt="">        }
<img src="" alt="">  }
<img src="" alt=""><br><img src="" alt=""><img src="" alt="">  protected  FileWatchdog() <img src="" alt="">{
<img src="" alt="">      fileList = new HashMap ();
<img src="" alt="">    setDaemon(true);
<img src="" alt="">  }
<img src="" alt="">
<img src="" alt=""> 
<img src="" alt=""><img src="" alt="">  public  void setDelay(long delay) <img src="" alt="">{
<img src="" alt="">    this.delay = delay;
<img src="" alt="">  }
<img src="" alt="">
<img src="" alt="">  public void addFile(File file)
<img src="" alt=""><img src="" alt="">  <img src="" alt="">{
<img src="" alt="">        fileList.put(file.getAbsolutePath(),new Entity(file,file.lastModified()));<br><img src="" alt="">  }
<img src="" alt=""><br><img src="" alt="">  public boolean contains(File file)
<img src="" alt=""><img src="" alt="">  <img src="" alt="">{
<img src="" alt="">        if( fileList.get(file.getAbsolutePath()) != null) return true;
<img src="" alt="">        else return false;
<img src="" alt="">  }
<img src="" alt=""><br><img src="" alt="">  abstract   protected   void doOnChange(File file);
<img src="" alt="">
<img src="" alt=""><img src="" alt="">  protected  void checkAndConfigure() <img src="" alt="">{
<img src="" alt="">      HashMap map = (HashMap)fileList.clone(); 
<img src="" alt="">      Iterator it = map.values().iterator();
<img src="" alt=""><br><img src="" alt="">      while( it.hasNext())
<img src="" alt=""><img src="" alt="">      <img src="" alt="">{
<img src="" alt=""><br><img src="" alt="">            Entity entity = (Entity)it.next();
<img src="" alt=""><br><img src="" alt="">            boolean fileExists;
<img src="" alt=""><img src="" alt="">            try <img src="" alt="">{
<img src="" alt="">              fileExists = entity.file.exists();
<img src="" alt="">            } catch(SecurityException  e) 
<img src="" alt=""><img src="" alt="">            <img src="" alt="">{
<img src="" alt="">              System.err.println (&quot;Was not allowed to read check file existance, file:[&quot;+ entity.file .getAbsolutePath() +&quot;].&quot;);
<img src="" alt="">              interrupted = true; 
<img src="" alt="">              return;
<img src="" alt="">            }
<img src="" alt="">
<img src="" alt="">            if(fileExists) 
<img src="" alt=""><img src="" alt="">            <img src="" alt="">{
<img src="" alt=""><br><img src="" alt="">              long l = entity.file.lastModified(); // this can also throw a SecurityException
<img src="" alt=""><img src="" alt="">              if(l &gt; entity.lastModify) <img src="" alt="">{           // however, if we reached this point this
<img src="" alt="">                    entity.lastModify = l;              // is very unlikely.
<img src="" alt="">                    newThread(entity.file);
<img src="" alt="">              }
<img src="" alt="">            }
<img src="" alt="">            else 
<img src="" alt=""><img src="" alt="">            <img src="" alt="">{
<img src="" alt="">                System.err.println (&quot;[&quot;+entity.file .getAbsolutePath()+&quot;] does not exist.&quot;);
<img src="" alt="">            }
<img src="" alt="">      }
<img src="" alt="">  }
<img src="" alt=""><br><img src="" alt="">  private void newThread(File file)
<img src="" alt=""><img src="" alt="">  <img src="" alt="">{
<img src="" alt="">      class MyThread extends Thread
<img src="" alt=""><img src="" alt="">      <img src="" alt="">{
<img src="" alt="">            File f;
<img src="" alt="">            public MyThread(File f)
<img src="" alt=""><img src="" alt="">            <img src="" alt="">{
<img src="" alt="">                this.f = f;
<img src="" alt="">            }
<img src="" alt=""><br><img src="" alt="">            public void run()
<img src="" alt=""><img src="" alt="">            <img src="" alt="">{
<img src="" alt="">                doOnChange(f);
<img src="" alt="">            }
<img src="" alt="">      }
<img src="" alt=""><br><img src="" alt="">      MyThread mt = new MyThread(file);
<img src="" alt="">      mt.start();
<img src="" alt="">  }
<img src="" alt="">
<img src="" alt="">  public  void run() 
<img src="" alt=""><img src="" alt="">  <img src="" alt="">{<br><img src="" alt=""><img src="" alt="">    while(!interrupted) <img src="" alt="">{
<img src="" alt=""><img src="" alt="">      try <img src="" alt="">{
<img src="" alt="">        Thread.currentThread().sleep(delay);
<img src="" alt=""><img src="" alt="">      } catch(InterruptedException e) <img src="" alt="">{
<img src="" alt="">    // no interruption expected
<img src="" alt="">      }
<img src="" alt="">      checkAndConfigure();
<img src="" alt="">    }
<img src="" alt="">  }
<img src="" alt="">}
<img src="" alt=""></p>
<pre><code>FileWatchdog是个抽象类，本身是线程的子类；在构造函数中设置为守护线程；
此类用hashmap维护着一个文件和最新修改时间值对，checkAndConfigure()方法用来检测哪些文件的修改时间更新了，如果发现文件更新了则调用doOnChange方法来完成监测逻辑；doOnChange方法是我们需要实现的；看下面关于一个黑名单服务的监测服务：
</code></pre><p> 1<img src="" alt="">package com.ikon.thread.daemon;
 2<img src="" alt="">
 3<img src="" alt="">import java.io.File;
 4<img src="" alt="">
 5<img src="" alt=""><img src="" alt="">//<em>/</em> /<em>///</em>/<em>
 6<img src="" alt=""> /</em> 黑名单服务
 7<img src="" alt=""> /<em> @author ikon99999
 8<img src="" alt=""> /</em> 2011-3-21
 9<img src="" alt=""> /<em>/
10<img src="" alt=""><img src="" alt="">public class BlacklistService <img src="" alt="">{
11<img src="" alt="">    private File configFile = new File(&quot;c:/blacklist.txt&quot;);
12<img src="" alt=""><br>13<img src="" alt=""><img src="" alt="">    public void init() throws Exception<img src="" alt="">{
14<img src="" alt="">        loadConfig();
15<img src="" alt="">        ConfigWatchDog dog = new ConfigWatchDog();
16<img src="" alt="">        dog.setName(&quot;daemon_demo_config_watchdog&quot;);//a
17<img src="" alt="">        dog.addFile(configFile);//b
18<img src="" alt="">        dog.start();//c
19<img src="" alt="">    }
20<img src="" alt=""><br>21<img src="" alt=""><img src="" alt="">    public void loadConfig()<img src="" alt="">{
22<img src="" alt=""><img src="" alt="">        try<img src="" alt="">{
23<img src="" alt="">            Thread.sleep(1/</em>1000);//d
24<img src="" alt=""><br>25<img src="" alt="">            System.out.println(&quot;加载黑名单&quot;);
26<img src="" alt=""><img src="" alt="">        }catch(InterruptedException ex)<img src="" alt="">{
27<img src="" alt="">            System.out.println(&quot;加载配置文件失败！&quot;);
28<img src="" alt="">        }
29<img src="" alt="">    }
30<img src="" alt=""><br>31<img src="" alt=""><img src="" alt="">    public File getConfigFile() <img src="" alt="">{
32<img src="" alt="">        return configFile;
33<img src="" alt="">    }
34<img src="" alt="">
35<img src="" alt=""><img src="" alt="">    public void setConfigFile(File configFile) <img src="" alt="">{
36<img src="" alt="">        this.configFile = configFile;
37<img src="" alt="">    }
38<img src="" alt="">
39<img src="" alt="">
40<img src="" alt=""><img src="" alt="">    private class ConfigWatchDog extends FileWatchdog<img src="" alt="">{
41<img src="" alt=""><br>42<img src="" alt="">        @Override
43<img src="" alt=""><img src="" alt="">        protected void doOnChange(File file) <img src="" alt="">{
44<img src="" alt="">            System.out.println(&quot;文件&quot;+file.getName()+&quot;发生改变，重新加载&quot;);
45<img src="" alt="">            loadConfig();
46<img src="" alt="">        }
47<img src="" alt=""><br>48<img src="" alt="">    }
49<img src="" alt=""><br>50<img src="" alt=""><img src="" alt="">    public static void main(String[] args) throws Exception <img src="" alt="">{
51<img src="" alt="">        BlacklistService service = new BlacklistService();
52<img src="" alt="">        service.init();
53<img src="" alt=""><br>54<img src="" alt="">        Thread.sleep(60/<em>60/</em>1000);//e
55<img src="" alt="">    }
56<img src="" alt="">}
57<img src="" alt="">
        ConfigWatchDog内部类实现了doOnChange(File file)方法，当文件被修改后，watchdog调用doOnChange方法完成重新加载操作；
        在blackservice的init方法中初始化watchdog线程；
        d：模拟文件加载耗时
        e：主要是防止主线程退出；
        其实上面的FileWatchdog就是取自log4j；</p>
<p><a href="http://www.blogjava.net/RequireRegister.aspx" target="_blank">新用户注册</a>  <a href="">刷新评论列表</a>  </p>
<p><a href=""></a> <a href="http://job.cnblogs.com/">找优秀程序员，就在博客园</a>
<a href="http://job.cnblogs.com/offer/12368/" target="_blank">网易有道诚聘CRM研发工程师</a>
<a href="http://job.cnblogs.com/offer/11576/" target="_blank">锦江国际诚聘Java高级软件工程师</a>
<a href="http://job.cnblogs.com/offer/12493/" target="_blank">福州几维网络诚聘Java服务端程序员</a>
IT新闻：
· <a href="http://news.cnblogs.com/n/101664/" target="_blank">开放，开放，开放 —— 垄断</a>
· <a href="http://news.cnblogs.com/n/101663/" target="_blank">GNOME讨论放弃支持非Linux操作系统</a>
· <a href="http://news.cnblogs.com/n/101662/" target="_blank">Chrome 13将隐藏地址栏</a>
· <a href="http://news.cnblogs.com/n/101661/" target="_blank">联想：USB 3.0将在2012年成为主流</a>
· <a href="http://news.cnblogs.com/n/101659/" target="_blank">意法半导体 CEO ：诺基亚 Windows Phone 将采用 U8500 双核芯片</a>   <a href="http://www.cnblogs.com/" target="_blank">博客园</a>  <a href="http://home.cnblogs.com/q/" target="_blank">博问</a>  <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>  <a href="http://job.cnblogs.com/cate-java_programmer/" target="_blank">Java程序员招聘</a> 标题  请输入标题 姓名  请输入你的姓名 主页 请输入验证码 验证码 /*  <img src="" alt=""> 内容(请不要发表任何与政治相关的内容) 请输入评论内容 Remember Me?   <a href="http://www.blogjava.net/login.aspx?ReturnURL=http://www.blogjava.net/ikon/archive/2011/03/22/346738.html&amp;SourceURL=/ikon/archive/2011/03/22/346738.html" target="_blank">登录</a>       [使用Ctrl+Enter键可以直接提交]    推荐职位：
· <a href="http://job.cnblogs.com/offer/5914/" target="_blank">北京.NET 研发工程师 (北京捷报数据)</a>
· <a href="http://job.cnblogs.com/offer/12527/" target="_blank">(北京).NET软件开发工程师(北京龙达)</a>
· <a href="http://job.cnblogs.com/offer/11584/" target="_blank">厦门高级.NET软件工程师(服务于美国Amazon)</a>
· <a href="http://job.cnblogs.com/offer/10723/" target="_blank">高级Web页面前端开发工程师(新蛋中国)</a>
· <a href="http://job.cnblogs.com/offer/12493/" target="_blank">厦门Java服务端程序员(福州几维网络)</a>
· <a href="http://job.cnblogs.com/offer/9051/" target="_blank">.NET 高级软件开发工程师 (新蛋中国)</a>
· <a href="http://job.cnblogs.com/offer/12439/" target="_blank">北京ASP.NET 工程师（月薪12k）(北京盛安德)</a>
· <a href="http://job.cnblogs.com/offer/12492/" target="_blank">厦门C/#游戏客户端程序员 (福州几维网络)</a></p>
<p>博客园首页随笔：
· <a href="http://www.cnblogs.com/kqingchao/archive/2011/05/20/character-encoding-2.html" target="_blank">字符编码浅谈（二）</a>
· <a href="http://www.cnblogs.com/xuesong/archive/2011/05/20/2051892.html" target="_blank">Windows Phone 7编程实践—必应地图导航</a>
· <a href="http://www.cnblogs.com/ini_always/archive/2011/05/20/2050517.html" target="_blank">绕死你不偿命的UNICODE、_UNICODE、<strong>TEXT、</strong>T、_T、_TEXT、TEXT宏</a>
· <a href="http://www.cnblogs.com/leslies2/archive/2011/05/20/2051844.html" target="_blank">学习笔记：JAVA RMI远程方法调用简单实例</a>
· <a href="http://www.cnblogs.com/bobomouse/archive/2011/05/20/2051846.html" target="_blank">关于CellSet转DataTable的改进方案</a>
知识库：
· <a href="http://kb.cnblogs.com/page/101423/" target="_blank">程序员的本质</a>
· <a href="http://kb.cnblogs.com/page/101345/" target="_blank">Scrum之成败——从自身案例说起</a>
· <a href="http://kb.cnblogs.com/page/101321/" target="_blank">清除代码异味</a>
· <a href="http://kb.cnblogs.com/page/101198/" target="_blank">详解.NET程序集的加载规则</a>
· <a href="http://kb.cnblogs.com/page/101162/" target="_blank">如何通过ildasm/ilasm修改assembly的IL代码</a> 最简洁阅读版式：
<a href="http://archive.cnblogs.com/b/346738/" target="_blank">探索java多线程（连载）1 守护线程</a> 网站导航:</p>
<p><a href="http://www.cnblogs.com/" title="程序员的网上家园" target="_blank">博客园</a>   <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>   <a href="http://kb.cnblogs.com/" target="_blank">知识库</a>   <a href="http://www.cnweblog.com/" target="_blank">博客生活</a>   <a href="http://www.cnitblog.com/" target="_blank">IT博客网</a>   <a href="http://www.cppblog.com/" target="_blank">C++博客</a>   <a href="http://space.cnblogs.com/q/" title="IT问答" target="_blank">博问</a>   <a href="http://www.blogjava.net/ikon/archive/2011/03/22/346738.html?opt=admin" target="_blank">管理</a>    Powered by:
<a href="http://www.blogjava.net/" target="_blank">BlogJava</a>
Copyright © ikon</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li></span><span class="breadcrumb"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li><li><a href="/categories/Java&J2EE/Java_多线程/">Java_多线程</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java&J2EE/" class="label label-primary">Java&J2EE</a><a href="/tags/Java_多线程/" class="label label-success">Java_多线程</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:41"datetime="2014-03-07 09:54:41"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JavaJ2EE-Java_多线程--探索java多线程（连载）1守护线程-ikon-BlogJava/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JavaJ2EE-Java_多线程--探索java多线程（连载）1守护线程-ikon-BlogJava" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_多线程--多线程讲解/">多线程讲解</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:41.000Z"> <a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_多线程--多线程讲解/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-">多线程讲解</h1>
<p>多线程是java应用程序的一个特点，掌握java的多线程也是作为一java程序员必备的知识。多线程指的是在单个程序中可以同时运行多个同的线程执行不同的任务.线程是程序内的顺序控制流，只能使用分配给序的资源和环境。还记得刚开始学习的时候总是和进程分不清，总是对这两个名词所迷惑。</p>
<p>下面就首先对这两个名词区分来作为本篇博客的开始：</p>
<p><strong>    一、线程与进程的区别</strong></p>
<p>多个进程的内部数据和状态都是完全独立的,而多线程是共享一块内存空间和一组系统资源,有可能互相影响. •线程本身的数据通常只有寄存器数据，以及一个程序执行时使用的堆栈，所以线程的切换比进程切换的负担要小。</p>
<p> 多线程编程的目的，就是&quot;最大限度地利用CPU资源&quot;，当某一线程的处理不需要占用CPU而只和I/O等资源打交道时，让需要占用CPU资源的其它线程有机会获得CPU资源。从根本上说，这就是多线程编程的最终目的。</p>
<p>二、了解一下java在多线程中的基础知识</p>
<p>1.Java中如果我们自己没有产生线程，那么系统就会给我们产生一个线程（主线程，main方法就在主线程上运行），我们的程序都是由线程来执行的。</p>
<ol>
<li>进程：执行中的程序（程序是静态的概念，进程是动态的概念）。 </li>
</ol>
<ol>
<li><p>线程的实现有两种方式，<strong>第一种方式是继承Thread类，然后重写run方法；第二种是实现Runnable接口，然后实现其run方法。 </strong></p>
</li>
<li><p>将我们希望线程执行的代码放到run方法中，然后通过start方法来启动线程，<strong>start方法首先为线程的执行准备好系统资源，然后再去调用run方法。</strong>当某个类继承了Thread类之后，该类就叫做一个线程类。 </p>
</li>
<li><p>一个进程至少要包含一个线程。 </p>
</li>
<li><p>对于单核CPU来说，某一时刻只能有一个线程在执行（微观串行），从宏观角度来看，多个线程在同时执行（宏观并行）。 </p>
</li>
<li><p>对于双核或双核以上的CPU来说，可以真正做到微观并行。</p>
</li>
</ol>
<p>三、Thread源码研究： </p>
<p>1) Thread类也实现了Runnable接口，因此实现了Runnable接口中的run方法； </p>
<p>2) 当生成一个线程对象时，如果没有为其设定名字，那么线程对象的名字将使用如下形式：Thread-number,该number将是自动增加的，并被所有的Thread对象所共享（因为它是static的成员变量）。 </p>
<p>3) 当使用第一种方式来生成线程对象时，我们需要重写run方法，因为Thread类的run方法此时什么事情也不做。</p>
<p>4）当使用第二种方式生成线程对象时，我们需要实现Runnable接口的run方法，然后使用new Thread（new MyThread（））（假如MyThread已经实现了Runnable接口）来生成线程对象，这时的线程对象的run方法或调就会MyThread类的run方法，这样我们自己编写的run方法就执行了。</p>
<p>说明： </p>
<p>Public void run(){</p>
<p>If(target!=null){</p>
<p>Target.run();</p>
<p>}}</p>
<p>当使用继承Thread生成线程对象时，target为空，什么也不执行，当使用第二种方式生成时，执行target.run（），target为runnable的实例对象，即为执行重写后的方法</p>
<p>总结：两种生成线程对象的区别：</p>
<p>1.两种方法均需执行线程的start方法为线程分配必须的系统资源、调度线程运行并执行线程的run方法。 </p>
<p>2.在具体应用中，采用哪种方法来构造线程体要视情况而定。通常，当一个线程已继承了另一个类时，就应该用第二种方法来构造，即实现Runnable接口。 </p>
<p><strong>四：线程的生命周期：</strong></p>
<p><img src="" alt=""></p>
<p>由上图可以看出，一个线程由出生到死亡分为五个阶段：</p>
<p><strong>1）.创建状态 </strong></p>
<p>•当用new操作符创建一个新的线程对象时，该线程处于创建状态。 </p>
<p>•处于创建状态的线程只是一个空的线程对象，系统不为它分配资源 </p>
<p><strong>2）. 可运行状态 </strong></p>
<p>•执行线程的start()方法将为线程分配必须的系统资源，安排其运行，并调用线程体—run()方法，这样就使得该线程处于可运行( Runnable )状态。 </p>
<p>•这一状态并不是运行中状态（Running )，因为线程也许实际上并未真正运行。 </p>
<p><strong>3）.不可运行状态 </strong></p>
<p>.当发生下列事件时，处于运行状态的线程会转入到不可运行状态。 </p>
<p>调用了sleep（）方法； </p>
<p>•线程调用wait方法等待特定条件的满足 </p>
<p>•线程输入/输出阻塞 </p>
<p><strong>4）返回可运行状态： </strong></p>
<p>•处于睡眠状态的线程在指定的时间过去后 </p>
<p>•如果线程在等待某一条件，另一个对象必须通过notify()或notifyAll()方法通知等待线程条件的改变 </p>
<p>•如果线程是因为输入/输出阻塞，等待输入/输出完成 </p>
<p><strong>5）. 消亡状态 </strong></p>
<p>当线程的run方法执行结束后，该线程自然消亡。 </p>
<p>注意：</p>
<p>1.停止线程的方式：不能使用Thread类的stop方法来终止线程的执行。一般要设定一个变量，在run方法中是一个循环，循环每次检查该变量，如果满足条件则继续执行，否则跳出循环，线程结束。 </p>
<p>2.不能依靠线程的优先级来决定线程的执行顺序。 </p>
<p><strong>五：多线程并发</strong></p>
<p>多线程并发是线程同步中比较常见的现象，java多线程为了避免多线程并发解决多线程共享数据同步问题提供了<strong>synchronized关键字</strong></p>
<p>synchronized关键字：当synchronized关键字修饰一个方法的时候，该方法叫做同步方法。 </p>
<p>1.Java中的每个对象都有一个锁（lock）或者叫做监视器（monitor），当访问某个对象的synchronized方法时，表示将该对象上锁，此时其他任何线程都无法再去访问该synchronized方法了，直到之前的那个线程执行方法完毕后（或者是抛出了异常），那么将该对象的锁释放掉，其他线程才有可能再去访问该synchronized方法。 </p>
<ol>
<li>如果一个对象有多个synchronized方法，某一时刻某个线程已经进入到了某个synchronized方法，那么在该方法没有执行完毕前，其他线程是无法访问该对象的任何synchronized方法的。 </li>
</ol>
<p>3.如果某个synchronized方法是static的，那么当线程访问该方法时，它锁的并不是synchronized方法所在的对象，而是synchronized方法所在的对象所对应的Class对象，因为Java中无论一个类有多少个对象，这些对象会对应唯一一个Class对象，因此当线程分别访问同一个类的两个对象的两个static，synchronized方法时，他们的执行顺序也是顺序的，也就是说一个线程先去执行方法，执行完毕后另一个线程才开始执行。 </p>
<ol>
<li>synchronized块，写法： </li>
</ol>
<p>synchronized(object) </p>
<p>{ </p>
<p>} </p>
<p>表示线程在执行的时候会对object对象上锁。 </p>
<p>5.synchronized方法是一种粗粒度的并发控制，某一时刻，只能有一个线程执行该synchronized方法;synchronized块则是一种细粒度的并发控制，只会将块中的代码同步，位于方法内、synchronized块之外的代码是可以被多个线程同时访问到的。 </p>
<p>同步的线程状态图：</p>
<p><img src="" alt=""></p>
<p><strong>六：wait与notify</strong></p>
<p>1.wait与notify方法都是定义在Object类中，而且是final的，因此会被所有的Java类所继承并且无法重写。这两个方法要求在调用时线程应该已经获得了对象的锁，因此对这两个方法的调用需要放在synchronized方法或块当中。当线程执行了wait方法时，它会释放掉对象的锁。 </p>
<ol>
<li>另一个会导致线程暂停的方法就是Thread类的sleep方法，它会导致线程睡眠指定的毫秒数，但线程在睡眠的过程中是不会释放掉对象的锁的。 </li>
</ol>
<p>3.notify():唤醒在此对象监视器上等待的单个线程。如果所有线程都在此对象上等待，则会选择唤醒其中一个线程。选择是任意性的，并在对实现做出决定时发生。线程通过调用其中一个 wait 方法，在对象的监视器上等待。 </p>
<p>直到当前线程放弃此对象上的锁定，才能继续执行被唤醒的线程。被唤醒的线程将以常规方式与在该对象上主动同步的其他所有线程进行竞争；例如，唤醒的线程在作为锁定此对象的下一个线程方面没有可靠的特权或劣势。</p>
<p>此方法只应由作为此对象监视器的所有者的线程来调用。通过以下三种方法之一，线程可以成为此对象监视器的所有者：</p>
<p>o 通过执行此对象的同步实例方法。</p>
<p>o 通过执行在此对象上进行同步的 synchronized 语句的正文。</p>
<p>o 对于 Class 类型的对象，可以通过执行该类的同步静态方法。</p>
<p>一次只能有一个线程拥有对象的监视器。</p>
<p><img src="" alt=""></p>
<p> <strong>关于成员变量与局部变量</strong>：如果一个变量是成员变量，那么多个线程对同一个对象的成员变量进行操作时，他们对该成员变量是彼此影响的（也就是说一个线程对成员变量的改变会影响到另一个线程）。  如果一个变量是局部变量，那么每个线程都会有一个该局部变量的拷贝，一个线程对该局部变量的改变不会影响到其他的线程。</p>
<p><strong>七：死锁的问题： </strong></p>
<p>定义：线程1锁住了对象A的监视器，等待对象B的监视器，线程2锁住了对象B的监视器，等待对象A的监视器，就造成了死锁。</p>
<pre><code> 导致死锁的根源在于不适当地运用“synchronized”关键词来管理线程对特定对象的访问。“synchronized”关键词的作用是，确保在某个时刻只有一个线程被允许执行特定的代码块，因此，被允许执行的线程首先必须拥有对变量或对象的排他性访问权。当线程访问对象时，线程会给对象加锁
</code></pre><p>Java中每个对象都有一把锁与之对应。但Java不提供单独的lock和unlock操作。下面笔者分析死锁的两个过程“上锁”和“锁死” 。</p>
<p>(1) 上锁
     许多线程在执行中必须考虑与其他线程之间共享数据或协调执行状态，就需要同步机制。因此大多数应用程序要求线程互相通信来同步它们的动作，在 Java 程序中最简单实现同步的方法就是上锁。在 Java 编程中，所有的对象都有锁。线程可以使用 synchronized 关键字来获得锁。在任一时刻对于给定的类的实例，方法或同步的代码块只能被一个线程执行。这是因为代码在执行之前要求获得对象的锁。</p>
<pre><code>为了防止同时访问共享资源，线程在使用资源的前后可以给该资源上锁和开锁。给共享变量上锁就使得 Java 线程能够快速方便地通信和同步。某个线程若给一个对象上了锁，就可以知道没有其他线程能够访问该对象。即使在抢占式模型中，其他线程也不能够访问此对象，直到上锁的线程被唤醒、完成工作并开锁。那些试图访问一个上锁对象的线程通常会进入睡眠状态，直到上锁的线程开锁。一旦锁被打开，这些睡眠进程就会被唤醒并移到准备就绪队列中。
</code></pre><p>(2)锁死
     如果程序中有几个竞争资源的并发线程,那么保证均衡是很重要的。系统均衡是指每个线程在执行过程中都能充分访问有限的资源，系统中没有饿死和死锁的线程。当多个并发的线程分别试图同时占有两个锁时，会出现加锁冲突的情形。如果一个线程占有了另一个线程必需的锁，互相等待时被阻塞就有可能出现死锁。</p>
<pre><code>在编写多线程代码时，笔者认为死锁是最难处理的问题之一。因为死锁可能在最意想不到的地方发生，所以查找和修正它既费时又费力。例如，常见的例子如下面这段程序。[print](http://write.blog.csdn.net/postedit#)[?](http://write.blog.csdn.net/postedit#)
</code></pre><p>1 public int sumArrays(int[] a1, int[] a2){  </p>
<p>2   int value = 0;  </p>
<p>3   int size = a1.length;  </p>
<p>4   if (size == a2.length) {  </p>
<p>5      synchronized(a1) { //1        </p>
<p>6        synchronized(a2) { //2          </p>
<p>7          for (int i=0; i&lt;size; i++)  </p>
<p>8             value += a1[i] + a2[i];  </p>
<p>9        }    </p>
<p>10      }    </p>
<p>11   } return value;  </p>
<p>12 }   </p>
<p>这段代码在求和操作中访问两个数组对象之前锁定了这两个数组对象。它形式简短，编写也适合所要执行的任务；但不幸的是，它有一个潜在的问题。这个问题就是它埋下了死锁的种子。</p>
<p><strong>ThreadLocal类（这个类本人没用过，暂时不太懂）</strong></p>
<p>首先，ThreadLocal 不是用来解决共享对象的多线程访问问题的，一般情况下，通过ThreadLocal.set() 到线程中的对象是该线程自己使用的对象，其他线程是不需要访问的，也访问不到的。各个线程中访问的是不同的对象。
另外，说ThreadLocal使得各线程能够保持各自独立的一个对象，并不是通过ThreadLocal.set()来实现的，而是通过每个线程中的new 对象 的操作来创建的对象，每个线程创建一个，不是什么对象的拷贝或副本。通过ThreadLocal.set()将这个新创建的对象的引用保存到各线程的自己的一个map中，每个线程都有这样一个map，执行ThreadLocal.get()时，各线程从自己的map中取出放进去的对象，因此取出来的是各自自己线程中的对象，ThreadLocal实例是作为map的key来使用的。
如果ThreadLocal.set()进去的东西本来就是多个线程共享的同一个对象，那么多个线程的ThreadLocal.get()取得的还是这个共享对象本身，还是有并发访问问题。</p>
<p><strong> 本文来自：曹胜欢博客专栏。转载请注明出处：<a href="http://blog.csdn.net/csh624366188" target="_blank"><a href="http://blog.csdn.net/csh624366188">http://blog.csdn.net/csh624366188</a></a></strong></p>
<p>来源： <a href="[http://blog.csdn.net/csh624366188/article/details/7318245](http://blog.csdn.net/csh624366188/article/details/7318245)">[http://blog.csdn.net/csh624366188/article/details/7318245](http://blog.csdn.net/csh624366188/article/details/7318245)</a> </p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li></span><span class="breadcrumb"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li><li><a href="/categories/Java&J2EE/Java_多线程/">Java_多线程</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java&J2EE/" class="label label-primary">Java&J2EE</a><a href="/tags/Java_多线程/" class="label label-success">Java_多线程</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:41"datetime="2014-03-07 09:54:41"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JavaJ2EE-Java_多线程--多线程讲解/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JavaJ2EE-Java_多线程--多线程讲解" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_字符集--java字符串的各种编码转换/">java字符串的各种编码转换</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:41.000Z"> <a href="/2014/02/02/2014-02-02-JavaJ2EE-Java_字符集--java字符串的各种编码转换/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="java-">java字符串的各种编码转换</h1>
<h1 id="-java-http-www-blogjava-net-rabbit-"><a href="http://www.blogjava.net/rabbit/" target="_blank">Java世界</a></h1>
<p>学习笔记</p>
<h3 id="-">导航</h3>
<ul>
<li><a href="http://www.blogjava.net/" target="_blank">BlogJava</a></li>
<li><a href="http://www.blogjava.net/rabbit/" target="_blank">首页</a></li>
<li><a href="http://www.blogjava.net/rabbit/admin/EditPosts.aspx?opt=1" target="_blank">新随笔</a></li>
<li><a href="http://www.blogjava.net/rabbit/contact.aspx?id=1" target="_blank">联系</a></li>
<li><a href="http://www.blogjava.net/rabbit/rss" target="_blank">聚合</a><a href="http://www.blogjava.net/rabbit/rss" target="_blank"><img src="" alt=""></a></li>
<li><a href="http://www.blogjava.net/rabbit/admin/EditPosts.aspx" target="_blank">管理</a>
<a href="&quot;Go to the previous month&quot;">&lt;</a> 2008年3月 <a href="&quot;Go to the next month&quot;">&gt;</a> 日 一 二 三 四 五 六 24 25 26 27 28 29 1 2 3 4 5 6 <a href="http://www.blogjava.net/rabbit/archive/2008/03/07.html" target="_blank">7</a> <a href="http://www.blogjava.net/rabbit/archive/2008/03/08.html" target="_blank">8</a> 9 10 <a href="http://www.blogjava.net/rabbit/archive/2008/03/11.html" target="_blank">11</a> <a href="http://www.blogjava.net/rabbit/archive/2008/03/12.html" target="_blank">12</a> 13 <a href="http://www.blogjava.net/rabbit/archive/2008/03/14.html" target="_blank">14</a> 15 16 17 18 19 <a href="http://www.blogjava.net/rabbit/archive/2008/03/20.html" target="_blank">20</a> 21 22 23 <a href="http://www.blogjava.net/rabbit/archive/2008/03/24.html" target="_blank">24</a> 25 26 <a href="http://www.blogjava.net/rabbit/archive/2008/03/27.html" target="_blank">27</a> <a href="http://www.blogjava.net/rabbit/archive/2008/03/28.html" target="_blank">28</a> 29 30 31 1 2 3 4 5</li>
</ul>
<h3 id="-6-">留言簿(6)</h3>
<ul>
<li><a href="http://www.blogjava.net/rabbit/Contact.aspx?id=1" target="_blank">给我留言</a></li>
<li><a href="http://www.blogjava.net/rabbit/default.aspx?opt=msg" target="_blank">查看公开留言</a></li>
<li><a href="http://www.blogjava.net/rabbit/admin/MyMessages.aspx" target="_blank">查看私人留言</a></li>
</ul>
<h3 id="-">随笔档案</h3>
<ul>
<li><a href="http://www.blogjava.net/rabbit/archive/2010/01.html" target="_blank">2010年1月 (3)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2009/07.html" target="_blank">2009年7月 (2)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2009/05.html" target="_blank">2009年5月 (2)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2009/01.html" target="_blank">2009年1月 (1)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/12.html" target="_blank">2008年12月 (2)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/10.html" target="_blank">2008年10月 (1)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/08.html" target="_blank">2008年8月 (1)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/07.html" target="_blank">2008年7月 (2)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/06.html" target="_blank">2008年6月 (9)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/05.html" target="_blank">2008年5月 (1)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/03.html" target="_blank">2008年3月 (9)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/02.html" target="_blank">2008年2月 (9)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/01.html" target="_blank">2008年1月 (1)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2007/12.html" target="_blank">2007年12月 (4)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2007/11.html" target="_blank">2007年11月 (8)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2007/10.html" target="_blank">2007年10月 (16)</a></li>
</ul>
<h3 id="-">文章档案</h3>
<ul>
<li><a href="http://www.blogjava.net/rabbit/archives/2007/11.html" target="_blank">2007年11月 (8)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archives/2007/10.html" target="_blank">2007年10月 (1)</a></li>
</ul>
<h3 id="-">阅读排行榜</h3>
<ul>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/03/12/185559.html" target="_blank">1. 怎么查看端口占用情况?(22478)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html" target="_blank">2. java字符串的各种编码转换 (14630)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/03/08/184760.html" target="_blank">3. 如何导入.sql文件到mysql中？(7494)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/02/25/181961.html" target="_blank">4. 怎样用Eclipse生成jar文件(2261)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/06/17/208623.html" target="_blank">5. Linux下解压rar文件(1151)</a></li>
</ul>
<h3 id="-">评论排行榜</h3>
<ul>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html" target="_blank">1. java字符串的各种编码转换 (13)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/03/12/185559.html" target="_blank">2. 怎么查看端口占用情况?(12)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2008/02/25/181961.html" target="_blank">3. 怎样用Eclipse生成jar文件(2)</a></li>
<li><a href="http://www.blogjava.net/rabbit/archive/2007/10/15/152922.html" target="_blank">4. 如何解决呢？请教。(2)</a></li>
<li><p><a href="http://www.blogjava.net/rabbit/archive/2007/10/22/154968.html" target="_blank">5. 单子（Singleton）设计模式(2)</a></p>
<h3 id="-">常用链接</h3>
</li>
<li><p><a href="http://www.blogjava.net/rabbit/MyPosts.html" target="_blank">我的随笔</a></p>
</li>
<li><a href="http://www.blogjava.net/rabbit/MyComments.html" target="_blank">我的评论</a></li>
<li><a href="http://www.blogjava.net/rabbit/OtherPosts.html" target="_blank">我的参与</a></li>
<li><a href="http://www.blogjava.net/rabbit/RecentComments.html" target="_blank">最新评论</a></li>
</ul>
<h3 id="-">统计</h3>
<ul>
<li>随笔 - 71</li>
<li>文章 - 9</li>
<li>评论 - 48</li>
<li>引用 - 0</li>
</ul>
<h3 id="-">积分与排名</h3>
<ul>
<li>积分 - 64465</li>
<li>排名 - 229</li>
</ul>
<h3 id="-">天籁村</h3>
<h3 id="-">新华网</h3>
<h3 id="-">雅虎</h3>
<h3 id="-http-www-blogjava-net-rabbit-commentsrss-aspx-">最新评论 <a href="http://www.blogjava.net/rabbit/CommentsRSS.aspx" target="_blank"><img src="" alt=""></a></h3>
<ul>
<li><a href="http://www.blogjava.net/rabbit/archive/2010/02/11/189009.html#312565" target="_blank">1. re: java字符串的各种编码转换 [未登录]</a></li>
<li>谢了</li>
<li>--lbom</li>
<li><a href="http://www.blogjava.net/rabbit/archive/2009/12/31/185559.html#307931" target="_blank">2. re: 怎么查看端口占用情况?</a></li>
<li>万分感谢！</li>
<li>--yjm</li>
<li><a href="http://www.blogjava.net/rabbit/archive/2009/12/07/189009.html#305021" target="_blank">3. re: java字符串的各种编码转换 [未登录]</a></li>
<li>谢谢</li>
<li>--dong</li>
<li><a href="http://www.blogjava.net/rabbit/archive/2009/12/06/189009.html#304945" target="_blank">4. re: java字符串的各种编码转换 [未登录]</a></li>
<li>评论内容较长,点击标题查看</li>
<li>--wolf</li>
<li><a href="http://www.blogjava.net/rabbit/archive/2009/11/15/185559.html#302431" target="_blank">5. re: 怎么查看端口占用情况?</a></li>
<li>太谢谢你了，， 呵呵帮我解决了 很大的问题</li>
<li>--常霖</li>
</ul>
<h2 id="-java-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html" target="_blank">java字符串的各种编码转换</a></h2>
<p>import java.io.UnsupportedEncodingException;</p>
<p>//<em>/</em>
 /<em> 转换字符串的编码
 /</em>/
public class ChangeCharset {
 //<em>/</em> 7位ASCII字符，也叫作ISO646-US、Unicode字符集的基本拉丁块 /<em>/
 public static final String US_ASCII = &quot;US-ASCII&quot;;
 //</em>/<em> ISO 拉丁字母表 No.1，也叫作 ISO-LATIN-1 /</em>/
 public static final String ISO_8859_1 = &quot;ISO-8859-1&quot;;
 //<em>/</em> 8 位 UCS 转换格式 /<em>/
 public static final String UTF_8 = &quot;UTF-8&quot;;
 //</em>/<em> 16 位 UCS 转换格式，Big Endian（最低地址存放高位字节）字节顺序 /</em>/
 public static final String UTF_16BE = &quot;UTF-16BE&quot;;
 //<em>/</em> 16 位 UCS 转换格式，Little-endian（最高地址存放低位字节）字节顺序 /<em>/
 public static final String UTF_16LE = &quot;UTF-16LE&quot;;
 //</em>/<em> 16 位 UCS 转换格式，字节顺序由可选的字节顺序标记来标识 /</em>/
 public static final String UTF_16 = &quot;UTF-16&quot;;
 //<em>/</em> 中文超大字符集 /*/
 public static final String GBK = &quot;GBK&quot;;</p>
<p> //<em>/</em>
  /<em> 将字符编码转换成US-ASCII码
  /</em>/
 public String toASCII(String str) throws UnsupportedEncodingException{
  return this.changeCharset(str, US_ASCII);
 }
 //<em>/</em>
  /<em> 将字符编码转换成ISO-8859-1码
  /</em>/
 public String toISO_8859_1(String str) throws UnsupportedEncodingException{
  return this.changeCharset(str, ISO_8859_1);
 }
 //<em>/</em>
  /<em> 将字符编码转换成UTF-8码
  /</em>/
 public String toUTF_8(String str) throws UnsupportedEncodingException{
  return this.changeCharset(str, UTF_8);
 }
 //<em>/</em>
  /<em> 将字符编码转换成UTF-16BE码
  /</em>/
 public String toUTF_16BE(String str) throws UnsupportedEncodingException{
  return this.changeCharset(str, UTF_16BE);
 }
 //<em>/</em>
  /<em> 将字符编码转换成UTF-16LE码
  /</em>/
 public String toUTF_16LE(String str) throws UnsupportedEncodingException{
  return this.changeCharset(str, UTF_16LE);
 }
 //<em>/</em>
  /<em> 将字符编码转换成UTF-16码
  /</em>/
 public String toUTF_16(String str) throws UnsupportedEncodingException{
  return this.changeCharset(str, UTF_16);
 }
 //<em>/</em>
  /<em> 将字符编码转换成GBK码
  /</em>/
 public String toGBK(String str) throws UnsupportedEncodingException{
  return this.changeCharset(str, GBK);
 }</p>
<p> //<em>/</em>
  /<em> 字符串编码转换的实现方法
  /</em> @param str  待转换编码的字符串
  /<em> @param newCharset 目标编码
  /</em> @return
  /<em> @throws UnsupportedEncodingException
  /</em>/
 public String changeCharset(String str, String newCharset)
   throws UnsupportedEncodingException {
  if (str != null) {
   //用默认字符编码解码字符串。
   byte[] bs = str.getBytes();
   //用新的字符编码生成字符串
   return new String(bs, newCharset);
  }
  return null;
 }
 //<em>/</em>
  /<em> 字符串编码转换的实现方法
  /</em> @param str  待转换编码的字符串
  /<em> @param oldCharset 原编码
  /</em> @param newCharset 目标编码
  /<em> @return
  /</em> @throws UnsupportedEncodingException
  /*/
 public String changeCharset(String str, String oldCharset, String newCharset)
   throws UnsupportedEncodingException {
  if (str != null) {
   //用旧的字符编码解码字符串。解码可能会出现异常。
   byte[] bs = str.getBytes(oldCharset);
   //用新的字符编码生成字符串
   return new String(bs, newCharset);
  }
  return null;
 }</p>
<p> public static void main(String[] args) throws UnsupportedEncodingException {
  ChangeCharset test = new ChangeCharset();
  String str = &quot;This is a 中文的 String!&quot;;
  System.out.println(&quot;str: &quot; + str);
  String gbk = test.toGBK(str);
  System.out.println(&quot;转换成GBK码: &quot; + gbk);
  System.out.println();
  String ascii = test.toASCII(str);
  System.out.println(&quot;转换成US-ASCII码: &quot; + ascii);
  gbk = test.changeCharset(ascii,ChangeCharset.US_ASCII, ChangeCharset.GBK);
  System.out.println(&quot;再把ASCII码的字符串转换成GBK码: &quot; + gbk);
  System.out.println();
  String iso88591 = test.toISO_8859_1(str);
  System.out.println(&quot;转换成ISO-8859-1码: &quot; + iso88591);
  gbk = test.changeCharset(iso88591,ChangeCharset.ISO_8859_1, ChangeCharset.GBK);
  System.out.println(&quot;再把ISO-8859-1码的字符串转换成GBK码: &quot; + gbk);
  System.out.println();
  String utf8 = test.toUTF_8(str);
  System.out.println(&quot;转换成UTF-8码: &quot; + utf8);
  gbk = test.changeCharset(utf8,ChangeCharset.UTF_8, ChangeCharset.GBK);
  System.out.println(&quot;再把UTF-8码的字符串转换成GBK码: &quot; + gbk);
  System.out.println();
  String utf16be = test.toUTF_16BE(str);
  System.out.println(&quot;转换成UTF-16BE码:&quot; + utf16be);
  gbk = test.changeCharset(utf16be,ChangeCharset.UTF_16BE, ChangeCharset.GBK);
  System.out.println(&quot;再把UTF-16BE码的字符串转换成GBK码: &quot; + gbk);
  System.out.println();
  String utf16le = test.toUTF_16LE(str);
  System.out.println(&quot;转换成UTF-16LE码:&quot; + utf16le);
  gbk = test.changeCharset(utf16le,ChangeCharset.UTF_16LE, ChangeCharset.GBK);
  System.out.println(&quot;再把UTF-16LE码的字符串转换成GBK码: &quot; + gbk);
  System.out.println();
  String utf16 = test.toUTF_16(str);
  System.out.println(&quot;转换成UTF-16码:&quot; + utf16);
  gbk = test.changeCharset(utf16,ChangeCharset.UTF_16LE, ChangeCharset.GBK);
  System.out.println(&quot;再把UTF-16码的字符串转换成GBK码: &quot; + gbk);
  String s = new String(&quot;中文&quot;.getBytes(&quot;UTF-8&quot;),&quot;UTF-8&quot;);
  System.out.println(s);
 }</p>
<h2 id="-">}</h2>
<pre><code>    java中的String类是按照unicode进行编码的，当使用String(byte[] bytes, String encoding)构造字符串时，encoding所指的是bytes中的数据是按照那种方式编码的，而不是最后产生的String是什么编码方式，换句话说，是让系统把bytes中的数据由encoding编码方式转换成unicode编码。如果不指明，bytes的编码方式将由jdk根据操作系统决定。

    当我们从文件中读数据时，最好使用InputStream方式，然后采用String(byte[] bytes, String encoding)指明文件的编码方式。不要使用Reader方式，因为Reader方式会自动根据jdk指明的编码方式把文件内容转换成unicode编码。

    当我们从数据库中读文本数据时，采用ResultSet.getBytes()方法取得字节数组，同样采用带编码方式的字符串构造方法即可。
</code></pre><p>ResultSet rs;
bytep[] bytes = rs.getBytes();
String str = new String(bytes, &quot;gb2312&quot;);</p>
<p>不要采取下面的步骤。</p>
<p>ResultSet rs;
String str = rs.getString();
str = new String(str.getBytes(&quot;iso8859-1&quot;), &quot;gb2312&quot;);</p>
<pre><code>    这种编码转换方式效率底。之所以这么做的原因是，ResultSet在getString()方法执行时，默认数据库里的数据编码方式为iso8859-1。系统会把数据依照iso8859-1的编码方式转换成unicode。使用str.getBytes(&quot;iso8859-1&quot;)把数据还原，然后利用new String(bytes, &quot;gb2312&quot;)把数据从gb2312转换成unicode，中间多了好多步骤。

    从HttpRequest中读参数时，利用reqeust.setCharacterEncoding()方法设置编码方式，读出的内容就是正确的了。
</code></pre><p>posted on 2008-03-27 15:03 <a href="http://www.blogjava.net/rabbit/" target="_blank">Rabbit</a> 阅读(14630) <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#Post" target="_blank">评论(13)</a>  <a href="http://www.blogjava.net/rabbit/admin/EditPosts.aspx?postid=189009" target="_blank">编辑</a>  <a href="http://www.blogjava.net/rabbit/AddToFavorite.aspx?id=189009" target="_blank">收藏</a>
<img src="" alt=""></p>
<p><a href=""></a><a href=""></a></p>
<p>[</p>
<h3 id="-">评论</h3>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-241299-permalink-re-java-re-java-2008-11-19-10-47-http-www-blogjava-net-downmoon-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#241299" title="permalink: re: java字符串的各种编码转换 " target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 2008-11-19 10:47 <a href="http://www.blogjava.net/downmoon/">邀月</a></h3>
<p>]()</p>
<p>感谢分享  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=%e9%82%80%e6%9c%88" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></p>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-241392-permalink-re-java-re-java-2008-11-19-15-21-rabbit-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#241392" title="permalink: re: java字符串的各种编码转换 [未登录]" target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 [未登录] 2008-11-19 15:21 <a href="">rabbit</a></h3>
<p>谢谢支持！  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=rabbit" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></p>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-243964-permalink-re-java-re-java-2008-12-02-16-44-3-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#243964" title="permalink: re: java字符串的各种编码转换 " target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 2008-12-02 16:44 <a href="">3分毒</a></h3>
<p>顶~  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=3%e5%88%86%e6%af%92" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></p>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-261045-permalink-re-java-re-java-2009-03-20-15-27-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#261045" title="permalink: re: java字符串的各种编码转换 " target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 2009-03-20 15:27 <a href="">清闲散人</a></h3>
<p>inputstreamReader 可以直接指定编码的……  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=%e6%b8%85%e9%97%b2%e6%95%a3%e4%ba%ba" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></p>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-261558-permalink-re-java-re-java-2009-03-23-18-13-yxw-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#261558" title="permalink: re: java字符串的各种编码转换 [未登录]" target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 [未登录] 2009-03-23 18:13 <a href="">yxw</a></h3>
<p>相当的有用啊，感谢分享  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=yxw" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></p>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-288167-permalink-re-java-re-java-2009-07-24-11-24-1111-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#288167" title="permalink: re: java字符串的各种编码转换 " target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 2009-07-24 11:24 <a href="">1111</a></h3>
<p>有些编码不能直接转换的吧!
  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=1111" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></p>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-288194-permalink-re-java-re-java-2009-07-24-13-55-rabbit-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#288194" title="permalink: re: java字符串的各种编码转换 [未登录]" target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 [未登录] 2009-07-24 13:55 <a href="">Rabbit</a></h3>
<p>具体情况具体分析，不一定全部适用。  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=Rabbit" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></p>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-293606-permalink-re-java-re-java-2009-09-02-15-46-greale-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#293606" title="permalink: re: java字符串的各种编码转换 " target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 2009-09-02 15:46 <a href="">Greale</a></h3>
<p>&quot;当使用String(byte[] bytes, String encoding)构造字符串时，encoding所指的是bytes中的数据是按照那种方式编码的，而不是最后产生的String是什么编码方&quot;
完全错误,不要误导读者.  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=Greale" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></p>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-293686-permalink-re-java-re-java-2009-09-03-08-34-rabbit-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#293686" title="permalink: re: java字符串的各种编码转换 [未登录]" target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 [未登录] 2009-09-03 08:34 <a href="">Rabbit</a></h3>
<p>@Greale
请加以测试给出结论，请查看String str = new String(bytes, &quot;gb2312&quot;);这个字符类的原代码即可得出答案。  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=Rabbit" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></p>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-301420-permalink-re-java-re-java-2009-11-06-13-24-tayoto-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#301420" title="permalink: re: java字符串的各种编码转换 " target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 2009-11-06 13:24 <a href="">tayoto</a></h3>
<p>简直是不负责任呀......全是错的.......敢不敢看文档再发  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=tayoto" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></p>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-304945-permalink-re-java-re-java-2009-12-06-22-28-wolf-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#304945" title="permalink: re: java字符串的各种编码转换 [未登录]" target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 [未登录] 2009-12-06 22:28 <a href="">wolf</a></h3>
<p>@Greale
我来说句，下面这个来自jdk的文档，
String(byte[] bytes, String charsetName)
构造一个新的 String，方法是使用指定的字符集解码指定的字节数组
rabbit是对的。  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=wolf" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></p>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-305021-permalink-re-java-re-java-2009-12-07-16-47-dong-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#305021" title="permalink: re: java字符串的各种编码转换 [未登录]" target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 [未登录] 2009-12-07 16:47 <a href="">dong</a></h3>
<p>谢谢  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=dong" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></p>
<h3 id="-http-www-blogjava-net-rabbit-archive-2008-03-27-189009-html-312565-permalink-re-java-re-java-2010-02-11-10-24-lbom-"><a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#312565" title="permalink: re: java字符串的各种编码转换 [未登录]" target="_blank">/#</a> <a href=""></a>re: java字符串的各种编码转换 [未登录]<a href=""></a> 2010-02-11 10:24 <a href="">lbom</a></h3>
<p>谢了  <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=lbom" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a>
<a href="http://www.blogjava.net/RequireRegister.aspx" target="_blank">新用户注册</a>  <a href="">刷新评论列表</a>  </p>
<p><a href=""></a> <a href="http://job.cnblogs.com/offer/6509/">淘宝网诚聘资深J2ME开发工程师</a>
IT新闻：
· <a href="http://news.cnblogs.com/n/59823/" target="_blank">Novell推新虚拟设备 简化向Windows 7迁移</a>
· <a href="http://news.cnblogs.com/n/59822/" target="_blank">原淘宝商城负责人黄若加盟当当网任COO</a>
· <a href="http://news.cnblogs.com/n/59820/" target="_blank">微软的“三屏一云”计划导致SQL CE数据库消失？</a>
· <a href="http://news.cnblogs.com/n/59818/" target="_blank">苹果招聘LTE技术经理 或推4G版iPhone</a>
· <a href="http://news.cnblogs.com/n/59815/" target="_blank">金山将砸2亿开发网游 今年推新款作品</a>
专题：<a href="http://kb.cnblogs.com/zt/android/" target="_blank">Android</a>  <a href="http://kb.cnblogs.com/zt/iPad/" target="_blank">iPad</a>  <a href="http://kb.cnblogs.com/zt/jquery/" target="_blank">jQuery</a>  <a href="http://kb.cnblogs.com/zt/chrome/" target="_blank">Chrome OS</a>    <a href="http://www.cnblogs.com/" target="_blank">博客园首页</a>  <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>  <a href="http://kb.cnblogs.com/" target="_blank">知识库</a>  <a href="http://a4.yeshj.com/rd/34143/" target="_blank">学英语</a>  <a href="http://job.cnblogs.com/cate-java_programmer/" target="_blank">Java程序员招聘</a> 标题  请输入标题 姓名  请输入你的姓名 主页 请输入验证码 验证码 /*  <img src="" alt=""> 内容(请不要发表任何与政治相关的内容) 请输入评论内容 Remember Me?   <a href="http://www.blogjava.net/login.aspx?ReturnURL=http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html&amp;SourceURL=/rabbit/archive/2008/03/27/189009.html" target="_blank">登录</a>       [使用Ctrl+Enter键可以直接提交]   <a href="http://a4.yeshj.com/rd/34138/" target="_blank">每天10分钟，轻松学英语</a>  推荐职位：
· <a href="http://job.cnblogs.com/offer/6318/" target="_blank">飞信服务器端高级.NET开发工程师(新媒传信)</a>
· <a href="http://job.cnblogs.com/offer/6319/" target="_blank">.NET飞信官网开发工程师(新媒传信)</a>
· <a href="http://job.cnblogs.com/offer/6189/" target="_blank">.NET技术开发总监(广州衣酷)</a>
· <a href="http://job.cnblogs.com/offer/6492/" target="_blank">Web前端研发工程师(百度)</a>
· <a href="http://job.cnblogs.com/offer/6123/" target="_blank">.NET初级程序员 (北京安人)</a>
· <a href="http://job.cnblogs.com/offer/6124/" target="_blank">.NET中级程序员 (北京安人)</a>
· <a href="http://job.cnblogs.com/zt/yeshj/#offer3" target="_blank">C++开发工程师(沪江网)</a>
· <a href="http://job.cnblogs.com/zt/yeshj/#offer2" target="_blank">前端开发工程师(沪江网)</a></p>
<p>博客园首页随笔：
· <a href="http://www.cnblogs.com/zhjp11/archive/2010/03/26/1697195.html" target="_blank">界面开发(五)--- 界面优化</a>
· <a href="http://www.cnblogs.com/guilin_gavin/archive/2010/03/26/1697193.html" target="_blank">项目“结项期”中如何改善开发VS测试效率的一点想法</a>
· <a href="http://www.cnblogs.com/sun/archive/2010/03/26/1697182.html" target="_blank">团队基础生成自动化流程之最佳实践总论(III) – 重写生成号产生机制</a>
· <a href="http://www.cnblogs.com/superymk/archive/2010/03/26/1697171.html" target="_blank">Phase Change Memory初步</a>
· <a href="http://www.cnblogs.com/foamliu/archive/2010/03/26/1697167.html" target="_blank">发布一款基于C/#的机器视觉库</a>
知识库：
· <a href="http://kb.cnblogs.com/page/59817/" target="_blank">如何明智选择数据库平台</a>
· <a href="http://kb.cnblogs.com/page/59812/" target="_blank">我们的原型设计方法</a>
· <a href="http://kb.cnblogs.com/page/59807/" target="_blank">写商业计划书——团队里该有谁？by Angels Den</a>
· <a href="http://kb.cnblogs.com/page/59802/" target="_blank">google vs.yahoo:谁的社会化媒体策略更胜一筹?</a>
· <a href="http://kb.cnblogs.com/page/59798/" target="_blank">淘心得——浅谈淘宝网的社会化之路</a>  网站导航:</p>
<p><a href="http://www.cnblogs.com/" target="_blank">博客园</a>   <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>   <a href="http://home.cnblogs.com/" target="_blank">个人主页</a>   <a href="http://www.cnweblog.com/" target="_blank">博客生活</a>   <a href="http://www.cnitblog.com/" target="_blank">IT博客网</a>   <a href="http://www.cppblog.com/" target="_blank">C++博客</a>   <a href="http://space.cnblogs.com/" target="_blank">博客园社区</a> <a href="http://www.blogjava.net/rabbit/archive/2008/03/27/189009.html?opt=admin" target="_blank">管理</a>   </p>
<p>Powered by:
<a href="http://www.blogjava.net/" target="_blank">BlogJava</a>
Copyright © Rabbit</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li></span><span class="breadcrumb"><li><a href="/categories/Java&J2EE/">Java&J2EE</a></li><li><a href="/categories/Java&J2EE/Java_字符集/">Java_字符集</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java&J2EE/" class="label label-primary">Java&J2EE</a><a href="/tags/Java_字符集/" class="label label-success">Java_字符集</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:41"datetime="2014-03-07 09:54:41"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JavaJ2EE-Java_字符集--java字符串的各种编码转换/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JavaJ2EE-Java_字符集--java字符串的各种编码转换" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/55/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/53/">53</a></li><li><a class="page-number" href="/page/54/">54</a></li><li><a class="page-number" href="/page/55/">55</a></li><li class="active"><li><span class="page-number current">56</span></li><li><a class="page-number" href="/page/57/">57</a></li><li><a class="page-number" href="/page/58/">58</a></li><li><a class="page-number" href="/page/59/">59</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/57/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 16:47:45</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
