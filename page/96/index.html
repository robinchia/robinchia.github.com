
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 96 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-虚拟化_Citrix--SmartAuditor/">SmartAuditor</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-虚拟化_Citrix--SmartAuditor/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="smartauditor">SmartAuditor</h1>
<p><img src="" alt=""> <img src="" alt=""> Citrix Presentation Server SmartAuditor
Joël Stöcker Senior Systems Engineer EMEA, AVG
1 | © 2007 Citrix Systems, Inc.—All rights reserved.
Session Agenda
• What is SmartAuditor? • Technical Overview • Demo
2 | © 2007 Citrix Systems, Inc.—All rights reserved.
What is SmartAuditor?
An exclusive feature of Platinum Edition that uses flexible policies to trigger recordings of Presentation Server sessions automatically for later playback
• SmartAuditor leverages Presentation Server to provide:
• • • •
Policy-based recording of an ICA session &amp; associated session information Managed recording &amp; logging of ICA sessions to persistent storage Ability to search a catalog of recorded ICA sessions Playback of recorded ICA sessions for detailed analysis
• Analogy: SmartAuditor is like a Digital Video Recorder
3 | © 2007 Citrix Systems, Inc.—All rights reserved.
SmartAuditor
For improved compliance and risk management
• Enhanced auditing for regulatory compliance
• Monitor activity involving sensitive data • Record administrators screen to a video log for change management of critical systems
• Powerful application session recording for risk mitigation and eDiscovery support
• Capture screen updates, including mouse-clicks and keystrokes, to a video file • Configure monitoring of a specific user, application or server • Trusted digitally signed recording
• Accelerated problem resolution
• Replay actual screen activity at exact moment of application failure for fast troubleshooting
Advanced
Enterprise
Platinum
4 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> <img src="" alt=""> SmartAuditor – How It Works
Configure Capture Audit
Configure
Administrator selects which users, applications and servers to monitor Efficiently stores on-screen activity to video file in a central location and digitally signs each recording Administrative, helpdesk, and auditing teams can search the archive and review captured activity using an easy-to-use player
Capture
Audit
Select triggers for automatic capture
5 | © 2007 Citrix Systems, Inc.—All rights reserved.
System auto-captures and archives activity
Review captured activity
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Advantages of SmartAuditor technology
Capture screen updates to video Quickly prepare video evidence for litigation Digitally signed account of application usage
File
Record application failure for faster analysis
Monitor suspicious activity
6 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> SmartAuditor Architectural Overview
7 | © 2007 Citrix Systems, Inc.—All rights reserved.
Architecture Overview
Unsecure Network
SmartAuditor Agent
Secure Datacenter
SmartAuditor Server SmartAuditor Player
0 Configure policies 1 Connection 2 Policy 2 Data
Establish ICA
1
2
2
PS Farm
Verify recording
DB
4
Send Session
0
3
5
Log Session Data 3 and Write to Storage
3rd Party Archive Solution
Storage SmartAuditor Policy Console
4 Data
Retrieve Session
Presentation Server Clients
5 Archive files
8 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> SmartAuditor recording and logging</p>
<ol>
<li>User accesses server-side virtualized
application running on Presentation Server
2 3
SmartAuditor Server</li>
<li>SmartAuditor agent begins recording
the session while it checks with SmartAuditor server whether session should be recorded</li>
<li>Agent continues recording session 4. SmartAuditor server stores metadata
and session recording
1
Presentation Server Client Presentation Server with SmartAuditor Agent Metadata and recording stream
4
9 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> Playback</li>
<li><ol>
<li><ol>
<li><ol>
<li><ol>
<li><ol>
<li>Authorized personnel accesses the player Initiate a search of the metadata records Search results are returned Selects recording of interest Retrieves log file from persistent storage Plays log file within playback window
2 3 5 6 4 1
SmartAuditor Server
10 | © 2007 Citrix Systems, Inc.—All rights reserved.
SmartAuditor Player
Security Auditor
<img src="" alt=""> <img src="" alt=""> SmartAuditor Technical Overview
11 | © 2007 Citrix Systems, Inc.—All rights reserved.
Content
• Components in detail • Design Considerations and Scalability • Security • POC Best Practices • Installation • Configuration • Let&#39;s take a look…
12 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> Components in Detail
13 | © 2007 Citrix Systems, Inc.—All rights reserved.
Architecture Overview
Unsecure Network
SmartAuditor Agent
Secure Datacenter
SmartAuditor Server SmartAuditor Player
1 Connection 2 Policy
Establish ICA
Verify recording
1
2
2
Presentation Server Farm
DB
4
2 Data
Send Session
3
5
Log Session Data 3 and Write to Storage
3rd Party Archive Solution
Storage SmartAuditor Policy Console
4 Data
Retrieve Session
Presentation Server Clients
5 Archive files
14 | © 2007 Citrix Systems, Inc.—All rights reserved.
Administration - SmartAuditor Policy Console
• The SmartAuditor Policy Console provides the ability to manage policies related to recording of ICA sessions • The SmartAuditor Policy Console is implemented as an MMC Console Snap-in • Installation pre-requisites (verified before installation):
• Windows XP, Vista or Windows Server 2003 (this can be a Presentation Server) • Microsoft .NET Framework 2.0
15 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> SmartAuditor Agent
• The SmartAuditor Agent is the component which will be installed on the Presentation Server(s) • Responsible for recording session data • The SmartAuditor Driver is installed as part of the agent and is responsible for gathering session recording data
• This component will only be exposed in the Admin guide and other troubleshooting docs
• Presentation Server Platinum License is required • Installation pre-requisites
• • • • Presentation Server 4.5 with Hotfix Rollup Pack 1 Windows Server 2003 Microsoft .NET Framework 2.0 Microsoft Message Queuing (MSMQ)
Capture
16 | © 2007 Citrix Systems, Inc.—All rights reserved.
SmartAuditor Agent - Overview
3
Get session metadata from MFCOM and various Win32 functions To SmartAuditor Broker
4
MFCOM Win32 API VDs VDs VDs WDICA WDICA WDICA PD TD PD /TD PD / /TD SA Driver SA Agent
To SmartAuditor Storage Manager (MSMQ)
5
6
IOCTLs to WDICA
Recording data and session information
2
To client
Recording data and TS/CPS session ID
1
17 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Administration - SmartAuditor Server
• SmartAuditor Broker
• Installed as an IIS 6.0 (or later)/ASP.NET 2.0 hosted web application • Responsible for communicating with the SmartAuditor Database to enforce policy query decisions and communicating with the SmartAuditor Player to manage access to session recordings
• SmartAuditor Storage Manager
• Installed as a Windows service • Tasks include:
• • • • Writing Session Recording data to disk Writes metadata to database Generates digital signatures Records performance data (use perfmon)
Configure
• Installation pre-requisites (verified before installation):
• Windows Server 2003 • Microsoft .NET Framework 2.0 • Microsoft Message Queuing (MSMQ)
18 | © 2007 Citrix Systems, Inc.—All rights reserved.
Administration - SmartAuditor Server
Temporary Restore Directory
To SmartAuditor Agent
IIS 6.0/ASP.NET 2.0 SmartAuditor Broker
4
1 3
Master File Master File Master Storage File Storage Storage SmartAuditor Database
SmartAuditor Storage Manager
2
From SmartAuditor Agent (MSMQ)
19 | © 2007 Citrix Systems, Inc.—All rights reserved.
Administration - SmartAuditor Database
• The Storage Manager writes session recording file metadata and policies in the SmartAuditor Database
• Can co-exist on SQL Server with other databases • Database schema installer will create appropriate login and user security settings • SQL Server can be clustered • Availability features such as replication and mirroring are supported
• Installation pre-requisites for Database:
• Windows 2000 or 2003 Server • Runs on any edition of SQL Server 2005, including SQL Server 2005 Express Edition SP1 • SP2 has not been tested, so is not supported at this time • Microsoft .NET Framework 2.0
20 | © 2007 Citrix Systems, Inc.—All rights reserved.
Administration - SmartAuditor Database
• Holds session metadata, policies and custom event metadata • Session metadata is approximately 1KB per recording • Custom event metadata is also approximately 1KB per recording • All string data stored as UTF-16 • Indexes optimized for player searches
SmartAuditor Database SmartAuditor Storage Manager
21 | © 2007 Citrix Systems, Inc.—All rights reserved.
SmartAuditor Data storage
• Session recording data is stored on a central file store in flat files
• Multiple directories can be defined • Storage Manager will distribute files over directories
• Directories are created by year, month and day
• E.g. E:\Recordings\2007\10\30
• SmartAuditor leverages Citrix ICA protocol to enable session recordings file sizes to be much smaller than other video protocols • Files sizes are dependent upon the graphical content of the application
22 | © 2007 Citrix Systems, Inc.—All rights reserved.
SmartAuditor Player
• The application used to replay Presentation Server session recordings captured by the SmartAuditor software • Only interacts with SmartAuditor Broker component
• Annotation and Bookmarks can be set and are stored locally on the machine
• Search option for metadata
• E.g. date/time, user, application, server, etc
Audit
• Installation pre-requisites
• Windows XP, Vista or Windows Server 2003 • Microsoft .NET Framework 2.0
23 | © 2007 Citrix Systems, Inc.—All rights reserved.
Other Components and Utilities
• SmartAuditor Authorization Console
• A utility that enables SmartAuditor Server administrators to add users to pre-determined user roles
• SmartAuditor Custom Event API
• API for the SmartAuditor software which enables ISVs to inject custom data through a thirdparty application into a session recording
• SmartAuditor Player SDK
• An SDK for use by ISVs to write third-party SmartAuditor Player extensions which can display custom event data injected into the recorded session using the SmartAuditor Custom Event API
• icldb
• A command line utility that enables you to run queries and perform maintenance of the SmartAuditor Database
• iclstat
• A command line utility for the SmartAuditor Server that enables you to view metadata information about a session recording file
24 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> Design Considerations and Scalability
25 | © 2007 Citrix Systems, Inc.—All rights reserved.
Single-Server Scenario
Presentation Server 4.5 Platinum Edition Security Auditor Workstation
SmartAuditor Agent SmartAuditor Server SmartAuditor Database SmartAuditor Policy Console
SmartAuditor Player
26 | © 2007 Citrix Systems, Inc.—All rights reserved.
Two-Server Scenario
Presentation Server 4.5 Platinum Edition SmartAuditor Server Security Auditor Workstation
SmartAuditor Agent
SmartAuditor Server SmartAuditor Database SmartAuditor Policy Console
SmartAuditor Player
27 | © 2007 Citrix Systems, Inc.—All rights reserved.
Multiple-Server Scenario
Presentation Server 4.5 Platinum Edition SmartAuditor Server Database Server
SmartAuditor Agent Management Workstation
SmartAuditor Server Security Auditor Workstation
SmartAuditor Database
Storage (e.g. SAN, NAS)
SmartAuditor Policy Console
28 | © 2007 Citrix Systems, Inc.—All rights reserved.
SmartAuditor Player
Single Server Scalabilty
• Current SSS testing show about a 1-5% overhead for SmartAuditor
PS 4.5 FP 1 SmartAuditor
29 | © 2007 Citrix Systems, Inc.—All rights reserved.
SmartAuditor Storage
Estimated Recording Size Storage Needs
&lt; 200GB for 10,000 users
/<em> Estimated file size for 8 hour recording. Typical interaction = e.g. Microsoft Outlook Non-Stop interaction = e.g. Microsoft Excel
/</em> Assumes 50% typical and 50% non-stop interaction sessions with a duration of 8 hours. All calculations use estimated recording sizes.
30 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> Security
31 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> SmartAuditor Security
• SmartAuditor is designed to have the most secure configuration out-of-the-box
32 | © 2007 Citrix Systems, Inc.—All rights reserved.
Security
• SmartAuditor Agent
• Non-administrator users have no means of disabling recording or accessing recorded data • All Presentation Server configuration settings for SmartAuditor are in the registry with strong ACL security; nonadministrators cannot even view settings
• SmartAuditor Server
• Recordings can be digitally signed with a certificate • The SmartAuditor Storage Manager service is required to run as “Local System” but has all unused privileges removed • The SmartAuditor Broker runs as “Network Service” (i.e., less privileged than “Local System”) and has all unused privileges removed
33 | © 2007 Citrix Systems, Inc.—All rights reserved.
Security (cont’d)
• Communications
• SSL communication option is recommended for both the control channel (i.e., to the SmartAuditor Broker) and data channel (i.e., MSMQ) • Client authentication to server is Windows Authentication only
• SmartAuditor Player
• Only authorized users are able to search or download recorded session files • Playback Protection: encrypts recorded session files before downloading to the player • Download of files using the “Live Playback” feature is less secure than viewing a completed recording as the live downloaded data is not signed nor encrypted using playback protection
34 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> SmartAuditor POC Best Practices
35 | © 2007 Citrix Systems, Inc.—All rights reserved.
Things to know for Proof Of Concept setup
• If no certificate used, disable HTTPS in multiple places (see Admin Guide Page 68) • If database instance not designated correctly during installation, must uninstall and reinstall • Cannot use autorun to install from a network share • SQL Server Express 2005 works fine for database • Does not integrate with Desktop Server
36 | © 2007 Citrix Systems, Inc.—All rights reserved.
Things to know for POC setup (cont’d)
• Hotfix PSE450R01W2K3011 required • Default policy is do not record • Workgroup works for single server; not supported for multiple servers • When auditing based on application, only first application is used for decision
• May need to silo app or disable session sharing
• A 10.15 ICA recording cannot be played with the Player built on 10.1 client
37 | © 2007 Citrix Systems, Inc.—All rights reserved.
Keep in Mind . . .
• Disable SmartAuditor on servers where recording is not required
• Initially starts to record until policy dictates otherwise
• Initial popup can be customized, including language • Can configure multiple farms to use a single SmartAuditor server; SmartAuditor Agent can only point to one server at a time • Large files are rolled over based on configured file size or duration (whichever occurs first) • Not recommended to publish the Player as a CPS application because of high memory requirements
38 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> Installation
39 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> Installation
40 | © 2007 Citrix Systems, Inc.—All rights reserved.
Installation Order</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li>CPS • HRP1, Platinum license, and set to Platinum edition • Hotfix PSE450R01W2K3011 2. SmartAuditor Server • Install SQL Server 2005 (full or Express) • Install and configure SmartAuditor Administration
• Database • Server • Policy Console</li>
<li>SmartAuditor Agent • Install and configure SmartAuditor Agent 4. Workstation • Install and configure SmartAuditor Player
41 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> Configuration
42 | © 2007 Citrix Systems, Inc.—All rights reserved.
Basic Configuration SmartAuditor Server
• SmartAuditor Server Properties:
• Set file storage location (if different from default) • Optional configuration:
• • • • Set signing certificate Modify roll-over thresholds Modify playback settings Modify notification settings
• SmartAuditor Authorization Console:
• Assign correct users to the Player, PolicyQuery and Policy Administrator roles
• SmartAuditor Policy Console:
• Create recording policy (if required) • Set active recording policy
43 | © 2007 Citrix Systems, Inc.—All rights reserved.
Basic Configuration SmartAuditor Agent
• SmartAuditor Agent Properties: • Enable session recording (default) • Optional configuration:
• Custom event recording • Connection settings: • SmartAuditor Server • MSMQ Protocol/port • MSMQ message life • SmartAuditor Broker Protocol/port
44 | © 2007 Citrix Systems, Inc.—All rights reserved.
Basic Configuration SmartAuditor Player
• SmartAuditor Player options: • Add Server • Optional configuration:
• Seek response time • Player search settings • Player Cache settings
45 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> Let’s take a look...
46 | © 2007 Citrix Systems, Inc.—All rights reserved.
<img src="" alt=""> <img src="" alt=""> Reference Documentation
• This slide deck • SmartAuditor Administrator’s Guide
• CTX113599
<a href="http://support.citrix.com/article/CTX113599" target="_blank">http://support.citrix.com/article/CTX113599</a>
• Built-in SmartAuditor player help • Knowledge Base articles
• Building a Highly Scalable SmartAuditor Server [CTX114799] • Citrix SmartAuditor Database Maintenance How to Archive and Restore Session Recordings [CTX114818] • Troubleshooting Recording Issues in Citrix SmartAuditor [CTX114819]
47 | © 2007 Citrix Systems, Inc.—All rights reserved.
48 | © 2007 Citrix Systems, Inc.—All rights reserved.
49 | © 2007 Citrix Systems, Inc.—All rights reserved.</li>
</ol>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/虚拟化_Citrix/">虚拟化_Citrix</a></li></span></span> | <span class="tags">Tagged <a href="/tags/虚拟化_Citrix/" class="label label-primary">虚拟化_Citrix</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-虚拟化_Citrix--SmartAuditor/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-虚拟化_Citrix--SmartAuditor" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-虚拟化_Citrix--ConnectingThroughWindowsFirewallWindows/">Connecting Through Windows Firewall (Windows)</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-虚拟化_Citrix--ConnectingThroughWindowsFirewallWindows/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="connecting-through-windows-firewall-windows-">Connecting Through Windows Firewall (Windows)</h1>
<p><a href="http://msdn.microsoft.com/en-us/" title="Home" target="_blank">Home</a> <a href="http://msdn.microsoft.com/en-us/library" title="Library" target="_blank">Library</a> <a href="http://msdn.microsoft.com/en-us/bb188199.aspx" title="Learn" target="_blank">Learn</a> <a href="http://msdn.microsoft.com/en-us/aa570309.aspx" title="Downloads" target="_blank">Downloads</a> <a href="http://msdn.microsoft.com/en-us/aa570318.aspx" title="Support" target="_blank">Support</a> <a href="http://msdn.microsoft.com/en-us/aa497440.aspx" title="Community" target="_blank">Community</a> <a href="https://login.live.com/login.srf?wa=wsignin1.0&amp;rpsnv=11&amp;ct=1295403418&amp;rver=6.0.5276.0&amp;wp=MCLBI&amp;wlcxt=msdn%24msdn%24msdn&amp;wreply=http:%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Faa389286.aspx&amp;lc=1033&amp;cb=&amp;id=254354" title="Sign in" target="_blank">Sign in</a>| <a href="http://msdn.microsoft.com/en-us/library/preferences/locale/?returnurl=%252fen-us%252flibrary%252faa389286.aspx" title="中国（简体中文）" target="_blank">中国（简体中文）</a>| <a href="http://msdn.microsoft.com/en-us/library/preferences/experience/?returnurl=%252fen-us%252flibrary%252faa389286.aspx" title="Preferences" target="_blank">Preferences</a></p>
<p><a href="http://msdn.microsoft.com/en-us/library/aa389286.aspx#" target="_blank"><img src="&quot;Search&quot;" alt="Search"></a></p>
<p><img src="" alt=""></p>
<p><a href="http://msdn.microsoft.com/en-us/library/ms123401.aspx" title="MSDN Library" target="_blank">MSDN Library</a>
<img src="" alt=""></p>
<p><a href="http://msdn.microsoft.com/en-us/library/ee663300(v=VS.85" target="_blank">Windows Development</a>.aspx &quot;Windows Development&quot;)
<img src="" alt=""></p>
<p><a href="http://msdn.microsoft.com/en-us/library/ee663258(v=VS.85" target="_blank">Administration and Management</a>.aspx &quot;Administration and Management&quot;)
<img src="" alt=""></p>
<p><a href="http://msdn.microsoft.com/en-us/library/aa394582(v=VS.85" target="_blank">Windows Management Instrumentation</a>.aspx &quot;Windows Management Instrumentation&quot;)
<img src="" alt=""></p>
<p><a href="http://msdn.microsoft.com/en-us/library/aa393964(v=VS.85" target="_blank">Using WMI</a>.aspx &quot;Using WMI&quot;)
<img src="" alt=""></p>
<p><a href="http://msdn.microsoft.com/en-us/library/cc512236(v=VS.85" target="_blank">Creating WMI Clients</a>.aspx &quot;Creating WMI Clients&quot;)
<img src="" alt=""></p>
<p><a href="http://msdn.microsoft.com/en-us/library/aa389290(v=VS.85" target="_blank">Connecting to WMI on a Remote Computer</a>.aspx &quot;Connecting to WMI on a Remote Computer&quot;)</p>
<p><img src="" alt="">
<a href="http://msdn.microsoft.com/en-us/library/aa389286(v=VS.85" target="_blank">Connecting Through Windows Firewall</a>.aspx &quot;Connecting Through Windows Firewall&quot;) <img src="" alt="Separator"></p>
<p>Community Content</p>
<p><a href="http://msdn.microsoft.com/en-us/library/aa389286.aspx#CommunityContent" title="User" target="_blank"><img src="" alt="Avatar"></a></p>
<ul>
<li>Add code samples and tips to enhance this topic.
<a href="http://msdn.microsoft.com/en-us/library/aa389286.aspx#CommunityContent" title="More..." target="_blank">More...</a>
<a href="http://msdn.microsoft.com/en-us/library/aa389286.aspx#" target="_blank"><img src="&quot;Expand&quot;" alt="Expand"> <img src="&quot;Minimize&quot;" alt="Minimize"></a></li>
</ul>
<p><a href="http://msdn.microsoft.com/en-us/library/default.aspx" target="_blank"><img src="&quot;MSDN&quot;" alt="MSDN"></a><img src="" alt=""></p>
<h1 id="connecting-through-windows-firewall">Connecting Through Windows Firewall</h1>
<p>The <a href="http://msdn.microsoft.com/en-us/library/aa364727.aspx" target="_blank">Windows Firewall</a> (formerly known as Internet Connection Firewall) service and Distributed Component Object Model (DCOM) can cause access denied errors (such as an &quot;RPC Server Unavailable&quot; error - 0x800706ba) when your remote computers and accounts, used for remote connections, are not properly configured.</p>
<p><strong>Note</strong>  Content in this topic applies to Windows XP with Service Pack 2 (SP2) and Windows Server 2003 with Service Pack 1 (SP1). For information that applies to Windows Vista, see <a href="http://msdn.microsoft.com/en-us/library/aa822854.aspx" target="_blank">Connecting to WMI Remotely Starting with Vista</a>.
<strong>Windows Server 2003 with SP1:  </strong>The Windows Firewall is not enabled by default. <strong>Windows XP with SP2:  </strong>The Windows Firewall is enabled by default.</p>
<p>Resetting the firewall settings will enable the firewall—regardless of the platform.</p>
<p><strong>Windows Server 2003 and Windows XP:  </strong>Windows Firewall is not available. Use Internet Connection Firewall.</p>
<p>When obtaining data from a remote computer, WMI must establish a DCOM connection from Computer A (the local computer) to Computer B (the remote computer)—this is shown in the diagram as Connection 1. To establish this connection, both Windows Firewall and DCOM on Computer B must be configured appropriately. The configuration must be done locally on Computer B either by changing the Group Policy settings, by executing NETSH commands, or by executing a script locally. Windows Firewall does not support any remote configuration. The following sections describe how to configure Connection 1 and Connection 2 using NETSH commands and the Group Policy editor. For more information about configuring the connections with a script, see <a href="http://go.microsoft.com/FWLink/?LinkId=84425" target="_blank"><strong><a href="http://www.microsoft.com/technet/community/columns/scripts/sg1104.mspx/#EJAA">http://www.microsoft.com/technet/community/columns/scripts/sg1104.mspx/#EJAA</a></strong></a>.</p>
<p>The following diagram shows the relationship of WMI, the Windows Firewall, and DCOM when a script or another WMI client makes an asynchronous call to obtain data from WMI. Synchronous and semisynchronous calls only make Connection 1. Connection 2 occurs only with asynchronous calls. If the script or application made an <a href="http://msdn.microsoft.com/en-us/library/aa390790.aspx#wmi.gloss_asynchronous_method" target="_blank"><em>asynchronous</em></a> call, Connection 2 from Computer B to Computer A delivers the results. This delivery is the callback to the <a href="http://msdn.microsoft.com/en-us/library/aa390836.aspx#wmi.gloss_sink" target="_blank"><em>sink</em></a>. When possible, semisynchronous calls should be made instead of asynchronous calls. The performance of semisynchronous calls is almost as good as asynchronous calls and semisynchronous calls are more secure.</p>
<p><img src="&quot;WMI client making an asynchronous call to obtain data from WMI&quot;" alt="WMI client making an asynchronous call to obtain data from WMI"></p>
<p><strong>WMI client making an asynchronous call to obtain data from WMI</strong></p>
<p>To successfully connect from Computer A to Computer B when the Windows Firewall is enabled on Computer B, some configuration of firewall settings is necessary. The following procedure helps you configure Connection 1.</p>
<p><img src="&quot;Aa389286.wedge(en-us,VS.85" alt="Aa389286.wedge(en-us,VS.85).gif">.gif&quot;)<strong>To configure Connection 1</strong></p>
<ol>
<li>Ensure that the user account that is on Computer A is a local administrator on Computer B.</li>
</ol>
<p>If the user account that is on Computer A is not an administrator on Computer B, but the user account has Remote Enable permission on Computer B, then the user must also be given DCOM Remote Launch and Remote Activation privileges on Computer B by running <strong>Dcomcnfg.exe</strong> at the command prompt. For more information, see the remote launch and activation permissions procedure in <a href="http://msdn.microsoft.com/en-us/library/aa393266.aspx" target="_blank">Securing a Remote WMI Connection</a>. The 0x80070005 error occurs when this privilege is not set. For more information, see <a href="http://msdn.microsoft.com/en-us/library/aa822575.aspx" target="_blank">Access to WMI Namespaces</a>.</p>
<ol>
<li>Allow for remote administration on Computer B.</li>
</ol>
<p>You can use either the Group Policy editor (Gpedit.msc) or a script to enable the Windows Firewall: Allow remote administration exception, or use a netsh firewall command at the command prompt to allow for remote administration on Computer B. The following command enables this feature.</p>
<p><strong>netsh firewall set service**</strong>RemoteAdmin<strong>**enable</strong></p>
<p>If you would rather use the Group Policy editor than the NETSH commands above, use the following steps in the Group Policy editor (Gpedit.msc) to enable &quot;Allow Remote Administration&quot; on Computer B.</p>
<ol>
<li>Under the <strong>Local Computer Policy</strong> heading, double-click <strong>Computer Configuration</strong>.</li>
<li>Double-click <strong>Administrative Templates</strong>, <strong>Network</strong>, <strong>Network Connections</strong>, and then <strong>Windows Firewall</strong>.</li>
<li>If the computer is in the domain, then double-click <strong>Domain Profile</strong>; otherwise, double-click <strong>Standard Profile</strong>.</li>
<li>Click <strong>Windows Firewall: Allow remote administration exception</strong>.</li>
<li>On the <strong>Action</strong> menu, select <strong>Properties</strong>.</li>
<li>Click <strong>Enable</strong>, and then click <strong>OK</strong>.</li>
</ol>
<p>The connection from Computer B to Computer A (Connection 2 in the diagram above) is only required when the client script or application makes an asynchronous call to the remote computer. When possible, semisynchronous calls should be made instead of asynchronous calls. The call performance of semisynchronous calls is almost as good as asynchronous calls and semisynchronous calls are more secure. For more information, see <a href="http://msdn.microsoft.com/en-us/library/aa384832.aspx" target="_blank">Calling a Method</a> or <a href="http://msdn.microsoft.com/en-us/library/aa392903.aspx" target="_blank">Querying WMI</a>. The following procedure helps you configure Connection 2.</p>
<p><img src="&quot;Aa389286.wedge(en-us,VS.85" alt="Aa389286.wedge(en-us,VS.85).gif">.gif&quot;)<strong>To configure Connection 2</strong></p>
<ol>
<li>If the Windows Firewall is enabled on Computer A, enable the &quot;Allow Remote Administration&quot; exception (step 2 in the procedure above) and open the DCOM port TCP 135 on Computer A. If this port is not open, the error 0x800706ba will occur. You can open port 135 using the following command.</li>
</ol>
<p><strong>netsh firewall add portopening**</strong>protocol=<strong><strong>tcp</strong></strong>port=<strong><strong>135</strong></strong>name=<em>**DCOM_TCP135</em></p>
<ol>
<li>Add the client application or script, which contains the sink for callback to the Windows Firewall Exceptions List on Computer A. If the client is a script or a MMC snap-in, the sink is often Unsecapp.exe. For these connections, add %windir%\system32\wbem\unsecapp.exe to the Windows Firewall application exceptions list. You can add Unsecapp.exe with the following command.</li>
</ol>
<p><strong>netsh firewall add allowedprogram**</strong>program=<strong><strong>%windir%\system32\wbem\unsecapp.exe</strong></strong>name=<strong>**UNSECAPP</strong></p>
<p>Generally a C++ application has a sink written for the application. In that case, the application sink should be added to the firewall exceptions.</p>
<ol>
<li>If Computer B is either a member of WORKGROUP or is in a different domain that is untrusted by Computer A, then Connection 2 is created as an Anonymous connection. An anonymous connection fails with either the 0x80070005 error or the 0x8007000e error unless Anonymous connections are given the DCOM Remote Access permission on Computer A. The steps to grant DCOM remote access permissions are listed in <a href="http://msdn.microsoft.com/en-us/library/aa393266.aspx" target="_blank">Securing a Remote WMI Connection</a>.</li>
</ol>
<h3 id="-related-topics"><a href=""></a>Related Topics</h3>
<p><a href="http://msdn.microsoft.com/en-us/library/aa389290.aspx" target="_blank">Connecting to WMI on a Remote Computer</a><a href="http://msdn.microsoft.com/en-us/library/aa389284.aspx" target="_blank">Connecting Between Different Operating Systems</a><a href="http://msdn.microsoft.com/en-us/library/aa393266.aspx" target="_blank">Securing a Remote WMI Connection</a><a href="http://msdn.microsoft.com/en-us/library/aa389769.aspx" target="_blank">Creating Processes Remotely</a><a href="http://msdn.microsoft.com/en-us/library/aa393614.aspx" target="_blank">Setting Security on an Asynchronous Call</a><a href="http://msdn.microsoft.com/en-us/library/aa393615.aspx" target="_blank">Setting Security on an Asynchronous Call in VBScript</a></p>
<p><a href="mailto:wsddocfb@microsoft.com?subject=Documentation feedback [wmisdk\wmi]:  Connecting Through Windows Firewall  RELEASE: (1/6/2011">Send comments about this topic to Microsoft</a>&amp;body=PRIVACY STATEMENTThe SDK team uses the feedback submitted to improve the SDK documentation. We do not use your email address for any other purpose. We will remove your email address from our system after the issue you are reporting has been resolved. While we are working to resolve this issue, we may send you an email message to request more information about your feedback. After the issues have been addressed, we may send you an email message to let you know that your feedback has been addressed.For more information about Microsoft&#39;s privacy policy, see <a href="http://privacy.microsoft.com/en-us/default.aspx" target="_blank">http://privacy.microsoft.com/en-us/default.aspx</a>. &quot;Send comments about this topic to Microsoft&quot;)</p>
<p>Build date: 1/6/2011
Community Content <a href="http://msdn.microsoft.com/en-us/library/community/add/aa389286.aspx" title="Add" target="_blank">Add</a></p>
<p><a href="http://msdn.microsoft.com/en-us/library/community-edits.rss?topic=aa389286|en-us|VS.85" title="Annotations" target="_blank"><img src="" alt="Annotations"></a> <a href="http://msdn.microsoft.com/en-us/library/community-msdnwikifaq.aspx" title="FAQ" target="_blank">FAQ</a>
© 2011 Microsoft Corporation. All rights reserved. <a href="http://msdn.microsoft.com/cc300389.aspx" target="_blank">Terms of Use</a> | <a href="http://www.microsoft.com/library/toolbar/3.0/trademarks/en-us.mspx" target="_blank">Trademarks</a> | <a href="http://www.microsoft.com/info/privacy.mspx" target="_blank">Privacy Statement</a> | <a href="http://msdn.microsoft.com/en-us/library/aa389286.aspx#footerLink" title="Feedback" target="_blank">Feedback <img src="" alt="Feedback"></a></p>
<p>Feedback</p>
<p><a href="">x</a></p>
<p>Tell us about your experience...</p>
<p>Did the page load quickly?
Yes  No</p>
<p>Do you like the page design?
Yes  No</p>
<p>How useful is this topic?
<img src="" alt=""></p>
<p>Tell us more
Enter description here.</p>
<p><img src="" alt="DCSIMG"></p>
<p><a href="http://www.omniture.com/" title="Web Analytics" target="_blank"><img src="" alt=""></a>
<img src="" alt="Page view tracker"></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/虚拟化_Citrix/">虚拟化_Citrix</a></li></span></span> | <span class="tags">Tagged <a href="/tags/虚拟化_Citrix/" class="label label-primary">虚拟化_Citrix</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-虚拟化_Citrix--ConnectingThroughWindowsFirewallWindows/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-虚拟化_Citrix--ConnectingThroughWindowsFirewallWindows" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-虚拟化_Citrix--Xenserver55服务器HA功能的实现/">Xenserver5.5服务器HA功能的实现</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-虚拟化_Citrix--Xenserver55服务器HA功能的实现/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="xenserver5-5-ha-">Xenserver5.5服务器HA功能的实现</h1>
<p><img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
Xenserver 最新的版本为 5.5，此版本支持最新的 HA（High Availability） 、 snapshot 等功能，最近发现挺多人询问关于 HA 功能的使用。其实 HA 的功能在 Xenserver 中实现起来非常简单，只要满足以下几个条件即可 （1） 虚拟机必须置于共享存储中，例如 iSCSI、FC SAN； （2） 需要两台以上的 Xenserver，并且设置了资源池 pool； （3） 所有 Xenserver 有静态 IP 地址； （4） 购买的 Xenserver 版本需要支持 HA（即 Enterprise 版本） ，具体的版本请 参考下列版本比较；
接下介绍如何在 Xenserver 中实现 HA 的功能 环境说明 由 于 没 有 实 际 的 物 理 服 务 器 来 安 装 Xenserver ， 只 能 选 择 在 VMware vSphere4.0 上安装 Xenserver，并安装了一台 Openfiler 来提供 iSCSI 服务。由于
1 / 17
<img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
是在 VMware vSphere，因此，我丌能在安装好的 Xenserver 里启劢 Windows 的 虚拟机，只能安装一台 Linux 系统的虚拟主机来作为此次演示的虚拟机。 选 择 安 装 Windows XP 虚 拟 机 的 话 ， 在 启 劢 时 ， 会 出 现 如 下 提 示
服务器 Xenserver01 Xenserver02 Openfiler XenCenter
版本 5.5 5.5 2.3 5.5
IP 192.168.253.97 192.168.253.98 192.168.253.92 192.168.253.5
（1） 创建 Xenserver 资源池， 打开 XenCenter， 然后选择 “Tool” “New Tool” — ， 按照向导输入 Pool 的名称，然后添加我们的 Xenserver 服务器 （2） 为资源池 Xen 添加 iSCSI 共享存储。打开 XenCenter，选择“Storage”— “New Storage Repository” ，然后选择“iSCSI”
2 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
（3） 输入 iSCSI 的名称和服务器地址，并输入 iSCSI 的传输端口，默认是 3260 输入后，点击“Discover IQNs”和“Discover LUNs”
（4） 由于是新增的 iSCSI，因此，需要先对其迚行格式化操作。
3 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
（5） 完成后，为资源池 Xen 开启 HA 功能。
（6） 开启 HA 的配置向导
4 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
（7） 选择 hearbeat SR，这里可以看到我们刚添加的 iSCSI 存储，选择该存储
5 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
（8） 指定 HA 的保护级别，指定资源池中的 Xenserver 出现问题时，虚拟机可 以自劢启劢
（9） 完成 HA 的设置
6 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
（10） 安装 Linux 虚拟机
7 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
8 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
9 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
10 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
（11） 修改 HA 的保护级别为“1” ，即开启保护
11 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
（12） 虚拟机运行在 Xenserver02 上， 接下来， 我们模拟 Xenserver02 出现故障， 我们在 VMware vCenter 上将 Xenserver02 的网卡设置到其他网络中
12 / 17
<img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
（13） 稍等片刻，在 XenCenter 中可以看到 Xenserver02 已经断开，虚拟机 “Redhat Enterprise Linux 5.2”自劢重启并切换到 Xenserver01 上运行
13 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
（14） 再次查看资源池 Xen 的 HA 设置， 可以看到 Xenserver02 已经出现了故障， 由于只有单机，因此，HA 功能失效
14 / 17
<img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
（15） 当资源池 Xen 中的两台 Xenserver 都恢复通讯正常后， 功能自劢恢复， HA 我们也可以根据需要对 HA 的保护级别迚行修改，指定当运行虚拟机的 Xenserver 出现故障时，HA 的保护劢作是自劢切换还是重启虚拟机。   “Protect“开启 HA 对虚拟机的保护功能 “Restart if Possible“在 Xenserver 出现故障时，如果可能，则在资源池中另 外的 Xenserver 上重新启劢虚拟机  “Do Not Restart“在 Xenserver 出现故障时，丌重启虚拟机
15 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
16 / 17
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Xenserver5.5 服务器 HA 功能的实现
作者：Canvin Email：Jianshaowen@gmail.com
17 / 17</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/虚拟化_Citrix/">虚拟化_Citrix</a></li></span></span> | <span class="tags">Tagged <a href="/tags/虚拟化_Citrix/" class="label label-primary">虚拟化_Citrix</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-虚拟化_Citrix--Xenserver55服务器HA功能的实现/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-虚拟化_Citrix--Xenserver55服务器HA功能的实现" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-虚拟化_Citrix--SmartAuditorEventAPIOverview-1/">SmartAuditor Event API Overview</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-虚拟化_Citrix--SmartAuditorEventAPIOverview-1/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="smartauditor-event-api-overview-1">SmartAuditor Event API Overview-1</h1>
<p>SmartAuditor Event API
Overview
SmartAuditor provides the ability to record ICA sessions. The purpose of the SmartAuditor Event API is to allow third parties to augment session recordings with application specific event data. Arbitrary data can be added to the SmartAuditor recording stream in real-time during recording, and the same data can be retrieved in real-time during playback.
Basic Concept
The SmartAuditor Agent provides a simple COM interface that third party applications can use to add application specific event data into the recorded session. Session Recording
SmartAuditor Event Data during recording
Citrix Presentation Server
Third Party Published Application SmartAuditor Agent
LogData
IUserAPI
Published Application being recorded SmartAuditor Event API
Event Data
Recorded Stream Storage
The above diagram shows a published application running on Presentation Server with SmartAuditor session recording enabled. During the lifetime of the recorded session, the published application can add application specific event data into the recorded stream using the LogData function provided by the IUserApi interface. Application specific event data are time stamped as they are added into the recorded stream. The same event data will be available during playback of the recorded session, synchronized with the playback stream in real-time.
Session Playback
The above diagram shows how application event data are consumed during session playback. Event data are displayed in the Events and Bookmarks panel of the SmartAuditor Player. The Player can also deliver the event data as recorded to a third party consumer application built using the Player SDK. The delivery of event data is synchronized with the playback in real-time.
SmartAuditor Event API COM Server
The SmartAuditor Event API is provided as a COM Server hosted by the SmartAuditor Agent, installed on each computer running Presentation Server with SmartAuditor enabled. The SmartAuditor Event API can be enabled or disabled on a per-server basis. The default setting for each SmartAuditor Agent installation is for the COM interface to be disabled. Any attempts to connect to the interface will fail until it is enabled by the Presentation Server administrator. Please refer to the SmartAuditor Administrator’s Guide for more information on configuring the SmartAuditor Agent. When the SmartAuditor Event API is enabled, a COM interface called IUserApi is made available for third party applications to add event data to the recorded stream. The IUserApi interface contains only one function called LogData.
Event Data Storage
Event data is stored in the data stream within the session recording. If the searchable flag is set when the data is added to the recording stream, a database entry will be created and indexed against the fully qualified type associated with the data. As there is some overhead in storing each searchable event, this flag should only be set if there is an intention to search on the event text. See CTX114748 - Citrix SmartAuditor Database Schema for more information on the database storage.
<img src="" alt=""> SmartAuditor Event Data Playback
Event data added to SmartAuditor recording files are automatically available during playback. Event data are organized in a similar manner as bookmarks, and are listed in the Events and Bookmarks panel of the SmartAuditor Player. The following screenshot shows the event data as seen in the Events and Bookmarks panel (lower left corner) of the SmartAuditor Player:
Event items are labelled with a yellow dot, both in the Events and Bookmarks panel and on the player window timeline bar. Note that only the event text is displayed in the SmartAuditor Player; event binary data can only be retrieved through custom applications built on the SmartAuditor Player SDK (see the next section for more details.) Recordings containing event data originally recorded with the searchable flag set can be found using the SmartAuditor Player’s advanced search form as shown below. This allows searching by both event text and event type name.
<img src="" alt=""><br>SmartAuditor Player SDK
As indicated in the previous section, text associated with event data are automatically made available during playback within the SmartAuditor Player. Event data can also be accessed during playback via a set of library functions provided by the SmartAuditor Player SDK. The use of the Player SDK is optional. Its primary use is the rendering binary data associated with each event during playback. The Player SDK is based on an event notification or callback interface, where a third party application registers an event handler where event data can be delivered in real-time during session playback. The following C++ code fragment illustrates a typical lifecycle of an application making use of the SmartAuditor Player SDK:
// initialize Player SDK CtxPlay_Initialize(); // register event handler for all event type CtxPlay_RegisterEventHandler(MyEventHandler, L &quot;/<em>&quot;); // wait for event processing is completed (ie. via the CtxPlay_Abort() call) CtxPlay_WaitForCompletion(); // clean up CtxPlay_Dispose();
Note that the code fragment assumes that a callback function MyEventHandler is defined elsewhere. MyEventHandler is responsible for receiving event data and perform any processing as appropriate, for example, rendering event data in a human readable form.
SmartAuditor Event API COM Server
The SmartAuditor Event API is provided as a COM Server hosted by the SmartAuditor Agent, installed on each computer running Presentation Server with SmartAuditor enabled. When the SmartAuditor Event API is enabled, a COM interface called IUserApi is made available for third party applications to add event data to the recorded stream. The IUserApi interface contains only one function called LogData. ProgID The ProgID for the SmartAuditor Agent COM server is Citrix.SmartAuditor.Agent.UserApi. The ProgID is used to locate and instantiate the COM objects within the third party application.
LogData The LogData function will record provided event data into the recorded session file associated with the Presentation Server / Terminal Services session ID specified. All parameters are validated for length and format before data is recorded. If the supplied session ID is not a current Terminal Services session, or the supplied session is not being recorded by the SmartAuditor Agent, then the function call will be ignored and no error will be returned to the caller. This is to prevent the Event API being used as a means for detecting whether a particular session is actually being recorded. The fully qualified type name associated with the event data is of the form typePart1.typePart2.typePart3. The type parts can be any string, but general good naming practise is CompanyName.Subsystem.Type. For example, AcmeInc.TradingApp.Transaction.
interface IUserApi : IDispatch { HRESULT LogData( [in] int sessionId, [in] BSTR typePart1, [in] BSTR typePart2, [in] BSTR typePart3, [in] BSTR text, [in] SAFEARRAY(byte)/</em> data, [in] byte searchable); };
Parameters sessionId ID of Presentation Server / Terminal Services session to log event data for. The session ID must be greater than or equal to 0. Logging data for unknown session IDs will simply be ignored (that is, no exception will be thrown). typePart1 Event type first part of the fully qualified type name. Length of each part must be between 1 and 32 characters and must not contain any “.” (dot) characters. typePart2 Event type second part of the fully qualified type name. Length of each part must be between 1 and 32 characters and must not contain any “.” (dot) characters. typePart3 Event type third (and final) part of the fully qualified type name. Length of each part must be between 1 and 32 characters and must not contain any “.” (dot) characters.
text Event text data. Length of string must be between 1 and 128 characters. data Event binary data. Length must be between 0 and 4096 bytes. searchable Flag indicating whether the text value is database searchable. If this flag is non-zero, a database entry indexed against the fully qualified type and text fields will be created in the SmartAuditor database for the event item. Return Values ERROR_SUCCESS (HRESULT value 0x00000000) if successful. If an invalid parameter value is detected, E_INVALIDARG (HRESULT value 0x8007057) is returned or if called from .NET managed code, a System.ArgumentException is thrown. Requirements Library Interface DLL
Interop.UserApi.idl Requires Interop.UserApi.dll</p>
<p>SmartAuditor Player SDK
CtxPlay_Initialize CtxPlay_Initialize is the initialization function which is called once to initialize the Player SDK.
BOOL <strong>stdcall CtxPlay_Initialize()
Parameters None Return Values The BOOL return value indicates whether the Player SDK initialization was successful. Requirements Header Library DLL See Also CtxPlay_UnregisterEventHandler
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
  CTXPLAY_EVENT_CALLBACK CTXPLAY_EVENT_CALLBACK is the prototype of the callback function used in CtxPlay_RegisterEventHandler.
typedef void (</strong>stdcall /<em> CTXPLAY_EVENT_CALLBACK) ( IN CONST WCHAR/</em> eventType, IN CONST WCHAR/<em> label, IN CONST BYTE/</em> data, IN DWORD dataLength, IN SYSTEMTIME frameTimeUtc, IN SYSTEMTIME frameTime );
Parameters eventType [in] Type of event this data was registered against. label [in] Unicode text identifying this event. data [in] Event data. dataLength [in] Count of bytes of the data parameter. frameTimeUtc [in] Time in UTC when this event occurred. frameTime [in] Time in the server local time when this event occurred. Requirements Header Library DLL See Also CtxPlay_RegisterEventHandler
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
  CtxPlay_RegisterEventHandler The CtxPlay_RegisterEventHandler function is used for registering a callback handler with the Player SDK. The callback handler receives events during the course of playback.
BOOL <strong>stdcall CtxPlay_RegisterEventHandler ( CTXPLAY_EVENT_CALLBACK handler, CONST WCHAR/<em> eventTypeFilter );
Parameters Handler The function that will be called upon an event being received from the SmartAuditor Player. eventTypeFilter A string identifying the type of events to receive notifications for. If a handler is registered as L&quot;/</em>&quot; then the handler will receive all events. Return Values The BOOL return value indicates whether the registration of the handler was successful. Requirements Header Library DLL See Also CtxPlay_UnregisterEventHandler
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
  CtxPlay_WaitForCompletion The CtxPlay_WaitForCompletion function waits for the completion of the event data processing or until CtxPlay_Abort is called. While event processing remains active, this routine will block.
void </strong>stdcall CtxPlay_WaitForCompletion()
Parameters None Return Values None Requirements Header Library DLL See Also CtxPlay_Abort
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
  CtxPlay_UnregisterAllEventHandlers The CtxPlay_UnregisterAllEventHandlers function un-registers all event handlers previously registered with CtxPlay_RegisterEventHandler.
void <strong>stdcall CtxPlay_UnregisterAllEventHandlers()
Parameters None Return Values None Requirements Header Library DLL See Also CtxPlay_RegisterEventHandler
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
  CtxPlay_Dispose The CtxPlay_Dispose function releases any resources that the Player SDK may have consumed.
void </strong>stdcall CtxPlay_Dispose()
Parameters None Return Values None Requirements Header Library DLL See Also CtxPlay_Initialize
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
  CtxPlay_Abort The CtxPlay_Abort function aborts the processing of events.
void __stdcall CtxPlay_Abort()
Parameters None Return Values None Requirements Header Library DLL
Declared in CtxPlaySDK.h Link to CtxPlaySDK.lib Requires CtxPlaySDK.dll
See Also CtxPlay_Initialize, CtxPlay_WaitForCompletion
Code Samples
Listed below are some code samples for logging and retrieving event data. Since the SmartAuditor Event API is implemented as a COM server, many programming languages are capable of being used as clients for logging event data. The code samples require the SmartAuditor Event API and Player SDK, which is available for download from the Citrix Developer Network <a href="http://support.citrix.com/" target="_blank">http://support.citrix.com/</a>.
Adding Event Data to Recorded Session
C/# In order to make use of the SmartAuditor Event API COM interface, you will need a .NET callable wrapper called Interop.UserApi.dll. You can find this DLL in the SmartAuditor Agent installation directory. The following code sample assumes that SmartAuditor Interop.UserApi.dll has been added as a reference in the C/# project.
using System; using System.Diagnostics; using System.Runtime.InteropServices; using Interop.UserApi; // Interop derived from IUserApi.idl
namespace UserApiSample { /// <summary> /// Class for logging SmartAuditor Event Data /// </summary> public class EventDataLogger { /// <summary> /// ProgID for SmartAuditor Event API /// </summary> private const string EventApiProgID = &quot;Citrix.SmartAuditor.Agent.UserApi&quot;; /// <summary> /// COM interface for calling the SmartAuditor Event API /// </summary> private IUserApi m_EventApi = null; /// <summary> /// Log event data for specified Terminal Services session /// </summary> /// <param name="sessionId">Terminal Services session ID</param> /// <param name="dataType1">part 1 of event data type</param> /// <param name="dataType2">part 2 of event data type</param> /// <param name="dataType3">part 3 of event data type</param> /// <param name="textData">event text data</param> /// <param name="binaryData">event binary data</param> /// <param name="searchable">indicate whether text data is searchable</param> public void LogData( int sessionId, string dataType1, string dataType2, string dataType3, string textData, byte[] binaryData, bool searchable) { try { if (null == m_EventApi) { // create instance of Event API COM object Type type = Type.GetTypeFromProgID(EventApiProgID, true); if (null != type) { object obj = Activator.CreateInstance(type); m_EventApi = (IUserApi)obj; } }
if (null != m_EventApi) { m_EventApi.LogData( sessionId, dataType1, dataType2, dataType3, textData, ref binaryData, Convert.ToByte(searchable) ); } else { Debug.WriteLine(&quot;Uninitialized Event API object&quot;); throw new InvalidComObjectException(&quot;Uninitialized Event API object&quot;); } } catch (System.Exception ex) { Debug.WriteLine(ex.Message); throw ex; } } } }
The following code fragment illustrates how to obtain the Terminal Session ID for the current application. Please refer to Microsoft Platform SDK documentation for more information on Terminal Services related functions.
/// <summary> /// Enum for TS session information /// </summary> public enum WTS_INFO_CLASS { WTSInitialProgram, WTSApplicationName, WTSWorkingDirectory, WTSOEMId, WTSSessionId, WTSUserName, WTSWinStationName, WTSDomainName, WTSConnectState, WTSClientBuildNumber, WTSClientName, WTSClientDirectory, WTSClientProductId, WTSClientHardwareId, WTSClientAddress, WTSClientDisplay, WTSClientProtocolType } /// <summary> /// ID for querying current TS session /// </summary> public const int WTS_CURRENT_SESSION = -1; /// <summary> /// pinvoke for WTSQuerySessionInformation /// </summary> [DllImport(&quot;Wtsapi32.dll&quot;)] public static extern bool WTSQuerySessionInformation( System.IntPtr hServer, int sessionId, WTS_INFO_CLASS wtsInfoClass, out System.IntPtr ppBuffer, out uint pBytesReturned);
/// <summary> /// Get the current TS session ID /// </summary> public int GetCurrentSessionID() { int sessionID = -1; uint bytesReturned = 0; System.IntPtr buffer = IntPtr.Zero; bool retCode = WTSQuerySessionInformation( System.IntPtr.Zero, WTS_CURRENT_SESSION, WTS_INFO_CLASS.WTSSessionId, out buffer, out bytesReturned); if (retCode) { sessionID = Marshal.ReadInt32(buffer); } return sessionID; }
The following code fragment illustrates how event data is added to the session recording. The application is assumed to be running as a published application, and the ICA session is currently being recorded. Note that no error will be generated if the ICA session is not being recorded; this is a security feature of the EventAPI to prevent users from determining if session recording is in effect.
try { // get the current Terminal Services session ID int sessionID = GetCurrentSessionID(); // create EventDataLogger instance EventDataLogger eventLogger = new EventDataLogger(); // log some event data eventLogger.LogData( sessionID, &quot;AcmeInc&quot;, &quot;TransactApp&quot;, &quot;Transaction&quot;, &quot;Order /#123 completed&quot;, new byte[0], true); } catch (System.Exception ex) { Debug.WriteLine(ex.Message); throw ex; }</p>
<p>Adding Event Data to Recorded Session
VB.Net In order to make use of the SmartAuditor Event API COM interface, you will need a .NET callable wrapper called Interop.UserApi.dll. You can find this DLL in the SmartAuditor Agent installation directory. The following code fragment assumes that SmartAuditor Interop.UserApi.dll has been added as a reference in the VB.Net project.
Imports System.Runtime.InteropServices &#39; Sub routine for logging event data Sub LogData( <em> ByVal sessionId As Int32, </em> ByVal text As String, <em> ByVal bytes As Byte(), </em> ByVal searchable As Byte) Dim eventApi As IUserApi = <em> CType(CreateObject(&quot;Citrix.SmartAuditor.Agent.UserApi&quot;), IUserApi) eventApi.LogData( </em> sessionId, <em> &quot;AcmeInc&quot;, </em> &quot;TransactApp&quot;, <em> &quot;Transaction&quot;, </em> textLabel.Text, <em> bytes, </em> searchable) End Sub</p>
<p>Retrieving Event Data during Session Playback
C++ The following code fragment illustrates a typical use of the SmartAuditor Player SDK to receive event data during session playback. Note that the /#include statement assumes that the SmartAuditor Player SDK is installed and available. This code uses the .NET extension to C++.
Using namespace System; /#include &quot;CtxPlaySDK.h&quot; //<em>/</em> /<em> Handle binary event data /</em>/ void HandleBinaryData(const BYTE/<em> data, int dataLength) { // handle binary data as appropriate... } //</em>/<em> /</em> Event data handler /<em>/ void __stdcall MyEventHandler( IN CONST WCHAR/</em> eventType, // type of event IN CONST WCHAR/<em> label, // event text data IN CONST BYTE/</em> data, // event binary data IN DWORD dataLength, // length of binary data IN SYSTEMTIME frameTimeUtc, // event time in UTC IN SYSTEMTIME frameTime) // event time in server local time { // display event information Console::WriteLine(L&quot;Event Received:&quot;); String^ typeString = gcnew String(eventType); Console::WriteLine(L&quot; Type: {0}&quot;, typeString); String^ labelString = gcnew String(label); Console::WriteLine(L&quot; Label: {0}&quot;, labelString); // display event time Console::WriteLine(L&quot; Time (UTC): {0}/{1}/{2} {3}:{4:d2}:{5:d2}&quot;, frameTimeUtc.wDay, frameTimeUtc.wMonth, frameTimeUtc.wYear, frameTimeUtc.wHour, frameTimeUtc.wMinute, frameTimeUtc.wSecond); Console::WriteLine(L&quot; Time (Local): {0}/{1}/{2} {3}:{4:d2}:{5:d2}&quot;, frameTime.wDay, frameTime.wMonth, frameTime.wYear, frameTime.wHour, frameTime.wMinute, frameTime.wSecond); // display binary data information Console::WriteLine(L&quot; Data ({0} bytes):&quot;, dataLength); // handle binary data HandleBinaryData(data, dataLength); Console::WriteLine(L&quot;---------------------------------------------------\n&quot;); } //<em>/</em> /<em> sample main /</em>/ int main(array<String^> ^args) { const wchar_t/<em> eventTypeFilter = L&quot;/</em>&quot;; // initialize and register an event handler for the event type filter specified CtxPlay_Initialize(); CtxPlay_RegisterEventHandler(MyEventHandler, eventTypeFilter); // wait for event data processing to complete or CtxPlay_Abort() CtxPlay_WaitForCompletion(); // clean up
CtxPlay_Dispose(); Console::WriteLine(L&quot;\nEvent data processing completed.&quot;); return 0; }</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/虚拟化_Citrix/">虚拟化_Citrix</a></li></span></span> | <span class="tags">Tagged <a href="/tags/虚拟化_Citrix/" class="label label-primary">虚拟化_Citrix</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-虚拟化_Citrix--SmartAuditorEventAPIOverview-1/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-虚拟化_Citrix--SmartAuditorEventAPIOverview-1" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-虚拟化_Citrix--什么是CTBS与VPN的区别/">什么是 CTBS 与VPN的区别</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-虚拟化_Citrix--什么是CTBS与VPN的区别/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-ctbs-vpn-">什么是 CTBS 与VPN的区别</h1>
<p><a href="http://blog.sina.com.cn/everytingwassimple" target="_blank">简单生活</a></p>
<p><a href="http://blog.sina.com.cn/everytingwassimple[[订阅]](http://blog.sina.com.cn/s/blog_62b551960100fyj6.html#)[[手机订阅]](" target="_blank">http://blog.sina.com.cn/everytingwassimple[[订阅]](http://blog.sina.com.cn/s/blog_62b551960100fyj6.html#)[[手机订阅]](</a>)</p>
<p><a href="http://blog.sina.com.cn/everytingwassimple" target="_blank"><img src="" alt=""></a></p>
<p><a href="http://blog.sina.com.cn/everytingwassimple"></a></p>
<ul>
<li><a href="http://blog.sina.com.cn/everytingwassimple" target="_blank">博客</a></li>
<li><a href="http://photo.blog.sina.com.cn/everytingwassimple" target="_blank">相册</a></li>
<li><a href="http://music.sina.com.cn/m/1656050070" target="_blank">音乐</a></li>
<li><a href="http://you.video.sina.com.cn/everytingwassimple" target="_blank">播客</a></li>
<li><a href="http://profile.blog.sina.com.cn/everytingwassimple" target="_blank">个人中心</a></li>
</ul>
<p><a href="http://blog.sina.com.cn/everytingwassimple" target="_blank">首页</a><a href="http://blog.sina.com.cn/s/articlelist_1656050070_0_1.html" target="_blank">博文</a><a href="http://blog.sina.com.cn/s/favourites_1656050070_1.html" target="_blank">收藏</a><a href="http://profile.blog.sina.com.cn/circle.php?uid=1656050070&amp;page=1&amp;type=3" target="_blank">博客圈</a></p>
<p>字体大小：<a href="http://blog.sina.com.cn/s/" target="_blank">大</a><strong>中</strong><a href="http://blog.sina.com.cn/s/" target="_blank">小</a> 正文</p>
<p><strong>什么是 CTBS  与VPN的区别</strong>(2009-11-20 14:50:49)</p>
<p>标签：<a href="http://uni.sina.com.cn/c.php?t=blog&amp;k=it&amp;ts=bpost&amp;stype=tag" target="_blank">it</a> 
CTBS 是Cray Technology&amp;Best Service的全称。该词广泛的应用于远程接入行业，伴随着企业业务的不断扩大和跨地域性发展，传统的远程办公只能通过对需要远程访问的 PC 或便携式电脑安装客户端程序以及远程访问客户机驱动程序才能实现的方案已逐渐显示出其发展的局限性，因此理想的解决方案是通过便捷的 Web 浏览器的远程访问方案，这种方法需要最少的管理开销，用户随时能即时而容易地访问远程应用程序并操作数据。从而引出了CTBS软件。</p>
<p>CTBS特点：</p>
<p>1．高效利用网络宽带（远程、异地使用问题及远程高效传输的速度问题、快速连接全球各地的分支机构（协同办公、移动商务））</p>
<p>ERP/OA/CRM等应用程序的远程应用全面提速，每个用户只需要28kbps网络带宽；C/S应用程序的B/S模式应用。</p>
<p>2.集中管理，便捷接入</p>
<p>Web方式访问，终端用户免安装应用软件，只要能上网即可快速使用企业的应用系统，简化企业信息化软件的部署、管理，降低IT投入。</p>
<ol>
<li>应用安全</li>
</ol>
<p>在Internet上传输的只是鼠标、键盘的指令和屏幕刷新信息，不传输实际的业务数据，并且通过CTBS远程接入传输的这些信息都是加密的。而传统的VPN</p>
<p>应用，在网络上传输的是实际业务数据，所以CTBS远程接入从原理上就比VPN安全很多。</p>
<p>4.低维护，快速应用</p>
<p>对于企业的IT人员，从过去的需要维护终端用户电脑上的客户端应用软件，改变为只需要维护CTBS远程接入服务器上的客户端应用软件，大大降低了维护成本。</p>
<p>5.低带宽，快速接入</p>
<p>客户端用MODEM就可以轻松实现应用程序的快速访问，网间传输的仅仅是键盘击键、屏幕变化的信息，彻底摈弃过去冗余无效的数据传输模式。</p>
<p>VPN（Virtual Private Network）是指利用密码技术和访问控制技术在公共网络（如Internet）中建立的专用通信网络。在虚拟专用网中，任意两个节点之间的连接并没有传统专用网所需的端到端的物理链路，而是利用某种公众网的资源动态组成，虚拟专用网络对用户端透明，用户好像使用一条专用线路进行通信。</p>
<p>VPN方式数据传输仍然是客户机和服务器的数据传输，所以通过网络要传输大量的数据，对带宽的要求就很高，而当数据量较大时，完全无法保证使用的正常实现，用户最简单的操作也相当缓慢。而且安全也是一项难题，因为应用和数据驻留在客户端桌面系统上，很容易造成资料的流失。这不仅会增加未经授权的访问的危险，也会增加信息丢失或被盗的危险。
而沟通CTBS主要是SBC（Server based Computing）模式，客户端看到的应用程序100%在服务器上运行，网络上并没有大量程序和数据需要传输，传输的只是客户端的显示界面变化的部分；平均每个用户正常工作仅占用28.8K的网络带宽，用户通过普通Modem拨号连接，也能保证正常工作，并发用户多时，使用效果也令人相当满意。使用CTBS后，可对某些用户进行访问限制，将数据牢牢掌控起来。而且采用了工业强度128位的SSL加密技术，网络间传输的也只有屏幕变化等信息，即使有人截取了数据包解密后也不会存在数据被窃取的风险。</p>
<p>以上是一些数据，高手请详细说明，谢谢！CTBS原理！</p>
<p><a href="http://blog.sina.com.cn/s/blog_62b551960100fyj6.html#" target="_blank">分享到新浪微博</a>
已投稿到： <a href="http://blog.sina.com.cn/lm/114/113/day.html" target="_blank">排行榜</a> <a href="http://q.sina.com.cn/blog_groups.php?fid=62b551960100fyj6" target="_blank">圈子</a></p>
<p><a href="">阅读</a>|<a href="http://blog.sina.com.cn/s/blog_62b551960100fyj6.html#comment" target="_blank">评论</a>|<a href="http://blog.sina.com.cn/s/blog_62b551960100fyj6.html#" target="_blank">收藏</a>|<a href="http://blog.sina.com.cn/main_v5/ria/print.html?blog_id=blog_62b551960100fyj6" target="_blank">打印</a>|<a href="">举报</a>
加载中，请稍候...</p>
<p><strong>评论</strong>    <a href="http://blog.sina.com.cn/lm/8/2009/0325/105340.html" target="_blank">重要提示：警惕虚假中奖信息，点击查看详情</a>      <a href="http://sina.allyes.com/main/adfclick?db=sina&amp;bid=181511,226672,231692&amp;cid=0,0,0&amp;sid=220668&amp;advid=3406&amp;camid=32667&amp;show=ignore&amp;url=http://play.sina.com.cn/index.php" target="_blank">新浪开奖汽车手机马上领取</a>**<a href=""></a><a href="http://blog.sina.com.cn/s/blog_62b551960100fyj6.html#post">[发评论]</a></p>
<ul>
<li>评论加载中，请稍候...
<a href=""></a></li>
</ul>
<p><strong>发评论</strong>    <a href="http://profile.blog.sina.com.cn/phone_attentionhelp.php" target="_blank">随时随地抢沙发！</a>    <a href="http://sina.allyes.com/main/adfclick?db=sina&amp;bid=181511,226673,231693&amp;cid=0,0,0&amp;sid=220669&amp;advid=3406&amp;camid=32667&amp;show=ignore&amp;url=http://play.sina.com.cn/index.php" target="_blank">心动开奖分秒有礼物</a></p>
<ul>
<li><p>用户昵称:</p>
</li>
<li><p><a href="http://blog.sina.com.cn/s/blog_62b551960100fyj6.html#" target="_blank"><img src="" alt="">插入表情</a></p>
</li>
<li><p>登录名：</p>
</li>
<li>密码：</li>
<li><a href="http://login.sina.com.cn/getpass.html" target="_blank">找回密码</a></li>
<li><a href="http://login.sina.com.cn/signup/signup.php?entry=blog&amp;srcuid=1656050070" target="_blank">注册</a></li>
<li>昵   称：</li>
<li>匿名评论</li>
</ul>
<p><em>验证码：</em>请点击后输入验证码  <img src="" alt="看不清楚数字吗？点击这里再试试。"><a href="http://blog.sina.com.cn/s/blog_62b551960100fyj6.html#" target="_blank">收听验证码</a></p>
<p><a href="http://blog.sina.com.cn/s/blog_62b551960100fyj6.html#" target="_blank">发评论</a></p>
<p>以上网友发言只代表其个人观点，不代表新浪网的观点或立场。</p>
<p>相关博文</p>
<p>读取中...</p>
<p>推荐博文</p>
<p>读取中...
谁看过这篇博文</p>
<p>读取中...
                    <img src="" alt="">      <img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/虚拟化_Citrix/">虚拟化_Citrix</a></li></span></span> | <span class="tags">Tagged <a href="/tags/虚拟化_Citrix/" class="label label-primary">虚拟化_Citrix</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-虚拟化_Citrix--什么是CTBS与VPN的区别/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-虚拟化_Citrix--什么是CTBS与VPN的区别" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/95/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/93/">93</a></li><li><a class="page-number" href="/page/94/">94</a></li><li><a class="page-number" href="/page/95/">95</a></li><li class="active"><li><span class="page-number current">96</span></li><li><a class="page-number" href="/page/97/">97</a></li><li><a class="page-number" href="/page/98/">98</a></li><li><a class="page-number" href="/page/99/">99</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/97/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-23 21:54:38</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
