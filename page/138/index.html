
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 138 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB客户端MongoVue-张善友-博客园/">MongoDB 客户端 MongoVue </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB客户端MongoVue-张善友-博客园/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="mongodb-mongovue-">MongoDB 客户端 MongoVue - 张善友 - 博客园</h1>
<p><a href=""></a></p>
<p><a href="http://www.cnblogs.com/shanyou/" target="_blank">自由、创新、研究、探索</a></p>
<p>Linux/Windows Mono/DotNet [ Open Source .NET Development/使用开源工具进行DotNet软件开发]</p>
<ul>
<li><a href="http://www.cnblogs.com/" target="_blank">博客园</a></li>
<li><a href="http://www.cnblogs.com/shanyou/" target="_blank">首页</a></li>
<li><a href="http://q.cnblogs.com/" target="_blank">博问</a></li>
<li><a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a></li>
<li><a href="http://www.cnblogs.com/shanyou/admin/EditPosts.aspx?opt=1" target="_blank">新随笔</a></li>
<li><a href="http://space.cnblogs.com/msg/send/%e5%bc%a0%e5%96%84%e5%8f%8b" target="_blank">联系</a></li>
<li><a href="http://www.cnblogs.com/shanyou/rss" target="_blank">订阅</a></li>
<li><a href="http://www.cnblogs.com/shanyou/admin/EditPosts.aspx" target="_blank">管理</a>
随笔-1233 文章-57 评论-4326 </li>
</ul>
<h1 id="-mongodb-mongovue-http-www-cnblogs-com-shanyou-archive-2011-05-20-2052354-html-"><a href="http://www.cnblogs.com/shanyou/archive/2011/05/20/2052354.html" target="_blank">MongoDB 客户端 MongoVue</a></h1>
<p>今天在同事那里看到了一个很不错的MongoDB的客户端工具MongoVue，地址是<a href="http://www.mongovue.com/" title="http://www.mongovue.com/" target="_blank"><a href="http://www.mongovue.com/">http://www.mongovue.com/</a></a>。做的不错，1.0版本的开始收费了，费用也不贵才35＄。真正需要的同学可以掏点钱买个吧，也算是支持这个工具，如果只是学习研究用的话我这里还有一个0.9.7版本，虽然比起1.0版来说有些bug，平常使用也够了，需要的同学可以单独联系我。</p>
<p>1.0版之后超过15天后功能受限。可以通过删除以下注册表项来解除限制：</p>
<p>[HKEY_CURRENT_USER\Software\Classes\CLSID{B1159E65-821C3-21C5-CE21-34A484D54444}\4FF78130]</p>
<p>把这个项下的值全删掉就可以了。</p>
<p>下面上图给大家感受下强大的MongoVue，可以提高你使用MongoDB的幸福指数好几十点，上图是王道：</p>
<p>1、配置连接</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/shanyou/201105/201105202156379291.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p>2、试下新建一个名为AccessLog的Collection ：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/shanyou/201105/201105202156459404.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/shanyou/201105/201105202156514807.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p>3、插入一个Document</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/shanyou/201105/201105202157028144.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p>4、查看我们插入的数据，数据可以通过多种方式展示（树形、表格、文本）</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/shanyou/201105/201105202157089643.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p>上面我们都是通过图形界面的操作的吧，下面有一个窗口列出了上述操作的客户端命令哦，这是学习的好资源，在用图形界面的时候依然可以学习熟悉下命令行。</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/shanyou/201105/201105202157122038.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p>当然上述只是介绍了下最基本的功能，还有更新，删除数据库，从mysql数据库导入数据等等功能，想了解更详细的内容请访问官方网站：<a href="http://www.mongovue.com/" title="http://www.mongovue.com/" target="_blank"><a href="http://www.mongovue.com/">http://www.mongovue.com/</a></a> </p>
<p><a href="http://blog.nosqlfan.com/tags/mongodb" title="http://blog.nosqlfan.com/tags/mongodb" target="_blank"><a href="http://blog.nosqlfan.com/tags/mongodb">http://blog.nosqlfan.com/tags/mongodb</a></a></p>
<p>posted @ 2011-05-20 21:57 <a href="http://www.cnblogs.com/shanyou/" target="_blank">张善友</a> 阅读(12667) 评论(71) <a href="http://www.cnblogs.com/shanyou/admin/EditPosts.aspx?postid=2052354" target="_blank">编辑</a> <a href="http://www.cnblogs.com/shanyou/archive/2011/05/20/2052354.html#" target="_blank">收藏</a>
<img src="" alt=""></p>
<p><a href="">刷新评论</a><a href="http://www.cnblogs.com/shanyou/archive/2011/05/20/2052354.html#" target="_blank">刷新页面</a><a href="http://www.cnblogs.com/shanyou/archive/2011/05/20/2052354.html#top" target="_blank">返回顶部</a></p>
<p><a href="http://www.cnblogs.com/" title="程序员的网上家园" target="_blank">博客园首页</a><a href="http://q.cnblogs.com/" title="程序员问答社区" target="_blank">博问</a><a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">新闻</a><a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a><a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a><a href="http://kb.cnblogs.com/" target="_blank">知识库</a></p>
<h3 id="-">公告</h3>
<p>Copyright ©2013 张善友</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span><span class="breadcrumb"><li><a href="/categories/Nosql/">Nosql</a></li><li><a href="/categories/Nosql/mongo/">mongo</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a><a href="/tags/mongo/" class="label label-success">mongo</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql-mongo--MongoDB客户端MongoVue-张善友-博客园/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql-mongo--MongoDB客户端MongoVue-张善友-博客园" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-python--Pythonyield使用浅析/">Python yield 使用浅析</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-python--Pythonyield使用浅析/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="python-yield-">Python yield 使用浅析</h1>
<h1 id="python-yield-">Python yield 使用浅析</h1>
<p>您可能听说过，带有 yield 的函数在 Python 中被称之为 generator（生成器），何谓 generator ？</p>
<p>我们先抛开 generator，以一个常见的编程题目来展示 yield 的概念。</p>
<p><a href="">如何生成斐波那契數列</a></p>
<p>斐波那契（Fibonacci）數列是一个非常简单的递归数列，除第一个和第二个数外，任意一个数都可由前两个数相加得到。用计算机程序输出斐波那契數列的前 N 个数是一个非常简单的问题，许多初学者都可以轻易写出如下函数：
<a href=""><strong>清单 1. 简单输出斐波那契數列前 N 个数</strong></a></p>
<p>def fab(max):
    n, a, b = 0, 0, 1</p>
<pre><code>while n &lt; max:
    print b

    a, b = b, a + b
    n = n + 1
</code></pre><p>执行 fab(5)，我们可以得到如下输出：</p>
<blockquote>
<blockquote>
<blockquote>
<p>fab(5)</p>
</blockquote>
</blockquote>
</blockquote>
<p>1
1</p>
<p>2
3</p>
<p>5</p>
<p>结果没有问题，但有经验的开发者会指出，直接在 fab 函数中用 print 打印数字会导致该函数可复用性较差，因为 fab 函数返回 None，其他函数无法获得该函数生成的数列。</p>
<p>要提高 fab 函数的可复用性，最好不要直接打印出数列，而是返回一个 List。以下是 fab 函数改写后的第二个版本：
<a href=""><strong>清单 2. 输出斐波那契數列前 N 个数第二版</strong></a></p>
<p>def fab(max):
    n, a, b = 0, 0, 1</p>
<pre><code>L = []
while n &lt; max:

    L.append(b)
    a, b = b, a + b

    n = n + 1
return L
</code></pre><p>可以使用如下方式打印出 fab 函数返回的 List：</p>
<blockquote>
<blockquote>
<blockquote>
<p>for n in fab(5):</p>
</blockquote>
</blockquote>
</blockquote>
<p> ...     print n
...</p>
<p>1
1</p>
<p>2
3</p>
<p>5</p>
<p>改写后的 fab 函数通过返回 List 能满足复用性的要求，但是更有经验的开发者会指出，该函数在运行中占用的内存会随着参数 max 的增大而增大，如果要控制内存占用，最好不要用 List</p>
<p>来保存中间结果，而是通过 iterable 对象来迭代。例如，在 Python2.x 中，代码：
<a href=""><strong>清单 3. 通过 iterable 对象来迭代</strong></a></p>
<p>for i in range(1000): pass</p>
<p>会导致生成一个 1000 个元素的 List，而代码：
for i in xrange(1000): pass</p>
<p>则不会生成一个 1000 个元素的 List，而是在每次迭代中返回下一个数值，内存空间占用很小。因为 xrange 不返回 List，而是返回一个 iterable 对象。</p>
<p>利用 iterable 我们可以把 fab 函数改写为一个支持 iterable 的 class，以下是第三个版本的 Fab：
<a href=""><strong>清单 4. 第三个版本</strong></a></p>
<p>class Fab(object):</p>
<pre><code>def __init__(self, max):
    self.max = max

    self.n, self.a, self.b = 0, 0, 1


def __iter__(self):
    return self


def next(self):

    if self.n &lt; self.max:
        r = self.b

        self.a, self.b = self.b, self.a + self.b
        self.n = self.n + 1

        return r
    raise StopIteration()
</code></pre><p>Fab 类通过 next() 不断返回数列的下一个数，内存占用始终为常数：</p>
<blockquote>
<blockquote>
<blockquote>
<p>for n in Fab(5):</p>
</blockquote>
</blockquote>
</blockquote>
<p> ...     print n
...</p>
<p>1
1</p>
<p>2
3</p>
<p>5</p>
<p>然而，使用 class 改写的这个版本，代码远远没有第一版的 fab 函数来得简洁。如果我们想要保持第一版 fab 函数的简洁性，同时又要获得 iterable 的效果，yield 就派上用场了：
<a href=""><strong>清单 5. 使用 yield 的第四版</strong></a></p>
<p>def fab(max):
    n, a, b = 0, 0, 1</p>
<pre><code>while n &lt; max:
    yield b

    /# print b
    a, b = b, a + b

    n = n + 1
</code></pre><p>&#39;&#39;&#39;</p>
<p>第四个版本的 fab 和第一版相比，仅仅把 print b 改为了 yield b，就在保持简洁性的同时获得了 iterable 的效果。</p>
<p>调用第四版的 fab 和第二版的 fab 完全一致：</p>
<blockquote>
<blockquote>
<blockquote>
<p>for n in fab(5):</p>
</blockquote>
</blockquote>
</blockquote>
<p> ...     print n
...</p>
<p>1
1</p>
<p>2
3</p>
<p>5</p>
<p>简单地讲，yield 的作用就是把一个函数变成一个 generator，带有 yield 的函数不再是一个普通函数，Python 解释器会将其视为一个 generator，调用 fab(5) 不会执行 fab 函数，而是返回一个 iterable 对象！在 for 循环执行时，每次循环都会执行 fab 函数内部的代码，执行到 yield b 时，fab 函数就返回一个迭代值，下次迭代时，代码从 yield b 的下一条语句继续执行，而函数的本地变量看起来和上次中断执行前是完全一样的，于是函数继续执行，直到再次遇到 yield。</p>
<p>也可以手动调用 fab(5) 的 next() 方法（因为 fab(5) 是一个 generator 对象，该对象具有 next() 方法），这样我们就可以更清楚地看到 fab 的执行流程：
<a href=""><strong>清单 6. 执行流程</strong></a></p>
<blockquote>
<blockquote>
<blockquote>
<p>f = fab(5)
f.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>1</p>
<blockquote>
<blockquote>
<blockquote>
<p>f.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>1</p>
<blockquote>
<blockquote>
<blockquote>
<p>f.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>2</p>
<blockquote>
<blockquote>
<blockquote>
<p>f.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>3</p>
<blockquote>
<blockquote>
<blockquote>
<p>f.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>5</p>
<blockquote>
<blockquote>
<blockquote>
<p>f.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>Traceback (most recent call last):
  File &quot;<stdin>&quot;, line 1, in <module></p>
<p>StopIteration</p>
<p>当函数执行结束时，generator 自动抛出 StopIteration 异常，表示迭代完成。在 for 循环里，无需处理 StopIteration 异常，循环会正常结束。</p>
<p>我们可以得出以下结论：</p>
<p>一个带有 yield 的函数就是一个 generator，它和普通函数不同，生成一个 generator 看起来像函数调用，但不会执行任何函数代码，直到对其调用 next()（在 for 循环中会自动调用 next()）才开始执行。虽然执行流程仍按函数的流程执行，但每执行到一个 yield 语句就会中断，并返回一个迭代值，下次执行时从 yield 的下一个语句继续执行。看起来就好像一个函数在正常执行的过程中被 yield 中断了数次，每次中断都会通过 yield 返回当前的迭代值。</p>
<p>yield 的好处是显而易见的，把一个函数改写为一个 generator 就获得了迭代能力，比起用类的实例保存状态来计算下一个 next() 的值，不仅代码简洁，而且执行流程异常清晰。</p>
<p>如何判断一个函数是否是一个特殊的 generator 函数？可以利用 isgeneratorfunction 判断：
<a href=""><strong>清单 7. 使用 isgeneratorfunction 判断</strong></a></p>
<blockquote>
<blockquote>
<blockquote>
<p>from inspect import isgeneratorfunction
isgeneratorfunction(fab)</p>
</blockquote>
</blockquote>
</blockquote>
<p>True</p>
<p>要注意区分 fab 和 fab(5)，fab 是一个 generator function，而 fab(5) 是调用 fab 返回的一个 generator，好比类的定义和类的实例的区别：
<a href=""><strong>清单 8. 类的定义和类的实例</strong></a></p>
<blockquote>
<blockquote>
<blockquote>
<p>import types
isinstance(fab, types.GeneratorType)</p>
</blockquote>
</blockquote>
</blockquote>
<p>False</p>
<blockquote>
<blockquote>
<blockquote>
<p>isinstance(fab(5), types.GeneratorType)</p>
</blockquote>
</blockquote>
</blockquote>
<p>True</p>
<p>fab 是无法迭代的，而 fab(5) 是可迭代的：</p>
<blockquote>
<blockquote>
<blockquote>
<p>from collections import Iterable</p>
<p>isinstance(fab, Iterable)
False</p>
<p>isinstance(fab(5), Iterable)
True</p>
</blockquote>
</blockquote>
</blockquote>
<p>每次调用 fab 函数都会生成一个新的 generator 实例，各实例互不影响：</p>
<blockquote>
<blockquote>
<blockquote>
<p>f1 = fab(3)</p>
<p>f2 = fab(5)
print &#39;f1:&#39;, f1.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>f1: 1</p>
<blockquote>
<blockquote>
<blockquote>
<p>print &#39;f2:&#39;, f2.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>f2: 1</p>
<blockquote>
<blockquote>
<blockquote>
<p>print &#39;f1:&#39;, f1.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>f1: 1</p>
<blockquote>
<blockquote>
<blockquote>
<p>print &#39;f2:&#39;, f2.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>f2: 1</p>
<blockquote>
<blockquote>
<blockquote>
<p>print &#39;f1:&#39;, f1.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>f1: 2</p>
<blockquote>
<blockquote>
<blockquote>
<p>print &#39;f2:&#39;, f2.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>f2: 2</p>
<blockquote>
<blockquote>
<blockquote>
<p>print &#39;f2:&#39;, f2.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>f2: 3</p>
<blockquote>
<blockquote>
<blockquote>
<p>print &#39;f2:&#39;, f2.next()</p>
</blockquote>
</blockquote>
</blockquote>
<p>f2: 5</p>
<p><a href="http://www.ibm.com/developerworks/cn/opensource/os-cn-python-yield/#ibm-pcon" target="_blank">回页首</a></p>
<p><a href="">return 的作用</a></p>
<p>在一个 generator function 中，如果没有 return，则默认执行至函数完毕，如果在执行过程中 return，则直接抛出 StopIteration 终止迭代。</p>
<p><a href="http://www.ibm.com/developerworks/cn/opensource/os-cn-python-yield/#ibm-pcon" target="_blank">回页首</a></p>
<p><a href="">另一个例子</a></p>
<p>另一个 yield 的例子来源于文件读取。如果直接对文件对象调用 read() 方法，会导致不可预测的内存占用。好的方法是利用固定长度的缓冲区来不断读取文件内容。通过 yield，我们不再需要编写读文件的迭代类，就可以轻松实现文件读取：
<a href=""><strong>清单 9. 另一个 yield 的例子</strong></a></p>
<p>def read_file(fpath):
    BLOCK_SIZE = 1024</p>
<pre><code>with open(fpath, &#39;rb&#39;) as f:
    while True:

        block = f.read(BLOCK_SIZE)
        if block:

            yield block
        else:

            return
</code></pre><p>以上仅仅简单介绍了 yield 的基本概念和用法，yield 在 Python 3 中还有更强大的用法，我们会在后续文章中讨论。</p>
<p>注：本文的代码均在 Python 2.7 中调试通过</p>
<p><a href="">参考资料</a></p>
<p><strong>学习</strong></p>
<ul>
<li>随时关注 developerWorks <a href="http://www.ibm.com/developerworks/cn/offers/techbriefings/" target="_blank">技术活动</a>和 <a href="http://www.ibm.com/developerworks/cn/swi/" target="_blank">网络广播</a>。</li>
<li>访问 developerWorks <a href="http://www.ibm.com/developerworks/cn/opensource/" target="_blank">Open source 专区</a>获得丰富的 how-to 信息、工具和项目更新以及 <a href="http://www.ibm.com/developerworks/cn/opensource/best2009/index.html" target="_blank">最受欢迎的文章和教程</a>，帮助您用开放源码技术进行开发，并将它们与 IBM 产品结合使用。</li>
</ul>
<p><strong>讨论</strong></p>
<ul>
<li>加入 <a href="http://www.ibm.com/developerworks/cn/community/" target="_blank">developerWorks 中文社区</a>，developerWorks 社区是一个面向全球 IT 专业人员，可以提供博客、书签、wiki、群组、联系、共享和协作等社区功能的专业社交网络社区。</li>
<li>加入 <a href="https://www.ibm.com/developerworks/mydeveloperworks/groups/service/html/communityview?communityUuid=38997896-bb16-451a-aa97-189a27a3cd5a/?lang=zh" target="_blank">IBM 软件下载与技术交流群组</a>，参与在线交流。</li>
</ul>
<p><a href="">关于作者</a>
<a href=""></a>廖雪峰，精通 Java/Java EE/Java ME/Android/Python/C/#/Visual Basic，对开源框架有深入研究，著有《Spring 2.0 核心技术与最佳实践》一书，创建有开源框架 JOpenID，其官方博客是 <a href="http://www.liaoxuefeng.com/">http://www.liaoxuefeng.com/</a> 和 <a href="http://michael-liao.appspot.com/。" target="_blank">http://michael-liao.appspot.com/。</a></p>
<p>来源： <a href="[http://www.ibm.com/developerworks/cn/opensource/os-cn-python-yield/](http://www.ibm.com/developerworks/cn/opensource/os-cn-python-yield/)">[http://www.ibm.com/developerworks/cn/opensource/os-cn-python-yield/](http://www.ibm.com/developerworks/cn/opensource/os-cn-python-yield/)</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/python/">python</a></li></span></span> | <span class="tags">Tagged <a href="/tags/python/" class="label label-primary">python</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-python--Pythonyield使用浅析/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-python--Pythonyield使用浅析" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-python--我6个月的学习编程经历：从”大齿怪“到“狂欢者”/">我6个月的学习编程经历：从”大齿怪“到“狂欢者”</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-python--我6个月的学习编程经历：从”大齿怪“到“狂欢者”/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-6-">我6个月的学习编程经历：从”大齿怪“到“狂欢者”</h1>
<h2 id="-">#</h2>
<h2 id="the-noob">The Noob</h2>
<p>Almost exactly six months ago, I decided to embark on an adventure. Before October of 2010, I had never programmed a day in my life. Okay maybe I had a week-long unit on the very very very basics in sixth grade. But that is all. I had no idea what to expect. October 19th, 2010, I tweeted: “What have I gotten myself into. I’ve just embarked on learning programming, having absolutely no experience. Oh man I’m already nervous.” That was the beginning of a path that I’m so glad I have taken. I’m not looking back.</p>
<h2 id="beginnings">Beginnings</h2>
<p>I’m going to give you a quick overview of my first few months, because it was pretty boring. I started with <a href="http://inventwithpython.com/" target="_blank">Invent with Python</a>, a really awesome book for <strong>complete</strong> noobs. To show you how beginner it was, here is a quote from the book:
The + sign tells the computer to add the numbers 2 and 2. To subtract numbers use the – sign, and to multiply numbers use an asterisk (/*).</p>
<p>After I got the very basics down, I made a bunch of random text-based games, like hangman, jotto, and guess-the-number. My first big hit was a game called “The Man-Rodent.” It was about a Man-Rodent, whatever the hell that is, who was terrorizing the village. He was hiding, and you had to guess where he was:</p>
<p><img src="&quot;WzoNX&quot;" alt=""></p>
<p>This was also when I received my first piece of cherished fan art. I posted the game on Reddit and <a href="http://www.hussinger.blogspot.com/" target="_blank">Michael Hussinger</a> made this <strong>AMAZING</strong> cover art for it:</p>
<p><img src="&quot;manro&quot;" alt=""></p>
<p>Next, I moved on to my first quasi-graphics based game: Minesweeper. This is when I really started to understand why creating a flexible game engine is really important (yeah, like I created a game engine). The game was still text-based, but it was completely flexible, in that I could specify board size and mine amount. This ended up giving it some replayability and it was fun to play around with crazy numbers just to see what happened. Here’s that game:</p>
<h2 id="welcome-to-ios">Welcome to iOS</h2>
<p>At this point, I felt I was ready to move on to actual graphics. I felt at an impasse. I had absolutely no idea where to start. I took a look at <a href="http://www.libsdl.org/" target="_blank">SDL</a> but was in way over my head and got quickly discouraged. Since I knew I eventually wanted to make an iPhone app, I asked <a href="http://struct.ca/" target="_blank">Matt Rix (Trainyard)</a>, who gave me some sage advice. He recommended I start by learning C, then Objective-C, then Cocos2d. I’m happy to say that as of today, I’ve learned all three of those! The basics anyway.</p>
<p>During the period of learning the basics of C and Obj-C, I came across a <strong>lot</strong> of frustrations and I didn’t make many games. Many times, I really wondered if I could ever get past the hurdle and figure it out. A few of the things that I pulled my hair out over when I first learned of them: structs, arrays, multi-dimensional arrays, properties, views, view controllers, <strong><em>protocols and delegates</em></strong>, <strong><em>memory management</em></strong> and many more. And there is still so much out there that is way over my head. But I’m going to keep trucking because everyone I talk to says the only way to get better is to just <strong>keep making games</strong>. Being a piano player, I am well aware that practice pays off, so that’s what I’ve been doing (and will keep doing).</p>
<h2 id="welcome-to-cocos2d">Welcome to Cocos2d</h2>
<p><img src="&quot;fully-illustrated-cocos2d&quot;" alt=""></p>
<p>Once I finally got the basics of creating an iPhone app down, I was ready to delve into Cocos2d. I was nervous but excited. Now, I don’t know if I’m crazy or stupid but I have found that the Cocos2d documentation is <em>not</em> very good. All the classes, methods, and properties are listed, but I am constantly struggling to understand things because they are not explained well. An example: every “node” (the main Cocos2d element) has a “(BOOL) isRunning” property. It sounds simple enough, but it could easily mean any number of things. All the documentation says about this property is: “whether or not the node is running.” Uh, okay . . . Needless to say, I’m still pretty confused about a fair amount of things in Cocos2d.</p>
<p>But enough of the insults. I am <strong>loving</strong> Cocos2d. Once I got a hang of the basics, I started to see how much easier it was to get a simple game up and running in no time. And since I already know how to do music and sound, and also know a little bit of Photoshop, I was really starting to see some pretty cool results. Since I was really confused by Cocos2d at first, I started with a few of <a href="http://www.raywenderlich.com/352/how-to-make-a-simple-iphone-game-with-cocos2d-tutorial" target="_blank">Ray Wenderlich</a>’s <strong>awesome</strong> tutorials.</p>
<h2 id="a-bunch-of-sorta-games-i-ve-made">A Bunch of Sorta-Games I’ve Made</h2>
<p>Here is my first Cocos2d game, which I created by directly following Ray’s tutorial (it even had my own music and stupid sound effects for when an enemy died!):</p>
<p><img src="&quot;Star Shooter&quot;" alt=""></p>
<p>Next, I made a Pong clone. It even had multiplayer!:</p>
<p><img src="&quot;Pong&quot;" alt=""></p>
<p>After Pong, I was feeling encouraged, and decided to try to make Tetris. Big mistake. I was not ready. I ran into a lot of really annoying errors and bugs, and when I finally got the basic framework down, I tweeted something like: “So proud of myself. I just created a really complex class/subclass system for my Tetris clone.” <a href="http://gamesfromwithin.com/" target="_blank">Noel Llopis</a> quickly informed me how bad of an idea that was. So I looked at some tutorials and tried to completely revamp my Tetris clone, but it was still too difficult. I will return and defeat you one day, Tetris!</p>
<p>After my failed attempt at Tetris, I made a little <a href="http://www.onemanleft.com/tilttolive/" target="_blank">Tilt to Live</a> inspired prototype, except in this version, you get points for <em>collecting</em> red dots, instead of avoiding them. And this one didn’t have <a href="http://onemanleft.bandcamp.com/album/tilt-to-live-soundtrack" target="_blank">the music I did for the real game</a> (that is a link to the Tilt to Live soundtrack. Buy it now or red dots will eat you while you sleep.):</p>
<p><img src="&quot;Tilt to Suck&quot;" alt=""></p>
<p>After a lot more learning of Cocos2d, I had a random inspiration to make an endless crumpled paper background. So I crumpled paper and made it an endless background. Then I put a little paper circle in the game that you could roll around using the accelerometer. I was really proud of myself when I figured out how to roll the circle because it involved some math that I hadn’t done in a long time (even though it was fairly simple trigonometry). The background was buggy – there were frequently gaps between the images of the repeating background – but it worked:</p>
<p><img src="&quot;Paper Background&quot;" alt=""></p>
<p>Next, after seeing a trailer for the <strong>awesome</strong> looking upcoming game <a href="http://forums.toucharcade.com/showthread.php?threadid=86302" target="_blank">Bumpy Road</a>, I got inspired and wondered if I could recreate an effect similar to its bumpy road element. Needless to say, my graphics were a bit more barren, but you can compare.</p>
<p>Bumpy Road:
<img src="&quot;Bumpy Road&quot;" alt=""></p>
<p>My version:
<img src="&quot;Bumpy&quot;" alt=""></p>
<p>After this, I wanted to try my hand at actually animating something. I had never animated anything before and gave it a go on Photoshop. <strong>Man</strong> was it tedious. Even for just a stupid little line drawing. But what I came up with was who I like to call PARTYMAN. All he did was open and close his mouth over and over again, each time making a randomly chosen grunt noise. You could also move him around the screen. And the background flashed different colors. And he only grunted and partied when you were actually touching the screen:</p>
<p><img src="&quot;1000000422&quot;" alt=""></p>
<p><img src="&quot;photo 1&quot;" alt=""></p>
<p><img src="&quot;photo 3&quot;" alt=""></p>
<p><img src="&quot;photo&quot;" alt=""></p>
<p>Somehow, PARTYMAN gained a small following. I think he might be next in the long list of icons including Mario, Link, Samus, and others. I actually ended up sending a copy to <a href="http://twitter.com/jaredta" target="_blank">Jared of Touch Arcade</a> (hey, he asked for it). Then, to my great surprise and utmost joy, <a href="http://twitter.com/teaRascal" target="_blank">Craig Sharpe</a> of <a href="http://retrodreamer.com/blog/" target="_blank">Retro Dreamer</a> created my <em>second</em> official piece of fan art! Here is Craig’s <strong>AWESOME</strong> take on PARTYMAN:</p>
<p><img src="&quot;Partyman&quot;" alt=""></p>
<p>His drawing was so awesome, in fact, that I <em>had</em> to include it in one of my next games. But first, on a whim I started making a game about a guy jumping over poles. The original point was just to see if I could make a parallax background with a simple game mechanic, but I just kept going with it. It ended up having a title screen, score-tracking, replayability, music, sounds, variable jump heights, a jump height progress bar indicator, and even a credits page! It was my most complete game yet. I drew some pretty awful sprites for my game, as you can see here:</p>
<p><img src="&quot;Screen shot 2011-04-12 at 6.00.29 PM&quot;" alt=""></p>
<p>Since my drawings sucked, I asked Michael Hussinger (of “The Man-Rodent is in the Barn” fame) if he wanted to do a few quick doodles for it, and he did! He drew this <strong>awesome</strong> pizza guy in probably 20 minutes. It would take me hours upon hours to draw something that good, if I even could at all. He also drew a nice mountainous background for my parallax scrolling. Here’s how the game looked after his help, along with my title and credits pages:</p>
<p><img src="&quot;photo 11&quot;" alt=""></p>
<p><img src="&quot;photo 4&quot;" alt=""></p>
<p><img src="&quot;photo 12&quot;" alt=""></p>
<p>The game in action!</p>
<p>My next game was inspired by <a href="http://www.trainyard.ca/" target="_blank">Trainyard</a>. I wanted to see if I could create a grid that I could draw roads on that a vehicle would follow. What better opportunity for a return of PARTYMAN, right? So I called it Partybus. The point of the game was to click a spot on the grid to make a party (a flashing, color-changing spot with music coming out of it), then to draw a road to the party and have PARTYMAN drive there in his Partybus. Needless to say, it was a really easy game. But the cool thing is, when he reached his party destination, the music got louder and bassier, the bus started doing a dance, and Craig’s fan art of him appeared above the bus and started shaking to the beat!</p>
<p><img src="&quot;1000000423&quot;" alt=""></p>
<p>The code was very buggy and pretty damn broken. I tried to have my brother play the app and it took him three tries to do anything at all because he would click the wrong square at the wrong time and it would basically ruin the game. And I would have to completely restart the app each time because I didn’t build in a “restart” feature. But I was still pretty proud of my crappy Trainyard ripoff. Matt should pay me for it.</p>
<p>My next project was a Snake clone. I found <a href="http://www.strille.net/tutorials/snake/index.php" target="_blank">this tutorial on how to build Snake in flash</a> and basically just ported it to iPhone. It gave me a lot of insight into how to make this game. Before the tutorial, I was planning on having the snake move once per frame, but was having a lot of trouble figuring out how to make his tail follow him. I was considering building up an array of all the past moves and assigning them to each of his tail pieces every tick, but that would have gotten really annoying really fast. This tutorial flipped my world upside down when I realized the Snake was <em>not actually moving.</em> Instead, the illusion of movement was given by simply adding and removing snake pieces from the grid on every frame. Then, when you picked up an apple, all it did was tell the program not to remove any pieces for five turns. I need to remake this game for sure, because the UI sucked, the controls were awful, and the code was pretty messy due to my hacked together port. But for a basic Snake game it turned out pretty well!</p>
<p><img src="&quot;1000000425&quot;" alt=""></p>
<p>After Snake I tried making Partybus 2: Partyman’s Big Weekend. I got a little further than before. Ended up adding a speed slider like in Trainyard, a depot that the train could leave from, sound effects (when he crashed there was the sound of a massive car accident and he yelled “No partying today!”) and just overall cleaner code. But again, I soon ran into entangled code and whenever I tried to fix one thing, another thing wouldn’t work. My biggest problem was that when I set the speed slider all the way to its highest value, the bus would crash at a random joint in the road. This was due to the updates being called too often and the code not updating enough before the next tick. Even though I sort of knew what the problem was, it would take too much work to go back and fix it. I think I will have to make a Partybus 3: The Final Party.</p>
<p><img src="&quot;photo 10&quot;" alt=""></p>
<p>My most current project is a remake of <a href="http://www.limasky.com/" target="_blank">Doodle Jump</a>. So far it’s coming along quite nicely. I have platforms that keep moving higher and higher, a jumper guy, some items (well, so far only a spring), custom music and sounds, and a UI that totally rips off the original game. I’m pretty happy with this one so far. I’m going to try to keep adding a bunch of stuff to it.</p>
<p><img src="&quot;photo&quot;" alt=""></p>
<h2 id="conclusion">Conclusion</h2>
<p>It truly is amazing how much practice helps. Every time I write a new program, I run into a ton of unforeseen problems and bugs. While frustrating at the time, I usually plan around them the next time I program. This makes me feel like I’m in my very own while loop:</p>
<p>while (stillPrettyBadAtProgramming) {
    programmingPracticeTime++;
    Program /*newProgram = [Program programWithType:ProgramTypeGame];
    if (newProgram.isReallyGood == YES &amp;&amp; programmingPracticeTime &gt;= A_HUGE_AMOUNT) {
        stillPrettyBadAtProgramming = NO;
    }
}</p>
<p>I’m going to keep creating. It’s been a blast so far, and I can’t wait to see what the next six months entails. Be sure to return next time, when I will talk about the long process that went into making the music (and a few sounds) for <a href="http://www.caseyscontraptions.com/" target="_blank">Casey’s Contraptions</a>!</p>
<p><img src="&quot;caseys04-642x481&quot;" alt="">
来源： <a href="[http://www.whitakerblackall.com/blog/first-six-months/](http://www.whitakerblackall.com/blog/first-six-months/)">[http://www.whitakerblackall.com/blog/first-six-months/](http://www.whitakerblackall.com/blog/first-six-months/)</a> </p>
<h3 id="-">我是菜鸟</h3>
<p>几乎刚好是6个月前，我决定开始从事一项新的职业。2010年10月之前，我从未接触过编程。要说有，那也只是在6年级时学过了大概一周的非常基 本、基本、基本的编程知识。就这些。我不知会学成什么样。2010年10月9日我在微博上写道：“我究竟想干吗？我决定学习编程，我没有任何的基础。唉， 兄弟们，我有些担心。”这是一段生涯的开始，我很高兴能走上这条路。我不会回头。</p>
<h3 id="-">开端</h3>
<p>我将只快速简单的给你们讲一下我前几个月的学习过程，因为这段时间非常的枯燥。我从<a href="http://inventwithpython.com/" target="_blank">Invent with Python</a>这本书开始，这是一本对新手来说非常不错的教程。为了让你们知道它是如何的初级，我向你们展示这本书里的一段话：</p>
<ul>
<li>这个符号是来告诉计算机把2和2相加。做减法用这个符号 -，做乘法用星号(/*)。</li>
</ul>
<p>在我学会了一些非常基本的知识后，我随意的做了很多文本形式的小游戏，比如刽子手，jotto，猜数字。我的第一个比较大一点的小玩意叫做“大齿怪”。这个游戏的情景是关于一个大齿怪(就把它想成一个怪物吧)，祸害村里。它藏在什么地方，你需要去猜它在哪：</p>
<p><img src="&quot;WzoNX&quot;" alt=""></p>
<p>也就是在此时我收到了我的第一张珍贵的粉丝画的作品。我把这个游戏发布在了Reddit上，<a href="http://www.hussinger.blogspot.com/" target="_blank">Michael Hussinger</a>为它制作了这张令人惊叹的封面画：</p>
<p><img src="&quot;manro&quot;" alt=""></p>
<p>接下来，我转移到了我的第一个半图形游戏：”扫雷“。在此时我才开始真正的理解构造一个灵活的游戏引擎有多么的重要(没错，就像我开发的这个游戏引 擎)。这个游戏仍然是文本形式的，但已经有相当的灵活度了，在这个游戏里，我可以指定布景的大小和地雷的数量。这样一来游戏就可以从头再玩，你可以把地雷 数量设置很小而很快能看到游戏的结果，这样有趣多了。下面就是这个游戏：</p>
<h3 id="-ios">欢迎使用苹果iOS</h3>
<p>此时，我已经感觉到应该转向真正的图形游戏了。我感觉陷入了僵局。我根本不知道从哪里入手。我研究了一下<a href="http://www.libsdl.org/" target="_blank">SDL</a>，这个东西超过了我的接受能力，我很快放弃了。因为我知道最终我想做iPhone应用程序，我请教了<a href="http://struct.ca/" target="_blank">Matt Rix (Trainyard)</a>，他给了我一些很好的建议。他建议我从学C语言开始，然后学Objective-C，然后Cocos2d。今天说起这些我很快高兴，这三种语言我都学会了，虽然很基础。</p>
<p>在学习C和Obj-C时，我遇到的大量的挫折，我没有做出多少游戏。很多次，我真的怀疑是否能渡过难关、找到出路。很多东西当我第一次看到时愁得我挠掉了很多头发：结构体，数组，多维数组，属性，表现层，控制层，<strong>协议和代理，内存管理</strong>，还有很多。很多东西我目前仍然无法理解领会。但是我坚持继续下去，我对很多人都说：让自己进步的唯一方法就是<strong>不断的做游戏</strong>。我十分清楚，想成为钢琴家，练习时根本，所以，这也是我需要的(我就持续这样下去)。</p>
<h3 id="-cocos2d">欢迎使用Cocos2d</h3>
<p><img src="&quot;fully-illustrated-cocos2d&quot;" alt=""></p>
<p>一旦我最终把iPhone应用的基本知识攻克下，我立即开始研究Cocos2d。我很紧张，也很兴奋。现在，我不知道自己是太挑剔还是太笨，我感觉 Cocos2d的文档写的不太好。所有的类，方法，属性都列出来了，但却很难让人读懂，它们解释的不太清楚。一个例子：每个”node“(Cocos2d 的主要元素)都有一个”(BOOL) isRunning“属性。看起来非常的简单，但它似乎能够表示任何意思。所有的文档对这个属性的解释都是：”标志这个node是否在运行。嗯，ok … 不用说，Cocos2d里面有很多东西我都十分的困惑。</p>
<p>尽管这些的不满，我还是<strong>非常</strong>喜欢Cocos2d。一旦掌握了一些基本知识，我就开始研究它如何能够容易的做出一个简单游戏，让它马上能跑起来。我已经知道了如何做音乐和声效，我还知道一些Photoshop，我就真的开始要让它输出一些很酷的结果了。起初我对Cocos2d很困惑，我从<a href="http://www.raywenderlich.com/352/how-to-make-a-simple-iphone-game-with-cocos2d-tutorial" target="_blank">Ray Wenderlich</a>的一些非常棒的教材开始学习。</p>
<h3 id="-">我开发的各种暂且算是游戏的游戏</h3>
<p>下面的是我的第一个Cocos2d游戏，它是我直接按照Ray的教材开发出来的(我在里面还加上了我的音乐和当一个敌人被消灭时的很傻的音效！)：</p>
<p><img src="&quot;Star Shooter&quot;" alt=""></p>
<p>接着，我仿制了一个Pong。这个游戏还可以多人参与！：</p>
<p><img src="&quot;Pong&quot;" alt=""></p>
<p>Pong之后，我受到了鼓舞，决定开发Tetris。这是个巨大的错误。我根本没有准备好。我遇到了各种让人懊恼的错误和问题，当我最终把框架搭起来后，我在微博上写了这样的话：“我很骄傲。我为我的Tetris仿品开发了一个真正复杂的类/子类系统。”<a href="http://gamesfromwithin.com/" target="_blank">Noel Llopis</a>很快的告诉我，说我的决定十分的错误。我搜集了一些教材，试图好好的修改一下这个仿Tetris游戏，但太困难了。我决定放弃，但有一天我会打败你的，Tetris！</p>
<p>这次Tetris失败的尝试之后，我受<a href="http://www.onemanleft.com/tilttolive/" target="_blank">Tilt to Live</a>的启发做了一个游戏初始原型，我计划在这个游戏里，你需要去<strong>收集</strong>红点来获取积分，而不是像其它游戏里去避开它们。现在做的这个里面并没有加入真正的游戏里面会有的音乐：</p>
<p><img src="&quot;Tilt to Suck&quot;" alt=""></p>
<p>学习了更多的Cocos2d之后，我突然来了灵感要做一个循环的褶皱纸样式的背景。于是把一张纸做出褶皱型，以循环方式填充背景。然后我在上面放了 一个小圆片，你可以用加速器让它在上面滚动。当我弄明白如何让这个小圆片滚动后，我为自己能做出这个东西很自豪，因为这牵涉的一些数学知识，我并没有用很 久的时间就把它能明白了(尽管只是一个很简单的几何问题)。背景很难看 —— 但很好用：</p>
<p><img src="&quot;Paper Background&quot;" alt=""></p>
<p>接着，当我看到了即将发布的游戏<a href="http://forums.toucharcade.com/showthread.php?threadid=86302" target="_blank">Bumpy Road</a>的令人惊讶的海报后，我受启发，心想是否能够也做一个跟里面的高高低低的路面相似风格的游戏元素。很显然，我的做图水平很有限，你可以比较一下。</p>
<p>Bumpy Road:
<img src="&quot;Bumpy Road&quot;" alt=""></p>
<p>我的版本：
<img src="&quot;Bumpy&quot;" alt=""></p>
<p>这之后，我想在真正的动画上试试身手。以前从没有做过动画，先在Photoshop试试。人物的制作很乏味冗长。即使是画一条很傻很短的线条也很费 劲。但我还是完成了，我把他称作“狂欢者”。他能做的就是一遍遍的张开和闭上他的大嘴，每次都随机的发出一些哼哼声。你还可以在屏幕上移动他。背景闪动不 同的颜色。当你触碰屏幕时，他只能哼哼和张嘴：</p>
<p><img src="&quot;1000000422&quot;" alt=""></p>
<p><img src="&quot;photo 1&quot;" alt=""></p>
<p><img src="&quot;photo 3&quot;" alt=""></p>
<p><img src="&quot;photo&quot;" alt=""></p>
<p>然而，“狂欢者”有了一小队粉丝。这些粉丝的头像图标里包括Mario, Link, Samus,等等。事实上我把这个游戏发给了<a href="http://twitter.com/jaredta" target="_blank">Touch Arcade的Jared</a>(嘿，是他向我要的)。之后，让我大吃一惊和无比高兴的是，<a href="http://retrodreamer.com/blog/" target="_blank">Retro Dreamer</a>的<a href="http://twitter.com/teaRascal" target="_blank">Craig Sharpe</a>创作了我的<strong>第二</strong>张正规的粉丝的艺术作品！下面就是Craig为“狂欢者”创作的杰作：</p>
<p><img src="&quot;Partyman&quot;" alt=""></p>
<p>他的作品是如此的优秀，我甚至把它放入了我的下一个游戏里。但起初，我突发奇想，要做一个跳杆子的游戏。起初的出发点只是为了使用一个简单的游戏技 术测试一下视差背景的效果，但做下来就做成了这个游戏。最终的游戏有一个小屏幕，有记分功能，有重玩功能，有音乐、音效，各种跳跃高杆，有一个高度指示 器，甚至还有一个鸣谢页面！它是我的功能最全的一个游戏。我在游戏里画了一些非常丑陋的精灵，就像你下面看到的：</p>
<p><img src="&quot;Screen shot 2011-04-12 at 6.00.29 PM&quot;" alt=""></p>
<p>因为画的太差，我询问Michael Hussinger是否愿意为我做一些简单的修改，他同意了！他在二十分钟内就画出来一个<strong>让人惊叹</strong>的匹萨伙计。我估计花几个小时也画不出这么好的作品来。他还为游戏中的视差效果画了一个漂亮的山作为背景。下面的就是在他的帮助下游戏的样子，我加上了标题和鸣谢页：</p>
<p><img src="&quot;photo 11&quot;" alt=""></p>
<p><img src="&quot;photo 4&quot;" alt=""></p>
<p><img src="&quot;photo 12&quot;" alt=""></p>
<p>游戏运行中！</p>
<p>我的下一个游戏受<a href="http://www.trainyard.ca/" target="_blank">Trainyard</a>的启发。我想看看是否能做出 一个地图，上面画些网格道路，卡车能跑在上面。看看，制作“狂欢者”有了很好的回报。所以我称这个为“狂欢大巴”。游戏的玩法就是点击地图上的一个地方就 设定一个聚会点(一个闪烁的，颜色变换的点，伴有音乐)，然后图上会画出一条路，通向这个点，“狂欢者”会把他的“狂欢大巴”开到那里。不用说，这是一个 非常简单的游戏。但里面很酷的东西是，当他到达目标地点后，音乐声会变大，卡车会开始跳舞，Craig画的作品会出现在开车上面左右摇摆！</p>
<p><img src="&quot;1000000423&quot;" alt=""></p>
<p>代码写的很乱，有很多问题。我让弟弟试玩了一下，他式了三次，什么都没干成，他总是每次都是在错误的时间点击到错误的地方，这样游戏根本就不能正常 玩下去。每次我都要从头开始玩这个游戏，因为我没有给它加入“重新开始”的功能。但我还是挺为这个Trainyard的复制品感到自豪的。Matt应该为 此感谢我。</p>
<p>我的下一个项目是要做一条蛇。我发现了这个<a href="http://www.strille.net/tutorials/snake/index.php" target="_blank">如何用flash做出一条蛇的教程</a>， 我只需要把它移植到iPhone上。这个教材让我明白了很多如何做这种游戏的内幕。之前，我计划让蛇每一帧移动一次，但在如何让蛇尾和蛇身保持一致的问题 上遇到了很多的麻烦。我本打算建一个数组存所有历史动作，蛇尾将按照这个数组里的信息做它的每个动作，但这样一来它动的太快，让人很不舒服。这个教程整个 颠倒了我的思维，我意识到蛇其实<strong>根本没有动</strong>。这种看起来在移动的视觉效果其实是简单的在帧上添加和移去一小段蛇身产生的。这样，当你捡起一 个苹果，所需要做的只是告诉程序不要删除任何片段。事实上我需要重新写这个程序，因为界面太难看了，控制的也不好。因为我是移植过来的，代码写的很乱。但 事实上作为一个基本的游戏来，它还是很不错的！</p>
<p><img src="&quot;1000000425&quot;" alt=""></p>
<p>在完成这条蛇之后，我打算制作“狂欢大巴2”：“狂欢者”的周末狂欢。我把上一版升级了一些。我在里面加入了一些Trainyard里面的速度条， 一个车站，车可以从里面开车，一些声音特效(当他被碰着时会出现很大的汽车相撞的声音，而且会喊出“今天没有活动！”)，程序也整理的更整洁了。但没多 久，程序又开始变乱，当我要纠正一个问题时，另外一个东西又出现了问题。最大的问题是当我把速度设成最大时，卡车会在路上某个点崩溃。这是因为更新调用的 太频繁，程序来不及在下一次调用前更新完。尽管我知道这个问题的原因，如想修复这个问题需要重做大量的东西。我想我需要升级到“狂欢大巴3”：最后的狂 欢。</p>
<p><img src="&quot;photo 10&quot;" alt=""></p>
<p>我最近的目标是重做<a href="http://www.limasky.com/" target="_blank">Doodle Jump</a>。目前为止一切进展顺利。里面很多小平台，移动速度会约来越快，一个会跳的小人，一些其它物品(目前为止只有一个弹簧)，自定义音乐和声效，以及完全从原作里拷贝的背景。目前为止我对做出的东西很高兴。我会继续往里面增加很多的东西。</p>
<p><img src="&quot;photo&quot;" alt=""></p>
<h3 id="-">结论</h3>
<p>练习给人带来的进步是惊人的。每次当写出一个新程序，我都会遇到大量的无法预知的问题和bug。当遇到挫折时，我一般是将问题移到下一次升级时解决。这让我感觉自己就在走一个while循环：
while (编程技术仍然很糟) {</p>
<pre><code>  练习时间++;
  程序 /* 新程序 = [程序 程序类型：游戏];

  if (新程序.做的很好吗 == 是的 &amp;&amp; 练习时间 &gt;= 大量) {
      编程技术仍然很糟 = 否;

  }
</code></pre><p>  }</p>
<p>我会一直这样制作下去，一转眼就到现在了，我几乎等不及想知道再6个月后会是什么样。请下次当我来述说如何给<a href="http://www.caseyscontraptions.com/" target="_blank">Casey’s Contraptions</a>制作音乐(和一些声音)时，请记住一定来看看！</p>
<p><img src="&quot;caseys04-642x481&quot;" alt=""></p>
<p><a href="http://ihacker.taobao.com/" target="_blank"><img src="" alt=""></a></p>
<p><strong>本文由“<a href="http://www.aqee.net/" target="_blank">外刊IT评论</a>”网(<a href="http://www.aqee.net/" target="_blank">www.aqee.net</a>)荣誉出品</strong>
[英文原文：<a href="http://www.whitakerblackall.com/blog/first-six-months/" target="_blank">My First Six Months of Programming: From Man-Rodent to Partyman</a> ]</p>
<p>来源： <a href="[http://www.aqee.net/first-six-months/](http://www.aqee.net/first-six-months/)">[http://www.aqee.net/first-six-months/](http://www.aqee.net/first-six-months/)</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/python/">python</a></li></span></span> | <span class="tags">Tagged <a href="/tags/python/" class="label label-primary">python</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-python--我6个月的学习编程经历：从”大齿怪“到“狂欢者”/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-python--我6个月的学习编程经历：从”大齿怪“到“狂欢者”" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客/">MongoDB基础问题及使用方式</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="mongodb-chinaunix-">MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客</h1>
<p><a href="http://blog.chinaunix.net/" target="_blank"><img src="" alt=""></a><a href="http://www.chinaunix.net/" target="_blank">Chinaunix首页</a>　| 　<a href="http://bbs.chinaunix.net/" target="_blank">论坛</a>　| 　<a href="http://blog.chinaunix.net/" target="_blank">博客</a> <a href="http://blog.chinaunix.net/site/login.html" target="_blank">登录</a> | <a href="http://sso.chinaunix.net/Register?return_url=http%3A%2F%2Ft.cublog.com%2F" target="_blank">注册</a></p>
<p>博文 博主</p>
<ul>
<li><a href="http://blog.chinaunix.net/message/private.html" target="_blank">私人消息()</a></li>
<li><a href="http://blog.chinaunix.net/message/system.html" target="_blank">系统消息()</a></li>
<li><a href="http://blog.chinaunix.net/member/request.html" target="_blank">好友请求()</a></li>
<li><a href="http://blog.chinaunix.net/member/notification.html" target="_blank">通知管理()</a></li>
</ul>
<p><em><a href="http://blog.chinaunix.net/uid/25046147.html" target="_blank">随风飘云的ChinaUnix博客</a></em></p>
<p>一无所有，随风飘荡</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid-24789255-id-3423247.html" target="_blank">【公布获奖】年度颁奖：专家博客、推荐博客杰出奖</a></li>
<li><a href="http://blog.chinaunix.net/uid-24789255-id-3434964.html" target="_blank">新版CU博客将于2013年1月14日正式上线</a>
<a href="http://blog.chinaunix.net/uid/25046147.html" target="_blank">首页</a>　| 　<a href="http://blog.chinaunix.net/uid/25046147/abstract/1.html" target="_blank">博文目录</a>　| 　<a href="http://blog.chinaunix.net/member/profile/uid/25046147.html" target="_blank">关于我</a>
<a href="http://blog.chinaunix.net/uid/25046147.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/25046147.html" target="_blank">随风飘云</a></p>
<ul>
<li>博客访问： 453761</li>
<li>博文数量： 140</li>
<li>博客积分： 2739</li>
<li>博客等级： 少校</li>
<li>用 户 组： 普通用户</li>
<li>注册时间： 2010-12-07 12:28
*</li>
</ul>
<p><em>
</em>
<em>
</em></p>
<p>文章分类</p>
<p><a href="http://blog.chinaunix.net/uid/25046147/list/1.html" target="_blank">全部博文</a>（140）</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-163083-list-1.html" title="技术文档翻译" target="_blank">技术文档翻译</a>（1）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-163040-list-1.html" title="MongoDB" target="_blank">MongoDB</a>（6）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-153857-list-1.html" title="常见问题" target="_blank">常见问题</a>（0）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-152347-list-1.html" title="邮件问题" target="_blank">邮件问题</a>（4）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-152243-list-1.html" title="安全" target="_blank">安全</a>（2）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-152205-list-1.html" title="问题-tomcat" target="_blank">问题-tomcat</a>（1）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-151983-list-1.html" title="dns+双线" target="_blank">dns+双线</a>（1）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-151852-list-1.html" title="杂七杂八" target="_blank">杂七杂八</a>（4）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-151835-list-1.html" title="数据库集群" target="_blank">数据库集群</a>（0）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-151826-list-1.html" title="linux储存" target="_blank">linux储存</a>（3）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-151355-list-1.html" title="个人心情" target="_blank">个人心情</a>（0）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-150942-list-1.html" title="启动脚本" target="_blank">启动脚本</a>（6）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-150863-list-1.html" title="tomcat" target="_blank">tomcat</a>（8）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-150097-list-1.html" title="转载" target="_blank">转载</a>（14）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-149775-list-1.html" title="监控" target="_blank">监控</a>（9）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-137736-list-1.html" title="linux集群及高可用" target="_blank">linux集群及高可</a>（6）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-135555-list-1.html" title="shell" target="_blank">shell</a>（14）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-129005-list-1.html" title="漏洞木马" target="_blank">漏洞木马</a>（2）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-85689-list-1.html" title="windows" target="_blank">windows</a>（15）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-85688-list-1.html" title="数据库" target="_blank">数据库</a>（15）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid-85625-list-1.html" title="linux专区" target="_blank">linux专区</a>（29）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/cid--1-list-1.html" title="未分配的博文" target="_blank">未分配的博文</a>（0）
文章存档</li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/25046147/year-2012-list-1.html" target="_blank">2012年</a>（71）</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201210-list-1.html" target="_blank">2012年10月</a>（2）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201209-list-1.html" target="_blank">2012年09月</a>（3）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201208-list-1.html" target="_blank">2012年08月</a>（9）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201205-list-1.html" target="_blank">2012年05月</a>（2）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201203-list-1.html" target="_blank">2012年03月</a>（3）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201202-list-1.html" target="_blank">2012年02月</a>（21）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201201-list-1.html" target="_blank">2012年01月</a>（31）</li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/25046147/year-2011-list-1.html" target="_blank">2011年</a>（69）</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201112-list-1.html" target="_blank">2011年12月</a>（9）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201110-list-1.html" target="_blank">2011年10月</a>（1）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201109-list-1.html" target="_blank">2011年09月</a>（28）</li>
<li><a href="http://blog.chinaunix.net/uid/25046147/year-201108-list-1.html" target="_blank">2011年08月</a>（31）</li>
</ul>
<p>我的朋友</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/26504911.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/26504911.html" title="hbxmadcom" target="_blank">hbxmadco</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/9186056.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/9186056.html" title="vinhlam" target="_blank">vinhlam</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/20647718.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/20647718.html" title="mutalip" target="_blank">mutalip</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/26934529.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/26934529.html" title="金色の闪光" target="_blank">金色の闪</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/26835604.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/26835604.html" title="dong1892" target="_blank">dong1892</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/26557473.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/26557473.html" title="chianaceruser" target="_blank">chianace</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/20104120.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/20104120.html" title="niao5929" target="_blank">niao5929</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/23916356.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/23916356.html" title="split_two" target="_blank">split_tw</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/24929997.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/24929997.html" title="manfred_xu" target="_blank">manfred_</a>
最近访客</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/7270462.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/7270462.html" title="ghan" target="_blank">ghan</a></p>
<ul>
<li><a href="http://blog.chinaunix.net/uid/24250828.html" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://blog.chinaunix.net/uid/24250828.html" title="zongg" target="_blank">zongg</a></p>
<p>订阅</p>
<ul>
<li><a href="http://blog.chinaunix.net/blog/rss/uid/25046147.html"></a></li>
<li><p><a href="http://www.google.com/ig/add?feedurl=http%3A%2F%2Fblog.chinaunix.net%2Fuid%2F25046147.html"></a>
推荐博文</p>
</li>
<li><p>·<a href="http://blog.chinaunix.net/uid-12326395-id-3479181.html" title="fedora18挂载点/分区设置的问题。" target="_blank">fedora18挂载点/分区设置的问...</a></p>
</li>
<li>·<a href="http://blog.chinaunix.net/uid-230160-id-3479192.html" title="用linux实现cisco的route-map策略路由功能" target="_blank">用linux实现cisco的route-map...</a></li>
<li>·<a href="http://blog.chinaunix.net/uid-13808199-id-3479191.html" title="如何让进程在Linux后台运行 " target="_blank">如何让进程在Linux后台运行 ...</a></li>
<li>·<a href="http://blog.chinaunix.net/uid-20707271-id-3479250.html" title="ubuntu 11.10 下安装和设置OpenSSH Server" target="_blank">ubuntu 11.10 下安装和设置Op...</a></li>
<li>·<a href="http://blog.chinaunix.net/uid-24774106-id-3479284.html" title="rdesktop 远程登陆公司环境" target="_blank">rdesktop 远程登陆公司环境...</a></li>
</ul>
<p>热词专题</p>
<ul>
<li>·<a href="http://blog.chinaunix.net/zhuanti/101164/mysqldOutofmemory_1011638248.shtml" title="mysqldOut of memory" target="_blank">mysqldOut of memory</a></li>
<li>·<a href="http://blog.chinaunix.net/zhuanti/101151/vboxwulicipan_1011506658.shtml" title="vbox 物理磁盘" target="_blank">vbox 物理磁盘</a></li>
<li>·<a href="http://blog.chinaunix.net/zhuanti/101151/thinkpadxianshipingbiankuangyoufengxi_1011505683.shtml" title="thinkpad 显示屏边框有缝隙" target="_blank">thinkpad 显示屏边框有缝隙...</a></li>
<li>·<a href="http://blog.chinaunix.net/zhuanti/101151/netlinkbiancheng_1011502254.shtml" title="netlink编程" target="_blank">netlink编程</a></li>
<li>·<a href="http://blog.chinaunix.net/zhuanti/101163/centos5wangluoyindaotuxingnfs_1011628940.shtml" title="centos5 网络引导 图形 nfs" target="_blank">centos5 网络引导 图形 nfs...</a>
友情链接</li>
</ul>
<p><em>**</em> <a href="">MongoDB基础问题及使用方式</a> <em>2012-08-09 18:06:38</em></p>
<p>分类： 数据库开发技术</p>
<p>MongoDB基础问题及使用方式</p>
<pre><code>            这是在学习MongoDB时网上找的一篇不错的文档，做为保存。
</code></pre><p>1.linux 系统：</p>
<p>1】关闭文件系统/分区的atime 选项
Vi /etc/fstab</p>
<p>在对应的分区项后面添加noatime ,nodiratime
LABEL=/1 / ext3 defaults 1 1</p>
<p>LABEL=/data1 /data ext4 defaults,noatime,nodiratime 1 2
2】设置文件句柄４ｋ＋，目前该配置已经集成到启动脚本中。</p>
<p>Vi /etc/security/limit.conf
/* soft nproc 65536</p>
<p>/<em> hard nproc 65536
/</em> soft nofile 65536</p>
<p>/* hard nofile 65536
3】不要使用large vm page （不要使用大内存页选项）</p>
<p>Linux 大内存页参考：<a href="http://linuxgazette.net/155/krishnakumar.html" target="_blank">http://linuxgazette.net/155/krishnakumar.html</a>
4】用dmesg 查看主机的信息。</p>
<p>2.linux 文件系统的选择：
Mongodb 采用预分配的大文件来存储数据,我们推荐</p>
<p>1】ext4
2】xfs</p>
<p>3.内核版本：
网络上对2.6.33-31 以及2.6.32 的表现持怀疑度， 而强力推荐2.6.36</p>
<p>4.线程堆栈的尺寸
默认的线程堆栈尺寸为10m ，调整为1m ，已经集成在启动脚本中。</p>
<p>项目过程中的总结与建议
1.大小写问题</p>
<p>mongodb 是默认区分大小写的，但是这会不会衍生出跟mysql 一样的问题？（mysql 区
分大小写，导致windows 与linux 下的表名，字段名不一致）。</p>
<p>如果无特别用途，建议表名，字段名全部用小写字母。
2.尽可能的缩短字段名的长度</p>
<p>mongodb 的schema free 导致了每笔数据都要存储他的key 以及属性，这导致了这些数
据的大量冗余。开发同事也许考虑到，从易读性出发设计的key 基本比较长，基本都是按</p>
<p>照起字面意思去设计的。这导致key 很长。对应的数据存储占用了很大的空间。
必要的时候，可以考虑建立一个key 与实际意义的map 表，尽量降低key 的长度。</p>
<p>示例定义：
// 基本信息</p>
<p>static final String _ID = &quot;_id&quot;;
static final String STATUS_CODE = &quot;sc&quot;;</p>
<p>// 缓冲
static final String DATE = &quot;date&quot;;</p>
<p>static final String MAX_AGE = &quot;age&quot;;
// 内容</p>
<p>static final String CONTENT = &quot;content&quot;;
static final String CONTENT_TYPE = &quot;ctype&quot;;</p>
<p>static final String CONTENT_LENGTH = &quot;clen&quot;;
static final String ZIP = &quot;zip&quot;;</p>
<ol>
<li>mongodb 单表最大索引数为64
无索引排序的最大数据量为4M, 超过则报错退出。</li>
</ol>
<p>建议where 条件尽量落在索引字段上，排序字段需要建立索引，索引的使用原则与oracle
mysql 一致，尽量降低索引数量，索引长度。</p>
<p>mongodb 的查询每次只能用到一个索引，对数据的查询不会“并发”执行
例如： db.tab.find({&#39;id&#39;=1,&#39;name&#39;=2}) 如果‘id’，‘name&#39; 列上分别有索引</p>
<p>对查询效率提升意义不大，如果索引为（&#39;id&#39;,&#39;name&#39;) 则大幅提升效率。
4.mongodb 添加字段</p>
<p>如果添加字段且带有default 值，需要全部数据都要修改，这也是设计阶段需要考虑的
事情，这个问题的另外一种解法是应用代码里做一次判断。</p>
<p>5.测试过程的密码问题
对于用作数据库使用的Mongodb，在代码测试阶段都应加上密码验证，目前上线阶段基</p>
<p>本都会在密码验证方面出现问题（做缓存使用的可以不做密码验证)。
6.数据源连接方式</p>
<p>使用连接池模式，尽量减少认证带来的性能额外消耗
建议采用标准的uri 连接方式： mongodb://user:passwd@host:port,host:port/db</p>
<p>7.Mongodb日志量
正常情况下不需要开启-v 日志选项。</p>
<p>Mongodb 的-v 日志适合在开发环境的调试线上部署不建议采用这个参数，目前线上
部署的情况，-v 日志一天也会有几个G 的日志量，去掉这个参数，跟数据查询相关的操作</p>
<p>就不会记日志了，数据库的内部的重要操作还是会写日志的。
8.连接数大小的设置</p>
<p>Mongodb 驱动程序采用的连接池的方式连接到数据库，目前从观察到的情况是应用一
开启便根据变量的设置，建立全部连接，然后提供给程序使用，并且一旦其中某个连接</p>
<p>到数据库的访问失败，则会清空整个连接池到这台数据库的连接，并重新建立连接。
而mongodb 对中断连接的垃圾清理工作则是懒惰的被动清理方式，如果驱动程序端配</p>
<p>置的连接数过大，一旦发生重连，则会导致mongo 端堆积大量的垃圾连接数据，导致
主机资源耗尽。</p>
<p>建议： mongodb 驱动的连接池大小的设置一般应该控制100 以下，一般情况30-50 足
够支撑应用访问。</p>
<p>9.锁的问题
Mongodb 对数据库的访问全部加锁，如果是查询请求则设置共享锁，数据修改请求，</p>
<p>则设置全局排他锁，并且是实例级别的排他锁。并且写锁会阻塞读请求，如果长时间持有
写锁，会阻塞整个实例的读请求。</p>
<p>部署建议：
1】一般情况下，建议不同的应用不要合用一套示例。</p>
<p>2】如果资源不满足，需要合用，应该具有相同属性的应用合用一套实例。
例如合同mongo 的应用都是读多写少，防止一台写多应用阻塞读请求。</p>
<p>10.关于map/reduce问题
mongodb 对map/reduce 的支持是单线程的，我们不建议在前台使用该功能， group by</p>
<p>是通过map/reduce 实现的，开发过程中，要慎用。
11.安全问题</p>
<p>1】Mongodb 运行在mongodb 用户之上，并禁止mongodb 用户登录
2】使用Mongodb 自带的认证方法（adduser、auth）限制用户访问行为</p>
<p>3】将Mongodb 置于内网环境中
4】Mongodb 必须暴露在外网环境中的时候，使用IPTABLES 等网络层技术进行防护</p>
<p>5】网络层面内容为明文传输，可以考虑存储加密文档，应用端，加解密。
12.性能监控</p>
<p>Mongodb 自带有性能数据收集系统
Mongostat 实时采集数据库的多项指标,提供http console 端口号为应用端口号+1000。</p>
<p>关注的主要性能指标：
1】Faults：显示Mongodb 每秒页面故障的数量，这个是mongoDB 映射到虚拟地址空间，</p>
<p>而不是物理内存，这个值如果飙高的话，可能意味着机器没有足够的内存来
存储数据和索引。</p>
<p>2】Flushes：每秒做了多少次fsync，显示多少次数据被刷新进了磁盘
3】locked：写锁</p>
<p>4】idx miss：索引未命中比例
5】qr | qw：读写锁的请求队列长度。</p>
<p>6】conn： 当前已经建立的连接数。
其他命令：</p>
<p>Db.stat()
db.serverStatuse()</p>
<p>Db.collection.stats()
13.碎片问题</p>
<p>Mongodb 数据库如果数据修改很频繁，会出现比较严重的空间碎片问题，表现在磁盘
文件扩张与实际数据量不相符，内存不够用，索引命中率低，查询效率降低。</p>
<p>碎片整理，目前我们采用的版本没有太有效的方法。
可以用db.repaireDatabase() 来整理数据库，这个过程非常的慢</p>
<p>如果是Master-slave 模式则相当于执行一次主从切换，然后从新建立从库。
如果是replSet 架构可以停掉数据库，然后删除数据目录，从新从复制复制组中全同步数据，</p>
<p>这个时候要考虑oplog 的尺寸。
一个大体的步骤：</p>
<p>1.】先调用rs.freeze(1200),将每个不想让它成为primary 的机器让它在1200 秒内无法成为
primary(这步也可以不做)</p>
<ol>
<li>】将primary stepDown,不出意外新的primary 会起来.</li>
<li><p>】将原primary kill 掉.</p>
</li>
<li><p>】删掉所有data 数据(调用repair 很慢,真不如干掉重新来)</p>
</li>
<li><p>】再重启动原primary 的进程</p>
</li>
<li><p>】以此循环完成整个复制组的全部重建。
14.系统备份：</p>
</li>
</ol>
<p>Mongodb 目前不支持在线备份，只能离线备份。
我们采用的架构为replSet 和Master-slave .</p>
<p>基于我们目前的架构以及数据一致性要求，我们没有安排相关的备份系统。
15.应用代码中Mongodb连接问题</p>
<p>在有些应用在使用Mongodb 过程中会存在以下两个小问题：</p>
<ol>
<li>在应用启动过程中，应用存在要求连接池中所有的连接都建立成功才让应用正</li>
</ol>
<p>常启动，这种做法不可取，因为存在网络问题、Mongodb 拒绝连接或Mongodb 假死情况，如果没加外部try catch 做防护，则Resin 不断重启也不能正常启动端口。
2.有些应用在使用Mongodb 中连接池配置了safe=true，w=1；这种配置意味着客户端在</p>
<p>插入数据或更新数据的时候，要求mongodb 必须将所更新的数据写入磁盘并返回更新成功的信息给程序。如果碰上应用程序访问压力大，mongodb 就会反应迟钝，并会发生假死可能，针对此情况，需要评估数据的一致性需求，做出合适调整。我们一般建议关闭此选项。
16.补充开发方面的一些问题</p>
<p>1】skip+limit翻页，越往后面越慢，有资料说用数组元素的分页可以解决，目前还没
试过，比较靠谱的做法是，先找出上次的id，翻页的时候不用skip：</p>
<p>last_row_id = ObjectId(‘....’);
db.activity_stream-&gt;find({_id:{$lt: last_row_id },</p>
<p>user_id:20 } ).sort( {_id:-1} ).limit(10);
2】.只有真正需要的字段才select出来</p>
<p>3】.更新的某条数据的时候，先查出来再更新会减小锁的时间
4】.只有返回很少结果的查询才用索引，否则会加载太多数据，比没有用索引还慢</p>
<p>5】.属性比较多的时候，建立分层的关系能够提高查询效率，否则每个记录都要过一遍
才能找到要的属性</p>
<p>17.关于硬件资源的选择：
虚拟机可以很好的隔离资源，并可动态的扩展。</p>
<p>我们建议mongodb 的部署采用虚拟机的方式，每个虚拟机部署一个实例，使各节点分
散在不同的物理机上,根据应用的前期预测，平衡虚拟机的之间的i/o。
<a href="&quot;分享到QQ空间&quot;"></a><a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到人人网&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a><a href="&quot;分享到豆瓣&quot;"></a><a href="&quot;更多平台&quot;"></a> 阅读(392) | 评论(1) | 转发(0) |</p>
<p>0<a href=""></a></p>
<p>上一篇：<a href="http://blog.chinaunix.net/uid-25046147-id-3307303.html" target="_blank">MongoDB的大数据的存储方式</a></p>
<p>下一篇：<a href="http://blog.chinaunix.net/uid-25046147-id-3308100.html" target="_blank">MongoDB翻译－（）</a>
相关热门文章</p>
<ul>
<li><a href="http://blog.chinaunix.net/uid-9793706-id-3476742.html" title="emacs最简单入门，只要10分钟" target="_blank">emacs最简单入门，只要10分钟...</a></li>
<li><a href="http://blog.chinaunix.net/uid-28494721-id-3476731.html" title="wordpress文章中让图片居中排版的方法" target="_blank">wordpress文章中让图片居中排...</a></li>
<li><a href="http://blog.chinaunix.net/uid-26782662-id-3476727.html" title="四大类背包" target="_blank">四大类背包</a></li>
<li><a href="http://blog.chinaunix.net/uid-28329865-id-3476726.html" title="学习编程，从何入手" target="_blank">学习编程，从何入手</a></li>
<li><p><a href="http://blog.chinaunix.net/uid-22476414-id-3476725.html" title="Linux下使用screen工作How-to" target="_blank">Linux下使用screen工作How-to...</a></p>
</li>
<li><p><a href="http://blog.chinaunix.net/uid-13874038-id-191915.html" title="数据库课程设计报告（仓库管理系统）" target="_blank">数据库课程设计报告（仓库管理...</a></p>
</li>
<li><a href="http://blog.chinaunix.net/uid-226186-id-2123860.html" title="拼音汉字对照表" target="_blank">拼音汉字对照表</a></li>
<li><a href="http://blog.chinaunix.net/uid-7667983-id-2046475.html" title="sql isnull函数的使用" target="_blank">sql isnull函数的使用</a></li>
<li><a href="http://blog.chinaunix.net/uid-46552-id-2117354.html" title="数据挖掘电子书下载" target="_blank">数据挖掘电子书下载</a></li>
<li><p><a href="http://blog.chinaunix.net/uid-11742111-id-2833575.html" title="SQL Server2005下载(多版本)" target="_blank">SQL Server2005下载(多版本)...</a></p>
</li>
<li><p><a href="http://blog.chinaunix.net/uid-28483822-id-3478849.html" title="JDBC连接SQL server 2008错误解决" target="_blank">JDBC连接SQL server 2008错误...</a></p>
</li>
<li><a href="http://blog.chinaunix.net/uid-200142-id-3477159.html" title="db2数据库运维常用命令集锦 " target="_blank">db2数据库运维常用命令集锦 ...</a></li>
<li><a href="http://blog.chinaunix.net/uid-28483822-id-3469470.html" title="基本Oracle外围性能优化" target="_blank">基本Oracle外围性能优化...</a></li>
<li><a href="http://blog.chinaunix.net/uid-28483822-id-3453830.html" title="Mysql添加事务处理" target="_blank">Mysql添加事务处理</a></li>
<li><a href="http://blog.chinaunix.net/uid-28299642-id-3451729.html" title="BI行业存在的一些问题" target="_blank">BI行业存在的一些问题...</a></li>
</ul>
<p>给主人留下些什么吧！~~</p>
<p><a href="http://blog.chinaunix.net/uid/25046147.html" target="_blank"><img src="" alt=""></a></p>
<p><a href="http://blog.chinaunix.net/uid/25046147.html" target="_blank">随风飘云</a>2012-08-09 18:08:43</p>
<p><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt=""><img src="" alt="">
<a href="">回复</a> | <a href="">举报</a>
评论热议</p>
<p>请登录后评论。</p>
<p><a href="http://blog.chinaunix.net/site/login.html" target="_blank">登录</a> <a href="http://sso.chinaunix.net/Register?return_url=http%3A%2F%2Ft.cublog.com%2F" target="_blank">注册</a></p>
<p><a href="http://www.chinaunix.net/about/index.shtml" target="_blank">关于我们</a> | <a href="http://www.it168.com/bottomfile/it168.shtml" target="_blank">关于IT168</a> | <a href="http://www.chinaunix.net/about/connect.html" target="_blank">联系方式</a> | <a href="http://www.chinaunix.net/about/service.html" target="_blank">广告合作</a> | <a href="http://www.it168.com//bottomfile/flgw/fl.htm" target="_blank">法律声明</a> | <a href="http://sso.chinaunix.net/Register?return_url=http%3A%2F%2Fblog.chinaunix.net%2F" target="_blank">免费注册</a></p>
<p>Copyright 2001-2010 ChinaUnix.net All Rights Reserved 北京皓辰网域网络信息技术有限公司. 版权所有</p>
<p>感谢所有关心和支持过ChinaUnix的朋友们</p>
<p>京ICP证041476号 京ICP证060528号</p>
<p>X</p>
<p>分享到...</p>
<p>选择其他平台 &gt;&gt;
<a href="http://www.bshare.cn/intro" target="_blank">分享到</a><a href="">X</a></p>
<p><a href="&quot;腾讯微博&quot;">腾讯微博</a></p>
<p><a href="&quot;QQ空间&quot;">QQ空间</a>
<a href="&quot;新华微博&quot;">新华微博</a></p>
<p><a href="&quot;凤凰微博&quot;">凤凰微博</a>
<a href="&quot;开心网&quot;">开心网</a></p>
<p><a href="&quot;豆瓣网&quot;">豆瓣网</a></p>
<p><a href="&quot;一键通&quot;">一键通</a></p>
<p><a href="&quot;搜狐微博&quot;">搜狐微博</a>
<a href="&quot;天涯&quot;">天涯</a></p>
<p><a href="&quot;网易微博&quot;">网易微博</a>
<a href="&quot;人民微博&quot;">人民微博</a></p>
<p><a href="&quot;QQ好友&quot;">QQ好友</a>
<a href="&quot;新浪微博&quot;">新浪微博</a></p>
<p><a href="&quot;人人网&quot;">人人网</a>
<a href="&quot;手机&quot;">手机</a></p>
<p><a href="&quot;朋友网&quot;">朋友网</a>
<a href="&quot;百度空间&quot;">百度空间</a>
更多平台... (130)</p>
<p><a href="http://www.bshare.cn/" target="_blank">bShare</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span><span class="breadcrumb"><li><a href="/categories/Nosql/">Nosql</a></li><li><a href="/categories/Nosql/mongo/">mongo</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a><a href="/tags/mongo/" class="label label-success">mongo</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql-mongo--MongoDB基础问题及使用方式-随风飘云-ChinaUnix博客" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础篇-残夜-博客园/">MongoDB基础篇 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:31.000Z"> <a href="/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础篇-残夜-博客园/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="mongodb-">MongoDB基础篇 - 残夜 - 博客园</h1>
<p><a href=""></a></p>
<p><a href="http://www.cnblogs.com/oubo/" target="_blank"><img src="" alt="返回主页"></a></p>
<h1 id="-oubo-http-www-cnblogs-com-oubo-"><a href="http://www.cnblogs.com/oubo/" target="_blank">Oubo的博客</a></h1>
<h1 id="-">#</h1>
<ul>
<li><a href="http://www.cnblogs.com/" target="_blank">博客园</a></li>
<li><a href="http://www.cnblogs.com/oubo/" target="_blank">首页</a></li>
<li><a href="http://q.cnblogs.com/" target="_blank">博问</a></li>
<li><a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a></li>
<li><a href="http://www.cnblogs.com/oubo/admin/EditPosts.aspx?opt=1" target="_blank">新随笔</a></li>
<li><a href="http://space.cnblogs.com/msg/send/%e6%ae%8b%e5%a4%9c" target="_blank">联系</a></li>
<li><a href="http://www.cnblogs.com/oubo/rss" target="_blank">订阅</a></li>
<li><a href="http://www.cnblogs.com/oubo/admin/EditPosts.aspx" target="_blank">管理</a>
随笔- 139 文章- 23 评论- 18 </li>
</ul>
<h1 id="-mongodb-http-www-cnblogs-com-oubo-archive-2012-02-21-2394663-html-"><a href="http://www.cnblogs.com/oubo/archive/2012/02/21/2394663.html" target="_blank">MongoDB基础篇</a></h1>
<h1 id="-mongodb-"><strong>一、走进MongoDB</strong></h1>
<p>MongoDB 是一个高性能，开源，面向集合，无模式的文档型数据库。它在许多场景下可用于替代传统的关系型数据库或键-值存储方式，MongoDB 使用C++开发。</p>
<h2 id="1-1-mongodb">1.1、初识MongoDB</h2>
<p>MongoDB 是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。他支持的数据结构非常松散，是类似json 的bjson 格式，因此可以存储比较复杂的数据类型。MongoDB 最大的特点是他支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。它是一个面向集合的,模式自由的文档型数据库。</p>
<h3 id="1-1-1-collenction-orented-">1.1.1 面向集合（Collenction-Orented）</h3>
<p>数据被分组存储在数据集中， 被称为一个集合（Collenction)。每个集合在数据库中都有一个唯一的标识名，并且可以包含无限数目的文档。集合的概念类似关系型数据库（RDBMS）里的表（table），不同的是它不需要定义任何模式（schema)。</p>
<h3 id="1-1-2-schema-free-">1.1.2 模式自由（Schema-free)</h3>
<p>存储在MongoDB 数据库中的文件，我们不需要知道它的任何结构定义。</p>
<h3 id="1-1-3-document-file-">1.1.3 文档型（Document File）</h3>
<p>存储的数据是键-值对的集合&quot;JSON&quot;，键是字符串，值可以是数据类型集合里的任意类型，包括数组和文档。我们把这个数据格式称作 “BSON” 即 “Binary Serialized DocumentNotation.”  </p>
<h2 id="-2-mongodb-"><strong>2、MongoDB的特点</strong></h2>
<ul>
<li>面向集合存储，易于存储对象类型的数据</li>
<li>模式自由</li>
<li>支持动态查询</li>
<li>支持完全索引，包含内部对象</li>
<li>支持复制和故障恢复</li>
<li>使用高效的二进制数据存储，包括大型对象（如视频、图片等）</li>
<li>自动处理碎片，以支持云计算层次的扩展性</li>
<li>支持Python，PHP，Ruby，Java，C，C/#，Javascript，Perl 及C++语言的驱动程序，社区中也提供了对Erlang 及.NET 等平台的驱动程序 文件存储格式为BSON（一种JSON 的扩展）</li>
<li>可通过网络访问</li>
</ul>
<h2 id="-3-mongodb-"><strong>3、MongoDB的功能</strong></h2>
<ul>
<li>面向集合的存储：适合存储对象及JSON 形式的数据</li>
<li>动态查询：MongoDB 支持丰富的查询表达式。查询指令使用JSON 形式的标记，可轻易查询文档中内嵌的对象及数组</li>
<li>完整的索引支持：包括文档内嵌对象及数组。MongoDB 的查询优化器会分析查询表达式，并生成一个高效的查询计划</li>
<li>查询监视：MongoDB 包含一系列监视工具用于分析数据库操作的性能</li>
<li>复制及自动故障转移：MongoDB 数据库支持服务器之间的数据复制，支持主-从模式及服务器之间的相互复制。复制的主要目标是提供冗余及自动故障转移</li>
<li>高效的传统存储方式：支持二进制数据及大型对象（如照片或视频）</li>
<li>自动分片以支持云级别的伸缩性：自动分片功能支持水平的数据库集群，可动态添加额外的机器。</li>
</ul>
<h2 id="-4-mongodb-"><strong>4、MongoDB的场景</strong></h2>
<p>适用场景：</p>
<ul>
<li>网站数据：MongoDB 非常适合实时的插入，更新与查询，并具备网站实时数据存储所需的复制及高度伸缩性</li>
<li>缓存：由于性能很高，MongoDB 也适合作为信息基础设施的缓存层。在系统重启之后，由MongoDB 搭建的持久化缓存层可以避免下层的数据源过载</li>
<li>大尺寸，低价值的数据：使用传统的关系型数据库存储一些数据时可能会比较昂贵，在此之前，很多时候程序员往往会选择传统的文件进行存储</li>
<li>高伸缩性的场景：MongoDB 非常适合由数十或数百台服务器组成的数据库。MongoDB的路线图中已经包含对MapReduce 引擎的内置支持</li>
<li><p>用于对象及JSON 数据的存储：MongoDB 的BSON 数据格式非常适合文档化格式的存储及查询
不适用场景：</p>
</li>
<li><p>高度事务性的系统，例如银行或会计系统。</p>
</li>
<li>传统的商业智能应用：针对特定问题的BI数据库会对产生高度优化的查询方式。</li>
<li>极为复杂的SQL查询</li>
</ul>
<h1 id="-"><strong>二、安装和配置</strong></h1>
<p>MongoDB 的官方下载站是<a href="http://www.mongodb.org/downloads，可以去上面下载最新的安装程序下来。在下载页面可以看到，它对操作系统支持很全面，如OS" target="_blank">http://www.mongodb.org/downloads，可以去上面下载最新的安装程序下来。在下载页面可以看到，它对操作系统支持很全面，如OS</a> X、Linux、Windows、Solaris都支持，而且都有各自的32 位和64 位版本。 <strong>注意:</strong></p>
<ol>
<li>MongoDB 1.8.1 Linux 版要求glibc 必须是2.5 以上。</li>
<li><p>在32 位平台MongoDB 不允许数据库文件（累计总和）超过2G，而64 位平台没有这个限制。
这里主要介绍Linux平台的安装：</p>
</li>
<li><p>步骤一: 下载MongoDB下载安装包：curl -O <a href="http://fastdl.mongodb.org/linux/mongodb-linux-i686-1.8.1.tgz" target="_blank">http://fastdl.mongodb.org/linux/mongodb-linux-i686-1.8.1.tgz</a></p>
</li>
<li>步骤二: 设置MongoDB程序存放目录将其解压到/Apps，再重命名为mongo，路径为/Apps/mongo</li>
<li>步骤三: 设置数据文件存放目录建立/data/db 的目录, mkdir –p /data/db</li>
<li>步骤四: 启动MongoDB服务/Apps/mongo/bin/mongod --dbpath=/data/db；（MongoDB 服务端的默认连接端口是 27017）</li>
<li>步骤五: 将MongoDB作为 Linux 服务随机启动；先创建/Apps/mongo/logs/mongodb.log 文件，用于存储MongoDB 的日志文件vi /etc/rc.local, 使用vi 编辑器打开配置文件，并在其中加入下面一行代码/Apps/mongo/bin/mongod --dbpath=/data/db --logpath=/Apps/mongo/logs/mongodb.log</li>
<li>步骤六: 客户端连接验证；新打开一个Shell 输入：/Apps/mongo/bin/mongo，就可以开始我们的mongo之旅了。</li>
<li>步骤七: 查看MongoDB日志；</li>
</ol>
<h1 id="-">三、体系结构</h1>
<p>MongoDB 是一个可移植的数据库，它在流行的每一个平台上都可以使用，即所谓的跨平台特性。在不同的操作系统上虽然略有差别，但是从整体构架上来看，MongoDB 在不同的平台上是一样的，如数据逻辑结构和数据的存储等等。 一个运行着的MongoDB 数据库就可以看成是一个MongoDB Server，该Server 由实例和数据库组成，在一般的情况下一个MongoDB Server 机器上包含一个实例和多个与之对应的数据库，但是在特殊情况下，如硬件投入成本有限或特殊的应用需求，也允许一个Server 机器上可以有多个实例和多个数据库。 MongoDB 中一系列物理文件（数据文件，日志文件等）的集合或与之对应的逻辑结构（集合，文档等）被称为数据库，简单的说，就是数据库是由一系列与磁盘有关系的物理文件的组成。</p>
<h2 id="3-1-">3.1 数据逻辑结构</h2>
<p>MongoDB 的逻辑结构是一种层次结构。主要由：文档(document)、集合(collection)、数据库(database)这三部分组成的。 逻辑结构是面向用户的，用户使用MongoDB 开发应用程序使用的就是逻辑结构。</p>
<ol>
<li>MongoDB 的文档（document），相当于关系数据库中的一行记录。</li>
<li>多个文档组成一个集合（collection），相当于关系数据库的表。</li>
<li>多个集合（collection），逻辑上组织在一起，就是数据库（database）。</li>
<li>一个MongoDB 实例支持多个数据库（database）。
<a href="http://zhoubo.sinaapp.com/?attachment_id=1646" target="_blank"><img src="&quot;RDBMS和MongoDB&quot;" alt=""></a> </li>
</ol>
<h2 id="3-2-">3.2 数据存储结构</h2>
<p>MongoDB 内部有预分配空间的机制，每个预分配的文件都用0进行填充，由于有了这个机制，MongoDB 始终保持额外的空间和空余的数据文件，从而有效避免了由于数据暴增而带来的磁盘压力过大的问题。 由于表中数据量的增加，数据文件每新分配一次，它的大小都会是上一个数据文件大小的2倍，每个数据文件最大2G。这样的机制有利于防止较小的数据库浪费过多的磁盘空间，同时又能保证较大的数据库有相应的预留空间使用。 数据库的每张表都对应一个命名空间，每个索引也有对应的命名空间。这些命名空间的元数据都集中在/*.ns 文件中。每个命名空间可以包含多个不同的盘区，这些盘区并不是连续的。与数据文件的增长相同，每一个命名空间对应的盘区大小的也是随着分配的次数不断增长的。这样做的目的是为了平衡命名空间浪费的空间与保持某一个命名空间中数据的连续性。每当命名空间需要分配新的盘区的时候，都会先查看$freelist (用于记录不再使用的盘区的命名空间)是否有大小合适的盘区可以使用，这样就回收空闲的磁盘空间。  </p>
<h1 id="-">四、快速入门</h1>
<h2 id="4-1-">4.1 启动数据库</h2>
<h3 id="4-1-1-">4.1.1 命令行启动方式</h3>
<p>MongoDB 默认存储数据目录为/data/db/ (或者 c:\data\db), 默认端口27017，默认HTTP 端口28017。当然你也可以修改成不同目录,只需要指定dbpath 参数:</p>
<p>$mongod -h
$mongod --dbpath=/data/db --logpath=/tmp/mongod.log</p>
<h3 id="4-1-2-">4.1.2 配置文件启动方式</h3>
<p>为减少命令后参数过多和维护成本，MongoDB 也支持同mysql 一样的读取启动配置文件的方式来启动数据库，配置文件的内容如下:</p>
<p>$ cat /etc/mongod.conf
dbpath=/data/db
$ mongod -f /etc/mongod.conf</p>
<h3 id="4-1-3-daemon-">4.1.3 Daemon方式启动</h3>
<p>前面两种都提供的前台启动mongodb进程，但当mongodb进程的session被关闭时，mongodb进程也随之停止，这是非常不安全的。MongoDB提供了一种后台启动的选择，只需要加上一个--fork参数即可。</p>
<p>$ mongod --dbpath=/data/db --logpath=/tmp/mongod.log --fork</p>
<h2 id="-"> </h2>
<h2 id="4-2-">4.2 停止数据库</h2>
<p>MongoDB 提供的停止数据库命令也非常丰富，如果Control-C、发送shutdownServer()指令及发送Unix 系统中断信号等。</p>
<h3 id="4-2-1-control-c">4.2.1 Control-C</h3>
<p>$ mongo</p>
<blockquote>
<p>Control-C</p>
</blockquote>
<h3 id="4-2-2-shutdownserver-">4.2.2 shutdownServer()</h3>
<p>$ mongo</p>
<blockquote>
<p>db.shutdownServer()</p>
</blockquote>
<h3 id="4-2-3-linux-">4.2.3 linux 系统中断信号</h3>
<p>$ ps aux|grep mongod
$ kill -9 pid</p>
<h2 id="-"> </h2>
<h2 id="4-3-mongo-api">4.3 Mongo  API</h2>
<p>$ ./mongo</p>
<blockquote>
<p>help //查看客户端帮忙命令
db.help() //查看db的api
db.mycroll.help() //查看collection的api</p>
</blockquote>
<h3 id="4-3-1-">4.3.1 插入操作</h3>
<blockquote>
<p>use mydb
db.things.save({name:&quot;mongo&quot;})
db.things.insert({x:1})</p>
</blockquote>
<h3 id="4-3-2-">4.3.2 更新操作</h3>
<blockquote>
<p>use mydb
db.things.update({name:&quot;mongo&quot;},{$set:{name:&quot;new_mongo&quot;}})</p>
</blockquote>
<h3 id="4-3-3-">4.3.3 删除操作</h3>
<blockquote>
<p>use mydb
db.things.remove({name:&quot;mongo&quot;})</p>
</blockquote>
<h3 id="4-3-4-">4.3.4 查询操作</h3>
<blockquote>
<p>use mydb
db.things.find({name:&quot;mongo&quot;})</p>
</blockquote>
<h2 id="4-4-">4.4 常用工具集</h2>
<p>MongoDB 在bin 目录下提供了一系列有用的工具，这些工具提供了MongoDB 在运维管理上的方便。</p>
<ul>
<li>bsondump: 将bson 格式的文件转储为json 格式的数据</li>
<li>mongo: 客户端命令行工具，其实也是一个js 解释器，支持js 语法</li>
<li>mongod: 数据库服务端，每个实例启动一个进程，可以fork 为后台运行</li>
<li>mongodump/ mongorestore: 数据库备份和恢复工具</li>
<li>mongoexport/ mongoimport: 数据导出和导入工具</li>
<li>mongofiles:GridFS 管理工具，可实现二制文件的存取</li>
<li>mongos: 分片路由，如果使用了sharding 功能，则应用程序连接的是mongos 而不是mongod</li>
<li>mongosniff: 这一工具的作用类似于tcpdump，不同的是他只监控MongoDB 相关的包请求，并且是以指定的可读性的形式输出</li>
<li>mongostat: 实时性能监控工具</li>
</ul>
<h2 id="4-6-">4.6 客户端工具</h2>
<ul>
<li>MongoVUE：一个桌面程序，提供了对MongoDB 数据库的基本操作，如查看、查询、更新、删除等，简单易用，但是功能还比较弱，以后发展应该不错。</li>
<li>RockMongo：是一个PHP5 写的MongoDB 管理工具。</li>
<li>MongoHub：是一个针对Mac 平台的MongoDB 图形管理客户端，可用来管理MongoDB 数据的应用程序。</li>
</ul>
<p>参考资料：《MongoDB总结.pdf》+<a href="http://www.mongodb.org/display/DOCS/Home" target="_blank"><a href="http://www.mongodb.org/display/DOCS/Home">http://www.mongodb.org/display/DOCS/Home</a></a>    </p>
<p>posted @ 2012-02-21 17:55 <a href="http://www.cnblogs.com/oubo/" target="_blank">残夜</a> 阅读(359) 评论(0) <a href="http://www.cnblogs.com/oubo/admin/EditPosts.aspx?postid=2394663" target="_blank">编辑</a> <a href="http://www.cnblogs.com/oubo/archive/2012/02/21/2394663.html#" target="_blank">收藏</a>
<img src="" alt=""></p>
<p><a href="">刷新评论</a><a href="http://www.cnblogs.com/oubo/archive/2012/02/21/2394663.html#" target="_blank">刷新页面</a><a href="http://www.cnblogs.com/oubo/archive/2012/02/21/2394663.html#top" target="_blank">返回顶部</a></p>
<p><a href="http://www.cnblogs.com/" title="程序员的网上家园" target="_blank">博客园首页</a><a href="http://q.cnblogs.com/" title="程序员问答社区" target="_blank">博问</a><a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">新闻</a><a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a><a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a><a href="http://kb.cnblogs.com/" target="_blank">知识库</a></p>
<h3 id="-">公告</h3>
<p>Copyright ©2013 残夜</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nosql/">Nosql</a></li></span><span class="breadcrumb"><li><a href="/categories/Nosql/">Nosql</a></li><li><a href="/categories/Nosql/mongo/">mongo</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nosql/" class="label label-primary">Nosql</a><a href="/tags/mongo/" class="label label-success">mongo</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:31"datetime="2014-03-07 09:54:31"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nosql-mongo--MongoDB基础篇-残夜-博客园/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nosql-mongo--MongoDB基础篇-残夜-博客园" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/137/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/135/">135</a></li><li><a class="page-number" href="/page/136/">136</a></li><li><a class="page-number" href="/page/137/">137</a></li><li class="active"><li><span class="page-number current">138</span></li><li><a class="page-number" href="/page/139/">139</a></li><li><a class="page-number" href="/page/140/">140</a></li><li><a class="page-number" href="/page/141/">141</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/139/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 16:47:46</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
