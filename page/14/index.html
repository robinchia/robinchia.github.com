
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 14 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--PostfixCal/">PostfixCal</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--PostfixCal/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="postfixcal">PostfixCal</h1>
<h1 id="-algorithm-gossip-"><a href="">Algorithm Gossip: 后序式的运算</a></h1>
<p>说明 将 <a href="">中序式转换为后序式</a> 的好处是，不用处理运算子先后顺序问题，只要依序由运算式由前往后读取即可。</p>
<h2 id="-">解法</h2>
<p>运算时由后序式的前方开始读取，遇到运算元先存入堆叠，如果遇到运算子，则由堆叠中取出两个运算元进行对应的运算，然后将结果存回堆叠，如果运算式读取完 毕，那么堆叠顶的值就是答案了，例如我们计算12+34+/<em>这个运算式（也就是(1+2)/</em>(3+4)）： 读取 堆叠 1 1 2 1 2 + 3 // 1+2 后存回 3 3 3 4 3 3 4 + 3 7 // 3+4 后存回 /<em> 21 // 3 /</em> 7 后存回</p>
<h2 id="-">实作</h2>
<ul>
<li><p>C
/#include <stdio.h>
/#include <stdlib.h>
void evalPf(char/<em>);
double cal(double, char, double);
int main(void) {
char input[80];
printf(&quot;输入后序式：&quot;);
scanf(&quot;%s&quot;, input);
evalPf(input);
return;
}
void evalPf(char/</em> postfix) {
double stack[80] = {0.0};
char temp[2];
char token;
int top = 0, i = 0;
temp[1] = &#39;\0&#39;;
while(1) {
token = postfix[i];
switch(token) {
case &#39;\0&#39;:
printf(&quot;ans = %f\n&quot;, stack[top]);
return;
case &#39;+&#39;: case &#39;-&#39;: case &#39;/<em>&#39;: case &#39;/&#39;:
stack[top-1] =
cal(stack[top-1], token, stack[top]);
top--;
break;
default:
if(top &lt; sizeof(stack) / sizeof(float)) {
temp[0] = postfix[i];
top++;
stack[top] = atof(temp);
}
break;
}
i++;
}
}
double cal(double p1, char op, double p2) {
switch(op) {
case &#39;+&#39;:
return p1 + p2;
case &#39;-&#39;:
return p1 - p2;
case &#39;/</em>&#39;:
return p1 /* p2;
case &#39;/&#39;:
return p1 / p2;
}
}</p>
</li>
<li><p>Java
public class InFix {
private static int priority(char op) {
switch(op) {
case &#39;+&#39;: case &#39;-&#39;:
return 1;
case &#39;/<em>&#39;: case &#39;/&#39;:
return 2;
default:
return 0;
}
}
public static char[] toPosfix(char[] infix) {
char[] stack = new char[infix.length];
char[] postfix = new char[infix.length];
char op;
StringBuffer buffer = new StringBuffer();
int top = 0;
for(int i = 0; i &lt; infix.length; i++) {
op = infix[i];
switch(op) {
// 运算子堆叠
case &#39;(&#39;:
if(top &lt; stack.length) {
top++;
stack[top] = op;
}
break;
case &#39;+&#39;: case &#39;-&#39;: case &#39;/</em>&#39;: case &#39;/&#39;:
while(priority(stack[top]) &gt;=
priority(op)) {
buffer.append(stack[top]);
top--;
}
// 存入堆叠
if(top &lt; stack.length) {
top++;
stack[top] = op;
}
break;
// 遇 ) 输出至 (
case &#39;)&#39;:
while(stack[top] != &#39;(&#39;) {
buffer.append(stack[top]);
top--;
}
top--; // 不输出(
break;
// 运算元直接输出
default:
buffer.append(op);
break;
}
}
while(top &gt; 0) {
buffer.append(stack[top]);
top--;
}
return buffer.toString().toCharArray();
}
private static double cal(double p1, char op, double p2) {
switch(op) {
case &#39;+&#39;:
return p1 + p2;
case &#39;-&#39;:
return p1 - p2;
case &#39;/<em>&#39;:
return p1 /</em> p2;
case &#39;/&#39;:
return p1 / p2;
}
return 0.0;
}
public static double eval(char[] postfix) {
double[] stack = new double[postfix.length];
char token;
int top = 0;
for(int i = 0; i &lt; postfix.length; i++) {
token = postfix[i];
switch(token) {
case &#39;+&#39;: case &#39;-&#39;: case &#39;/<em>&#39;: case &#39;/&#39;:
stack[top-1] =
cal(stack[top-1], token, stack[top]);
top--;
break;
default:
if(top &lt; stack.length) {
char temp = postfix[i];
top++;
stack[top] =
Double.parseDouble(
String.valueOf(temp));
}
break;
}
}
return stack[top];
}
public static void main(String[] args) {
String infix = &quot;(1+2)/</em>(3+4)&quot;;
System.out.println(InFix.eval(
InFix.toPosfix(infix.toCharArray())));
}
}</p>
</li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/AlgorithmGossip/">AlgorithmGossip</a></li></span></span> | <span class="tags">Tagged <a href="/tags/AlgorithmGossip/" class="label label-primary">AlgorithmGossip</a></span> | <span class="time">recent updated:<time title="2014-03-07 10:36:12"datetime="2014-03-07 10:36:12"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--PostfixCal/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-AlgorithmGossip-AlgorithmGossip--PostfixCal" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--QueueByArray/">QueueByArray</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--QueueByArray/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="queuebyarray">QueueByArray</h1>
<h1 id="-algorithm-gossip-"><a href="">Algorithm Gossip: 伫列 - 使用阵列实作</a></h1>
<h2 id="-">说明</h2>
<p>伫列是一种先进先出的资料结构，想像您在管子中放入球，最先放入的球在另一端会最先跑出来，在这边介绍如何使用阵列来实作伫列。</p>
<h2 id="-">解法</h2>
<p>使用阵列来实作伫列，我们必须保留两个旗标，假设front指向伫列的前端，rear向伫列的后端，我们每次从伫列后端加入一个资料，rear就加1指向最后一个资料，每次从伫列前端取出一个资料，front就加1指向伫列的最前端，如下图所示：
<img src="&quot;Quene&quot;" alt="Quene">
这是最简单的伫列实作，但是由于阵列的大小必须先决定，所以这种线性的结构有个问题，front与rear会到达阵列的后端，而这个阵列就不能再使用了， 为了解决这个问题，将阵列当作环状来使用，当front或rear到达阵列后端时，就重新从阵列前端再循环，也就是形成环状伫列，如下图所示：
<img src="&quot;Quene&quot;" alt="Quene">
不过阵列的容量还是受限制，所以这个阵列还是会满的，当front = rear时，伫列就满了；伫列的基本操作有五项：新增伫列、加入资料、显示前端资料、取出前端资料、显示所有的伫列元素。</p>
<h2 id="-">实作</h2>
<ul>
<li>C
/#include <stdio.h>
/#include <stdlib.h>
/#define N 10
void createq(int[], int/<em>, int/</em>);
void showfront(int[], int, int);
void add(int[], int/<em>, int/</em>, int);
void del(int[], int/<em>, int/</em>);
void showqueue(int[], int, int);
int main(void) {
int queue[N];
int front, rear;
int input, select;
createq(queue, &amp;front, &amp;rear);
while(1) {
printf(&quot;\n\n请输入选项(-1结束)：&quot;);
printf(&quot;\n(1)插入值至伫列&quot;);
printf(&quot;\n(2)显示伫列前端&quot;);
printf(&quot;\n(3)删除前端值&quot;);
printf(&quot;\n(4)显示所有内容&quot;);
printf(&quot;\n$c&gt;&quot;);
scanf(&quot;%d&quot;, &amp;select);
if(select == -1)
break;
switch(select) {
case 1:
printf(&quot;\n输入值：&quot;);
scanf(&quot;%d&quot;, &amp;input);
add(queue, &amp;front, &amp;rear, input);
break;
case 2:
showfront(queue, front, rear);
break;
case 3:
del(queue, &amp;front, &amp;rear);
break;
case 4:
showqueue(queue, front, rear);
break;
default:
printf(&quot;\n选项错误！&quot;);
}
}
printf(&quot;\n&quot;);
return 0;
}
void createq(int queue[], int/<em> front, int/</em> rear) {
int i;
for(i = 0; i &lt; N; i++)
queue[i] = 0;
/<em>front = /</em>rear = 0;
}
void showfront(int queue[], int front, int rear) {
if(front == rear)
printf(&quot;\n伫列为空！&quot;);
else
printf(&quot;%d&quot;, queue[(front+1) % N]);
}
void add(int queue[], int/<em> front, int/</em> rear, int data) {
int f, r;
f = /<em>front;
r = /</em>rear;
r = (r+1) % N;
if(f == r) {
printf(&quot;\n伫列已满！&quot;);
return;
}
queue[r] = data;
/<em>rear = r;
}
void del(int queue[], int/</em> front, int/<em> rear) {
int f, r;
f = /</em>front;
r = /<em>rear;
if(f == r) {
printf(&quot;\n伫列为空！&quot;);
return;
}
f = (f+1) % N;
/</em>front = f;
}
void showqueue(int queue[], int front, int rear) {
int i;
printf(&quot;\n伫列内容：&quot;);
for(i = (front+1) % N; i &lt;= rear; i++)
printf(&quot;%d &quot;, queue[i]);
}</li>
</ul>
<h2 id="-">补充</h2>
<p>您如果仔细演算过上面的环状伫列，您会发现有一个空间会被浪费掉，这是因为判断伫列已满或已空的条件都是front = rear，浪费一个空间对现在的电脑记忆体如此足够来说，并不是个大问题，如果您一定要解决这个问题，可以多使用一个flag来判断，如果flag设定为 1且front = rear，则表示伫列已满，如果flag设定为0则front = rear，则表示伫列已空，这样就不会浪费一个伫列空间了，提供改良后的虚拟码如下：
Procedure add(queue, n, front, rear, flag, data)
if(front = rear and flag = 1)
then call QUEUE_FULL
queue(rear) &lt;- data
if(front = rear)
then flag &lt;- 1
end add
Procedure del(queue, n, front, rear, flag, data)
if(front = rear and flag = 0)
then call QUEUE_EMPTY
front &lt;- (front+1) mod n
if(front = rear)
then flag &lt;- 1
end del</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/AlgorithmGossip/">AlgorithmGossip</a></li></span></span> | <span class="tags">Tagged <a href="/tags/AlgorithmGossip/" class="label label-primary">AlgorithmGossip</a></span> | <span class="time">recent updated:<time title="2014-03-07 10:36:08"datetime="2014-03-07 10:36:08"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--QueueByArray/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-AlgorithmGossip-AlgorithmGossip--QueueByArray" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--QueueByLink/">QueueByLink</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--QueueByLink/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="queuebylink">QueueByLink</h1>
<h3 id="-from-gossip-caterpillar-http-caterpillar-onlyfun-net-gossipcn-index-html-"><a href="http://caterpillar.onlyfun.net/GossipCN/index.html" target="_blank">From Gossip@caterpillar</a></h3>
<h1 id="-algorithm-gossip-c-"><a href="">Algorithm Gossip: 伫列 - 使用链结实作（C语言动态记忆体宣告）</a></h1>
<h2 id="-">说明</h2>
<p>使用阵列来实作伫列，会有伫列空间的限制，如果使用链结配合动态记忆体宣告，就不会有长度的限制。</p>
<h2 id="-">解法</h2>
<p>在使用链结实作伫列时，为了方便，使用一个空的节点来指向伫列前端第一个元素，这个空节点的data栏位并不储存资料，而next当作front的角色，如下图所示：
<img src="&quot;Link&quot;" alt="Link">
为了配合以上的空节点，将伫列是否为空的判断方式，改为front-&gt;next是否指向下一个节点来完成，如果front-&gt;next指向NULL，表示链结中已无下一个资料，所以伫列为空。
由于必须同时维护front与rear两个资讯，而C语言一次只能传回一个值，为了简化程式逻辑，我们将front与rear宣告为全域变数，有兴趣的话，请自己试着不设为全域变数来撰写，这会让程式变得复杂一些。</p>
<h2 id="-">实作</h2>
<ul>
<li>C
/#include <stdio.h>
/#include <stdlib.h>
struct node {
int data;
struct node /<em>next;
};
typedef struct node getnode;
void createq();
void showfront();
void addq(int);
void delq();
void showqueue();
getnode /</em>front, /<em>rear;
int main(void) {
int input, select;
createq();
while(1) {
printf(&quot;\n\n请输入选项(-1结束)：&quot;);
printf(&quot;\n(1)插入值至伫列&quot;);
printf(&quot;\n(2)显示伫列前端&quot;);
printf(&quot;\n(3)删除前端值&quot;);
printf(&quot;\n(4)显示所有内容&quot;);
printf(&quot;\n$c&gt;&quot;);
scanf(&quot;%d&quot;, &amp;select);
if(select == -1)
break;
switch(select) {
case 1:
printf(&quot;\n输入值：&quot;);
scanf(&quot;%d&quot;, &amp;input);
addq(input);
break;
case 2:
showfront();
break;
case 3:
delq();
break;
case 4:
showqueue();
break;
default:
printf(&quot;\n选项错误！&quot;);
}
}
printf(&quot;\n&quot;);
return 0;
}
void createq() {
front = rear = (getnode/</em>) malloc(sizeof(getnode));
front-&gt;next = rear-&gt;next = NULL;
}
void showfront(){
if(front-&gt;next == NULL)
printf(&quot;\n伫列为空！&quot;);
else
printf(&quot;\n顶端值：%d&quot;, front-&gt;next-&gt;data);
}
void addq(int data) {
getnode /<em>newnode;
newnode = (getnode/</em>) malloc(sizeof(getnode));
if(front-&gt;next == NULL)
front-&gt;next = newnode;
newnode-&gt;data = data;
newnode-&gt;next = NULL;
rear-&gt;next = newnode;
rear = newnode;
}
void delq() {
getnode/<em> tmpnode;
if(front-&gt;next == NULL) {
printf(&quot;\n伫列已空！&quot;);
return;
}
tmpnode = front-&gt;next;
front-&gt;next = tmpnode-&gt;next;
free(tmpnode);
}
void showqueue() {
getnode/</em> tmpnode;
tmpnode = front-&gt;next;
printf(&quot;\n伫列内容：&quot;);
while(tmpnode != NULL) {
printf(&quot;%d &quot;, tmpnode-&gt;data);
tmpnode = tmpnode-&gt;next;
}
}</li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/AlgorithmGossip/">AlgorithmGossip</a></li></span></span> | <span class="tags">Tagged <a href="/tags/AlgorithmGossip/" class="label label-primary">AlgorithmGossip</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--QueueByLink/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-AlgorithmGossip-AlgorithmGossip--QueueByLink" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--XStream使用方法总结附实例代码_JSP编程_脚本之家/">XStream使用方法总结附实例代码_JSP编程_脚本之家</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--XStream使用方法总结附实例代码_JSP编程_脚本之家/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="xstream-_jsp-_-">XStream使用方法总结附实例代码<em>JSP编程</em>脚本之家</h1>
<p>页面导航： <a href="http://www.jb51.net/index.htm" target="_blank">首页</a> → <a href="http://www.jb51.net/list/index_1.htm" title="网络编程" target="_blank">网络编程</a> → <a href="http://www.jb51.net/list/list_83_1.htm" title="JSP编程" target="_blank">JSP编程</a> → 正文内容 XStream 实例 </p>
<h1 id="xstream-">XStream使用方法总结附实例代码</h1>
<p>发布：dxy 字体：[<a href="">增加</a> <a href="">减小</a>] 类型：转载 </p>
<p>XStream是一个Java对象和XML相互转换的工具，很好很强大。提供了所有的基础类型、数组、集合等类型直接转换的支持。因此XML常用于数据交换、对象序列化（这种序列化和Java对象的序列化技术有着本质的区别）。
XStream中的核心类就是XStream类，一般来说，熟悉这个类基本就够用了，如果你用的更多，估计是你设计有问题，否则不需要。 
XStream对象相当Java对象和XML之间的转换器，转换过程是双向的。创建XSteam对象的方式很简单，只需要new XStream()即可。 
Java到xml，用toXML()方法。 
Xml到Java，用fromXML()方法。 
在没有任何设置默认情况下，java到xml的映射，是java成员名对应xml的元素名，java类的全名对应xml根元素的名字。而实际中，往往是xml和java类都有了，要完成相互转换，必须进行别名映射。 
别名配置包含三种情况： 
1、类别名，用alias(String name, Class type)。 
2、类成员别名，用aliasField(String alias, Class definedIn, String fieldName) 
3、类成员作为属性别名，用 aliasAttribute(Class definedIn, String attributeName, String alias)，单独命名没有意义，还要通过useAttributeFor(Class definedIn, String fieldName) 应用到某个类上。 
别名的配置是非常重要的，但是其中有些细节问题很重要，在例子中会专门做详细说明。 
另外还有不太常用的方法： 
addImplicitCollection(Class ownerType, String fieldName)，去掉集合类型生成xml的父节点。 
registerConverter(Converter converter) ，注册一个转换器。 
如果你的xml很大，或者为了安全性，以流的方式传输，那么XStream也提供丰富的API， 
使用起来也非常简便。目前还用不到，暂不考虑。 
如果这些基本的操作还不能满足你应用的需求，XStream提供丰富的扩展点。你可以实现自己的转换器。还可以利用XStream完成更负责的功能，比如输出其他非xml格式的数据，还可以输出html，还支持XML Dom类型数据，这些应用起来稍微复杂些。当然这些不是XStream应用的重点，也不用理会，真正需要的时候再查看API和源码研究研究。 
XStream的优点很多，但是也有一些小bug，比如在定义别名中的下划线“<em>”转换为xml后会变成“_</em>”这个符号，很变态。因此，尽量避免在别名中实用任何符号，却是需要下划线的时候，可以考虑实用连接符“-”，这个没有问题。 
另外，我们的Java Bean中，常常有一些常量，在转换过程，XStream也会将这些常量转换过去，形成常量的xml节点，这显然不是想要的结果，对于常量字段，就不做转换了。 
下面给出一个非常典型的而且实用的例子，作为对总结的补充： 
package test; 
import java.util.List; 
//<em>/</em> 
/<em> Created by IntelliJ IDEA.<br> 
/</em> <b>User</b>: leizhimin<br> 
/<em> <b>Date</b>: 2008-5-22 21:10:13<br> 
/</em> <b>Note</b>: Please add comment here! 
/<em>/ 
public class Person { 
private String name; 
private String age; 
private Profile profile; 
private List<Address> addlist; 
public Person(String name, String age, Profile profile, List<Address> addlist) { 
this.name = name; 
this.age = age; 
this.profile = profile; 
this.addlist = addlist; 
} 
public String toString() { 
return &quot;Person{&quot; + 
&quot;name=&#39;&quot; + name + &#39;\&#39;&#39; + 
&quot;, age=&#39;&quot; + age + &#39;\&#39;&#39; + 
&quot;, profile=&quot; + profile + 
&quot;, addlist=&quot; + addlist + 
&#39;}&#39;; 
} 
} 
package test; 
import java.sql.Date; 
//</em>/<em> 
/</em> Created by IntelliJ IDEA.<br> 
/<em> <b>User</b>: leizhimin<br> 
/</em> <b>Date</b>: 2008-5-22 21:10:32<br> 
/<em> <b>Note</b>: Please add comment here! 
/</em>/ 
public class Profile { 
private String job; 
private String tel; 
private String remark; 
public Profile(String job, String tel, String remark) { 
this.job = job; 
this.tel = tel; 
this.remark = remark; 
} 
public String toString() { 
return &quot;Profile{&quot; + 
&quot;job=&#39;&quot; + job + &#39;\&#39;&#39; + 
&quot;, tel=&#39;&quot; + tel + &#39;\&#39;&#39; + 
&quot;, remark=&#39;&quot; + remark + &#39;\&#39;&#39; + 
&#39;}&#39;; 
} 
} 
package test; 
//<em>/</em> 
/<em> Created by IntelliJ IDEA.<br> 
/</em> <b>User</b>: leizhimin<br> 
/<em> <b>Date</b>: 2008-5-22 21:10:22<br> 
/</em> <b>Note</b>: Please add comment here! 
/<em>/ 
public class Address { 
private String add; 
private String zipcode; 
public Address(String add, String zipcode) { 
this.add = add; 
this.zipcode = zipcode; 
} 
public String toString() { 
return &quot;Address{&quot; + 
&quot;add=&#39;&quot; + add + &#39;\&#39;&#39; + 
&quot;, zipcode=&#39;&quot; + zipcode + &#39;\&#39;&#39; + 
&#39;}&#39;; 
} 
} 
package test; 
import com.thoughtworks.xstream.XStream; 
import java.util.List; 
import java.util.ArrayList; 
//</em>/<em> 
/</em> Created by IntelliJ IDEA.<br> 
/<em> <b>User</b>: leizhimin<br> 
/</em> <b>Date</b>: 2008-5-22 21:10:47<br> 
/<em> <b>Note</b>: XStream学习[<a href="http://lavasoft.blog.51cto.com" target="_blank">http://lavasoft.blog.51cto.com</a>] 
/</em>/ 
public class TestXStream { 
public static void main(String args[]) { 
test(); 
} 
public static void test() { 
System.out.println(&quot;----------XStream学习:<a href="http://lavasoft.blog.51cto.com----------" target="_blank">http://lavasoft.blog.51cto.com----------</a>&quot;); 
//目标对象 
Address address1 = new Address(&quot;郑州市经三路&quot;, &quot;450001&quot;); 
Address address2 = new Address(&quot;西安市雁塔路&quot;, &quot;710002&quot;); 
List<Address> addList = new ArrayList<Address>(); 
addList.add(address1); 
addList.add(address2); 
Profile profile = new Profile(&quot;软件工程师&quot;, &quot;13512129933&quot;, &quot;备注说明&quot;); 
Person person = new Person(&quot;熔岩&quot;, &quot;27&quot;, profile, addList); 
//转换装配 
XStream xStream = new XStream(); 
//<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em> 设置类别名 /<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/ 
xStream.alias(&quot;PERSON&quot;, test.Person.class); 
xStream.alias(&quot;PROFILE&quot;, test.Profile.class); 
xStream.alias(&quot;ADDRESS&quot;, test.Address.class); 
output(1, xStream, person); 
//<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em> 设置类成员的别名 /</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/ 
//设置Person类的name成员别名Name 
xStream.aliasField(&quot;Name&quot;, Person.class, &quot;name&quot;); 
//<em>[注意] 设置Person类的profile成员别名PROFILE,这个别名和Profile类的别名一致, 
/</em> 这样可以保持XStream对象可以从profile成员生成的xml片段直接转换为Profile成员, 
/<em> 如果成员profile的别名和Profile的别名不一致,则profile成员生成的xml片段不可 
/</em> 直接转换为Profile对象,需要重新创建XStream对象,这岂不给自己找麻烦? /<em>/ 
xStream.aliasField(&quot;PROFILE&quot;, test.Person.class, &quot;profile&quot;); 
xStream.aliasField(&quot;ADDLIST&quot;, test.Person.class, &quot;addlist&quot;); 
xStream.aliasField(&quot;Add&quot;, test.Address.class, &quot;add&quot;); 
xStream.aliasField(&quot;Job&quot;, test.Profile.class, &quot;job&quot;); 
output(2, xStream, person); 
//</em>/<em>/</em>/<em>/</em>/<em>/</em> 设置类成员为xml一个元素上的属性 /<em>/</em>/<em>/</em>/<em>/</em>/<em>/ 
xStream.useAttributeFor(Address.class, &quot;zipcode&quot;); 
//</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em> 设置属性的别名 /<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/ 
xStream.aliasAttribute(test.Address.class, &quot;zipcode&quot;, &quot;Zipcode&quot;); 
output(3, xStream, person); 
//</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em> 将xml转为java对象 /<em>/</em>/<em>/</em>/<em>/</em>×/<em>/</em>/<em>/</em>/ 
String person_xml = &quot;<PERSON>\n&quot; + 
&quot; <Name>熔岩</Name>\n&quot; + 
&quot; <age>27</age>\n&quot; + 
&quot; <PROFILE>\n&quot; + 
&quot; <Job>软件工程师</Job>\n&quot; + 
&quot; <tel>13512129933</tel>\n&quot; + 
&quot; <remark>备注说明</remark>\n&quot; + 
&quot; </PROFILE>\n&quot; + 
&quot; <ADDLIST>\n&quot; + 
&quot; <ADDRESS Zipcode=\"450001\">\n&quot; + 
&quot; <Add>郑州市经三路</Add>\n&quot; + 
&quot; </ADDRESS>\n&quot; + 
&quot; <ADDRESS Zipcode=\"710002\">\n&quot; + 
&quot; <Add>西安市雁塔路</Add>\n&quot; + 
&quot; </ADDRESS>\n&quot; + 
&quot; </ADDLIST>\n&quot; + 
&quot;</PERSON>&quot;; 
String profile_xml = &quot; <PROFILE>\n&quot; + 
&quot; <Job>软件工程师</Job>\n&quot; + 
&quot; <tel>13512129933</tel>\n&quot; + 
&quot; <remark>备注说明</remark>\n&quot; + 
&quot; </PROFILE>&quot;; 
String address_xml = &quot; <ADDRESS Zipcode=\"710002\">\n&quot; + 
&quot; <Add>西安市雁塔路</Add>\n&quot; + 
&quot; </ADDRESS>&quot;; 
//同样实用上面的XStream对象xStream 
System.out.println(xStream.fromXML(person_xml).toString()); 
System.out.println(xStream.fromXML(profile_xml).toString()); 
System.out.println(xStream.fromXML(address_xml).toString()); 
} 
public static void output(int i, XStream xStream, Object obj) { 
String xml = xStream.toXML(obj); 
System.out.println(&quot;&gt;&gt;&gt;第[ &quot; + i + &quot;]次输出\n&quot;); 
System.out.println(xml + &quot;\n&quot;); 
} 
} 
----------XStream学习:<a href="http://lavasoft.blog.51cto.com----------" target="_blank">http://lavasoft.blog.51cto.com----------</a> </p>
<blockquote>
<blockquote>
<blockquote>
<p>第[ 1]次输出 </p>
<p><PERSON> </p>
<p><name>熔岩</name> </p>
<p><age>27</age> </p>
<p><profile> </p>
<p><job>软件工程师</job> </p>
<p><tel>13512129933</tel> </p>
<p><remark>备注说明</remark> 
</profile> </p>
<p><addlist> </p>
<p><ADDRESS> </p>
<p><add>郑州市经三路</add> </p>
<p><zipcode>450001</zipcode> 
</ADDRESS> </p>
<p><ADDRESS> </p>
<p><add>西安市雁塔路</add> </p>
<p><zipcode>710002</zipcode> 
</ADDRESS> 
</addlist> 
</PERSON> 
第[ 2]次输出 </p>
<p><PERSON> </p>
<p><Name>熔岩</Name> </p>
<p><age>27</age> </p>
<p><PROFILE> </p>
<p><Job>软件工程师</Job> </p>
<p><tel>13512129933</tel> </p>
<p><remark>备注说明</remark> 
</PROFILE> </p>
<p><ADDLIST> </p>
<p><ADDRESS> </p>
<p><Add>郑州市经三路</Add> </p>
<p><zipcode>450001</zipcode> 
</ADDRESS> </p>
<p><ADDRESS> </p>
<p><Add>西安市雁塔路</Add> </p>
<p><zipcode>710002</zipcode> 
</ADDRESS> 
</ADDLIST> 
</PERSON> 
第[ 3]次输出 </p>
<p><PERSON> </p>
<p><Name>熔岩</Name> </p>
<p><age>27</age> </p>
<p><PROFILE> </p>
<p><Job>软件工程师</Job> </p>
<p><tel>13512129933</tel> </p>
<p><remark>备注说明</remark> 
</PROFILE> </p>
<p><ADDLIST> </p>
<p><ADDRESS Zipcode="450001"> </p>
<p><Add>郑州市经三路</Add> 
</ADDRESS> </p>
<p><ADDRESS Zipcode="710002"> </p>
<p><Add>西安市雁塔路</Add> 
</ADDRESS> 
</ADDLIST> 
</PERSON> 
Person{name=&#39;熔岩&#39;, age=&#39;27&#39;, profile=Profile{job=&#39;软件工程师&#39;, tel=&#39;13512129933&#39;, remark=&#39;备注说明&#39;}, addlist=[Address{add=&#39;郑州市经三路&#39;, zipcode=&#39;450001&#39;}, Address{add=&#39;西安市雁塔路&#39;, zipcode=&#39;710002&#39;}]} 
Profile{job=&#39;软件工程师&#39;, tel=&#39;13512129933&#39;, remark=&#39;备注说明&#39;} 
Address{add=&#39;西安市雁塔路&#39;, zipcode=&#39;710002&#39;} 
Process finished with exit code 0 
在实际中，类的属性很多，嵌套层次也很复杂，如果仅仅使用XStream原生API来硬编码设置别名等属性，显得太生硬也难以维护。完全可以考虑通过一个xml配置文件来定义所有用到的类的别名定义（包括其成员），然后，通过读取配置构建一个XStream的工厂，在用到时候直接去取，而不是让实用者组装。我目前的一个项目中，就是这么实现的，效果非常的好。 
下面我给出针对上面提出的问题一个解决方案： 
思想：考虑做一个过滤器，在xml转java之前，在Java转xml之后，应用这个过滤器。这个过滤器提供将xml中的“<strong>”替换为“-”，并且将xml中的不需要的节点剔除。 
在过滤之前，我实现了个转换器装配，这一步通过xml来配置，并在java中获取。 
代码就省略了，这一步很灵活，关键看你的应用了。 
为了能过滤xml，我们需要用Dom4j递归遍历xml文档。下面一些算法代码： 
//递归算法：遍历配置文件，找出所有有效的xpath 
private static void recursiveElement(Element element) { 
List<Element> elements = element.elements(); 
validXPathList.add(element.getPath()); 
if (elements.size() == 0) { 
//没有子元素 
} else { 
//有子元素 
for (Iterator<Element> it = elements.iterator(); it.hasNext();) { 
//递归遍历 
recursiveElement(it.next()); 
} 
} 
} 
//递归算法：遍历xml，标识无效的元素节点 
private static void recursiveFixElement(Element element) { 
List<Element> elements = element.elements(); 
if (!validXPathList.contains(element.getPath())) { 
element.addAttribute(&quot;delete&quot;, &quot;true&quot;); 
} 
if (elements.size() == 0) { 
//没有子元素 
} else { 
//有子元素 
for (Iterator<Element> it = elements.iterator(); it.hasNext();) { 
Element e = it.next(); 
if (!validXPathList.contains(e.getPath())) { 
e.addAttribute(&quot;delete&quot;, &quot;true&quot;); 
} 
//递归遍历 
recursiveFixElement(e); 
} 
} 
} 
//<em>/</em> 
/<em> 过滤器接口方法，转换不规范字符，剔除无效节点 
/</em> 
/<em> @param xmlStr 要过滤的xml 
/</em> @return 符合转换器要求的xml 
/*/ 
public static String filter(String xmlStr) { 
Document document = null; 
try { 
document = DocumentHelper.parseText(xmlStr.replaceAll(&quot;</strong>&quot;, &quot;_&quot;)); 
//递归的调用：标记要剔除的xml元素 
recursiveFixElement(document.getRootElement()); 
List<Node> nodeList = document.selectNodes(&quot;//@delete&quot;); 
for (Node node : nodeList) { 
node.getParent().detach(); //剔除xml元素 
} 
} catch (DocumentException e) { 
System.out.println(e.getMessage()); 
e.printStackTrace(); 
} 
return document.asXML(); 
} </p>
</blockquote>
</blockquote>
</blockquote>
<p>-</p>
<p><strong>Tags：</strong><a href="http://img.jb51.net/tag/XStream/1.htm" title="搜索关于XStream的文章" target="_blank">XStream</a> <a href="http://img.jb51.net/tag/%CA%B5%C0%FD/1.htm" title="搜索关于实例的文章" target="_blank">实例</a>
<a href="&quot;复制本文链接发给你QQ/MSN上的好友&quot;">复制链接</a><a href="">收藏本文</a><a href="">打印本文</a><a href="">关闭本文</a><a href="http://www.jb51.net/index.htm" target="_blank">返回首页</a> </p>
<p>上一篇：<a href="http://www.jb51.net/article/13684.htm" title="下载完成后页面不自动关闭的方法" target="_blank">下载完成后页面不自动关闭的方法</a></p>
<p>下一篇：<a href="http://www.jb51.net/article/27084.htm" target="_blank">java+sql2005 随机抽取试题的代码</a>
<a href="http://s.jb51.net/"></a></p>
<h2 id="-">相关文章</h2>
<ul>
<li><a href="http://www.jb51.net/article/16686.htm" title="java struts常见错误以及原因分析" target="_blank">java struts常见错误以及原因分析</a></li>
<li><a href="http://www.jb51.net/article/2657.htm" title="指南：想成为一个JSP网站程序员吗？" target="_blank">指南：想成为一个JSP网站程序员吗？</a></li>
<li><a href="http://www.jb51.net/article/2544.htm" title="实例讲解JSP Model2体系结构（上）" target="_blank">实例讲解JSP Model2体系结构（上）</a></li>
<li><a href="http://www.jb51.net/article/16653.htm" title="jsp JFreeChart使用心得与例子" target="_blank">jsp JFreeChart使用心得与例子</a></li>
<li><a href="http://www.jb51.net/article/2665.htm" title="JSP的内部对象" target="_blank">JSP的内部对象</a></li>
<li><a href="http://www.jb51.net/article/16478.htm" title="jsp Hibernate入门教程" target="_blank">jsp Hibernate入门教程</a></li>
<li><a href="http://www.jb51.net/article/2572.htm" title="使用JavaBean创建您的网上日历本(2)" target="_blank">使用JavaBean创建您的网上日历本(2)</a></li>
<li><a href="http://www.jb51.net/article/13160.htm" title="jsp中文乱码 jsp mysql 乱码的解决方法" target="_blank">jsp中文乱码 jsp mysql 乱码的解决方法</a>
<strong>友情提醒</strong>：本站文件的解压密码：<a href="http://www.jb51.net" target="_blank">www.jb51.net</a> (请使用最新的winrar)<a href="http://www.tuidc.com/" title="腾佑科技"></a></li>
</ul>
<h2 id="-">文章评论</h2>
<p>共有 <strong>0 </strong> 位脚本之家网友发表了评论<a href="http://img.jb51.net/comment.asp?id=14542" target="_blank">我来说两句</a></p>
<p><a href="http://idc567.com/" target="_blank"></a>  <a href="http://www.geisnic.com/"></a></p>
<h3 id="-">最 近 更 新</h3>
<ul>
<li><a href="http://www.jb51.net/article/2800.htm" title="为Java应用程序添加退出事件响应" target="_blank">为Java应用程序添加退出事件响应</a></li>
<li><a href="http://www.jb51.net/article/2531.htm" title="我认为JSP有问题(下)" target="_blank">我认为JSP有问题(下)</a></li>
<li><a href="http://www.jb51.net/article/17863.htm" title="jsp 页面上图片分行输出小技巧" target="_blank">jsp 页面上图片分行输出小技巧</a></li>
<li><a href="http://www.jb51.net/article/2527.htm" title="JSP教程(五)-JSP Actions的使用下" target="_blank">JSP教程(五)-JSP Actions的使用下</a></li>
<li><a href="http://www.jb51.net/article/2618.htm" title="也谈用JSP实现新郎、sohu新闻系统的技术。" target="_blank">也谈用JSP实现新郎、sohu新闻系统的技术。</a></li>
<li><a href="http://www.jb51.net/article/2770.htm" title="Java开源项目Hibernate" target="_blank">Java开源项目Hibernate</a></li>
<li><a href="http://www.jb51.net/article/2470.htm" title="一个可以防止刷新的JSP计数器" target="_blank">一个可以防止刷新的JSP计数器</a></li>
<li><a href="http://www.jb51.net/article/2712.htm" title="面向对象编程,我的思想(5)" target="_blank">面向对象编程,我的思想(5)</a></li>
<li><a href="http://www.jb51.net/article/2510.htm" title="JAVA/JSP学习系列之二(Tomcat安装)" target="_blank">JAVA/JSP学习系列之二(Tomcat安装)</a></li>
<li><a href="http://www.jb51.net/article/5296.htm" title="JDBC板块精华整理20051226" target="_blank">JDBC板块精华整理20051226</a></li>
</ul>
<h3 id="-">热 点 排 行</h3>
<ul>
<li><a href="http://www.jb51.net/article/15792.htm" title="FCKeditor使用方法(FCKeditor_2.6.3)详细使用说明" target="_blank">FCKeditor使用方法(FCKeditor_2.</a></li>
<li><a href="http://www.jb51.net/article/15976.htm" title="struts2+spring+hibernate分页代码[比较多]" target="_blank">struts2+spring+hibernate分页代</a></li>
<li><a href="http://www.jb51.net/article/16653.htm" title="jsp JFreeChart使用心得与例子" target="_blank">jsp JFreeChart使用心得与例子</a></li>
<li><a href="http://www.jb51.net/article/21204.htm" title="搭建EXTJS和STRUTS2框架(ext和struts2简单实例)" target="_blank">搭建EXTJS和STRUTS2框架(ext和st</a></li>
<li><a href="http://www.jb51.net/article/6740.htm" title="jsp生成静态页面的方法" target="_blank">jsp生成静态页面的方法</a></li>
<li><a href="http://www.jb51.net/article/13388.htm" title="Jsp页面实现文件上传下载类代码" target="_blank">Jsp页面实现文件上传下载类代码</a></li>
<li><a href="http://www.jb51.net/article/15974.htm" title="一个实用的JSP分页代码" target="_blank">一个实用的JSP分页代码</a></li>
<li><a href="http://www.jb51.net/article/6742.htm" title="JSP连接Access数据库" target="_blank">JSP连接Access数据库</a></li>
<li><a href="&quot;XStream使用方法总结附实例代码&quot;">XStream使用方法总结附实例代码</a></li>
<li><a href="http://www.jb51.net/article/16437.htm" title="response.setHeader参数、用法的介绍" target="_blank">response.setHeader参数、用法的</a></li>
</ul>
<h3 id="js-css-">Js与CSS工具</h3>
<ul>
<li><a href="http://www.jb51.net/tools/cssyasuo.shtml" target="_blank">CSS在线压缩格式化(中文)</a></li>
<li><a href="http://www.codebeautifier.com/" target="_blank">css 格式化整理工具(英文)</a></li>
<li><a href="http://www.jb51.net/csstidy/css_optimiser.php?lang=zh" target="_blank">CSS整形格式化</a></li>
<li><a href="http://tools.jb51.net/tools/js_geshihua.asp" target="_blank">JavaScript 格式化整理工具</a></li>
<li><a href="http://jsbeautifier.org/" target="_blank">jsbeautifier Js格式化整理工具(英文)</a></li>
<li><a href="http://www.phpformatter.com/" target="_blank">php 格式化整理工具(英文)</a></li>
<li><a href="http://www.jb51.net/tools/html-js.htm" target="_blank">HTML/JS互相转换工具</a></li>
<li><a href="http://www.jb51.net/tools/packer.htm" target="_blank">javascript pack加密压缩工具</a></li>
<li><a href="http://www.jb51.net/tools/jsmin/index.htm" target="_blank">JS Minifier压缩</a></li>
<li><a href="http://www.jb51.net/tools/JShunxiao.htm" target="_blank">JS混淆工具</a></li>
<li><a href="http://www.jb51.net/tools/js_Debug.htm" target="_blank">在线JS脚本校验器错误</a></li>
<li><p><a href="http://tools.jb51.net/tools/regex.asp" target="_blank">JavaScript 正则表达式在线测试工具</a></p>
<h3 id="-">代码转换工具</h3>
</li>
<li><p><a href="http://www.jb51.net/tools/base64.htm" target="_blank">Base64编码加密</a></p>
</li>
<li><a href="http://tools.jb51.net//tools/Escape.asp" target="_blank">Escape加解密</a></li>
<li><a href="http://tools.jb51.net/html_ubb.asp" target="_blank">HTML/UBB代码转换</a></li>
<li><a href="http://www.jb51.net/tools/fanjianzhi.htm" target="_blank">GB2312/BIG5繁简字转换</a></li>
<li><a href="http://www.jb51.net/tools/jingdian.shtml" target="_blank">经典小工具集 数字转换</a></li>
<li><a href="http://www.jb51.net/tools/htmlto.htm" target="_blank">HTML多功能代码转换器</a></li>
<li><a href="http://www.jb51.net/tools/xunleijm.htm" target="_blank">迅雷快车加/解密</a></li>
<li><a href="http://tools.jb51.net/tools/pinyin.asp" target="_blank">汉字转换拼音</a>
<a href="http://www.enkj.com/" target="_blank"></a> <a href="http://www.tuidc.com/"></a></li>
</ul>
<p><a href="http://www.xunbiz.com/click/click.asp?str=44717c87b8d8fc3a3e18797345b90434"></a></p>
<p>-</p>
<ul>
<li><a href="http://www.jb51.net/tools/cssyasuo.shtml" target="_blank">CSS在线压缩格式化(中文)</a></li>
<li><a href="http://www.codebeautifier.com" target="_blank">css 格式化整理工具(英文)</a></li>
<li><a href="http://www.jb51.net/csstidy/css_optimiser.php?lang=zh" target="_blank">CSS整形格式化</a></li>
<li><a href="http://tools.jb51.net/tools/js_geshihua.asp" target="_blank">JavaScript 格式化整理工具</a></li>
<li><a href="http://jsbeautifier.org" target="_blank">jsbeautifier Js格式化整理工具(英文)</a></li>
<li><a href="http://www.phpformatter.com" target="_blank">php 格式化整理工具(英文)</a></li>
<li><a href="http://www.jb51.net/tools/html-js.htm" target="_blank">HTML/JS互相转换工具</a></li>
<li><a href="http://www.jb51.net/tools/packer.htm" target="_blank">javascript pack加密压缩工具</a></li>
<li><a href="http://www.jb51.net/tools/jsmin/index.htm" target="_blank">JS Minifier压缩</a></li>
<li><a href="http://www.jb51.net/tools/JShunxiao.htm" target="_blank">JS混淆工具</a></li>
<li><a href="http://www.jb51.net/tools/js_Debug.htm" target="_blank">在线JS脚本校验器错误</a></li>
<li><p><a href="http://tools.jb51.net/tools/regex.asp" target="_blank">JavaScript 正则表达式在线测试工具</a></p>
</li>
<li><p><a href="http://www.jb51.net/tools/base64.htm" target="_blank">Base64编码加密</a></p>
</li>
<li><a href="http://tools.jb51.net//tools/Escape.asp" target="_blank">Escape加解密</a></li>
<li><a href="http://tools.jb51.net/html_ubb.asp" target="_blank">HTML/UBB代码转换</a></li>
<li><a href="http://www.jb51.net/tools/fanjianzhi.htm" target="_blank">GB2312/BIG5繁简字转换</a></li>
<li><a href="http://www.jb51.net/tools/jingdian.shtml" target="_blank">经典小工具集 数字转换</a></li>
<li><a href="http://www.jb51.net/tools/htmlto.htm" target="_blank">HTML多功能代码转换器</a></li>
<li><a href="http://www.jb51.net/tools/xunleijm.htm" target="_blank">迅雷快车加/解密</a></li>
<li><a href="http://tools.jb51.net/tools/pinyin.asp" target="_blank">汉字转换拼音</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--XStream使用方法总结附实例代码_JSP编程_脚本之家/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--XStream使用方法总结附实例代码_JSP编程_脚本之家" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--xStream完美转换XML、JSON-hoojo-博客园/">xStream完美转换XML、JSON </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--xStream完美转换XML、JSON-hoojo-博客园/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="xstream-xml-json-hoojo-">xStream完美转换XML、JSON - hoojo - 博客园</h1>
<h1 id="-xstream-xml-json-"><a href="">xStream完美转换XML、JSON</a></h1>
<p><strong>xStream**</strong>框架<strong>**</strong></p>
<p>xStream可以轻易的将Java对象和xml文档相互转换，而且可以修改某个特定的属性和节点名称，而且也支持json的转换；</p>
<p>前面有介绍过json-lib这个框架，在线博文：<a href="http://www.cnblogs.com/hoojo/archive/2011/04/21/2023805.html" target="_blank"><a href="http://www.cnblogs.com/hoojo/archive/2011/04/21/2023805.html">http://www.cnblogs.com/hoojo/archive/2011/04/21/2023805.html</a></a></p>
<p>以及Jackson这个框架，在线博文：<a href="http://www.cnblogs.com/hoojo/archive/2011/04/22/2024628.html" target="_blank"><a href="http://www.cnblogs.com/hoojo/archive/2011/04/22/2024628.html">http://www.cnblogs.com/hoojo/archive/2011/04/22/2024628.html</a></a></p>
<p>它们都完美支持JSON，但是对xml的支持还不是很好。一定程度上限制了对Java对象的描述，不能让xml完全体现到对Java对象的描述。这里将会介绍xStream对JSON、XML的完美支持。xStream不仅对XML的转换非常友好，而且提供annotation注解，可以在JavaBean中完成对xml节点、属性的描述。以及对JSON也支持，只需要提供相关的JSONDriver就可以完成转换。</p>
<p><strong>一、**</strong>准备工作<strong>**</strong></p>
<p>1、 下载jar包、及官方资源</p>
<p>xStream的jar下载地址：</p>
<p><a href="https://nexus.codehaus.org/content/repositories/releases/com/thoughtworks/xstream/xstream-distribution/1.3.1/xstream-distribution-1.3.1-bin.zip" target="_blank"><a href="https://nexus.codehaus.org/content/repositories/releases/com/thoughtworks/xstream/xstream-distribution/1.3.1/xstream-distribution-1.3.1-bin.zip">https://nexus.codehaus.org/content/repositories/releases/com/thoughtworks/xstream/xstream-distribution/1.3.1/xstream-distribution-1.3.1-bin.zip</a></a></p>
<p>官方的示例很全，官方参考示例：<a href="http://xstream.codehaus.org/tutorial.html" target="_blank"><a href="http://xstream.codehaus.org/tutorial.html">http://xstream.codehaus.org/tutorial.html</a></a></p>
<p>添加xstream-1.3.1.jar文件到工程中，就可以开始下面的工作；需要的jar如下：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/hoojo/201104/201104221846024160.jpg" target="_blank"><img src="&quot;clip_image002&quot;" alt="clip_image002"></a></p>
<p>2、 测试用例代码
package com.hoo.test;</p>
<p>import java.io.IOException;
import java.io.ObjectInputStream;</p>
<p>import java.io.ObjectOutputStream;
import java.io.StringReader;</p>
<p>import java.io.Writer;
import java.util.ArrayList;</p>
<p>import java.util.HashMap;
import java.util.Iterator;</p>
<p>import java.util.List;
import java.util.Map;</p>
<p>import java.util.Set;
import org.codehaus.jettison.json.JSONException;</p>
<p>import org.junit.After;
import org.junit.Before;</p>
<p>import org.junit.Test;
import com.hoo.entity.Birthday;</p>
<p>import com.hoo.entity.Classes;
import com.hoo.entity.ListBean;</p>
<p>import com.hoo.entity.Student;
import com.thoughtworks.xstream.XStream;</p>
<p>import com.thoughtworks.xstream.io.HierarchicalStreamWriter;
import com.thoughtworks.xstream.io.json.JettisonMappedXmlDriver;</p>
<p>import com.thoughtworks.xstream.io.json.JsonHierarchicalStreamDriver;
import com.thoughtworks.xstream.io.json.JsonWriter;</p>
<p>//<em>/</em>
/* <b>function:</b>Java对象和XML字符串的相互转换</p>
<p>/<em> jar-lib-version: xstream-1.3.1
/</em> @author hoojo</p>
<p>/<em> @createDate Nov 27, 2010 12:15:15 PM
/</em> @file XStreamTest.java</p>
<p>/<em> @package com.hoo.test
/</em> @project WebHttpUtils</p>
<p>/<em> @blog <a href="http://blog.csdn.net/IBM_hoojo" target="_blank">http://blog.csdn.net/IBM_hoojo</a>
/</em> @email hoojo_@126.com</p>
<p>/<em> @version 1.0
/</em>/</p>
<p>@SuppressWarnings(&quot;unchecked&quot;)
public class XStreamTest {</p>
<p>private XStream xstream = null;
private ObjectOutputStream out = null;</p>
<p>private ObjectInputStream in = null;
private Student bean = null;</p>
<p>//<em>/</em>
/* <b>function:</b>初始化资源准备</p>
<p>/<em> @author hoojo
/</em> @createDate Nov 27, 2010 12:16:28 PM</p>
<p>/*/
@Before</p>
<p>public void init() {
try {</p>
<p>xstream = new XStream();
//xstream = new XStream(new DomDriver()); // 需要xpp3 jar</p>
<p>} catch (Exception e) {
e.printStackTrace();</p>
<p>}
bean = new Student();</p>
<p>bean.setAddress(&quot;china&quot;);
bean.setEmail(&quot;jack@email.com&quot;);</p>
<p>bean.setId(1);
bean.setName(&quot;jack&quot;);</p>
<p>Birthday day = new Birthday();
day.setBirthday(&quot;2010-11-22&quot;);</p>
<p>bean.setBirthday(day);
}</p>
<p>//<em>/</em>
/* <b>function:</b>释放对象资源</p>
<p>/<em> @author hoojo
/</em> @createDate Nov 27, 2010 12:16:38 PM</p>
<p>/*/
@After</p>
<p>public void destory() {
xstream = null;</p>
<p>bean = null;
try {</p>
<p>if (out != null) {
out.flush();</p>
<p>out.close();
}</p>
<p>if (in != null) {
in.close();</p>
<p>}
} catch (IOException e) {</p>
<p>e.printStackTrace();
}</p>
<p>System.gc();
}</p>
<p>public final void fail(String string) {
System.out.println(string);</p>
<p>}
public final void failRed(String string) {</p>
<p>System.err.println(string);
}</p>
<p>}</p>
<p>通过XStream对象的toXML方法就可以完成Java对象到XML的转换，toXML方法还有2个相同签名的方法，需要传递一个流。然后通过流来完成xml信息的输出。</p>
<p>3、 需要的JavaBean
package com.hoo.entity;</p>
<p>public class Student {
private int id;</p>
<p>private String name;
private String email;</p>
<p>private String address;
private Birthday birthday;</p>
<p>//getter、setter
public String toString() {</p>
<p>return this.name + &quot;/#&quot; + this.id + &quot;/#&quot; + this.address + &quot;/#&quot; + this.birthday + &quot;/#&quot; + this.email;
}</p>
<p>}</p>
<hr>
<p><strong>二、**</strong>Java<strong><strong>转换成</strong></strong>XML**</p>
<p>1、 JavaBean转换XM
//<em>/</em></p>
<p>/<em> <b>function:</b>Java对象转换成XML字符串
/</em> @author hoojo</p>
<p>/<em> @createDate Nov 27, 2010 12:19:01 PM
/</em>/</p>
<p>@Test
public void writeBean2XML() {</p>
<p>try {
fail(&quot;------------Bean-&gt;XML------------&quot;);</p>
<p>fail(xstream.toXML(bean));
fail(&quot;重命名后的XML&quot;);</p>
<p>//类重命名
//xstream.alias(&quot;account&quot;, Student.class);</p>
<p>//xstream.alias(&quot;生日&quot;, Birthday.class);
//xstream.aliasField(&quot;生日&quot;, Student.class, &quot;birthday&quot;);</p>
<p>//xstream.aliasField(&quot;生日&quot;, Birthday.class, &quot;birthday&quot;);
//fail(xstream.toXML(bean));</p>
<p>//属性重命名
xstream.aliasField(&quot;邮件&quot;, Student.class, &quot;email&quot;);</p>
<p>//包重命名
xstream.aliasPackage(&quot;hoo&quot;, &quot;com.hoo.entity&quot;);</p>
<p>fail(xstream.toXML(bean));
} catch (Exception e) {</p>
<p>e.printStackTrace();
}</p>
<p>}</p>
<p>看结果中的第一份xml内容，是没有经过然后修改或重命名的文档，按照原样输出。文档中的第二份文档的package经过重命名，email属性也经过重命名以及类名也可以进行重命名的。</p>
<p>运行后结果如下：
------------Bean-&gt;XML------------</p>
<p><com.hoo.entity.Student></p>
<id>1</id>

<name>jack</name>
<email>jack@email.com</email>

<address>china</address>
<birthday>

<birthday>2010-11-22</birthday>
</birthday>

</com.hoo.entity.Student>
重命名后的XML

<hoo.Student>
<id>1</id>

<name>jack</name>
&lt;邮件&gt;jack@email.com&lt;/邮件&gt;

<address>china</address>
<birthday>

<birthday>2010-11-22</birthday>
</birthday>

</hoo.Student>

2、 将List集合转换成xml文档

//<em>/</em>

/<em> <b>function:</b>将Java的List集合转换成XML对象
/</em> @author hoojo

/<em> @createDate Nov 27, 2010 12:20:07 PM
/</em>/

@Test
public void writeList2XML() {

try {
//修改元素名称

xstream.alias(&quot;beans&quot;, ListBean.class);
xstream.alias(&quot;student&quot;, Student.class);

fail(&quot;----------List--&gt;XML----------&quot;);
ListBean listBean = new ListBean();

listBean.setName(&quot;this is a List Collection&quot;);
List<Object> list = new ArrayList<Object>();

list.add(bean);
list.add(bean);//引用bean

//list.add(listBean);//引用listBean，父元素
bean = new Student();

bean.setAddress(&quot;china&quot;);
bean.setEmail(&quot;tom@125.com&quot;);

bean.setId(2);
bean.setName(&quot;tom&quot;);

Birthday day = new Birthday(&quot;2010-11-22&quot;);
bean.setBirthday(day);

list.add(bean);
listBean.setList(list);

//将ListBean中的集合设置空元素，即不显示集合元素标签
//xstream.addImplicitCollection(ListBean.class, &quot;list&quot;);

//设置reference模型
//xstream.setMode(XStream.NO_REFERENCES);//不引用

xstream.setMode(XStream.ID_REFERENCES);//id引用
//xstream.setMode(XStream.XPATH_ABSOLUTE_REFERENCES);//绝对路径引用

//将name设置为父类（Student）的元素的属性
xstream.useAttributeFor(Student.class, &quot;name&quot;);

xstream.useAttributeFor(Birthday.class, &quot;birthday&quot;);
//修改属性的name

xstream.aliasAttribute(&quot;姓名&quot;, &quot;name&quot;);
xstream.aliasField(&quot;生日&quot;, Birthday.class, &quot;birthday&quot;);

fail(xstream.toXML(listBean));
} catch (Exception e) {

e.printStackTrace();
}

}

上面的代码运行后，结果如下：

----------List--&gt;XML----------

<beans id="1">
<name>this is a List Collection</name>

<p><list id="2"></p>
<student id="3" 姓名="jack">

<id>1</id>
<email>jack@email.com</email>

<address>china</address>
<birthday id="4" 生日="2010-11-22"/>

</student>
<student reference="3"/>

<student id="5" 姓名="tom">
<id>2</id>

<email>tom@125.com</email>
<address>china</address>

<birthday id="6" 生日="2010-11-22"/>
</student>

<p></list>
</beans></p>
<p>如果不加xstream.addImplicitCollection(ListBean.<strong>class</strong>, &quot;list&quot;);</p>
<p>这个设置的话，会出现一个List节点包裹着Student节点元素。添加addImplicitCollection可以忽略这个list节点元素。那么上面的list节点就不存在，只会在beans元素中出现name、student这2个xml元素标签；</p>
<p>setMode是设置相同的对象的引用方式，如果设置XStream.NO_REFERENCES就是不引用，会输出2分相同的Student元素。如果是XStream.ID_REFERENCES会引用相同的那个对象的id属性，如果是XStream.XPATH_ABSOLUTE_REFERENCES引用，那么它将显示xpath路径。上面采用的id引用，<student reference="3"/>这个引用了id=3的那个student标签元素；</p>
<p>useAttributeFor是设置某个节点显示到父节点的属性中，也就是将指定class中的指定属性，在这个class元素节点的属性中显示。</p>
<p>如：<student><name>hoojo</name></student></p>
<p>设置好后就是这样的结果：<student name=”hoojo”></student></p>
<p>aliasAttribute是修改属性名称。</p>
<p>3、 在JavaBean中添加Annotation注解进行重命名设置</p>
<p>先看看JavaBean的代码
package com.hoo.entity;</p>
<p>import java.util.Arrays;
import java.util.Calendar;</p>
<p>import java.util.GregorianCalendar;
import java.util.List;</p>
<p>import com.thoughtworks.xstream.annotations.XStreamAlias;
import com.thoughtworks.xstream.annotations.XStreamAsAttribute;</p>
<p>import com.thoughtworks.xstream.annotations.XStreamConverter;
import com.thoughtworks.xstream.annotations.XStreamImplicit;</p>
<p>import com.thoughtworks.xstream.annotations.XStreamOmitField;
@XStreamAlias(&quot;class&quot;)</p>
<p>public class Classes {
//*</p>
<p>/<em> 设置属性显示
/</em>/</p>
<p>@XStreamAsAttribute
@XStreamAlias(&quot;名称&quot;)</p>
<p>private String name;
//*</p>
<p>/<em> 忽略
/</em>/</p>
<p>@XStreamOmitField
private int number;</p>
<p>@XStreamImplicit(itemFieldName = &quot;Students&quot;)
private List<Student> students;</p>
<p>@SuppressWarnings(&quot;unused&quot;)
@XStreamConverter(SingleValueCalendarConverter.class)</p>
<p>private Calendar created = new GregorianCalendar();
public Classes(){}</p>
<p>public Classes(String name, Student... stu) {
this.name = name;</p>
<p>this.students = Arrays.asList(stu);
}</p>
<p>//getter、setter
}</p>
<p>SingleValueCalendarConverter.java这个是一个类型转换器</p>
<p>package com.hoo.entity;</p>
<p>import java.util.Calendar;
import java.util.Date;</p>
<p>import java.util.GregorianCalendar;
import com.thoughtworks.xstream.converters.Converter;</p>
<p>import com.thoughtworks.xstream.converters.MarshallingContext;
import com.thoughtworks.xstream.converters.UnmarshallingContext;</p>
<p>import com.thoughtworks.xstream.io.HierarchicalStreamReader;
import com.thoughtworks.xstream.io.HierarchicalStreamWriter;</p>
<p>public class SingleValueCalendarConverter implements Converter {
public void marshal(Object source, HierarchicalStreamWriter writer,</p>
<p>MarshallingContext context) {
Calendar calendar = (Calendar) source;</p>
<p>writer.setValue(String.valueOf(calendar.getTime().getTime()));
}</p>
<p>public Object unmarshal(HierarchicalStreamReader reader,
UnmarshallingContext context) {</p>
<p>GregorianCalendar calendar = new GregorianCalendar();
calendar.setTime(new Date(Long.parseLong(reader.getValue())));</p>
<p>return calendar;
}</p>
<p>@SuppressWarnings(&quot;unchecked&quot;)
public boolean canConvert(Class type) {</p>
<p>return type.equals(GregorianCalendar.class);
}</p>
<p>}</p>
<p>再看看测试用例代码</p>
<p>@Test</p>
<p>public void writeList2XML4Annotation() {
try {</p>
<p>failRed(&quot;---------annotation Bean --&gt; XML---------&quot;);
Student stu = new Student();</p>
<p>stu.setName(&quot;jack&quot;);
Classes c = new Classes(&quot;一班&quot;, bean, stu);</p>
<p>c.setNumber(2);
//对指定的类使用Annotation</p>
<p>//xstream.processAnnotations(Classes.class);
//启用Annotation</p>
<p>//xstream.autodetectAnnotations(true);
xstream.alias(&quot;student&quot;, Student.class);</p>
<p>fail(xstream.toXML(c));
} catch (Exception e) {</p>
<p>e.printStackTrace();
}</p>
<p>}</p>
<p>当启用annotation或是对某个特定的类启用annotation时，上面的classes这个类才有效果。如果不启用annotation，运行后结果如下：</p>
<p>---------annotation Bean --&gt; XML---------</p>
<p><com.hoo.entity.Classes></p>
<name>一班</name>

<p><number>2</number></p>
<students class="java.util.Arrays$ArrayList">

<a class="student-array">
<student>

<id>1</id>
<name>jack</name>

<email>jack@email.com</email>
<address>china</address>

<birthday>
<birthday>2010-11-22</birthday>

</birthday>
</student>

<student>
<id>0</id>

<name>jack</name>
</student>

</a>
</students>

<created>
<time>1303292056718</time>

<timezone>Asia/Shanghai</timezone>
</created>

<p></com.hoo.entity.Classes></p>
<p>当启用annotation后xstream.processAnnotations(Classes.class)，结果如下：</p>
<p>---------annotation Bean --&gt; XML---------</p>
<class 名称="一班">
<Students>

<id>1</id>
<name>jack</name>

<email>jack@email.com</email>
<address>china</address>

<birthday>
<birthday>2010-11-22</birthday>

</birthday>
</Students>

<Students>
<id>0</id>

<name>jack</name>
</Students>

<created>1303292242937</created>
</class>

<p>4、 Map集合转换xml文档</p>
<p>//<em>/</em></p>
<p>/<em> <b>function:</b>Java Map集合转XML
/</em> @author hoojo</p>
<p>/<em> @createDate Nov 27, 2010 1:13:26 PM
/</em>/</p>
<p>@Test
public void writeMap2XML() {</p>
<p>try {
failRed(&quot;---------Map --&gt; XML---------&quot;);</p>
<p>Map<String, Student> map = new HashMap<String, Student>();
map.put(&quot;No.1&quot;, bean);//put</p>
<p>bean = new Student();
bean.setAddress(&quot;china&quot;);</p>
<p>bean.setEmail(&quot;tom@125.com&quot;);
bean.setId(2);</p>
<p>bean.setName(&quot;tom&quot;);
Birthday day = new Birthday(&quot;2010-11-22&quot;);</p>
<p>bean.setBirthday(day);
map.put(&quot;No.2&quot;, bean);//put</p>
<p>bean = new Student();
bean.setName(&quot;jack&quot;);</p>
<p>map.put(&quot;No.3&quot;, bean);//put
xstream.alias(&quot;student&quot;, Student.class);</p>
<p>xstream.alias(&quot;key&quot;, String.class);
xstream.useAttributeFor(Student.class, &quot;id&quot;);</p>
<p>xstream.useAttributeFor(&quot;birthday&quot;, String.class);
fail(xstream.toXML(map));</p>
<p>} catch (Exception e) {
e.printStackTrace();</p>
<p>}
}</p>
<p>运行后结果如下：</p>
<p>---------Map --&gt; XML---------</p>
<map>
<entry>

<key>No.3</key>
<student id="0">

<name>jack</name>
</student>

</entry>
<entry>

<key>No.1</key>
<student id="1">

<name>jack</name>
<email>jack@email.com</email>

<address>china</address>
<birthday birthday="2010-11-22"/>

</student>
</entry>

<entry>
<key>No.2</key>

<student id="2">
<name>tom</name>

<email>tom@125.com</email>
<address>china</address>

<birthday birthday="2010-11-22"/>
</student>

</entry>
</map>

<p>5、 用OutStream输出流写XML</p>
<p>//<em>/</em></p>
<p>/<em> <b>function:</b>用OutStream输出流写XML
/</em> @author hoojo</p>
<p>/<em> @createDate Nov 27, 2010 1:13:48 PM
/</em>/</p>
<p>@Test
public void writeXML4OutStream() {</p>
<p>try {
out = xstream.createObjectOutputStream(System.out);</p>
<p>Student stu = new Student();
stu.setName(&quot;jack&quot;);</p>
<p>Classes c = new Classes(&quot;一班&quot;, bean, stu);
c.setNumber(2);</p>
<p>failRed(&quot;---------ObjectOutputStream /# JavaObject--&gt; XML---------&quot;);
out.writeObject(stu);</p>
<p>out.writeObject(new Birthday(&quot;2010-05-33&quot;));
out.write(22);//byte</p>
<p>out.writeBoolean(true);
out.writeFloat(22.f);</p>
<p>out.writeUTF(&quot;hello&quot;);
} catch (Exception e) {</p>
<p>e.printStackTrace();
}</p>
<p>}</p>
<p>使用输出流后，可以通过流对象完成xml的构建，即使没有JavaBean对象，你可以用流来构建一个复杂的xml文档，运行后结果如下：</p>
<p>---------ObjectOutputStream /# JavaObject--&gt; XML---------</p>
<p><object-stream></p>
<com.hoo.entity.Student>

<p><id>0</id></p>
<name>jack</name>

<p></com.hoo.entity.Student></p>
<com.hoo.entity.Birthday>

<p><birthday>2010-05-33</birthday>
</com.hoo.entity.Birthday></p>
<p><byte>22</byte></p>
<boolean>true</boolean>

<p><float>22.0</float></p>
<string>hello</string>

<p></object-stream></p>
<hr>
<p><strong>三、**</strong>XML<strong><strong>内容转换</strong></strong>Java<strong><strong>对象**</strong></strong></p>
<p>1、 用InputStream将XML文档转换成java对象
//<em>/</em></p>
<p>/<em> <b>function:</b>用InputStream将XML文档转换成java对象
/</em> 需要额外的jar xpp3-main.jar</p>
<p>/<em> @author hoojo
/</em> @createDate Nov 27, 2010 1:14:52 PM</p>
<p>/*/
@Test</p>
<p>public void readXML4InputStream() {
try {</p>
<p>String s = &quot;<object-stream><com.hoo.entity.Student><id>0</id><name>jack</name>&quot; +
&quot;</com.hoo.entity.Student><com.hoo.entity.Birthday><birthday>2010-05-33</birthday>&quot; +</p>
<p>&quot;</com.hoo.entity.Birthday><byte>22</byte><boolean>true</boolean><float>22.0</float>&quot; +
&quot;<string>hello</string></object-stream>&quot;;</p>
<p>failRed(&quot;---------ObjectInputStream/#/# XML --&gt; javaObject---------&quot;);
StringReader reader = new StringReader(s);</p>
<p>in = xstream.createObjectInputStream(reader);
Student stu = (Student) in.readObject();</p>
<p>Birthday b = (Birthday) in.readObject();
byte i = in.readByte();</p>
<p>boolean bo = in.readBoolean();
float f = in.readFloat();</p>
<p>String str = in.readUTF();
System.out.println(stu);</p>
<p>System.out.println(b);
System.out.println(i);</p>
<p>System.out.println(bo);
System.out.println(f);</p>
<p>System.out.println(str);
} catch (Exception e) {</p>
<p>e.printStackTrace();
}</p>
<p>}</p>
<p>读取后，转换的Java对象，结果如下：</p>
<p>---------ObjectInputStream/#/# XML --&gt; javaObject---------</p>
<p>jack/#0/#null/#null/#null
2010-05-33</p>
<p>22
true</p>
<p>22.0
hello</p>
<p>2、 将xml文档转换成Java对象</p>
<p>//<em>/</em></p>
<p>/<em> <b>function:</b>将XML字符串转换成Java对象
/</em> @author hoojo</p>
<p>/<em> @createDate Nov 27, 2010 2:39:06 PM
/</em>/</p>
<p>@Test
public void readXml2Object() {</p>
<p>try {
failRed(&quot;-----------Xml &gt;&gt;&gt; Bean--------------&quot;);</p>
<p>Student stu = (Student) xstream.fromXML(xstream.toXML(bean));
fail(stu.toString());</p>
<p>List<Student> list = new ArrayList<Student>();
list.add(bean);//add</p>
<p>Map<String, Student> map = new HashMap<String, Student>();
map.put(&quot;No.1&quot;, bean);//put</p>
<p>bean = new Student();
bean.setAddress(&quot;china&quot;);</p>
<p>bean.setEmail(&quot;tom@125.com&quot;);
bean.setId(2);</p>
<p>bean.setName(&quot;tom&quot;);
Birthday day = new Birthday(&quot;2010-11-22&quot;);</p>
<p>bean.setBirthday(day);
list.add(bean);//add</p>
<p>map.put(&quot;No.2&quot;, bean);//put
bean = new Student();</p>
<p>bean.setName(&quot;jack&quot;);
list.add(bean);//add</p>
<p>map.put(&quot;No.3&quot;, bean);//put
failRed(&quot;==========XML &gt;&gt;&gt; List===========&quot;);</p>
<p>List<Student> studetns = (List<Student>) xstream.fromXML(xstream.toXML(list));
fail(&quot;size:&quot; + studetns.size());//3</p>
<p>for (Student s : studetns) {
fail(s.toString());</p>
<p>}
failRed(&quot;==========XML &gt;&gt;&gt; Map===========&quot;);</p>
<p>Map<String, Student> maps = (Map<String, Student>) xstream.fromXML(xstream.toXML(map));
fail(&quot;size:&quot; + maps.size());//3</p>
<p>Set<String> key = maps.keySet();
Iterator<String> iter = key.iterator();</p>
<p>while (iter.hasNext()) {
String k = iter.next();</p>
<p>fail(k + &quot;:&quot; + map.get(k));
}</p>
<p>} catch (Exception e) {
e.printStackTrace();</p>
<p>}
}</p>
<p>运行后结果如下：</p>
<p>-----------Xml &gt;&gt;&gt; Bean--------------</p>
<p>jack/#1/#china/#2010-11-22/#jack@email.com
==========XML &gt;&gt;&gt; List===========</p>
<p>size:3
jack/#1/#china/#2010-11-22/#jack@email.com</p>
<p>tom/#2/#china/#2010-11-22/#tom@125.com
jack/#0/#null/#null/#null</p>
<p>==========XML &gt;&gt;&gt; Map===========
size:3</p>
<p>No.3:jack/#0/#null/#null/#null
No.1:jack/#1/#china/#2010-11-22/#jack@email.com</p>
<p>No.2:tom/#2/#china/#2010-11-22/#tom@125.com</p>
<p>怎么样，成功的完成XML到JavaBean、List、Map的转换，更多对象转换还需要大家一一尝试。用法类似~这里就不一样赘述。</p>
<p><strong>四、**</strong>XStream<strong><strong>对</strong></strong>JSON<strong><strong>的支持**</strong></strong></p>
<p>xStream对JSON也有非常好的支持，它提供了2个模型驱动。用这2个驱动可以完成Java对象到JSON的相互转换。使用JettisonMappedXmlDriver驱动，将Java对象转换成json，需要添加jettison.jar</p>
<p>1、 用JettisonMappedXmlDriver完成Java对象到JSON的转换
//<em>/</em></p>
<p>/<em> <b>function:</b>XStream结合JettisonMappedXmlDriver驱动，转换Java对象到JSON
/</em> 需要添加jettison jar</p>
<p>/<em> @author hoojo
/</em> @createDate Nov 27, 2010 1:23:18 PM</p>
<p>/*/
@Test</p>
<p>public void writeEntity2JETTSON() {
failRed(&quot;=======JettisonMappedXmlDriver===JavaObject &gt;&gt;&gt;&gt; JaonString=========&quot;);</p>
<p>xstream = new XStream(new JettisonMappedXmlDriver());
xstream.setMode(XStream.NO_REFERENCES);</p>
<p>xstream.alias(&quot;student&quot;, Student.class);
fail(xstream.toXML(bean));</p>
<p>}</p>
<p>运行后结果如下：</p>
<p>=======JettisonMappedXmlDriver===JavaObject &gt;&gt;&gt;&gt; JaonString=========</p>
<p>{&quot;student&quot;:{&quot;id&quot;:1,&quot;name&quot;:&quot;jack&quot;,&quot;email&quot;:&quot;jack@email.com&quot;,&quot;address&quot;:&quot;china&quot;,&quot;birthday&quot;:[{},&quot;2010-11-22&quot;]}}</p>
<p>JSON的转换和XML的转换用法一样，只是创建XStream需要传递一个参数，这个参数就是xml到JSON映射转换的驱动。这里会降到两个驱动，分别是JettisonMappedXmlDriver、JsonHierarchicalStreamDriver。</p>
<p>2、 JsonHierarchicalStreamDriver完成Java对象到JSON的转换
//<em>/</em></p>
<p>/<em> <b>function:</b>用XStream结合JsonHierarchicalStreamDriver驱动
/</em> 转换java对象为JSON字符串</p>
<p>/<em> @author hoojo
/</em> @createDate Nov 27, 2010 1:16:46 PM</p>
<p>/*/
@Test</p>
<p>public void writeEntiry2JSON() {
failRed(&quot;======JsonHierarchicalStreamDriver====JavaObject &gt;&gt;&gt;&gt; JaonString=========&quot;);</p>
<p>xstream = new XStream(new JsonHierarchicalStreamDriver());
//xstream.setMode(XStream.NO_REFERENCES);</p>
<p>xstream.alias(&quot;student&quot;, Student.class);
failRed(&quot;-------Object &gt;&gt;&gt;&gt; JSON---------&quot;);</p>
<p>fail(xstream.toXML(bean));
//failRed(&quot;========JsonHierarchicalStreamDriver==删除根节点=========&quot;);</p>
<p>//删除根节点
xstream = new XStream(new JsonHierarchicalStreamDriver() {</p>
<p>public HierarchicalStreamWriter createWriter(Writer out) {
return new JsonWriter(out, JsonWriter.DROP_ROOT_MODE);</p>
<p>}
});</p>
<p>//xstream.setMode(XStream.NO_REFERENCES);
xstream.alias(&quot;student&quot;, Student.class);</p>
<p>fail(xstream.toXML(bean));
}</p>
<p>运行后结果如下：</p>
<p>======JsonHierarchicalStreamDriver====JavaObject &gt;&gt;&gt;&gt; JaonString=========</p>
<p>-------Object &gt;&gt;&gt;&gt; JSON---------
{&quot;student&quot;: {</p>
<p>&quot;id&quot;: 1,
&quot;name&quot;: &quot;jack&quot;,</p>
<p>&quot;email&quot;: &quot;jack@email.com&quot;,
&quot;address&quot;: &quot;china&quot;,</p>
<p>&quot;birthday&quot;: {
&quot;birthday&quot;: &quot;2010-11-22&quot;</p>
<p>}
}}</p>
<p>{
&quot;id&quot;: 1,</p>
<p>&quot;name&quot;: &quot;jack&quot;,
&quot;email&quot;: &quot;jack@email.com&quot;,</p>
<p>&quot;address&quot;: &quot;china&quot;,
&quot;birthday&quot;: {</p>
<p>&quot;birthday&quot;: &quot;2010-11-22&quot;
}</p>
<p>}</p>
<p>使用JsonHierarchicalStreamDriver转换默认会给转换后的对象添加一个根节点，但是在构建JsonHierarchicalStreamDriver驱动的时候，你可以重写createWriter方法，删掉根节点。</p>
<p>看上面的结果，一个是默认带根节点的JSON对象，它只是将类名作为一个属性，将对象作为该属性的一个值。而另一个没有带根属性的JSON就是通过重写createWriter方法完成的。</p>
<p>3、 将List集合转换成JSON字符串
@Test</p>
<p>public void writeList2JSON() {
failRed(&quot;======JsonHierarchicalStreamDriver====JavaObject &gt;&gt;&gt;&gt; JaonString=========&quot;);</p>
<p>JsonHierarchicalStreamDriver driver = new JsonHierarchicalStreamDriver();
xstream = new XStream(driver);</p>
<p>//xstream = new XStream(new JettisonMappedXmlDriver());//转换错误
//xstream.setMode(XStream.NO_REFERENCES);</p>
<p>xstream.alias(&quot;student&quot;, Student.class);
List<Student> list = new ArrayList<Student>();</p>
<p>list.add(bean);//add
bean = new Student();</p>
<p>bean.setAddress(&quot;china&quot;);
bean.setEmail(&quot;tom@125.com&quot;);</p>
<p>bean.setId(2);
bean.setName(&quot;tom&quot;);</p>
<p>Birthday day = new Birthday(&quot;2010-11-22&quot;);
bean.setBirthday(day);</p>
<p>list.add(bean);//add
bean = new Student();</p>
<p>bean.setName(&quot;jack&quot;);
list.add(bean);//add</p>
<p>fail(xstream.toXML(list));
//failRed(&quot;========JsonHierarchicalStreamDriver==删除根节点=========&quot;);</p>
<p>//删除根节点
xstream = new XStream(new JsonHierarchicalStreamDriver() {</p>
<p>public HierarchicalStreamWriter createWriter(Writer out) {
return new JsonWriter(out, JsonWriter.DROP_ROOT_MODE);</p>
<p>}
});</p>
<p>xstream.alias(&quot;student&quot;, Student.class);
fail(xstream.toXML(list));</p>
<p>}</p>
<p>运行后结果如下</p>
<p>======JsonHierarchicalStreamDriver====JavaObject &gt;&gt;&gt;&gt; JaonString=========</p>
<p>/#/#{&quot;list&quot;: [
{</p>
<p>&quot;id&quot;: 1,
&quot;name&quot;: &quot;jack&quot;,</p>
<p>&quot;email&quot;: &quot;jack@email.com&quot;,
&quot;address&quot;: &quot;china&quot;,</p>
<p>&quot;birthday&quot;: {
&quot;birthday&quot;: &quot;2010-11-22&quot;</p>
<p>}
},</p>
<p>{
&quot;id&quot;: 2,</p>
<p>&quot;name&quot;: &quot;tom&quot;,
&quot;email&quot;: &quot;tom@125.com&quot;,</p>
<p>&quot;address&quot;: &quot;china&quot;,
&quot;birthday&quot;: {</p>
<p>&quot;birthday&quot;: &quot;2010-11-22&quot;
}</p>
<p>},
{</p>
<p>&quot;id&quot;: 0,
&quot;name&quot;: &quot;jack&quot;</p>
<p>}
]}</p>
<p>/#[
{</p>
<p>&quot;id&quot;: 1,
&quot;name&quot;: &quot;jack&quot;,</p>
<p>&quot;email&quot;: &quot;jack@email.com&quot;,
&quot;address&quot;: &quot;china&quot;,</p>
<p>&quot;birthday&quot;: {
&quot;birthday&quot;: &quot;2010-11-22&quot;</p>
<p>}
},</p>
<p>{
&quot;id&quot;: 2,</p>
<p>&quot;name&quot;: &quot;tom&quot;,
&quot;email&quot;: &quot;tom@125.com&quot;,</p>
<p>&quot;address&quot;: &quot;china&quot;,
&quot;birthday&quot;: {</p>
<p>&quot;birthday&quot;: &quot;2010-11-22&quot;
}</p>
<p>},
{</p>
<p>&quot;id&quot;: 0,
&quot;name&quot;: &quot;jack&quot;</p>
<p>}
]</p>
<p>上面的list1是使用JsonHierarchicalStreamDriver 转换的，当然你也可以使用JettisonMappedXmlDriver驱动进行转换；用JettisonMappedXmlDriver转换后，你会发现格式不同而且没有根属性。</p>
<p>4、 Map转换json
@Test</p>
<p>public void writeMap2JSON() {
failRed(&quot;======JsonHierarchicalStreamDriver==== Map &gt;&gt;&gt;&gt; JaonString=========&quot;);</p>
<p>xstream = new XStream(new JsonHierarchicalStreamDriver());
//xstream = new XStream(new JettisonMappedXmlDriver());</p>
<p>xstream.alias(&quot;student&quot;, Student.class);
Map<String, Student> map = new HashMap<String, Student>();</p>
<p>map.put(&quot;No.1&quot;, bean);//put
bean = new Student();</p>
<p>bean.setAddress(&quot;china&quot;);
bean.setEmail(&quot;tom@125.com&quot;);</p>
<p>bean.setId(2);
bean.setName(&quot;tom&quot;);</p>
<p>bean.setBirthday(new Birthday(&quot;2010-11-21&quot;));
map.put(&quot;No.2&quot;, bean);//put</p>
<p>bean = new Student();
bean.setName(&quot;jack&quot;);</p>
<p>map.put(&quot;No.3&quot;, bean);//put
fail(xstream.toXML(map));</p>
<p>//failRed(&quot;========JsonHierarchicalStreamDriver==删除根节点=========&quot;);
//删除根节点</p>
<p>xstream = new XStream(new JsonHierarchicalStreamDriver() {
public HierarchicalStreamWriter createWriter(Writer out) {</p>
<p>return new JsonWriter(out, JsonWriter.DROP_ROOT_MODE);
}</p>
<p>});
xstream.alias(&quot;student&quot;, Student.class);</p>
<p>fail(xstream.toXML(map));
}</p>
<p>运行后结果如下：</p>
<p>======JsonHierarchicalStreamDriver==== Map &gt;&gt;&gt;&gt; JaonString=========</p>
<p>{&quot;map&quot;: [
[</p>
<p>&quot;No.3&quot;,
{</p>
<p>&quot;id&quot;: 0,
&quot;name&quot;: &quot;jack&quot;</p>
<p>}
],</p>
<p>[
&quot;No.1&quot;,</p>
<p>{
&quot;id&quot;: 1,</p>
<p>&quot;name&quot;: &quot;jack&quot;,
&quot;email&quot;: &quot;jack@email.com&quot;,</p>
<p>&quot;address&quot;: &quot;china&quot;,
&quot;birthday&quot;: {</p>
<p>&quot;birthday&quot;: &quot;2010-11-22&quot;
}</p>
<p>}
],</p>
<p>[
&quot;No.2&quot;,</p>
<p>{
&quot;id&quot;: 2,</p>
<p>&quot;name&quot;: &quot;tom&quot;,
&quot;email&quot;: &quot;tom@125.com&quot;,</p>
<p>&quot;address&quot;: &quot;china&quot;,
&quot;birthday&quot;: {</p>
<p>&quot;birthday&quot;: &quot;2010-11-21&quot;
}</p>
<p>}
]</p>
<p>]}
[</p>
<p>[
&quot;No.3&quot;,</p>
<p>{
&quot;id&quot;: 0,</p>
<p>&quot;name&quot;: &quot;jack&quot;
}</p>
<p>],
[</p>
<p>&quot;No.1&quot;,
{</p>
<p>&quot;id&quot;: 1,
&quot;name&quot;: &quot;jack&quot;,</p>
<p>&quot;email&quot;: &quot;jack@email.com&quot;,
&quot;address&quot;: &quot;china&quot;,</p>
<p>&quot;birthday&quot;: {
&quot;birthday&quot;: &quot;2010-11-22&quot;</p>
<p>}
}</p>
<p>],
[</p>
<p>&quot;No.2&quot;,
{</p>
<p>&quot;id&quot;: 2,
&quot;name&quot;: &quot;tom&quot;,</p>
<p>&quot;email&quot;: &quot;tom@125.com&quot;,
&quot;address&quot;: &quot;china&quot;,</p>
<p>&quot;birthday&quot;: {
&quot;birthday&quot;: &quot;2010-11-21&quot;</p>
<p>}
}</p>
<p>]
]</p>
<p>5、 将JSON转换java对象</p>
<p>//<em>/</em></p>
<p>/<em> <b>function:</b>JsonHierarchicalStreamDriver可以将简单的json字符串转换成java对象，list、map转换不成功；
/</em> JsonHierarchicalStreamDriver读取JSON字符串到java对象出错</p>
<p>/<em> @author hoojo
/</em> @createDate Nov 27, 2010 1:22:26 PM</p>
<p>/<em> @throws JSONException
/</em>/</p>
<p>@Test
public void readJSON2Object() throws JSONException {</p>
<p>String json = &quot;{\&quot;student\&quot;: {&quot; +
&quot;\&quot;id\&quot;: 1,&quot; +</p>
<p>&quot;\&quot;name\&quot;: \&quot;haha\&quot;,&quot; +
&quot;\&quot;email\&quot;: \&quot;email\&quot;,&quot; +</p>
<p>&quot;\&quot;address\&quot;: \&quot;address\&quot;,&quot; +
&quot;\&quot;birthday\&quot;: {&quot; +</p>
<p>&quot;\&quot;birthday\&quot;: \&quot;2010-11-22\&quot;&quot; +
&quot;}&quot; +</p>
<p>&quot;}}&quot;;
//JsonHierarchicalStreamDriver读取JSON字符串到java对象出错，但JettisonMappedXmlDriver可以</p>
<p>xstream = new XStream(new JettisonMappedXmlDriver());
xstream.alias(&quot;student&quot;, Student.class);</p>
<p>fail(xstream.fromXML(json).toString());
//JettisonMappedXmlDriver转换List集合出错，但JsonHierarchicalStreamDriver可以转换正确</p>
<p>//JettisonMappedXmlDriver 转换的字符串 {&quot;list&quot;:{&quot;student&quot;:[{&quot;id&quot;:1,&quot;name&quot;:&quot;haha&quot;,&quot;email&quot;:&quot;email&quot;,&quot;address&quot;:&quot;address&quot;,&quot;birthday&quot;:[{},&quot;2010-11-22&quot;]}]},&quot;student&quot;:{&quot;id&quot;:2,&quot;name&quot;:&quot;tom&quot;,&quot;email&quot;:&quot;tom@125.com&quot;,&quot;address&quot;:&quot;china&quot;,&quot;birthday&quot;:[{},&quot;2010-11-22&quot;]}}
json = &quot;{\&quot;list\&quot;: [{&quot; +</p>
<p>&quot;\&quot;id\&quot;: 1,&quot; +
&quot;\&quot;name\&quot;: \&quot;haha\&quot;,&quot; +</p>
<p>&quot;\&quot;email\&quot;: \&quot;email\&quot;,&quot; +
&quot;\&quot;address\&quot;: \&quot;address\&quot;,&quot; +</p>
<p>&quot;\&quot;birthday\&quot;: {&quot; +
&quot;\&quot;birthday\&quot;: \&quot;2010-11-22\&quot;&quot; +</p>
<p>&quot;}&quot; +
&quot;},{&quot; +</p>
<p>&quot;\&quot;id\&quot;: 2,&quot; +
&quot;\&quot;name\&quot;: \&quot;tom\&quot;,&quot; +</p>
<p>&quot;\&quot;email\&quot;: \&quot;tom@125.com\&quot;,&quot; +
&quot;\&quot;address\&quot;: \&quot;china\&quot;,&quot; +</p>
<p>&quot;\&quot;birthday\&quot;: {&quot; +
&quot;\&quot;birthday\&quot;: \&quot;2010-11-22\&quot;&quot; +</p>
<p>&quot;}&quot; +
&quot;}]}&quot;;</p>
<p>System.out.println(json);//用js转换成功
List list = (List) xstream.fromXML(json);</p>
<p>System.out.println(list.size());//0好像转换失败
}</p>
<p>运行后结果如下：</p>
<p>haha/#1/#address/#2010-11-22/#email</p>
<p>{&quot;list&quot;: [{&quot;id&quot;: 1,&quot;name&quot;: &quot;haha&quot;,&quot;email&quot;: &quot;email&quot;,&quot;address&quot;: &quot;address&quot;,&quot;birthday&quot;: {&quot;birthday&quot;: &quot;2010-11-22&quot;}},
{&quot;id&quot;: 2,&quot;name&quot;: &quot;tom&quot;,&quot;email&quot;: &quot;tom@125.com&quot;,&quot;address&quot;: &quot;china&quot;,&quot;birthday&quot;: {&quot;birthday&quot;: &quot;2010-11-22&quot;}}]}</p>
<p>0</p>
<p>JSON到Java的转换是fromXML方法。</p>
<p>作者：<a href="http://hoojo.cnblogs.com/" target="_blank">hoojo</a>
出处：<a href="http://hoojo.cnblogs.com/" target="_blank"><a href="http://www.cnblogs.com/hoojo/archive/2011/04/22/2025197.html">http://www.cnblogs.com/hoojo/archive/2011/04/22/2025197.html</a></a>
blog：<a href="http://blog.csdn.net/IBM_hoojo/" target="_blank"><a href="http://blog.csdn.net/IBM_hoojo">http://blog.csdn.net/IBM_hoojo</a></a>
本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。
<a href="http://hoojo.cnblogs.com/" target="_blank">版权所有，转载请注明出处</a> <a href="http://hoojo.cnblogs.com/" target="_blank">本文出自：  <a href="http://www.cnblogs.com/hoojo/archive/2011/04/22/2025197.html">http://www.cnblogs.com/hoojo/archive/2011/04/22/2025197.html</a></a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--xStream完美转换XML、JSON-hoojo-博客园/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--xStream完美转换XML、JSON-hoojo-博客园" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/13/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/11/">11</a></li><li><a class="page-number" href="/page/12/">12</a></li><li><a class="page-number" href="/page/13/">13</a></li><li class="active"><li><span class="page-number current">14</span></li><li><a class="page-number" href="/page/15/">15</a></li><li><a class="page-number" href="/page/16/">16</a></li><li><a class="page-number" href="/page/17/">17</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/15/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-25 18:15:41</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
