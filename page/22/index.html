
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 22 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--LongPI/">LongPI</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--LongPI/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="longpi">LongPI</h1>
<h1 id="-algorithm-gossip-pi-"><a href="">Algorithm Gossip: 长 PI</a></h1>
<h2 id="-">说明</h2>
<p>圆周率后的小数位数是无止境的，如何使用电脑来计算这无止境的小数是一些数学家与程式设计师所感兴趣的，在这边介绍一个公式配合 <a href="">大数运算</a>，可以计算指定位数的圆周率。</p>
<h2 id="-">解法</h2>
<p>首先介绍J.Marchin的圆周率公式：
PI = [16/5 - 16 / (3/<em>53) + 16 / (5/</em>55) - 16 / (7/<em>57) + ......] -
         [4/239 - 4/(3/</em>2393) + 4/(5/<em>2395) - 4/(7/</em>2397) + ......]
可以将这个公式整理为：
PI = [16/5 - 4/239] - [16/(53) - 4/(2393)]/3+ [16/(55) - 4/(2395)]/5 + ......
也就是说第n项，若为奇数则为正数，为偶数则为负数，而项数表示方式为：
[16/52/<em>n-1 - 4/2392/</em>n-1] / (2/<em>n-1)
如果我们要计算圆周率至10的负L次方，由于[16/52/</em>n-1 - 4/2392/<em>n-1]中16/52/</em>n-1比4/2392/<em>n-1来的大，具有决定性，所以表示至少必须计算至第n项：
[16/52/</em>n-1 ] / (2/<em>n-1) = 10-L
将上面的等式取log并经过化简，我们可以求得：
n = L / (2log5) = L / 1.39794
所以若要求精确度至小数后L位数，则只要求至公式的第n项，其中n等于：
n = [L/1.39794] + 1
在上式中[]为高斯符号，也就是取至整数（不大于L/1.39794的整数）；为了计简方便，可以在程式中使用下面这个公式来计简第n项：
[Wn-1/52- Vn-1 / (2392)] / (2/</em>n-1)
这个公式的演算法配合大数运算函式的演算法为：</p>
<p>div(w, 25, w);
div(v, 239, v);
div(v, 239, v);
sub(w, v, q);
div(q, 2/*k-1, q)</p>
<p>至于大数运算的演算法，请参考之前的文章，必须注意的是在输出时，由于是输出阵列中的整数值，如果阵列中整数位数不满四位，则必须补上0，在C语言中只要 使用格式指定字%04d，使得不足位数部份自动补上0再输出，至于Java的部份，使用 NumberFormat来作格式化。
您可以参考 <a href="http://crd.lbl.gov/%7Edhbailey/" target="_blank">这个网站</a> 有关于另一个用公式求PI的说明，它的实作在 <a href="http://crd.lbl.gov/%7Edhbailey/piqp.c" target="_blank">这边</a>。</p>
<h2 id="-">实作</h2>
<ul>
<li><p>C
/#include <stdio.h>
/#define L 1000
/#define N L/4+1
// L 为位数，N是array长度
void add(int/<em>, int/</em>, int/<em>);
void sub(int/</em>, int/<em>, int/</em>);
void div(int/<em>, int, int/</em>);
int main(void) {
int s[N+3] = {0};
int w[N+3] = {0};
int v[N+3] = {0};
int q[N+3] = {0};
int n = (int)(L/1.39793 + 1);
int k;
w[0] = 16/<em>5;
v[0] = 4/</em>239;
for(k = 1; k &lt;= n; k++) {
// 套用公式
div(w, 25, w);
div(v, 239, v);
div(v, 239, v);
sub(w, v, q);
div(q, 2/<em>k-1, q);
if(k%2) // 奇数项
add(s, q, s);
else // 偶数项
sub(s, q, s);
}
printf(&quot;%d.&quot;, s[0]);
for(k = 1; k &lt; N; k++)
printf(&quot;%04d&quot;, s[k]);
printf(&quot;\n&quot;);
return 0;
}
void add(int /</em>a, int /<em>b, int /</em>c) {
int i, carry = 0;
for(i = N+1; i &gt;= 0; i--) {
c[i] = a[i] + b[i] + carry;
if(c[i] &lt; 10000)
carry = 0;
else { // 进位
c[i] = c[i] - 10000;
carry = 1;
}
}
}
void sub(int /<em>a, int /</em>b, int /<em>c) {
int i, borrow = 0;
for(i = N+1; i &gt;= 0; i--) {
c[i] = a[i] - b[i] - borrow;
if(c[i] &gt;= 0)
borrow = 0;
else { // 借位
c[i] = c[i] + 10000;
borrow = 1;
}
}
}
void div(int /</em>a, int b, int /<em>c) { // b 为除数
int i, tmp, remain = 0;
for(i = 0; i &lt;= N+1; i++) {
tmp = a[i] + remain;
c[i] = tmp / b;
remain = (tmp % b) /</em> 10000;
}
}</p>
</li>
<li><p>Java
import java.text.NumberFormat;
public class LongPI {
public static void main(String[] args) {
final int L = 1000;
final int N = L/4+1;
int[] s = new int[N+3];
int[] w = new int[N+3];
int[] v = new int[N+3];
int[] q = new int[N+3];
int n = (int)(L/1.39793 + 1);
w[0] = 16/<em>5;
v[0] = 4/</em>239;
for(int k = 1; k &lt;= n; k++) {
// 套用公式
w = BigNumber.div(w, 25);
v = BigNumber.div(v, 239);
v = BigNumber.div(v, 239);
q = BigNumber.sub(w, v);
q = BigNumber.div(q, 2/*k-1);
if(k % 2 == 1) // 奇数项
s = BigNumber.add(s, q);
else // 偶数项
s = BigNumber.sub(s, q);
}
NumberFormat nf = NumberFormat.getInstance();
nf.setMinimumIntegerDigits(4);
System.out.print(s[0] + &quot;.&quot;);
for(int k = 1; k &lt; N; k++)
System.out.print(nf.format(s[k]));
System.out.println();
}
}</p>
</li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/AlgorithmGossip/">AlgorithmGossip</a></li></span></span> | <span class="tags">Tagged <a href="/tags/AlgorithmGossip/" class="label label-primary">AlgorithmGossip</a></span> | <span class="time">recent updated:<time title="2014-03-07 10:37:00"datetime="2014-03-07 10:37:00"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--LongPI/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-AlgorithmGossip-AlgorithmGossip--LongPI" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--HeapSort/">HeapSort</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--HeapSort/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="heapsort">HeapSort</h1>
<h1 id="-algorithm-gossip-heap-"><a href="">Algorithm Gossip: Heap 排序法 - 改良的选择排序</a></h1>
<h2 id="-">说明</h2>
<p>选择排序法的概念简单，每次从未排序部份选一最小值，插入已排序部份的后端，其时间主要花费于在整个未排序部份寻找最小值，如果能让搜寻最小值的方式加 快，选择排序法的速率也就可以加快，Heap排序法让搜寻的路径由树根至最后一个树叶，而不是整个未排序部份，因而称之为改良的选择排序法。</p>
<h2 id="-">解法</h2>
<p>Heap排序法使用Heap Tree（堆积树），树是一种资料结构，而堆积树是一个二元树，也就是每一个父节点最多只有两个子节点（关于树的详细定义还请见资料结构书籍），堆积树的 父节点若小于子节点，则称之为最小堆积（Min Heap），父节点若大于子节点，则称之为最大堆积（Max Heap），而同一层的子节点则无需理会其大小关系，例如下面就是一个堆积树：
<img src="&quot;Heap 排序&quot;" alt="Heap 排序">
可以使用一维阵列来储存堆积树的所有元素与其顺序，为了计算方便，使用的起始索引是1而不是0，索引1是树根位置，如果左子节点储存在阵列中的索引为s，则其父节点的索引为s/2，而右子节点为s+1，就如上图所示，将上图的堆积树转换为一维阵列之后如下所示：
<img src="&quot;Heap 排序&quot;" alt="Heap 排序">
首先必须知道如何建立堆积树，加至堆积树的元素会先放置在最后一个树叶节点位置，然后检查父节点是否小于子节点（最小堆积），将小的元素不断与父节点交换，直到满足堆积树的条件为止，例如在上图的堆积加入一个元素12，则堆积树的调整方式如下所示：
<img src="&quot;Heap 排序&quot;" alt="Heap 排序">
建立好堆积树之后，树根一定是所有元素的最小值，您的目的就是：</p>
<ol>
<li>将最小值取出</li>
<li>然后调整树为堆积树
不断重复以上的步骤，就可以达到排序的效果，最小值的取出方式是将树根与最后一个树叶节点交换，然后切下树叶节点，重新调整树为堆积树，如下所示：
<img src="&quot;Heap 排序&quot;" alt="Heap 排序">
调整完毕后，树根节点又是最小值了，于是我们可以重覆这个步骤，再取出最小值，并调整树为堆积树，如下所示：
<img src="&quot;Heap 排序&quot;" alt="Heap 排序">
如此重覆步骤之后，由于使用一维阵列来储存堆积树，每一次将树叶与树根交换的动作就是将最小值放至后端的阵列，所以最后阵列就是变为已排序的状态。
其实堆积在调整的过程中，就是一个选择的行为，每次将最小值选至树根，而选择的路径并不是所有的元素，而是由树根至树叶的路径，因而可以加快选择的过程， 所以Heap排序法才会被称之为改良的选择排序法。</li>
</ol>
<h2 id="-">实作</h2>
<ul>
<li><p>C
/#include <stdio.h>
/#include <stdlib.h>
/#include <time.h>
/#define MAX 10
/#define SWAP(x,y) {int t; t = x; x = y; y = t;}
void createheap(int[]);
void heapsort(int[]);
int main(void) {
int number[MAX+1] = {-1};
int i, num;
srand(time(NULL));
printf(&quot;排序前：&quot;);
for(i = 1; i &lt;= MAX; i++) {
number[i] = rand() % 100;
printf(&quot;%d &quot;, number[i]);
}
printf(&quot;\n建立堆积树：&quot;);
createheap(number);
for(i = 1; i &lt;= MAX; i++)
printf(&quot;%d &quot;, number[i]);
printf(&quot;\n&quot;);
heapsort(number);
printf(&quot;\n&quot;);
return 0;
}
void createheap(int number[]) {
int i, s, p;
int heap[MAX+1] = {-1};
for(i = 1; i &lt;= MAX; i++) {
heap[i] = number[i];
s = i;
p = i / 2;
while(s &gt;= 2 &amp;&amp; heap[p] &gt; heap[s]) {
SWAP(heap[p], heap[s]);
s = p;
p = s / 2;
}
}
for(i = 1; i &lt;= MAX; i++)
number[i] = heap[i];
}
void heapsort(int number[]) {
int i, m, p, s;
m = MAX;
while(m &gt; 1) {
SWAP(number[1], number[m]);
m--;
p = 1;
s = 2 /<em> p;
while(s &lt;= m) {
if(s &lt; m &amp;&amp; number[s+1] &lt; number[s])
s++;
if(number[p] &lt;= number[s])
break;
SWAP(number[p], number[s]);
p = s;
s = 2 /</em> p;
}
printf(&quot;\n排序中：&quot;);
for(i = MAX; i &gt; 0; i--)
printf(&quot;%d &quot;, number[i]);
}
}</p>
</li>
<li><p>Java
public class HeapSort {
public static void sort(int[] number) {
int[] tmp = new int[number.length + 1];
// 配合说明，使用一个有遍移的暂存阵列
for(int i = 1; i &lt; tmp.length; i++) {
tmp[i] = number[i-1];
}
createHeap(tmp);
int m = number.length;
while(m &gt; 1) {
swap(tmp, 1, m);
m--;
int p = 1;
int s = 2 /<em> p;
while(s &lt;= m) {
if(s &lt; m &amp;&amp; tmp[s+1] &lt; tmp[s])
s++;
if(tmp[p] &lt;= tmp[s])
break;
swap(tmp, p, s);
p = s;
s = 2 /</em> p;
}
}
// 这边将排序好的暂存阵列设定回原阵列
for(int i = 0; i &lt; number.length; i++) {
number[i] = tmp[i+1];
}
}
private static void createHeap(int[] tmp) {
int[] heap = new int[tmp.length];
for(int i = 0; i &lt; heap.length; i++)
heap[i] = -1;
for(int i = 1; i &lt; heap.length; i++) {
heap[i] = tmp[i];
int s = i;
int p = i / 2;
while(s &gt;= 2 &amp;&amp; heap[p] &gt; heap[s]) {
swap(heap, p, s);
s = p;
p = s / 2;
}
}
for(int i = 1; i &lt; tmp.length; i++)
tmp[i] = heap[i];
}
private static void swap(int[] number, int i, int j) {
int t;
t = number[i];
number[i] = number[j];
number[j] = t;
}
}</p>
</li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/AlgorithmGossip/">AlgorithmGossip</a></li></span></span> | <span class="tags">Tagged <a href="/tags/AlgorithmGossip/" class="label label-primary">AlgorithmGossip</a></span> | <span class="time">recent updated:<time title="2014-03-07 10:37:38"datetime="2014-03-07 10:37:38"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--HeapSort/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-AlgorithmGossip-AlgorithmGossip--HeapSort" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-服务器-集群--apachetomcat整合LINUX/">apache+tomcat整合(LINUX) </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-服务器-集群--apachetomcat整合LINUX/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="apache-tomcat-linux-linux-linux-">apache+tomcat整合(LINUX) - 技术文档 - 网络技术 Linux时代 - 开源、自由、共享 - 中国最大的Linux技术社区</h1>
<p>·<a href="http://www.chinaunix.net/" target="_blank">ChinaUnix首页</a> ·<a href="http://bbs.chinaunix.net/" target="_blank">论坛</a> ·<a href="http://blog.chinaunix.net/" target="_blank">博客</a>   <img src="" alt=""> <img src="" alt=""> <a href="http://linux.chinaunix.net/" target="_blank">Linux首页</a> | <a href="http://linux.chinaunix.net/news/" target="_blank">Linux新闻</a> | <a href="http://linux.chinaunix.net/bbs" target="_blank"><strong>Linux论坛</strong></a> | <a href="http://linux.chinaunix.net/techdoc/" target="_blank">Linux文档</a> | <a href="http://download.chinaunix.net/disc/linux/" target="_blank">Linux下载</a> | <a href="http://blog.chinaunix.net/techart.php?frmid=6" target="_blank">Linux博客</a> | <a href="http://search.chinaunix.net/" target="_blank">Linux搜索</a> | <a href="http://linux.chinaunix.net/bbs/index.php?gid=68" target="_blank">开源项目孵化平台</a> | <a href="http://linux.chinaunix.net/ebook/" target="_blank">《开源时代》</a> <img src="" alt=""> <a href="http://linux.chinaunix.net/techdoc/beginner/" target="_blank">新手入门</a> |  <a href="http://linux.chinaunix.net/techdoc/install/" target="_blank">安装启动</a> |  <a href="http://linux.chinaunix.net/techdoc/system/" target="_blank">管理员指南</a> | <a href="http://man.chinaunix.net/" target="_blank">开发手册</a> | <a href="http://linux.chinaunix.net/techdoc/desktop/" target="_blank">桌面应用</a> | <a href="http://linux.chinaunix.net/techdoc/develop/" target="_blank">程序开发</a> | <a href="http://linux.chinaunix.net/techdoc/database/" target="_blank">数据库</a> |  <a href="http://linux.chinaunix.net/techdoc/net/" target="_blank">网络技术</a>| <a href="http://linux.chinaunix.net/topics/2007-01-25/15/index.shtml" target="_blank">CentOS</a> | <a href="http://linux.chinaunix.net/search2.php?key=fedora&amp;id=0" target="_blank">Fedora</a> |  <a href="http://linux.chinaunix.net/search2.php?key=mysql&amp;id=0" target="_blank">MySQL</a> |  <a href="http://linux.chinaunix.net/search2.php?key=apache&amp;id=0" target="_blank">Apache</a> |  <a href="http://linux.chinaunix.net/search2.php?key=ubuntu&amp;id=0" target="_blank">Ubuntu</a> |  <a href="http://linux.chinaunix.net/topics/2008-07-10/18/index.shtml" target="_blank">Gentoo</a>| <strong><a href="http://linux.chinaunix.net/topics/2008-07-30/19/index.shtml" target="_blank">OSCON08</a></strong>    <a href="http://linux.chinaunix.net/" target="_blank">Linux时代</a> &gt;&gt; <a href="http://linux.chinaunix.net/techdoc/" target="_blank">技术文档</a> &gt;&gt; <a href="http://linux.chinaunix.net/techdoc/net/" target="_blank">网络技术</a>  apache+tomcat整合(LINUX)  来源: ChinaUnix博客 　日期： 2007.12.28 13:38　(共有条评论) <a href="http://linux.chinaunix.net/bbs/thread-975323-1-1.html" target="_blank">我要评论</a>   这里介绍两类方法：
    这里假设你已安装并且配置好了JDK
                           一：用apt-get 安装
apt-get install apache2 tomcat5.5 libapache2-mod-jk
设置Tomcat管理员帐号
Tomcat的用户帐号信息都保存在tomcat-users.xml的文件中，运行
sudo gedit /usr/share/tomcat6/conf/tomcat-users.xml在的标签前添加一行
保存并关闭。重新运行tomcat即可输入该用户名和密码，登录Tomcat的管理页面。
确认一下在apache2的启动模块中是否有jk.load
/#sudo ls /etc/apache2/mods-enabled/
/#sudo vi /etc/libapache2-mod-jk/workers.properties
workers.tomcat_home=/usr/share/tomcat6
workers.java_home=/usr/lib/jvm/java-6-sun
/#sudo vi /usr/share/doc/libapache2-mod-jk/httpd_example_apache2.conf
复制里面的内容到apache2.conf
最后重启apache tomcat上传jsp文件到usr/share/tomcat6/webapps/ROOT
                               二:手动下载安装
1.安装jdk
2.安装tomcat
3.编译安装apache2
4.停止以上两个启动的服务:tomcat,apache
5.编译安装jk-connector
6.编辑配置文件
7.看结果吧
详细流程：
1.安装jdk
1.1
下载jdk包，可以是rpm包或者tar包，解压缩到某目录，然后
ln -s /usr/local/src/jdk-1.6./<em> /usr/local/java
1.2
设置环境变量
vi /etc/profile
export JAVA_HOME=/usr/local/java/
export PATH=$PATH:$JAVA_HOME/bin
export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export JRE_HOME=$JAVA_HOME/jre
1.3
启用环境变量
source /etc/profile
1.4
检验成功否
java -version 或 javac -v
2.安装tomcat
tar zxvf /mnt/hgfs/Untitled-1/apache-tomcat-5.5.12.tar.gz -C /usr/local/src/
ln -s /usr/local/src/apache-tomcat-5.5.12 /usr/local/tomcat
/usr/local/tomcat/bin/startup.sh
在浏览器中输入<a href="http://IP地址:8080" target="_blank">http://IP地址:8080</a>
可以看到大花猫了。
3.编译安装apache2
tar zxvf /mnt/hgfs/Untitled-1/httpd-2.2.4.tar.gz  -C /usr/local/src/
cd /usr/local/src/httpd-2.2.4
在进行编译之前要确保系统中没有apr或者apr-util的rpm包或者deb包。下面一下子编译安装了apr，apr-util，httpd
cd srclib/apr &amp;&amp; ./configure --prefix=/usr/local/apr &amp;&amp; make &amp;&amp; make install &amp;&amp; cd ../apr-util &amp;&amp; ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr &amp;&amp; make &amp;&amp; make install &amp;&amp; cd ../.. &amp;&amp; ./configure --prefix=/usr/local/httpd --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util --enable-so &amp;&amp; make &amp;&amp; make install
下面编辑httpd.conf文件中ServerName字段的注释符，可以换成你的IP地址，或者什么都不换。
下面启动apache看看效果
/usr/local/httpd/bin/apachectl -k start
看到了It Works就对了。
4.停止以上两个启动的服务:tomcat,apache。
/usr/local/tomcat/bin/shutdown.sh
/usr/local/httpd/bin/apachectl stop
5.编译安装jk-connector
tar zxvf /mnt/hgfs/Untitled-1/tomcat-connectors-1.2.21-src.tar.gz -C /usr/local/src/
cd /usr/local/src/tomcat-connectors-1.2.21-src/native/
编译安装jk-connector，带上apxs的地址，会在安装的时候自动把mod_jk.so放到/usr/local/httpd/modules里面
./configure --with-apxs=/usr/local/httpd/bin/apxs &amp;&amp; make &amp;&amp; make install
ls /usr/local/httpd/modules
看到mod_jk.so表示成功
6.编辑配置文件
6.1编辑/usr/local/httpd/conf/mod_jk.conf
/# 指出mod_jk模块工作所需要的工作文件workers.properties的位置
JkWorkersFile /usr/local/httpd/conf/workers.properties
/# Where to put jk logs
JkLogFile /var/log/apache2/mod_jk.log
/# Set the jk log level [debug/error/info]
JkLogLevel info
/# Select the log format
JkLogStampFormat &quot;[%a %b %d %H:%M:%S %Y]&quot;
/# JkOptions indicate to send SSL KEY SIZE,
JkOptions  +ForwardKeySize +ForwardURICompat -ForwardDirectories
/# JkRequestLogFormat set the request format
JkRequestLogFormat &quot;%w %V %T&quot;
/# 将所有servlet 和jsp请求通过ajp13的协议送给Tomcat，让Tomcat来处理
JkMount /servlet//</em>  worker1
JkMount //*.jsp worker1
6.2编辑/usr/local/httpd/conf/workers.properties
/# Defining a worker named worker1 and of type ajp13
worker.list=worker1
/# Set properties for worker1
worker.worker1.type=ajp13<br>worker.worker1.host=localhost<br>worker.worker1.port=8009
worker.worker1.lbfactor=50<br>worker.worker1.cachesize=10<br>worker.worker1.cache_timeout=600<br>worker.worker1.socket_keepalive=1<br>worker.worker1.socket_timeout=300
6.3编辑httpd.conf文件
加入如下：
LoadModule jk_module modules/mod_jk.so
Include /usr/local/httpd/conf/mod_jk.conf
修改htdoc的默认地址为/usr/local/tomcat/webapps
修改htdoc的参数，也就是给原来htdoc的目录参数给webapps
修改DirectoryIndex index.html index.htm index.jsp
7.看结果吧
<a href="http://IP地址" target="_blank">http://IP地址</a>
可以看到一只大花猫。ok，成功了。
如何修改tomcat单独启动时候的端口为80？</p>
<p>里面的Connector port=&quot;8080&quot;改为Connector port=&quot;80&quot;</p>
<p><strong>本文来自ChinaUnix博客，如果查看原文请点：</strong><a href="http://blog.chinaunix.net/u1/51404/showart_452032.html" target="_blank"><a href="http://blog.chinaunix.net/u1/51404/showart_452032.html">http://blog.chinaunix.net/u1/51404/showart_452032.html</a></a> <a href="http://linux.chinaunix.net/bbs/thread-975323-1-1.html" target="_blank">发表评论</a> <a href="http://linux.chinaunix.net/bbs/thread-975323-1-1.html" target="_blank">查看评论</a>(共有条评论) <a href="http://linux.chinaunix.net/bbs/forum-4-1.html" target="_blank">我要提问</a>     最新资讯<a href="http://linux.chinaunix.net/news" target="_blank">更多&gt;&gt;</a>  · <a href="http://linux.chinaunix.net/news/2010/12/10/1175490.shtml" title="金山卫士开源计划首周源码下载突破两万" target="_blank">金山卫士开源计划首周源码下载..</a>
· <a href="http://linux.chinaunix.net/news/2010/12/10/1175491.shtml" title="谷歌劝说诺基亚采用Android操作系统" target="_blank">谷歌劝说诺基亚采用Android操作..</a>
· <a href="http://linux.chinaunix.net/news/2010/12/10/1175492.shtml" title="11月份Linux市场占有率升至5%" target="_blank">11月份Linux市场占有率升至5%</a>
· <a href="http://linux.chinaunix.net/news/2010/12/10/1175493.shtml" title="Apache 基金会确认退出 JCP 执行委员会" target="_blank">Apache 基金会确认退出 JCP 执..</a>
· <a href="http://linux.chinaunix.net/news/2010/12/07/1175306.shtml" title="Chrome 10 新功能探秘：新增GPU混合加速功能" target="_blank">Chrome 10 新功能探秘：新增GP..</a>
· <a href="http://linux.chinaunix.net/news/2010/12/07/1175307.shtml" title="金山宣布开源其安全软件" target="_blank">金山宣布开源其安全软件</a>
· <a href="http://linux.chinaunix.net/news/2010/12/07/1175308.shtml" title="开源FTP服务器ProFTPD发现后门" target="_blank">开源FTP服务器ProFTPD发现后门</a>
· <a href="http://linux.chinaunix.net/news/2010/12/07/1175309.shtml" title="女黑客在开源会议上抱受骚扰" target="_blank">女黑客在开源会议上抱受骚扰</a>
· <a href="http://linux.chinaunix.net/news/2010/12/07/1175310.shtml" title="21款值得关注的Linux游戏" target="_blank">21款值得关注的Linux游戏</a>
· <a href="http://linux.chinaunix.net/news/2010/12/07/1175311.shtml" title="马化腾：腾讯半年后彻底转型，开放和分享" target="_blank">马化腾：腾讯半年后彻底转型，..</a> 论坛热点<a href="http://linux.chinaunix.net/bbs" target="_blank">更多&gt;&gt;</a>  · <a href="http://linux.chinaunix.net/bbs/thread-1177273-1-1.html" title="Linux系统移植从零开始！参与讨论即有机会获得图书一本！" target="_blank">Linux系统移植从零开始！参与..</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177271-1-1.html" title="学习linux的意义在哪里" target="_blank">学习linux的意义在哪里</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177409-1-1.html" title="使用netfilter在哪能获取到原始以太包" target="_blank">使用netfilter在哪能获取到原..</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177298-1-1.html" title="哥纠结了" target="_blank">哥纠结了</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177227-1-1.html" title="一个在线读开源代码的工具，希望版主能保留几天，谢谢！" target="_blank">一个在线读开源代码的工具，..</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177374-1-1.html" title="为什么我的目录下没有.cshrc文件？" target="_blank">为什么我的目录下没有.cshrc..</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177344-1-1.html" title="初学linux从哪里开始" target="_blank">初学linux从哪里开始</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177382-1-1.html" title="linux 系统无法上网" target="_blank">linux 系统无法上网</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177380-1-1.html" title="新手安装UCenter 时总是出错。望高手指点" target="_blank">新手安装UCenter 时总是出错..</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177274-1-1.html" title="cacti添加主机显示的状态都是unknow，不能进行资源绘图" target="_blank">cacti添加主机显示的状态都是..</a> 文档更新<a href="http://linux.chinaunix.net/techdoc" target="_blank">更多&gt;&gt;</a>  · <a href="http://linux.chinaunix.net/techdoc/beginner/2010/11/17/1174196.shtml" title="菜鸟入门三星ARM11嵌入式系统，是否困难？" target="_blank">菜鸟入门三星ARM11嵌入式系统，是..</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/09/16/1171153.shtml" title="寻redhat 5.3 的中文手册 for ia64" target="_blank">寻redhat 5.3 的中文手册 for ia64</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/09/06/1170624.shtml" title="请问redhat 5.3 企业版的用户手册去哪里下载？" target="_blank">请问redhat 5.3 企业版的用户手册..</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/08/18/1169548.shtml" title="LINUX与UNIX SHELL编程指南(中文)" target="_blank">LINUX与UNIX SHELL编程指南(中文)</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/03/24/1160550.shtml" title="一些基本用户管理以及基本安装方法" target="_blank">一些基本用户管理以及基本安装方法</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/03/23/1160525.shtml" title="菜鸟学习linux笔记与练习-----第二天。一些基本命令以及初级网络配置" target="_blank">菜鸟学习linux笔记与练习-----第..</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/03/23/1160523.shtml" title="菜鸟学习linux笔记与练习-----第一天。一些初级命令以及基本用户管理" target="_blank">菜鸟学习linux笔记与练习-----第..</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/03/22/1160427.shtml" title="服务器配置：Squid配置详解" target="_blank">服务器配置：Squid配置详解</a>
· <a href="http://linux.chinaunix.net/techdoc/install/2010/01/29/1156159.shtml" title="linux下u盘使用" target="_blank">linux下u盘使用</a>
· <a href="http://linux.chinaunix.net/techdoc/install/2010/01/29/1156155.shtml" title="ubuntu dynamips 绑定网卡到虚拟机" target="_blank">ubuntu dynamips 绑定网卡到虚拟机</a>    <a href="http://www.chinaunix.net/about/index.shtml" target="_blank">关于我们</a> | <a href="http://www.chinaunix.net/about/connect.html" target="_blank">联系方式</a> | <a href="http://www.chinaunix.net/about/service.html" target="_blank">广告合作</a> | <a href="http://www.chinaunix.net/about/hr.html" target="_blank">诚聘英才</a> | <a href="http://www.chinaunix.net/about/channel.html" target="_blank">网站地图</a> | <a href="http://www.chinaunix.net/about/friend.html" target="_blank">友情链接</a> | <a href="http://linux.chinaunix.net/bbs/register.php" target="_blank">免费注册</a>  Copyright © 2001-2009 ChinaUnix.net All Rights Reserved</p>
<p>感谢所有关心和支持过ChinaUnix的朋友们</p>
<p><a href="http://www.it168.com/images/icp.jpg" target="_blank">京ICP证:060528号</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/服务器/">服务器</a></li></span><span class="breadcrumb"><li><a href="/categories/服务器/">服务器</a></li><li><a href="/categories/服务器/集群/">集群</a></li></span></span> | <span class="tags">Tagged <a href="/tags/服务器/" class="label label-primary">服务器</a><a href="/tags/集群/" class="label label-success">集群</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-服务器-集群--apachetomcat整合LINUX/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-服务器-集群--apachetomcat整合LINUX" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--Java对XML节点的修改、添加、删除–ByXstream框架-J2EE企业应用顾问咨询/">Java对XML节点的修改、添加、删除 –By Xstream框架 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--Java对XML节点的修改、添加、删除–ByXstream框架-J2EE企业应用顾问咨询/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="java-xml-by-xstream-j2ee-java-h-e-s-blog">Java对XML节点的修改、添加、删除 –By Xstream框架 - J2EE企业应用 顾问 咨询 Java传教士 -H.E.&#39;s Blog</h1>
<h1 id="-http-www-javabloger-com-index-php-feed-h-e-s-blog-http-www-javabloger-com-"><a href="http://www.javabloger.com/index.php/feed/" target="_blank"><img src="" alt="订阅"></a> <a href="http://www.javabloger.com/" target="_blank">H.E.&#39;s Blog</a></h1>
<p> 用最简洁的页面描述企业应用与Java艺术!     <a href="http://www.javabloger.com/" target="_blank">首页</a> <a href="http://www.javabloger.com/about_njthnet.html" target="_blank">关于作者</a> <a href="http://www.javabloger.com/work_together.html" target="_blank">项目合作</a> <a href="http://www.javabloger.com/article" target="_blank">本站文章</a> <a href="http://www.javabloger.com/opensource_project.html" target="_blank">开源项目</a>  </p>
<h2 id="java-xml-by-xstream-">Java对XML节点的修改、添加、删除 –By Xstream框架</h2>
<p>12 三月, 2010 (10:36) | <a href="http://www.javabloger.com/article/category/code" title="查看 代码 的全部文章" target="_blank">代码</a> |  <a href="http://translate.google.com/translate?langpair=zh-CN%7Czh-TW&amp;u=http://www.javabloger.com/article/java-xml-node-add-delete-update.html" target="_blank">繁体</a> <a href="http://translate.google.com/translate?langpair=zh-CN%7Cen&amp;u=http://www.javabloger.com/article/java-xml-node-add-delete-update.html" target="_blank">English</a>    <img src="" alt=""><a href="http://delicious.com/save" target="_blank"><strong>DeliciOus</strong></a>    <a href="http://www.google.com/buzz/post" title="在 Google Buzz 上分享本文" target="_blank">0</a>  【<a href="http://v.t.sina.com.cn/share/share.php?title=Java%E5%AF%B9XML%E8%8A%82%E7%82%B9%E7%9A%84%E4%BF%AE%E6%94%B9%E3%80%81%E6%B7%BB%E5%8A%A0%E3%80%81%E5%88%A0%E9%99%A4%20%E2%80%93By%20Xstream%E6%A1%86%E6%9E%B6&amp;url=http://www.javabloger.com/article/java-xml-node-add-delete-update.html?source=rss&amp;conten=%E5%86%8D%E6%AC%A1%E6%84%9F%E8%B0%A2%E4%BD%A0%E7%9A%84%E5%88%86%E4%BA%AB" target="_blank">分享到<strong>新浪微博</strong></a>】
作者: H.E. | 您可以转载, 但必须以超链接形式标明文章原始出处和作者信息及版权声明
网址: <a href=""><a href="http://www.javabloger.com/article/java-xml-node-add-delete-update.html">http://www.javabloger.com/article/java-xml-node-add-delete-update.html</a></a>
<strong>豆瓣读书</strong> 向你推荐有关 <a href="http://book.douban.com/subject_search?search_text=%E4%BB%A3%E7%A0%81&amp;cat=1001" target="_blank">代码</a>、 类别的图书。</p>
<p>在J2EE、Java项目中对xml操作是一项非常常见的事情，在我认识了XStream以后，才彻底明白XML模型对象的概念，使用XStream让我XML的设计不由自主更符合OO的风格。另外，除了在设计上得到的体验，还在实际操作中得到了便捷的体验。</p>
<p>简单来说，我在IBM的Java开发园地上看过一些操作XML经典的文章被广为流传，但是无论是采用DOM4J还是JDOM对XML文件中的节点或者整个文件的进行 修改、添加、删除 都没有XStream 简单、方便。</p>
<p>下面来看一下 XStream 官方网站上的例子，网站地址：     <a href="http://xstream.codehaus.org/tutorial.html。" target="_blank">http://xstream.codehaus.org/tutorial.html。</a></p>
<p>官方网站上的例子只是提供了一个例子，并没有说明如何对 XML节点进行修改、添加、删除，XStream 官方网站上只是给出了一个从对象到XML，从XML到对象的例子。</p>
<p>Javabloger的作者H.E.通过实践发现采用 XStream可以很简单的对XML节点进行 修改、添加、删除，比传统的XML框架简单很多倍，用过一次的人都不会忘记，<strong>因为实在是太方便了</strong>。</p>
<p><strong>修改XML节点代码示例如下：</strong></p>
<pre><code>public void upDateMySQLRecentHost(String  HostID)  throws  Exception {
    List &lt;RecentHost&gt; list=null;
    try {
            list=getMySQLRecentHost();   **// 1. 先通过 XStream读取XML文件，变成List集合里面包含节点对象。**

            for (int i=0;i&lt;list.size();i++){      **  //  2. 遍历整个 List 对象集合**
                if (list.get(i).getId().equals(HostID )){        **// 3. 比较 需要进行修改的节点 ID**
                    list.remove(i);                                     **//  4. 移除 指定的节点  **
                    list.add(recentHost);                          **  //  5. 添加 定义的新节点**
                }
            }                                                                **   //  完成操作，对节点进行 匹配的删除和添加 这个就修改。**

       *    //  以下代码H.E.就不一一介绍了，大致意思就是 将修改过的List 对象集合，重新写入XML中。*
            xstream.alias(&quot;RecentHost&quot;,  RecentHost.class);         
            String xml=&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;+xstream.toXML(list);
             System.out.println ( xml );
            FileWriter resultFile = new FileWriter(recentLoginHostCaseXMLFile);
            PrintWriter myFile = new PrintWriter(resultFile);
            myFile.println(xml);
            resultFile.close();
        }
    catch ( Exception e) {
        logger.error(e);
    }
}
</code></pre><p><strong>添加XML节点代码示例如下：</strong></p>
<pre><code>public void AddMySQLRecentHost(RecentHost RecentHostInfo)  throws  Exception {
    List &lt;RecentHost&gt; list=null;
    try {
            list=getMySQLRecentHost(); **  // 1. 先通过 XStream读取XML文件，变成List集合里面包含节点对象。**
            list.add( RecentHostInfo  );    **//   2. 添加到  List集合里面。**

            xstream.alias(&quot;RecentHost&quot;,  RecentHost.class);  **// 3.进行XML对象映射**
            String xml=&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;+xstream.toXML(list);

         *   //  以下代码H.E.就不一一介绍了，大致意思就是 将添加过的List 对象集合，重新写入XML中。*
            FileWriter resultFile = new FileWriter(recentLoginHostCaseXMLFile);
            PrintWriter myFile = new PrintWriter(resultFile);
            myFile.println(xml);
            resultFile.close();      
        }
    catch ( Exception e) {
        logger.error(e);
    }
}
</code></pre><p><strong>删除XML节点代码示例如下：</strong></p>
<pre><code>public void deleteMySQLRecentHost(String id)  throws  Exception {
    List &lt;RecentHost&gt; list=null;
    try {
            list=getMySQLRecentHost();   **// 1. 先通过 XStream读取XML文件，变成List集合里面包含节点对象。**

            for (int i=0;i&lt;list.size();i++){      **  //  2. 遍历整个 List 对象集合**
                if (list.get(i).getId().equals(HostID )){       **// 3. 比较 需要进行修改的节点 ID**
                    list.remove(i);                                    **  //  4. 移除 指定的节点  **
                }                                                                                                                     
            }                                                             **      //  完成删除操作。**                            

*            //  以下代码H.E.就不一一介绍了，大致意思就是 将修改过的List 对象集合，重新写入XML中。*
            xstream.alias(&quot;RecentHost&quot;,  RecentHost.class);                                     
            String xml=&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;+xstream.toXML(list);
             System.out.println ( xml );                                                   
            FileWriter resultFile = new FileWriter(recentLoginHostCaseXMLFile);
            PrintWriter myFile = new PrintWriter(resultFile);                                      
            myFile.println(xml);                                                                                        
            resultFile.close();                                                                                           
        }                                                                                                                              
    catch ( Exception e) {                                                                                              
        logger.error(e);                                                                                                    
    }                                                                                                                                  
}
</code></pre><p>–end–</p>
<p><strong>豆瓣读书</strong>  向你推荐有关<a href="http://book.douban.com/subject_search?search_text=%E4%BB%A3%E7%A0%81&amp;cat=1001" target="_blank">代码</a>、 类别的图书。
<a href="http://creativecommons.org/licenses/by/2.5/cn/"><img src="" alt="Creative Commons License">
</a> 本文由<a href="http://www.javabloger.com/" target="_blank">J2ee企业顾问</a>-黄毅创作,并已采用<a href="http://creativecommons.org/licenses/by/2.5/cn/" title="Creative Commons Attribution 2.5 China Mainland License" target="_blank">创作共用署名2.5中国大陆版许可证</a>授权。</p>
<p>标签: <a href="http://www.javabloger.com/article/tag/xml%e8%8a%82%e7%82%b9" target="_blank">XML节点</a>, <a href="http://www.javabloger.com/article/tag/xstream" target="_blank">Xstream</a>, <a href="http://www.javabloger.com/article/tag/%e4%bf%ae%e6%94%b9%e3%80%81%e6%b7%bb%e5%8a%a0%e3%80%81%e5%88%a0%e9%99%a4" target="_blank">修改、添加、删除</a></p>
<p>« <a href="http://www.javabloger.com/article/javamail-web-site-mailinator.html" target="_blank">大型JavaMail网站Mailinator架构(Linux+Tomcat+Java)</a></p>
<p><a href="http://www.javabloger.com/article/top-20-web-stie-web-server.html" target="_blank">大型网站的web服务器</a> »</p>
<h2 id="-">评论</h2>
<p>评论也是有版权的！</p>
<p>姓名:</p>
<p>E-mail:</p>
<p>网址:</p>
<p>验证码:  8138</p>
<p>正文 (必填, 最长字数:1200):</p>
<h2 id="-">我的废话</h2>
<p>印象中google、微软中的工程师和普通程序员最大的区别并不是他们的薪水与待遇，而是他们用80%时间去思考，20%的时间去修改代码，另则是用80%的时间去修改代码，<strong>只</strong>用20%的时间去思考问题。</p>
<h2 id="-">关注我@</h2>
<p>   <a href="http://t.sina.com.cn/javabloger" target="_blank"><img src="" alt=""></a>
   <a href="http://feed.feedsky.com/javaBloger" target="_blank"><img src="" alt=""></a>
   <a href="http://www.douban.com/people/njthnet" target="_blank"><img src="" alt=""></a>
   <a href="http://www.google.com/profiles/njthnet" target="_blank"><img src="" alt=""></a>
   <strong>IM提醒</strong>
   <a href="http://inezha.com/add2?url=http://feed.feedsky.com/javaBloger" target="_blank"><img src="" alt=""></a></p>
<h2 id="-">个人介绍</h2>
<p><strong>H.E.@Info:</strong>
J2EE Architect/<strong>J</strong>Evangelist
Life@NanJing
Hobby@Photography
Email@njthnet(at)gmail.com
<a href="http://www.javabloger.com/about_njthnet.html" target="_blank">更多...</a></p>
<h2 id="-">加入小圈子</h2>
<h2 id="-">小道消息</h2>
<p><a href="http://www.javabloger.com/webservice" target="_blank">本站Service API 测试ing</a>
<a href="http://javabloger-mini-books.googlecode.com/files/Java-JMS-Javabloger-mini-book.pdf" target="_blank">第三期<strong>“迷你书” JMS与消息中间件 专题</strong>(PDF)</a>
<a href="http://javabloger-mini-books.googlecode.com/files/JavaBloger-mini_book-2010-4.pdf" target="_blank">第二期<strong>“迷你书” 架构! 专题</strong>(PDF)</a>
<a href="http://javabloger-mini-books.googlecode.com/files/MongoDB_1_en.pdf" target="_blank">MongoDB<strong>入门介绍</strong>(PDF)</a></p>
<h2 id="-">最被关注</h2>
<ul>
<li><a href="http://www.javabloger.com/article/google-analytics-architecture.html" target="_blank">Google Analytics(谷歌分析) 架构与原理</a></li>
<li><a href="http://www.javabloger.com/article/category/hbase" title=" Spring3 REST实现html伪静态分页效果" target="_blank">HBase 技术专题</a></li>
<li><a href="http://www.javabloger.com/article/j2ee-adviser.html" target="_blank">J2ee企业顾问的职责</a></li>
<li><a href="http://www.javabloger.com/article/core-j2ee-patterns-micr_architecture.html" target="_blank">J2ee核心模式–微架构</a></li>
<li><a href="http://www.javabloger.com/article/java_and_php_mixed.html" target="_blank">Java+PHP=混血新宠儿</a></li>
<li><a href="http://www.javabloger.com/article/mongodb-java.html" target="_blank">Java操作MongoDB NoSQL数据库</a></li>
<li><a href="http://www.javabloger.com/article/memcached-cluster-error-msag.html" target="_blank">Memcached集群/分布式的单点故障</a></li>
<li><a href="http://www.javabloger.com/article/mongodb-cluster.html" target="_blank">MongoDB 集群</a></li>
<li><a href="http://www.javabloger.com/article/seo-java-j2ee-web-development.html" target="_blank">SEO与Java Web网站开发</a></li>
<li><a href="http://www.javabloger.com/article/spring3-rest-mvc-example.html" title="Spring3 REST MVC框架,提速你的Web开发" target="_blank">Spring3 REST MVC框架,提速你的Web开发</a></li>
<li><a href="http://www.javabloger.com/article/spring3-rest-java-on-google.html" target="_blank">Spring3 REST实现html伪静态分页</a></li>
<li><a href="http://www.javabloger.com/article/why_use_j2ee_framework.html" target="_blank">什么使用J2ee开源框架</a></li>
<li><a href="http://www.javabloger.com/article/what-large-web-site-using-j2ee-architecture.html" target="_blank">哪些大型网站采用J2EE架构</a></li>
<li><a href="http://www.javabloger.com/article/j2ee-clustering-architecture.html" target="_blank">大型J2EE系统架构</a></li>
<li><a href="http://www.javabloger.com/article/myspace-cloudtest.html" target="_blank">大型网站百万级高并发“云测试”</a></li>
<li><a href="http://www.javabloger.com/article/top-20-web-stie-web-server.html" target="_blank">大型网站的web服务器</a></li>
<li><a href="http://www.javabloger.com/article/implement-agile.html" target="_blank">敏捷的要素</a></li>
<li><a href="http://www.javabloger.com/article/great-agile-workspace.html" target="_blank">理想的敏捷工作环境与氛围</a></li>
<li><a href="http://www.javabloger.com/article/j2ee-push-mail-of-team.html" title="百万级 J2EE Push Mail 项目后记2" target="_blank">百万级 J2EE Push Mail 项目后记2</a></li>
<li><a href="http://www.javabloger.com/article/talk-about-project-dailymeeting.html" target="_blank">说说每日项目例会的必要性</a></li>
<li><p><a href="http://www.javabloger.com/article/microsoft_and_sun_testing_process.html" target="_blank">谈谈我知道的微软、SUN公司 测试工作</a></p>
<h2 id="-">最近文章</h2>
</li>
<li><p><a href="http://www.javabloger.com/article/thrift-java-code-example.html" title="Apache Thrift入门2-代码实现例子" target="_blank">Apache Thrift入门2-代码实现例子</a></p>
</li>
<li><a href="http://www.javabloger.com/article/apache-thrift-architecture.html" title="Apache Thrift入门1-架构&amp;介绍" target="_blank">Apache Thrift入门1-架构&amp;介绍</a></li>
<li><a href="http://www.javabloger.com/article/2011-pic-1.html" title="2011 新年里" target="_blank">2011 新年里</a></li>
<li><a href="http://www.javabloger.com/article/hbase-secure-privilege.html" title="HBase入门7 -安全&amp;权限" target="_blank">HBase入门7 -安全&amp;权限</a></li>
<li><a href="http://www.javabloger.com/article/hbase-mysql-rdbms.html" title="Hbase入门6 -白话MySQL(RDBMS)与HBase之间" target="_blank">Hbase入门6 -白话MySQL(RDBMS)与HBase之间</a></li>
<li><a href="http://www.javabloger.com/article/lily-hbase-solr-lucene-zookeeper.html" title="Lily-建立在HBase上的分布式搜索" target="_blank">Lily-建立在HBase上的分布式搜索</a></li>
<li><a href="http://www.javabloger.com/article/hbase-im-jabase-xmpp.html" title="基于Hbase存储的分布式消息(IM)系统-JABase" target="_blank">基于Hbase存储的分布式消息(IM)系统-JABase</a></li>
<li><a href="http://www.javabloger.com/article/hadoop-hive-mysql-sqoop.html" title="MySQL向Hive/HBase的迁移工具" target="_blank">MySQL向Hive/HBase的迁移工具</a></li>
<li><a href="http://www.javabloger.com/article/jee-and-mobile-internet.html" title="JEE技术在移动互联网中的应用" target="_blank">JEE技术在移动互联网中的应用</a></li>
<li><a href="http://www.javabloger.com/article/javabloger-site-features.html" title="新年，新功能" target="_blank">新年，新功能</a></li>
<li><a href="http://www.javabloger.com/article/javabloger-google-analytics-2010.html" title="谷歌分析数据" target="_blank">谷歌分析数据</a></li>
<li><a href="http://www.javabloger.com/article/egosurf.html" title="谁引用了本站的内容?" target="_blank">谁引用了本站的内容?</a></li>
<li><a href="http://www.javabloger.com/article/bye-2010-hello-hty.html" title="GoodBye,2010" target="_blank">GoodBye,2010</a></li>
<li><a href="http://www.javabloger.com/article/apache-hadoop-hama-bsp.html" title="Hadoop Hama项目–BSP模型的实现" target="_blank">Hadoop Hama项目–BSP模型的实现</a></li>
<li><a href="http://www.javabloger.com/article/stop-complaining.html" title="停止你的抱怨！" target="_blank">停止你的抱怨！</a></li>
</ul>
<h2 id="-lomo">摄影/生活–LOMO</h2>
<h3 id="-pizza-http-www-javabloger-com-article-beijing_cafe_bistro_pizza-factory-html-">·<a href="http://www.javabloger.com/article/beijing_cafe_bistro_pizza-factory.html" target="_blank">北京<code>咖啡店</code>小酒馆`pizza</a></h3>
<h3 id="-2009-http-www-javabloger-com-2009_selected_photo-">·<a href="http://www.javabloger.com/2009_selected_photo" target="_blank">2009与我的照片精选</a></h3>
<h3 id="-http-www-javabloger-com-post_by_2008-">·<a href="http://www.javabloger.com/post_by_2008" target="_blank">初学摄影时获奖的照片</a></h3>
<h3 id="-http-www-javabloger-com-other_pics_1-">·<a href="http://www.javabloger.com/other_pics_1" target="_blank">鼓浪屿游记</a></h3>
<h3 id="-http-www-javabloger-com-other_pics_2-">·<a href="http://www.javabloger.com/other_pics_2" target="_blank">有趣的照片</a></h3>
<h3 id="-http-www-javabloger-com-other_pics_3-">·<a href="http://www.javabloger.com/other_pics_3" target="_blank">收藏岁月的时光</a></h3>
<h3 id="-h-e-http-www-javabloger-com-black_and_white_photograph-">·<a href="http://www.javabloger.com/black_and_white_photograph" target="_blank">关于H.E.的黑白照片</a></h3>
<h3 id="-http-www-javabloger-com-mass_flower_photo-">·<a href="http://www.javabloger.com/mass_flower_photo" target="_blank">花花 草草,多么环保</a></h3>
<h3 id="-google-http-www-javabloger-com-google_office_environment-">·<a href="http://www.javabloger.com/google_office_environment" target="_blank">google的办公环境【转】</a></h3>
<p><a href="http://www.javabloger.com/album" target="_blank">更多...</a></p>
<h2 id="-">本站文章分类</h2>
<ul>
<li><a href="http://www.javabloger.com/article/category/android" title="查看 Android 下的所有文章" target="_blank">Android</a></li>
<li><a href="http://www.javabloger.com/article/category/chukwa" title="查看 ChukWa 下的所有文章" target="_blank">ChukWa</a></li>
<li><a href="http://www.javabloger.com/article/category/download" title="查看 Download 下的所有文章" target="_blank">Download</a></li>
<li><a href="http://www.javabloger.com/article/category/glassfish-j2ee-server" title="GlassFish应用服务器" target="_blank">GlassFish</a></li>
<li><a href="http://www.javabloger.com/article/category/google-analytics" title="查看 google-analytics 下的所有文章" target="_blank">google-analytics</a></li>
<li><a href="http://www.javabloger.com/article/category/hadoop" title="查看 Hadoop 下的所有文章" target="_blank">Hadoop</a></li>
<li><a href="http://www.javabloger.com/article/category/hama" title="查看 hama 下的所有文章" target="_blank">hama</a></li>
<li><a href="http://www.javabloger.com/article/category/hbase" title="查看 HBase 下的所有文章" target="_blank">HBase</a></li>
<li><a href="http://www.javabloger.com/article/category/hive" title="查看 Hive 下的所有文章" target="_blank">Hive</a></li>
<li><a href="http://www.javabloger.com/article/category/j2ee-adviser" title="软件开发的职场经验" target="_blank">J2ee企业顾问</a></li>
<li><a href="http://www.javabloger.com/article/category/j2ee-server" title="查看 J2EE服务器 下的所有文章" target="_blank">J2EE服务器</a></li>
<li><a href="http://www.javabloger.com/article/category/j2ee-framework" title="查看 J2EE框架 下的所有文章" target="_blank">J2EE框架</a></li>
<li><a href="http://www.javabloger.com/article/category/jms" title="查看 JMS 下的所有文章" target="_blank">JMS</a></li>
<li><a href="http://www.javabloger.com/article/category/life" title="查看 Life 下的所有文章" target="_blank">Life</a></li>
<li><a href="http://www.javabloger.com/article/category/linux" title="查看 Linux/Unix 下的所有文章" target="_blank">Linux/Unix</a></li>
<li><a href="http://www.javabloger.com/article/category/lucene" title="查看 lucene 下的所有文章" target="_blank">lucene</a></li>
<li><a href="http://www.javabloger.com/article/category/mac" title="查看 mac 下的所有文章" target="_blank">mac</a></li>
<li><a href="http://www.javabloger.com/article/category/mapreduce" title="查看 MapReduce 下的所有文章" target="_blank">MapReduce</a></li>
<li><a href="http://www.javabloger.com/article/category/middleware" title="查看 MiddleWare 下的所有文章" target="_blank">MiddleWare</a></li>
<li><a href="http://www.javabloger.com/article/category/mongodb" title="查看 MongoDB 下的所有文章" target="_blank">MongoDB</a></li>
<li><a href="http://www.javabloger.com/article/category/nosql" title="查看 NoSQL 下的所有文章" target="_blank">NoSQL</a></li>
<li><a href="http://www.javabloger.com/article/category/oo" title="查看 OO 下的所有文章" target="_blank">OO</a></li>
<li><a href="http://www.javabloger.com/article/category/openmq" title="查看 openmq 下的所有文章" target="_blank">openmq</a></li>
<li><a href="http://www.javabloger.com/article/category/opensource" title="查看 OpenSource 下的所有文章" target="_blank">OpenSource</a></li>
<li><a href="http://www.javabloger.com/article/category/php" title="查看 php 下的所有文章" target="_blank">php</a></li>
<li><a href="http://www.javabloger.com/article/category/pig" title="查看 Pig 下的所有文章" target="_blank">Pig</a></li>
<li><a href="http://www.javabloger.com/article/category/seo" title="搜索引擎优化" target="_blank">SEO</a></li>
<li><a href="http://www.javabloger.com/article/category/spring3" title="查看 spring3 下的所有文章" target="_blank">spring3</a></li>
<li><a href="http://www.javabloger.com/article/category/testing" title="查看 Testing 下的所有文章" target="_blank">Testing</a></li>
<li><a href="http://www.javabloger.com/article/category/thrift" title="查看 Thrift 下的所有文章" target="_blank">Thrift</a></li>
<li><a href="http://www.javabloger.com/article/category/web-dev" title="查看 web 下的所有文章" target="_blank">web</a></li>
<li><a href="http://www.javabloger.com/article/category/zookeeper" title="查看 zookeeper 下的所有文章" target="_blank">zookeeper</a></li>
<li><a href="http://www.javabloger.com/article/category/cloud" title="查看 云计算 下的所有文章" target="_blank">云计算</a></li>
<li><a href="http://www.javabloger.com/article/category/code" title="查看 代码 下的所有文章" target="_blank">代码</a></li>
<li><a href="http://www.javabloger.com/article/category/distributed" title="查看 分布式 下的所有文章" target="_blank">分布式</a></li>
<li><a href="http://www.javabloger.com/article/category/storage" title="查看 存储 下的所有文章" target="_blank">存储</a></li>
<li><a href="http://www.javabloger.com/article/category/performance" title="查看 性能 下的所有文章" target="_blank">性能</a></li>
<li><a href="http://www.javabloger.com/article/category/retain" title="查看 招聘 下的所有文章" target="_blank">招聘</a></li>
<li><a href="http://www.javabloger.com/article/category/recommendation" title="查看 推荐引擎 下的所有文章" target="_blank">推荐引擎</a></li>
<li><a href="http://www.javabloger.com/article/category/agile" title="查看 敏捷 下的所有文章" target="_blank">敏捷</a></li>
<li><a href="http://www.javabloger.com/article/category/database" title="查看 数据库 下的所有文章" target="_blank">数据库</a></li>
<li><a href="http://www.javabloger.com/article/category/other" title="查看 杂类 下的所有文章" target="_blank">杂类</a></li>
<li><a href="http://www.javabloger.com/article/category/architecture" title="查看 架构设计 下的所有文章" target="_blank">架构设计</a></li>
<li><a href="http://www.javabloger.com/article/category/success_story" title="工作与实施顾问中的记实录，讲述身边的事儿，讲述与你共鸣的那点事儿。" target="_blank">案例与故事</a></li>
<li><a href="http://www.javabloger.com/article/category/occupation" title="查看 职场 下的所有文章" target="_blank">职场</a></li>
<li><a href="http://www.javabloger.com/article/category/mini-book" title="查看 迷你书 下的所有文章" target="_blank">迷你书</a></li>
</ul>
<h2 id="-">文章索引模板</h2>
<ul>
<li><a href="http://www.javabloger.com/article/2011/02" title="2011年二月" target="_blank">2011年二月</a></li>
<li><a href="http://www.javabloger.com/article/2011/01" title="2011年一月" target="_blank">2011年一月</a></li>
<li><a href="http://www.javabloger.com/article/2010/12" title="2010年十二月" target="_blank">2010年十二月</a></li>
<li><a href="http://www.javabloger.com/article/2010/11" title="2010年十一月" target="_blank">2010年十一月</a></li>
<li><a href="http://www.javabloger.com/article/2010/10" title="2010年十月" target="_blank">2010年十月</a></li>
<li><a href="http://www.javabloger.com/article/2010/09" title="2010年九月" target="_blank">2010年九月</a></li>
<li><a href="http://www.javabloger.com/article/2010/08" title="2010年八月" target="_blank">2010年八月</a></li>
<li><a href="http://www.javabloger.com/article/2010/07" title="2010年七月" target="_blank">2010年七月</a></li>
<li><a href="http://www.javabloger.com/article/2010/06" title="2010年六月" target="_blank">2010年六月</a></li>
<li><a href="http://www.javabloger.com/article/2010/05" title="2010年五月" target="_blank">2010年五月</a></li>
<li><a href="http://www.javabloger.com/article/2010/04" title="2010年四月" target="_blank">2010年四月</a></li>
<li><a href="http://www.javabloger.com/article/2010/03" title="2010年三月" target="_blank">2010年三月</a></li>
<li><a href="http://www.javabloger.com/article/2010/02" title="2010年二月" target="_blank">2010年二月</a></li>
<li><a href="http://www.javabloger.com/article/2010/01" title="2010年一月" target="_blank">2010年一月</a></li>
<li><a href="http://www.javabloger.com/article/2008/06" title="2008年六月" target="_blank">2008年六月</a></li>
<li><a href="http://www.javabloger.com/article/2008/02" title="2008年二月" target="_blank">2008年二月</a></li>
<li><a href="http://www.javabloger.com/article/2007/06" title="2007年六月" target="_blank">2007年六月</a><h2 id="-">本站信息</h2>
</li>
</ul>
<p><img src="" alt="">
网志文章均为原创
本站版权<a href="http://www.javabloger.com/article/creative-commons.html" target="_blank">创作共用</a>
<a href="http://www.cnaaa.com/" target="_blank">3A网络</a>提供本站网络资源
<strong>Started</strong>@2009/01/15</p>
<p> © 2011 H.E. &#39;s Blog | <a href="http://www.javabloger.com/index.php/feed=rss2" target="_blank">Entries (RSS)</a> | <a href="http://www.javabloger.com/index.php/feed=comments-rss2" target="_blank">Comments (RSS)</a>   <a href="http://www.javabloger.com/sitemap.xml" target="_blank">本站地图</a>
苏ICP备10012508号</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--Java对XML节点的修改、添加、删除–ByXstream框架-J2EE企业应用顾问咨询/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--Java对XML节点的修改、添加、删除–ByXstream框架-J2EE企业应用顾问咨询" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--XStream-AnnotationsTutorial/">XStream </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--XStream-AnnotationsTutorial/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="xstream-annotations-tutorial">XStream - Annotations Tutorial</h1>
<p><a href="http://xstream.codehaus.org/index.html" target="_blank"><img src="" alt="XStream"></a></p>
<h1 id="annotations-tutorial">Annotations Tutorial</h1>
<h2 id="motivation">Motivation</h2>
<p>Sometimes it can get tedious to call all those XStream aliases/register converter methods or you might simply like the new trend on configuring POJOs: Java annotations.</p>
<p>This tutorial will show you how to use some of the annotations provided by XStream in order to make configuration easier. Let&#39;s start with a custom Message class:
package com.thoughtworks.xstream; package com.thoughtworks.xstream; public class RendezvousMessage { private int messageType; public RendezvousMessage(int messageType) { this.messageType = messageType; } }</p>
<p>Let&#39;s code the XStream calls which generate the XML file:</p>
<p>package com.thoughtworks.xstream; public class Tutorial { public static void main(String[] args) { XStream stream = new XStream(); RendezvousMessage msg = new RendezvousMessage(15); System.out.println(stream.toXML(msg)); } }</p>
<p>Results in the following XML:</p>
<p><com.thoughtworks.xstream.RendezvousMessage> <messageType>15</messageType> </com.thoughtworks.xstream.RendezvousMessage></p>
<h2 id="aliasing-annotation">Aliasing Annotation</h2>
<p>The most basic annotation is the one responsible for type and field aliasing: @XStreamAlias. Let&#39;s annotate both our type and field and run the tutorial method again:
@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; public RendezvousMessage(int messageType) { this.messageType = messageType; } }</p>
<p>In some strange way, the result is the same. What happened here? XStream does not read this annotation by default as it would be impossible to deserialize the XML code. Therefore we need to tell XStream to read the annotations from this type:</p>
<p>public static void main(String[] args) { XStream stream = new XStream(); xstream.processAnnotations(RendezvousMessage.class); RendezvousMessage msg = new RendezvousMessage(15); System.out.println(stream.toXML(msg)); }</p>
<p>Note that we have called the processAnnotations method of XStream. This method registers all aliases annotations in the XStream instance passed as first argument. You may also use the overloaded version of this method taking an array of types. The resulting XML is now what we have expected:</p>
<message> <type>15</type> </message>

<p>If you let XStream process the annotations of a type, it will also process all annotations of the related types i.e. all super types, implemented interfaces, the class types of the members and all their generic types.</p>
<h2 id="implicit-collections">Implicit Collections</h2>
<p>Let&#39;s add a List of content to our RendezvousMessage. We desire the same functionality obtained with implicit collections:
@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; private List<String> content; public RendezvousMessage(int messageType, String ... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>public static void main(String[] args) { XStream stream = new XStream(); xstream.processAnnotations(RendezvousMessage.class); RendezvousMessage msg = new RendezvousMessage(15, &quot;firstPart&quot;,&quot;secondPart&quot;); System.out.println(stream.toXML(msg)); }</p>
<p>The resulting XML shows the collection name before its elements:</p>
<message> <type>15</type> <content class="java.util.Arrays$ArrayList"> <a class="string-array"> <string>firstPart</string> <string>secondPart</string> </a> </content> </message>

<p>This is not what we desire therefore we will annotate the content list to be recognized as an implicit collection:</p>
<p>@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; @XStreamImplicit private List<String> content; public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>Resulting in an XML which ignores the field name (content) of the list:</p>
<message> <type>15</type> <a class="string-array"> <string>firstPart</string> <string>secondPart</string> </a> </message>

<p>We are almost there... we still want to remove the &#39;a&#39; tag, and define each content part with the tag &#39;part&#39;. In order to do so, let&#39;s add another attribute to our implicit collection annotation. The attribute field defines the name of the tag used for data contained inside this collection:</p>
<p>@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>Resulting in a cleaner XML:</p>
<message> <type>15</type> <part>firstPart</part> <part>secondPart</part> </message>

<h2 id="local-converters">Local Converters</h2>
<p>Let&#39;s create another attribute which defines the timestamp when the message was created:
@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; private Calendar created = new GregorianCalendar(); public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>Resulting in the following xml:</p>
<message> <type>15</type> <part>firstPart</part> <part>secondPart</part> <created> <time>1154097812245</time> <timezone>America/Sao_Paulo</timezone> </created> </message>

<p>Now we face the following problem: We want to use a custom converter locally for this Calendar, but only for this Calendar, this exact field in this exact type. Easy... let&#39;s annotate it with the custom converter annotation:</p>
<p>@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; @XStreamConverter(SingleValueCalendarConverter.class) private Calendar created = new GregorianCalendar(); public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>Let&#39;s create the custom converter:</p>
<p>public class SingleValueCalendarConverter implements Converter { public void marshal(Object source, HierarchicalStreamWriter writer, MarshallingContext context) { Calendar calendar = (Calendar) source; writer.setValue(String.valueOf(calendar.getTime().getTime())); } public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext context) { GregorianCalendar calendar = new GregorianCalendar(); calendar.setTime(new Date(Long.parseLong(reader.getValue()))); return calendar; } public boolean canConvert(Class type) { return type.equals(GregorianCalendar.class); } }</p>
<p>And we end up with the converter being used and generating the following XML:</p>
<message> <type>15</type> <part>firstPart</part> <part>secondPart</part> <created>1154097812245</created> </message>

<h2 id="attributes">Attributes</h2>
<p>The client may asks for the type tag to be an attribute inside the message tag, as follows:</p>
<message type="15"> <part>firstPart</part> <part>secondPart</part> <created>1154097812245</created> </message>

<p>All you need to do is add the @XStreamAsAttribute annotation:</p>
<p>@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) @XStreamAsAttribute private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; @XStreamConverter(SingleValueCalendarConverter.class) private Calendar created = new GregorianCalendar(); public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<h2 id="omitting-fields">Omitting Fields</h2>
<p>Sometimes a class may contain elements that should not be part of the resulting XML. In our case we may now drop the &#39;messageType&#39;, since we are only interested at the content. This is easy using the @XStreamOmitField annotation:
@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamOmitField private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; @XStreamConverter(SingleValueCalendarConverter.class) private Calendar created = new GregorianCalendar(); public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>The resulting XML does not contain the type of the message anymore:</p>
<message> <part>firstPart</part> <part>secondPart</part> <created>1154097812245</created> </message>

<h2 id="auto-detect-annotations">Auto-detect Annotations</h2>
<p>Until now we have always told you, that you have to call processAnnotation to configure the XStream instance with the present annotations in the different classes. However, this is only half the truth. You can run XStream also in a lazy mode, where it auto-detects the annotations while processing the object graph and configure the XStream instance on-the-fly:
package com.thoughtworks.xstream; public class Tutorial { public static void main(String[] args) { XStream stream = new XStream(); xstream.autodetectAnnotations(true); RendezvousMessage msg = new RendezvousMessage(15); System.out.println(stream.toXML(msg)); } }</p>
<p>The resulting XML will look as expected! Nevertheless you have to understand the implications, therefore some words of warning:</p>
<ol>
<li><strong>Chicken-and-egg problem</strong></li>
</ol>
<p>An XStream instance caches all class types processed for annotations. Every time XStream converts an object it will in auto-detection mode first process the object&#39;s type and all the types related (as explained <a href="http://xstream.codehaus.org/annotations-tutorial.html#Aliasing" target="_blank">above</a>). Therefore it is no problem to serialize an object graph into XML, since XStream will know of all types in advance. This is no longer true at deserialization time. XStream has to know the alias to turn it into the proper type, but it can find the annotation for the alias only if it has processed the type in advance. Therefore deserialization will fail if the type has not already been processed either by having called XStream&#39;s processAnnotations method or by already having serialized this type. However, @XStreamAlias is the only annotation that may fail in this case.</p>
<ol>
<li><strong>Concurrency</strong></li>
</ol>
<p>XStream is not thread-safe while it is configured, thread-safety is only guaranteed during marshalling and unmarshalling. However an annotation is defining a change in configuration that is now applied while object marshalling is processed. Therefore will the auto-detection mode turn XStream&#39;s marshalling process in a thread-unsafe operation any you may run under certain circumstances into concurrency problems.</p>
<ol>
<li><strong>Exceptions</strong></li>
</ol>
<p>XStream uses a well-defined exception hierarchy. Normally an InitializationException is only thrown while XStream is configured. If annotations are processed on the fly they can be thrown obviously also in a marshalling process.</p>
<ol>
<li><strong>Performance</strong></li>
</ol>
<p>In auto-detection mode XStream will have to examine any unknown class type for annotations. This will slow down the marshalling process until all processed types have been examined once.</p>
<p>Please note, that any call to XStream.processAnnotations will turn off the auto-detection mode.</p>
<h2 id="summing-up">Summing up</h2>
<p>The XStream annotations support might help you configuring your class mappings in some ways, as the custom configuration will appear in your types, but might not be the solution for other problems, i.e. when you need to map the same type to two different XML &#39;standards&#39;. Others might claim that the configuration should be clearly stated in a Java class and not mixed with your model, its up to you to pick the best approach in your case: Annotations or direct method calls to the XStream instance. Annotations do not provide more functionality, but may improve convenience.</p>
<h1 id="software">Software</h1>
<ul>
<li><a href="http://xstream.codehaus.org/index.html" target="_blank">About XStream</a></li>
<li><a href="http://xstream.codehaus.org/news.html" target="_blank">News</a></li>
<li><a href="http://xstream.codehaus.org/changes.html" target="_blank">Change History</a></li>
<li><a href="http://xstream.codehaus.org/versioning.html" target="_blank">About Versioning</a></li>
</ul>
<h1 id="evaluating-xstream">Evaluating XStream</h1>
<ul>
<li><a href="http://xstream.codehaus.org/tutorial.html" target="_blank">Two Minute Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/graphs.html" target="_blank">Object references</a></li>
<li><a href="http://xstream.codehaus.org/manual-tweaking-output.html" target="_blank">Tweaking the Output</a></li>
<li><a href="http://xstream.codehaus.org/license.html" target="_blank">License</a></li>
<li><a href="http://xstream.codehaus.org/download.html" target="_blank">Download</a></li>
<li><a href="http://xstream.codehaus.org/references.html" target="_blank">References</a></li>
<li><p><a href="http://www.ohloh.net/projects/3459" target="_blank">Statistics</a></p>
<h1 id="using-xstream">Using XStream</h1>
</li>
<li><p><a href="http://xstream.codehaus.org/architecture.html" target="_blank">Architecture Overview</a></p>
</li>
<li><a href="http://xstream.codehaus.org/converters.html" target="_blank">Converters</a></li>
<li><a href="http://xstream.codehaus.org/faq.html" target="_blank">Frequently Asked Questions</a></li>
<li><a href="http://xstream.codehaus.org/list-user.html" target="_blank">Users&#39; Mailing List</a></li>
<li><a href="http://xstream.codehaus.org/javadoc/index.html" target="_blank">JavaDoc Core</a></li>
<li><a href="http://xstream.codehaus.org/benchmark-javadoc/index.html" target="_blank">JavaDoc Benchmark</a></li>
<li><a href="http://xstream.codehaus.org/issues.html" target="_blank">Reporting Issues</a></li>
</ul>
<h1 id="tutorials">Tutorials</h1>
<ul>
<li><a href="http://xstream.codehaus.org/tutorial.html" target="_blank">Two Minute Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/alias-tutorial.html" target="_blank">Alias Tutorial</a></li>
<li>Annotations Tutorial</li>
<li><a href="http://xstream.codehaus.org/converter-tutorial.html" target="_blank">Converter Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/objectstream.html" target="_blank">Object Streams Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/persistence-tutorial.html" target="_blank">Persistence API Tutorial</a></li>
<li><p><a href="http://xstream.codehaus.org/json-tutorial.html" target="_blank">JSON Tutorial</a></p>
<h1 id="developing-xstream">Developing XStream</h1>
</li>
<li><p><a href="http://xstream.codehaus.org/how-to-contribute.html" target="_blank">How to Contribute</a></p>
</li>
<li><a href="http://xstream.codehaus.org/list-dev.html" target="_blank">Developers&#39; Mailing List</a></li>
<li><a href="http://xstream.codehaus.org/team.html" target="_blank">Development Team</a></li>
<li><a href="http://xstream.codehaus.org/repository.html" target="_blank">Source Repository</a></li>
<li><a href="http://bamboo.ci.codehaus.org/browse/XSTREAM" target="_blank">Continuous Integration</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--XStream-AnnotationsTutorial/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--XStream-AnnotationsTutorial" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/21/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/19/">19</a></li><li><a class="page-number" href="/page/20/">20</a></li><li><a class="page-number" href="/page/21/">21</a></li><li class="active"><li><span class="page-number current">22</span></li><li><a class="page-number" href="/page/23/">23</a></li><li><a class="page-number" href="/page/24/">24</a></li><li><a class="page-number" href="/page/25/">25</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/23/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 13:06:28</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
