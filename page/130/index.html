
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 130 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-oracle--OracleParallelExecution并行执行/">Oracle Parallel Execution(并行执行)</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:34.000Z"> <a href="/2014/02/02/2014-02-02-DB-oracle--OracleParallelExecution并行执行/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="oracle-parallel-execution-">Oracle Parallel Execution(并行执行)</h1>
<p>您还未登录！|<a href="https://passport.csdn.net/account/login" target="_blank">登录</a>|<a href="https://passport.csdn.net/account/register" target="_blank">注册</a>|<a href="https://passport.csdn.net/help/faq" target="_blank">帮助</a></p>
<ul>
<li><a href="http://www.csdn.net/" target="_blank">首页</a></li>
<li><a href="http://news.csdn.net/" target="_blank">业界</a></li>
<li><a href="http://mobile.csdn.net/" target="_blank">移动</a></li>
<li><a href="http://cloud.csdn.net/" target="_blank">云计算</a></li>
<li><a href="http://sd.csdn.net/" target="_blank">研发</a></li>
<li><a href="http://bbs.csdn.net/" target="_blank">论坛</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">博客</a></li>
<li><a href="http://download.csdn.net/" target="_blank">下载</a></li>
<li><h2 id="-"><a href="">更多</a></h2>
</li>
</ul>
<h1 id="-david-dai-focus-on-oracle-http-blog-csdn-net-tianlesoftware-"><a href="http://blog.csdn.net/tianlesoftware" target="_blank">David Dai -- Focus on Oracle</a></h1>
<h2 id="the-important-thing-in-life-is-to-have-a-great-aim-and-the-determination-to-attain-it-">The important thing in life is to have a great aim ,and the determination to attain it！</h2>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware?viewmode=contents" target="_blank"><img src="" alt="">目录视图</a></li>
<li><a href="http://blog.csdn.net/tianlesoftware?viewmode=list" target="_blank"><img src="" alt="">摘要视图</a></li>
<li><a href="http://blog.csdn.net/tianlesoftware/rss/list" target="_blank"><img src="" alt="">订阅</a>
<a href="https://code.csdn.net/blog/12" target="_blank">公告：博客新增直接引用代码功能</a>        <a href="http://www.csdn.net/article/2013-08-06/2816471" target="_blank">专访李铁军：从医生到金山首席安全专家的转变</a>      <a href="http://blog.csdn.net/csdnproduct/article/details/9495139" target="_blank">CSDN博客频道自定义域名、标签搜索功能上线啦！</a>      <a href="http://blog.csdn.net/adali/article/details/9813651" target="_blank">独一无二的职位：开源社区经理</a></li>
</ul>
<h3 id="-oracle-parallel-execution-"><a href="">Oracle Parallel Execution(并行执行)</a></h3>
<p>分类： <a href="http://blog.csdn.net/tianlesoftware/article/category/706520" target="_blank">Oracle Advanced Knowledge</a> <a href="http://blog.csdn.net/tianlesoftware/article/category/668807" target="_blank">Oracle Performance</a>  2010-09-01 02:20 14688人阅读 <a href="">评论</a>(7) <a href="&quot;收藏&quot;">收藏</a> <a href="&quot;举报&quot;">举报</a>
<a href="http://blog.csdn.net/tag/details.html?tag=parallel" target="_blank">parallel</a><a href="http://blog.csdn.net/tag/details.html?tag=oracle" target="_blank">oracle</a><a href="http://blog.csdn.net/tag/details.html?tag=sql" target="_blank">sql</a><a href="http://blog.csdn.net/tag/details.html?tag=insert" target="_blank">insert</a><a href="http://blog.csdn.net/tag/details.html?tag=table" target="_blank">table</a><a href="http://blog.csdn.net/tag/details.html?tag=iterator" target="_blank">iterator</a></p>
<p>关于Oracle 的并行执行，Oracle 官方文档有详细的说明：</p>
<pre><code>                            Using Parallel Execution
</code></pre><p><a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel.htm#VLDBG010" target="_blank"><a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel.htm/#VLDBG010">http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel.htm/#VLDBG010</a></a></p>
<p>This chapter covers tuning in a parallel execution environment and discusses the following topics:</p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel001.htm#CACEEBJJ" target="_blank">Introduction to Parallel Execution</a></p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel002.htm#i1014083" target="_blank">How Parallel Execution Works</a></p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel003.htm#CACBAABB" target="_blank">Types of Parallelism</a></p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel004.htm#i1007196" target="_blank">Initializing and Tuning Parameters for Parallel Execution</a></p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel005.htm#i1007962" target="_blank">Tuning General Parameters for Parallel Execution</a></p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel006.htm#i1008510" target="_blank">Monitoring Parallel Execution Performance</a></p>
<p>·         <a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10837/parallel007.htm#i1008847" target="_blank">Miscellaneous Parallel Execution Tuning Tips</a></p>
<p>一．     并行（Parallel）和OLAP系统</p>
<p>并行的实现机制是： 首先，Oracle 会创建一个进程用于协调并行服务进程之间的信息传递，这个协调进程将需要操作的数据集（比如表的数据块）分割成很多部分，称为并行处理单元，然后并行协调进程给每个并行进程分配一个数据单元。比如有四个并行服务进程，他们就会同时处理各自分配的单元，当一个并行服务进程处理完毕后，协调进程就会给它们分配另外的单元，如此反复，直到表上的数据都处理完毕，最后协调进程负责将每个小的集合合并为一个大集合作为最终的执行结果，返回给用户。</p>
<p>并行处理的机制实际上就是把一个要扫描的数据集分成很多小数据集，Oracle 会启动几个并行服务进程同时处理这些小数据集，最后将这些结果汇总，作为最终的处理结果返回给用户。</p>
<p>这种数据并行处理方式在OLAP系统中非常有用，OLAP系统的表通常来说都是非常大，如果系统的CPU比较多，让所有的CPU共同来处理这些数据，效果就会比串行执行要高的多。</p>
<p>然而对于OLTP系统，通常来讲，并行并不合适，原因是OLTP系统上几乎在所有的SQL操作中，数据访问路劲基本上以索引访问为主，并且返回结果集非常小，这样的SQL 操作的处理速度一般非常快，不需要启用并行。</p>
<p>二． 并行处理的机制</p>
<pre><code>            当Oracle 数据库启动的时候，实例会根据初始化参数：

                            PARALLEL_MIN_SERVERS=n

            的值来预先分配n个并行服务进程，当一条SQL 被CBO判断为需要并行执行时发出SQL的会话进程变成并行协助进程，它按照并行执行度的值来分配进程服务器进程。



            首先协调进程会使用ORACLE 启动时根据参数： parallel_min_servers=n的值启动相应的并行服务进程，如果启动的并行服务器进程数不足以满足并行度要求的并行服务进程数，则并行协调进程将额外启动并行服务进程以提供更多的并行服务进程来满足执行的需求。 然后星星协调进程将要处理的对象划分成小数据片，分给并行服务进程处理；并行服务进程处理完毕后将结果发送给并行协调进程，然后由并行协调进程将处理结果汇总并发送给用户。



            刚才讲述的是一个并行处理的基本流程。 实际上，在一个并行执行的过程中，还存在着并行服务进程之间的通信问题。

            在一个并行服务进程需要做两件事情的时候，它会再启用一个进程来配和当前的进程完成一个工作，比如这样的一条SQL语句：

            Select /* from employees order by last_name;



            假设employees表中last_name 列上没有索引，并且并行度为4，此时并行协调进程会分配4个并行服务进程对表employees进行全表扫描操作，因为需要对结果集进行排序，所以并行协调进程会额外启用4个并行服务进程，用于处理4个进程传送过来的数据，这新启用的用户处理传递过来数据的进程称为父进程，用户传出数据（最初的4个并行服务进程）成为子进程，这样整个并行处理过程就启用了8个并行服务进程。 其中每个单独的并行服务进程的行为叫作并行的内部操作，而并行服务进程之间的数据交流叫做并行的交互操作。

            这也是有时我们发现并行服务进程数量是并行度的2倍，就是因为启动了并行服务父进程操作的缘故。
</code></pre><p>三. 读懂一个并行处理的执行计划</p>
<p>CREATE TABLE emp2 AS SELECT /* FROM employees;</p>
<p>ALTER TABLE emp2 PARALLEL 2;</p>
<p>EXPLAIN PLAN FOR</p>
<p>  SELECT SUM(salary) FROM emp2 GROUP BY department_id;</p>
<p>SELECT PLAN_TABLE_OUTPUT FROM TABLE(DBMS_XPLAN.DISPLAY());</p>
<hr>
<p>| Id  | Operation                | Name     | Rows  | Bytes | Cost (%CPU) |    TQ  |IN-OUT| PQ Distrib |</p>
<hr>
<p>|   0 | SELECT STATEMENT         |          |   107 |  2782 |     3 (34)  |        |      |            |</p>
<p>|   1 |  PX COORDINATOR          |          |       |       |             |        |      |            |</p>
<p>|   2 |   PX SEND QC (RANDOM)    | :TQ10001 |   107 |  2782 |     3 (34)  |  Q1,01 | P-&gt;S | QC (RAND)  |</p>
<p>|   3 |    HASH GROUP BY         |          |   107 |  2782 |     3 (34)  |  Q1,01 | PCWP |            |</p>
<p>|   4 |     PX RECEIVE           |          |   107 |  2782 |     3 (34)  |  Q1,01 | PCWP |            |</p>
<p>|   5 |      PX SEND HASH        | :TQ10000 |   107 |  2782 |     3 (34)  |  Q1,00 | P-&gt;P | HASH       |</p>
<p>|   6 |       HASH GROUP BY      |          |   107 |  2782 |     3 (34)  |  Q1,00 | PCWP |            |</p>
<p>|   7 |        PX BLOCK ITERATOR |          |   107 |  2782 |     2 (0)   |  Q1,00 | PCWP |            |</p>
<p>|   8 |         TABLE ACCESS FULL| EMP2     |   107 |  2782 |     2 (0)   |  Q1,00 | PCWP |            |</p>
<hr>
<p>The table EMP2 is scanned in parallel by one set of slaves while the aggregation for the GROUP BY is done by the second set. The PX BLOCK ITERATOR row source represents the splitting up of the table EMP2 into pieces so as to divide the scan workload between the parallel scan slaves. The PX SEND and PX RECEIVE row sources represent the pipe that connects the two slave sets as rows flow up from the parallel scan, get repartitioned through the HASH table queue, and then read by and aggregated on the top slave set. The PX SEND QC row source represents the aggregated values being sent to the QC in random (RAND) order. The PX COORDINATOR row source represents the QC or Query Coordinator which controls and schedules the parallel plan appearing below it in the plan tree.</p>
<pre><code>            上面这段文字是从Oracle 联机文档上荡下来的。
</code></pre><p><a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/ex_plan.htm#PFGRF94687" target="_blank"><a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/ex_plan.htm/#PFGRF94687">http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/ex_plan.htm/#PFGRF94687</a></a></p>
<p>通过执行计划，我们来看一下它的执行步骤：</p>
<pre><code>            （1）并行服务进程对EMP2表进行全表扫描。

            （2）并行服务进程以ITERATOR（迭代）方式访问数据块，也就是并行协调进程分给每个并行服务进程一个数据片，在这个数据片上，并行服务进程顺序地访问每个数据块（Iterator），所有的并行服务进程将扫描的数据块传给另一组并行服务进程（父进程）用于做Hash Group操作。

            （3）并行服务父进程对子进程传递过来的数据做Hash Group操作。

            （4）并行服务进程（子进程）将处理完的数据发送出去。

            （5）并行服务进程（父进程）接收到处理过的数据。

            （6）合并处理过的数据，按照随即的顺序发给并行协调进程（QC：Query Conordinator）。

            （7）并行协调进程将处理结果发给用户。
</code></pre><p>当使用了并行执行，SQL的执行计划中就会多出一列：in-out。 该列帮助我们理解数据流的执行方法。 它的一些值的含义如下：</p>
<p>Parallel to Serial（P-&gt;S）: 表示一个并行操作发送数据给一个串行操作，通常是并行incheng将数据发送给并行调度进程。</p>
<p>Parallel to Parallel（P-&gt;P）：表示一个并行操作向另一个并行操作发送数据，疆场是两个从属进程之间的数据交流。</p>
<p>Parallel Combined with parent(PCWP): 同一个从属进程执行的并行操作，同时父操作也是并行的。</p>
<p>Parallel Combined with Child(PCWC): 同一个从属进程执行的并行操作，子操作也是并行的。</p>
<p>Serial to Parallel（S-&gt;P）: 一个串行操作发送数据给并行操作，如果select 部分是串行操作，就会出现这个情况。</p>
<p>四．并行执行等待事件</p>
<pre><code>            在做并行执行方面的性能优化的时候，可能会遇到如下等待时间：

                            PX Deq Credit: send blkd

            这是一个有并行环境的数据库中，从statspack 或者AWR中经常可以看到的等待事件。 在Oracle 9i 里面， 这个等待时间被列入空闲等待。 关于等待时间参考：

            Oracle 常见的33个等待事件

            [http://blog.csdn.net/tianlesoftware/archive/2010/08/12/5807800.aspx](http://blog.csdn.net/tianlesoftware/archive/2010/08/12/5807800.aspx)
</code></pre><p>一般来说空闲等待可以忽略它，但是实际上空闲等待也是需要关注的，因为一个空闲的等待，它反映的是另外的资源已经超负荷运行了。 基于这个原因，在Oracle 10g里已经把PX Deq Credit: send blkd等待时间不在视为空闲等待，而是列入了Others 等待事件范围。</p>
<p>PX Deq Credit: send blkd 等待事件的意思是： 当并行服务进程向并行协调进程QC（也可能是上一层的并行服务进程）发送消息时，同一时间只有一个并行服务进程可以向上层进程发送消息，这时候如果有其他的并行服务进程也要发送消息，就只能等待了。 知道获得一个发送消息的信用信息（Credit），这时候会触发这个等待事件，这个等待事件的超时时间为2秒钟。</p>
<pre><code>            如果我们启动了太多的并行进程，实际上系统资源（CPU）或者QC 无法即时处理并行服务发送的数据，那么等待将不可避免。 对于这种情况，我们就需要降低并行处理的并行度。



            当出现PX Deq Credit：send blkd等待的时间很长时，我们可以通过平均等待时间来判断等待事件是不是下层的并行服务进程空闲造成的。该等待事件的超时时间是2秒，如果平均等待时间也差不多是2秒，就说明是下层的并行进程“无事所做”，处于空闲状态。 如果和2秒的差距很大，就说明不是下层并行服务超时导致的空闲等待，而是并行服务之间的竞争导致的，因为这个平均等待事件非常短，说明并行服务进程在很短时间的等待之后就可以获取资源来处理数据。
</code></pre><p>所以对于非下层的并行进程造成的等待，解决的方法就是降低每个并行执行的并行度，比如对象（表，索引）上预设的并行度或者查询Hint 指定的并行度。</p>
<p>五． 并行执行的使用范围</p>
<p>Oracle的并行技术在下面的场景中可以使用：</p>
<p>（1）       Parallel Query（并行查询）</p>
<p>（2）       Parallel DDL（并行DDL操作，如建表，建索引等）</p>
<p>（3）       Parallel DML（并行DML操作，如insert，update，delete等）</p>
<p>5.1 并行查询</p>
<pre><code>            并行查询可以在查询语句，子查询语句中使用，但是不可以使用在一个远程引用的对象上（如DBLINK）。



            一个查询能够并行执行，需要满足一下条件：
</code></pre><p>（1）       SQL语句中有Hint提示，比如Parallel 或者 Parallel_index.</p>
<p>（2）       SQL语句中引用的对象被设置了并行属性。</p>
<p>（3）       多表关联中，至少有一个表执行全表扫描（Full table scan）或者跨分区的Index range SCAN。</p>
<p>如： select  //<em>+parallel(t 4) /</em> from t;</p>
<p>5.2 并行DDL 操作</p>
<p>5.2.1 表操作的并行执行</p>
<pre><code>            以下表操作可以使用并行执行：
</code></pre><p>CREATE TABLE … AS SELECT</p>
<pre><code>   ALTER TABLE … move partition

   Alter table … split partition

   Alter table … coalesce partition
</code></pre><p>DDL操作，我们可以通过trace 文件来查看它的执行过程。</p>
<p>示例：</p>
<p>查看当前的trace 文件：</p>
<p><em>//</em> Formatted on 2010/8/31 23:33:00 (QP5 v5.115.810.9015) /<em>/</em></p>
<p>SELECT      u_dump.VALUE</p>
<pre><code>     || &#39;/&#39;

     || db_name.VALUE

     || &#39;_ora_&#39;

     || v$process.spid

     || NVL2 (v$process.traceid, &#39;_&#39; || v$process.traceid, NULL)

     || &#39;.trc&#39;

        &quot;Trace File&quot;
</code></pre><p>  FROM            v$parameter u_dump</p>
<pre><code>           CROSS JOIN

              v$parameter db_name

        CROSS JOIN

           v$process

     JOIN

        v$session

     ON v$process.addr = v$session.paddr
</code></pre><p> WHERE       u_dump.name = &#39;user_dump_dest&#39;</p>
<pre><code>     AND db_name.name = &#39;db_name&#39;

     AND v$session.audsid = SYS_CONTEXT (&#39;userenv&#39;, &#39;sessionid&#39;);
</code></pre><p>Trace File</p>
<hr>
<p>d:/app/administrator/diag/rdbms/orcl/orcl/trace/orcl_ora_5836.trc</p>
<p>d:/app/administrator/diag/rdbms/orcl/orcl/trace/orcl_ora_3048.trc</p>
<p>SQL&gt; alter session set events &#39;10046 trace name context forever,level 12&#39;;</p>
<p>会话已更改。</p>
<p>SQL&gt; create table 怀宁 parallel 4 as select /* from dba_objects;</p>
<p>表已创建。</p>
<p>SQL&gt; alter session set events &#39;10046 trace name context off&#39; ;</p>
<p>会话已更改。</p>
<p>这里用到了ORACLE的event 时间。 10046事件是用来跟踪SQL语句的。开启事件后，相关的信息会写道trace 文件中，这也是之前我们查看trace 文件名的原因。 关于event事件，参考我的blog：</p>
<pre><code>            Oracle 跟踪事件 set event

            [http://blog.csdn.net/tianlesoftware/archive/2009/12/13/4977827.aspx](http://blog.csdn.net/tianlesoftware/archive/2009/12/13/4977827.aspx)
</code></pre><p>有了trace文件， 我们可以用tkprof 工具，来查看trace 文件的内容。 关于tkprof 工具介绍，参考blog：</p>
<pre><code>            使用 Tkprof 分析 ORACLE 跟踪文件

            [http://blog.csdn.net/tianlesoftware/archive/2010/05/29/5632003.aspx](http://blog.csdn.net/tianlesoftware/archive/2010/05/29/5632003.aspx)
</code></pre><p>进入trace 目录，用tkprof命令生成txt 文件，然后查看txt 文件。</p>
<p>d:/app/Administrator/diag/rdbms/orcl/orcl/trace&gt;tkprof orcl_ora_3048.trc 安庆.txt sys=no</p>
<p>TKPROF: Release 11.2.0.1.0 - Development on 星期二 8月 31 23:45:25 2010</p>
<p>Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.</p>
<p>d:/app/Administrator/diag/rdbms/orcl/orcl/trace&gt;</p>
<p>5.2.2 创建索引的并行执行</p>
<pre><code>            创建索引时使用并行方式在系统资源充足的时候会使性能得到很大的提高，特别是在OLAP系统上对一些很大的表创建索引时更是如此。 以下的创建和更改索引的操作都可以使用并行：

            Create index

            Alter index … rebuild

            Alter index … rebuild partition

            Alter index … split partition
</code></pre><p>一个简单的语法：create index t_ind on t(id) parallel 4;</p>
<p>监控这个过程和5.2.1 中表一样，需要通过10046事件。 这里就不多说了。</p>
<p>有关减少创建时间方法，参考blog：</p>
<pre><code>            如何加快建 index 索引 的时间

            [http://blog.csdn.net/tianlesoftware/archive/2010/07/11/5664019.aspx](http://blog.csdn.net/tianlesoftware/archive/2010/07/11/5664019.aspx)
</code></pre><hr>
<p>总结：</p>
<p>使用并行方式，不论是创建表，修改表，创建索引，重建索引，他们的机制都是一样的，那就是Oracle 给每个并行服务进程分配一块空间，每个进程在自己的空间里处理数据，最后将处理完毕的数据汇总，完成SQL的操作。</p>
<p>5.3 并行DML 操作</p>
<pre><code>            Oracle 可以对DML操作使用并行执行，但是有很多限制。 如果我们要让DML 操作使用并行执行，必须显示地在会话里执行如下命令：

            SQL&gt; alter session enable parallel dml;
</code></pre><p>会话已更改。</p>
<pre><code>            只有执行了这个操作，Oracle 才会对之后符合并行条件的DML操作并行执行，如果没有这个设定，即使SQL中指定了并行执行，Oracle也会忽略它。
</code></pre><p>5.3.1 delete，update和merge 操作</p>
<pre><code>            Oracle 对Delete,update,merge的操作限制在，只有操作的对象是分区表示，Oracle 才会启动并行操作。原因在于，对于分区表，Oracle 会对每个分区启用一个并行服务进程同时进行数据处理，这对于非分区表来说是没有意义的。
</code></pre><p>5.3.2 Insert 的并行操作</p>
<pre><code>            实际上只有对于insert into … select … 这样的SQL语句启用并行才有意义。 对于insert into .. values… 并行没有意义，因为这条语句本身就是一个单条记录的操作。



            Insert 并行常用的语法是：

                            Insert //*+parallel(t 2) /*/ into t select //*+parallel(t1 2) /*/ /* from t1;



            这条SQL 语句中，可以让两个操作insert 和select 分别使用并行，这两个并行是相互独立，互补干涉的，也可以单独使用其中的一个并行。
</code></pre><p>六． 并行执行的设定</p>
<p>6.1 并行相关的初始话参数</p>
<p>6.1.1 parallel_min_servers=n</p>
<pre><code>            在初始化参数中设置了这个值，Oracle 在启动的时候就会预先启动N个并行服务进程，当SQL执行并行操作时，并行协调进程首先根据并行度的值，在当前已经启动的并行服务中条用n个并行服务进程，当并行度大于n时，Oracle将启动额外的并行服务进程以满足并行度要求的并行服务进程数量。
</code></pre><p>6.1.2 parallel_max_servers=n</p>
<pre><code>            如果并行度的值大于parallel_min_servers或者当前可用的并行服务进程不能满足SQL的并行执行要求，Oracle将额外创建新的并行服务进程，当前实例总共启动的并行服务进程不能超过这个参数的设定值。
</code></pre><p>6.1.3 parallel_adaptive_multi_user=true|false</p>
<pre><code>            Oracle 10g R2下，并行执行默认是启用的。 这个参数的默认值为true，它让Oracle根据SQL执行时系统的负载情况，动态地调整SQL的并行度，以取得最好的SQL    执行性能。
</code></pre><p>6.1.4 parallel_min_percent</p>
<pre><code>            这个参数指定并行执行时，申请并行服务进程的最小值，它是一个百分比，比如我们设定这个值为50. 当一个SQL需要申请20个并行进程时，如果当前并行服务进程不足，按照这个参数的要求，这个SQL比如申请到20/*50%=10个并行服务进程，如果不能够申请到这个数量的并行服务，SQL 将报出一个ORA-12827的错误。

            当这个值设为Null时，表示所有的SQL在做并行执行时，至少要获得两个并行服务进程。
</code></pre><p>6.2 并行度的设定</p>
<pre><code>            并行度可以通过以下三种方式来设定：
</code></pre><p>（1）使用Hint 指定并行度。</p>
<p>（2）使用alter session force parallel 设定并行度。</p>
<p>（3）使用SQL中引用的表或者索引上设定的并行度，原则上Oracle 使用这些对象中并行度最高的那个值作为当前执行的并行度。</p>
<p>示例：</p>
<pre><code>            SQL&gt;Select //*+parallel(t 4) /*/ count(/*) from t;

            SQL&gt;Alter table t parallel 4;

            SQL&gt;Alter session force parallel query parallel 4;
</code></pre><p>Oracle 默认并行度计算方式：</p>
<p>（1）Oracle 根据CPU的个数，RAC实例的个数以及参数parallel_threads_per_cpu的值，计算出一个并行度。</p>
<p>（2）对于并行访问分区操作，取需要访问的分区数为并行度。</p>
<p>并行度的优先级别从高到低：</p>
<pre><code>            Hint-&gt;alter session force parallel-&gt;表，索引上的设定-&gt; 系统参数
</code></pre><p>实际上，并行只有才系统资源比较充足的情况下，才会取得很好的性能，如果系统负担很重，不恰当的设置并行，反而会使性能大幅下降。</p>
<p>七． 直接加载</p>
<pre><code>            在执行数据插入或者数据加载的时候，可以通过append hint的方式进行数据的直接加载。
</code></pre><p>在insert 的SQL中使用APPEND，如：</p>
<pre><code>                            Insert //*+append /*/ into t select /* from t1;
</code></pre><p>还可以在SQL/*LOADER里面使用直接加载：</p>
<pre><code>   Sqlldr userid=user/pwd control=load.ctl direct=true
</code></pre><p>Oracle 执行直接加载时，数据直接追加到数据段的最后，不需要花费时间在段中需找空间，数据不经过data buffer直接写到数据文件中，效率要比传统的加载方式高。</p>
<p>示例：</p>
<p>SQL&gt; create table t as select /* from user_tables;</p>
<p>表已创建。</p>
<p>SQL&gt; select segment_name,extent_id,bytes from user_extents where segment_name=&#39;T&#39;;</p>
<p>SEGMENT_NA  EXTENT_ID      BYTES</p>
<hr>
<p>T                   0      65536</p>
<p>T                   1      65536</p>
<p>T                   2      65536</p>
<p>T                   3      65536</p>
<p>T                   4      65536</p>
<p>这里我们创建了一张表，分配了5个extents。</p>
<p>SQL&gt; delete from t;</p>
<p>已删除979行。</p>
<p>SQL&gt; select segment_name,extent_id,bytes from user_extents where segment_name=&#39;T&#39;;</p>
<p>SEGMENT_NA  EXTENT_ID      BYTES</p>
<hr>
<p>T                   0      65536</p>
<p>T                   1      65536</p>
<p>T                   2      65536</p>
<p>T                   3      65536</p>
<p>T                   4      65536</p>
<p>这里删除了表里的数据，但是查询，依然占据5个extents。因为delete不会收缩表空间，不能降低高水位。</p>
<p>SQL&gt; insert into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>SQL&gt; commit;</p>
<p>提交完成。</p>
<p>SQL&gt; select segment_name,extent_id,bytes from user_extents where segment_name=&#39;T&#39;;</p>
<p>SEGMENT_NA  EXTENT_ID      BYTES</p>
<hr>
<p>T                   0      65536</p>
<p>T                   1      65536</p>
<p>T                   2      65536</p>
<p>T                   3      65536</p>
<p>T                   4      65536</p>
<p>用传统方式插入，数据被分配到已有的空闲空间里。</p>
<p>SQL&gt; delete from t;</p>
<p>已删除980行。</p>
<p>SQL&gt; commit;</p>
<p>提交完成。</p>
<p>SQL&gt; select segment_name,extent_id,bytes from user_extents where segment_name=&#39;T&#39;;</p>
<p>SEGMENT_NA  EXTENT_ID      BYTES</p>
<hr>
<p>T                   0      65536</p>
<p>T                   1      65536</p>
<p>T                   2      65536</p>
<p>T                   3      65536</p>
<p>T                   4      65536</p>
<p>删除数据，用append直接插入看一下。</p>
<p>SQL&gt; insert //<em>+append /</em>/ into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>SQL&gt; commit;</p>
<p>提交完成。</p>
<p>SQL&gt; select segment_name,extent_id,bytes from user_extents where segment_name=&#39;T&#39;;</p>
<p>SEGMENT_NA  EXTENT_ID      BYTES</p>
<hr>
<p>T                   0      65536</p>
<p>T                   1      65536</p>
<p>T                   2      65536</p>
<p>T                   3      65536</p>
<p>T                   4      65536</p>
<p>T                   5      65536</p>
<p>T                   6      65536</p>
<p>T                   7      65536</p>
<p>T                   8      65536</p>
<p>T                   9      65536</p>
<p>已选择10行。</p>
<p>从结果可以看出，直接加载方式时，虽然表中有很多空的数据块，Oracle 仍然会额外的分配4个extent用于直接加载数据。</p>
<pre><code>            直接加载的数据放在表的高水位（High water Mark：hwm）以上，当直接加载完成后，Oracle 将表的高水位线移到新加入的数据之后，这样新的数据就可以被用户使用了。
</code></pre><p>Oracle 高水位(HWM)</p>
<p><a href="http://blog.csdn.net/tianlesoftware/archive/2009/10/22/4707900.aspx" target="_blank"><a href="http://blog.csdn.net/tianlesoftware/archive/2009/10/22/4707900.aspx">http://blog.csdn.net/tianlesoftware/archive/2009/10/22/4707900.aspx</a></a></p>
<p>7.1 直接加载和REDO</p>
<pre><code>            直接加载在logging模式下，与传统加载方式产生的redo 日志差别不大，因为当一个表有logging属性时，即使使用直接加载，所有改变的数据依然要产生redo，实际上是所有修改的数据块全部记录redo，以便于以后的恢复，这时候直接加载并没有太大的优势。



            直接加载最常见的是和nologging一起使用，这时候可以有效地减少redo 的生成量。 注意的是，在这种情况下，直接加载的数据块是不产生redo的，只有一些其他改变的数据产生一些redo，比如表空间分配需要修改字典表或者修改段头数据块，这些修改会产生少量的redo。



            实际上，对于nologging 方式的直接加载，undo 的数据量也产生的很少，因为直接加载的数据并不会在回滚段中记录，这些记录位于高水位之上，在事务提交之前，对于其他用户来说是不可见的，所以不需要产生undo，事务提交时，Oracle 将表的高水位线移到新的数据之后，如果事务回滚，只需要保持高水位线不动即可，就好像什么都没有发生一样。



            注意，由于在nologging模式下，redo 不记录数据修改的信息，所以直接加载完后，需要立即进行相关的备份操作，因为这些数据没有记录在归档日志中，一旦数据损坏，只能用备份来恢复，而不能使用归档恢复。
</code></pre><p>Logging模式下示例：</p>
<p>SQL&gt; set autot trace stat;</p>
<p>SQL&gt; insert //<em>+append /</em>/ into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>    132  recursive calls

     87  db block gets

   8967  consistent gets

      0  physical reads

 286572  redo size

    911  bytes sent via SQL/*Net to client

   1017  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      2  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>SQL&gt; rollback;</p>
<p>回退已完成。</p>
<p>SQL&gt; insert into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>      0  recursive calls

    144  db block gets

   9027  consistent gets

      0  physical reads

 267448  redo size

    927  bytes sent via SQL/*Net to client

   1004  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      2  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>Nologging模式下示例：</p>
<p>SQL&gt; alter table t nologging;</p>
<p>表已更改。</p>
<p>SQL&gt; insert into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>    239  recursive calls

    132  db block gets

   9061  consistent gets

      0  physical reads

 262896  redo size

    927  bytes sent via SQL/*Net to client

   1004  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      7  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>SQL&gt; rollback;</p>
<p>回退已完成。</p>
<p>SQL&gt; insert //<em>+append /</em>/ into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>      8  recursive calls

     40  db block gets

   8938  consistent gets

      0  physical reads

    340  redo size  -- redo 减少很多

    911  bytes sent via SQL/*Net to client

   1017  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      2  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>这部分内容也可参考Blog：</p>
<pre><code>            Oracle DML NOLOGGING
</code></pre><p><a href="http://blog.csdn.net/tianlesoftware/archive/2010/07/11/5701596.aspx" target="_blank"><a href="http://blog.csdn.net/tianlesoftware/archive/2010/07/11/5701596.aspx">http://blog.csdn.net/tianlesoftware/archive/2010/07/11/5701596.aspx</a></a></p>
<p>7.2 直接加载和索引</p>
<pre><code>            如果直接加载的表上有索引，Oracle不会像加载数据的方式那样来处理索引的数据，但是它同样需要维护一个索引，这个成本很高，同时会生成很多的redo。

            所以当使用直接加载时，通常是针对一些数据量非常大的表。如果这些表存在索引，将会带来很大的性能影响，这时可以考虑先将索引disable或者drop掉，等加载数据后，之后在重新建立索引。
</code></pre><p>nologging示例：</p>
<p>SQL&gt; insert //<em>+append /</em>/ into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>      0  recursive calls

     40  db block gets

   8936  consistent gets

      0  physical reads

    384  redo size

    911  bytes sent via SQL/*Net to client

   1017  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      2  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>SQL&gt; rollback;</p>
<p>回退已完成。</p>
<p>SQL&gt; create index t_ind on t(table_name);</p>
<p>索引已创建。</p>
<p>SQL&gt; insert //<em>+append /</em>/ into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>     40  recursive calls

    170  db block gets

   8955  consistent gets

      4  physical reads

 149424  redo size

    911  bytes sent via SQL/*Net to client

   1017  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      3  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>SQL&gt; rollback;</p>
<p>回退已完成。</p>
<p>SQL&gt; insert  into t select /* from user_tables;</p>
<p>已创建980行。</p>
<p>统计信息</p>
<hr>
<pre><code>      8  recursive calls

    828  db block gets

   9037  consistent gets

      0  physical reads

 382832  redo size

    927  bytes sent via SQL/*Net to client

   1005  bytes received via SQL/*Net from client

      4  SQL/*Net roundtrips to/from client

      2  sorts (memory)

      0  sorts (disk)

    980  rows processed
</code></pre><p>SQL&gt; rollback;</p>
<p>回退已完成。</p>
<p>7.3 直接加载和并行</p>
<pre><code>            直接加载可以和并行执行一同使用，这样可以并行地向表中插入数据。 如：
</code></pre><p>SQL&gt;alter session enable parallel dml;  -- 这里必须显示的申明</p>
<p>SQL&gt;insert //<em>+append parallel(t,2) /</em>/ into t select /* from t1;</p>
<p>SQL&gt;insert //<em>+append /</em>/ into t select /* from t1;</p>
<p>注：在对insert 使用并行时，Oracle自动使用直接加载的方式进行数据加载，所以在这种情况下append是可以省略的。</p>
<pre><code>            当使用并行加载时，Oracle 会按照并行度启动相应数量的并行服务进程，像串行执行的直接加载的方式一样，每个并行服务进程都单独分配额外的空间用于加载数据，实际上Oracle 为每个并行服务进程分配了一个临时段，每个并行服务进程将数据首先加载到各自的临时段上，当所有的并行进程执行完毕后，将各自的数据块合并到一起，放到高水位之后，如果事务提交，则将高水位移到新加载的数据之后。
</code></pre><p>7.4 直接加载和SQL/*LOADER</p>
<pre><code>            在SQL/*LOADER中也可以使用直接加载，它比传统方式效率更高，因为它绕开了SQL的解析和数据缓冲区，直接将数据加载到数据文件，这对OLAP或者数据仓库系统非常有用。
</code></pre><p>指定加载：</p>
<pre><code>            Sqlldr userid=user/pwd control=control.ctl direct=true
</code></pre><p>指定并行和加载：</p>
<pre><code>            Sqlldr userid=user/pwd control=control.ctl direct=true parallel=true
</code></pre><p>SQL/*LOADER直接加载对索引的影响：</p>
<p>（1）索引为非约束性，直接加载可以在加载完毕后维护索引的完整性。</p>
<p>（2）索引为约束性索引，比如主键，直接加载仍然会将数据加载入库，但是会将索引置为unusable.</p>
<p>如果使用SQL/*LOADER的并行直接加载选项，并且表上有索引，将导致加载失败，这是我们可以在sqlloader中指定skip_index_maintenance=true, 来允许加载完成，但是索引状态会变成unusable，需要手工rebuild.</p>
<p>关于SQL/*LOADER的更多内容，参考blog：</p>
<pre><code>            Oracle SQL Loader

            [http://blog.csdn.net/tianlesoftware/archive/2009/10/16/4674063.aspx](http://blog.csdn.net/tianlesoftware/archive/2009/10/16/4674063.aspx)
</code></pre><hr>
<p>整理自《让Oracle 跑的更快》</p>
<hr>
<p>Blog： <a href="http://blog.csdn.net/tianlesoftware" target="_blank">http://blog.csdn.net/tianlesoftware</a></p>
<p>网上资源： <a href="http://tianlesoftware.download.csdn.net" target="_blank">http://tianlesoftware.download.csdn.net</a></p>
<p>相关视频：<a href="http://blog.csdn.net/tianlesoftware/archive/2009/11/27/4886500.aspx" target="_blank">http://blog.csdn.net/tianlesoftware/archive/2009/11/27/4886500.aspx</a></p>
<p>DBA1 群：62697716(满); DBA2 群：62697977(满)</p>
<p>DBA3 群：63306533;     聊天 群：40132017
分享到： <a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a></p>
<ul>
<li>上一篇：<a href="http://blog.csdn.net/tianlesoftware/article/details/5852106" target="_blank">Oracle 索引扫描的五种类型</a></li>
<li>下一篇：<a href="http://blog.csdn.net/tianlesoftware/article/details/5856430" target="_blank">Oracle 绑定变量 详解</a>
查看评论<a href=""></a></li>
</ul>
<p>7楼 <a href="http://blog.csdn.net/tiankui6658" target="_blank">tiankui6658</a> 2013-03-31 11:16发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/tiankui6658" target="_blank"><img src="" alt=""></a>简直就是官方教材啊6楼 <a href="http://blog.csdn.net/syzcch" target="_blank">syzcch</a> 2012-10-16 13:05发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/syzcch" target="_blank"><img src="" alt=""></a>总结的很到位啊5楼 <a href="http://blog.csdn.net/syzcch" target="_blank">syzcch</a> 2012-09-13 14:18发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/syzcch" target="_blank"><img src="" alt=""></a>| 0 | SELECT STATEMENT | | 107 | 2782 | 3 (34) | | |
| 1 | PX COORDINATOR | | | | | | |
| 2 | PX SEND QC (RANDOM) | :TQ10001 | 107 | 2782 | 3 (34) | Q1,01 | P-&gt;S | QC (RAND) |
| 3 | HASH GROUP BY | | 107 | 2782 | 3 (34) | Q1,01 | PCWP |
| 4 | PX RECEIVE | | 107 | 2782 | 3 (34) | Q1,01 | PCWP | |
| 5 | PX SEND HASH | :TQ10000 | 107 | 2782 | 3 (34) | Q1,00 | P-&gt;P | HASH
| 6 | HASH GROUP BY | | 107 | 2782 | 3 (34) | Q1,00 | PCWP |
| 7 | PX BLOCK ITERATOR | | 107 | 2782 | 2 (0) | Q1,00 | PCWP |
| 8 | TABLE ACCESS FULL| EMP2 | 107 | 2782 | 2 (0) | Q1,00 | PCWP |
在这个例子中，我觉得是有两组并行服务进程，分别用Q1，00和Q1,01来标注的吧 比如paralle（degree 4） 说明Q1,00是4个进程在跑，而Q1,01也是4个，他们的关系类似于生产者和消费者，请问这样理解对吗？ 谢谢！4楼 <a href="http://blog.csdn.net/scogeek" target="_blank">我个名叫麦兜_sco</a> 2012-02-14 15:44发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/scogeek" target="_blank"><img src="" alt=""></a>有空希望能把你的文章看完...3楼 <a href="http://blog.csdn.net/aimingl" target="_blank">aimingl</a> 2011-09-21 09:55发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/aimingl" target="_blank"><img src="" alt=""></a>牛人，顶一下；再学习。。。2楼 <a href="http://blog.csdn.net/gaopengtttt" target="_blank">gaopengtttt</a> 2011-07-20 11:56发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/gaopengtttt" target="_blank"><img src="" alt=""></a>bu cuo o1楼 <a href="http://blog.csdn.net/fendou1314" target="_blank">fendou1314</a> 2011-06-22 23:58发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/fendou1314" target="_blank"><img src="" alt=""></a>[e01][e01][e01][e03]
太棒了@！
您还没有登录,请<a href="">[登录]</a>或<a href="http://passport.csdn.net/account/register?from=http%3A%2F%2Fblog.csdn.net%2Ftianlesoftware%2Farticle%2Fdetails%2F5854583" target="_blank">[注册]</a></p>
<p>/* 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场<a href=""></a><a href=""></a>
<a href="&quot;回到顶部&quot;"><img src="" alt="TOP"></a></p>
<p>个人资料</p>
<p><a href="http://my.csdn.net/tianlesoftware" target="_blank"><img src="&quot;访问我的空间&quot;" alt=""></a>
<a href="http://my.csdn.net/tianlesoftware" target="_blank">Dave</a></p>
<p><a href="&quot;[加关注]&quot;"></a> <a href="&quot;[发私信]&quot;"></a>
<a href="http://medal.blog.csdn.net/allmedal.aspx" target="_blank"><img src="" alt=""></a><a href="http://medal.blog.csdn.net/allmedal.aspx" target="_blank"><img src="" alt=""></a><a href="http://medal.blog.csdn.net/allmedal.aspx" target="_blank"><img src="" alt=""></a></p>
<ul>
<li>访问：4265571次</li>
<li>积分：49439分</li>
<li><p>排名：第13名</p>
</li>
<li><p>原创：1009篇</p>
</li>
<li>转载：96篇</li>
<li>译文：1篇</li>
<li>评论：1481条</li>
</ul>
<p>文章搜索</p>
<p><a href=""></a></p>
<p>Dave&#39;s Links</p>
<ul>
<li>QQ:251097186</li>
<li>Email:tianlesoftware@gmail.com</li>
<li>Skype:tianlesoftware</li>
<li><a href="http://cn.linkedin.com/in/tianlesoftware" target="_blank">My LinkedIn</a></li>
<li><a href="http://www.facebook.com/tianlesoftware" target="_blank">My FaceBook</a></li>
<li><a href="http://twitter.com/tianlesoftware" target="_blank">My Twitter</a></li>
<li><a href="http://weibo.com/tianlesoftware" target="_blank">My Sina Weibo</a></li>
<li><a href="http://t.qq.com/tianlesoftware" target="_blank">My Tencent Weibo</a></li>
<li><p><a href="http://tongji.linezing.com/mystat.html" target="_blank">LineZing</a>
文章分类</p>
</li>
<li><p><a href="http://blog.csdn.net/tianlesoftware/article/category/684508" target="_blank">Dave 随笔</a>(39)</p>
</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/679087" target="_blank">Oracle Troubleshooting</a>(186)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/1092236" target="_blank">My Blog Summary</a>(14)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/1154895" target="_blank">Tools &amp; Scripts</a>(11)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/746816" target="_blank">IBM AIX</a>(35)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/569752" target="_blank">Linux</a>(96)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/668414" target="_blank">Storage</a>(19)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/657796" target="_blank">Network</a>(9)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/811179" target="_blank">MySQL</a>(14)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/915216" target="_blank">Oracle Exadata</a>(0)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/1076473" target="_blank">Oracle 12c</a>(1)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/799909" target="_blank">Oracle ASM</a>(85)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/700326" target="_blank">Oracle Data Guard</a>(38)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/776328" target="_blank">Oracle Golden Gate</a>(21)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/700327" target="_blank">Oracle RAC</a>(110)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/697504" target="_blank">Oracle RMAN</a>(45)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/729879" target="_blank">Oracle Stream</a>(2)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/804599" target="_blank">Oracle Timesten</a>(0)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/569751" target="_blank">Oracle Basic Knowledge</a>(222)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/706520" target="_blank">Oracle Advanced Knowledge</a>(190)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/698471" target="_blank">Oracle Backup &amp; Recovery</a>(14)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/719638" target="_blank">Oracle Developer</a>(22)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/714767" target="_blank">Oracle Certification</a>(9)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/668807" target="_blank">Oracle Performance</a>(87)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/category/1169693" target="_blank">System Architecture</a>(1)</li>
</ul>
<p>文章存档</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/08" target="_blank">2013年08月</a>(3)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/07" target="_blank">2013年07月</a>(8)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/06" target="_blank">2013年06月</a>(5)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/05" target="_blank">2013年05月</a>(1)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/04" target="_blank">2013年04月</a>(3)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/03" target="_blank">2013年03月</a>(7)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/02" target="_blank">2013年02月</a>(5)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2013/01" target="_blank">2013年01月</a>(4)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/12" target="_blank">2012年12月</a>(15)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/11" target="_blank">2012年11月</a>(23)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/10" target="_blank">2012年10月</a>(7)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/09" target="_blank">2012年09月</a>(5)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/08" target="_blank">2012年08月</a>(3)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/07" target="_blank">2012年07月</a>(21)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/06" target="_blank">2012年06月</a>(16)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/05" target="_blank">2012年05月</a>(9)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/04" target="_blank">2012年04月</a>(5)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/03" target="_blank">2012年03月</a>(26)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/02" target="_blank">2012年02月</a>(34)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2012/01" target="_blank">2012年01月</a>(7)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/12" target="_blank">2011年12月</a>(29)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/11" target="_blank">2011年11月</a>(37)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/10" target="_blank">2011年10月</a>(34)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/09" target="_blank">2011年09月</a>(26)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/08" target="_blank">2011年08月</a>(24)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/07" target="_blank">2011年07月</a>(34)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/06" target="_blank">2011年06月</a>(45)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/05" target="_blank">2011年05月</a>(20)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/04" target="_blank">2011年04月</a>(96)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/03" target="_blank">2011年03月</a>(52)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/02" target="_blank">2011年02月</a>(30)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2011/01" target="_blank">2011年01月</a>(53)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/12" target="_blank">2010年12月</a>(56)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/11" target="_blank">2010年11月</a>(42)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/10" target="_blank">2010年10月</a>(23)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/09" target="_blank">2010年09月</a>(29)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/08" target="_blank">2010年08月</a>(26)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/07" target="_blank">2010年07月</a>(26)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/06" target="_blank">2010年06月</a>(22)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/05" target="_blank">2010年05月</a>(18)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/04" target="_blank">2010年04月</a>(24)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/03" target="_blank">2010年03月</a>(25)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/02" target="_blank">2010年02月</a>(11)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2010/01" target="_blank">2010年01月</a>(14)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2009/12" target="_blank">2009年12月</a>(25)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2009/11" target="_blank">2009年11月</a>(30)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/month/2009/10" target="_blank">2009年10月</a>(47)</li>
</ul>
<p>展开
国外技术链接</p>
<ul>
<li><a href="http://www.ixora.com.au/notes/" target="_blank">ixora</a></li>
<li><a href="http://dioncho.wordpress.com/" target="_blank">dioncho</a></li>
<li><a href="http://www.oradba.ch/" target="_blank">OraDBA</a></li>
<li><a href="http://gavinsoorma.com/" target="_blank">Gavin Soorma</a></li>
<li><a href="http://www.oracle-base.com/" target="_blank">oracle-base</a></li>
<li><a href="http://www.oracle-developer.net/" target="_blank">oracle-developer</a></li>
<li><a href="http://www.databasejournal.com/" target="_blank">databasejournal</a></li>
<li><a href="http://www.juliandyke.com/" target="_blank">Julian Dyke</a></li>
<li><a href="http://jonathanlewis.wordpress.com/" target="_blank">Jonathan Lewis(Oracle Core)</a></li>
<li><a href="http://www.oracle-scripts.net/" target="_blank">oracle-scripts</a></li>
<li><a href="http://www.oaktable.net/" target="_blank">oaktable</a></li>
</ul>
<p>官网链接</p>
<ul>
<li><a href="https://edelivery.oracle.com/" target="_blank">E-Delivery</a></li>
<li><a href="http://public-yum.oracle.com/" target="_blank">Oracle Public-Yum</a></li>
<li><a href="http://tahiti.oracle.com/" target="_blank">Oracle Documents</a></li>
<li><a href="http://dev.mysql.com/doc/" target="_blank">MySQL Documents</a></li>
<li><a href="http://download.oracle.com/docs/cd/E22355_01/index.htm" target="_blank">GG Documents</a></li>
<li><a href="http://www.oracle.com/technology/deploy/security/alerts.htm" target="_blank">ORACLE CPU（Critical Patch Update）</a></li>
<li><a href="http://wiki.oracle.com/page/Patchset Number Overview" target="_blank">Patchset Number Overview</a></li>
<li><a href="http://www.oracle.com/technology/software/products/database/index.html" target="_blank">Oracle 10g/11g 下载</a></li>
<li><a href="http://www.unix-center.net/" target="_blank">Unix-Center</a></li>
<li><a href="http://www.ibm.com/developerworks/library/" target="_blank">IBM Technical library</a></li>
<li><a href="http://www-900.ibm.com/cn/support/viewdoc/knowledgebase" target="_blank">IBM 技术知识库</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/aix/aixcert/" target="_blank">IBM AIX 认证专题</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/" target="_blank">IBM DeveloperWorks</a></li>
<li><a href="http://www.idevelopment.info/" target="_blank">idevelopment</a></li>
<li><p><a href="http://education.oracle.com/education/otn/" target="_blank">OCM 查询</a>
国内技术链接</p>
</li>
<li><p><a href="http://warehouse.itpub.net/" target="_blank">warehouse</a></p>
</li>
<li><a href="http://dbsnake.com/" target="_blank">dbsnake</a></li>
<li><a href="http://www.eygle.com/" target="_blank">eygle</a></li>
<li><a href="http://www.dbanotes.net/" target="_blank">冯大辉(Fenng)</a></li>
<li><a href="http://www.hellodb.net/" target="_blank">HelloDBA</a></li>
<li><a href="http://www.dbform.com/" target="_blank">Kamus</a></li>
<li><a href="http://hi.baidu.com/edeed/blog" target="_blank">骨骨</a></li>
<li><a href="http://space.itpub.net/7199859/spacelist-blog" target="_blank">paul</a></li>
<li><a href="http://www.killdb.com/" target="_blank">Roger</a></li>
<li><a href="http://www.oracledatabase12g.com/" target="_blank">Maclean</a></li>
<li><a href="http://www.laoxiong.net/" target="_blank">老 熊</a></li>
<li><a href="http://tomszrp.itpub.net/" target="_blank">Tomas Zhang</a></li>
<li><a href="http://www.ixora.com.au/notes/" target="_blank">ixora</a></li>
<li><a href="http://tianlesoftware.wordpress.com/" target="_blank">tianlesoftware</a></li>
<li><a href="http://www.anysql.net/" target="_blank">d.c.b.a</a></li>
<li><a href="http://www.xifenfei.com/" target="_blank">xifenfei</a></li>
<li><a href="http://www.ludatou.com/" target="_blank">Ludatou</a></li>
<li><a href="http://blog.csdn.net/robinson1988" target="_blank">robinson1988</a></li>
<li><a href="http://isky000.com/" target="_blank">简朝阳</a></li>
<li><a href="http://www.mysqlops.com/" target="_blank">mysqlops</a></li>
<li><a href="http://www.zhihong.org/" target="_blank">数据工人（boypoo）</a></li>
<li><a href="http://www.database-consultant.net/" target="_blank">Jerry Wu</a></li>
<li><a href="http://www.mythdata.com/" target="_blank">文本时代</a></li>
<li><a href="http://www.d-zero.com.cn/" target="_blank">d-zero</a></li>
<li><a href="http://blog.csdn.net/huangchao_sky" target="_blank">道道</a></li>
<li><a href="http://blog.csdn.net/laven54" target="_blank">邓伟</a></li>
</ul>
<p>最新评论</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/5547565#comments" target="_blank">Oracle Data Guard Linux 平台 Physical Standby 搭建实例</a></li>
</ul>
<p><a href="http://blog.csdn.net/wdnq1022" target="_blank">SP1022</a>: 大哥，在主库执行startup pfile=&#39;/home/oracle/product/10.2.0...</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/9468081#comments" target="_blank">2013年7月22日 匆匆</a></li>
</ul>
<p><a href="http://blog.csdn.net/chen0032" target="_blank">暖爱_晨</a>: @chen0032:如果细想这个世界什么东西跟我们有关，那就只有感激每天的生活</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/9468081#comments" target="_blank">2013年7月22日 匆匆</a></li>
</ul>
<p><a href="http://blog.csdn.net/chen0032" target="_blank">暖爱_晨</a>: 被突然的非技术类文章吸引，便决定关注lz!一篇在旅途的文章，一段追梦的旅程，一份难以割舍的亲情，一个...</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/4976998#comments" target="_blank">Oracle Rman 命令详解(List report backup configure)</a></li>
</ul>
<p><a href="http://blog.csdn.net/bule2011orange" target="_blank">bule2011orange</a>: 很详细，谢谢dave</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/9468081#comments" target="_blank">2013年7月22日 匆匆</a></li>
</ul>
<p><a href="http://blog.csdn.net/houxp666" target="_blank">houxp666</a>: 文笔真不错，淡而美</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/7241488#comments" target="_blank">Oracle Data Guard 支持的异构平台 说明</a></li>
</ul>
<p><a href="http://blog.csdn.net/enward" target="_blank">Enward</a>: 很好，很强大，学些了</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/7335660#comments" target="_blank">Dave Oracle 学习 手册 第一版 下载 说明</a></li>
</ul>
<p><a href="http://blog.csdn.net/Theven" target="_blank">Theven</a>: @mn900809:哦？我还是下载完，不能打开。你那个要是能打开，给我发一份吧！邮箱：aolin.w...</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/7335660#comments" target="_blank">Dave Oracle 学习 手册 第一版 下载 说明</a></li>
</ul>
<p><a href="http://blog.csdn.net/mn900809" target="_blank">mn900809</a>: 我下载下来了 您现在有没？ 需要给您发送一份么？</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/5642883#comments" target="_blank">Linux 下挂载硬盘的 方法</a></li>
</ul>
<p><a href="http://blog.csdn.net/u010148545" target="_blank">已经擦肩而过</a>: 不错啊，但有的我的自启动怎么是这样的啊？UUID=f5c84165-6890-470f-b731-d...</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/8741873#comments" target="_blank">Linux SWAP 交换分区配置说明</a></li>
</ul>
<p><a href="http://blog.csdn.net/zhanglu668" target="_blank">zhanglu668</a>: @liyoubaidu:swap就是交换的意思，这里都指的是交换分区。
阅读排行</p>
<ul>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/4915223" title="Oracle 字符集的查看和修改" target="_blank">Oracle 字符集的查看和修改</a>(118984)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/5315039" title="Linux Crontab 定时任务 命令详解" target="_blank">Linux Crontab 定时任务 命令详解</a>(108658)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/5347098" title="Oracle  索引 详解" target="_blank">Oracle 索引 详解</a>(38296)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/6278273" title="Linux awk 命令 说明" target="_blank">Linux awk 命令 说明</a>(33921)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/4699320" title="RMAN 备份与恢复 实例" target="_blank">RMAN 备份与恢复 实例</a>(29596)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/4787074" title="有关 ORA-00604 错误的总结" target="_blank">有关 ORA-00604 错误的总结</a>(28877)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/4717318" title="Oracle 分区表  总结" target="_blank">Oracle 分区表 总结</a>(26157)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/4682300" title="Oracle AWR（Automatic Workload Repository） 说明" target="_blank">Oracle AWR（Automatic Workload Repository） 说明</a>(25712)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/5872593" title="Redhat 5.4 + ASM + RAW+ Oracle 10g  RAC 安装文档" target="_blank">Redhat 5.4 + ASM + RAW+ Oracle 10g RAC 安装文档</a>(24895)</li>
<li><a href="http://blog.csdn.net/tianlesoftware/article/details/5314541" title="Oracle ASM 详解" target="_blank">Oracle ASM 详解</a>(22268)</li>
</ul>
<p><a href="http://www.csdn.net/company/about.html" target="_blank">公司简介</a>|<a href="http://www.csdn.net/company/recruit.html" target="_blank">招贤纳士</a>|<a href="http://www.csdn.net/company/marketing.html" target="_blank">广告服务</a>|<a href="http://www.csdn.net/company/account.html" target="_blank">银行汇款帐号</a>|<a href="http://www.csdn.net/company/contact.html" target="_blank">联系方式</a>|<a href="http://www.csdn.net/company/statement.html" target="_blank">版权声明</a>|<a href="http://www.csdn.net/company/layer.html" target="_blank">法律顾问</a>|<a href="mailto:webmaster@csdn.net">问题报告</a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=2355263776&amp;site=qq&amp;menu=yes" target="_blank">QQ客服</a> <a href="http://e.weibo.com/csdnsupport/profile" target="_blank">微博客服</a> <a href="http://bbs.csdn.net/forums/Service" target="_blank">论坛反馈</a> <a href="mailto:webmaster@csdn.net">联系邮箱：webmaster@csdn.net</a> 服务热线：400-600-2320京 ICP 证 070598 号北京创新乐知信息技术有限公司 版权所有世纪乐知(北京)网络技术有限公司 提供技术支持江苏乐知网络技术有限公司 提供商务支持Copyright © 1999-2012, CSDN.NET, All Rights Reserved <a href="http://www.hd315.gov.cn/beian/view.asp?bianhao=010202001032100010" target="_blank"><img src="" alt="GongshangLogo"></a>
<img src="http://counter.csdn.net/pv.aspx?id=24" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/oracle/">oracle</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/oracle/" class="label label-success">oracle</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:34"datetime="2014-03-07 09:54:34"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-oracle--OracleParallelExecution并行执行/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-oracle--OracleParallelExecution并行执行" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB--PostgreSQL8_4在中文windows下安装错误/">PostgreSQL 8_4 在中文 windows 下安装错误</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:34.000Z"> <a href="/2014/02/02/2014-02-02-DB--PostgreSQL8_4在中文windows下安装错误/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="postgresql-8_4-windows-">PostgreSQL 8_4 在中文 windows 下安装错误</h1>
<h1 id="-goldenhawking-http-blog-csdn-net-goldenhawking-"><a href="http://blog.csdn.net/goldenhawking" target="_blank">goldenhawking的专栏</a></h1>
<h1 id="-">#</h1>
<ul>
<li><a href="http://passport.csdn.net/UserLogin.aspx" target="_blank">登录</a></li>
<li><a href="http://passport.csdn.net/CSDNUserRegister.aspx" target="_blank">注册</a></li>
<li><a href="http://hi.csdn.net/" target="_blank">欢迎</a></li>
<li><a href="http://writeblog.csdn.net/Signout.aspx" target="_blank">退出</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">我的博客</a></li>
<li><a href="http://writeblog.csdn.net/configure.aspx" target="_blank">配置</a></li>
<li><a href="http://writeblog.csdn.net/PostEditPlain.aspx" target="_blank">写文章</a></li>
<li><a href="http://writeblog.csdn.net/PostList.aspx" target="_blank">文章管理</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">博客首页</a></li>
</ul>
<p>*</p>
<ul>
<li><p>全站 当前博客
*</p>
</li>
<li><p><a href="http://hi.csdn.net/goldenhawking" target="_blank">空间</a></p>
</li>
<li><a href="http://blog.csdn.net/goldenhawking" target="_blank">博客</a></li>
<li><a href="http://hi.csdn.net/!s/friend/list/goldenhawking" target="_blank">好友</a></li>
<li><a href="http://hi.csdn.net/!s/album/list/goldenhawking" target="_blank">相册</a></li>
<li><a href="http://hi.csdn.net/!s/wall/to/goldenhawking" target="_blank">留言</a></li>
</ul>
<p>用户操作<a href="http://hi.csdn.net/!s/wall/to/goldenhawking" target="_blank">[留言]</a>  <a href="http://hi.csdn.net/!s/msg/to/goldenhawking" target="_blank">[发消息]</a>  <a href="http://hi.csdn.net/!s/friend/add/goldenhawking" target="_blank">[加为好友]</a> 订阅我的博客<a href="http://feeds.feedsky.com/csdn.net/goldenhawking" target="_blank"><img src="" alt="XML聚合"></a>   <a href="http://feeds.feedsky.com/csdn.net/goldenhawking" target="_blank"><img src="" alt="FeedSky"></a><a href="http://www.xianguo.com/subscribe.php?url=http://feeds.feedsky.com/csdn.net/goldenhawking" target="_blank"><img src="" alt="订阅到鲜果"></a><a href="http://fusion.google.com/add?feedurl=http://feeds.feedsky.com/csdn.net/goldenhawking" target="_blank"><img src="" alt="订阅到Google"></a><a href="http://www.zhuaxia.com/add_channel.php?url=http://feeds.feedsky.com/csdn.net/goldenhawking" target="_blank"><img src="" alt="订阅到抓虾"></a>goldenhawking的公告文章分类存档* <a href="http://blog.csdn.net/goldenhawking/archive/2009/08.aspx" target="_blank">2009年08月(3)</a></p>
<ul>
<li><a href="http://blog.csdn.net/goldenhawking/archive/2008/04.aspx" target="_blank">2008年04月(1)</a></li>
<li><a href="http://blog.csdn.net/goldenhawking/archive/2008/02.aspx" target="_blank">2008年02月(1)</a><h1 id="-postgresql-8-4-windows-"><img src="" alt="原创">  PostgreSQL 8.4 在中文 windows 下安装错误 <a href="&quot;收藏到我的网摘中，并分享给我的朋友&quot;">收藏</a></h1>
</li>
</ul>
<p>这个错误是在安装新版的PostgreSQL 8.4时遇到的，安装程序在 windows xp sp3下启动（简体中文），一路Next, 没注意“locale”选项，当时选择了default,next, 导致无法安装完成，提示：</p>
<p>Installation fails with complaint about accessing data\postgresql.conf
发现这个老兄也遇到了：</p>
<p><a href="http://www.nabble.com/BUG--4785%3A-Installation-fails-to23323059.html#a23323059" target="_blank"><a href="http://www.nabble.com/BUG--4785%3A-Installation-fails-to23323059.html/#a23323059">http://www.nabble.com/BUG--4785%3A-Installation-fails-to23323059.html/#a23323059</a></a></p>
<p>搞半天，最后发现了问题，是PSQL的全文搜索中没有简体中文支持。其实，安装的时候选择&quot;C&quot;就可以了。</p>
<p>哎，看来我和开源数据库最近老扯不清关系。</p>
<p>这是在nabble上的帖子。
En, I have that damm problem sloved.
Are you using a Non-English Version of Windows? for example, JPN, CHS?
If you install your PSQL in an Asian-language windows, be sure that &quot;locale&quot; settings should be setted manualy to a supported language, I choosed &quot;C&quot; for it is the first item in the combo.
this is the errmsg when you&#39;re using default local settings:
Running the post-installation/upgrade actions:
Delete the temporary scripts directory...
Write the base directory to the ini file...
Write the version number to the ini file...
Initialising the database cluster (this may take a few minutes)...
Executing cscript
Script exit code: 0
Script output:
Ensuring we can write to the data directory (using cacls):
数据无效。(Means data is unavaliable)
The files belonging to this database system will be owned by user &quot;XXXXXXXX&quot;.
This user must also own the server process.
The database cluster will be initialized with locale Chinese_XXXXXXX.936.
initdb: could not find suitable text search configuration for locale Chinese_XXXXXXX.936
The default text search configuration will be set to &quot;simple&quot;.
fixing permissions on existing directory D:/XXXXXX... ok
creating subdirectories ... ok
selecting default max_connections ... 100
selecting default shared_buffers ... 32MB
creating configuration files ... ok
creating template1 database in D:/XXXXXXX/base/1 ... ok
initializing pg_authid ... FATAL:  database locale is incompatible with operating system
DETAIL:  The database was initialized with LC_COLLATE &quot;Chinese_XXXXXXXX.936&quot;,  which is not recognized by setlocale().
HINT:  Recreate the database with another locale or install the missing locale.
child process exited with exit code 1
initdb: removing contents of data directory &quot;D:/XXXXXX&quot;
Granting service account access to the data directory (using cacls):
处理的目录: D:\XXXXXXXXX(Processed folder:D:\XXXXXXXXX)
initcluster.vbs ran to completion
Script stderr:
Configuring database server startup...
Executing cscript
Script exit code: 0
Script output:
startupcfg.vbs ran to completion
Script stderr:</p>
<p>发表于 @ 2009年08月05日　12:44:00 | <a href="http://blog.csdn.net/goldenhawking/archive/2009/08/05/4411446.aspx#FeedBack" title="评论" target="_blank">评论( loading...  )</a>| <a href="http://writeblog.csdn.net/PostEdit.aspx?entryId=4411446" title="编辑" target="_blank">编辑</a>| <a href="mailto:yuexn@csdn.net?subject=Article%20Report!!!&amp;body=Author:goldenhawking%0D%0AURL:http://blog.csdn.net/ArticleContent.aspx?UserName=goldenhawking&amp;Entryid=4411446">举报</a>| <a href="&quot;收藏到我的网摘中，并分享给我的朋友&quot;">收藏</a></p>
<h3 id="-my-sql-http-blog-csdn-net-goldenhawking-archive-2009-08-05-4411395-aspx-"><a href="http://blog.csdn.net/goldenhawking/archive/2009/08/05/4411395.aspx" target="_blank">旧一篇:初试My-SQL</a><a href=""></a></h3>
<p>Copyright © goldenhawkingPowered by CSDN Blog<img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:34"datetime="2014-03-07 09:54:34"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB--PostgreSQL8_4在中文windows下安装错误/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB--PostgreSQL8_4在中文windows下安装错误" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-oracle--Oraclenotin查不到应有的结果2/">Oracle not in查不到应有的结果 (2)</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:34.000Z"> <a href="/2014/02/02/2014-02-02-DB-oracle--Oraclenotin查不到应有的结果2/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="oracle-not-in-2-">Oracle not in查不到应有的结果 (2)</h1>
<p><a href="http://g.live.com/9uxp9en-us/hdr_main1??su=http://shared.live.com/" target="_blank"><img src="" alt="Windows Live">Windows Live™</a></p>
<ul>
<li><a href="http://g.live.com/9uxp9en-us/hdr_main1??su=http://shared.live.com/Live.Spaces" target="_blank">Home</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_main2??su=http://shared.live.com/Live.Spaces" target="_blank">Profile</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_main3??su=http://shared.live.com/Live.Spaces" target="_blank">People</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_main4??su=http://shared.live.com/Live.Spaces" target="_blank">Mail</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_main5??su=http://shared.live.com/Live.Spaces" target="_blank">Photos</a></li>
<li><p><a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#" target="_blank">More ▼</a></p>
</li>
<li><p><a href="http://g.live.com/9uxp9en-us/hdr_main6??su=http://shared.live.com/Live.Spaces" target="_blank">Calendar</a></p>
</li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more12??su=http://shared.live.com/Live.Spaces" target="_blank">Events</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more2??su=http://shared.live.com/Live.Spaces" target="_blank">SkyDrive</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more1??su=http://shared.live.com/Live.Spaces" target="_blank">Groups</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more11??su=http://shared.live.com/Live.Spaces" target="_blank">Spaces</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more4??su=http://shared.live.com/Live.Spaces" target="_blank">Family Safety</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more6??su=http://shared.live.com/Live.Spaces" target="_blank">Mobile</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more5??su=http://shared.live.com/Live.Spaces" target="_blank">Downloads</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more9??su=http://shared.live.com/Live.Spaces" target="_blank">Office Live</a></li>
<li><a href="http://g.live.com/9uxp9en-us/hdr_more13??su=http://shared.live.com/Live.Spaces" target="_blank">All services</a></li>
<li><p><a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#" target="_blank">MSN ▼</a></p>
</li>
<li><p><a href="http://g.live.com/9uxp9msn/mhm-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Home</a></p>
</li>
<li><a href="http://g.live.com/9uxp9msn/mau-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Autos</a></li>
<li><a href="http://g.live.com/9uxp9msn/mga-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Games</a></li>
<li><a href="http://g.live.com/9uxp9msn/mmo-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Money</a></li>
<li><a href="http://g.live.com/9uxp9msn/mmv-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Movies</a></li>
<li><a href="http://g.live.com/9uxp9msn/mmu-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Music</a></li>
<li><a href="http://g.live.com/9uxp9msn/mnw-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">News</a></li>
<li><a href="http://g.live.com/9uxp9msn/msp-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Sports</a></li>
<li><p><a href="http://g.live.com/9uxp9msn/mwe-en-us??su=http://shared.live.com/Live.Spaces" target="_blank">Weather</a>
Search People or web</p>
</li>
<li><p><a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#" target="_blank">Search People</a></p>
</li>
<li><a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#" target="_blank">Search the web</a>
<a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#" target="_blank"><img src="&quot;Search&quot;" alt="Search"></a>
<a href="http://login.live.com/login.srf?wa=wsignin1.0&amp;rpsnv=11&amp;ct=1269518164&amp;rver=5.5.4177.0&amp;wp=MBI&amp;wreply=http:%2F%2Fx-spirit.spaces.live.com%2Fblog%2Fcns!CC0B04AE126337C0!844.entry%3F&amp;lc=1033&amp;id=73625&amp;mkt=en-US" target="_blank">Sign in</a><a href="http://login.live.com/login.srf?wa=wsignin1.0&amp;rpsnv=11&amp;ct=1269518164&amp;rver=5.5.4177.0&amp;wp=MBI&amp;wreply=http:%2F%2Fx-spirit.spaces.live.com%2Fblog%2Fcns!CC0B04AE126337C0!844.entry%3F&amp;lc=1033&amp;id=73625&amp;mkt=en-US" target="_blank"><img src="" alt=""></a></li>
</ul>
<p><a href="http://cid-cc0b04ae126337c0.profile.live.com/" target="_blank">威&#39;s profile</a><a href="http://x-spirit.spaces.live.com/default.aspx" target="_blank">X-Spirit</a><a href="http://cid-cc0b04ae126337c0.skydrive.live.com/albums.aspx" target="_blank">Photos</a><a href="http://x-spirit.spaces.live.com/blog/" target="_blank">Blog</a><a href="http://cid-cc0b04ae126337c0.profile.live.com/Lists/" target="_blank">Lists</a><a href="http://x-spirit.spaces.live.com/" target="_blank">More <img src="" alt=""></a></p>
<ul>
<li><a href="http://x-spirit.spaces.live.com/guestbook/" target="_blank">Guestbook</a></li>
<li><p><a href="http://people.live.com/?rru=friends%3fcid%3dcc0b04ae126337c0" target="_blank">Network</a>
<a href="http://x-spirit.spaces.live.com/" target="_blank"><img src="" alt=""> Tools <img src="" alt=""></a></p>
</li>
<li><p><a href="http://spaces.live.com/api.aspx?wx_action=sendMessage&amp;wxp_toCid=-3743893519549122624&amp;wx_ru=http%3a%2f%2fx-spirit.spaces.live.com%2fblog%2fcns!CC0B04AE126337C0!844.entry" target="_blank">Send a private message</a></p>
</li>
<li><a href="http://cid-cc0b04ae126337c0.users.api.live.net/Users(-3743893519549122624" target="_blank">Subscribe to RSS feed</a>/Main?$format=rss20)</li>
<li><a href="mailto:?subject=http://x-spirit.spaces.live.com/&amp;body=http://x-spirit.spaces.live.com/">Tell a friend</a></li>
<li><a href="http://my.msn.com/addtomymsn.armx?id=rss&amp;ut=http%3a%2f%2fcid-cc0b04ae126337c0.users.api.live.net%2fUsers%28-3743893519549122624%29%2fMain%3f%24format%3drss20&amp;ru=http%3a%2f%2fx-spirit.spaces.live.com%2f" target="_blank">Add to My MSN</a></li>
<li><a href="http://www.live.com/?add=http://cid-cc0b04ae126337c0.users.api.live.net/Users(-3743893519549122624" target="_blank">Add to Live.com</a>/Main?$format=rss20)</li>
<li><a href="http://profile.live.com/connect/send.aspx?cid=0xcc0b04ae126337c0&amp;scontext=0&amp;name=&amp;ru=http%3a%2f%2fx-spirit.spaces.live.com%2fblog%2fcns%21CC0B04AE126337C0%21844.entry" target="_blank">Add to your network</a></li>
<li><a href="http://signup.alerts.live.com/alerts/userSignup.do?partner=spaces&amp;ut=http://x-spirit.spaces.live.com/feed.rss&amp;mkt=en-us&amp;returnURL=http%3a%2f%2fx-spirit.spaces.live.com%2fblog%2fcns!CC0B04AE126337C0!844.entry" target="_blank">Sign up for alerts</a>
<a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#" target="_blank">Help</a></li>
</ul>
<h2 id="blog">Blog</h2>
<ul>
<li>[<img src="" alt=""></li>
</ul>
<p>Entries
](<a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart" target="_blank">http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart</a>)</p>
<ul>
<li>[<img src="" alt=""></li>
</ul>
<p>Summary
](<a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=summary&amp;_c=BlogPart" target="_blank">http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=summary&amp;_c=BlogPart</a>)
Listed by:  Date Category</p>
<ul>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d3%26ayear%3d2010" title="View all entries published during this time period" target="_blank">March 2010</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d2%26ayear%3d2010" title="View all entries published during this time period" target="_blank">February 2010</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d1%26ayear%3d2010" title="View all entries published during this time period" target="_blank">January 2010</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d12%26ayear%3d2009" title="View all entries published during this time period" target="_blank">December 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d11%26ayear%3d2009" title="View all entries published during this time period" target="_blank">November 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d10%26ayear%3d2009" title="View all entries published during this time period" target="_blank">October 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d9%26ayear%3d2009" title="View all entries published during this time period" target="_blank">September 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d8%26ayear%3d2009" title="View all entries published during this time period" target="_blank">August 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d7%26ayear%3d2009" title="View all entries published during this time period" target="_blank">July 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d6%26ayear%3d2009" title="View all entries published during this time period" target="_blank">June 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d5%26ayear%3d2009" title="View all entries published during this time period" target="_blank">May 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d4%26ayear%3d2009" title="View all entries published during this time period" target="_blank">April 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d3%26ayear%3d2009" title="View all entries published during this time period" target="_blank">March 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d2%26ayear%3d2009" title="View all entries published during this time period" target="_blank">February 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d1%26ayear%3d2009" title="View all entries published during this time period" target="_blank">January 2009</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d12%26ayear%3d2008" title="View all entries published during this time period" target="_blank">December 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d11%26ayear%3d2008" title="View all entries published during this time period" target="_blank">November 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d10%26ayear%3d2008" title="View all entries published during this time period" target="_blank">October 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d9%26ayear%3d2008" title="View all entries published during this time period" target="_blank">September 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d8%26ayear%3d2008" title="View all entries published during this time period" target="_blank">August 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d7%26ayear%3d2008" title="View all entries published during this time period" target="_blank">July 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d6%26ayear%3d2008" title="View all entries published during this time period" target="_blank">June 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d5%26ayear%3d2008" title="View all entries published during this time period" target="_blank">May 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d4%26ayear%3d2008" title="View all entries published during this time period" target="_blank">April 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d3%26ayear%3d2008" title="View all entries published during this time period" target="_blank">March 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d2%26ayear%3d2008" title="View all entries published during this time period" target="_blank">February 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d1%26ayear%3d2008" title="View all entries published during this time period" target="_blank">January 2008</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d12%26ayear%3d2007" title="View all entries published during this time period" target="_blank">December 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d11%26ayear%3d2007" title="View all entries published during this time period" target="_blank">November 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d10%26ayear%3d2007" title="View all entries published during this time period" target="_blank">October 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d9%26ayear%3d2007" title="View all entries published during this time period" target="_blank">September 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d8%26ayear%3d2007" title="View all entries published during this time period" target="_blank">August 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d7%26ayear%3d2007" title="View all entries published during this time period" target="_blank">July 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d6%26ayear%3d2007" title="View all entries published during this time period" target="_blank">June 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d5%26ayear%3d2007" title="View all entries published during this time period" target="_blank">May 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d4%26ayear%3d2007" title="View all entries published during this time period" target="_blank">April 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d3%26ayear%3d2007" title="View all entries published during this time period" target="_blank">March 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d2%26ayear%3d2007" title="View all entries published during this time period" target="_blank">February 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d1%26ayear%3d2007" title="View all entries published during this time period" target="_blank">January 2007</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d12%26ayear%3d2006" title="View all entries published during this time period" target="_blank">December 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d11%26ayear%3d2006" title="View all entries published during this time period" target="_blank">November 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d10%26ayear%3d2006" title="View all entries published during this time period" target="_blank">October 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d9%26ayear%3d2006" title="View all entries published during this time period" target="_blank">September 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d8%26ayear%3d2006" title="View all entries published during this time period" target="_blank">August 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d7%26ayear%3d2006" title="View all entries published during this time period" target="_blank">July 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d6%26ayear%3d2006" title="View all entries published during this time period" target="_blank">June 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d5%26ayear%3d2006" title="View all entries published during this time period" target="_blank">May 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d4%26ayear%3d2006" title="View all entries published during this time period" target="_blank">April 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d3%26ayear%3d2006" title="View all entries published during this time period" target="_blank">March 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d2%26ayear%3d2006" title="View all entries published during this time period" target="_blank">February 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d1%26ayear%3d2006" title="View all entries published during this time period" target="_blank">January 2006</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d12%26ayear%3d2005" title="View all entries published during this time period" target="_blank">December 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d11%26ayear%3d2005" title="View all entries published during this time period" target="_blank">November 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d10%26ayear%3d2005" title="View all entries published during this time period" target="_blank">October 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d9%26ayear%3d2005" title="View all entries published during this time period" target="_blank">September 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d8%26ayear%3d2005" title="View all entries published during this time period" target="_blank">August 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d7%26ayear%3d2005" title="View all entries published during this time period" target="_blank">July 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d6%26ayear%3d2005" title="View all entries published during this time period" target="_blank">June 2005</a></li>
<li><a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=amonth%3d5%26ayear%3d2005" title="View all entries published during this time period" target="_blank">May 2005</a> *    <a href="http://x-spirit.spaces.live.com/blog/cns!CC0B04AE126337C0!829.entry" title="Go to: Linux下面利用crontab来实现mysql数据库的定时备份" target="_blank">&lt; Previous</a>   <a href="http://x-spirit.spaces.live.com/blog/cns!CC0B04AE126337C0!845.entry" title="Go to: Oracle数据库导入命令，导出换成exp就可以了" target="_blank">Next &gt;</a></li>
</ul>
<p>Sorry, your entry can&#39;t be deleted right now. Please try again later.</p>
<p>January 25</p>
<h3 id="oracle-not-in-">Oracle not in查不到应有的结果</h3>
<p>首先我要感谢aa和Liu Xing帮我发现了我日志中的错误。之前比较粗心，把3条SQL语句写成一样的了，对于给读者造成的麻烦，我深表抱歉。
今天我把原文做了修订，为了对得起读者对我的关注，我重新深入的研究了这个问题，在后面，我会把来龙去脉写清楚。
<em>问题：
语句1：
</em></p>
<p><em>Select /</em> from  table1 A where A.col1 not in ( select col1 from table2 B )
<em>
</em>如果这样，本来应该有一条数据，结果没有。
如果我改写成这样：
语句2：
*</p>
<p><em>select /</em> from table1 A where not exists (SELECT /<em> FROM table2 B where B.col1 = A.col1)</em>
<em>结果就正确，有一条数据显示。
经过一番搜索，原以为是子查询结果集太大的原因。</em> <em>后来有网上强人指点：子查询里面有空集。即子查询的结果集里面有NULL的结果。</em> <em>把查询语句修改成：**语句3：
</em></p>
<p><em>Select /</em> from  table1 A where A.col1 not in ( select col1 from table2 B where B.col1 is not null )
<em>
</em>果然就查出来了。而且一点不差。。。厉害阿～～～<em>
下面是针对本文题的分析：
1。 首先来说说Oracle中的NULL。
Oracle中的NULL代表的是无意义，或者没有值。将NULL和其他的值进行逻辑运算，运算过程中，NULL的表现更象是FALSE。
下面请看真值表：
 AND NULL
  OR NULL  TRUE  NULL  TRUE  FALSE  FALSE  NULL  NULL  NULL
  NULL
另外，NULL和其他的值进行比较或者算术运算（&lt;、&gt;、=、!=、+、-、/</em>、/），结果仍是NULL。
如果想要判定某个值是否为NULL，可以用IS NULL或者IS NOT NULL。</p>
<ol>
<li>再来说说Oracle中的IN。
in是一个成员条件, 对于给定的一个集合或者子查询,它会比较每一个成员值。
IN功能上相当于 =ANY 的操作，而NOT IN 功能上相当于 !=ALL 的操作。
IN在逻辑上实际上就是对给定的成员集合或者子查询结果集进行逐条的判定，例如：
SELECT /<em> FROM table1 A WHERE A.col1 in (20,50,NULL);实际上就是执行了
SELECT /</em> FROM table1 A WHERE A.col1=20 OR A.col1=50 OR A.col1=NULL;这样，根据NULL的运算特点和真值表，我们可以看出，上边这个WHERE 字句可以被简化(如果返回NULL则无结果集返回，这一点和FALSE是一样的)为
WHERE A.col1=20 OR A.col1=50也就是说，如果你的table1中真的存在含有NULL值的col1列，则执行该语句，无法查询出那些值为null的记录。
再来看看NOT IN。根据逻辑运算关系，我们知道，NOT (X=Y OR N=M) 等价于 X!=Y AND N!=M，那么：
SELECT /<em> FROM table1 A WHERE A.col1 not in (20,50,NULL)等价于
SELECT /</em> FROM table1 A WHERE A.col1!=20 AND A.col1!=50 AND A.col1!=NULL根据NULL的运算特性和真值表，该语句无论前两个判定条件是否为真，其结果一定是NULL或者FALSE。故绝对没有任何记录可以返回。
这就是为什么语句1查不到应有结果的原因。当然，如果你用NOT IN的时候，预先在子查询里把NULL去掉的话，那就没问题了，例如语句3。
有些童鞋可能要问了：那如果我想把A表里面那些和B表一样col1列的值一样的记录都查出来，即便A、B两表里面的col1列都包括值为NULL的记录的话，用这一条语句就没办法了吗？
我只能很遗憾的告诉你，如果你想在WHERE后面单纯用IN 似乎不太可能了，当然，你可以在外部的查询语句中将NULL条件并列进去，例如：
SELECT /* FROM table1 A WHERE A.col1 in (SELECT B.col1 FROM table2 B) OR A.col1 IS NULL;</li>
<li>最后谈谈EXISTS。
有人说EXISTS的性能比IN要好。但这是很片面的。我们来看看EXISTS的执行过程：
select /<em> from t1 where exists ( select /</em> from t2 where t2.col1 = t1.col1 )相当于：
for x in ( select /<em> from t1 )
loop
   if ( exists ( select /</em> from t2 where t2.col1 = x.col1 )
   then<pre><code>  OUTPUT THE RECORD in x
</code></pre>   end if
end loop
也就是说，EXISTS语句实际上是通过循环外部查询的结果集，来过滤出符合子查询标准的结果集。于是外部查询的结果集数量对该语句执行性能影响最大，故如果外部查询的结果集数量庞大，用EXISTS语句的性能也不一定就会好很多。
当然，有人说NOT IN是对外部查询和子查询都做了全表扫描，如果有索引的话，还用不上索引，但是NOT EXISTS是做连接查询，所以，如果连接查询的两列都做了索引，性能会有一定的提升。
当然至于实际的查询效率，我想还是具体情况具体分析吧。
那么我们不妨来分析一下语句2为什么能够的到正确的结果吧：
语句2是这样的：**</li>
</ol>
<p><em>select /</em> from table1 A where not exists (SELECT B.col1 FROM table2 B where B.col1 = A.col1)<em>
实际上是这样的执行过程：
for x in ( select /</em> from table1 A )
   loop
      if (not exists ( select /<em> from table2 B where B.col1 = x.col1 )
      then
         OUTPUT THE RECORD in x
      end if
end loop
由于表A中不包含NULL的记录，所以，遍历完表A，也只能挑出表A中独有的记录。
这就是为什么语句2能够完成语句3的任务的原因。
但如果表A中存在NULL记录而表B中不存在呢？
这个问题请大家自己分析吧。哈哈。有答案了可以给我留言哦。
答案：A表中的NULL也会被查出来。因为select /</em> from table2 B where B.col1 = NULL不返回结果，故
not exists ( select /* from table2 B where B.col1 = x.col1 )的值为真。
以上SQL运行结果在MySQL和Oracle上都已经通过。</p>
<p>11:33 AM | <a href="&quot;Blog about this entry in your space&quot;">Blog it</a> | <a href="http://x-spirit.spaces.live.com/?_c11_BlogPart_BlogPart=blogview&amp;_c=BlogPart&amp;partqs=cat%3d%25e8%25ae%25a1%25e7%25ae%2597%25e6%259c%25ba%25e4%25b8%258e%2520Internet" title="Show all entries for this category" target="_blank">计算机与 Internet</a></p>
<p><a href=""></a><a href="http://x-spirit.spaces.live.com/mmm2009-09-01_09.47/#"></a></p>
<h3 id="comments-1-">Comments (1)</h3>
<p>Please wait...</p>
<p>Sorry, the comment you entered is too long. Please shorten it.
You didn&#39;t enter anything. Please try again.</p>
<p>Sorry, we can&#39;t add your comment right now. Please try again later.
To add a comment, you need permission from your parent. <a href="https://fss.live.com/krl/AddContact.aspx?Rurl=http%3a%2f%2fx-spirit.spaces.live.com%2fblog%2fcns%21CC0B04AE126337C0%21844.entry%23comment" target="_blank">Ask for permission</a></p>
<p>Your parent has turned off comments.
Sorry, we can&#39;t delete your comment right now. Please try again later.</p>
<p>You&#39;ve exceeded the maximum number of comments that can be left in one day. Please try again in 24 hours.
Your account has had the ability to leave comments disabled because our systems indicate that you may be spamming other users. If you believe that your account has been disabled in error please contact <a href="http://support.live.com/eform.aspx?productKey=wlspaces&amp;ct=eformts" target="_blank">Windows Live support</a>.</p>
<p>Complete the security check below to finish leaving your comment.
The characters you type in the security check must match the characters in the picture or audio.
To add a comment, sign in with your Windows Live ID (if you use Hotmail, Messenger, or Xbox LIVE, you have a Windows Live ID). <a href="http://login.live.com/login.srf?wa=wsignin1.0&amp;rpsnv=11&amp;ct=1269518164&amp;rver=5.5.4177.0&amp;wp=MBI&amp;wreply=http:%2F%2Fx-spirit.spaces.live.com%2Fblog%2Fcns!CC0B04AE126337C0!844.entry&amp;lc=1033&amp;id=73625" target="_blank">Sign in</a></p>
<p>Don&#39;t have a Windows Live ID? <a href="https://signup.live.com/signup.aspx?ID=62862&amp;mkt=en-US&amp;RU=http%3a%2f%2fx-spirit.spaces.live.com%2fblog%2fcns%21CC0B04AE126337C0%21844.entry&amp;RX=http%3a%2f%2fx-spirit.spaces.live.com%2fblog%2fcns%21CC0B04AE126337C0%21844.entry&amp;cp=1" target="_blank">Sign up</a> <a href="http://cid-09e46a4d043ff077.profile.live.com/" title="Picture of Xing Liu" target="_blank"><img src="" alt="Picture of Xing Liu"></a></p>
<p><img src="" alt="Picture of Xing Liu"> <a href="http://cid-09e46a4d043ff077.profile.live.com/" title="Xing Liu" target="_blank">Xing Liu</a>wrote:</p>
<p>这几个命令行怎么都一样啊?</p>
<p>Feb. 11</p>
<h3 id="trackbacks">Trackbacks</h3>
<p>The trackback URL for this entry is:</p>
<p><a href="http://x-spirit.spaces.live.com/blog/cns!CC0B04AE126337C0!844.trak" target="_blank">http://x-spirit.spaces.live.com/blog/cns!CC0B04AE126337C0!844.trak</a>
Weblogs that reference this entry</p>
<ul>
<li>None</li>
<li><a href="http://g.live.com/9uxp9en-us/ftr1" target="_blank">© 2010 Microsoft</a></li>
<li><a href="http://go.microsoft.com/fwlink/?LinkId=74170" target="_blank">Privacy</a></li>
<li><a href="http://g.msn.com/0TO_/enus" target="_blank">Terms of use</a><ul>
<li><a href="http://help.live.com/help.aspx?mkt=en-us&amp;project=tou&amp;querytype=keyword&amp;query=coc" target="_blank">Code of Conduct</a></li>
</ul>
</li>
<li><a href="http://support.live.com/default.aspx?productKey=WLSpacesAbuse" target="_blank">Report Abuse</a></li>
<li><a href="http://help.live.com/help.aspx?mkt=en-us&amp;project=WL_Spacesv3&amp;querytype=keyword&amp;query=spitpot&amp;format=b1" target="_blank">Safety</a></li>
<li><a href="http://g.live.com/9uxp9en-us/ftr3" target="_blank">Account</a></li>
<li><a href="http://g.live.com/9uxp9en-us/ftr4?productkey=WLSpaces" target="_blank">Feedback</a>    <img src="" alt=""><img src="" alt=""></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/oracle/">oracle</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/oracle/" class="label label-success">oracle</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:34"datetime="2014-03-07 09:54:34"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-oracle--Oraclenotin查不到应有的结果2/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-oracle--Oraclenotin查不到应有的结果2" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-oracle--SQLLoader学习小记命令行参考/">SQL Loader学习小记(命令行参考)</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:34.000Z"> <a href="/2014/02/02/2014-02-02-DB-oracle--SQLLoader学习小记命令行参考/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="sql-loader-">SQL Loader学习小记(命令行参考)</h1>
<p>SQL Loader 命令行参考
   Command line Sample:
   SQLLDR CONTROL=sample.ctl, LOG=sample.log, BAD=baz.bad, DATA=etc.dat
   USERID=scott/tiger, ERRORS=999, LOAD=2000, DISCARD=toss.dsc,
   DISCARDMAX=5
   常用的keywords:
userid     -- orACLE username/password
control    -- control file name
log        -- log file name
bad        -- bad file name
data       -- data file name
discard    -- discard file name
discardmax -- number of discards to allow (Default all)
skip       -- number of logical records to skip (Default 0)
load       -- number of logical records to load (Default all)
errors     -- number of errors to allow (Default 50)(允许出错的记录数)
rows       -- number of rows in conventional path bind array or between direct path data saves
               (Default: Conventional path 64, Direct path all)(每次提交的记录数)
bindsize   -- size of conventional path bind array in bytes (Default 256000)
silent     -- suppress messages during run (header,feedback,errors,discards,partitions)(是否显示load信息)
direct     -- use direct path (Default FALSE)
parfile    -- parameter file: name of file that contains parameter specifications
parallel   -- do parallel load (Default FALSE)
file       -- file to allocate extents from
skip_unusable_indexes  -- disallow/allow unusable indexes or index partitions(Default FALSE)
skip_index_maintenance -- do not maintain indexes, mark affected indexes as unusable (Default FALSE)
commit_discontinued    -- commit loaded rows when load is discontinued (Default FALSE)
readsize           -- size of read buffer (Default 1048576)
external_table     -- use external table for load; NOT_USED, GENERATE_ONLY, EXECUTE (Default NOT_USED)
columnarrayrows    -- number of rows for direct path column array (Default 5000)
streamsize         -- size of direct path stream buffer in bytes (Default 256000)
multithreading     -- use multithreading in direct path
resumable          -- enable or disable resumable for current session (Default FALSE)
resumable_name     -- text string to help identify resumable statement
resumable_timeout  -- wait time (in seconds) for RESUMABLE (Default 7200)
date_cache         -- size (in entries) of date conversion cache (Default 1000)
    上述大部分的参数定义可以入在control file中的option里。
    执行结果返回代码
All rows loaded successfully      EX_SUCC
All or some rows rejected      EX_WARN
All or some rows discarded      EX_WARN
Discontinued load EX_WARN
Command-line or syntax errors      EX_FAIL
oracle errors nonrecoverable for SQL/*Loader    EX_FAIL
Operating system errors (such as file open/close and malloc)  EX_FAIL
    For UNIX, the exit codes are as follows:
EX_SUCC 0
EX_FAIL 1
EX_WARN 2
EX_FTL  3</p>
<p>来源： <a href="[http://www.wudongqi.com/article/540.htm](http://www.wudongqi.com/article/540.htm)">[http://www.wudongqi.com/article/540.htm](http://www.wudongqi.com/article/540.htm)</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/oracle/">oracle</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/oracle/" class="label label-success">oracle</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:34"datetime="2014-03-07 09:54:34"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-oracle--SQLLoader学习小记命令行参考/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-oracle--SQLLoader学习小记命令行参考" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB--面向程序员的数据库访问性能优化法则-数据库/">面向程序员的数据库访问性能优化法则</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:34.000Z"> <a href="/2014/02/02/2014-02-02-DB--面向程序员的数据库访问性能优化法则-数据库/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-">面向程序员的数据库访问性能优化法则-数据库</h1>
<pre><code>      面向程序员的数据库访问性能优化法则   火龙果软件    发布于 2013-8-28   引言
</code></pre><p>在网上有很多文章介绍数据库优化知识，但是大部份文章只是对某个一个方面进行说明，而对于我们程序员来说这种介绍并不能很好的掌握优化知识，因为很多介绍只是对一些特定的场景优化的，所以反而有时会产生误导或让程序员感觉不明白其中的奥妙而对数据库优化感觉很神秘。</p>
<p>很多程序员总是问如何学习数据库优化，有没有好的教材之类的问题。在书店也看到了许多数据库优化的专业书籍，但是感觉更多是面向DBA或者是PL/SQL开发方面的知识，个人感觉不太适合普通程序员。而要想做到数据库优化的高手，不是花几周，几个月就能达到的，这并不是因为数据库优化有多高深，而是因为要做好优化一方面需要有非常好的技术功底，对操作系统、存储硬件网络、数据库原理等方面有比较扎实的基础知识，另一方面是需要花大量时间对特定的数据库进行实践测试与总结。</p>
<p>作为一个程序员，我们也许不清楚线上正式的服务器硬件配置，我们不可能像DBA那样专业的对数据库进行各种实践测试与总结，但我们都应该非常了解我们SQL的业务逻辑，我们清楚SQL中访问表及字段的数据情况，我们其实只关心我们的SQL是否能尽快返回结果。那程序员如何利用已知的知识进行数据库优化？如何能快速定位SQL性能问题并找到正确的优化方向？</p>
<p>面对这些问题，笔者总结了一些面向程序员的基本优化法则，本文将结合实例来坦述数据库开发的优化知识。</p>
<p>一、数据库访问优化法则简介</p>
<p>要正确的优化SQL，我们需要快速定位能性的瓶颈点，也就是说快速找到我们SQL主要的开销在哪里？而大多数情况性能最慢的设备会是瓶颈点，如下载时网络速度可能会是瓶颈点，本地复制文件时硬盘可能会是瓶颈点，为什么这些一般的工作我们能快速确认瓶颈点呢，因为我们对这些慢速设备的性能数据有一些基本的认识，如网络带宽是2Mbps，硬盘是每分钟7200转等等。因此，为了快速找到SQL的性能瓶颈点，我们也需要了解我们计算机系统的硬件基本性能指标，下图展示的当前主流计算机性能指标数据。</p>
<p><img src="" alt=""></p>
<p>从图上可以看到基本上每种设备都有两个指标：</p>
<p>延时（响应时间）：表示硬件的突发处理能力；</p>
<p>带宽（吞吐量）：代表硬件持续处理能力。</p>
<p>从上图可以看出，计算机系统硬件性能从高到代依次为：</p>
<p>CPU——Cache(L1-L2-L3)——内存——SSD硬盘——网络——硬盘</p>
<p>由于SSD硬盘还处于快速发展阶段，所以本文的内容不涉及SSD相关应用系统。</p>
<p>根据数据库知识，我们可以列出每种硬件主要的工作内容：</p>
<p>CPU及内存：缓存数据访问、比较、排序、事务检测、SQL解析、函数或逻辑运算；</p>
<p>网络：结果数据传输、SQL请求、远程数据库访问（dblink）；</p>
<p>硬盘：数据访问、数据写入、日志记录、大数据量排序、大表连接。</p>
<p>根据当前计算机硬件的基本性能指标及其在数据库中主要操作内容，可以整理出如下图所示的性能基本优化法则：</p>
<p><img src="" alt=""></p>
<p>这个优化法则归纳为5个层次：</p>
<p>1、 减少数据访问（减少磁盘访问）</p>
<p>2、 返回更少数据（减少网络传输或磁盘访问）</p>
<p>3、 减少交互次数（减少网络传输）</p>
<p>4、 减少服务器CPU开销（减少CPU及内存开销）</p>
<p>5、 利用更多资源（增加资源）</p>
<p>由于每一层优化法则都是解决其对应硬件的性能问题，所以带来的性能提升比例也不一样。传统数据库系统设计是也是尽可能对低速设备提供优化方法，因此针对低速设备问题的可优化手段也更多，优化成本也更低。我们任何一个SQL的性能优化都应该按这个规则由上到下来诊断问题并提出解决方案，而不应该首先想到的是增加资源解决问题。</p>
<p>以下是每个优化法则层级对应优化效果及成本经验参考：</p>
<p><img src="" alt=""></p>
<p>接下来，我们针对5种优化法则列举常用的优化手段并结合实例分析。</p>
<p>二、Oracle数据库两个基本概念</p>
<p>数据块(Block)</p>
<p>数据块是数据库中数据在磁盘中存储的最小单位，也是一次IO访问的最小单位，一个数据块通常可以存储多条记录，数据块大小是DBA在创建数据库或表空间时指定，可指定为2K、4K、8K、16K或32K字节。下图是一个Oracle数据库典型的物理结构，一个数据库可以包括多个数据文件，一个数据文件内又包含多个数据块；</p>
<p><img src="" alt=""></p>
<p>ROWID</p>
<p>ROWID是每条记录在数据库中的唯一标识，通过ROWID可以直接定位记录到对应的文件号及数据块位置。ROWID内容包括文件号、对像号、数据块号、记录槽号，如下图所示：</p>
<p><img src="" alt=""></p>
<p>三、数据库访问优化法则详解</p>
<p>1、减少数据访问</p>
<p>1.1、创建并使用正确的索引</p>
<p>数据库索引的原理非常简单，但在复杂的表中真正能正确使用索引的人很少，即使是专业的DBA也不一定能完全做到最优。</p>
<p>索引会大大增加表记录的DML(INSERT,UPDATE,DELETE)开销，正确的索引可以让性能提升100，1000倍以上，不合理的索引也可能会让性能下降100倍，因此在一个表中创建什么样的索引需要平衡各种业务需求。
索引常见问题：</p>
<p>索引有哪些种类？</p>
<p>常见的索引有B-TREE索引、位图索引、全文索引，位图索引一般用于数据仓库应用，全文索引由于使用较少，这里不深入介绍。B-TREE索引包括很多扩展类型，如组合索引、反向索引、函数索引等等，以下是B-TREE索引的简单介绍：</p>
<p>B-TREE索引也称为平衡树索引(Balance Tree)，它是一种按字段排好序的树形目录结构，主要用于提升查询性能和唯一约束支持。B-TREE索引的内容包括根节点、分支节点、叶子节点。</p>
<p>叶子节点内容：索引字段内容+表记录ROWID</p>
<p>根节点，分支节点内容：当一个数据块中不能放下所有索引字段数据时，就会形成树形的根节点或分支节点，根节点与分支节点保存了索引树的顺序及各层级间的引用关系。</p>
<p>一个普通的BTREE索引结构示意图如下所示：</p>
<p><img src="" alt=""></p>
<p>如果我们把一个表的内容认为是一本字典，那索引就相当于字典的目录，如下图所示：</p>
<p><img src="" alt=""></p>
<p><img src="" alt=""></p>
<p>图中是一个字典按部首+笔划数的目录，相当于给字典建了一个按部首+笔划的组合索引。</p>
<p>一个表中可以建多个索引，就如一本字典可以建多个目录一样（按拼音、笔划、部首等等）。</p>
<p>一个索引也可以由多个字段组成，称为组合索引，如上图就是一个按部首+笔划的组合目录。</p>
<p><strong>SQL什么条件会使用索引？</strong></p>
<p>当字段上建有索引时，通常以下情况会使用索引：</p>
<p>INDEX_COLUMN = ?</p>
<p>INDEX_COLUMN &gt; ?</p>
<p>INDEX_COLUMN &gt;= ?</p>
<p>INDEX_COLUMN &lt; ?</p>
<p>INDEX_COLUMN &lt;= ?</p>
<p>INDEX_COLUMN between ? and ?</p>
<p>INDEX_COLUMN in (?,?,...,?)</p>
<p>INDEX_COLUMN like ?||&#39;%&#39;（后导模糊查询）</p>
<p>T1. INDEX_COLUMN=T2. COLUMN1（两个表通过索引字段关联）</p>
<p><strong>SQL什么条件不会使用索引？</strong></p>
<p><img src="" alt=""></p>
<p>我们一般在什么字段上建索引？</p>
<p>这是一个非常复杂的话题，需要对业务及数据充分分析后再能得出结果。主键及外键通常都要有索引，其它需要建索引的字段应满足以下条件：</p>
<p>1、字段出现在查询条件中，并且查询条件可以使用索引；</p>
<p>2、语句执行频率高，一天会有几千次以上；</p>
<p>3、通过字段条件可筛选的记录集很小，那数据筛选比例是多少才适合？</p>
<p>这个没有固定值，需要根据表数据量来评估，以下是经验公式，可用于快速评估：</p>
<p>小表(记录数小于10000行的表)：筛选比例&lt;10%；</p>
<p>大表：(筛选返回记录数)&lt;(表总记录数/*单条记录长度)/10000/16</p>
<p>单条记录长度≈字段平均内容长度之和+字段数/*2</p>
<p>以下是一些字段是否需要建B-TREE索引的经验分类：</p>
<p><img src="" alt=""></p>
<p><strong>如何知道SQL是否使用了正确的索引？</strong></p>
<p>简单SQL可以根据索引使用语法规则判断，复杂的SQL不好办，判断SQL的响应时间是一种策略，但是这会受到数据量、主机负载及缓存等因素的影响，有时数据全在缓存里，可能全表访问的时间比索引访问时间还少。要准确知道索引是否正确使用，需要到数据库中查看SQL真实的执行计划，这个话题比较复杂，详见SQL执行计划专题介绍。</p>
<p>索引对DML(INSERT,UPDATE,DELETE)附加的开销有多少？</p>
<p>这个没有固定的比例，与每个表记录的大小及索引字段大小密切相关，以下是一个普通表测试数据，仅供参考：</p>
<p>索引对于Insert性能降低56%</p>
<p>索引对于Update性能降低47%</p>
<p>索引对于Delete性能降低29%</p>
<p>因此对于写IO压力比较大的系统，表的索引需要仔细评估必要性，另外索引也会占用一定的存储空间。</p>
<p>1.2、只通过索引访问数据</p>
<p>有些时候，我们只是访问表中的几个字段，并且字段内容较少，我们可以为这几个字段单独建立一个组合索引，这样就可以直接只通过访问索引就能得到数据，一般索引占用的磁盘空间比表小很多，所以这种方式可以大大减少磁盘IO开销。</p>
<p>如：select id,name from company where type=&#39;2&#39;;</p>
<p>如果这个SQL经常使用，我们可以在type,id,name上创建组合索引</p>
<p>create index my_comb_index on company(type,id,name);</p>
<p>有了这个组合索引后，SQL就可以直接通过my_comb_index索引返回数据，不需要访问company表。</p>
<p>还是拿字典举例：有一个需求，需要查询一本汉语字典中所有汉字的个数，如果我们的字典没有目录索引，那我们只能从字典内容里一个一个字计数，最后返回结果。如果我们有一个拼音目录，那就可以只访问拼音目录的汉字进行计数。如果一本字典有1000页，拼音目录有20页，那我们的数据访问成本相当于全表访问的50分之一。</p>
<p>切记，性能优化是无止境的，当性能可以满足需求时即可，不要过度优化。在实际数据库中我们不可能把每个SQL请求的字段都建在索引里，所以这种只通过索引访问数据的方法一般只用于核心应用，也就是那种对核心表访问量最高且查询字段数据量很少的查询。</p>
<p>1.3、优化SQL执行计划</p>
<p>SQL执行计划是关系型数据库最核心的技术之一，它表示SQL执行时的数据访问算法。由于业务需求越来越复杂，表数据量也越来越大，程序员越来越懒惰，SQL也需要支持非常复杂的业务逻辑，但SQL的性能还需要提高，因此，优秀的关系型数据库除了需要支持复杂的SQL语法及更多函数外，还需要有一套优秀的算法库来提高SQL性能。</p>
<p>目前ORACLE有SQL执行计划的算法约300种，而且一直在增加，所以SQL执行计划是一个非常复杂的课题，一个普通DBA能掌握50种就很不错了，就算是资深DBA也不可能把每个执行计划的算法描述清楚。虽然有这么多种算法，但并不表示我们无法优化执行计划，因为我们常用的SQL执行计划算法也就十几个，如果一个程序员能把这十几个算法搞清楚，那就掌握了80%的SQL执行计划调优知识。</p>
<p>由于篇幅的原因，SQL执行计划需要专题介绍，在这里就不多说了。</p>
<p>2、返回更少的数据</p>
<p>2.1、数据分页处理</p>
<p>一般数据分页方式有：</p>
<p><strong>2.1.1、客户端(应用程序或浏览器)分页</strong></p>
<p>将数据从应用服务器全部下载到本地应用程序或浏览器，在应用程序或浏览器内部通过本地代码进行分页处理</p>
<p>优点：编码简单，减少客户端与应用服务器网络交互次数</p>
<p>缺点：首次交互时间长，占用客户端内存</p>
<p>适应场景：客户端与应用服务器网络延时较大，但要求后续操作流畅，如手机GPRS，超远程访问（跨国）等等。</p>
<p><strong>2.1.2、应用服务器分页</strong></p>
<p>将数据从数据库服务器全部下载到应用服务器，在应用服务器内部再进行数据筛选。以下是一个应用服务器端Java程序分页的示例：
List list=executeQuery(“select /* from employee order by id”);
Int count= list.size();
List subList= list.subList(10, 20);</p>
<p>优点：编码简单，只需要一次SQL交互，总数据与分页数据差不多时性能较好。</p>
<p>缺点：总数据量较多时性能较差。</p>
<p>适应场景：数据库系统不支持分页处理，数据量较小并且可控。</p>
<p><strong>2.1.3、数据库SQL分页</strong></p>
<p>采用数据库SQL分页需要两次SQL完成</p>
<p>一个SQL计算总数量</p>
<p>一个SQL返回分页后的数据</p>
<p>优点：性能好</p>
<p>缺点：编码复杂，各种数据库语法不同，需要两次SQL交互。</p>
<p>oracle数据库一般采用rownum来进行分页，常用分页语法有如下两种：</p>
<p>直接通过rownum分页：
select /<em> from (
         select a./</em>,rownum rn from
                   (select /* from product a where company_id=? order by status) a
         where rownum&lt;=20)
where rn&gt;10;</p>
<p>数据访问开销=索引IO+索引全部记录结果对应的表数据IO</p>
<p>采用rowid分页语法</p>
<p>优化原理是通过纯索引找出分页记录的ROWID，再通过ROWID回表返回数据，要求内层查询和排序字段全在索引里。
create index myindex on product(company_id,status);
select b./<em> from (
         select /</em> from (
                   select a./*,rownum rn from
                            (select rowid rid,status from product a where company_id=? order by status) a
                   where rownum&lt;=20)
         where rn&gt;10) a, product b
where a.rid=b.rowid;</p>
<p>数据访问开销=索引IO+索引分页结果对应的表数据IO</p>
<p>实例：</p>
<p>一个公司产品有1000条记录，要分页取其中20个产品，假设访问公司索引需要50个IO，2条记录需要1个表数据IO。</p>
<p>那么按第一种ROWNUM分页写法，需要550(50+1000/2)个IO，按第二种ROWID分页写法，只需要60个IO(50+20/2);</p>
<p>2.2、只返回需要的字段</p>
<p>通过去除不必要的返回字段可以提高性能，例：</p>
<p>调整前：select /* from product where company_id=?;</p>
<p>调整后：select id,name from product where company_id=?;</p>
<p>优点：</p>
<p>1、减少数据在网络上传输开销</p>
<p>2、减少服务器数据处理开销</p>
<p>3、减少客户端内存占用</p>
<p>4、字段变更时提前发现问题，减少程序BUG</p>
<p>5、如果访问的所有字段刚好在一个索引里面，则可以使用纯索引访问提高性能。</p>
<p>缺点：增加编码工作量</p>
<p>由于会增加一些编码工作量，所以一般需求通过开发规范来要求程序员这么做，否则等项目上线后再整改工作量更大。</p>
<p>如果你的查询表中有大字段或内容较多的字段，如备注信息、文件内容等等，那在查询表时一定要注意这方面的问题，否则可能会带来严重的性能问题。如果表经常要查询并且请求大内容字段的概率很低，我们可以采用分表处理，将一个大表分拆成两个一对一的关系表，将不常用的大内容字段放在一张单独的表中。如一张存储上传文件的表：</p>
<p>T_FILE（ID,FILE_NAME,FILE_SIZE,FILE_TYPE,FILE_CONTENT）</p>
<p>我们可以分拆成两张一对一的关系表：</p>
<p>T_FILE（ID,FILE_NAME,FILE_SIZE,FILE_TYPE）</p>
<p>T_FILECONTENT（ID, FILE_CONTENT）</p>
<p>通过这种分拆，可以大大提少T_FILE表的单条记录及总大小，这样在查询T_FILE时性能会更好，当需要查询FILE_CONTENT字段内容时再访问T_FILECONTENT表。</p>
<p>3、减少交互次数</p>
<p>3.1、batch DML</p>
<p>数据库访问框架一般都提供了批量提交的接口，jdbc支持batch的提交处理方法，当你一次性要往一个表中插入1000万条数据时，如果采用普通的executeUpdate处理，那么和服务器交互次数为1000万次，按每秒钟可以向数据库服务器提交10000次估算，要完成所有工作需要1000秒。如果采用批量提交模式，1000条提交一次，那么和服务器交互次数为1万次，交互次数大大减少。采用batch操作一般不会减少很多数据库服务器的物理IO，但是会大大减少客户端与服务端的交互次数，从而减少了多次发起的网络延时开销，同时也会降低数据库的CPU开销。</p>
<p>假设要向一个普通表插入1000万数据，每条记录大小为1K字节，表上没有任何索引，客户端与数据库服务器网络是100Mbps，以下是根据现在一般计算机能力估算的各种batch大小性能对比值：</p>
<p><img src="" alt=""></p>
<p>从上可以看出，Insert操作加大Batch可以对性能提高近8倍性能，一般根据主键的Update或Delete操作也可能提高2-3倍性能，但不如Insert明显，因为Update及Delete操作可能有比较大的开销在物理IO访问。以上仅是理论计算值，实际情况需要根据具体环境测量。</p>
<p>3.2、In List</p>
<p>很多时候我们需要按一些ID查询数据库记录，我们可以采用一个ID一个请求发给数据库，如下所示：
for :var in ids[] do begin
  select /* from mytable where id=:var;
end;</p>
<p>我们也可以做一个小的优化， 如下所示，用ID INLIST的这种方式写SQL：</p>
<p>select /* from mytable where id in(:id1,id2,...,idn);</p>
<p>通过这样处理可以大大减少SQL请求的数量，从而提高性能。那如果有10000个ID，那是不是全部放在一条SQL里处理呢？答案肯定是否定的。首先大部份数据库都会有SQL长度和IN里个数的限制，如ORACLE的IN里就不允许超过1000个值。</p>
<p>另外当前数据库一般都是采用基于成本的优化规则，当IN数量达到一定值时有可能改变SQL执行计划，从索引访问变成全表访问，这将使性能急剧变化。随着SQL中IN的里面的值个数增加，SQL的执行计划会更复杂，占用的内存将会变大，这将会增加服务器CPU及内存成本。</p>
<p>评估在IN里面一次放多少个值还需要考虑应用服务器本地内存的开销，有并发访问时要计算本地数据使用周期内的并发上限，否则可能会导致内存溢出。</p>
<p>综合考虑，一般IN里面的值个数超过20个以后性能基本没什么太大变化，也特别说明不要超过100，超过后可能会引起执行计划的不稳定性及增加数据库CPU及内存成本，这个需要专业DBA评估。</p>
<p>3.3、设置Fetch Size</p>
<p>当我们采用select从数据库查询数据时，数据默认并不是一条一条返回给客户端的，也不是一次全部返回客户端的，而是根据客户端fetch_size参数处理，每次只返回fetch_size条记录，当客户端游标遍历到尾部时再从服务端取数据，直到最后全部传送完成。所以如果我们要从服务端一次取大量数据时，可以加大fetch_size，这样可以减少结果数据传输的交互次数及服务器数据准备时间，提高性能。</p>
<p>以下是jdbc测试的代码，采用本地数据库，表缓存在数据库CACHE中，因此没有网络连接及磁盘IO开销，客户端只遍历游标，不做任何处理，这样更能体现fetch参数的影响：
String vsql =&quot;select /* from t_employee&quot;;
PreparedStatement pstmt = conn.prepareStatement(vsql,ResultSet.TYPE_FORWARD_ONLY,ResultSet.CONCUR_READ_ONLY);
pstmt.setFetchSize(1000);
ResultSet rs = pstmt.executeQuery(vsql);
int cnt = rs.getMetaData().getColumnCount();
Object o;
while (rs.next()) {
    for (int i = 1; i &lt;= cnt; i++) {
       o = rs.getObject(i);
    }
}</p>
<p>测试示例中的employee表有100000条记录，每条记录平均长度135字节</p>
<p>以下是测试结果，对每种fetchsize测试5次再取平均值：</p>
<p><img src="" alt=""></p>
<p><img src="" alt=""></p>
<p>Oracle jdbc fetchsize默认值为10，由上测试可以看出fetchsize对性能影响还是比较大的，但是当fetchsize大于100时就基本上没有影响了。fetchsize并不会存在一个最优的固定值，因为整体性能与记录集大小及硬件平台有关。根据测试结果建议当一次性要取大量数据时这个值设置为100左右，不要小于40。注意，fetchsize不能设置太大，如果一次取出的数据大于JVM的内存会导致内存溢出，所以建议不要超过1000，太大了也没什么性能提高，反而可能会增加内存溢出的危险。</p>
<p>注：图中fetchsize在128以后会有一些小的波动，这并不是测试误差，而是由于resultset填充到具体对像时间不同的原因，由于resultset已经到本地内存里了，所以估计是由于CPU的L1,L2 Cache命中率变化造成，由于变化不大，所以笔者也未深入分析原因。</p>
<p>iBatis的SqlMapping配置文件可以对每个SQL语句指定fetchsize大小，如下所示：</p>
<select id="getAllProduct" resultMap="HashMap" fetchSize="1000">
select /* from employee
</select>

<p>3.4、使用存储过程</p>
<p>大型数据库一般都支持存储过程，合理的利用存储过程也可以提高系统性能。如你有一个业务需要将A表的数据做一些加工然后更新到B表中，但是又不可能一条SQL完成，这时你需要如下3步操作：</p>
<p>a：将A表数据全部取出到客户端；</p>
<p>b：计算出要更新的数据；</p>
<p>c：将计算结果更新到B表。</p>
<p>如果采用存储过程你可以将整个业务逻辑封装在存储过程里，然后在客户端直接调用存储过程处理，这样可以减少网络交互的成本。</p>
<p><strong>当然，存储过程也并不是十全十美，存储过程有以下缺点：</strong></p>
<p>a、不可移植性，每种数据库的内部编程语法都不太相同，当你的系统需要兼容多种数据库时最好不要用存储过程。</p>
<p>b、学习成本高，DBA一般都擅长写存储过程，但并不是每个程序员都能写好存储过程，除非你的团队有较多的开发人员熟悉写存储过程，否则后期系统维护会产生问题。</p>
<p>c、业务逻辑多处存在，采用存储过程后也就意味着你的系统有一些业务逻辑不是在应用程序里处理，这种架构会增加一些系统维护和调试成本。</p>
<p>d、存储过程和常用应用程序语言不一样，它支持的函数及语法有可能不能满足需求，有些逻辑就只能通过应用程序处理。</p>
<p>e、如果存储过程中有复杂运算的话，会增加一些数据库服务端的处理成本，对于集中式数据库可能会导致系统可扩展性问题。</p>
<p>f、为了提高性能，数据库会把存储过程代码编译成中间运行代码(类似于java的class文件)，所以更像静态语言。当存储过程引用的对像(表、视图等等)结构改变后，存储过程需要重新编译才能生效，在24/*7高并发应用场景，一般都是在线变更结构的，所以在变更的瞬间要同时编译存储过程，这可能会导致数据库瞬间压力上升引起故障(Oracle数据库就存在这样的问题)。</p>
<p>个人观点：普通业务逻辑尽量不要使用存储过程，定时性的ETL任务或报表统计函数可以根据团队资源情况采用存储过程处理。</p>
<p>3.5、优化业务逻辑</p>
<p>要通过优化业务逻辑来提高性能是比较困难的，这需要程序员对所访问的数据及业务流程非常清楚。</p>
<p>举一个案例：</p>
<p>某移动公司推出优惠套参，活动对像为VIP会员并且2010年1，2，3月平均话费20元以上的客户。</p>
<p>那我们的检测逻辑为：
select avg(money) as avg_money from bill where phone_no=&#39;13988888888&#39; and date between &#39;201001&#39; and &#39;201003&#39;;
select vip_flag from member where phone_no=&#39;13988888888&#39;;
if avg_money&gt;20 and vip_flag=true then
begin
  执行套参();
end;</p>
<p>如果我们修改业务逻辑为:</p>
<p>select avg(money) as  avg_money from bill where phone_no=&#39;13988888888&#39; and date between &#39;201001&#39; and &#39;201003&#39;;
if avg_money&gt;20 then
begin
  select vip_flag from member where phone_no=&#39;13988888888&#39;;
  if vip_flag=true then
  begin
    执行套参();
  end;
end;</p>
<p>通过这样可以减少一些判断vip_flag的开销，平均话费20元以下的用户就不需要再检测是否VIP了。</p>
<p>如果程序员分析业务，VIP会员比例为1%，平均话费20元以上的用户比例为90%，那我们改成如下：
select vip_flag from member where phone_no=&#39;13988888888&#39;;
if vip_flag=true then
begin
  select avg(money) as avg_money from bill where phone_no=&#39;13988888888&#39; and date between &#39;201001&#39; and &#39;201003&#39;;
  if avg_money&gt;20 then
  begin
    执行套参();
  end;
end;</p>
<p>这样就只有1%的VIP会员才会做检测平均话费，最终大大减少了SQL的交互次数。</p>
<p>以上只是一个简单的示例，实际的业务总是比这复杂得多，所以一般只是高级程序员更容易做出优化的逻辑，但是我们需要有这样一种成本优化的意识。</p>
<p>3.6、使用ResultSet游标处理记录</p>
<p>现在大部分Java框架都是通过jdbc从数据库取出数据，然后装载到一个list里再处理，list里可能是业务Object，也可能是hashmap。</p>
<p>由于JVM内存一般都小于4G，所以不可能一次通过sql把大量数据装载到list里。为了完成功能，很多程序员喜欢采用分页的方法处理，如一次从数据库取1000条记录，通过多次循环搞定，保证不会引起JVM Out of memory问题。</p>
<p>以下是实现此功能的代码示例，t_employee表有10万条记录，设置分页大小为1000：
d1 = Calendar.getInstance().getTime();
vsql = &quot;select count(/<em>) cnt from t_employee&quot;;
pstmt = conn.prepareStatement(vsql);
ResultSet rs = pstmt.executeQuery();
Integer cnt = 0;
while (rs.next()) {
         cnt = rs.getInt(&quot;cnt&quot;);
}
Integer lastid=0;
Integer pagesize=1000;
System.out.println(&quot;cnt:&quot; + cnt);
String vsql = &quot;select count(/</em>) cnt from t_employee&quot;;
PreparedStatement pstmt = conn.prepareStatement(vsql);
ResultSet rs = pstmt.executeQuery();
Integer cnt = 0;
while (rs.next()) {
         cnt = rs.getInt(&quot;cnt&quot;);
}
Integer lastid = 0;
Integer pagesize = 1000;
System.out.println(&quot;cnt:&quot; + cnt);
for (int i = 0; i &lt;= cnt / pagesize; i++) {
         vsql = &quot;select /<em> from (select /</em> from t_employee where id&gt;? order by id) where rownum&lt;=?&quot;;
         pstmt = conn.prepareStatement(vsql);
         pstmt.setFetchSize(1000);
         pstmt.setInt(1, lastid);
         pstmt.setInt(2, pagesize);
         rs = pstmt.executeQuery();
         int col_cnt = rs.getMetaData().getColumnCount();
         Object o;
         while (rs.next()) {
                   for (int j = 1; j &lt;= col_cnt; j++) {
                            o = rs.getObject(j);
                   }
                   lastid = rs.getInt(&quot;id&quot;);
         }
         rs.close();
         pstmt.close();
}</p>
<p>以上代码实际执行时间为6.516秒</p>
<p>很多持久层框架为了尽量让程序员使用方便，封装了jdbc通过statement执行数据返回到resultset的细节，导致程序员会想采用分页的方式处理问题。实际上如果我们采用jdbc原始的resultset游标处理记录，在resultset循环读取的过程中处理记录，这样就可以一次从数据库取出所有记录。显著提高性能。</p>
<p>这里需要注意的是，采用resultset游标处理记录时，应该将游标的打开方式设置为FORWARD_READONLY模式(ResultSet.TYPE_FORWARD_ONLY,ResultSet.CONCUR_READ_ONLY)，否则会把结果缓存在JVM里，造成JVM Out of memory问题。</p>
<p>代码示例：
String vsql =&quot;select /* from t_employee&quot;;
PreparedStatement pstmt = conn.prepareStatement(vsql,ResultSet.TYPE_FORWARD_ONLY,ResultSet.CONCUR_READ_ONLY);
pstmt.setFetchSize(100);
ResultSet rs = pstmt.executeQuery(vsql);
int col_cnt = rs.getMetaData().getColumnCount();
Object o;
while (rs.next()) {
         for (int j = 1; j &lt;= col_cnt; j++) {
                   o = rs.getObject(j);
         }
}</p>
<p>调整后的代码实际执行时间为3.156秒</p>
<p>从测试结果可以看出性能提高了1倍多，如果采用分页模式数据库每次还需发生磁盘IO的话那性能可以提高更多。</p>
<p>iBatis等持久层框架考虑到会有这种需求，所以也有相应的解决方案，在iBatis里我们不能采用queryForList的方法，而应用该采用queryWithRowHandler加回调事件的方式处理，如下所示：
MyRowHandler myrh=new MyRowHandler();
sqlmap.queryWithRowHandler(&quot;getAllEmployee&quot;, myrh);
class MyRowHandler implements RowHandler {
    public void handleRow(Object o) {
       //todo something
    }
}</p>
<p>iBatis的queryWithRowHandler很好的封装了resultset遍历的事件处理，效果及性能与resultset遍历一样，也不会产生JVM内存溢出。</p>
<p>4、减少数据库服务器CPU运算</p>
<p>4.1、使用绑定变量</p>
<p>绑定变量是指SQL中对变化的值采用变量参数的形式提交，而不是在SQL中直接拼写对应的值。</p>
<p>非绑定变量写法：Select /* from employee where id=1234567</p>
<p>绑定变量写法：
Select /* from employee where id=?
Preparestatement.setInt(1,1234567)</p>
<p>Java中Preparestatement就是为处理绑定变量提供的对像，绑定变量有以下优点：</p>
<p>1、防止SQL注入</p>
<p>2、提高SQL可读性</p>
<p>3、提高SQL解析性能，不使用绑定变更我们一般称为硬解析，使用绑定变量我们称为软解析。</p>
<p>第1和第2点很好理解，做编码的人应该都清楚，这里不详细说明。关于第3点，到底能提高多少性能呢，下面举一个例子说明：</p>
<p>假设有这个这样的一个数据库主机：</p>
<p>2个4核CPU</p>
<p>100块磁盘，每个磁盘支持IOPS为160</p>
<p>业务应用的SQL如下：</p>
<p>select /* from table where pk=?</p>
<p>这个SQL平均4个IO（3个索引IO+1个数据IO）</p>
<p>IO缓存命中率75%（索引全在内存中，数据需要访问磁盘）</p>
<p>SQL硬解析CPU消耗：1ms （常用经验值）</p>
<p>SQL软解析CPU消耗：0.02ms（常用经验值）</p>
<p>假设CPU每核性能是线性增长，访问内存Cache中的IO时间忽略，要求计算系统对如上应用采用硬解析与采用软解析支持的每秒最大并发数：</p>
<p><img src="" alt=""></p>
<p>从以上计算可以看出，不使用绑定变量的系统当并发达到8000时会在CPU上产生瓶颈，当使用绑定变量的系统当并行达到16000时会在磁盘IO上产生瓶颈。所以如果你的系统CPU有瓶颈时请先检查是否存在大量的硬解析操作。</p>
<p>使用绑定变量为何会提高SQL解析性能，这个需要从数据库SQL执行原理说明，一条SQL在Oracle数据库中的执行过程如下图所示：</p>
<p><img src="" alt=""></p>
<p>当一条SQL发送给数据库服务器后，系统首先会将SQL字符串进行hash运算，得到hash值后再从服务器内存里的SQL缓存区中进行检索，如果有相同的SQL字符，并且确认是同一逻辑的SQL语句，则从共享池缓存中取出SQL对应的执行计划，根据执行计划读取数据并返回结果给客户端。</p>
<p>如果在共享池中未发现相同的SQL则根据SQL逻辑生成一条新的执行计划并保存在SQL缓存区中，然后根据执行计划读取数据并返回结果给客户端。</p>
<p>为了更快的检索SQL是否在缓存区中，首先进行的是SQL字符串hash值对比，如果未找到则认为没有缓存，如果存在再进行下一步的准确对比，所以要命中SQL缓存区应保证SQL字符是完全一致，中间有大小写或空格都会认为是不同的SQL。</p>
<p>如果我们不采用绑定变量，采用字符串拼接的模式生成SQL,那么每条SQL都会产生执行计划，这样会导致共享池耗尽，缓存命中率也很低。</p>
<p><strong>一些不使用绑定变量的场景：</strong></p>
<p>a、数据仓库应用，这种应用一般并发不高，但是每个SQL执行时间很长，SQL解析的时间相比SQL执行时间比较小，绑定变量对性能提高不明显。数据仓库一般都是内部分析应用，所以也不太会发生SQL注入的安全问题。</p>
<p>b、数据分布不均匀的特殊逻辑，如产品表，记录有1亿，有一产品状态字段，上面建有索引，有审核中，审核通过，审核未通过3种状态，其中审核通过9500万，审核中1万，审核不通过499万。</p>
<p>要做这样一个查询：</p>
<p>select count(/*) from product where status=?</p>
<p>采用绑定变量的话，那么只会有一个执行计划，如果走索引访问，那么对于审核中查询很快，对审核通过和审核不通过会很慢；如果不走索引，那么对于审核中与审核通过和审核不通过时间基本一样；</p>
<p>对于这种情况应该不使用绑定变量，而直接采用字符拼接的方式生成SQL，这样可以为每个SQL生成不同的执行计划，如下所示。
select count(/<em>) from product where status=&#39;approved&#39;; //不使用索引
select count(/</em>) from product where status=&#39;tbd&#39;; //不使用索引
select count(/*) from product where status=&#39;auditing&#39;;//使用索引</p>
<p>4.2、合理使用排序</p>
<p>Oracle的排序算法一直在优化，但是总体时间复杂度约等于nLog(n)。普通OLTP系统排序操作一般都是在内存里进行的，对于数据库来说是一种CPU的消耗，曾在PC机做过测试，单核普通CPU在1秒钟可以完成100万条记录的全内存排序操作，所以说由于现在CPU的性能增强，对于普通的几十条或上百条记录排序对系统的影响也不会很大。但是当你的记录集增加到上万条以上时，你需要注意是否一定要这么做了，大记录集排序不仅增加了CPU开销，而且可能会由于内存不足发生硬盘排序的现象，当发生硬盘排序时性能会急剧下降，这种需求需要与DBA沟通再决定，取决于你的需求和数据，所以只有你自己最清楚，而不要被别人说排序很慢就吓倒。</p>
<p><strong>以下列出了可能会发生排序操作的SQL语法：</strong></p>
<p>Order by</p>
<p>Group by</p>
<p>Distinct</p>
<p>Exists子查询</p>
<p>Not Exists子查询</p>
<p>In子查询</p>
<p>Not In子查询</p>
<p>Union（并集），Union All也是一种并集操作，但是不会发生排序，如果你确认两个数据集不需要执行去除重复数据操作，那请使用Union All 代替Union。</p>
<p>Minus（差集）</p>
<p>Intersect（交集）</p>
<p>Create Index</p>
<p>Merge Join，这是一种两个表连接的内部算法，执行时会把两个表先排序好再连接，应用于两个大表连接的操作。如果你的两个表连接的条件都是等值运算，那可以采用Hash Join来提高性能，因为Hash Join使用Hash 运算来代替排序的操作。具体原理及设置参考SQL执行计划优化专题。</p>
<p>4.3、减少比较操作</p>
<p>我们SQL的业务逻辑经常会包含一些比较操作，如a=b，a&lt;b之类的操作，对于这些比较操作数据库都体现得很好，但是如果有以下操作，我们需要保持警惕：</p>
<p>Like模糊查询，如下所示：</p>
<p>a like ‘%abc%’</p>
<p>Like模糊查询对于数据库来说不是很擅长，特别是你需要模糊检查的记录有上万条以上时，性能比较糟糕，这种情况一般可以采用专用Search或者采用全文索引方案来提高性能。</p>
<p>不能使用索引定位的大量In List，如下所示：</p>
<p>a in (:1,:2,:3,…,:n) ----n&gt;20</p>
<p>如果这里的a字段不能通过索引比较，那数据库会将字段与in里面的每个值都进行比较运算，如果记录数有上万以上，会明显感觉到SQL的CPU开销加大，这个情况有两种解决方式：</p>
<p>a、 将in列表里面的数据放入一张中间小表，采用两个表Hash Join关联的方式处理；</p>
<p>b、 采用str2varList方法将字段串列表转换一个临时表处理，关于str2varList方法可以在网上直接查询，这里不详细介绍。</p>
<p>以上两种解决方案都需要与中间表Hash Join的方式才能提高性能，如果采用了Nested Loop的连接方式性能会更差。</p>
<p>如果发现我们的系统IO没问题但是CPU负载很高，就有可能是上面的原因，这种情况不太常见，如果遇到了最好能和DBA沟通并确认准确的原因。</p>
<p>4.4、大量复杂运算在客户端处理</p>
<p>什么是复杂运算，一般我认为是一秒钟CPU只能做10万次以内的运算。如含小数的对数及指数运算、三角函数、3DES及BASE64数据加密算法等等。</p>
<p>如果有大量这类函数运算，尽量放在客户端处理，一般CPU每秒中也只能处理1万-10万次这样的函数运算，放在数据库内不利于高并发处理。</p>
<p>5、利用更多的资源</p>
<p>5.1、客户端多进程并行访问</p>
<p>多进程并行访问是指在客户端创建多个进程(线程)，每个进程建立一个与数据库的连接，然后同时向数据库提交访问请求。当数据库主机资源有空闲时，我们可以采用客户端多进程并行访问的方法来提高性能。如果数据库主机已经很忙时，采用多进程并行访问性能不会提高，反而可能会更慢。所以使用这种方式最好与DBA或系统管理员进行沟通后再决定是否采用。</p>
<p>例如：</p>
<p>我们有10000个产品ID，现在需要根据ID取出产品的详细信息，如果单线程访问，按每个IO要5ms计算，忽略主机CPU运算及网络传输时间，我们需要50s才能完成任务。如果采用5个并行访问，每个进程访问2000个ID，那么10s就有可能完成任务。</p>
<p>那是不是并行数越多越好呢，开1000个并行是否只要50ms就搞定，答案肯定是否定的，当并行数超过服务器主机资源的上限时性能就不会再提高，如果再增加反而会增加主机的进程间调度成本和进程冲突机率。</p>
<p><strong>以下是一些如何设置并行数的基本建议：</strong></p>
<p>如果瓶颈在服务器主机，但是主机还有空闲资源，那么最大并行数取主机CPU核数和主机提供数据服务的磁盘数两个参数中的最小值，同时要保证主机有资源做其它任务。</p>
<p>如果瓶颈在客户端处理，但是客户端还有空闲资源，那建议不要增加SQL的并行，而是用一个进程取回数据后在客户端起多个进程处理即可，进程数根据客户端CPU核数计算。</p>
<p>如果瓶颈在客户端网络，那建议做数据压缩或者增加多个客户端，采用map reduce的架构处理。</p>
<p>如果瓶颈在服务器网络，那需要增加服务器的网络带宽或者在服务端将数据压缩后再处理了。</p>
<p>5.2、数据库并行处理</p>
<p>数据库并行处理是指客户端一条SQL的请求，数据库内部自动分解成多个进程并行处理，如下图所示：</p>
<p><img src="" alt=""></p>
<p>并不是所有的SQL都可以使用并行处理，一般只有对表或索引进行全部访问时才可以使用并行。数据库表默认是不打开并行访问，所以需要指定SQL并行的提示，如下所示：</p>
<p>select //<em>+parallel(a,4)/</em>/ /* from employee;</p>
<p><strong>并行的优点：</strong></p>
<p>使用多进程处理，充分利用数据库主机资源（CPU,IO），提高性能。</p>
<p><strong>并行的缺点：</strong></p>
<p>1、单个会话占用大量资源，影响其它会话，所以只适合在主机负载低时期使用；</p>
<p>2、只能采用直接IO访问，不能利用缓存数据，所以执行前会触发将脏缓存数据写入磁盘操作。</p>
<p><strong>注：</strong></p>
<p>1、并行处理在OLTP类系统中慎用，使用不当会导致一个会话把主机资源全部占用，而正常事务得不到及时响应，所以一般只是用于数据仓库平台。</p>
<p>2、一般对于百万级记录以下的小表采用并行访问性能并不能提高，反而可能会让性能更差。 相关文章 相关文档 相关视频  <a href="http://www.uml.org.cn/sjjm/201210265.asp" target="_blank">我们该如何设计数据库</a> <a href="http://www.uml.org.cn/sjjm/201007233.asp" target="_blank">数据库设计经验谈</a> <a href="http://www.uml.org.cn/sjjm/200903311.asp" target="_blank">数据库设计过程</a> <a href="http://www.uml.org.cn/sjjm/201005131.asp" target="_blank">数据库编程总结</a> <a href="http://wenku.uml.com.cn/document.asp?fileid=4002&amp;partname=%CA%FD%BE%DD%BF%E2" target="_blank">数据库性能调优技巧</a> <a href="http://wenku.uml.com.cn/document.asp?fileid=1050&amp;partname=%CA%FD%BE%DD%BF%E2" target="_blank">数据库性能调整</a> <a href="http://wenku.uml.com.cn/document.asp?fileid=1390&amp;partname=%CA%FD%BE%DD%BF%E2" target="_blank">数据库性能优化讲座</a> <a href="http://wenku.uml.com.cn/document.asp?fileid=1049&amp;partname=%CA%FD%BE%DD%BF%E2" target="_blank">数据库系统性能调优系列</a> <a href="http://www.uml.org.cn/course-db/xnsjksj.asp" target="_blank">高性能数据库设计与优化</a> <a href="http://www.uml.org.cn/course-db/shujk.asp" target="_blank">高级数据库架构师</a> <a href="http://www.uml.org.cn/course-db/dbdesign15.asp" target="_blank">数据仓库和数据挖掘技术</a> <a href="http://www.uml.org.cn/course-db/Hadoop-xnty.asp" target="_blank">Hadoop原理、部署与性能调优</a>
来源： <a href="[http://www.uml.org.cn/sjjm/201308283.asp](http://www.uml.org.cn/sjjm/201308283.asp)">[http://www.uml.org.cn/sjjm/201308283.asp](http://www.uml.org.cn/sjjm/201308283.asp)</a> </p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:34"datetime="2014-03-07 09:54:34"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB--面向程序员的数据库访问性能优化法则-数据库/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB--面向程序员的数据库访问性能优化法则-数据库" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/129/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/127/">127</a></li><li><a class="page-number" href="/page/128/">128</a></li><li><a class="page-number" href="/page/129/">129</a></li><li class="active"><li><span class="page-number current">130</span></li><li><a class="page-number" href="/page/131/">131</a></li><li><a class="page-number" href="/page/132/">132</a></li><li><a class="page-number" href="/page/133/">133</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/162/">162</a></li><li><a class="page-number" href="/page/163/">163</a></li><li><a class="extend next" href="/page/131/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Site powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a>  update time: <em>2014-03-30 14:30:16</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
