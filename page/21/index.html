
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 21 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-服务器-Squid--认识Squid_inJava_百度空间/">认识Squid_inJava_百度空间</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-服务器-Squid--认识Squid_inJava_百度空间/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-squid_injava_-">认识Squid<em>inJava</em>百度空间</h1>
<p><a href="http://hi.baidu.com/"></a></p>
<ul>
<li><a href="http://xiangce.baidu.com/" target="_blank">相册</a></li>
<li><a href="http://hi.baidu.com/index/" target="_blank">广场</a></li>
<li><a href="http://hi.baidu.com/go/login" target="_blank">登录</a>
*</li>
<li><a href="http://hi.baidu.com/go/reg?pmfrom=qingtop" target="_blank">注册</a>
<a href="http://hi.baidu.com/injava/item/b6886fc1fc72af52ac00ef7d#" target="_blank">关注此空间</a></li>
</ul>
<h1 id="-injava-http-hi-baidu-com-injava-"><a href="http://hi.baidu.com/injava" target="_blank">inJava</a></h1>
<p>J2EE、架构、搜索引擎、数据挖掘、互联网、创业、媒体、资料库</p>
<p>2008-03-22 13:48</p>
<h2 id="-squid">认识Squid</h2>
<p>Squid是什么?
Squid能做什么?
Squid如何工作的?
[Squid是什么]
   Squid是一个高性能的代理缓存服务器，Squid支持FTP、gopher和HTTP协议。和一般的代理缓存软件不同，Squid用一个单独的、非模块化的、I/O驱动的进程来处理所有的客户端请求。
   Squid将数据元缓存在内存中，同时也缓存DNS查询的结果，除此之外，它还支持非模块化的DNS查询，对失败的请求进行消极缓存。Squid支持SSL，支持访问控制。由于使用了ICP（轻量Internet缓存协议），Squid能够实现层叠的代理阵列，从而最大限度地节约带宽。
   Squid由一个主要的服务程序squid,一个DNS查询程序dnsserver，几个重写请求和执行认证的程序，以及几个管理工具组成。当Squid启动以后，它可以派生出预先指定数目的dnsserver进程，而每一个dnsserver进程都可以执行单独的DNS查询，这样一来就大大减少了服务器等待DNS查询的时间。
Squid是一个缓存internet数据的一个软件，它接收用户的下载申请，并自动处理所下载的数据。也就是说，当一个用户象要下载一个主页时，它向Squid发出一个申请，要Squid替它下载，然后Squid连接所申请网站并请求该主页，接着把该主页传给用户同时保留一个备份，当别的用户申请同样的页面时，Squid把保存的备份立即传给用户，使用户觉得速度相当快。目前，Squid 可以代理HTTP, FTP, GOPHER, SSL 和 WAIS 协议，暂不能代理POP, NNTP等协议。不过，已经有人开始修改Squid，相信不久的将来，Squid能够代理这些协议。</p>
<p>Squid能够缓存任何数据吗？不是的。象缓存信用卡帐号、可以远方执行的scripts、经常变换的主页等是不合适的也是不安全的。Squid可以自动的进行处理，你也可以根据自己的需要设置Squid，使之过滤掉你不想要的东西。</p>
<p>Squid可以工作在很多的操作系统中，如AIX, Digital Unix, FreeBSD, HP-UX, Irix, Linux, NetBSD, Nextstep, SCO, Solaris，OS/2等，也有不少人在其他操作系统中重新编译过Squid。</p>
<p>Squid对硬件的要求是内存一定要大，不应小于128M，硬盘转速越快越好，最好使用服务器专用SCSI硬盘，处理器要求不高，400MH以上既可。
[SQUID能做什么]
    1、代理服务器
    2、透明代理
    3、反向代理
什么是代理服务器
    做为代理服务器，这是SQUID的最基本功能；通过在squid.conf文件里添加一系列访问及控制规则，用户在客户端设置服务器地址和端口，即可通过SQUID访问INTERNET。
什么是透明代理
   所谓透明代理，是相对于代理服务器而言，客户端不需要做任何和代理服务器相关的设置和操作，对用户而言，更本感觉不到代理服务器的存在，所以称之为透明代理。
透明代理流程说明
   用户A发送一个访问请求到防火墙，由防火墙将该用户的访问请求转发到SQUID，SQUID在先检查自身缓存中有无该用户请求的访问内容，如果没有，则请求远端目的服务器，获取该用户的访问内容，在返回给用户的同时，在自身缓存保留一份记录以备下次调用；当用户B发送一个和用户A相同的访问请求时，由防火墙将转发该用户请求到SQUID，SQUID检查自身缓存发现有同样内容后，直接将该内容返回给用户。
注：在实际使用中，通常将SQUID和防火墙放在同一台机器上，为了更清楚的象浏览者描述其工作流程，在以下的流程图中将防火墙和SQUID分开显示。
   <img src="" alt="">
什么是反向代理
   普通代理方式是代理内部网络用户访问internet上服务器的连接请求，客户端必须指定代理服务器,并将本来要直接发送到internet上服务器的连接请求发送给代理服务器处理。反向代理（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。</p>
<p>反向代理流程说明
   SQUID做为反向代理服务器，通常工作在一个服务器集群的前端，在用户端看来，SQUID服务器就是他所要访问的服务器，而实际意义上SQUID只是接受用户的请求，同时将用户请求转发给内网真正的WEB服务器，如果SQUID本身有用户要访问的内容，则SQUID直接将数据返回给用户。
<img src="" alt="">
[SQUID如何工作]
     <img src="" alt="">
<a href="http://hi.baidu.com/tag/linux%2Bwindows/feeds" target="_blank">/#linux+windows</a></p>
<p>分享到： <a href=""></a><a href=""></a><a href=""></a><a href=""></a></p>
<p><a href="http://hi.baidu.com/injava/item/b6886fc1fc72af52ac00ef7d#" target="_blank">举报</a>浏览(117) <a href="http://hi.baidu.com/injava/item/b6886fc1fc72af52ac00ef7d#" target="_blank">评论</a><a href="http://hi.baidu.com/injava/item/b6886fc1fc72af52ac00ef7d#" target="_blank">转载</a></p>
<h3 id="-">你可能也喜欢</h3>
<ul>
<li><a href="http://hi.baidu.com/nieve_kx/item/b48fff87fa92a5ef98255fea" target="_blank"><img src="&quot;一组速写风景画❤ ~&quot;" alt="一组速写风景画❤ ~"></a><a href="http://hi.baidu.com/nieve_kx/item/b48fff87fa92a5ef98255fea" target="_blank">一组速写风景画❤ ~</a></li>
<li><a href="http://hi.baidu.com/ajnsfms/item/b1d2c5ab45b47bde5af191b2" target="_blank"><img src="&quot;David Scheirer萌猫酷狗水彩画&quot;" alt="David Scheirer萌猫酷狗水彩画"></a><a href="http://hi.baidu.com/ajnsfms/item/b1d2c5ab45b47bde5af191b2" target="_blank">David Scheirer萌猫酷狗水彩画</a></li>
<li><a href="http://hi.baidu.com/xunyaoyang/item/3bfd319772fa24de7b7f01b0" target="_blank"><img src="&quot;你的梦是什么颜色？&quot;" alt="你的梦是什么颜色？"></a><a href="http://hi.baidu.com/xunyaoyang/item/3bfd319772fa24de7b7f01b0" target="_blank">你的梦是什么颜色？</a></li>
<li><a href="http://hi.baidu.com/wxljjoujlibfjvd/item/6d14f0ead253353f8c3ea87d" target="_blank"><img src="&quot;世界上最远的距离&quot;" alt="世界上最远的距离"></a><a href="http://hi.baidu.com/wxljjoujlibfjvd/item/6d14f0ead253353f8c3ea87d" target="_blank">世界上最远的距离</a></li>
<li><a href="http://hi.baidu.com/jfvkwmnvjkbcqrd/item/d30978d0635bf5c13cc2cb6e" target="_blank"><img src="&quot;板绘&quot;" alt="板绘"></a><a href="http://hi.baidu.com/jfvkwmnvjkbcqrd/item/d30978d0635bf5c13cc2cb6e" target="_blank">板绘</a></li>
<li><a href="http://hi.baidu.com/cangbto/item/007c0630e7eb8bafb611dbec" target="_blank"><img src="&quot;水彩芭蕾&quot;" alt="水彩芭蕾"></a><a href="http://hi.baidu.com/cangbto/item/007c0630e7eb8bafb611dbec" target="_blank">水彩芭蕾</a></li>
<li><a href="http://hi.baidu.com/injava/item/1e0d9e602de5d1157cdecc7a" target="_blank"><img src="&quot;apache限制并发数 IP 带宽设置教程&quot;" alt="apache限制并发数 IP 带宽设置教程"></a><a href="http://hi.baidu.com/injava/item/1e0d9e602de5d1157cdecc7a" target="_blank">apache限制并发数 IP 带宽设置教程</a>
<a href="http://hi.baidu.com/injava/item/34ac120d7fa07b113b53ee7d" title="上一篇"></a></li>
</ul>
<p><a href="http://hi.baidu.com/injava/item/c444ec13283138011994ec7d" title="下一篇"></a></p>
<p>评论
<a href="http://help.baidu.com/question?prod_en=hi" target="_blank">帮助中心</a> | <a href="http://tieba.baidu.com/p/1781683739" target="_blank">空间客服</a> | <a href="http://tousu.baidu.com/hi/add" target="_blank">投诉中心</a> | <a href="http://www.baidu.com/search/hi_contract.html" target="_blank">空间协议</a></p>
<p>©2013 Baidu</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/服务器/">服务器</a></li></span><span class="breadcrumb"><li><a href="/categories/服务器/">服务器</a></li><li><a href="/categories/服务器/Squid/">Squid</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Squid/" class="label label-primary">Squid</a><a href="/tags/服务器/" class="label label-success">服务器</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-服务器-Squid--认识Squid_inJava_百度空间/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-服务器-Squid--认识Squid_inJava_百度空间" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-服务器-集群--ApacheTomcat2集群负载平衡Linux环境/">Apache + Tomcat 2集群 负载平衡(Linux环境) </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-服务器-集群--ApacheTomcat2集群负载平衡Linux环境/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="apache-tomcat-2-linux-derek-guo-blog-blogjava">Apache + Tomcat 2集群 负载平衡(Linux环境) - Derek.Guo BLOG - BlogJava</h1>
<p><a href="http://www.blogjava.net/envoydada/" target="_blank"><strong>Derek.Guo BLOG</strong></a></p>
<p><a href="http://www.blogjava.net/" target="_blank">BlogJava</a>   <a href="http://www.blogjava.net/envoydada/" target="_blank">首页</a>   <a href="http://www.blogjava.net/envoydada/admin/EditPosts.aspx?opt=1" target="_blank">新随笔</a> <a href="http://www.blogjava.net/envoydada/contact.aspx?id=1" target="_blank">联系</a>   <a href="http://www.blogjava.net/envoydada/rss" target="_blank">聚合</a><a href="http://www.blogjava.net/envoydada/rss" target="_blank"><img src="" alt=""></a>   <a href="http://www.blogjava.net/envoydada/admin/EditPosts.aspx" target="_blank">管理</a></p>
<p>随笔-82  评论-31  文章-0  trackbacks-0
<a href="">Apache + Tomcat/*2集群 负载平衡(Linux环境)</a></p>
<p>Apache + Tomcat/*2集群 负载平衡（Linux环境）</p>
<p>说明：一台apache主机，两台tomcat主机</p>
<p>安装JDK、安装Apache、安装Tomcat、配置Apache代理、配置Tomcat集群</p>
<p>一、安装JDK（所有运行Tomcat主机，即web服务器）
  1.下载JDK的bin包，如jdk-1_5_0_02-linux-i586.rpm.bin ，给其添加执行权限，执行/#./jdk-1_5_0_02-linux-i586.rpm.bin , 在</p>
<p>当前目录生成rpm安装包，同样给其添加执行权限。 再执行 /#rpm -ivh jdk-1_5_0_02-linux-i586.rpm 出现安装协议 按<Enter>接受</p>
<p>即可。
  2.设置环境变量 /#vi /etc/profile  在其最后加入
        JAVA_HOME =/ usr / java / jdk1. 5 .0_02
        CLASSPATH = .:$JAVA_HOME / lib:$JAVA_HOME / jre / lib
        PATH = $PATH:$JAVA_HOME / bin:$JAVA_HOME / jre / bin
        export JAVA_HOME CLASSPATH PATH</p>
<pre><code> 保存退出
</code></pre><p>  3.要使JDK在所有的用户中使用，可以这样：vi /etc/profile.d/java.sh在新的java.sh中输入以下内容：
        /#set java environment
        JAVA_HOME=/usr/java/jdk1.5.0_02
        CLASSPATH=.:$JAVA_HOME/lib:$JAVA_HOME/jre/lib
        PATH=$PATH:$JAVA_HOME/bin:$JAVA_HOME/jre/bin
        export JAVA_HOME CLASSPATH PATH
     保存退出，然后给java.sh分配权限：chmod 755 /etc/profile.d/java.sh</p>
<p>二、安装Apache（访问代理主机）
  1.下载apache源代码 <a href="http://archive.apache.org/dist/httpd/httpd-2.2.2.tar.gz" target="_blank"><a href="http://archive.apache.org/dist/httpd/httpd-2.2.2.tar.gz">http://archive.apache.org/dist/httpd/httpd-2.2.2.tar.gz</a></a></p>
<p> 解压缩 tar fvxz httpd-2.2.2.tar.gz</p>
<p>  2.进入解压后的目录。进行配置：
. / configure  -- prefix =/ usr / apache  -- enable - module = most  -- enable - proxy  -- enable - proxy - ajp  -- enable - forward  -- enable - proxy - connect  -- enable - proxy - http  -- enable - so  -- enable - deflate  -- enable - headers  -- enable - include</p>
<p>上面的配置，用到了其他一些模块，说不定以后会用到，如支持ssi的include模块。</p>
<p>  3.编译（编译如果不成功，确认一下你的linux是否安装有编译所需要的c环境和其他需要的类库）
    make</p>
<p>  4.安装 make install</p>
<p>  5.进入/usr/apache目录，运行apache  ./apachectl -k start</p>
<pre><code>  运行apache后，浏览一下是否运行正常。

关闭apache ./apachectl -k stop
</code></pre><p>   6.把apache作为linux的启动就运行服务程序
     执行如下操作：cp /usr/apache/bin/apachectl /etc/rc.d/init.d/httpd
     确认linux以前安装的httpd（apache）不需要了，你可覆盖掉以前apache的httpd文件。
     chkconfig --add httpd
     运行linux的setup，把httpd服务默认设定为自动运行。
     到现在，你就可用另一种方式来启动、关闭apache了。如service httpd start</p>
<p>三、安装tomcat（Web服务器）
    1.下载jakarta-tomcat-5.5.20.tar.gz
      tar zxf jakarta-tomcat-5.5.20.tar.gz 解压文件 （如解压到/usr/local/）
    2.设置环境变量 /#vi /etc/profile  添加
  CATALINA_HOME=/usr/local/jakarta-tomcat-5.5.30
  export CATALINA_HOME
      保存退出</p>
<pre><code>3.修改JVM内存：/bin/catalina.sh 文件
    在下/# ----- Execute The Requested Command -----------------
        /# Bugzilla 37848: only output this if we have a TTY
          if [ $have_tty -eq 1 ]; then
             echo &quot;Using CATALINA_BASE:   $CATALINA_BASE&quot;
             echo &quot;Using CATALINA_HOME:   $CATALINA_HOME&quot;
             echo &quot;Using CATALINA_TMPDIR: $CATALINA_TMPDIR&quot;
            if [ &quot;$1&quot; = &quot;debug&quot; -o &quot;$1&quot; = &quot;javac&quot; ] ; then
                echo &quot;Using JAVA_HOME:       $JAVA_HOME&quot;
            else
               echo &quot;Using JRE_HOME:       $JRE_HOME&quot;
            fi
           fi
        添加以下内容：
            CATALINA_OPTS = &quot; $CATALINA_OPTS -Xms256m -Xmx512m -XX:PermSize=32m  -XX:MaxPermSize=128m $JPDA_OPTS &quot;
            JAVA_OPTS = &quot; $JAVA_OPTS -Djava.awt.headless=true &quot;
            echo  &quot; Using CATALINA_OPTS: $CATALINA_OPTS &quot;
            echo  &quot; Using JAVA_OPTS: $JAVA_OPTS &quot;

4.运行/usr/local/jakarta-tomcat-5.5.30/bin/startup.sh 启动tomcat服务器 测试是否正常
</code></pre><p>四、配置apache代理(适用mod_proxy_ajp.so)
    编辑apache配置文件 /#vi /usr/apache/conf/httpd.conf
    1.配置proxy_ajp
 /#加载解析模块（windows下，或linux采用动态加载模式下需配置。前面我们的linux编译时把下面的模块嵌入到了apache中 </p>
<pre><code>   ，所以不用再加载）
</code></pre><p> LoadModule proxy_module modules/mod_proxy.so
 LoadModule proxy_ajp_module modules/mod_proxy_ajp.so
    2.配置文件添加
 ProxyPass  /  balancer: // tomcatcluster/ lbmethod=byrequests stickysession=JSESSIONID nofailover=on timeout=5  maxattempts = 3
 ProxyPassReverse  /  balancer: // tomcatcluster/
  &lt; Proxy balancer: // tomcatcluster &gt;
    BalancerMember ajp: // 192.168.40.15:8009 smax=2 loadfactor=1  route=tomca t1
    BalancerMember ajp: // 192.168.71.106:8009 smax=2 loadfactor=2  route=tomc at2
  &lt;/ Proxy &gt;</p>
<pre><code>    以上说明请参见mod_proxy中文手册 [http://www.6bee.com/tech/ApacheMenu/mod/mod_proxy.html](http://www.6bee.com/tech/ApacheMenu/mod/mod_proxy.html)
3.其他说明
</code></pre><p> 1、apache对tomcat的支持历史：apache第2.1版本后，内置了proxy_ajp，而jk2已经没人开发了，jk则支持到apache的</p>
<p>2.0.58版本。
proxy_ajp配置较简单，但可配置性还不如jk2，主要表现在proxy_ajp目前只支持配置到目录，还不支持对文件名称的pattern模式匹</p>
<p>配（即还不能定义到只对jsp文件起作用）。</p>
<p> 2、因为proxy_ajp的配置，还不支持对文件名称的pattern模式匹配，所以你要特别注意：
——尽量把jsp和静态文件和图片路径分不同的目录来管理；
——对于静态文件和图片路径，如/images，你可用“ProxyPass /images !”来禁止ProxyPass，从而来让apache来直接处理图片的请</p>
<p>求。
——关于apache的ssi（即shtml，include）与tomcat的集成时，shtml文件不能处于ProxyPass的控制下（即不能在ProxyPass目录）</p>
<p>，而shtml调用的jsp须在ProxyPass有效控制下；</p>
<p>五、配置Tomcat负载均衡、集群
    1.修改tomcat 的 conf/server.xml 的<Engine><br>    去掉注释<Engine name="Standalone" defaultHost="localhost" jvmRoute="tomcat1">
        jvmRoute是tomcat路由标示，由此区分两台tomcat主机，那么第二台就改为
            <Engine name="Standalone" defaultHost="localhost" jvmRoute="tomcat2">
    加上注释<Engine name="Catalina" defaultHost="localhost"></p>
<pre><code>2.修改tomcat 的 conf/server.xml 的&lt;Connector&gt; 
去掉注释&lt;Connector port=&quot;8009&quot;
           enableLookups=&quot;false&quot; redirectPort=&quot;8443&quot; debug=&quot;0&quot;
           protocol=&quot;AJP/1.3&quot; /&gt;   

3.修改tomcat 的 conf/server.xml 的&lt;Cluster&gt;   
&lt;!--  
     &lt; Cluster className = &quot; org.apache.catalina.cluster.tcp.SimpleTcpCluster &quot;
             managerClassName = &quot; org.apache.catalina.cluster.session.DeltaManager &quot;
             expireSessionsOnShutdown = &quot; false &quot;
             useDirtyFlag = &quot; true &quot;
             notifyListenersOnReplication = &quot; true &quot; &gt;
         &lt; Membership 
            className = &quot; org.apache.catalina.cluster.mcast.McastService &quot;
            mcastAddr = &quot; 228.0.0.4 &quot;
            mcastPort = &quot; 45564 &quot;
            mcastFrequency = &quot; 500 &quot;
            mcastDropTime = &quot; 3000 &quot; /&gt;
         &lt; Receiver 
            className = &quot; org.apache.catalina.cluster.tcp.ReplicationListener &quot;
            tcpListenAddress = &quot; auto &quot;
            tcpListenPort = &quot; 4001 &quot;
            tcpSelectorTimeout = &quot; 100 &quot;
            tcpThreadCount = &quot; 6 &quot; /&gt;
         &lt; Sender
            className = &quot; org.apache.catalina.cluster.tcp.ReplicationTransmitter &quot;
            replicationMode = &quot; pooled &quot;
            ackTimeout = &quot; 5000 &quot; /&gt;
         &lt; Valve className = &quot; org.apache.catalina.cluster.tcp.ReplicationValve &quot;
               filter = &quot; ./*\.gif;./*\.js;./*\.jpg;./*\.png;./*\.htm;./*\.html;./*\.css;./*\.txt; &quot; /&gt;

         &lt; Deployer className = &quot; org.apache.catalina.cluster.deploy.FarmWarDeployer &quot;
                  tempDir = &quot; /tmp/war-temp/ &quot;
                  deployDir = &quot; /tmp/war-deploy/ &quot;
                  watchDir = &quot; /tmp/war-listen/ &quot;
                  watchEnabled = &quot; false &quot; /&gt;

         &lt; ClusterListener className = &quot; org.apache.catalina.cluster.session.ClusterSessionListener &quot; /&gt;
     &lt;/ Cluster &gt;
     --&gt;
</code></pre><p>把上面的注释拿掉 就ok 了！</p>
<p>4.在每个webapps应用中,修改web.xml文件 添加元素<distributable/>
最后完工，重启tomcat,apahce测试平衡负载，新建jsp页面
&lt;%
Runtime lRuntime = Runtime.getRuntime();
out.println(&quot;/<em>/</em>/<em> BEGIN MEMORY STATISTICS /</em>/<em>/</em><br/>&quot;);
out.println(&quot;Free  Memory: &quot;+lRuntime.freeMemory()/1024/1024+&quot;M<br/>&quot;);
out.println(&quot;Max   Memory: &quot;+lRuntime.maxMemory()/1024/1024+&quot;M<br/>&quot;);
out.println(&quot;Total Memory: &quot;+lRuntime.totalMemory()/1024/1024+&quot;M<br/>&quot;);
out.println(&quot;Available Processors : &quot;+lRuntime.availableProcessors()+&quot;<br/>&quot;);
out.println(&quot;/<em>/</em>/<em> END MEMORY STATISTICS /</em>/<em>/</em>&quot;);
%&gt;
<br>
&lt;%= request.getSession().getId() %&gt;
放入到两台tomcat的ROOT目录中测试
再测试集群(session复制)
posted on 2006-11-15 11:06 <a href="http://www.blogjava.net/envoydada/" target="_blank">Derek.Guo</a> 阅读(3196) <a href="http://www.blogjava.net/envoydada/archive/2006/11/15/81196.html#Post" target="_blank">评论(0)</a>  <a href="http://www.blogjava.net/envoydada/admin/EditPosts.aspx?postid=81196" target="_blank">编辑</a>  <a href="http://www.blogjava.net/envoydada/AddToFavorite.aspx?id=81196" target="_blank">收藏</a> 所属分类: <a href="http://www.blogjava.net/envoydada/category/32100.html" target="_blank">Linux/Unix</a> <img src="" alt=""></p>
<p><a href="http://www.blogjava.net/RequireRegister.aspx" target="_blank">新用户注册</a>  <a href="">刷新评论列表</a>  </p>
<p><a href=""></a> <a href="http://job.cnblogs.com/">找优秀程序员，就在博客园</a>
IT新闻：
· <a href="http://news.cnblogs.com/n/128015/" target="_blank">开源Tizen系统视频泄露 外观似诺基亚MeeGo</a>
· <a href="http://news.cnblogs.com/n/128014/" target="_blank">Opera推出电视应用商店 提供HTML5应用</a>
· <a href="http://news.cnblogs.com/n/128013/" target="_blank">CES 2012 开展前演讲：电子设备消费将达 1 万亿美元</a>
· <a href="http://news.cnblogs.com/n/128012/" target="_blank">分析师称苹果借转售NAND闪存获数十亿美元利润</a>
· <a href="http://news.cnblogs.com/n/128011/" target="_blank">爱创会：火花，火焰，火光</a>   <a href="http://www.cnblogs.com/" target="_blank">博客园</a>  <a href="http://q.cnblogs.com/" target="_blank">博问</a>  <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>  <a href="http://job.cnblogs.com/cate-java_programmer/" target="_blank">Java程序员招聘</a> 标题  请输入标题 姓名  请输入你的姓名 主页 请输入验证码 验证码 /*  <img src="" alt=""> 内容(请不要发表任何与政治相关的内容) 请输入评论内容 Remember Me?   <a href="http://www.blogjava.net/login.aspx?ReturnURL=http://www.blogjava.net/envoydada/archive/2006/11/15/81196.html&amp;SourceURL=/envoydada/archive/2006/11/15/81196.html" target="_blank">登录</a>       [使用Ctrl+Enter键可以直接提交]    推荐职位：
· <a href="http://job.cnblogs.com/Offer/18582/" target="_blank">北京C++游戏服务端研发工程师(武神世纪网络)</a>
· <a href="http://job.cnblogs.com/offer/16502/" target="_blank">知识库技术编辑(博客园)</a>
· <a href="http://job.cnblogs.com/offer/18594/" target="_blank">北京Web系统工程师(嘉康利中国)</a>
· <a href="http://job.cnblogs.com/offer/13272/" target="_blank">.NET 高级软件开发工程师(5173.com)</a>
· <a href="http://job.cnblogs.com/offer/10223/" target="_blank">中高级.NET程序员(沪江网)</a>
· <a href="http://job.cnblogs.com/Offer/13754/" target="_blank">石家庄高级.NET工程师（月薪6K-8K）(盛安德科技)</a></p>
<p>博客园首页随笔：
· <a href="http://www.cnblogs.com/ralphjzhang/archive/2012/01/09/2317463.html" target="_blank">再论 Time stamp counter</a>
· <a href="http://www.cnblogs.com/default/archive/2012/01/09/2317506.html" target="_blank">我在ZZ这八年</a>
· <a href="http://www.cnblogs.com/phphuaibei/archive/2012/01/09/2317484.html" target="_blank">写在2012里的2011总结</a>
· <a href="http://www.cnblogs.com/west-link/archive/2012/01/09/2317477.html" target="_blank">高效程序员秘籍（8）：养成使用网络笔记本、网络文件同步工具的习惯</a>
· <a href="http://www.cnblogs.com/judgelee/archive/2012/01/09/2317474.html" target="_blank">Ext.get()与Ext.fly()之区别</a>
知识库：
· <a href="http://kb.cnblogs.com/page/127846/" target="_blank">持续集成之“Everything is code”</a>
· <a href="http://kb.cnblogs.com/page/127845/" target="_blank">持续集成之“软件自我识别”</a>
· <a href="http://kb.cnblogs.com/page/127843/" target="_blank">持续集成之戏说Check-in Dance</a>
· <a href="http://kb.cnblogs.com/page/111014/" target="_blank">什么是闭包，我的理解</a>
· <a href="http://kb.cnblogs.com/page/111780/" target="_blank">什么是闭包(Closure)？</a>  网站导航:</p>
<p><a href="http://www.cnblogs.com/" title="程序员的网上家园" target="_blank">博客园</a>   <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>   <a href="http://kb.cnblogs.com/" target="_blank">知识库</a>   <a href="http://www.cppblog.com/" target="_blank">C++博客</a>   <a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a>   <a href="http://www.blogjava.net/envoydada/archive/2006/11/15/81196.html?opt=admin" target="_blank">管理</a> 相关文章:</p>
<ul>
<li><a href="http://www.blogjava.net/envoydada/archive/2011/12/29/367529.html" target="_blank">使用 sendfile() 提升网络文件发送性能</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2011/03/15/346300.html" target="_blank">Web服务器性能/压力测试工具http_load、webbench、ab、Siege(转)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2010/04/08/317711.html" target="_blank">liunx下安装Subversion</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2008/07/29/218323.html" target="_blank">Window下配置SVN服务器与客户端(转)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2008/06/11/207028.html" target="_blank">Solaris系统进程的查看和管理</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/09/29/149640.html" target="_blank">Solaris 操作系统的动态跟踪工具Dtrace</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/08/01/133838.html" target="_blank">Linux自启Tomcat,Solaris自启glassfish</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/07/30/133285.html" target="_blank">JProfiler远程监控Tomcat</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/07/24/132080.html" target="_blank">Glassfish的安装</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/07/10/129316.html" target="_blank">启动Solaris10-webmin</a>  </li>
</ul>
<p><a href="&quot;Go to the previous month&quot;">&lt;</a>2006年11月<a href="&quot;Go to the next month&quot;">&gt;</a>日一二三四五六293031123456<a href="http://www.blogjava.net/envoydada/archive/2006/11/07.html" target="_blank">7</a><a href="http://www.blogjava.net/envoydada/archive/2006/11/08.html" target="_blank">8</a>9<a href="http://www.blogjava.net/envoydada/archive/2006/11/10.html" target="_blank">10</a>11121314<a href="http://www.blogjava.net/envoydada/archive/2006/11/15.html" target="_blank">15</a><a href="http://www.blogjava.net/envoydada/archive/2006/11/16.html" target="_blank">16</a>1718192021222324252627282930123456789</p>
<h3 id="-7-">留言簿(7)</h3>
<ul>
<li><a href="http://www.blogjava.net/envoydada/Contact.aspx?id=1" target="_blank">给我留言</a></li>
<li><a href="http://www.blogjava.net/envoydada/default.aspx?opt=msg" target="_blank">查看公开留言</a></li>
<li><a href="http://www.blogjava.net/envoydada/admin/MyMessages.aspx" target="_blank">查看私人留言</a></li>
</ul>
<h1 id="-80-">随笔分类(80)</h1>
<ul>
<li><a href="http://www.blogjava.net/envoydada/category/45572.html" target="_blank">Cache(2)</a><a href="http://www.blogjava.net/envoydada/category/45572.html/rss" title="Subscribe to Cache(2)" target="_blank"><img src="&quot;Subscribe to Cache(2" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/envoydada/category/32101.html" target="_blank">Database(9)</a><a href="http://www.blogjava.net/envoydada/category/32101.html/rss" title="Subscribe to Database(9)" target="_blank"><img src="&quot;Subscribe to Database(9" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/envoydada/category/32099.html" target="_blank">Java(51)</a><a href="http://www.blogjava.net/envoydada/category/32099.html/rss" title="Subscribe to Java(51)" target="_blank"><img src="&quot;Subscribe to Java(51" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/envoydada/category/32100.html" target="_blank">Linux/Unix(14)</a><a href="http://www.blogjava.net/envoydada/category/32100.html/rss" title="Subscribe to Linux/Unix(14)" target="_blank"><img src="&quot;Subscribe to Linux/Unix(14" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/envoydada/category/45571.html" target="_blank">NoSqlDB(4)</a><a href="http://www.blogjava.net/envoydada/category/45571.html/rss" title="Subscribe to NoSqlDB(4)" target="_blank"><img src="&quot;Subscribe to NoSqlDB(4" alt="">&quot;)</a></li>
</ul>
<h1 id="-">技术网站</h1>
<ul>
<li><a href="http://www.54chen.com/" target="_blank">54chen</a></li>
<li><a href="http://www.coreseek.com/" target="_blank">Coreseek中文全文检索</a></li>
<li><a href="http://dominic.blog.chinaunix.net/" target="_blank">Dominic-Blog</a></li>
<li><a href="http://code.google.com/p/gflot/" target="_blank">GFlot</a></li>
<li>GWT charting library <a href="http://repository.jboss.org/maven2/ca/nanometrics/gflot/1.0.0/" target="_blank">http://repository.jboss.org/maven2/ca/nanometrics/gflot/1.0.0/</a></li>
<li><a href="http://gwt.google.com/samples/Showcase/Showcase.html" target="_blank">GWT Showcase</a></li>
<li><a href="http://www.ibm.com/developerworks/cn/xml/x-javacc/part1/" target="_blank">JavaCC、解析树和 XQuery 语法</a></li>
<li><a href="http://www.mongodb.org/display/DOCS/Manual" target="_blank">Mongodb手册</a></li>
<li><a href="http://doc.mysql.cn/mysql5/refman-5.1-zh.html-chapter/" target="_blank">MySQL 5.1参考手册</a></li>
<li><a href="http://www.mysqlsystems.com/" target="_blank">Mysql部落</a></li>
<li><a href="http://wiki.nginx.org/NginxChs" target="_blank">Nginx 的中文维基</a></li>
<li><a href="http://redis.io/" target="_blank">Redis</a></li>
<li><a href="http://sphinxsearch.com/" target="_blank">Sphinxsearch</a></li>
<li><a href="http://code.google.com/p/spymemcached/" target="_blank">spymemcached</a></li>
<li>A simple, asynchronous, single-threaded memcached client written in java.</li>
<li><a href="http://code.google.com/p/spymemcached/" target="_blank">Spymemcached</a></li>
<li><a href="http://www.tigase.org/" target="_blank">Tigase</a></li>
<li>轻量高性能JABBER/XMPP服务器，带GWT开发的客户端</li>
<li><a href="http://www.ibm.com/developerworks/cn/java/j-lo-tomcat1/index.html" target="_blank">Tomcat 系统架构与设计模式</a></li>
<li><a href="http://code.google.com/p/xmemcached/" target="_blank">xmemcached</a></li>
<li>Extreme performance modern memcached client for java</li>
<li><a href="http://www.boobooke.com/bbs/index.php" target="_blank">播布客</a></li>
<li><a href="http://blog.csdn.net/chinull/archive/2010/03/17/5390830.aspx" target="_blank">百度文库浏览器分析及实现</a></li>
<li><a href="http://www.linuxdiyf.com/" target="_blank">红联Linux</a></li>
</ul>
<h3 id="-">积分与排名</h3>
<ul>
<li>积分 - 107622</li>
<li>排名 - 186</li>
</ul>
<h3 id="-">最新随笔</h3>
<ul>
<li><a href="http://www.blogjava.net/envoydada/archive/2011/12/29/367529.html" target="_blank">1. 使用 sendfile() 提升网络文件发送性能</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2011/03/15/346300.html" target="_blank">2. Web服务器性能/压力测试工具http_load、webbench、ab、Siege(转)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2010/07/13/325947.html" target="_blank">3. Magent：Memcached集群代理</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2010/07/05/325305.html" target="_blank">4. Mongodb Import Export Tools</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2010/07/05/325266.html" target="_blank">5. Mongodb dbshell Reference</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2010/06/23/324266.html" target="_blank">6. 转mongodb入门</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2010/06/23/324255.html" target="_blank">7. Mongodb Dynamic querys select</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2010/04/08/317718.html" target="_blank">8. mysql常用的hint</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2010/04/08/317716.html" target="_blank">9. Mysql innodb引擎优化</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2010/04/08/317713.html" target="_blank">10. J2SE6 分析工具</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2010/04/08/317711.html" target="_blank">11. liunx下安装Subversion</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2009/02/07/253698.html" target="_blank">12. ORACLE 中dbms_stats的使用</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2008/09/28/231708.html" target="_blank">13. Memcached 剖析(转)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2008/07/29/218323.html" target="_blank">14. Window下配置SVN服务器与客户端(转)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2008/06/18/208808.html" target="_blank">15. Oracle 10g Recycle Bin</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2008/06/16/208221.html" target="_blank">16. Oracle中分区表的使用</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2008/06/12/207472.html" target="_blank">17. ORACLE CTXCAT-CATSEARCH</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2008/06/12/207288.html" target="_blank">18. ORACLE JOBS</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2008/06/11/207090.html" target="_blank">19. Oracle 分区表(Partition)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2008/06/11/207028.html" target="_blank">20. Solaris系统进程的查看和管理</a></li>
</ul>
<h3 id="-http-www-blogjava-net-envoydada-commentsrss-aspx-">最新评论 <a href="http://www.blogjava.net/envoydada/CommentsRSS.aspx" target="_blank"><img src="" alt=""></a></h3>
<ul>
<li><a href="http://www.blogjava.net/envoydada/archive/2011/07/13/106322.html#354291" target="_blank">1. re: Hibernate 本地SQL查询SQLQuery</a></li>
<li>不错,很受用</li>
<li>--happytjn</li>
<li><a href="http://www.blogjava.net/envoydada/archive/2010/05/21/46964.html#321538" target="_blank">2. re: DES加密</a></li>
<li>评论内容较长,点击标题查看</li>
<li>--woxiangbo</li>
<li><a href="http://www.blogjava.net/envoydada/archive/2010/04/07/138549.html#317660" target="_blank">3. re: JAVA缩放图片（转贴）</a></li>
<li>希望能用</li>
<li>--moguji</li>
<li><a href="http://www.blogjava.net/envoydada/archive/2009/10/20/106322.html#299083" target="_blank">4. re: Hibernate 本地SQL查询SQLQuery[未登录]</a></li>
<li>很好，谢谢啦</li>
<li>--xx</li>
<li><a href="http://www.blogjava.net/envoydada/archive/2009/09/30/106322.html#296990" target="_blank">5. re: Hibernate 本地SQL查询SQLQuery</a></li>
<li>很不错啊， 谢谢。。</li>
<li>--carvin</li>
</ul>
<h3 id="-">阅读排行榜</h3>
<ul>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/03/26/106322.html" target="_blank">1. Hibernate 本地SQL查询SQLQuery(11576)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2005/09/13/12894.html" target="_blank">2. Hibernate批量更新和批量删除(8941)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/05/10/45438.html" target="_blank">3. Spring+Hibernate+Struts(4960)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/07/30/133285.html" target="_blank">4. JProfiler远程监控Tomcat(4646)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/11/07/79516.html" target="_blank">5. Spring DataSource注入(3902)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/03/06/102152.html" target="_blank">6. Spring+hibernate分页查询(3677)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/08/28/66182.html" target="_blank">7. Spring Hibernate 模板实现分页(3500)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/05/08/115877.html" target="_blank">8. Java调用Linux命令(3496)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/09/07/68308.html" target="_blank">9. Hibernate one-to-many学习笔记(3431)</a></li>
<li><a href="">10. Apache + Tomcat/*2集群 负载平衡(Linux环境)(3196)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2009/02/07/253698.html" target="_blank">11. ORACLE 中dbms_stats的使用(3084)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/07/23/131803.html" target="_blank">12. java虚拟机参数详解(3009)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/04/26/43355.html" target="_blank">13. WEB定时器-Timer(2151)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/07/30/133329.html" target="_blank">14. 工具分析GC日志(2014)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2005/09/11/12654.html" target="_blank">15. Struts中logic:iterate标记的使用(1871)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/11/10/80309.html" target="_blank">16. Tomcat内存配置(1823)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/05/09/116195.html" target="_blank">17. JAVA访问LDAP(1709)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2005/09/11/12655.html" target="_blank">18. Tomcat5.0连接池(1697)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2005/09/11/12679.html" target="_blank">19. Hibernate-Extension和Middlegen-Hibernate(1692)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/07/20/131410.html" target="_blank">20. Spring配置总结(1663)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/08/30/66559.html" target="_blank">21. EL表达式(1341)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/08/22/138549.html" target="_blank">22. JAVA缩放图片（转贴）(1326)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/04/20/42153.html" target="_blank">23. Hibernate主键生成方式(1285)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/08/15/63743.html" target="_blank">24. JAVA的RSS阅读器(1276)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/11/07/79585.html" target="_blank">25. Tomcat 通过数据库验证的配置方法(BASIC,FORM).(1274)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/12/15/87862.html" target="_blank">26. hibernate二级缓存攻略 Ehcache(转贴)(1224)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2008/06/16/208221.html" target="_blank">27. Oracle中分区表的使用(1180)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/03/15/35434.html" target="_blank">28. Hibernate3.0批量更新和批量删除(1175)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/07/20/131433.html" target="_blank">29. GC调优(1162)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/09/20/146797.html" target="_blank">30. Hibernate属性延迟加载(1122)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/03/28/37791.html" target="_blank">31. Struts常用标签(1120)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/10/12/74758.html" target="_blank">32. RedHat终端中文乱码解决(1077)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/12/27/170920.html" target="_blank">33. 数据库性能 常用SQL(1070)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/06/05/50423.html" target="_blank">34. Spring 定时器(927)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/05/19/46964.html" target="_blank">35. DES加密(869)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/01/18/28446.html" target="_blank">36. Log4j配置(849)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/07/24/132080.html" target="_blank">37. Glassfish的安装(785)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2006/05/11/45645.html" target="_blank">38. Java调用windows程序(747)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2007/06/08/122881.html" target="_blank">39. Hibernate3支持DetachedCriteria(转贴)(718)</a></li>
<li><a href="http://www.blogjava.net/envoydada/archive/2008/06/11/207090.html" target="_blank">40. Oracle 分区表(Partition)(705)</a>
Powered by: <a href="http://www.cnblogs.com/" target="_blank">博客园</a> 模板提供：<a href="http://blog.hjenglish.com/" target="_blank">沪江博客</a> Copyright ©2012 Derek.Guo</li>
</ul>
<p>MSN:envoydada@hotmail.com QQ:34935442</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/服务器/">服务器</a></li></span><span class="breadcrumb"><li><a href="/categories/服务器/">服务器</a></li><li><a href="/categories/服务器/集群/">集群</a></li></span></span> | <span class="tags">Tagged <a href="/tags/服务器/" class="label label-primary">服务器</a><a href="/tags/集群/" class="label label-success">集群</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-服务器-集群--ApacheTomcat2集群负载平衡Linux环境/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-服务器-集群--ApacheTomcat2集群负载平衡Linux环境" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-服务器-集群--LINUX下使用apachetomcat构建WEB集群系统/">最新分享_分享_百度空间</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-服务器-集群--LINUX下使用apachetomcat构建WEB集群系统/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-_-_-">最新分享<em>分享</em>百度空间</h1>
<p><a href="http://hi.baidu.com/index.htm" target="_blank"><img src="" alt="百度空间Logo"></a></p>
<ul>
<li><p><a href="http://apps.hi.baidu.com/" target="_blank">应用</a>
<a href="http://hi.baidu.com/reg/new" target="_blank">注册</a>用户名:   密码:</p>
</li>
<li><p><a href="http://apps.hi.baidu.com/hoho" target="_blank">HOHO</a></p>
</li>
<li><a href="http://apps.hi.baidu.com/share" target="_blank">分享</a></li>
<li><a href="http://apps.hi.baidu.com/vote" target="_blank">投票</a></li>
<li><a href="http://apps.hi.baidu.com/test" target="_blank">测试</a></li>
<li><a href="http://apps.hi.baidu.com/gift" target="_blank">礼物</a></li>
</ul>
<h3 id="-http-hi-baidu-com-ihome-square-"><a href="http://hi.baidu.com//ihome/square" target="_blank">交友中心</a></h3>
<ul>
<li><a href="http://apps.hi.baidu.com/dashan" target="_blank">搭讪</a></li>
<li><a href="http://apps.hi.baidu.com/duiwei" target="_blank">对味测试</a></li>
<li><a href="http://apps.hi.baidu.com/suliao" target="_blank">闪电速聊</a></li>
<li><p><a href="http://hi.baidu.com//ihome/square" target="_blank">找朋友</a></p>
<h3 id="-http-apps-hi-baidu-com-apps-"><a href="http://apps.hi.baidu.com/apps" target="_blank">应用大厅</a></h3>
</li>
<li><p><a href="http://apps.hi.baidu.com/kaixinbuluo" target="_blank">开心部落</a></p>
</li>
<li><a href="http://apps.hi.baidu.com/rongcar" target="_blank">汽车工厂</a></li>
<li><p><a href="http://apps.hi.baidu.com/paopaoyu" target="_blank">泡泡鱼</a></p>
</li>
<li><p><a href="http://youxi.baidu.com/prom.xhtml?code=G-%D7%8E%81%B2%29%FF%8AR%BC%8B%EE%85%1C%E5" target="_blank">网页游戏</a></p>
</li>
</ul>
<h2 id="-">分享</h2>
<ul>
<li><a href="http://apps.hi.baidu.com/share/" target="_blank">热门分享</a></li>
<li><a href="http://apps.hi.baidu.com/share/latest/?type=video" target="_blank">最新分享</a></li>
<li><a href="http://apps.hi.baidu.com/share/detail/14955683#" target="_blank">好友的分享</a></li>
<li><a href="http://apps.hi.baidu.com/share/detail/14955683#" target="_blank">我的分享</a>
<a href="http://apps.hi.baidu.com/share/detail/14955683#" target="_blank">如何分享?</a> <a href="http://tieba.baidu.com/f?kw=%B0%D9%B6%C8%BF%D5%BC%E4" target="_blank">问题反馈</a></li>
</ul>
<p><a href=""></a></p>
<p><a href="http://hi.baidu.com/sys/checkuser/lpwok/3" target="_blank"><img src="" alt=""></a></p>
<p>   <a href="http://apps.hi.baidu.com/share/user/68db6c70776f6bd905" target="_blank">lpwok的分享</a></p>
<p>分享</p>
<p><a href="http://apps.hi.baidu.com/share/detail/14959808#content" target="_blank"></a>  <a href="http://apps.hi.baidu.com/share/detail/14797932#content"></a>
LINUX下使用apache+tomcat构建WEB集群系统</p>
<p><strong>一、集群的基本知识</strong>
        集群技术是目前非 常流行的提高系统服务能力与高可靠性（ HA- High Availability ）的手段，通过把多个独立的服务器组成一个集群可以实现失效无缝转移。也就是说当有某一台集群中的服务器当机后，其上的用户状态数据可以无缝迁移到集群中 的其他服务器上。这样，正在使用应用的客户可以完全感觉不到影响，大大提供了系统的可靠性。</p>
<p>集群有很多种类和层次，例如：操作系统集群（如 Linux 、 Solaris 等），数据库集群（如 DB2 、 Oracle 等），应用服务器集群（如 GlassFish 、 WebLogic 等） ,Web 集群（如 Tomcat 等）。本教程将向读者介绍由 Tomcat 搭建的 Web 集群。</p>
<p>不管是由什么技术搭建的集群，其基本组成由下图所示：
<img src="" alt="">
图 1-1</p>
<p>从图中可以看出，每个集群都需要一个负载均衡器，其负责根据一定的算法将外界发送到集群的请求尽量均匀地分配到集群中的每个服务器，使得集群中所有 服务器的负载尽量平衡。对外界的客户端而言其并不知道具体访问了集群中的哪台服务器，多台服务器从逻辑上对外界而言可以看作一台&quot;大&quot;服务器。这样，当集 群的服务能力不能满足当前的需要时，可以非常方便地再向集群中添加新的服务器来满足需要。可以看出，使用了集群之后，系统具有非常好的可扩展性。</p>
<p>当不幸集群中有某台服务器突然当机时，其用户状态数据可以迁移到其他服务器上，不影响在线用户的使用。这样，通过使用集群技术可以方便地实现系统的高可靠性。</p>
<p>本教程中将介绍的使用 Tomcat 搭建的 Web 集群结构如图 1-2 所示：</p>
<p><img src="" alt="">
图 1-2</p>
<p>从图中可以看出集群的负载均衡器由开源的 Apache 服务器担任，集群中的 Web 服务器由两个 Tomcat 服务器分别担任，后台的数据库服务器由一个 MySQL 服务器担任。</p>
<p>提示：本教程中介绍的是 Web 集群，因此数据库服务器只有一个，并没有搭建集群。在需要的情况下，多台数据库服务器也可以组成集群以提高服务能力与可靠性。</p>
<p><strong>二、安装JDK</strong></p>
<p><strong>三、安装TOMCAT</strong></p>
<ol>
<li>下载tomcat，可以通过下面的命令下载：</li>
</ol>
<p>/#wget <a href="http://apache.mirror.phpchina.com/tomcat/tomcat-6/v6.0.18/bin/apache-tomcat-6.0.18.tar.gz" target="_blank">http://apache.mirror.phpchina.com/tomcat/tomcat-6/v6.0.18/bin/apache-tomcat-6.0.18.tar.gz</a></p>
<ol>
<li>解压启动测试：</li>
</ol>
<p>/#tar -zxvf apache-tomcat-6.0.18.tar.gz
/#./apache-tomcat-6.0.18/bin/startup.sh</p>
<p>在浏览器中输入：<a href=""><a href="http://localhost:8080">http://localhost:8080</a></a>,看是否启动正常，若正常进行第三步。</p>
<ol>
<li>下面通过一个简单的&quot; Test.jsp &quot;程序进一步验证 Tomcat 是否安装成功，新建名称为&quot; Test.jsp &quot;的 Jsp 源文件并在其中输入如下代码。</li>
</ol>
<p>&lt;%@ page contentType=&quot;text/html;charset=GBK&quot;%&gt;</p>
<p><html></p>
<p><head></p>
<p><title> Tomcat<em> </em>测试 </title>
</head></p>
<p><body></p>
<p><font color = "red" size = "20" >
&lt;% out.print( &quot;<em> </em>恭喜您，成功的安装并启动了 Tomcat<em> </em>！！！ &quot; ); %&gt;
</font>
</body>
</html></p>
<ol>
<li>重启（命令如下），然后输入：<a href=""><a href="http://localhost:8080/Test.jsp">http://localhost:8080/Test.jsp</a></a> 看是否正常。</li>
</ol>
<p>/#./apache-tomcat-6.0.18/bin/shutdown.sh
/#./apache-tomcat-6.0.18/bin/startup.sh</p>
<p><strong>四：TOMCAT集群的搭建</strong></p>
<ol>
<li>安装两个或以上tomcat</li>
</ol>
<p>/#./apache-tomcat-6.0.18/bin/shutdown.sh
/#mv apache-tomcat-6.0.18 /usr/local/TC6_A
/#cd /usr/local
/#cp -a TC6_A TC6_B</p>
<p>提示：进行上述步骤操作的原因是，本案例中集群的各个 Tomcat 服务器实例运行在同一个物理服务器上，因此集群中有几个 Tomcat 实例一般就需要几个 Tomcat 的安装。另外，由于集群中的各个 Tomcat 实例位于同一个物理服务器上的一个操作系统下，因此各个实例占用的各种网络端口不能相同，否则集群中的多个 Tomcat 实例不能同时正常启动，下面的步骤将介绍如何修改 Tomcat 实例需要使用的各个网络端口。</p>
<ol>
<li>修改 Tomcat 实例需要使用的各个网络端口</li>
</ol>
<ul>
<li>找到 server.xml 配置文件中的&quot; Server &quot;配置项目，并进行修改。
<Server port="8005" shutdown="SHUTDOWN">
<Server port="10005" shutdown="SHUTDOWN"><Server port="20005" shutdown="SHUTDOWN">

</li>
</ul>
<p>说明：第一行为两个 Tomcat 修改前的情况，第二行为 TC6_A Tomcat 修改后的情况，第三行为 TC6_B Tomcat 修改后的情况。</p>
<ul>
<li><p>找到 server.xml 配置文件中的相应&quot; Connector &quot;配置项目，并进行修改。</p>
</li>
<li><p>修改前内容如下：</p>
</li>
</ul>
<p><!-- Define an AJP 1.3 Connector on port 8009 --></p>
<p><Connector port = "8009" protocol = "AJP/1.3" redirectPort = "8443" /></p>
<ul>
<li>TC6_A 中修改后内容如下：</li>
</ul>
<p><!-- Define an AJP 1.3 Connector on port 8009 --></p>
<p><Connector port = " 10009 " protocol = "AJP/1.3" redirectPort = " 10043 " /></p>
<ul>
<li>TC6_B 中修改后内容如下：</li>
</ul>
<p><!-- Define an AJP 1.3 Connector on port 8009 --></p>
<Connector port = " 20009 " protocol = "AJP/1.3" redirectPort = " 20043 " />

<p>提示：此步骤目的是修改 AJP Connector 端口。</p>
<ul>
<li><p>找到 server.xml 配置文件中的另一个相应&quot; Connector &quot;配置项目，并进行修改。</p>
</li>
<li><p>修改前内容如下：</p>
</li>
</ul>
<p><Connector port = "8080" protocol = "HTTP/1.1" connectionTimeout = "20000"
redirectPort = "8443" /></p>
<ul>
<li>TC6_A 中修改后内容如下：</li>
</ul>
<p><Connector port = "10001" protocol = "HTTP/1.1" connectionTimeout = "20000"
redirectPort = "10043" /></p>
<ul>
<li>TC6_B 中修改后内容如下：</li>
</ul>
<Connector port = "20001" protocol = "HTTP/1.1" connectionTimeout = "20000"
redirectPort = "20043" />

<p>提示：此步骤目的是修改 HTTP Connector 端口，其中的&quot; 10001 &quot;与&quot; 20001 &quot;是未来通过浏览器访问集群中各个 Tomcat 实例的 HTTP 端口。</p>
<ul>
<li><p>通过修改 Engine 配置选项，配置集群中每个 Tomcat 实例的名称。</p>
</li>
<li><p>修改前内容如下：</p>
</li>
</ul>
<p>&lt;!-- You should set jvmRoute to support load-balancing via AJP ie :</p>
<p><Engine name = "Standalone" defaultHost = "localhost" jvmRoute = "jvm1"></p>
<p><Engine name = "Catalina" defaultHost = "localhost">
--&gt;</p>
<ul>
<li>TC6_A 中修改后内容如下：</li>
</ul>
<p><Engine name = "Standalone" defaultHost = "localhost" jvmRoute = " Tomcat1"></p>
<ul>
<li>TC6_B 中修改后内容如下：</li>
</ul>
<Engine name = "Standalone" defaultHost = "localhost" jvmRoute = " Tomcat2">

<p>提示：请读者注意在修改过程中要注释掉原来 name 为 Catalina 的 Engine 配置项目，将 name 为 Standalone 的 Engine 配置项目的注释去掉并修改 jvmRoute 属性。</p>
<ul>
<li><p>修改配置文件中的 Cluster 配置项目，对集群的各项参数进行设置。</p>
</li>
<li><p>修改前内容如下：</p>
</li>
</ul>
<Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster" />
<em> TC6_A 中修改后内容如下：

<Cluster className = "org.apache.catalina.ha.tcp.SimpleTcpCluster" channelSendOptions = "8">
<Manager className = "org.apache.catalina.ha.session.DeltaManager"
expireSessionsOnShutdown = "false"
notifyListenersOnReplication = "true" />
<Channel className = "org.apache.catalina.tribes.group.GroupChannel" >
<Membership className = "org.apache.catalina.tribes.membership.McastService"
address = "228.0.0.4"
port = "45564"
frequency = "500"
dropTime = "3000"/>
<Receiver className = "org.apache.catalina.tribes.transport.nio.NioReceiver"
address = "auto"
port = "4000"
autoBind = "100"
selectorTimeout = "5000"
maxThreads = "6" />
<Sender className = "org.apache.catalina.tribes.transport.ReplicationTransmitter" >
<Transport className = "org.apache.catalina.tribes.transport.nio.PooledParallelSender" />
</Sender>
<Interceptor
className = "org.apache.catalina.tribes.group.interceptors.TcpFailureDetector" />
<Interceptor className="org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor" />
</Channel>
<Valve className = "org.apache.catalina.ha.tcp.ReplicationValve" filter="" />
<Valve className = "org.apache.catalina.ha.session.JvmRouteBinderValve" />
<Deployer className = "org.apache.catalina.ha.deploy.FarmWarDeployer"
tempDir = "/tmp/war-temp/"
deployDir = "/tmp/war-deploy/"
watchDir = "/tmp/war-listen/"
watchEnabled = "false"/>
<ClusterListener className = "org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener" />
<ClusterListener className = "org.apache.catalina.ha.session.ClusterSessionListener" />
</Cluster>
</em> TC6_B 中修改后内容如下：

<Cluster
className = "org.apache.catalina.ha.tcp.SimpleTcpCluster"
channelSendOptions = "8"
>
<Manager className = "org.apache.catalina.ha.session.DeltaManager"
expireSessionsOnShutdown = "false"
notifyListenersOnReplication = "true" />
<Channel className = "org.apache.catalina.tribes.group.GroupChannel">
<Membership className = "org.apache.catalina.tribes.membership.McastService"
address = "228.0.0.4"
port = "45564"
frequency = "500"
dropTime = "3000" />
<Receiver className = "org.apache.catalina.tribes.transport.nio.NioReceiver"
address = "auto"
port = "4000"
autoBind = "100"
selectorTimeout = "5000"
maxThreads = "6" />
<Sender className = "org.apache.catalina.tribes.transport.ReplicationTransmitter">
<Transport className = "org.apache.catalina.tribes.transport.nio.PooledParallelSender" />
</Sender>
<Interceptor className = "org.apache.catalina.tribes.group.interceptors.TcpFailureDetector" />
<Interceptor className="org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor" />
</Channel>
<Valve className = "org.apache.catalina.ha.tcp.ReplicationValve"
filter = ""/>
<Valve className = "org.apache.catalina.ha.session.JvmRouteBinderValve" />
<Deployer className = "org.apache.catalina.ha.deploy.FarmWarDeployer"
tempDir = "/tmp/war-temp/"
deployDir = "/tmp/war-deploy/"
watchDir = "/tmp/war-listen/"
watchEnabled = "false" />
<ClusterListener className = "org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener" />
<ClusterListener className = "org.apache.catalina.ha.session.ClusterSessionListener" />
</Cluster>

<p>提示：上述配置内容主要是对集群中各个 Tomcat 实例间进行通信的方式、端口以及 Session 共享算法的设置。本教程由于篇幅所限，不能一一详细介绍，有兴趣的读者可以参看 Tomcat 的官方文档，其中有非常详细的说明。</p>
<p>3、测试搭建，分别启动两个tomcat，看是否正常，若正常进行第四步。
<a href=""><a href="http://localhost:10001">http://localhost:10001</a></a>
<a href=""><a href="http://localhost:20001">http://localhost:20001</a></a></p>
<p>4、简单的 JSP 来进一步测试对&quot; TC6_A &quot;和&quot; TC6_B &quot;的设置是否成功,分别建立两个文件：Hello.jsp。
&lt;%@ page contentType=&quot;text/html;charset=GBK&quot;%&gt;</p>
<p><html></p>
<p><head></p>
<p><title>Tomcat 测试 </title>
</head></p>
<p><body></p>
<p><font color="red" size="20">
&lt;!— 使用 out 内建对象打印一条消息到输出页面 --&gt;
&lt;% out.print( &quot;Tomcat 集群测试 A ！！！ &quot; ); %&gt;
</font>
</body>
</html>
TC6_B的改一行输出：
&lt;% out.print( &quot;Tomcat 集群测试 B ！！！ &quot; ); %&gt;</p>
<p>如果能顺利地在浏览器中见到上述两个页面，则说明集群中的两个 Tomcat 实例工作完全正常。下面就可以为集群安装、设置 Apache 负载均衡器了。</p>
<p><strong>五、Apache负载均衡器的安装与配置</strong></p>
<ol>
<li>下载安装</li>
</ol>
<p>/# wget <a href="http://www.apache.org/dist/httpd/httpd-2.2.9.tar.gz" target="_blank">http://www.apache.org/dist/httpd/httpd-2.2.9.tar.gz</a>
/# tar -zxvf httpd-2.2.9.tar.gz
/# cd httpd-2.2.9
/# ./configure --prefix=/usr/local/httpd --enable-mods-shared=&#39;proxy proxy_ajp proxy_balancer&#39;
/# make
/# make install</p>
<ol>
<li>配置Apache 为 Tomcat 集群的负载均衡器</li>
</ol>
<p>ProxyRequests Off
ProxyPass / balancer://myCluster/</p>
<Proxy balancer://myCluster/>
BalancerMember ajp://localhost:10009 route=Tomcat1
BalancerMember ajp://localhost:20009 route=Tomcat2
</Proxy>

<p>说明：其中&quot; myCluster &quot;是集群的名称，&quot; ajp://localhost:10009 route=Tomcat1 &quot; 对应 Tomcat 集群中的 TC6_A 实例，&quot; ajp://localhost:20009 route=Tomcat2 &quot; 对应 Tomcat 集群中的 TC6_B 实例。经过上述配置后， Apache 就可以成为前面搭建的 Tomcat 集群的负载均衡器了。</p>
<p><strong>六、感受成果</strong></p>
<ol>
<li>重启apache httpd后，访问：<a href=""><a href="http://localhost/Hello.jsp">http://localhost/Hello.jsp</a></a>。</li>
<li><p>由 于 Apache 作为 Tomcat 集群的负载均衡器，使用的是轮换算法，其均匀地将请求发送到集群中的各个 Tomcat 实例。因此，从1的测试中可以看出，是轮换访问两个不同 Tomcat 实例中的 Hello.jsp 页面的。当然，看到轮换的情况也就说明 Apache 负载均衡器正常工作了。
<strong>七、补充重要细节</strong></p>
<p> 1、在应用时候，工程的web.xml里面要加上这么一个属性，实现Session共享：
……<em><distributable/></em></p>
</li>
</ol>
<p><em></web-app>
</em></p>
<pre><code>文件中的“ *&lt;distributable/&gt;*”项，是由于本案例将部署到集群中的多个服务器上。如果在配置文件中没 有此项，则应用在集群中不能实现分布式 Session 共享，也就是说当机后用户状态数据（存放在 Session 中的）无法无缝迁移到 Tomcat 集群中的其他服务器上。此项非常重要，请读者多加留心。

然后在依次启动TC6_A,TC6_B,你会在TC6_A的日志里面看到他们的通信日志，不然就是没有成功。

2、Tomcat6 集群要求负载均衡器工作在“ sticky session ”模式下，否则集群可能工作不正常。
</code></pre><p>对“ <strong><em>ProxyPass</em></strong>”项目进行如下修改。</p>
<ul>
<li>修改前</li>
</ul>
<p><strong><em>ProxyPass / balancer://myCluster/</em></strong></p>
<ul>
<li>修改后</li>
</ul>
<p><strong><em>ProxyPass / balancer://myCluster/ lbmethod=byrequests stickysession=JSESSIONID nofailover=Off</em></strong></p>
<p>提示： 修改后添加的“ stickysession=JSESSIONID ”项就是让 Apache 负载均衡器工作在“ sticky session ”模式下。所谓“ sticky session ”模式就是对于使用到同一个 Session 的请求绑定到集群中的特定服务器上，而不是轮换访问各个服务器，这样 Session 就不会工作不正常了。当然，对于使用不同 Session 的请求，还是进行负载均衡轮换的。</p>
<p>本文参照：<a href="http://www.unix-center.net" target="_blank">http://www.unix-center.net</a>
为了您的安全，请只打开来源可靠的网址</p>
<p><a href="http://hi.baidu.com/iammonster/blog/item/84710cdbb1b9f660d1164e60.html" target="_blank">打开网站</a>    <a href="http://apps.hi.baidu.com/share/detail/14955683#" target="_blank">取消</a></p>
<p> 来自: <a href="http://hi.baidu.com/iammonster/blog/item/84710cdbb1b9f660d1164e60.html" target="_blank"><a href="http://hi.baidu.com/iammonster/blog/item/84710cdbb1b9f660d1164e60.html">http://hi.baidu.com/iammonster/blog/item/84710cdbb1b9f660d1164e60.html</a></a></p>
<p><a href=""></a></p>
<p><a href="http://apps.hi.baidu.com/share/detail/14959808#content" target="_blank"></a>  <a href="http://apps.hi.baidu.com/share/detail/14797932#content"></a>
来自: <a href="http://hi.baidu.com/sys/checkuser/iammonster007/3" target="_blank"><img src="" alt=""></a> <a href="http://hi.baidu.com/sys/checkuser/iammonster007/3" target="_blank">iammonster007</a> 第一分享: <a href="http://hi.baidu.com/sys/checkuser/lpwok/3" target="_blank"><img src="" alt=""></a> <a href="http://hi.baidu.com/sys/checkuser/lpwok/3" target="_blank">lpwok</a>  时间: 2010-07-20 16:58 评论: 1条 投票: 1次 本贴分享: 5 累计分享: 6</p>
<h3 id="-1-">共有1人发表观点</h3>
<ul>
<li><p>色妹Q:2372819618
...或者输入其他标签词：
lpwok的 博客 相关分享:</p>
</li>
<li><p><a href="http://apps.hi.baidu.com/share/detail/6723926" title="经典智力挑战游戏——【密室逃脱】全集！！！" target="_blank">经典智力挑战游戏——【密室逃脱】全集！！...</a></p>
</li>
<li><a href="http://apps.hi.baidu.com/share/detail/2863700" title="Ubuntu Linux下Apache的配置文件" target="_blank">Ubuntu Linux下Apache的配置文件</a></li>
<li><a href="http://apps.hi.baidu.com/share/detail/2863689" title="ubuntu中tar.gz/tar.bz2/rar等压缩包软件安装教程" target="_blank">ubuntu中tar.gz/tar.bz2/rar等压缩包软件安...</a></li>
<li><a href="http://apps.hi.baidu.com/share/detail/2327312" title="SEO工具大集合" target="_blank">SEO工具大集合</a></li>
</ul>
<h3 id="-1-">评论(1)</h3>
<p><a href="http://hi.baidu.com/sys/checkuser/784633420/3" target="_blank"><img src="" alt=""></a></p>
<p>2011年12月21日 16:48 <a href="http://hi.baidu.com/sys/checkuser/784633420/3" target="_blank">784633420</a></p>
<p>非常准确</p>
<p><a href="http://help.baidu.com/question?prod_en=space" target="_blank">帮助中心</a> | <a href="http://tieba.baidu.com/f?kw=%B0%D9%B6%C8%BF%D5%BC%E4&amp;fr=wwwt" target="_blank">空间客服</a> | <a href="http://tousu.baidu.com/hi/add" target="_blank">投诉中心</a> | <a href="http://www.baidu.com/search/hi_contract.html" target="_blank">空间协议</a></p>
<p>©2012 Baidu</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/服务器/">服务器</a></li></span><span class="breadcrumb"><li><a href="/categories/服务器/">服务器</a></li><li><a href="/categories/服务器/集群/">集群</a></li></span></span> | <span class="tags">Tagged <a href="/tags/服务器/" class="label label-primary">服务器</a><a href="/tags/集群/" class="label label-success">集群</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-服务器-集群--LINUX下使用apachetomcat构建WEB集群系统/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-服务器-集群--LINUX下使用apachetomcat构建WEB集群系统" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-服务器-集群--Linux下Apache与Tomcat整合的简单方法-LinuxSirOrg/">Linux下Apache与Tomcat整合的简单方法 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-服务器-集群--Linux下Apache与Tomcat整合的简单方法-LinuxSirOrg/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="linux-apache-tomcat-linuxsir-org">Linux下Apache与Tomcat整合的简单方法 - LinuxSir.Org</h1>
<p><a href=""></a> <a href="http://www.linuxsir.org/bbs/index.php?s=b91078e77de0bd2a626708973b8082ac"><img src="&quot;LinuxSir.Org&quot;" alt="LinuxSir.Org"></a>   用户名  密码   记住信息</p>
<p>| <a href="http://www.linuxsir.org/" target="_blank">网站首页</a> |   <a href="http://www.linuxsir.org/bbs/faq.php?s=b91078e77de0bd2a626708973b8082ac" target="_blank">论坛帮助</a> |
欢迎来到<strong>LinuxSir.Org</strong>! 您还未登录，请登录后查看论坛，或者点击论坛上方的注册链接注册新账号。
<a href="http://www.linuxsir.org/bbs/showthread.php?t=236915#" target="_blank"><img src="&quot;返回&quot;" alt="返回"></a>   <a href="http://www.linuxsir.org/bbs/index.php?s=b91078e77de0bd2a626708973b8082ac" target="_blank">LinuxSir.Org</a> &gt; <a href="http://www.linuxsir.org/bbs/forumdisplay.php?s=b91078e77de0bd2a626708973b8082ac&amp;f=39" target="_blank">Linux 发行版讨论区 —— LinuxSir.Org</a> &gt; <a href="http://www.linuxsir.org/bbs/forumdisplay.php?s=b91078e77de0bd2a626708973b8082ac&amp;f=49" target="_blank">Linux 发行版Debian专题</a> &gt; Linux下Apache与Tomcat整合的简单方法
转到页面...  <a href=""></a>  <a href="http://www.linuxsir.org/bbs/newthread.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newthread&amp;f=49"><img src="&quot;发表新主题&quot;" alt="发表新主题"></a>  <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;noquote=1&amp;p=1354073" target="_blank"><img src="&quot;回复&quot;" alt="回复"></a>     <a href="http://www.linuxsir.org/bbs/showthread.php?t=236915&amp;nojs=1#goto_threadtools" target="_blank">主题工具</a>  <img src="" alt=""></p>
<p><a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-23, 20:51 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1354073&amp;postcount=1" target="_blank"><strong>第 1 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=45616" target="_blank"><strong>Kilin</strong></a></p>
<p><img src="" alt=""></p>
<p><a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=45616" target="_blank"><img src="&quot;Kilin 的头像&quot;" alt="Kilin 的头像"></a>  </p>
<p>注册会员<br>  注册日期: Jun 2004</p>
<p>  帖子: 321
  <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;goodnees=1&amp;u=45616" target="_blank">精华</a>: 1        <strong>标题: Linux下Apache与Tomcat整合的简单方法</strong>
1、准备，下载需要的文件。这里假定你已经正确安装配置好了JDK。
到Apache官方网站下载所需要的文件：
httpd-2.2.0.tar.gz
apache-tomcat-5.5.12.tar.gz
jakarta-tomcat-connectors-1.2.15-src.tar.gz
其中httpd和jakarta-tomcat-connectors为源码包，apache-tomcat为二进制包。
2、安装Apache。
代码: /# tar xzvf httpd-2.2.0.tar.gz /# cd httpd-2.2.0 /# ./configure --prefix=/usr/local/apache2 --enable-so /# make /# make install3、安装Tomcat。
代码: /# cp apache-tomcat-5.5.12.tar.gz /usr/local/ /# cd /usr/local /# tar xzvf apache-tomcat-5.5.12.tar.gz /# ln -s apache-tomcat-5.5.12 tomcat4、编译生成mod_jk。
代码: /# tar xzvf jakarta-tomcat-connectors-1.2.15-src.tar.gz /# cd jakarta-tomcat-connectors-1.2.15-src/jk/native /# ./configure --with-apxs=/usr/local/apache2/bin/apxs /# make /# cp ./apache-2.0/mod_jk.so /usr/local/apache2/modules/5、配置。
在/usr/local/apache2/conf/下面建立两个配置文件mod_jk.conf和workers.properties。
/# vi mod_jk.conf
添加以下内容：
代码: /# 指出mod_jk模块工作所需要的工作文件workers.properties的位置 JkWorkersFile /usr/local/apache2/conf/workers.properties /# Where to put jk logs JkLogFile /usr/local/apache2/logs/mod_jk.log /# Set the jk log level [debug/error/info] JkLogLevel info /# Select the log format JkLogStampFormat &quot;[%a %b %d %H:%M:%S %Y]&quot; /# JkOptions indicate to send SSL KEY SIZE, JkOptions +ForwardKeySize +ForwardURICompat -ForwardDirectories /# JkRequestLogFormat set the request format JkRequestLogFormat &quot;%w %V %T&quot; /# 将所有servlet 和jsp请求通过ajp13的协议送给Tomcat，让Tomcat来处理 JkMount /servlet//<em> worker1 JkMount //</em>.jsp worker1/# vi workers.properties
添加以下内容：
代码: /# Defining a worker named worker1 and of type ajp13 worker.list=worker1 /# Set properties for worker1 worker.worker1.type=ajp13 worker.worker1.host=localhost worker.worker1.port=8009 worker.worker1.lbfactor=50 worker.worker1.cachesize=10 worker.worker1.cache_timeout=600 worker.worker1.socket_keepalive=1 worker.worker1.socket_timeout=300再配置httpd.conf，作以下修改：
将Listen 80 修改为 Listen 127.0.0.1:80
将ServerName 修改为 ServerName LocalHost:80
在DirectoryIndex中添加 index.jsp
我的网页放在/var/wwwroot下，所以要修改DocumentRoot
代码: DocumentRoot &quot;/var/wwwroot&quot; <Directory "/var/wwwroot"> Options Includes FollowSymLinks AllowOverride None Order deny,allow Allow from all XBitHack on </Directory> <Directory "/var/wwwroot/WEB-INF"> Order deny,allow Deny from all </Directory>增加关于加载mod_jk的语句：
代码: LoadModule jk_module modules/mod_jk.so Include /usr/local/apache2/conf/mod_jk.conf最后编辑Tomcat的配置文件server.xml，在HOST段中加入：
代码: <Context path="" docBase="/var/wwwroot" debug="0" reloadable="true" crossContext="true"/>在/var/wwwroot下建立一个index.jsp，启动Apache和Tomcat，用浏览器访问<a href="http://localhost/，应该可以看到正确的页面了。" target="_blank">http://localhost/，应该可以看到正确的页面了。</a></p>
<hr>
<p>Only the strong survive.
Blog:<a href="http://www.ylxiong.cn/" target="_blank">http://www.ylxiong.cn/</a>
Linux 2.6</p>
<p><em>此帖于 05-12-23 20:55 被 Kilin 编辑.</em>   <img src="&quot;Kilin 当前离线&quot;" alt="Kilin 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1354073" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>Kilin <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=45616" target="_blank">查看公开信息</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=45616" target="_blank">查找 Kilin 发表的更多帖子</a></p>
<p><a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-24, 19:59 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1354576&amp;postcount=2" target="_blank"><strong>第 2 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><strong>lyingjie</strong></a>  <img src="&quot;帅哥&quot;" alt="帅哥"></p>
<p><img src="" alt=""></p>
<p><a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><img src="&quot;lyingjie 的头像&quot;" alt="lyingjie 的头像"></a>  </p>
<p>注册会员<br>  注册日期: Aug 2005</p>
<p>  帖子: 284
  精华: 0        问一下老兄，Apache2不能用apt进行安装吗</p>
<hr>
<p>Debian Linux学习基地
<a href="http://www.debian.ha.cn" target="_blank">http://www.debian.ha.cn</a>   <img src="&quot;lyingjie 当前离线&quot;" alt="lyingjie 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1354576" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>lyingjie <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank">查看公开信息</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=89579" target="_blank">查找 lyingjie 发表的更多帖子</a>
<a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-24, 20:58 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1354612&amp;postcount=3" target="_blank"><strong>第 3 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><strong>lyingjie</strong></a>  <img src="&quot;帅哥&quot;" alt="帅哥"></p>
<p><img src="" alt=""></p>
<p><a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><img src="&quot;lyingjie 的头像&quot;" alt="lyingjie 的头像"></a>  </p>
<p>注册会员<br>  注册日期: Aug 2005</p>
<p>  帖子: 284
  精华: 0        我用apt安装时进入apache2目录后没有conf这个子目录   <img src="&quot;lyingjie 当前离线&quot;" alt="lyingjie 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1354612" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>lyingjie <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank">查看公开信息</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=89579" target="_blank">查找 lyingjie 发表的更多帖子</a></p>
<p><a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-24, 21:35 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1354644&amp;postcount=4" target="_blank"><strong>第 4 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=45616" target="_blank"><strong>Kilin</strong></a></p>
<p><img src="" alt=""></p>
<p><a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=45616" target="_blank"><img src="&quot;Kilin 的头像&quot;" alt="Kilin 的头像"></a>  </p>
<p>注册会员<br>  注册日期: Jun 2004</p>
<p>  帖子: 321
  <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;goodnees=1&amp;u=45616" target="_blank">精华</a>: 1        可以吧 应该在/etc/local/etc/目录下吧.......
或者在/etc/local/share/etc/下
如果做服务器用的话 建议安装基本系统 然后再自己安装需要的Server端软件。   <img src="&quot;Kilin 当前离线&quot;" alt="Kilin 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1354644" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>Kilin <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=45616" target="_blank">查看公开信息</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=45616" target="_blank">查找 Kilin 发表的更多帖子</a>
<a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-25, 11:35 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1354810&amp;postcount=5" target="_blank"><strong>第 5 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><strong>lyingjie</strong></a>  <img src="&quot;帅哥&quot;" alt="帅哥"></p>
<p><img src="" alt=""></p>
<p><a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><img src="&quot;lyingjie 的头像&quot;" alt="lyingjie 的头像"></a>  </p>
<p>注册会员<br>  注册日期: Aug 2005</p>
<p>  帖子: 284
  精华: 0        谢了我在试试   <img src="&quot;lyingjie 当前离线&quot;" alt="lyingjie 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1354810" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>lyingjie <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank">查看公开信息</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=89579" target="_blank">查找 lyingjie 发表的更多帖子</a></p>
<p><a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-25, 11:58 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1354826&amp;postcount=6" target="_blank"><strong>第 6 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=45616" target="_blank"><strong>Kilin</strong></a></p>
<p><img src="" alt=""></p>
<p><a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=45616" target="_blank"><img src="&quot;Kilin 的头像&quot;" alt="Kilin 的头像"></a>  </p>
<p>注册会员<br>  注册日期: Jun 2004</p>
<p>  帖子: 321
  <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;goodnees=1&amp;u=45616" target="_blank">精华</a>: 1        汗.....昨天喝高了 把路径打得一塌糊涂.....
应该是/etc
或者是/usr/etc
或者是/usr/local/etc
猜的~   <img src="&quot;Kilin 当前离线&quot;" alt="Kilin 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1354826" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>Kilin <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=45616" target="_blank">查看公开信息</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=45616" target="_blank">查找 Kilin 发表的更多帖子</a>
<a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-25, 14:24 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1354897&amp;postcount=7" target="_blank"><strong>第 7 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><strong>lyingjie</strong></a>  <img src="&quot;帅哥&quot;" alt="帅哥"></p>
<p><img src="" alt=""></p>
<p><a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><img src="&quot;lyingjie 的头像&quot;" alt="lyingjie 的头像"></a>  </p>
<p>注册会员<br>  注册日期: Aug 2005</p>
<p>  帖子: 284
  精华: 0        好的，那在问你一个问题我现在按照你所讲的我已经配成了JSP可以为什么我打开静态页是打不开呀？
提示你无权查看该页   <img src="&quot;lyingjie 当前离线&quot;" alt="lyingjie 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1354897" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>lyingjie <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank">查看公开信息</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=89579" target="_blank">查找 lyingjie 发表的更多帖子</a></p>
<p><a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-25, 17:38 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1354988&amp;postcount=8" target="_blank"><strong>第 8 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=45616" target="_blank"><strong>Kilin</strong></a></p>
<p><img src="" alt=""></p>
<p><a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=45616" target="_blank"><img src="&quot;Kilin 的头像&quot;" alt="Kilin 的头像"></a>  </p>
<p>注册会员<br>  注册日期: Jun 2004</p>
<p>  帖子: 321
  <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;goodnees=1&amp;u=45616" target="_blank">精华</a>: 1        httpd.conf里的权限设置.....   <img src="&quot;Kilin 当前离线&quot;" alt="Kilin 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1354988" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>Kilin <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=45616" target="_blank">查看公开信息</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=45616" target="_blank">查找 Kilin 发表的更多帖子</a>
<a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-25, 17:43 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1354995&amp;postcount=9" target="_blank"><strong>第 9 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><strong>lyingjie</strong></a>  <img src="&quot;帅哥&quot;" alt="帅哥"></p>
<p><img src="" alt=""></p>
<p><a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><img src="&quot;lyingjie 的头像&quot;" alt="lyingjie 的头像"></a>  </p>
<p>注册会员<br>  注册日期: Aug 2005</p>
<p>  帖子: 284
  精华: 0        能不能说的在明白点呀，我以前做LAMP时有时也会出现这样子的问题   <img src="&quot;lyingjie 当前离线&quot;" alt="lyingjie 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1354995" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>lyingjie <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank">查看公开信息</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=89579" target="_blank">查找 lyingjie 发表的更多帖子</a></p>
<p><a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-26, 09:59 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1355323&amp;postcount=10" target="_blank"><strong>第 10 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><strong>lyingjie</strong></a>  <img src="&quot;帅哥&quot;" alt="帅哥"></p>
<p><img src="" alt=""></p>
<p><a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><img src="&quot;lyingjie 的头像&quot;" alt="lyingjie 的头像"></a>  </p>
<p>注册会员<br>  注册日期: Aug 2005</p>
<p>  帖子: 284
  精华: 0        还有我如果用Apt安装的话那不能给讲讲如何做呀   <img src="&quot;lyingjie 当前离线&quot;" alt="lyingjie 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1355323" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>lyingjie <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank">查看公开信息</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=89579" target="_blank">查找 lyingjie 发表的更多帖子</a>
<a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-27, 22:02 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1356579&amp;postcount=11" target="_blank"><strong>第 11 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=55742" target="_blank"><strong>marvel</strong></a></p>
<p><img src="" alt=""></p>
<p>注册会员<br>  注册日期: Oct 2004</p>
<p>  帖子: 489
  精华: 0        apache配置文件的默认路径应该是/etc/apache/httpd.conf吧</p>
<hr>
<p>Thinkpad T60
酷睿 1.83GHz+512Mb DDR+80Gb+ATI(64Mb)
Debian unstable   <img src="&quot;marvel 当前离线&quot;" alt="marvel 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1356579" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>marvel <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=55742" target="_blank">查看公开信息</a> <a href="http://marvel.hit.edu.cn/" target="_blank">访问 marvel 的个人网站</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=55742" target="_blank">查找 marvel 发表的更多帖子</a></p>
<p><a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-28, 03:25 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1356702&amp;postcount=12" target="_blank"><strong>第 12 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=27503" target="_blank"><strong>wjl</strong></a></p>
<p><img src="" alt=""></p>
<p><a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=27503" target="_blank"><img src="&quot;wjl 的头像&quot;" alt="wjl 的头像"></a>  </p>
<p>注册会员<br>  注册日期: Nov 2003</p>
<p>  我的住址: 北京
  帖子: 90</p>
<p>  精华: 0
  good谢谢</p>
<hr>
<p>FreeBSD
RHEL AS</p>
<h2 id="windows-xp">Windows XP</h2>
<p>借我一生,好好爱你   <img src="&quot;wjl 当前离线&quot;" alt="wjl 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1356702" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>wjl <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=27503" target="_blank">查看公开信息</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=27503" target="_blank">查找 wjl 发表的更多帖子</a>
<a href=""><img src="&quot;旧&quot;" alt="旧"></a> 05-12-28, 10:35 <a href="http://www.linuxsir.org/bbs/showpost.php?s=b91078e77de0bd2a626708973b8082ac&amp;p=1356852&amp;postcount=13" target="_blank"><strong>第 13 帖</strong></a> <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><strong>lyingjie</strong></a>  <img src="&quot;帅哥&quot;" alt="帅哥"></p>
<p><img src="" alt=""></p>
<p><a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank"><img src="&quot;lyingjie 的头像&quot;" alt="lyingjie 的头像"></a>  </p>
<p>注册会员<br>  注册日期: Aug 2005</p>
<p>  帖子: 284
  精华: 0        你说的是Apache1.3的位置   <img src="&quot;lyingjie 当前离线&quot;" alt="lyingjie 当前离线">   <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;p=1356852" target="_blank"><img src="&quot;回复时引用此帖&quot;" alt="回复时引用此帖"></a></p>
<p>lyingjie <a href="http://www.linuxsir.org/bbs/member.php?s=b91078e77de0bd2a626708973b8082ac&amp;u=89579" target="_blank">查看公开信息</a> <a href="http://www.linuxsir.org/bbs/search.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=finduser&amp;u=89579" target="_blank">查找 lyingjie 发表的更多帖子</a>
<a href="http://www.linuxsir.org/bbs/newthread.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newthread&amp;f=49" target="_blank"><img src="&quot;发表新主题&quot;" alt="发表新主题"></a>  <a href="http://www.linuxsir.org/bbs/newreply.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=newreply&amp;noquote=1&amp;p=1356852" target="_blank"><img src="&quot;回复&quot;" alt="回复"></a>
<strong>«</strong> <a href="http://www.linuxsir.org/bbs/showthread.php?s=b91078e77de0bd2a626708973b8082ac&amp;t=236915&amp;goto=nextoldest" target="_blank">上一主题</a> | <a href="http://www.linuxsir.org/bbs/showthread.php?s=b91078e77de0bd2a626708973b8082ac&amp;t=236915&amp;goto=nextnewest" target="_blank">下一主题</a> <strong>»</strong>
主题工具<a href=""></a> <img src="&quot;显示可打印版本&quot;" alt="显示可打印版本"> <a href="http://www.linuxsir.org/bbs/printthread.php?s=b91078e77de0bd2a626708973b8082ac&amp;t=236915">显示可打印版本</a> <img src="&quot;邮寄本页给好友&quot;" alt="邮寄本页给好友"> <a href="http://www.linuxsir.org/bbs/sendmessage.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=sendtofriend&amp;t=236915" target="_blank">邮寄本页给好友</a>      <a href="http://www.linuxsir.org/bbs/showthread.php?t=236915#top" target="_blank"><img src="" alt=""></a> 发帖规则 您 [不可以] 发表新主题</p>
<p>您 [不可以] 回复主题
您 [不可以] 上传附件</p>
<p>您 [不可以] 编辑您的帖子
已 [启用] <a href="http://www.linuxsir.org/bbs/misc.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=bbcode" target="_blank">BB 代码</a></p>
<p>已 [启用] <a href="http://www.linuxsir.org/bbs/misc.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=showsmilies" target="_blank">表情符号</a>
已 [启用] <a href="http://www.linuxsir.org/bbs/misc.php?s=b91078e77de0bd2a626708973b8082ac&amp;do=bbcode#imgcode" target="_blank">IMG 代码</a></p>
<p>已 [禁用] HTML 代码 [论坛跳转…]
用户控制面板 悄悄话 收藏夹 会员在线状态 搜索论坛 论坛首页    Linux 综合讨论区 —— LinuxSir.Org     Linux 基础建设讨论专版     Linux shell进阶应用与shell编程     Linux 专业英文精品技术文档专题         Gas中文小组讨论区     Linux 硬件及周边设备     Linux 网络与服务器架设     Linux 系统及网络安全讨论专版     Linux及计算机学科基础理论版  Linux 发行版讨论区 —— LinuxSir.Org     Linux 发行版SuSE专题     Linux 发行版Archlinux讨论区     Linux 发行版Debian专题     Ubuntu Linux 专题讨论     Linux 发行版Slackware专题     Linux 发行版 LFS 讨论区         Olive讨论区 （实验版）     Linux 发行版Mandriva专题     Linux 发行版Redhat/Fedora/CentOS专题     Linux 发行版Gentoo讨论区     Mini Linux 及准系统研究     Linux 发行版红旗专题     LoongSon-龙芯讨论区     Linux 发行版其他专题         Linux发行版 Turbolinux专题         PowerPC Linux 讨论区  Google 产品讨论区 —— LinuxSir.Org     Android  Linux 软件应用讨论区 —— LinuxSir.Org     Linux 输入开发与研究     Linux 软件专题讨论         软件下载讨论区         即时通讯  Linux 高级应用讨论区 —— LinuxSir.Org     Linux 数据库专题讨论     Linux 认证考试学习与经验交流     Linux 内核研究小组     Linux 企业级应用专题讨论  编程开发讨论区 —— LinuxSir.Org     Linux 程序设计专题讨论     Java 程序设计开发讨论     Perl | PHP | Python 脚本程序开发     嵌入式Linux讨论区──实验田版  Unix 技术讨论区 —— LinuxSir.Org     BSD 讨论专题         BSD 新闻安全观察         RelaxBSD 讨论区     Solaris 讨论专题     MacOSX &amp; Darwin 讨论专题  社区中心 —— LinuxSir.Org     LinuxSir 论坛管理         LinuxSir 论坛临时存放区     LinuxSir 文章管理系统和BBS程序研究小组     小企鹅新闻图书馆     LinuxSir.Org 同城行 ── 我的城市
所有时间均为[北京时间]。现在的时间是 21:28。
<strong><a href="http://www.linuxsir.org/" target="_blank">网站首页</a> - <a href="mailto:kevin@linuxsir.org">联系我们</a> - <a href="http://www.linuxsir.org/bbs/showthread.php?t=236915#top" target="_blank">返回顶端</a></strong>
Powered by vBulletin 版本 3.6.8
版权所有 ©2000 - 2012, Jelsoft Enterprises Ltd.
官方中文技术支持: <a href="http://www.vbulletin-china.cn/" target="_blank">vBulletin 中文</a></p>
<p>版权所有 ©2002 - 2011, LinuxSir.Org</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/服务器/">服务器</a></li></span><span class="breadcrumb"><li><a href="/categories/服务器/">服务器</a></li><li><a href="/categories/服务器/集群/">集群</a></li></span></span> | <span class="tags">Tagged <a href="/tags/服务器/" class="label label-primary">服务器</a><a href="/tags/集群/" class="label label-success">集群</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-服务器-集群--Linux下Apache与Tomcat整合的简单方法-LinuxSirOrg/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-服务器-集群--Linux下Apache与Tomcat整合的简单方法-LinuxSirOrg" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-服务器-集群--apachetomcat整合LINUX/">apache+tomcat整合(LINUX) </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-服务器-集群--apachetomcat整合LINUX/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="apache-tomcat-linux-linux-linux-">apache+tomcat整合(LINUX) - 技术文档 - 网络技术 Linux时代 - 开源、自由、共享 - 中国最大的Linux技术社区</h1>
<p>·<a href="http://www.chinaunix.net/" target="_blank">ChinaUnix首页</a> ·<a href="http://bbs.chinaunix.net/" target="_blank">论坛</a> ·<a href="http://blog.chinaunix.net/" target="_blank">博客</a>   <img src="" alt=""> <img src="" alt=""> <a href="http://linux.chinaunix.net/" target="_blank">Linux首页</a> | <a href="http://linux.chinaunix.net/news/" target="_blank">Linux新闻</a> | <a href="http://linux.chinaunix.net/bbs" target="_blank"><strong>Linux论坛</strong></a> | <a href="http://linux.chinaunix.net/techdoc/" target="_blank">Linux文档</a> | <a href="http://download.chinaunix.net/disc/linux/" target="_blank">Linux下载</a> | <a href="http://blog.chinaunix.net/techart.php?frmid=6" target="_blank">Linux博客</a> | <a href="http://search.chinaunix.net/" target="_blank">Linux搜索</a> | <a href="http://linux.chinaunix.net/bbs/index.php?gid=68" target="_blank">开源项目孵化平台</a> | <a href="http://linux.chinaunix.net/ebook/" target="_blank">《开源时代》</a> <img src="" alt=""> <a href="http://linux.chinaunix.net/techdoc/beginner/" target="_blank">新手入门</a> |  <a href="http://linux.chinaunix.net/techdoc/install/" target="_blank">安装启动</a> |  <a href="http://linux.chinaunix.net/techdoc/system/" target="_blank">管理员指南</a> | <a href="http://man.chinaunix.net/" target="_blank">开发手册</a> | <a href="http://linux.chinaunix.net/techdoc/desktop/" target="_blank">桌面应用</a> | <a href="http://linux.chinaunix.net/techdoc/develop/" target="_blank">程序开发</a> | <a href="http://linux.chinaunix.net/techdoc/database/" target="_blank">数据库</a> |  <a href="http://linux.chinaunix.net/techdoc/net/" target="_blank">网络技术</a>| <a href="http://linux.chinaunix.net/topics/2007-01-25/15/index.shtml" target="_blank">CentOS</a> | <a href="http://linux.chinaunix.net/search2.php?key=fedora&amp;id=0" target="_blank">Fedora</a> |  <a href="http://linux.chinaunix.net/search2.php?key=mysql&amp;id=0" target="_blank">MySQL</a> |  <a href="http://linux.chinaunix.net/search2.php?key=apache&amp;id=0" target="_blank">Apache</a> |  <a href="http://linux.chinaunix.net/search2.php?key=ubuntu&amp;id=0" target="_blank">Ubuntu</a> |  <a href="http://linux.chinaunix.net/topics/2008-07-10/18/index.shtml" target="_blank">Gentoo</a>| <strong><a href="http://linux.chinaunix.net/topics/2008-07-30/19/index.shtml" target="_blank">OSCON08</a></strong>    <a href="http://linux.chinaunix.net/" target="_blank">Linux时代</a> &gt;&gt; <a href="http://linux.chinaunix.net/techdoc/" target="_blank">技术文档</a> &gt;&gt; <a href="http://linux.chinaunix.net/techdoc/net/" target="_blank">网络技术</a>  apache+tomcat整合(LINUX)  来源: ChinaUnix博客 　日期： 2007.12.28 13:38　(共有条评论) <a href="http://linux.chinaunix.net/bbs/thread-975323-1-1.html" target="_blank">我要评论</a>   这里介绍两类方法：
    这里假设你已安装并且配置好了JDK
                           一：用apt-get 安装
apt-get install apache2 tomcat5.5 libapache2-mod-jk
设置Tomcat管理员帐号
Tomcat的用户帐号信息都保存在tomcat-users.xml的文件中，运行
sudo gedit /usr/share/tomcat6/conf/tomcat-users.xml在的标签前添加一行
保存并关闭。重新运行tomcat即可输入该用户名和密码，登录Tomcat的管理页面。
确认一下在apache2的启动模块中是否有jk.load
/#sudo ls /etc/apache2/mods-enabled/
/#sudo vi /etc/libapache2-mod-jk/workers.properties
workers.tomcat_home=/usr/share/tomcat6
workers.java_home=/usr/lib/jvm/java-6-sun
/#sudo vi /usr/share/doc/libapache2-mod-jk/httpd_example_apache2.conf
复制里面的内容到apache2.conf
最后重启apache tomcat上传jsp文件到usr/share/tomcat6/webapps/ROOT
                               二:手动下载安装
1.安装jdk
2.安装tomcat
3.编译安装apache2
4.停止以上两个启动的服务:tomcat,apache
5.编译安装jk-connector
6.编辑配置文件
7.看结果吧
详细流程：
1.安装jdk
1.1
下载jdk包，可以是rpm包或者tar包，解压缩到某目录，然后
ln -s /usr/local/src/jdk-1.6./<em> /usr/local/java
1.2
设置环境变量
vi /etc/profile
export JAVA_HOME=/usr/local/java/
export PATH=$PATH:$JAVA_HOME/bin
export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export JRE_HOME=$JAVA_HOME/jre
1.3
启用环境变量
source /etc/profile
1.4
检验成功否
java -version 或 javac -v
2.安装tomcat
tar zxvf /mnt/hgfs/Untitled-1/apache-tomcat-5.5.12.tar.gz -C /usr/local/src/
ln -s /usr/local/src/apache-tomcat-5.5.12 /usr/local/tomcat
/usr/local/tomcat/bin/startup.sh
在浏览器中输入<a href="http://IP地址:8080" target="_blank">http://IP地址:8080</a>
可以看到大花猫了。
3.编译安装apache2
tar zxvf /mnt/hgfs/Untitled-1/httpd-2.2.4.tar.gz  -C /usr/local/src/
cd /usr/local/src/httpd-2.2.4
在进行编译之前要确保系统中没有apr或者apr-util的rpm包或者deb包。下面一下子编译安装了apr，apr-util，httpd
cd srclib/apr &amp;&amp; ./configure --prefix=/usr/local/apr &amp;&amp; make &amp;&amp; make install &amp;&amp; cd ../apr-util &amp;&amp; ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr &amp;&amp; make &amp;&amp; make install &amp;&amp; cd ../.. &amp;&amp; ./configure --prefix=/usr/local/httpd --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util --enable-so &amp;&amp; make &amp;&amp; make install
下面编辑httpd.conf文件中ServerName字段的注释符，可以换成你的IP地址，或者什么都不换。
下面启动apache看看效果
/usr/local/httpd/bin/apachectl -k start
看到了It Works就对了。
4.停止以上两个启动的服务:tomcat,apache。
/usr/local/tomcat/bin/shutdown.sh
/usr/local/httpd/bin/apachectl stop
5.编译安装jk-connector
tar zxvf /mnt/hgfs/Untitled-1/tomcat-connectors-1.2.21-src.tar.gz -C /usr/local/src/
cd /usr/local/src/tomcat-connectors-1.2.21-src/native/
编译安装jk-connector，带上apxs的地址，会在安装的时候自动把mod_jk.so放到/usr/local/httpd/modules里面
./configure --with-apxs=/usr/local/httpd/bin/apxs &amp;&amp; make &amp;&amp; make install
ls /usr/local/httpd/modules
看到mod_jk.so表示成功
6.编辑配置文件
6.1编辑/usr/local/httpd/conf/mod_jk.conf
/# 指出mod_jk模块工作所需要的工作文件workers.properties的位置
JkWorkersFile /usr/local/httpd/conf/workers.properties
/# Where to put jk logs
JkLogFile /var/log/apache2/mod_jk.log
/# Set the jk log level [debug/error/info]
JkLogLevel info
/# Select the log format
JkLogStampFormat &quot;[%a %b %d %H:%M:%S %Y]&quot;
/# JkOptions indicate to send SSL KEY SIZE,
JkOptions  +ForwardKeySize +ForwardURICompat -ForwardDirectories
/# JkRequestLogFormat set the request format
JkRequestLogFormat &quot;%w %V %T&quot;
/# 将所有servlet 和jsp请求通过ajp13的协议送给Tomcat，让Tomcat来处理
JkMount /servlet//</em>  worker1
JkMount //*.jsp worker1
6.2编辑/usr/local/httpd/conf/workers.properties
/# Defining a worker named worker1 and of type ajp13
worker.list=worker1
/# Set properties for worker1
worker.worker1.type=ajp13<br>worker.worker1.host=localhost<br>worker.worker1.port=8009
worker.worker1.lbfactor=50<br>worker.worker1.cachesize=10<br>worker.worker1.cache_timeout=600<br>worker.worker1.socket_keepalive=1<br>worker.worker1.socket_timeout=300
6.3编辑httpd.conf文件
加入如下：
LoadModule jk_module modules/mod_jk.so
Include /usr/local/httpd/conf/mod_jk.conf
修改htdoc的默认地址为/usr/local/tomcat/webapps
修改htdoc的参数，也就是给原来htdoc的目录参数给webapps
修改DirectoryIndex index.html index.htm index.jsp
7.看结果吧
<a href="http://IP地址" target="_blank">http://IP地址</a>
可以看到一只大花猫。ok，成功了。
如何修改tomcat单独启动时候的端口为80？</p>
<p>里面的Connector port=&quot;8080&quot;改为Connector port=&quot;80&quot;</p>
<p><strong>本文来自ChinaUnix博客，如果查看原文请点：</strong><a href="http://blog.chinaunix.net/u1/51404/showart_452032.html" target="_blank"><a href="http://blog.chinaunix.net/u1/51404/showart_452032.html">http://blog.chinaunix.net/u1/51404/showart_452032.html</a></a> <a href="http://linux.chinaunix.net/bbs/thread-975323-1-1.html" target="_blank">发表评论</a> <a href="http://linux.chinaunix.net/bbs/thread-975323-1-1.html" target="_blank">查看评论</a>(共有条评论) <a href="http://linux.chinaunix.net/bbs/forum-4-1.html" target="_blank">我要提问</a>     最新资讯<a href="http://linux.chinaunix.net/news" target="_blank">更多&gt;&gt;</a>  · <a href="http://linux.chinaunix.net/news/2010/12/10/1175490.shtml" title="金山卫士开源计划首周源码下载突破两万" target="_blank">金山卫士开源计划首周源码下载..</a>
· <a href="http://linux.chinaunix.net/news/2010/12/10/1175491.shtml" title="谷歌劝说诺基亚采用Android操作系统" target="_blank">谷歌劝说诺基亚采用Android操作..</a>
· <a href="http://linux.chinaunix.net/news/2010/12/10/1175492.shtml" title="11月份Linux市场占有率升至5%" target="_blank">11月份Linux市场占有率升至5%</a>
· <a href="http://linux.chinaunix.net/news/2010/12/10/1175493.shtml" title="Apache 基金会确认退出 JCP 执行委员会" target="_blank">Apache 基金会确认退出 JCP 执..</a>
· <a href="http://linux.chinaunix.net/news/2010/12/07/1175306.shtml" title="Chrome 10 新功能探秘：新增GPU混合加速功能" target="_blank">Chrome 10 新功能探秘：新增GP..</a>
· <a href="http://linux.chinaunix.net/news/2010/12/07/1175307.shtml" title="金山宣布开源其安全软件" target="_blank">金山宣布开源其安全软件</a>
· <a href="http://linux.chinaunix.net/news/2010/12/07/1175308.shtml" title="开源FTP服务器ProFTPD发现后门" target="_blank">开源FTP服务器ProFTPD发现后门</a>
· <a href="http://linux.chinaunix.net/news/2010/12/07/1175309.shtml" title="女黑客在开源会议上抱受骚扰" target="_blank">女黑客在开源会议上抱受骚扰</a>
· <a href="http://linux.chinaunix.net/news/2010/12/07/1175310.shtml" title="21款值得关注的Linux游戏" target="_blank">21款值得关注的Linux游戏</a>
· <a href="http://linux.chinaunix.net/news/2010/12/07/1175311.shtml" title="马化腾：腾讯半年后彻底转型，开放和分享" target="_blank">马化腾：腾讯半年后彻底转型，..</a> 论坛热点<a href="http://linux.chinaunix.net/bbs" target="_blank">更多&gt;&gt;</a>  · <a href="http://linux.chinaunix.net/bbs/thread-1177273-1-1.html" title="Linux系统移植从零开始！参与讨论即有机会获得图书一本！" target="_blank">Linux系统移植从零开始！参与..</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177271-1-1.html" title="学习linux的意义在哪里" target="_blank">学习linux的意义在哪里</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177409-1-1.html" title="使用netfilter在哪能获取到原始以太包" target="_blank">使用netfilter在哪能获取到原..</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177298-1-1.html" title="哥纠结了" target="_blank">哥纠结了</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177227-1-1.html" title="一个在线读开源代码的工具，希望版主能保留几天，谢谢！" target="_blank">一个在线读开源代码的工具，..</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177374-1-1.html" title="为什么我的目录下没有.cshrc文件？" target="_blank">为什么我的目录下没有.cshrc..</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177344-1-1.html" title="初学linux从哪里开始" target="_blank">初学linux从哪里开始</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177382-1-1.html" title="linux 系统无法上网" target="_blank">linux 系统无法上网</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177380-1-1.html" title="新手安装UCenter 时总是出错。望高手指点" target="_blank">新手安装UCenter 时总是出错..</a>
· <a href="http://linux.chinaunix.net/bbs/thread-1177274-1-1.html" title="cacti添加主机显示的状态都是unknow，不能进行资源绘图" target="_blank">cacti添加主机显示的状态都是..</a> 文档更新<a href="http://linux.chinaunix.net/techdoc" target="_blank">更多&gt;&gt;</a>  · <a href="http://linux.chinaunix.net/techdoc/beginner/2010/11/17/1174196.shtml" title="菜鸟入门三星ARM11嵌入式系统，是否困难？" target="_blank">菜鸟入门三星ARM11嵌入式系统，是..</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/09/16/1171153.shtml" title="寻redhat 5.3 的中文手册 for ia64" target="_blank">寻redhat 5.3 的中文手册 for ia64</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/09/06/1170624.shtml" title="请问redhat 5.3 企业版的用户手册去哪里下载？" target="_blank">请问redhat 5.3 企业版的用户手册..</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/08/18/1169548.shtml" title="LINUX与UNIX SHELL编程指南(中文)" target="_blank">LINUX与UNIX SHELL编程指南(中文)</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/03/24/1160550.shtml" title="一些基本用户管理以及基本安装方法" target="_blank">一些基本用户管理以及基本安装方法</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/03/23/1160525.shtml" title="菜鸟学习linux笔记与练习-----第二天。一些基本命令以及初级网络配置" target="_blank">菜鸟学习linux笔记与练习-----第..</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/03/23/1160523.shtml" title="菜鸟学习linux笔记与练习-----第一天。一些初级命令以及基本用户管理" target="_blank">菜鸟学习linux笔记与练习-----第..</a>
· <a href="http://linux.chinaunix.net/techdoc/beginner/2010/03/22/1160427.shtml" title="服务器配置：Squid配置详解" target="_blank">服务器配置：Squid配置详解</a>
· <a href="http://linux.chinaunix.net/techdoc/install/2010/01/29/1156159.shtml" title="linux下u盘使用" target="_blank">linux下u盘使用</a>
· <a href="http://linux.chinaunix.net/techdoc/install/2010/01/29/1156155.shtml" title="ubuntu dynamips 绑定网卡到虚拟机" target="_blank">ubuntu dynamips 绑定网卡到虚拟机</a>    <a href="http://www.chinaunix.net/about/index.shtml" target="_blank">关于我们</a> | <a href="http://www.chinaunix.net/about/connect.html" target="_blank">联系方式</a> | <a href="http://www.chinaunix.net/about/service.html" target="_blank">广告合作</a> | <a href="http://www.chinaunix.net/about/hr.html" target="_blank">诚聘英才</a> | <a href="http://www.chinaunix.net/about/channel.html" target="_blank">网站地图</a> | <a href="http://www.chinaunix.net/about/friend.html" target="_blank">友情链接</a> | <a href="http://linux.chinaunix.net/bbs/register.php" target="_blank">免费注册</a>  Copyright © 2001-2009 ChinaUnix.net All Rights Reserved</p>
<p>感谢所有关心和支持过ChinaUnix的朋友们</p>
<p><a href="http://www.it168.com/images/icp.jpg" target="_blank">京ICP证:060528号</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/服务器/">服务器</a></li></span><span class="breadcrumb"><li><a href="/categories/服务器/">服务器</a></li><li><a href="/categories/服务器/集群/">集群</a></li></span></span> | <span class="tags">Tagged <a href="/tags/服务器/" class="label label-primary">服务器</a><a href="/tags/集群/" class="label label-success">集群</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-服务器-集群--apachetomcat整合LINUX/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-服务器-集群--apachetomcat整合LINUX" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/20/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/18/">18</a></li><li><a class="page-number" href="/page/19/">19</a></li><li><a class="page-number" href="/page/20/">20</a></li><li class="active"><li><span class="page-number current">21</span></li><li><a class="page-number" href="/page/22/">22</a></li><li><a class="page-number" href="/page/23/">23</a></li><li><a class="page-number" href="/page/24/">24</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/22/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 16:43:39</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
