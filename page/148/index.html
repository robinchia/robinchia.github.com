
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 148 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-框架汇总-ORM-ibatis--ibatis学习（三）-ibatis与spring的整合-joe-专注java-开源-架/">ibatis学习（三）</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:29.000Z"> <a href="/2014/02/02/2014-02-02-框架汇总-ORM-ibatis--ibatis学习（三）-ibatis与spring的整合-joe-专注java-开源-架/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="ibatis-ibatis-spring-joe-java-blogjava">ibatis学习（三）---ibatis与spring的整合 - joe --专注java,开源,架构,项目管理 - BlogJava</h1>
<h1 id="-joe-java-http-www-blogjava-net-freeman1984-"><a href="http://www.blogjava.net/freeman1984/" target="_blank">joe --专注java,开源,架构,项目管理</a></h1>
<p>STANDING ON THE SHOULDERS OF GIANTS</p>
<p>posts - 339, comments - 292, trackbacks - 0, articles - 1  <a href="http://www.blogjava.net/" target="_blank">BlogJava</a> :: <a href="http://www.blogjava.net/freeman1984/" target="_blank">首页</a> :: <a href="http://www.blogjava.net/freeman1984/admin/EditPosts.aspx?opt=1" target="_blank">新随笔</a> :: <a href="http://www.blogjava.net/freeman1984/contact.aspx?id=1" target="_blank">联系</a> :: <a href="http://www.blogjava.net/freeman1984/rss" target="_blank">聚合</a> <a href="http://www.blogjava.net/freeman1984/rss" target="_blank"><img src="" alt=""></a> :: <a href="http://www.blogjava.net/freeman1984/admin/EditPosts.aspx" target="_blank">管理</a> ## <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html" target="_blank">ibatis学习（三）---ibatis与spring的整合</a></p>
<p>Posted on 2007-12-07 18:26 <a href="http://www.blogjava.net/freeman1984/" target="_blank">@joe</a> 阅读(13593) <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#Post" target="_blank">评论(11)</a>  <a href="http://www.blogjava.net/freeman1984/admin/EditPosts.aspx?postid=166112" target="_blank">编辑</a>  <a href="http://www.blogjava.net/freeman1984/AddToFavorite.aspx?id=166112" target="_blank">收藏</a> <img src="" alt=""></p>
<p>Spring通过DAO模式，提供了对iBATIS的良好支持。SqlMapClient对象是iBATIS中的主要对象，我们可以通过配置让spring来管理SqlMapClient对象的创建。</p>
<p>与hibernate类似，Spring 提供了SqlMapClientDaoSupport对象，我们的DAO可以继承这个类，通过它所提供的SqlMapClientTemplate对象来操纵数据库。看起来这些概念都与hibernate类似。</p>
<p>通过SqlMapClientTemplate来操纵数据库的CRUD是没有问题的，这里面关键的问题是事务处理。Spring提供了强大的声明式事务处理的功能，我们已经清楚hibernate中如何配置声明式的事务，那么在iBATIS中如何获得声明式事务的能力呢？</p>
<p>第一，我们需要了解的是spring通过AOP来拦截方法的调用，从而在这些方法上面添加声明式事务处理的能力。典型配置如下：applicationContext-common.xml
    <!-- 配置事务特性 --></p>
<pre><code>&lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;*事务管理器名称*&quot;&gt;

    &lt;tx:attributes&gt;

       &lt;tx:method name=&quot;add/*&quot; propagation=&quot;REQUIRED&quot;/&gt;

       &lt;tx:method name=&quot;del/*&quot; propagation=&quot;REQUIRED&quot;/&gt;

       &lt;tx:method name=&quot;update/*&quot; propagation=&quot;REQUIRED&quot;/&gt;

       &lt;tx:method name=&quot;/*&quot; read-only=&quot;true&quot;/&gt;

   &lt;/tx:attributes&gt;

&lt;/tx:advice&gt;



&lt;!-- 配置哪些类的方法需要进行事务管理 --&gt;

&lt;aop:config&gt;

   &lt;aop:pointcut id=&quot;allManagerMethod&quot; expression=&quot;execution(/* com.ibatis.manager./*./*(..))&quot;/&gt;

   &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;allManagerMethod&quot;/&gt;

&lt;/aop:config&gt;
</code></pre><p>这些事务都是声明在业务逻辑层的对象上的。</p>
<p>第二，我们需要一个事务管理器，对事务进行管理。
    <bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"></p>
<pre><code>&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;

&lt;/bean&gt;

&lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;&gt;

    &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;

    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://127.0.0.1/ibatis&quot;/&gt;

    &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;

    &lt;property name=&quot;password&quot; value=&quot;mysql&quot;/&gt;

&lt;/bean&gt;
</code></pre><p>此后，我们需要让spring来管理SqlMapClient对象：</p>
<pre><code>&lt;bean id=&quot;sqlMapClient&quot; class=&quot;org.springframework.orm.ibatis.SqlMapClientFactoryBean&quot;&gt;

   &lt;property name=&quot;configLocation&quot;&gt;&lt;value&gt;classpath:sqlMapConfig.xml&lt;/value&gt;&lt;/property&gt;

&lt;/bean&gt;
</code></pre><p>我们的sqlMapConfig.xml就可以简写为：</p>
<p>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</p>
<p>&lt;!DOCTYPE sqlMapConfig     </p>
<pre><code>PUBLIC &quot;-//ibatis.apache.org//DTD SQL Map Config 2.0//EN&quot;     

&quot;http://ibatis.apache.org/dtd/sql-map-config-2.dtd&quot;&gt;
</code></pre><sqlMapConfig>

    <settings

       lazyLoadingEnabled="true"

        useStatementNamespaces="true" />

    <!-- 使用spring之后，数据源的配置移植到了spring上，所以iBATIS本身的配置可以取消 -->

  <sqlMap resource="com/ibatis/dao/impl/ibatis/User.xml"/>

</sqlMapConfig>

<p>User.xml:如下</p>
<p>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</p>
<p>&lt;!DOCTYPE sqlMap     </p>
<pre><code>PUBLIC &quot;-//ibatis.apache.org//DTD SQL Map 2.0//EN&quot;     

&quot;http://ibatis.apache.org/dtd/sql-map-2.dtd&quot;&gt;
</code></pre><sqlMap namespace="User">

 <!-- Use type aliases to avoid typing the full classname every time. -->

 <typeAlias alias="User" type="com.ibatis.User"/>

 <!-- Select with no parameters using the result map for Account class. -->

 <select id="selectAllUsers" resultClass="User">

    select /<em> from t_user

 </select>



 <select id="selectUser" resultClass="User" parameterClass="int">

  select /</em> from t_user where id=/#id/#

 </select>



 <insert id="insertUser" parameterClass="User">

  insert into t_user values (

       null,/#username/#,/#password/#

  )

 </insert>



 <update id="updateUser" parameterClass="User">

  update t_user set username = /#username/#,password=/#password/#

  where id=/#id/#

  </update>



 <delete id="deleteUser" parameterClass="int">

  delete from t_user where id=/#id/#

 </delete>

</sqlMap>

<p>我们的DAO的编写：
package com.iabtis.dao.impl.ibatis;</p>
<p>import java.util.List;</p>
<p>import org.springframework.orm.ibatis.support.SqlMapClientDaoSupport;</p>
<p>import com.ibatis.dao.UserDAO;</p>
<p>import com.ibatis.crm.model.User;</p>
<p>public class UserDAOImpl extends SqlMapClientDaoSupport implements UserDAO {</p>
<pre><code>public void select(User user) {

          getSqlMapClientTemplate().delete(&quot;selectUser &quot;,user.getId());

   }
</code></pre><p>   public List findAll() {</p>
<pre><code>          return getSqlMapClientTemplate().queryForList(&quot;selectAllUsers &quot;);

   }

   public void delete(User user) {

          getSqlMapClientTemplate().delete(&quot;deleteUser &quot;,user.getId());

   }

   public void save(User user) {

          getSqlMapClientTemplate().insert(&quot;insertUser &quot;,user);

   }

   public void update(User user) {

          getSqlMapClientTemplate().update(&quot;updateUser &quot;,user);

   }
</code></pre><p>}</p>
<p>继承SqlMapClientDaoSupport，要求我们注入SqlMapClient对象，因此，需要有如下的DAO配置：</p>
<bean id="userDAO" class="com.ibatils.dao.impl.ibatis.UserDAOImpl">

     <property name=”sqlMapClient” ref=”sqlMapClient”/>

</bean>

<p>这就是所有需要注意的问题了，此后就可以在业务逻辑层调用DAO对象了！</p>
<p><a href=""></a></p>
<h3 id="-">评论</h3>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-166209-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-laocat-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#166209" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=laocat" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2007-12-08 09:42 by <a href="">laocat</a></p>
<p>豁然开朗 ！！</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-188269-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-e5-b1-b9-e7-a0-be-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#188269" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=%e5%b1%b9%e7%a0%be" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2008-03-24 16:08 by <a href="http://www.blogjava.net/eli/" target="_blank">屹砾</a></p>
<p>整合的问题现在终于清楚了，
对于advice和aop还有点不清楚。</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-207721-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-e5-86-b7-e6-bc-a0-e5-a4-a7-e7-a5-9e-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#207721" title="permalink: re: ibatis学习（三）---ibatis与spring的整合[未登录]" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合[未登录]  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=%e5%86%b7%e6%bc%a0%e5%a4%a7%e7%a5%9e" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2008-06-13 17:26 by <a href="http://o(â©_â©" target="_blank">冷漠大神</a>o.../)</p>
<p>真是不错的文章啊 如果在在可以把源码提供下载 那就更完美了 :-) 呵呵 是不是有点贪心</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-207724-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-e5-86-b7-e6-bc-a0-e5-a4-a7-e7-a5-9e-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#207724" title="permalink: re: ibatis学习（三）---ibatis与spring的整合[未登录]" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合[未登录]  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=%e5%86%b7%e6%bc%a0%e5%a4%a7%e7%a5%9e" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2008-06-13 17:34 by <a href="http://o(â©_â©" target="_blank">冷漠大神</a>o.../)</p>
<p>有没有代码下载啊？</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-224098-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-379548695qq-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#224098" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=379548695qq" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2008-08-25 11:35 by <a href="">379548695qq</a></p>
<p>UserDAO类里面的内容是什么？</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-260672-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-e8-99-ab-e5-ad-90-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#260672" title="permalink: re: ibatis学习（三）---ibatis与spring的整合[未登录]" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合[未登录]  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=%e8%99%ab%e5%ad%90" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2009-03-19 10:17 by <a href="">虫子</a></p>
<p>正在烦恼中，google到了你的方案！呵呵</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-291041-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-jadmin-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#291041" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=jadmin" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2009-08-13 16:32 by <a href="http://hi.baidu.com/jadmin" target="_blank">jadmin</a></p>
<p>很好，学习了</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-291296-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-e5-8c-b9-e9-a9-ac-e5-8d-95-e6-9e-aa-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#291296" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=%e5%8c%b9%e9%a9%ac%e5%8d%95%e6%9e%aa" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2009-08-15 23:15 by <a href="">匹马单枪</a></p>
<p>好帖， 学习了！</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-293434-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-2-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#293434" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=2" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2009-09-01 13:07 by <a href="">2</a></p>
<p>为什么我的出错了</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-319581-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-test-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#319581" title="permalink: re: ibatis学习（三）---ibatis与spring的整合[未登录]" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合[未登录]  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=test" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2010-04-28 11:10 by <a href="">test</a></p>
<p>autocommit 如果不设置为false, 事务有用么</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-336667-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-rr-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#336667" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合<a href=""></a>  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=rr" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2010-11-01 13:42 by <a href="">rr</a></p>
<p>sqlMapClient里应该注入dataSource</p>
<p><a href="http://www.blogjava.net/RequireRegister.aspx" target="_blank">新用户注册</a>  <a href="">刷新评论列表</a><br><a href=""></a> <a href="http://job.cnblogs.com/">找优秀程序员，就在博客园</a>
IT新闻：
· <a href="http://news.cnblogs.com/n/112126/" target="_blank">婚恋网世纪佳缘乱象重生 成一夜情猎场</a>
· <a href="http://news.cnblogs.com/n/112124/" target="_blank">帝国时代 Online 已发布，可免费下载</a>
· <a href="http://news.cnblogs.com/n/112123/" target="_blank">小米发布会中的亮点与尿点：“狗日的 1999”</a>
· <a href="http://news.cnblogs.com/n/112122/" target="_blank">315投诉网疑被关后改名重开张 新网站否认</a>
· <a href="http://news.cnblogs.com/n/112121/" target="_blank">团购网站融资冷却裁员求生 行业洗牌危机并存</a>    <a href="http://www.cnblogs.com/" target="_blank">博客园</a>  <a href="http://home.cnblogs.com/q/" target="_blank">博问</a>  <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>  <a href="http://job.cnblogs.com/cate-java_programmer/" target="_blank">Java程序员招聘</a> 标题  请输入标题 姓名  请输入你的姓名 主页 请输入验证码 验证码 /*  <img src="" alt=""> 内容(请不要发表任何与政治相关的内容) 请输入评论内容 Remember Me?   <a href="http://www.blogjava.net/login.aspx?ReturnURL=http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html&amp;SourceURL=/freeman1984/archive/2007/12/07/166112.html" target="_blank">登录</a>       [使用Ctrl+Enter键可以直接提交]    推荐职位：
· <a href="http://job.cnblogs.com/offer/15741/" target="_blank">广州ASP.NET程序员(广州丹霄信息技术)</a>
· <a href="http://job.cnblogs.com/offer/15624/" target="_blank">上海 .NET软件工程师(上海苏秦网络)</a>
· <a href="http://job.cnblogs.com/offer/15546/" target="_blank">上海.NET软件开发工程师(东方财富信息)</a>
· <a href="http://job.cnblogs.com/offer/14109/" target="_blank">北京 SQL数据库开发工程师(圣特尔科技)</a>
· <a href="http://job.cnblogs.com/offer/15489/" target="_blank">北京高新诚聘 ASP.NET 程序员(盈科融通软件)</a>
· <a href="http://job.cnblogs.com/Offer/15346/" target="_blank">北京 .NET软件工程师(北京科胜永昌)</a>
· <a href="http://job.cnblogs.com/offer/5914/" target="_blank">北京.NET 研发工程师 (北京捷报数据)</a>
· <a href="http://job.cnblogs.com/offer/14108/" target="_blank">北京C/#开发工程师 B/S方向(圣特尔科技)</a></p>
<p>博客园首页随笔：
· <a href="http://www.cnblogs.com/saville/archive/2011/08/17/2142754.html" target="_blank">C/#设计模式——命令模式(Command Pattern)</a>
· <a href="http://www.cnblogs.com/ahl5esoft/archive/2011/08/17/2142739.html" target="_blank">老系统维护</a>
· <a href="http://www.cnblogs.com/codingmyworld/archive/2011/08/17/2141706.html" target="_blank">使用单例模式实现自己的HttpClient工具类</a>
· <a href="http://www.cnblogs.com/powertoolsteam/archive/2011/08/17/2142085.html" target="_blank">Spread for Windows Forms高级主题(2)---理解单元格类型</a>
· <a href="http://www.cnblogs.com/JamesLi2015/archive/2011/08/17/2142012.html" target="_blank">ERP/MIS开发 菜单设计器(Menu Designer)及其B/S,C/S双重实现（B/S开源）</a>
知识库：
· <a href="http://kb.cnblogs.com/page/104475/" target="_blank">IT项目管理的六种错误思维</a>
· <a href="http://kb.cnblogs.com/page/107415/" target="_blank">我的10个开发原则</a>
· <a href="http://kb.cnblogs.com/page/111704/" target="_blank">大数据下的数据分析平台架构</a>
· <a href="http://kb.cnblogs.com/page/109493/" target="_blank">为什么编程是独一无二的职业</a>
· <a href="http://kb.cnblogs.com/page/104736/" target="_blank">分享8年开发经验，浅谈个人发展经历，明确自己发展方向</a> 最简洁阅读版式：
<a href="http://archive.cnblogs.com/b/166112/" target="_blank">ibatis学习（三）---ibatis与spring的整合</a> 网站导航:</p>
<p><a href="http://www.cnblogs.com/" title="程序员的网上家园" target="_blank">博客园</a>   <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>   <a href="http://kb.cnblogs.com/" target="_blank">知识库</a>   <a href="http://www.cnweblog.com/" target="_blank">博客生活</a>   <a href="http://www.cnitblog.com/" target="_blank">IT博客网</a>   <a href="http://www.cppblog.com/" target="_blank">C++博客</a>   <a href="http://space.cnblogs.com/q/" title="IT问答" target="_blank">博问</a>   <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html?opt=admin" target="_blank">管理</a>    Powered by:
<a href="http://www.blogjava.net/" target="_blank">BlogJava</a>
Copyright © @joe</p>
<p><img src="" alt=""></p>
<h3 id="-">公告</h3>
<p><a href="http://shop59092284.taobao.com/" target="_blank"></a><a href="http://shop59092284.taobao.com/"></a><a href="http://shop59092284.taobao.com/" target="_blank"><strong> 老婆的淘宝,欢迎选购</strong></a></p>
<p><img src="" alt=""></p>
<h3 id="-2-">留言簿(2)</h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/Contact.aspx?id=1" target="_blank">给我留言</a></li>
<li><a href="http://www.blogjava.net/freeman1984/default.aspx?opt=msg" target="_blank">查看公开留言</a></li>
<li><a href="http://www.blogjava.net/freeman1984/admin/MyMessages.aspx" target="_blank">查看私人留言</a>
<img src="" alt=""></li>
</ul>
<h3 id="-">随笔分类</h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/category/26087.html/rss" title="Subscribe to all 生活杂谈(14)" target="_blank"><img src="&quot;Subscribe to all 生活杂谈(14" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/26087.html" target="_blank">all 生活杂谈(14)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/42532.html/rss" title="Subscribe to android(18)" target="_blank"><img src="&quot;Subscribe to android(18" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/42532.html" target="_blank">android(18)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/46243.html/rss" title="Subscribe to apache项目(13)" target="_blank"><img src="&quot;Subscribe to apache项目(13" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/46243.html" target="_blank">apache项目(13)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/43680.html/rss" title="Subscribe to chart(1)" target="_blank"><img src="&quot;Subscribe to chart(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/43680.html" target="_blank">chart(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/49019.html/rss" title="Subscribe to concurrent(1)" target="_blank"><img src="&quot;Subscribe to concurrent(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/49019.html" target="_blank">concurrent(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/38740.html/rss" title="Subscribe to database(34)" target="_blank"><img src="&quot;Subscribe to database(34" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/38740.html" target="_blank">database(34)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/42595.html/rss" title="Subscribe to dwr(3)" target="_blank"><img src="&quot;Subscribe to dwr(3" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/42595.html" target="_blank">dwr(3)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/43586.html/rss" title="Subscribe to flex(1)" target="_blank"><img src="&quot;Subscribe to flex(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/43586.html" target="_blank">flex(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/42534.html/rss" title="Subscribe to hibernate(23)" target="_blank"><img src="&quot;Subscribe to hibernate(23" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/42534.html" target="_blank">hibernate(23)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/26086.html/rss" title="Subscribe to java (123)" target="_blank"><img src="&quot;Subscribe to java (123" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/26086.html" target="_blank">java (123)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/41058.html/rss" title="Subscribe to javafx(1)" target="_blank"><img src="&quot;Subscribe to javafx(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/41058.html" target="_blank">javafx(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/43930.html/rss" title="Subscribe to java安全(6)" target="_blank"><img src="&quot;Subscribe to java安全(6" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/43930.html" target="_blank">java安全(6)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/43783.html/rss" title="Subscribe to java性能(12)" target="_blank"><img src="&quot;Subscribe to java性能(12" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/43783.html" target="_blank">java性能(12)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/38739.html/rss" title="Subscribe to jbpm(1)" target="_blank"><img src="&quot;Subscribe to jbpm(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/38739.html" target="_blank">jbpm(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/44698.html/rss" title="Subscribe to jquery(3)" target="_blank"><img src="&quot;Subscribe to jquery(3" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/44698.html" target="_blank">jquery(3)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/46405.html/rss" title="Subscribe to linux(6)" target="_blank"><img src="&quot;Subscribe to linux(6" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/46405.html" target="_blank">linux(6)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/47431.html/rss" title="Subscribe to lucene(1)" target="_blank"><img src="&quot;Subscribe to lucene(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/47431.html" target="_blank">lucene(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/47801.html/rss" title="Subscribe to lucene(1)" target="_blank"><img src="&quot;Subscribe to lucene(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/47801.html" target="_blank">lucene(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/26088.html/rss" title="Subscribe to others(2)" target="_blank"><img src="&quot;Subscribe to others(2" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/26088.html" target="_blank">others(2)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/38742.html/rss" title="Subscribe to questions(7)" target="_blank"><img src="&quot;Subscribe to questions(7" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/38742.html" target="_blank">questions(7)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/38741.html/rss" title="Subscribe to questions_hander(5)" target="_blank"><img src="&quot;Subscribe to questions_hander(5" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/38741.html" target="_blank">questions_hander(5)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/42533.html/rss" title="Subscribe to spring(24)" target="_blank"><img src="&quot;Subscribe to spring(24" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/42533.html" target="_blank">spring(24)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/42535.html/rss" title="Subscribe to struts(8)" target="_blank"><img src="&quot;Subscribe to struts(8" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/42535.html" target="_blank">struts(8)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/42536.html/rss" title="Subscribe to swing" target="_blank"><img src="&quot;Subscribe to swing&quot;" alt=""></a><a href="http://www.blogjava.net/freeman1984/category/42536.html" target="_blank">swing</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/48926.html/rss" title="Subscribe to UML(2)" target="_blank"><img src="&quot;Subscribe to UML(2" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/48926.html" target="_blank">UML(2)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/44672.html/rss" title="Subscribe to web(33)" target="_blank"><img src="&quot;Subscribe to web(33" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/44672.html" target="_blank">web(33)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/38743.html/rss" title="Subscribe to webservice(5)" target="_blank"><img src="&quot;Subscribe to webservice(5" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/38743.html" target="_blank">webservice(5)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/43702.html/rss" title="Subscribe to xml(2)" target="_blank"><img src="&quot;Subscribe to xml(2" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/43702.html" target="_blank">xml(2)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/46247.html/rss" title="Subscribe to 敏捷(6)" target="_blank"><img src="&quot;Subscribe to 敏捷(6" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/46247.html" target="_blank">敏捷(6)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/46503.html/rss" title="Subscribe to 方法论(14)" target="_blank"><img src="&quot;Subscribe to 方法论(14" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/46503.html" target="_blank">方法论(14)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/46575.html/rss" title="Subscribe to 架构(10)" target="_blank"><img src="&quot;Subscribe to 架构(10" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/46575.html" target="_blank">架构(10)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/49063.html/rss" title="Subscribe to 网络通讯(5)" target="_blank"><img src="&quot;Subscribe to 网络通讯(5" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/49063.html" target="_blank">网络通讯(5)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/46246.html/rss" title="Subscribe to 项目管理(17)" target="_blank"><img src="&quot;Subscribe to 项目管理(17" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/46246.html" target="_blank">项目管理(17)</a></li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-">相册</h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/gallery/42537.html" target="_blank">我的相册</a>
<img src="" alt=""></li>
</ul>
<h3 id="-">搜索</h3>
<ul>
<li></li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-">积分与排名</h3>
<ul>
<li>积分 - 249820</li>
<li>排名 - 69
<img src="" alt=""></li>
</ul>
<h3 id="-http-www-blogjava-net-freeman1984-commentsrss-aspx-">最新评论 <a href="http://www.blogjava.net/freeman1984/CommentsRSS.aspx" target="_blank"><img src="" alt=""></a></h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/08/08/148850.html#356038" target="_blank">1. re: 一篇不错的讲解Java异常的文章(转载）----感觉很不错，读了以后很有启发[未登录]</a></li>
<li>受教了。非常感谢。
不过，后面罗列的那么多异常有点不必要了。</li>
<li>--jake</li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/07/25/324133.html#355011" target="_blank">2. re: strtuts2 异常之Could not create and/or set value back on to object [未登录]</a></li>
<li>thank you very much！</li>
<li>--fighting</li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/07/22/301081.html#354834" target="_blank">3. re: Android屏幕元素层次结构[未登录]</a></li>
<li><p style="color:red">顶一下</p></li>
<li>--黑石</li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/07/21/354712.html#354750" target="_blank">4. re: 不同技术团队的配合问题及DevOps(不错的文章，来自infoq)</a></li>
<li>做个记号。</li>
<li>--何杨</li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/07/12/154309.html#354154" target="_blank">5. re: other[未登录]</a></li>
<li>希望学习，谢谢！
trust_myself@126.com</li>
<li>--asa</li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-">阅读排行榜</h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/09/27/148850.html" target="_blank">1. 一篇不错的讲解Java异常的文章(转载）----感觉很不错，读了以后很有启发(17440)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2009/11/05/301262.html" target="_blank">2. 世界上最健康的作息时间表 大家对比下(16717)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html" target="_blank">3. ibatis学习（三）---ibatis与spring的整合(13592)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/09/24/147879.html" target="_blank">4. 如何用javascript控制checkbox，并进行批量删除(8527)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166113.html" target="_blank">5. ibatis学习（二）--ibatis使用介绍(6368)</a>
<img src="" alt=""></li>
</ul>
<h3 id="-">评论排行榜</h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/10/19/154309.html" target="_blank">1. other(41)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/09/27/148850.html" target="_blank">2. 一篇不错的讲解Java异常的文章(转载）----感觉很不错，读了以后很有启发(22)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/11/16/161093.html" target="_blank">3. ssh中利用pager-taglib和filter进行分页(14)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2010/11/12/337878.html" target="_blank">4. 团队内是有必要统一IDE(14)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2009/11/05/301262.html" target="_blank">5. 世界上最健康的作息时间表 大家对比下(13)</a></li>
</ul>
<h3 id="60-">60天内阅读排行</h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/06/20/352649.html" target="_blank">1. 大家都用什么bug管理软件？(2031)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/07/04/353654.html" target="_blank">2. CountDownLatch 简介和例子(1412)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/08/04/355820.html" target="_blank">3. 统计指标和术语汇总(1396)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/07/20/354712.html" target="_blank">4. 不同技术团队的配合问题及DevOps(不错的文章，来自infoq)(1321)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/08/04/355808.html" target="_blank">5. connection.release_mode，connection.autocommit和transaction.auto_close_session用法(1003)</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/框架汇总/">框架汇总</a></li></span><span class="breadcrumb"><li><a href="/categories/框架汇总/">框架汇总</a></li><li><a href="/categories/框架汇总/ORM/">ORM</a></li><li><a href="/categories/框架汇总/ORM/ibatis/">ibatis</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ORM/" class="label label-primary">ORM</a><a href="/tags/ibatis/" class="label label-success">ibatis</a><a href="/tags/框架汇总/" class="label label-info">框架汇总</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:29"datetime="2014-03-07 09:54:29"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-框架汇总-ORM-ibatis--ibatis学习（三）-ibatis与spring的整合-joe-专注java-开源-架/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-框架汇总-ORM-ibatis--ibatis学习（三）-ibatis与spring的整合-joe-专注java-开源-架" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-架构师--五年经验跳槽历程-Eric77的专栏/">五年经验跳槽历程 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:29.000Z"> <a href="/2014/02/02/2014-02-02-架构师--五年经验跳槽历程-Eric77的专栏/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-eric77-">五年经验跳槽历程 - Eric77的专栏</h1>
<h1 id="-eric77-http-blog-csdn-net-eric77-"><a href="http://blog.csdn.net/Eric77" target="_blank">Eric77的专栏</a></h1>
<h2 id="-">上士闻道,勤而行之;中士闻道,若存若亡;下士闻道,大笑之,不笑不足以为道. 后悔过去不如奋斗将来!</h2>
<ul>
<li><a href="http://hi.csdn.net/space-notice.html" target="_blank">条新通知</a></li>
<li><a href="http://passport.csdn.net/UserLogin.aspx" target="_blank">登录</a></li>
<li><a href="http://passport.csdn.net/CSDNUserRegister.aspx" target="_blank">注册</a></li>
<li><a href="http://hi.csdn.net/" target="_blank">欢迎</a></li>
<li><a href="http://writeblog.csdn.net/Signout.aspx" target="_blank">退出</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">我的博客</a></li>
<li><a href="http://writeblog.csdn.net/configure.aspx" target="_blank">配置</a></li>
<li><a href="http://writeblog.csdn.net/PostEdit.aspx" target="_blank">写文章</a></li>
<li><a href="http://writeblog.csdn.net/PostList.aspx" target="_blank">文章管理</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">博客首页</a></li>
</ul>
<p>*</p>
<ul>
<li><p>全站 当前博客
*</p>
</li>
<li><p><a href="http://hi.csdn.net/Eric77" target="_blank">空间</a></p>
</li>
<li><a href="http://blog.csdn.net/Eric77" target="_blank">博客</a></li>
<li><a href="http://hi.csdn.net/!s/friend/list/Eric77" target="_blank">好友</a></li>
<li><a href="http://hi.csdn.net/!s/album/list/Eric77" target="_blank">相册</a></li>
<li><a href="http://hi.csdn.net/!s/wall/to/Eric77" target="_blank">留言</a></li>
</ul>
<p>用户操作<a href="http://hi.csdn.net/!s/wall/to/Eric77" target="_blank">[留言]</a>  <a href="http://hi.csdn.net/!s/msg/to/Eric77" target="_blank">[发消息]</a>  <a href="http://hi.csdn.net/!s/friend/add/Eric77" target="_blank">[加为好友]</a> 订阅我的博客<a href="http://feeds.feedsky.com/csdn.net/Eric77" target="_blank"><img src="" alt="XML聚合"></a>   <a href="http://feeds.feedsky.com/csdn.net/Eric77" target="_blank"><img src="" alt="FeedSky"></a><a href="http://www.xianguo.com/subscribe.php?url=http://feeds.feedsky.com/csdn.net/Eric77" target="_blank"><img src="" alt="订阅到鲜果"></a><a href="http://fusion.google.com/add?feedurl=http://feeds.feedsky.com/csdn.net/Eric77" target="_blank"><img src="" alt="订阅到Google"></a><a href="http://www.zhuaxia.com/add_channel.php?url=http://feeds.feedsky.com/csdn.net/Eric77" target="_blank"><img src="" alt="订阅到抓虾"></a><a href="http://writeblog.csdn.net/configure.aspx" target="_blank">[编辑]</a>Eric77的公告<a href="http://writeblog.csdn.net/EditCategories.aspx?catID=1" target="_blank">[编辑]</a>文章分类* <a href="http://blog.csdn.net/Eric77/category/503384.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/Eric77/category/503384.aspx" title="&lt;塞梅普雷斯 如是说&gt; 第一部  系列" target="_blank">&lt;塞梅普雷斯 如是说&gt; 第一部</a></p>
<ul>
<li><a href="http://blog.csdn.net/Eric77/category/503385.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/Eric77/category/503385.aspx" title="我带你去哪里 系列" target="_blank">&lt;我带你去哪里&gt;</a></li>
<li><a href="http://blog.csdn.net/Eric77/category/635207.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/Eric77/category/635207.aspx" title="五花八门的经验总结" target="_blank">经验总结</a></li>
<li><a href="http://blog.csdn.net/Eric77/category/513046.aspx/rss" target="_blank"><img src="" alt="(RSS)"></a><a href="http://blog.csdn.net/Eric77/category/513046.aspx" title="一些复杂的思考" target="_blank">科学/神秘主义</a><a href="http://writeblog.csdn.net/EditLinks.aspx" target="_blank">[编辑]</a>What I think<a href="http://douban.com/people/eric77/" target="_blank">我的豆瓣</a><a href="http://writeblog.csdn.net/EditLinks.aspx" target="_blank">[编辑]</a>朋友们的<a href="http://hi.baidu.com/moliny" target="_blank">一花一世界</a><a href="http://yashuawu.blog.sohu.com/" target="_blank">五四青年</a><a href="http://blog.sina.com.cn/bubble521" target="_blank">小女子的大世界</a><a href="http://blog.sina.com.cn/5sui" target="_blank">小朋友的小花园</a><a href="http://yimei1013.blog.sohu.com/" target="_blank">左掌的春暖花开</a><a href="http://harry-zhy.blog.sohu.com/" target="_blank">异次元-十三少</a><a href="http://www.lixin.name/" target="_blank">绿洲家后院儿</a><a href="http://jseafly.blog.sohu.com/" target="_blank">飘来的海</a><a href="http://writeblog.csdn.net/EditLinks.aspx" target="_blank">[编辑]</a>在别人的BLOG<a href="http://www.blogcn.com/user13/lonestone/index.html" target="_blank">一个人的狂欢</a><a href="http://blog.tianya.cn/blogger/view_blog.asp?BlogName=wanran" target="_blank">宛然流轉</a>存档* <a href="http://blog.csdn.net/Eric77/archive/2010/08.aspx" target="_blank">2010年08月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2010/07.aspx" target="_blank">2010年07月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2010/06.aspx" target="_blank">2010年06月(3)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2010/05.aspx" target="_blank">2010年05月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2010/03.aspx" target="_blank">2010年03月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2009/12.aspx" target="_blank">2009年12月(2)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2009/11.aspx" target="_blank">2009年11月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2009/09.aspx" target="_blank">2009年09月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2009/08.aspx" target="_blank">2009年08月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2009/06.aspx" target="_blank">2009年06月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2009/04.aspx" target="_blank">2009年04月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2009/03.aspx" target="_blank">2009年03月(2)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2009/02.aspx" target="_blank">2009年02月(2)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2008/12.aspx" target="_blank">2008年12月(4)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2008/10.aspx" target="_blank">2008年10月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2008/08.aspx" target="_blank">2008年08月(3)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2008/07.aspx" target="_blank">2008年07月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2008/06.aspx" target="_blank">2008年06月(2)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2008/05.aspx" target="_blank">2008年05月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2008/04.aspx" target="_blank">2008年04月(4)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2008/02.aspx" target="_blank">2008年02月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2008/01.aspx" target="_blank">2008年01月(3)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2007/12.aspx" target="_blank">2007年12月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2007/11.aspx" target="_blank">2007年11月(3)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2007/10.aspx" target="_blank">2007年10月(2)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2007/08.aspx" target="_blank">2007年08月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2007/07.aspx" target="_blank">2007年07月(3)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2007/06.aspx" target="_blank">2007年06月(2)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2007/05.aspx" target="_blank">2007年05月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2007/04.aspx" target="_blank">2007年04月(2)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2007/03.aspx" target="_blank">2007年03月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2007/02.aspx" target="_blank">2007年02月(3)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2007/01.aspx" target="_blank">2007年01月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2006/12.aspx" target="_blank">2006年12月(2)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2006/11.aspx" target="_blank">2006年11月(9)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2006/09.aspx" target="_blank">2006年09月(2)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2006/08.aspx" target="_blank">2006年08月(4)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2006/06.aspx" target="_blank">2006年06月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2006/05.aspx" target="_blank">2006年05月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2006/01.aspx" target="_blank">2006年01月(2)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2005/09.aspx" target="_blank">2005年09月(14)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2005/08.aspx" target="_blank">2005年08月(4)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2005/07.aspx" target="_blank">2005年07月(2)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2005/02.aspx" target="_blank">2005年02月(1)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2005/01.aspx" target="_blank">2005年01月(9)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2004/12.aspx" target="_blank">2004年12月(17)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2004/11.aspx" target="_blank">2004年11月(10)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2004/10.aspx" target="_blank">2004年10月(23)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2004/09.aspx" target="_blank">2004年09月(14)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2004/08.aspx" target="_blank">2004年08月(3)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2004/07.aspx" target="_blank">2004年07月(5)</a></li>
<li><a href="http://blog.csdn.net/Eric77/archive/2004/06.aspx" target="_blank">2004年06月(6)</a><h3 id="-http-forum-csdn-net-slist-blogsupport-http-blog-csdn-net-blogdevteam-">公告： <a href="http://forum.csdn.net/SList/blogSupport" target="_blank">[意见反馈]</a><a href="http://blog.csdn.net/blogdevteam" target="_blank">[官方博客]</a></h3>
</li>
</ul>
<h1 id="-"><img src="" alt="原创">  五年经验跳槽历程 <a href="&quot;收藏到我的网摘中，并分享给我的朋友&quot;">收藏</a>  <img src="" alt=""></h1>
<p>此文于2010-07-27被推荐到CSDN首页
<a href="http://blog.csdn.net/blogdevteam/archive/2009/08/25/4481848.aspx" target="_blank">如何被推荐？</a></p>
<p>//2010-07-23 21:29</p>
<p>经过两个月的折腾,终于在这个周三得到了IBM的offer,从5月18日到现在,两个多月过去了.</p>
<p>睡觉前,我要简要记录一下这次跳槽的故事,下周一就要去报到了,害怕以后没时间写出来,或者淡忘了.</p>
<p>这次跳槽,首先我的目标很明确:1.要离家近的(30分钟以内,南山区) 2.大公司(成规模的,有良好管理和发展的公司) 3.适合我自己职业发展的公司 4.待遇还不错的公司</p>
<p>一开始的首选计划是: 招商研发中心,IBM,腾讯. 招商没有投简历,因为听他的人资说之前招了一大堆人,又由于没有淘汰机制,现在已经人满为患了. IBM让5号(一朋友的昵称)帮我投了简历,自己也瞎去投了投. 腾讯也投了.</p>
<p>开始在网上更新简历后,第一个和我联系的就是外包公司,第二天一早就和我联系了,可惜我对外包公司不太感兴趣,主要是因为在外包公司完全没有归属感.外包公司大约有6家,我都一一拒绝了. 还有一个是morningstar股票评级机构在深圳的公司,挺不错,可惜在福田那边,有点远,就没有联系.还有一个叫中青宝,做游戏的上市公司,他的人资说他们领导看到我的简历,相约我找个时间聊聊,我查了下这个公司,也不错,可惜后来也没有和他们联系. 还有一个是A8音乐网,这个公司在香港上市,应该也不错,他们的人资挺负责,跟我联系了两次,还让我多了解一下他们公司,本来也想有机会去一下的,可惜还是没有和他们联系.</p>
<p>有一天,接到了一个中兴的电话,开始也想推掉,但是打电话的人态度很好,还说过来瞧一瞧嘛.后来我就请了一天假,因为中兴的班车起点站就在我家楼下,很方便,而且我家对门也是中兴的.我就和她一起坐班车去了西丽的中兴园区. 见到人,很和善,领我上了楼,办公地点很宽广,他发给了我一张试卷,说30分钟简单做一下吧.试题很简单,大部分都是多线程和java传值传引用的试题.我对我的答案很有信心. 不一会儿答完了检查了一遍就给了那个人. 他边领我去会议室边看了看我的答案,应该很满意,和我聊了聊,由于我以前在华为干过,所以很多东西一说大家都知道,方便许多.他说想招个人做Swing,我明确说我对做Swing不感兴趣,我的强项是做后台,多线程和设计之类.他说没关系,反正这是公司的名额,不招就浪费了,来了做服务器端也可以,不会让你做界面的. 我一听能让我做我擅长的方面,很高兴. 接着他就问我想开多少工资,我说12000,他没说啥,跟我讲了他们这里有年终奖,绩效奖,项目奖之类的. 然后说能不能少点,我说最少10000吧.他苦笑了下,说还是有点多,不过你真想来,我就找我老大过来跟你聊聊,我说好吧.然后他就找了一个笑眯眯的中年人(45岁左右)过来了,我给他说我考过了软件设计师证书,他很高兴,简单的问了我两句,就谈到工资,我说12000,他也说给不了那么多,我就说10000,他就问我现在多少钱,我说8000,他说给你8500,你看行不行,这个价格在我们这里已经很高了.我一想,虽然比现在高一点,但是离家近,工作轻松,还有房补和奖金什么的,而且这是第一个面试,先留条后路,就答应了.(后来我辞职那几天,我公司的另外一个同事辞职,正好碰见,他也说他去了中兴面试,最高也只能给8500,后来他去了UT,UT能给到万). 这里的唯一不好就是,我怕我来到这里就变成养老了,中兴基本是个国企类型的,混好别惹事,就会安然无恙.可是对我的职业发展真的是不太好,因为之前做的J2EE开发来这里八成都用不着,而且考试题都是JDK1.4的,5.0以上的语法和特性之类都没有见到. 总之,这个工作,优点不少,缺点也比较严重.</p>
<p>然后就是腾讯面试,第一次笔试,过了,第二个星期约了我去二面,两个人面我,据一个跳到那里的同事说,这各部门是做QQ的那个部门,好牛好核心.问了我不少关于大容量并发处理,数据库调优,性能方面的东西,可惜,我之前的工作对这方面接触实在是太少.挂掉了.又过了几个星期,听说他们周六周日开专场招聘会,我印了3分简历,10点多过去投了两份.结果直接让我上去进行面试了. 其中一个部门又是运营支撑组的,好像叫这个名,还有一个是3G部门. 运营支撑组先让我答了一套题,应该答的也不错,然后是一个女的面试我,面的都比较基本,也不错. 她还说,我们这边招来,主要是做QQ内部监控和一些内部系统,但是如果外部项目来了,也要开始做外部系统,我们每个人的工作都安排到两年后了.然后我们这里的人要会Java,Struts,Spring,Hibernate,Javascript,Flex等若干门技术,而且可能要经常加班,哎,我说我怎么看腾讯这帮人脸色都发黑呢,真的,从我第一次面试到这一次,看到接待我的男人,基本脸上都有一层黑气,脸色很暗而且眼圈也是黑的.我一直都很纳闷,听她这么一说,我也大致清楚了一些,倒吸了一口凉气.她面完了我,说不错,通过了,下一面就是他们老大,叫happy(音译),这位老大看起来很严很狠,但是说起话来轻声轻气,让人得侧着耳朵仔细听才能听清楚.他问了我半天,关于怎么分1000个苹果到10个箱子,还有一些智力算法的题,我都一一给了答复,这时已经到下午3点左右了,他又让我把我设计的超过long范围的大数加法思路说了一遍,我说完后,他说,问了这么久,你还没有写过什么呢,这样吧,你把两个你设计的大数乘法算法写出来,我一听晕了,饿阿,那就写吧.在这层面试期间,3G部门的面试官上午11点就给我打电话要我去9楼面试,我说等一等,一下就等到了下午,他又打了几次电话,说再不来他就要走了,我慌忙写完乘法,给了happy看,他看了看,说写的太对阿,因为期间用了加法的算法,我没有写实现,他又让我把加法的实现也写一遍,我跑到屋里,把加法的算法刚写了个初稿,3G部门的那位面试管又给我打电话了,说再不来他就走了.我问了一下他那里面试要多久,他说很快,聊两句吧.我就跑去happy那里,说,我先下去一下,等下上来在把算法抄清楚了.其实那时,我有点不耐烦了,听到那么恐怖的工作要求和加班,而且对这个老大有点不喜欢,就有些不想面试的想法.后来到了3G部门,和那个人聊了几句,我以前一个小组的人就跳到了这个部门,一说,还都认识,之前的同事也提到过我,聊了一会,他们是做手机方面的,也要求对Javascript很高.然后我又回到了之前的部门,把最后的加法部分整齐的抄到了纸上,那时大约快下午5点了.而且当时听到其中一个人和happy说:哎,这一天又没招到一个人,我们招人,一定要从开始假设他什么也不会,他要从头去证明给我们看.我听了以后,觉得这个部门的人心理状态有点变态.交了卷,和happy说一下就走了. 可能是我和腾讯没有缘分吧. 以后再也不来这里面试了.</p>
<p>然后,有一天,又接到了一个猎头的电话,还是让我去杭州的阿里巴巴,说了很多诱人的话,我想了想,也许可以去试试,然后就答应了她,说先面试一下吧.之后,有一天是中午1点左右,阿里集团的人给我打了电话,聊了40分钟,很不错,考察的很仔细,很全面,沟通也很好,根本不像腾讯那样就捡你不会的问.后来他说,他这一面过了,又问了问我的情况,是否愿意来杭州之类的.然后和我说,让我等2面.过了几天,晚上6点50的时候,又有电话打来,又问了不少问题,这次更深入,把我当成架构师的等级来问的,像分布式Hadoop的细节,你熟悉哪几类通讯协议,有哪些优点和缺点,和很多的方方面面.问题还都算实在.我答的也不错.只有几个真不太专业,比如数据库分表 和 调优,我对mysql这些方面还真没怎么搞过, 但这些方面在大容量系统里真的很重要,以后要主要学习研究下. 最后他也问了一下我来杭州工作没意见吧之类的问题. 第二天,我看了那本叫做&lt;幸运的人更幸运&gt;的书,我问了我自己,这个工作是否真的是我想要的,我有没有欺骗自己,我是否愿意把老婆一个人丢在这里生了小孩我也不在身边,干几年如果不在那边呆了我还要回来重新到新公司积累,或者到那边发展,这边的户口房子和七七八八乱七八糟的事情的处理. 我反复的想了想,我发现我十分不愿背井离乡去杭州做这份工作后,第一时间就联系了我那个猎头,说明了这边也有我想要的工作,抱歉,可能不会去杭州了之类的话. 猎头表示理解,并希望以后再联系之类的.</p>
<p>其实,在接到阿里第二个面试之前,我已经完成了IBM的一面和二面了. 一面是在一个星期六的中午,上海IBM那边提前一天给我打了电话进行预约时间,让我做好准备. 对方在上海有一个IBM招聘会,由于我在深圳,所以只能电话联系,我答的很好,主要是面试了这么久,有了很多经验,并且问的问题实在是很基本,真的很实在. 后来他很高兴的和我说,恭喜你通过了,等下周人资会安排你下一次面试的具体细节. 我去网上查了下,一般IBM就两面,再后来,果然又要电话远程给我二面,我提出要求,能否找个人来当面面一下,聊两句,见不到人发挥不了我的长处. 那位人资一开始和我约了电话面试时间,不一会儿又打来,说,周六去长城大厦那边专门找了个人给我面试. 我说好吧. 周六面试也不错,沟通很好. 再后来,我等了一个星期,怎么没有动静,我快离职之前发了邮件问当时的人资还有没有戏,她很快回过电话来说当然有了. 您还愿意来吗? 我晕,难道最后这一次你要主动联系他们? 我说当然愿意来啦.然后就谈到工资,我要13000.她当时把我夸了一通,说我的技术above average,英语很好,还有管理经验,可以给你订到band7,工资呢,可惜给不了这么多,11000怎么样? 我当时也没多想,11000也行,现在想起来应该跟她谈一下12000了,让她觉得我比较好对付.后来她又让我把现在的工资单发给她.还承诺说跟我谈的这个工资没有任何关系,也不会少.只是证明你再现在的公司干过.后来我发给她(工资单加奖金数目是7500+),下午的时候,她打电话过来说,哎呀,11000没批过,老大说你工作年限太短了(我5年经验还短!!!),10000行不行? 我十分不愿意,可是怎么办? 我问她我有选择没,她笑了. 后悔啊后悔啊. 她接着又说,我看了你的简历,你的经验和水平不错,现在就差像我们这样的跨国公司的经历了,有了这样的经历,你以后出去再找工作也不难. 没办法,我抱着先打入IBM内部的思想,就咬着牙同意了,然后叮嘱她说,不要等下打电话和我说又没批过变9000了阿.她说不会,10000都批完了. 哎呀呀.</p>
<p>总之吧,前途和发展方向才是最重要的,对吧.</p>
<p>最后的时刻,没想到还真能进入IBM,我都准备收拾东西去中兴上班养老了呢.</p>
<p>今天去华强北买了G2000的白衬衣和西裤(便宜又实惠),然后去外贸市场买了条范思哲的皮带,还是真皮的呢,厉害. 以后上班要穿正装了,还真有点不习惯,希望能在IBM有好的发展吧.</p>
<p>发现,机会真的是给有准备的人,我这么多年来,一直坚持每周都看N部欧美电影,玩XO的正版游戏,玩MassEffect和DragonAge的全英文对话游戏,对我的英语保持和发展还真有不少作用呢.平时的积累很重要,还有要抓住机会,你是否还应得到更好的?</p>
<p>海阔凭鱼跃,天高任鸟飞. Good Luck.</p>
<p>//23:47</p>
<p>发表于 @ 2010年07月23日　23:54:00 | <a href="http://blog.csdn.net/Eric77/archive/2010/07/23/5759042.aspx#FeedBack" title="评论" target="_blank">评论( loading...  )</a>| <a href="http://writeblog.csdn.net/PostEdit.aspx?entryId=5759042" title="编辑" target="_blank">编辑</a>| <a href="mailto:webmaster@csdn.net?subject=Article Report!!!&amp;body=Author:Eric77URL:http://blog.csdn.net/ArticleContent.aspx?UserName=Eric77&amp;Entryid=5759042">举报</a>| <a href="&quot;收藏到我的网摘中，并分享给我的朋友&quot;">收藏</a></p>
<h3 id="-http-blog-csdn-net-eric77-archive-2010-06-30-5704612-aspx-http-blog-csdn-net-eric77-archive-2010-08-01-5781573-aspx-"><a href="http://blog.csdn.net/Eric77/archive/2010/06/30/5704612.aspx" target="_blank">旧一篇:幸运的人更幸运 - 节选</a> | <a href="http://blog.csdn.net/Eric77/archive/2010/08/01/5781573.aspx" target="_blank">新一篇:软件开发的一些感想(五年工作总结版)</a></h3>
<p><a href="http://blog.csdn.net/" target="_blank">查看最新精华文章 请访问博客首页</a>相关文章<a href=""></a></p>
<ul>
<li><p>发表评论</p>
</li>
<li><p>表 情：</p>
</li>
<li><p><a href="http://blog.csdn.net/Eric77/archive/2010/07/23/5759042.aspx#" target="_blank"><img src="&quot;顶&quot;" alt="顶"></a> <a href="http://blog.csdn.net/Eric77/archive/2010/07/23/5759042.aspx#" target="_blank"><img src="&quot;砸&quot;" alt="砸"></a> <a href="http://blog.csdn.net/Eric77/archive/2010/07/23/5759042.aspx#" target="_blank"><img src="&quot;棒&quot;" alt="棒"></a> <a href="http://blog.csdn.net/Eric77/archive/2010/07/23/5759042.aspx#" target="_blank"><img src="&quot;大笑&quot;" alt="大笑"></a> <a href="http://blog.csdn.net/Eric77/archive/2010/07/23/5759042.aspx#" target="_blank"><img src="&quot;愤怒&quot;" alt="愤怒"></a> <a href="http://blog.csdn.net/Eric77/archive/2010/07/23/5759042.aspx#" target="_blank"><img src="&quot;大哭&quot;" alt="大哭"></a> <a href="http://blog.csdn.net/Eric77/archive/2010/07/23/5759042.aspx#" target="_blank"><img src="&quot;疑问&quot;" alt="疑问"></a> <a href="http://blog.csdn.net/Eric77/archive/2010/07/23/5759042.aspx#" target="_blank"><img src="&quot;汗&quot;" alt="汗"></a> <a href="http://blog.csdn.net/Eric77/archive/2010/07/23/5759042.aspx#" target="_blank"><img src="&quot;呕吐&quot;" alt="呕吐"></a> <a href="http://blog.csdn.net/Eric77/archive/2010/07/23/5759042.aspx#" target="_blank"><img src="&quot;送花&quot;" alt="送花"></a></p>
</li>
<li><p>评论内容：
*</p>
</li>
<li>用 户 名：</li>
<li><p><a href="">登录</a> <a href="http://passport.csdn.net/CSDNUserRegister.aspx" target="_blank">注册</a> 匿名评论</p>
</li>
<li><p>验 证 码：</p>
</li>
<li><a href=""><img src="" alt="验证码"></a> <a href="">重新获得验证码</a></li>
</ul>
<p><em>
</em></p>
<h3 id="-">热门招聘职位<img src="" alt=""></h3>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/架构师/">架构师</a></li></span></span> | <span class="tags">Tagged <a href="/tags/架构师/" class="label label-primary">架构师</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:29"datetime="2014-03-07 09:54:29"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-架构师--五年经验跳槽历程-Eric77的专栏/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-架构师--五年经验跳槽历程-Eric77的专栏" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-框架汇总-ORM-hibernate--Hibernate总结/">Hibernate总结</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:29.000Z"> <a href="/2014/02/02/2014-02-02-框架汇总-ORM-hibernate--Hibernate总结/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="hibernate-">Hibernate总结</h1>
<p><a href="http://blog.csdn.net/llhhyy1989/article/details/7300599" target="_blank">Hibernate总结</a></p>
<p>看了大约十天的视频，从整体上了解一下hibernate，hibernate的优缺点以及如何搭建hibernate，在上篇博客中已经介绍。</p>
<p>   目前在看ssh，但是具体的细节没有研究，只是从整体了解其出现的原因以及如何配置，但是里面涉及到细节部分，暂时不做研究，根据后期的学习，会进行深刻理解。</p>
<p>  现在自己的java知识不够，这个阶段需要狂塞，猛汲取，整体上尽量消化。后期再对其进行研究细化。</p>
<p>   那我们看一下hibernate中整体的内容：</p>
<p><img src="" alt=""></p>
<p>   我们一一介绍其中的内容。</p>
<ol>
<li>Hibernate出现的原因上篇博客已经介绍，可以参考《Hibernate介绍》</li>
<li>Hibernate中的核心五大接口，在上篇博客中也已经介绍，可以参考《Hibernate介绍》</li>
<li>如何搭建Hibernate，请参考《八步详解Hibernate的搭建及使用》</li>
<li>持久化对象的三种状态。</li>
</ol>
<p>分别为：瞬时状态（Transient），持久化状态（Persistent），离线状态（Detached）。三种状态下的对象的生命周期如下：</p>
<p><img src="" alt=""></p>
<p>三种状态的区别是：瞬时状态的对象：没有被session管理，在数据库没有；持久化状态的对象：被session管理，在数据库存在，当属性发生改变，在清理缓存时，会自动和数据库同步；离线状态：没有被session管理，但是在数据库中存在。
来源： <a href="[http://blog.csdn.net/llhhyy1989/article/details/7300599](http://blog.csdn.net/llhhyy1989/article/details/7300599)">[http://blog.csdn.net/llhhyy1989/article/details/7300599](http://blog.csdn.net/llhhyy1989/article/details/7300599)</a> </p>
<p>5.测试工具Juit。</p>
<p>测试类需要继承TestCase，编写单元测试方法，方法名称必须为test开头，方法没有参数没有返回值，采用public修饰。其中在测试中，查询对象时，使用get或者load两种方法进行加载，这种方法的区别：get不支持延迟加载，而load默认情况下是支持延迟加载。并且get查询对象不存在时，返回null；而load查询对象不存在时，则抛出ObjectNotFoundException异常。</p>
<p>6.悲观锁和乐观锁解释。</p>
<p>悲观锁为了解决并发性，跟操作系统中的进程中添加锁的概念一样。就是在整个过程中在事务提交之前或回滚之前，其他的进程是无法访问这个资源的。悲观锁的实现方式有两种：一种使用数据库中的独占锁；另一种是在数据库添加一个锁的字段。hibernate中声明锁如下：</p>
<p>Account account = (Account)session.get(Account.class, 1, LockMode.UPGRADE);而net.sf.hibernate.LockMode类表示锁模式，当取值LockMode.UPGRADE时，则表示使用悲观锁for update；而乐观锁是为了解决版本冲突的问题。就是在数据库中添加version字段，每次更新时，则把自己的version与数据库中的version进行比较，若是版本相比较低，则不允许进行修改更新。</p>
<p>7.H ibernate中的缓存机制。</p>
<p>缓存是什么呢？缓存是应用程序和数据库之间的内存的一片区域。主要的目的是：为了减少对数据库读取的时间。当查询数据时，首先在缓存中查询，若存在，则直接取出，若不存在，然后再向数据库中查询。所以应该把经常访问数据库的数据放到缓存中，至于缓存中的数据如何不断的置换，这也需要涉及一种淘汰数据的算法。</p>
<p>谈到这个hibernate中的缓存，你想到了什么呢？刚才叙述缓存时，是否感觉很熟悉，感觉从哪也听过似的。嗯呢，是呢，是很熟悉，写着写着就很熟悉，这个刚才的缓存以及缓存的置换算法就和计算机组成中的cache类似。</p>
<p>好吧，来回到我们hibernate中的缓存。</p>
<p>hibernate中的缓存可以分为两种：一级缓存，也称session缓存；二级缓存，是由sessionFactory管理。</p>
<p>那一级缓存和二级缓存有什么区别呢？区别的关键关于：缓存的生命周期，也就是缓存的范围不同。</p>
<p>那首先介绍一下缓存的生命周期，也就是缓存的范围。</p>
<p>1.事务缓存，每个事务都有自己的缓存，当事务结束，则缓存的生命周期同样结束，正如上篇博客中我们提到，对数据库的操作，增删改查都是放到事务中的，和事务保持同步，若是事务提交完毕，一般是不允许是再次对数据库进行操作。所以session是属于事务缓存的。</p>
<p>2.应用缓存，一个应用程序中的缓存，也就是应用程序中的所有事务的缓存。只有当应用程序结束时，此时的缓存的额生命周期结束。二级缓存就是应用缓存。</p>
<p>3.集群缓存，被一台机器或多台机器的进程共享。</p>
<p>这下明白了一级缓存和二级缓存的区别了吧。那一级缓存和二级缓存的共同点是：都是缓存实体属性，</p>
<p>二级缓存一般情况都是由第三方插件实现的。第三方插件如：</p>
<p>EHCache，JbossCache（是由Jboss开源组织提供的），osCache(open symphony)，swarmCache。前三种对hibernate中的查询缓存是支持的，后一种是不支持hibernate查询缓存。</p>
<p>那什么是hibernate查询缓存呢？</p>
<p>查询缓存是用来缓存普通属性的，对于实体对象而言，是缓存实体对象的id。
来源： <a href="[http://blog.csdn.net/llhhyy1989/article/details/7306009](http://blog.csdn.net/llhhyy1989/article/details/7306009)">[http://blog.csdn.net/llhhyy1989/article/details/7306009](http://blog.csdn.net/llhhyy1989/article/details/7306009)</a> 8.hql查询。</p>
<p>  Hibernate query language。hql查询中关键字不区分大小写，但是类和属性都是区分大小写的。</p>
<p>  1.简单属性查询。</p>
<p>  单一属性查询，返回属性结果集列表，元素类型和实体类的相应的类型一致。
<strong>[java]</strong> <a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="view plain" target="_blank">view plain</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="copy" target="_blank">copy</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="print" target="_blank">print</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="?" target="_blank">?</a></p>
<ol>
<li>List students = session.createQuery(&quot;select name from Student&quot;).list();  </li>
<li></li>
<li>for (Iterator iter=students.iterator(); iter.hasNext();) {  </li>
<li></li>
<li>String name = (String)iter.next();  </li>
<li></li>
<li>System.out.println(name);  </li>
<li></li>
<li>}  </li>
</ol>
<p> //返回结果集属性列表，元素类型和实体类中的属性类型一致</p>
<p>多个属性查询，多个属性查询返回数组对象，对象数组的长度取决于属性的个数，对象数组中的元素类型与实体类中属性一致。
<strong>[java]</strong> <a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="view plain" target="_blank">view plain</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="copy" target="_blank">copy</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="print" target="_blank">print</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="?" target="_blank">?</a></p>
<ol>
<li>List students = session.createQuery(&quot;select id, name from Student&quot;).list();  </li>
<li></li>
<li>for (Iterator iter=students.iterator(); iter.hasNext();) {  </li>
<li></li>
<li>Object[] obj = (Object[])iter.next();  </li>
<li></li>
<li>System.out.println(obj[0] + &quot;, &quot; + obj[1]);  </li>
<li></li>
<li>}  </li>
</ol>
<p>2.实体对象查询</p>
<p>List students = session.createQuery(&quot;from Student&quot;).list();</p>
<p>当然这种hql语句，可以使用别名,as可以省去，如：from Student as s,若是使用select关键字，则必须使用别名。如：select s from Student as s.但是不支持select /* from Student格式。</p>
<p>查询中使用list和Iterate区别：</p>
<p>list查询是直接运行查询的结果，所以只有一句sql语句。而iterate方法则有可能会产生N+1条sql语句。这是怎么回事呢？要理解N+1条语句，首先得弄明白iterate是如何执行查询的？</p>
<p>首先发出一条查询对象ID的语句，然后根据对象的ID到缓存（缓存的概念上篇博客已经提到）中查找，若是存在查询出此对象的其他的属性，否则会发出N条语句，此时的N语句，是刚才第一次查询的记录条数。这种现象就是N+1sql语句。</p>
<p>其中list是默认情况下都发出sql语句，查询出的结果会放到缓存中，但是它不会利用缓存，即使放进去，下次执行时，仍然继续发出sql语句。</p>
<p>而：iterate默认情况下会利用缓存，若是缓存中有则不会发出N+1条语句。</p>
<p>3.条件查询。</p>
<p>这种方式就是传入参数，使用参数占位符“？”。也可以使用“：参数名”</p>
<p>java代码如下：
<strong>[java]</strong> <a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="view plain" target="_blank">view plain</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="copy" target="_blank">copy</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="print" target="_blank">print</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="?" target="_blank">?</a></p>
<ol>
<li>List students = session.createQuery(&quot;select s.id, s.name from Student s where s.name like ?&quot;)  </li>
<li></li>
<li>.setParameter(0, &quot;%0%&quot;)  </li>
<li></li>
<li>.list();  </li>
<li></li>
<li>List students = session.createQuery(&quot;select s.id, s.name from Student s where s.name like :myname&quot;)  </li>
<li></li>
<li>.setParameter(&quot;myname&quot;,  &quot;%0%&quot;)  </li>
<li></li>
<li><p>.list();  </p>
<p>4.使用原生sql语句。</p>
<p>  和咱们原先写入的sql语句一样。在此不介绍了。</p>
<p>5.外置命名查询。</p>
<p>   这个听起来有点晦涩，怎么理解呢？其实通俗的说就是把hql语句写在外面，写在映射文件中。使用标签：</p>
</li>
</ol>
<p><strong>[html]</strong> <a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="view plain" target="_blank">view plain</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="copy" target="_blank">copy</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="print" target="_blank">print</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="?" target="_blank">?</a></p>
<ol>
<li><query name="queryStudent">  </li>
<li></li>
<li>&lt;![CDATA[ 
1.</li>
<li>select s from Student s where s.id &lt;? 
1.</li>
<li>]]&gt;  </li>
<li></li>
<li></query>  </li>
</ol>
<pre><code>那在程序中是如何使用此标签的呢？使用session.getNameQuery()，并进行赋值，代码如下：
</code></pre><p><strong>[java]</strong> <a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="view plain" target="_blank">view plain</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="copy" target="_blank">copy</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="print" target="_blank">print</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="?" target="_blank">?</a></p>
<ol>
<li>List students = session.getNamedQuery(&quot;queryStudent&quot;)  </li>
<li></li>
<li>.setParameter(0, 10)  </li>
<li></li>
<li>.list();  </li>
</ol>
<p> 6.查询过滤器。</p>
<pre><code>这个是什么意思呢？过滤器大家很熟悉吧，不熟悉的可以参考我的以前博客&lt;&gt;.原来我们接触过编码过滤器，编码过滤器就是为了避免当时每个页面需要设置编码格式而提出的。这个查询过滤器其实也是这个意思。若是代码都需要某一句sql语句的话，可以考虑使用它。这样可以避免每次都写查询语句。

使用如下：首先在映射文件中配置标签：
</code></pre><p><strong>[html]</strong> <a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="view plain" target="_blank">view plain</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="copy" target="_blank">copy</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="print" target="_blank">print</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="?" target="_blank">?</a></p>
<ol>
<li><filter-def name="testFilter">  </li>
<li></li>
<li><filter-param type="integer" name="myid"/>  </li>
<li></li>
<li></filter-def>  </li>
</ol>
<p>  然后程序中如下使用并进行赋值：
<strong>[java]</strong> <a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="view plain" target="_blank">view plain</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="copy" target="_blank">copy</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="print" target="_blank">print</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="?" target="_blank">?</a></p>
<ol>
<li>session.enableFilter(&quot;testFilter&quot;)  </li>
<li></li>
<li>.setParameter(&quot;myid&quot;, 10);  </li>
</ol>
<p>7.分页查询。</p>
<pre><code>分页查询，这个肯定不陌生，因为在做drp项目时，做的最多的是分页，当时使用oracle数据库，分页查询涉及到三层嵌套。直接传入的参数为：每页的大小（记录数），页号。

 Hibernate中给我们已经封装好了，只要设置开始的页号以及每页的大小即可，不用亲自动手写嵌套的sql语句。

 代码如下：
</code></pre><p><strong>[java]</strong> <a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="view plain" target="_blank">view plain</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="copy" target="_blank">copy</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="print" target="_blank">print</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="?" target="_blank">?</a></p>
<ol>
<li>List students = session.createQuery(&quot;from Student&quot;)  </li>
<li></li>
<li>.setFirstResult(1)  </li>
<li></li>
<li>.setMaxResults(2)  </li>
<li></li>
<li>.list();  </li>
</ol>
<p>8.对象导航查询。</p>
<p>这个什么意思呢？这个只要是用于一个类的属性是另一个类的引用。比如：student类中有一个classes属性。其中的classes也是一个类Class的引用。</p>
<p>当我们查询的时候可以这样使用：
<strong>[java]</strong> <a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="view plain" target="_blank">view plain</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="copy" target="_blank">copy</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="print" target="_blank">print</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="?" target="_blank">?</a></p>
<ol>
<li>List students = session.createQuery(&quot;from Student s where s.classes.name like &#39;%t%&#39;&quot;)  </li>
<li></li>
<li>.list();  </li>
</ol>
<p>相当于：s.getClasses.getName()，直接使用get后面的属性，然后首字母小写。</p>
<p> 这种语法，是不是很熟悉？想想我们在哪是不是也用过？想起来了吗？估计你猜出来啦，呵呵，是JSTL（jsp standard tag library）中。若是想进一步了解，可以参考我的博客哈，当时是转载滴貌似。</p>
<p>9.连接查询。</p>
<pre><code>连接分为：内连接和外连接，其中外连接分为左连接，右连接，完全连接。这个跟数据库中的左右连接其实是一样的。我们通俗解释一下：

左连接：以左边为准，右边即使没哟匹配的，也要把这条记录查询出来，此时没有匹配的右边以null填充。

右连接：以右边为准，左边即使没有匹配的，也要把这条记录查询出来，此时没有匹配的左边以null填充。
</code></pre><p>   完全连接：只要一方存在即可。</p>
<p>   内连接：必须两方都存在才可以查询提取此记录。</p>
<p>10.统计查询。</p>
<pre><code> 其实就是查询count的记录数。其中查询出来的额count是long类型。
</code></pre><p>11.DML风格的操作。</p>
<pre><code> DML？其实DML=Data Manipulate Language（数据操作语言），举个例子：
</code></pre><p><strong>[java]</strong> <a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="view plain" target="_blank">view plain</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="copy" target="_blank">copy</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="print" target="_blank">print</a><a href="http://blog.csdn.net/llhhyy1989/article/details/7307436#" title="?" target="_blank">?</a></p>
<ol>
<li>session.createQuery(&quot;update Student s set s.name=? where s.id&lt;?&quot;)  </li>
<li></li>
<li>.setParameter(0, &quot;王斌&quot;)  </li>
<li></li>
<li>.setParameter(1, 2)  </li>
<li></li>
<li>.executeUpdate();   </li>
</ol>
<p>假若原来的名字是：李四，更新完数据库后变成王斌，若是我们此时取出数据，其姓名是李四还是王斌？按照道理应该是王斌，但是结果确实李四，若不信，可以自己去实践一下。</p>
<p>这个原因，是因为更新了数据库，但是缓存中没有更新，才会造成这种数据库和缓存不同步的问题。</p>
<p>所以，我们应该尽量不使用这种形式。扬其长避其短嘛。
来源： <a href="[http://blog.csdn.net/llhhyy1989/article/details/7307436](http://blog.csdn.net/llhhyy1989/article/details/7307436)">[http://blog.csdn.net/llhhyy1989/article/details/7307436](http://blog.csdn.net/llhhyy1989/article/details/7307436)</a> </p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/框架汇总/">框架汇总</a></li></span><span class="breadcrumb"><li><a href="/categories/框架汇总/">框架汇总</a></li><li><a href="/categories/框架汇总/ORM/">ORM</a></li><li><a href="/categories/框架汇总/ORM/hibernate/">hibernate</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ORM/" class="label label-primary">ORM</a><a href="/tags/hibernate/" class="label label-success">hibernate</a><a href="/tags/框架汇总/" class="label label-info">框架汇总</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:29"datetime="2014-03-07 09:54:29"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-框架汇总-ORM-hibernate--Hibernate总结/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-框架汇总-ORM-hibernate--Hibernate总结" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-框架汇总-ORM-hibernate--Hibernate的体系结构与分析、工作原理/">Hibernate的体系结构与分析、工作原理</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:29.000Z"> <a href="/2014/02/02/2014-02-02-框架汇总-ORM-hibernate--Hibernate的体系结构与分析、工作原理/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="hibernate-">Hibernate的体系结构与分析、工作原理</h1>
<p>本文摘自 李刚 著 《Java EE企业应用实战》</p>
<pre><code>    现在我们知道了一个概念**Hibernate Session**，只有处于**Session**管理下的**POJO**才具有持久化操作能力。当应用程序对于处于**Session**管理下的**POJO**实例执行操作时，**Hibernate**将这种面向对象的操作转换成了持久化操作能力。
</code></pre><p>HIbernate简要的体系结构如下图所示：</p>
<p><img src="" alt=""></p>
<pre><code>    通过上图能够发现HIbernate需要一个**hibernate.properties**文件，该文件用于配置**Hibernate**和数据库连接的信息。还需要一个XML文件，该映射文件确定了持久化类和数据表、数据列之间的想对应关系。
</code></pre><p>除了使用hibernate.properties文件，还可以采用另一种形式的配置文件： <strong>/*.cfg.xml</strong>文件。在实际应用中，采用XML配置文件的方式更加广泛，两种配置文件的实质是一样的。</p>
<pre><code>    Hibernate的持久化解决方案将用户从赤裸裸的JDBC访问中释放出来，用户无需关注底层的JDBC操作，而是以面向对象的方式进行持久层操作。底层数据连接的获得、数据访问的实现、事务控制都无需用户关心。这是一种“全面解决”的体系结构方案，将应用层从底层的JDBC/JTA API中抽象出来。通过配置文件来管理底层的JDBC连接，让Hibernate解决持久化访问的实现。这种“全面解决”方案的体系结构图如图所示：
</code></pre><p><img src="" alt=""></p>
<pre><code>    针对以上的Hibernate全面解决方案架构图：

  （1）**SessionFactory**：**这是Hibernate的关键对象，**它是单个数据库映射关系经过编译后的内存镜像，它也是**线程安全的**。**它是生成Session的工厂**，本身要应用到ConnectionProvider，该对象可以在进程和集群的级别上，为那些事务之间可以重用的数据提供可选的二级缓存。

  （2）**Session**：它是应用程序和持久存储层之间交互操作的一个单线程对象。它也是Hibernate持久化操作的关键对象，所有的持久化对象必须在Session的管理下才能够进行持久化操作。**此对象的生存周期很短，其隐藏了JDBC连接，也是Transaction 的工厂。Session对象有一个一级缓存，现实执行Flush之前，所有的持久化操作的数据都在缓存中Session对象处。**

  （3）**持久化对象**：系统创建的POJO实例一旦与特定Session关联，并对应数据表的指定记录，那该对象就处于持久化状态，这一系列的对象都被称为持久化对象。程序中对持久化对象的修改，都将自动转换为持久层的修改。**持久化对象完全可以是普通的Java Beans/POJO，唯一的特殊性是它们正与Session关联着。**

  （4）**瞬态对象和脱管对象**：系统进行new关键字进行创建的Java 实例，没有Session 相关联，此时处于瞬态。瞬态实例可能是在被应用程序实例化后，尚未进行持久化的对象。如果一个曾今持久化过的实例，但因为Session的关闭而转换为脱管状态。

  （5）**事务(Transaction)**：代表一次原子操作，它具有数据库事务的概念。但它通过抽象，将应用程序从底层的具体的JDBC、JTA和CORBA事务中隔离开。在某些情况下，一个Session 之内可能包含多个Transaction对象。虽然事务操作是可选的，但是所有的持久化操作都应该在事务管理下进行，即使是只读操作。

  （6）**连接提供者(ConnectionProvider)：****它是生成JDBC的连接的工厂，同时具备连接池的作用。他通过抽象将底层的DataSource和DriverManager隔离开。这个对象无需应用程序直接访问，仅在应用程序需要扩展时使用。**

  （7）事务工厂(TransactionFactory)：他是生成Transaction对象实例的工厂。该对象也无需应用程序的直接访问。
</code></pre><p>来源： <a href="[http://blog.csdn.net/titilover/article/details/6920457](http://blog.csdn.net/titilover/article/details/6920457)">[http://blog.csdn.net/titilover/article/details/6920457](http://blog.csdn.net/titilover/article/details/6920457)</a> </p>
<pre><code>前面说了一些宏观上学习框架相关的思想方面的东西，下面继续来介绍我经常使用的框架和框架的分析，这篇博客主要介绍的是hibernate框架。

  首先说hibernate框架是数据持久层的框架，这个框架是非常强大的，它让编程人员纯粹的用面向对象的方式来做开发，让编程人员所面对的都是对象。仅仅从这一点它的设计思路就是非常让编程人员喜爱的。

  回想我们普通的开发流程，和客户沟通定需求，抽象出来原型，从原型中建立数据模型到库表结构的建立，之后在映射成对象模型，之后在用oo的设计思想完成后续的程序开发。但是当我们使用了hibernate框架以后，原先的设计思路就显得不再那么具有优势了。我们直接建立对象模型，之后利用hibernate框架映射成数据模型，我们不再去考虑数据库关系模型的东西，仅仅考虑的东西仅仅就是类和对象，这样的开发才是面向对象的开发，也才是最接近人类思考问题的方式。所以hibernate框架的设计思路是非常好的。

    hibernate框架设计思路的优越性其实体现在了它本身的框架的原理上。hibernate封装了JDBC，减轻了开发人员在持久层的大量重复性工作，它利用了java反射机制来实现程序的透明性；它就是通过这两点才达到从对象出发而非关系数据库出发的效果。



  介绍这么多理论性的东西之后我们能够感觉到hibernate框架的强大，来看看它的结构图：
</code></pre><p><img src="" alt=""></p>
<pre><code>   在hibernate框架中有几个比较重要的接口和类：
</code></pre><ol>
<li><p>Query接口：Query负责执行各种数据库查询。它可以使用HQL语句或SQL语句两种表达方式。</p>
</li>
<li><p>Configuration类：Configuration类负责配置并启动Hibernate，创建SessionFactory对象</p>
</li>
<li><p>SessionFactory接口：SessionFactory接口负责初始化Hibernate。它充当数据存储源的代理，并负责创建Session对象</p>
</li>
<li><p>Session接口：Session接口负责执行被持久化对象的CRUD操作</p>
</li>
<li><p>Transaction接口：Transaction接口负责事务相关的操作</p>
</li>
</ol>
<pre><code>     hibernate框架就是在利用这几个接口来封装了JDBC，而且我们用这些接口来操作数据库变得非常简单，减少了我们在持久层的代码量。

   从这个结构图和我的一些分析就能发现hibernate框架是非常强大，而且它给我们开发人员的开发带来了非常大的便利，尤其是他的设计思路还有它的“全自动”的映射对象模型和关系模型。

   但是hibernate框架也有它的一些缺点：
</code></pre><ol>
<li><p>既然是封装了JDBC，所以很明显它没有JDBC的效率高，尤其是在大量的处理表更新操作的时候。</p>
</li>
<li><p>它有局限性，一个持久化类不能映射多个表</p>
</li>
<li>它应对大数量的时候显得非常笨拙，这一点没有JDBC和接下来要介绍的IBatis框架</li>
</ol>
<pre><code>   其实一项技术或者一个框架都有它的优缺点，选择最合适的才是王道。
</code></pre><p>来源： <a href="[http://blog.csdn.net/lfsf802/article/details/7941958](http://blog.csdn.net/lfsf802/article/details/7941958)">[http://blog.csdn.net/lfsf802/article/details/7941958](http://blog.csdn.net/lfsf802/article/details/7941958)</a> </p>
<p>Hibernate工作原理：</p>
<p>1.Hibernate 的初始化.</p>
<p>读取Hibernate 的配置信息-〉创建Session Factory</p>
<p>1)创建Configeration类的实例：</p>
<p>它的构造方法：将配置信息(Hibernate config.xml)读入到内存。 
一个Configeration 实例代表Hibernate 所有Java类到Sql数据库映射的集合。</p>
<p>2)创建SessionFactory实例：</p>
<p>把Configeration 对象中的所有配置信息拷贝到SessionFactory的缓存中。 
SessionFactory的实例代表一个数据库存储员源，创建后不再与Configeration 对象关联。</p>
<p>3)调用SessionFactory创建Session的方法：</p>
<pre><code>    1】用户自行提供JDBC连接。

    Connection con=dataSource.getConnection();
    Session s=sessionFactory.openSession(con);

    2】让SessionFactory提供连接

    Session s=sessionFactory.openSession();
</code></pre><p>4)通过Session 接口提供的各种方法来操纵数据库访问。</p>
<p>Hibernate 的缓存体系</p>
<p>一级缓存：</p>
<p>Session 有一个内置的缓存，其中存放了被当前工作单元加载的对象。 
每个Session 都有自己独立的缓存，且只能被当前工作单元访问。</p>
<p>二级缓存：</p>
<p>SessionFactory的外置的可插拔的缓存插件。其中的数据可被多个Session共享访问。</p>
<p>SessionFactory的内置缓存：存放了映射元数据，预定义的Sql语句。</p>
<p>Hibernate 中Java对象的状态</p>
<p>1.临时状态 (transient)</p>
<p>特征：</p>
<p>1】不处于Session 缓存中
2】数据库中没有对象记录</p>
<p>Java如何进入临时状态</p>
<p>1】通过new语句刚创建一个对象时 
2】当调用Session 的delete()方法，从Session 缓存中删除一个对象时。</p>
<p>2.持久化状态(persisted)</p>
<p>特征：</p>
<p>1】处于Session 缓存中 
2】持久化对象数据库中设有对象记录 
3】Session 在特定时刻会保持二者同步</p>
<p>Java如何进入持久化状态</p>
<p>1】Session 的save()把临时－》持久化状态 
2】Session 的load(),get()方法返回的对象 
3】Session 的find()返回的list集合中存放的对象 
4】Session 的update(),saveOrupdate()使游离－》持久化</p>
<p>3.游离状态(detached)</p>
<p>特征：</p>
<p>1】不再位于Session 缓存中 
2】游离对象由持久化状态转变而来，数据库中可能还有对应记录。</p>
<p>Java如何进入持久化状态－》游离状态</p>
<p>1】Session 的close()方法 
2】Session 的evict()方法，从缓存中删除一个对象。提高性能。少用。</p>
<p>总结一下Hibernate的好处：</p>
<p>1.JDBC访问数据库的代码做了封装，大大简化了数据访问层繁琐的重复性代码。</p>
<ol>
<li><p>Hibernate是一个基于JDBC的主流持久化框架，是一个优秀的ORM实现。他很大程度的简化DAO层的编码工作</p>
</li>
<li><p>hibernate使用Java反射机制，而不是字节码增强程序来实现透明性。</p>
</li>
<li><p>hibernate的性能非常好，因为它是个轻量级框架。映射的灵活性很出色。它支持各种关系数据库，从一对一到多对多的各种复杂关系。
来源： <a href="[http://www.linuxidc.com/Linux/2012-12/76684.htm](http://www.linuxidc.com/Linux/2012-12/76684.htm)">[http://www.linuxidc.com/Linux/2012-12/76684.htm](http://www.linuxidc.com/Linux/2012-12/76684.htm)</a> </p>
</li>
</ol>
<p><img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/框架汇总/">框架汇总</a></li></span><span class="breadcrumb"><li><a href="/categories/框架汇总/">框架汇总</a></li><li><a href="/categories/框架汇总/ORM/">ORM</a></li><li><a href="/categories/框架汇总/ORM/hibernate/">hibernate</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ORM/" class="label label-primary">ORM</a><a href="/tags/hibernate/" class="label label-success">hibernate</a><a href="/tags/框架汇总/" class="label label-info">框架汇总</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:29"datetime="2014-03-07 09:54:29"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-框架汇总-ORM-hibernate--Hibernate的体系结构与分析、工作原理/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-框架汇总-ORM-hibernate--Hibernate的体系结构与分析、工作原理" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-架构师--大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？/">大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:29.000Z"> <a href="/2014/02/02/2014-02-02-架构师--大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-">大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？</h1>
<p><a href="http://www.zhihu.com/question/20091391" target="_blank">大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？</a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" target="_blank">天顺</a>，<strong>搞支付的，接受各类支付业务咨询</strong><a href="">收起</a></p>
<p><a href="http://www.zhihu.com/people/liao-yan-48" target="_blank">廖艳</a>、<a href="http://www.zhihu.com/people/morbred" target="_blank">张大维</a>、<a href="http://www.zhihu.com/people/ze-fang-tong-yun" title="泽芳铜芸" target="_blank">泽芳铜芸</a><a href="">等人赞同</a>
谢邀，不过我看到一楼答案50多票赞同后就不想写了。
提问是大型支付系统的风控和对账是如何实现的，答案却是从商户角度谈使用支付公司产品对账的体验。
不过，我今天看到@黄继新 也在其他问题中逆袭了一把，质疑了第一答案。所以我就先放在这里，如果赞同数超过35票，我就把我所做的支付结算系统相关业务经验分享给大家，否则就算啦~
另，暂时没有答案，欢迎折叠。
鉴于已经有30票了，看这样子超过35是没什么太大问题，由于内容众多，我先准备起来了
请大家稍安勿躁
------------------------------------------------------------扯淡的分割线----------------------------------------------------------
先扯淡一下对账，这坑有点大，容我慢慢填。刚刚打了半小时的草稿由于没保存，死机后被系统吃掉了……知乎貌似原来有自动保存功能的……去哪里了……
业务上，为何对账，对账的操作步骤等@詹世波已经说得很多了，我谈谈一些没涉及的。
为了可以更好地解释支付结算系统对账过程，我们先把业务从头到尾串起来描述一下场景，帮助大家理解：
一个可能得不能再可能的场景，请大家深刻理解里面每个角色做了什么，获取了哪些信息：
某日阳光灿烂，支付宝用户小明在淘宝上看中了暖脚器一只，价格100元。犹豫再三后小明使用支付宝网银完成了支付，支付宝显示支付成功，淘宝卖家通知他已发货，最近几日注意查收。
我们来看看这个过程中有几个相关方，分别做了什么。我语文不好，写得饶口，如果看不懂请多看几次：
<strong>小明：</strong>持卡人，消费者，淘宝和支付宝的注册会员，完成了支付动作，自己的银行账户资金减少，交易成功。
<strong>银行：</strong>收单银行，接受来自支付宝的名为“支付宝BBB”的100元订单，并引导持卡人小明支付成功，扣除小明银行卡账户余额后返回给支付宝成功通知，并告诉支付宝这笔交易在银行流水号为“银行CCC”
<strong>支付宝：</strong>支付公司，接收到淘宝发来的订单号为“淘宝AAA”的商户订单号，并形成支付系统唯一流水号：“支付宝BBB”发往银行系统。然后获得银行回复的支付成功信息，顺带银行流水号“银行CCC”
<strong>淘宝：</strong>我们支付公司称淘宝这类电商为商户，是支付系统的客户。淘宝向支付系统发送了一笔交易收单请求，金额为100，订单号为:“淘宝AAA”，支付系统最后反馈给淘宝这笔支付流水号为“支付BBB”
以上流程貌似大家都达到了预期效果，但实际上仍然还有一个问题：
对支付公司（支付宝）而言，虽然银行通知了它支付成功，但资金实际还要T+1后结算到它银行账户，所以目前只是一个信息流，资金流还没过来。
<strong>Tips:</strong>插一句话，对支付系统内部账务来说，由于资金没有能够实时到账，所以此时小明的这笔100元交易资金并没有直接记入到系统资产类科目下的“银行存款”科目中，而是挂在“应收账款”或者“待清算科目”中。大白话就是，这100元虽然答应给我了，我也记下来了，但还没收到，我挂在那里。
对商户（淘宝）而言，虽然支付公司通知了它支付成功，他也发货了，但资金按照合同也是T+1到账。如果不对账确认一下，恐怕也会不安。
倒是对消费者（小明）而言：反正钱付了，你们也显示成功了，等暖脚器呀等暖脚器~
基于支付公司和商户的困惑，我们的支付结算系统需要进行两件事情：一是资金渠道对账，通称对银行帐；二是商户对账，俗称对客户帐。对客户帐又分为对公客户和对私客户，通常对公客户会对对账文件格式、对账周期、系统对接方案有特殊需求，而对私客户也就是我们一般的消费者只需要可以后台查询交易记录和支付历史流水就可以了。
<strong>我们先聊银行资金渠道对账，由于支付公司的资金真正落地在商业银行，所以资金渠道的对账显得尤为重要。</strong>
在一个银行会计日结束后，银行系统会先进行自己内部扎帐，完成无误后进行数据的清分和资金的结算，将支付公司当日应入账的资金结算到支付公司账户中。于此同时，目前多数银行已经支持直接系统对接的方式发送对账文件。
于是，在某日临晨4点，支付宝系统收到来自银行发来的前一会计日对账文件。根据数据格式解析正确后和前日支付宝的所有交易数据进行匹配，理想情况是一一匹配成功无误，然后将这些交易的对账状态勾对为“已对账”。
<strong>Tips:</strong>此时，对账完成的交易，会将该笔资金从“应收账款”或者“待清算账款”科目中移动到“银行存款”科目中，以示该交易真正资金到账。
以上太理想了，都那么理想就不要对账了。所以通常都会出一些差错，那么我总结了一下常见的差错情况：
1.支付时提交到银行后没有反馈，但对账时该交易状态为支付成功
这种情况很正常，因为我们在信息传输过程中，难免会出现掉包和信息不通畅。消费者在银行端完成了支付行为，银行的通知信息却被堵塞了，如此支付公司也不知道结果，商户也不知道结果。如果信息一直没法通知到支付公司这边，那么这条支付结果就只能在日终对账文件中体现了。这时支付公司系统需要对这笔交易进行补单操作，将交易置为成功并完成记账规则，有必要还要通知到商户。
<strong>此时的小明：估计急的跳起来了……付了钱怎么不给说支付成功呢！坑爹！</strong>
<strong>TIPS：</strong>通常银行系统会开放一个支付结果查询接口。支付公司会对提交到银行但没有回复结果的交易进行间隔查询，以确保支付结果信息的实时传达。所以以上情况出现的概率已经很少了。
2.我方支付系统记录银行反馈支付成功，金额为100，银行对账金额不为100
这种情况已经不太常见了，差错不管是长款和短款都不是我们想要的结果。通常双方系统通讯都是可作为纠纷凭证的，如果银行在支付结果返回时确认是100元，对账时金额不一致，可以要求银行进行协调处理。而这笔账在支付系统中通常也会做对应的挂账处理，直到纠纷解决。
3.我方支付系统记录银行反馈支付成功，但对账文件中压根不存在
这种情况也经常见到，因为跨交易会计日的系统时间不同，所以会出现我们认为交易是23点59分完成的，银行认为是第二天凌晨0点1分完成。对于这种情况我们通常会继续挂账，直到再下一日的对账文件送达后进行对账匹配。
如果这笔交易一直没有找到，那么就和第二种情况一样，是一种短款，需要和银行追究。
以上情况针对的是一家银行资金渠道所作的流程，实际情况中，支付公司会在不同银行开立不同银行账户，用以收单结算（成本会降低），所以真实情况极有可能是：
临晨1点，工行对账文件丢过来（支行A）
临晨1点01分，工行又丢一个文件过来（支行B）
临晨1点15分，农行对账文件丢过来
。 。 。
临晨5点，兴业银行文件丢过来
。。。
不管什么时候，中国银行都必须通过我方业务员下载对账文件再上传的方式进行对账，所以系统接收到中行文件一般都是早上9点05分……
对系统来说，每天都要处理大量并发的对账数据，如果在交易高峰时段进行，会引起客户交互的延迟和交易的失败，这是万万行不得的
所以通常支付公司不会用那么傻的方式处理数据，而是在一个会计日结束后，通常也是临晨时段，将前一日交易增量备份到专用对账服务器中，在物理隔绝环境下进行统一的对账行为，杜绝硬件资源的抢占。
以上是银行资金渠道入款的对账，出款基本原理一致，不过出款渠道在实际业务过程中还有一些特别之处，由于大家不是要建设系统，我就不赘述了。
<strong>谈完了资金渠道的对账，我们再来看看对客户帐。</strong>
前面提到了，由于资金落在银行，所以对支付公司来说，对银行帐非常重要。那么同理，由于资金落在支付公司，所以对商户来说，对支付公司账也一样重要。能否提供高品质甚至定制化的服务，是目前支付公司走差异化路线的一个主要竞争点。
就流程而言@詹世波已经说的差不多了，我就不赘述了……
----------------------------------------------------------没经过排版的小知识点---------------------------------------------------
之前说过，银行与支付公司之间的通讯都是可以作为纠纷凭证的。原理是对支付报文的关键信息进行密钥加签+md5处理，以确保往来报文“<strong>不可篡改，不可抵赖</strong>”。
同理，支付公司和商户之间也会有类似机制保证报文的可追溯性，由此我们可以知道，一旦我方支付系统通知商户支付结果，那么我们就要为此承担责任。由此我们再推断一个结论：
<strong>即便某支付订单银行方面出错导致资金未能到账，一旦我们支付系统通知商户该笔交易成功，那么根据协议该结算的资金还是要结算给这个商户。自然，我们回去追究银行的问题，把账款追回。</strong>
----------------------------------------------------------没经过排版的小知识点---------------------------------------------------
一、对支付系统而言，最基本的对账功能是供商户在其后台查询下载某一时间段内的支付数据文件，以供商户自己进行对账。
这个功能应该是个支付公司就有，如果没有就别混了。
二、对大多数支付系统而言，目前已经可以做到对账文件的主动投送功能。
这个功能方便了商户系统和支付系统的对接，商户的结算人员无须登录支付平台后台下载文件进行对账，省去了人工操作的麻烦和风险。
对大型支付系统而言，商户如果跨时间区域很大，反复查询该区域内的数据并下载，会对服务器造成比较大的压力。各位看官别笑，觉得查个数据怎么就有压力了。实际上为了这个查询，我最早就职的一家支付公司重新优化了所有SQL语句，并且因为查询压力过大服务器瘫痪过好几次。
现在比较主流的做法是把商户短期内查询过、或者经常要查询的数据做缓存。实在不行就干脆实时备份，两分钟同步一次数据到专用数据库供商户查询，以避免硬件资源占用。甚至……大多数支付公司都会对查询范围跨度和历史事件进行限制，比如最多只能查一个月跨度内，不超过24个月前的数据……以避免服务嗝屁。
对账这块大致就这样了，再往细的说就说不完了，大家有什么想问的可以单M我或者回复答案。
稍后给大家讲一下风控。
-----------------------------------------------风控的分割线-------------------------------------------
风险控制，在各行各业都尤其重要。
金融即风险，控制好风险，才有利润。
虽然第三方支付严格意义上说并非属于金融行业，但由于涉及资金的清分和结算，业务主体又是资金的收付，所以风险控制一样非常重要。
对支付公司来说，风控主要分为合规政策风控以及交易风控两种。
前者主要针对特定业务开展，特定产品形态进行法规层面的风险规避，通常由公司法务和风控部门一起合作进行。例如，一家公司要开展第三方支付业务，现在要获得由人民银行颁发的“支付业务许可证”。遵守中国对于金融管制的所有条规，帮助人行监控洗钱行为……这些法规合规风险，虽然条条框框，甚至显得文绉绉，但如果没人解读没人公关，业务都会无法开展。
当然，这块也不是本题所关注的重点，提问者关注的，应当是业务进行过程中的交易风控环节。
现在随着各支付公司风险控制意识的加强，风控系统渐渐被重视起来。除了上述提到的合规风控相关功能，风控系统最讲技术含量，最讲业务水平，最考究数据分析的业务就是交易风控环节。
对一笔支付交易而言，在它发生之前、发生过程中及发生过程后，都会被风控系统严密监控，以确保支付及客户资产安全。而所有的所有秘密，都归结到一个词头上：规则。风控系统是一系列规则的集合，任何再智能的风控方案，都绕不开规则二字。
我们先看看，哪些情况是交易风控需要监控处理的：
1.钓鱼网站
什么是钓鱼呢？
用我的说法，就是利用技术手段蒙蔽消费者，当消费者想付款给A的时候，替换掉A的支付页面，将钱付给B，以达成非法占用资金的目的。
还有更低级的，直接就是发小广告，里面带一个类似<a href="http://tiaobao.com/" target="_blank"><a href="http://tiaobao.com">http://tiaobao.com</a></a>的网址，打开后和淘宝页面一摸一样，上当客户直接付款给假冒网站主。
第一种情况风控系统是可以通过规则进行简单判定的，虽然有误杀，但不会多。
通常使用的规则是判断提交订单的IP地址和银行实际支付完成的IP地址是否一致，如果不一致，则判断为钓鱼网站风险交易，进入待确认订单。
但第二种情况，亲爹亲娘了，支付公司真的没办法。当然遇到客户投诉后可能会事后补救，但交易是无法阻止了。
2.盗卡组织利用盗卡进行交易
大家都知道，信用卡信息是不能随便公布给别人的，国内大多信用卡虽然都设置了密码，但银行仍然会开放无磁无密支付接口给到商户进行快速支付之用。
所谓无磁无密，就是不需要磁道信息，不需要密码就可以进行支付的通道。只需要获取到客户的CVV，有效期，卡号三个核心信息，而这三个信息是在卡上直接有的，所以大家不要随便把卡交给别人哦~
碰到类似的这种交易，风控系统就不会像钓鱼网站这样简单判断了。
过去我们所有的历史交易，都会存库，不仅会存支付相关信息，更会利用网页上的控件（对，恶心的activex或者目前用的比较多的flash控件）抓取支付者的硬件信息，存储在数据库中。
当一笔交易信息带着能够搜集到的硬件信息一同提交给风控系统时，风控系统会进行多种规则判定。
例如：当天该卡是否交易超过3次
当天该IP是否交易超过3次
该主机CPU的序列号是否在黑名单之列
等等等等，一批规则跑完后，风控系统会给该交易进行加权评分，标示其风险系数，然后根据评分给出处理结果。
通过硬件信息采集以及历史交易记录回溯，我们可以建立很多交易风控规则来进行监控。所以规则样式的好坏，规则系数的调整，就是非常重要的用以区别风控系统档次高低的标准。
例如，我听说著名的风控厂商RED，有一个“神经网络”机制，灰常牛逼。
其中有一个规则我到现在还记忆犹新：
某人早上八点在加利福尼亚进行了信用卡支付，到了下午一点，他在东亚某小国家发起了信用卡支付申请。系统判断两者距离过长，不是短短5小时内能够到达的，故判定交易无效，支付请求拒绝。
规则非常重要，当然，数据也一样重要。我们不仅需要从自己的历史记录中整合数据，同时还要联合卡组织、银行、风控机构，购买他们的数据和风控服务用来增加自己的风控实力。
SO，风控是一个不断积累数据、分析数据、运营数据、积累数据的循环过程。
好的风控规则和参数，需要经过无数次的规则修改和调整，是一个漫长的过程。
不知道大家做互联网，有没有利用GA做过AB测试，同样的，风控系统也需要反复地做类似AB测试的实验，以保证理论和实际的匹配。
最后给大家说一个小小的概念：
所谓风控，是指风险控制，不是风险杜绝。
风控的目标一定不是把所有风险全部杜绝。
合理的风控，目标一定是：利润最大化，而不是风险最小化
过于严格的风控规则，反而会伤害公司利益（看看销售和风控经常打架就知道了）
不光是交易的风控，我们日常制定规则，法规，公司流程，也一定要秉着这个出发点进行规划。
以上，基本上差不多了，有问题大家随时留言评论我。
谢谢大家原谅我的傲娇，给我点了那么多票赞同，受之有愧。
最近（2013年7月）回头看了一下这个答案，感觉有一些描述不够精确，有一些语言不够精炼，思考着是不是重构一下这个答案……<a href=""></a></p>
<p><a href="http://www.zhihu.com/question/20091391/answer/15591658" target="_blank">2013-07-02</a><a href="">57 条评论</a><a href="">感谢</a><a href="">分享</a><a href="">收藏</a>•<a href="">没有帮助</a>•<a href="">举报</a></p>
<p><a href=""></a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/yangxi" title="杨希"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/yangxi" title="杨希" target="_blank">杨希</a></p>
<p>顺哥傲娇了……
2012-11-14<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/yangxi" title="杨希" target="_blank">杨希</a></p>
<p>啊，哈哈哈
2012-11-14<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/huwei-98" title="HuWei"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/huwei-98" title="HuWei" target="_blank">HuWei</a></p>
<p>所以，没有答案，哪来赞同，奇怪~
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/renxue" title="renxue"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/renxue" title="renxue" target="_blank">renxue</a></p>
<p>我也觉得傲娇了 你写答案是为了得到赞同吗？
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/du-bai-xing" title="度百行"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/du-bai-xing" title="度百行" target="_blank">度百行</a></p>
<p>赞成一下，期待更多专业的回答~
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/renxue" title="renxue" target="_blank">renxue</a></p>
<p>不喜勿入，根据知乎规定，目前这个答案可点“没有帮助”。
如果一个需要写好久的答案实际上没什么人关注，那我觉得没必要花那么多精力分享。我写答案不是为了赞同，但也不希望浪费时间。如果只有一两个人关心，我完全可以通过IM工具随时回答他们问题。
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>2</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/zhanshibo" title="詹世波"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/zhanshibo" title="詹世波" target="_blank">詹世波</a></p>
<p>哈哈，我也希望看到更切题的答案和回复，但一直没有出现，然后我就个人知道和了解的抛砖引玉了一把，希望引出更多的意见和答案，结果来了60多票.....
兄台莫恼哈，其实很多人都想了解支付结算系统相关业务，你就给大家科普一把嘛。
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/zhanshibo" title="詹世波"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/zhanshibo" title="詹世波" target="_blank">詹世波</a></p>
<p>看了下<a href="http://www.zhihu.com/people/tian-shun" target="_blank">@天顺</a> 的资料，原来是盛付通的啊，哈哈，真正的专业人士啊，欢迎科普
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/zhanshibo" title="詹世波" target="_blank">詹世波</a></p>
<p>哈哈，我不恼，分享原本应该就是快乐的，不过我性格如此，说话总是比较刺，您才不要见怪。
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><img src="&quot;知乎用户&quot;" alt=""></p>
<p>知乎用户</p>
<p>自动保存系统只有在草稿状态的时候才有用。所以在改答案的时候，要么就定期保存，要么就先在本地写好了…………【惨痛教训……
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/ban-ma" title="斑马"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/ban-ma" title="斑马" target="_blank">斑马</a></p>
<p><a href="http://www.zhihu.com/people/liu-chu-qiao" target="_blank">@刘楚桥</a>
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 知乎用户</p>
<p>相当惨痛……
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/san-tian" title="三田"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/san-tian" title="三田" target="_blank">三田</a></p>
<p>想请教一下小明那个场景，如果小明用支付宝网银支付淘宝上的购物的话，我理解应该这样，
消费者：小明
收单机构：支付宝
商户：淘宝
发卡银行：网银银行
卡组织：银联
关于对账还真是门学问呢，看来要学的还真多。多谢。
2012-11-16<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/san-tian" title="三田" target="_blank">三田</a></p>
<p>这个过程就把卡组织剔除掉吧，便于沟通。实际上大多数支付公司网银也是直连银行，没有通过银联系统做资金清分。
2012-11-16<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/zhanshibo" title="詹世波"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/zhanshibo" title="詹世波" target="_blank">詹世波</a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" target="_blank">@天顺</a> 同学讲下Paypal或信用卡对账吧，我之前搞对账的时候最怕弄的就是这块，到现在都还有点搞不清楚
2012-11-16<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p><a href="http://www.zhihu.com/people/zhanshibo" target="_blank">@詹世波</a> 原本我的博客里把外卡相关的东西全给介绍了，无奈后来服务器没续费，报废了，又没保存……这些玩意写起来要命，关注的人又不多……所以我后来就越来越懒得写了，哈哈
2012-11-16<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/shi-wei-89-73" title="时伟"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/shi-wei-89-73" title="时伟" target="_blank">时伟</a></p>
<p>我怎么觉得，最后一句才是重点。。
2012-11-16<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/mi-su" title="米苏"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/mi-su" title="米苏" target="_blank">米苏</a></p>
<p>其实对账文件的收发，勾兑，差错处理基本上来说，已经可以实现系统自动化处理了。对于商户B2C平台、支付平台、自连银行之间由于扎差时间或系统时间不同产生的差异，才是对账处理最麻烦的地方
2012-11-16<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/iris-chen" title="Iris Chen"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/iris-chen" title="Iris Chen" target="_blank">Iris Chen</a></p>
<p>对账终于理顺了，等待风控的描述。
2012-11-17<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/he-jian-liang" title="何建亮"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/he-jian-liang" title="何建亮" target="_blank">何建亮</a></p>
<p>why 35?
2012-11-20<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/he-jian-liang" title="何建亮" target="_blank">何建亮</a></p>
<p>随便说个数字，哈哈~有点人数关注，写了才有意义呀
2012-11-21<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/lu-yao-21" title="璐瑶"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/lu-yao-21" title="璐瑶" target="_blank">璐瑶</a></p>
<p>“通常使用的规则是判断提交订单的IP地址和银行实际支付完成的IP地址是否一致，如果不一致，则判断为钓鱼网站风险交易，进入待确认订单。”
弱弱的问下，提交订单跟完成支付不都是用户行为么，为什么IP不一致会认定为钓鱼网站呢？
2012-11-28<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/lu-yao-21" title="璐瑶" target="_blank">璐瑶</a></p>
<p>完整支付行为的是用户，而发起订单的是钓鱼网站，两者IP不匹配。
2012-11-28<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/lu-yao-21" title="璐瑶"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/lu-yao-21" title="璐瑶" target="_blank">璐瑶</a>回复 <a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p>呵呵，了解了，非常感谢～
2012-11-30<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/jixin" title="黄继新"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/jixin" title="黄继新" target="_blank">黄继新</a></p>
<p>恭喜天顺逆袭成功！要相信知乎社区的力量〜
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/jixin" title="黄继新" target="_blank">黄继新</a></p>
<p>感谢继新赐予我力量！
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tujian" title="柏拉图"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tujian" title="柏拉图" target="_blank">柏拉图</a></p>
<p>辛苦了。码字哈多。<a href="http://www.zhihu.com/people/tian-shun" target="_blank">@天顺</a> 这个才是在支付公司应该学的东西。
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/tujian" title="柏拉图" target="_blank">柏拉图</a></p>
<p>这只是系统建设层面小小的经验，其实要做支付，还有很多很多……都不知从何说起。
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/jia-peng" title="贾鹏"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/jia-peng" title="贾鹏" target="_blank">贾鹏</a></p>
<p>天顺儿，这篇文章第一部分，有小明、银行、支付宝、淘宝的角色，在“银行”的角色里应该是“发卡行”而不是“收单行”吧，因为支付宝本身就处理收单工作了
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/jia-peng" title="贾鹏" target="_blank">贾鹏</a></p>
<p>线上网银渠道，发卡行就是收单行，不太会有银行作为收单行替其他行收单。外卡除外。
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/jia-peng" title="贾鹏"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/jia-peng" title="贾鹏" target="_blank">贾鹏</a>回复 <a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p>哈，在银联在线支付里，就有收单和发卡之分
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p>不太明白你所说的究竟为何……
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/etsir" title="徐梁君"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/etsir" title="徐梁君" target="_blank">徐梁君</a>回复 <a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p><a href="http://www.zhihu.com/people/jia-peng" target="_blank">@贾鹏</a> 第三方支付裏面，其實無所謂發卡、收單角色。如果一定要套用，的確銀行作爲發卡銀行來描述比較準確。<a href="http://www.zhihu.com/people/tian-shun" target="_blank">@天顺</a> 文中的描述有誤。
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/etsir" title="徐梁君" target="_blank">徐梁君</a></p>
<p>对第三方支付公司而言，所有收单银行渠道，即是他的收单行。
对收单行来说，第三方支付公司是收单商户。对第三方支付而言，收单银行即是收单行。
什么情况下需要区分发卡行和收单行？
也就是收单渠道不仅支持本行银行卡收单，同时支持他行卡收单时，会区分发卡行和收单行。
在互联网上，通常对第三方支付而言，无所谓区分发卡行和收单行，原因是事实上互联网支付基本都是本银行卡走本银行渠道，也就是线下POS所称的“本代本”。试问自己发的卡自己收单，又何必计较收单和发卡呢？
线下POS、外卡支付之所以要区分发卡行收单行，是因为其资金渠道特殊性所致。例如：通过银联清分网络，招行的POS机也可以刷工行的卡，然后通过银联进行数据清分，走跨行的资金清算轧张。
但互联网渠道，网银支付，99.99%的第三方支付渠道都是一家一家银行系统对接，对第三方支付的商户来说，第三方支付公司是收单机构；对持卡人来说，他所持信用卡的所在银行是发卡行；对第三方支付公司来说，前面是商户，后面是收单行，仅此而已。
当然，外卡的渠道和国内不同，将来可以单开一个专题去讨论。
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/baiya" title="白鸦"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/baiya" title="白鸦" target="_blank">白鸦</a></p>
<p>画图吧。这事儿文字太难说清楚了
2012-12-06<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/jia-peng" title="贾鹏"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/jia-peng" title="贾鹏" target="_blank">贾鹏</a>回复 <a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p>你说的对
2012-12-06<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/etsir" title="徐梁君"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/etsir" title="徐梁君" target="_blank">徐梁君</a>回复 <a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p>你说的都对，我之前的表述也是同一个意思，但是有一点：第三方模式下，银行对持卡人来说是发卡行，对第三方来说才是收单行。所以要看文中描述时的主语是谁
2012-12-06<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/etsir" title="徐梁君" target="_blank">徐梁君</a></p>
<p>在网银支付过程中，持卡人无所谓发卡行和收单行概念，他只需要知道商户需要收钱，钱付给了支付宝即可。收单银行只对第三方支付机构有意义，何况从头至尾，基本都是站在第三方支付的角度看待问题，我觉得兄台无需在这个称呼上继续纠结了。
2012-12-06<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/wu-jing-qi" title="吴婧婍"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/wu-jing-qi" title="吴婧婍" target="_blank">吴婧婍</a></p>
<p>对于后来者，这个答案确实和日常工作非常接近，学习了！
2012-12-07<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tedeyang" title="宝术"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tedeyang" title="宝术" target="_blank">宝术</a></p>
<p>「银行丢个文件」银行确实只会丢文件
2012-12-27<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><img src="&quot;知乎用户&quot;" alt=""></p>
<p>知乎用户</p>
<p>那家风控企业应该是ReD（Retail Decisions），但是我看到首先想到的是Red Bend，好容易混淆。
2013-04-19<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/chen-song-53" title="陈嵩"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/chen-song-53" title="陈嵩" target="_blank">陈嵩</a></p>
<p>所以，广义范围内“出纳”
2013-06-22<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/eddy07" title="Eddy"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/eddy07" title="Eddy" target="_blank">Eddy</a></p>
<p>咨询个问题：刚看到一些关于三方那个支付机构的法规,三方支付机构必须将资金托管在一个银行，而你在这里写到三方支付公司基本上在每个银行都会有一个账户。那么这个银行账户和托管银行的资金交接是怎么一个过程呢？
2013-06-23<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/lukenothing" title="luke luke"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/lukenothing" title="luke luke" target="_blank">luke luke</a></p>
<p>请问，“支付BBB”与“支付宝BBB”是不是一样的？
2013-06-24<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/lukenothing" title="luke luke" target="_blank">luke luke</a></p>
<p>恩，一样的。
2013-06-24<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>1</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/eddy07" title="Eddy" target="_blank">Eddy</a></p>
<p>私信回了。
2013-06-24<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/roy-xie" title="Roy.Xie"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/roy-xie" title="Roy.Xie" target="_blank">Roy.Xie</a>回复 <a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p>天顺 老兄厉害，长知识了。听君一席话，胜读10年书。
2013-06-27<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/yituo-xiao-xin" title="一坨小欣"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/yituo-xiao-xin" title="一坨小欣" target="_blank">一坨小欣</a></p>
<p>举手提问：顺哥写的好清晰，但是还有几个小问题请教：
1.既然支付公司会在各家银行都开账户，那客户支付的款项不是可以立刻到账么?为什么是T+1日？（我知道这是个小问题，跟主题没啥子关系，囧。。。）
2.是否有人通过支付系统进行洗钱？现在有把反洗钱纳入风控范畴么？
3.风控预警的效率高不高?会不会有很多误判？（银行从业人员表示，我们的预警量实在是忒多了= =!）
2013-07-08<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/yituo-xiao-xin" title="一坨小欣" target="_blank">一坨小欣</a></p>
<p>一个一个回答哈。
1.T+1日只是普遍情况，大多数银行的网银收单产品的确就是规定的T+1保证到款。当然据我所知已经有部分银行支持即时到账了，这个问题应该问银行，而不是支付公司。
2.有通过支付公司洗钱的，目前仍然有，甚至不少支付公司（不点名了）很多产品就是明着往灰色地带走的。当然，人民银行要求配合的反洗钱措施都会做的，商户审核也会相对走过场，不会太过分。
3.会有误判，这个避免不了，所以风控才是一门学问啊。
2013-07-08<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/chen-han-66" title="沈晗"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/chen-han-66" title="沈晗" target="_blank">沈晗</a></p>
<p>哥们你现在不搞技术，专心忽悠了吧，这么罗里吧嗦的解释最终细节部分却少的可怜。
2013-07-08<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/chen-han-66" title="沈晗" target="_blank">沈晗</a></p>
<p>哥们，不知道你现在是搞什么的，相信大家都会鼓励你来一篇细节部分多得令人发指的答案出来，我第一时间帮你点赞！
2013-07-08<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/min-you" title="闵游"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/min-you" title="闵游" target="_blank">闵游</a></p>
<p>作者好用心，还很谦逊，好人一个
2013-07-08<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/su-chi-chi" title="苏迟迟"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/su-chi-chi" title="苏迟迟" target="_blank">苏迟迟</a></p>
<p>请问支付宝公司账户上客户的资金，会用于购买短期的定期理财产品么？还是说，只是和银行谈一个比较高的利率，吃利息？
2013-07-08<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/su-chi-chi" title="苏迟迟" target="_blank">苏迟迟</a></p>
<p>八仙过海各显神通，呵呵。你说的方式其实都是可以的，主要看合作的商业银行内部如何帮你包装这个事情，单纯吃活期利息岂不亏死了……
2013-07-09<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/zhang-hong-wei-95" title="张宏伟"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/zhang-hong-wei-95" title="张宏伟" target="_blank">张宏伟</a></p>
<p>很有帮助
2013-07-09<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/hai-li-35" title="hai li"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/hai-li-35" title="hai li" target="_blank">hai li</a></p>
<p>不错
2013-07-09<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/ziming-shen" title="ziming shen"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/ziming-shen" title="ziming shen" target="_blank">ziming shen</a></p>
<h2 id="-">合理的风控，目标一定是：利润最大化，而不是风险最小化</h2>
<p>多希望公司那个213的风控能看到。
2013-07-09<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
写下你的评论…</p>
<p><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">评论</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">取消</a>
只有作者关注的人才能在这里评论
知乎是一个真实的问答社区，在这里分享知识、经验和见解，发现更大的世界。
<a href="">使用邮箱注册 »</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/架构师/">架构师</a></li></span></span> | <span class="tags">Tagged <a href="/tags/架构师/" class="label label-primary">架构师</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:29"datetime="2014-03-07 09:54:29"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-架构师--大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-架构师--大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/147/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/145/">145</a></li><li><a class="page-number" href="/page/146/">146</a></li><li><a class="page-number" href="/page/147/">147</a></li><li class="active"><li><span class="page-number current">148</span></li><li><a class="page-number" href="/page/149/">149</a></li><li><a class="page-number" href="/page/150/">150</a></li><li><a class="page-number" href="/page/151/">151</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/149/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 16:01:37</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
