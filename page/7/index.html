
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 7 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-wrapper--使用JavaServiceWrapper设置tomcat作为linux服务并且开机自动启动-/">使用Java Service Wrapper设置tomcat作为linux服务并且开机自动启动 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:45.000Z"> <a href="/2014/02/02/2014-02-02-wrapper--使用JavaServiceWrapper设置tomcat作为linux服务并且开机自动启动-/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-java-service-wrapper-tomcat-linux-tomcat-java-iteye-">使用Java Service Wrapper设置tomcat作为linux服务并且开机自动启动 - Tomcat - Java - ITeye论坛</h1>
<p><a href="http://www.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://www.iteye.com/login" target="_blank">登录</a> <a href="http://www.iteye.com/signup" target="_blank">注册</a></p>
<p><a href="http://www.iteye.com/" target="_blank"><img src="&quot;ITeye-最棒的软件开发交流社区&quot;" alt="ITeye-最棒的软件开发交流社区"></a></p>
<p>-</p>
<p><a href="http://www.iteye.com/forums" target="_blank">论坛首页</a> → <a href="http://www.iteye.com/forums/board/Java" target="_blank">Java企业应用论坛</a> →</p>
<h1 id="-java-service-wrapper-tomcat-linux-">使用Java Service Wrapper设置tomcat作为linux服务并且开机自动启动</h1>
<p><a href="http://www.iteye.com/forums/board/Java" target="_blank">全部</a> <a href="http://www.iteye.com/forums/tag/Hibernate" target="_blank">Hibernate</a> <a href="http://www.iteye.com/forums/tag/Spring" target="_blank">Spring</a> <a href="http://www.iteye.com/forums/tag/Struts" target="_blank">Struts</a> <a href="http://www.iteye.com/forums/tag/iBATIS" target="_blank">iBATIS</a> <a href="http://www.iteye.com/forums/tag/%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8" target="_blank">企业应用</a> <a href="http://www.iteye.com/forums/tag/Lucene" target="_blank">Lucene</a> <a href="http://www.iteye.com/forums/tag/SOA" target="_blank">SOA</a> <a href="http://www.iteye.com/forums/tag/Java%E7%BB%BC%E5%90%88" target="_blank">Java综合</a> <a href="http://www.iteye.com/forums/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank">设计模式</a> <a href="http://www.iteye.com/forums/tag/Tomcat" target="_blank">Tomcat</a> <a href="http://www.iteye.com/forums/tag/OO" target="_blank">OO</a> <a href="http://www.iteye.com/forums/tag/JBoss" target="_blank">JBoss</a>
<a href="http://www.iteye.com/clicks/593" target="_blank">最成熟稳定甘特图控件,支持Java和.Net</a></p>
<p>浏览 5354 次 锁定老帖子 <a href="">主题：使用Java Service Wrapper设置tomcat作为linux服务并且开机自动启动</a></p>
<p>精华帖 (0) :: 良好帖 (0) :: 新手帖 (0) :: 隐藏帖 (0) 作者 正文 * wenson</p>
<ul>
<li>等级: 初级会员</li>
<li><a href="http://wenson.iteye.com/" target="_blank"><img src="&quot;wenson的博客: 山下的人&quot;" alt="wenson的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 111</li>
<li>积分: 80</li>
<li>来自: 广州</li>
<li><img src="" alt="">
  发表时间：2008-01-11   最后修改：2009-02-02</li>
</ul>
<p><a href="http://www.iteye.com/topic/155159#" target="_blank">&lt;</a> <a href="http://www.iteye.com/topic/155159#" target="_blank">&gt;</a>  猎头职位: <a href="http://www.iteye.com/jobs/1847" target="_blank">北京:  ITeye网站诚聘产品交互设计</a></p>
<p>相关文章: <a href="http://www.iteye.com/topic/155159#" title="关闭" target="_blank"> </a></p>
<ul>
<li><a href="http://www.iteye.com/topic/36657" title="把java程序做成windows服务（转）" target="_blank">把java程序做成windows服务（转）</a></li>
<li><a href="http://www.iteye.com/topic/557980" title="tomcat源码—redirect和forward的实现" target="_blank">tomcat源码—redirect和forward的实现</a></li>
<li><a href="http://www.iteye.com/topic/614683" title="tomcat集群时统计session与在线人数" target="_blank">tomcat集群时统计session与在线人数</a>
推荐群组: <a href="http://ubuntu.group.iteye.com/" target="_blank">Ubuntu For Fun</a>
<a href="http://www.iteye.com/wiki/topic/155159" target="_blank">更多相关推荐</a>
<a href="http://www.iteye.com/forums/tag/Tomcat" target="_blank">Tomcat</a></li>
</ul>
<p>前几天总结了使用JSVC来设置tomcat作为linux服务并且开机自动启动，但是如果要更专业一点来控制tomcat的启动，使用Java Service Wrapper应该不失为一个好的选择，下面来总结一下Java Service Wrapper在Linux中对于tomcat启动的设置：
<strong>1、</strong> 安装JDK、Tomcat,此处略过。比如tomcat安装在/opt/tomcat目录中。
<strong>2</strong> 、使用命令wget 下载Java Service Wrapper(目前版本wrapper-linux-x86-32-3.2.3，官网：<a href="http://wrapper.tanukisoftware.org" target="_blank">http://wrapper.tanukisoftware.org</a>), 用命令tar -zxvf wrapper-linux-x86-32-3.2.3.tar.gz 解压，得到目录wrapper-linux-x86-32-3.2.3，使用ln -s wrapper-linux-x86-32-3.2.3 wrapper 给目录wrapper-linux-x86-32-3.2.3 建一个名称为wrapper的快捷方式。
<strong>3</strong> 、复制wrapper\src\bin\sh.script.in到/opt/tomcat/bin目录，重命名为tomcat
复制wrapper\src\conf\wrapper.conf.in到/opt/tomcat/conf目录，重命名为wrapper.conf
复制wrapper\lib目录下的所有3个文件到/opt/tomcat/lib目录
复制wrapper\bin目录下的wrapper文件到/opt/tomcat/bin目录
<strong>4</strong> 、修改/opt/testapp/bin/tomcat文件
APP_NAME=&quot;tomcat&quot;
APP_LONG_NAME=&quot;Tomcat Application Server&quot;
WRAPPER_CMD=&quot;./wrapper&quot;
WRAPPER_CONF=&quot;../conf/wrapper.conf&quot;
赋予执行权限
chmod 775 /opt/tomcat/bin/tomcat
chmod 775 /opt/tomcat/bin/tomcat
<strong>5</strong> 、修改/opt/tomcat/conf/wrapper.conf文件，如：
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Wrapper Properties
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Java Application
/# 设置环境变量
set.JAVA_HOME=/usr/java/jdk1.6.0_01
set.CATALINA_HOME=/opt/tomcat
set.CATALINA_BASE=/opt/tomcat
wrapper.java.command=/usr/java/jdk1.6.0_01/bin/java
/# Java Main class. This class must implement the WrapperListener interface
/# or guarantee that the WrapperManager class is initialized. Helper
/# classes are provided to do this for you. See the Integration section
/# of the documentation for details.
/# 使用WrapperStartStopApp，这样可以通过命令带start/stop来启动/停止程序。
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperStartStopApp
/# Java Classpath (include wrapper.jar) Add class path elements as
/# needed starting from 1
/# 设置执行tomcat的classpath文件
wrapper.java.classpath.1=%CATALINA_HOME%/lib/wrapper.jar
wrapper.java.classpath.2=%CATALINA_BASE%/bin/bootstrap.jar
/# Java Library Path (location of Wrapper.DLL or libwrapper.so)
/# 设置tomcat的lib路径
wrapper.java.library.path.1=%CATALINA_HOME%/lib/
/# Java Additional Parameters
/# 设置额外参数
wrapper.java.additional.1=-Djava.endorsed.dirs=%CATALINA_HOME%/common/endorsed
wrapper.java.additional.2=-Dcatalina.base=%CATALINA_BASE%
wrapper.java.additional.3=-Dcatalina.home=%CATALINA_HOME%
wrapper.java.additional.4=-Djava.io.tmpdir=%CATALINA_BASE%/temp
/# Initial Java Heap Size (in MB)
/# 设置tomcat的JVM初始化堆的大小
wrapper.java.initmemory=128
/# Maximum Java Heap Size (in MB)
/# 设置tomcat的JVM堆的最大值
wrapper.java.maxmemory=512
/# Application parameters. Add parameters as needed starting from 1
/# 设置启动、停止和重启参数
wrapper.app.parameter.1=org.apache.catalina.startup.Bootstrap
wrapper.app.parameter.2=1
wrapper.app.parameter.3=start
wrapper.app.parameter.4=org.apache.catalina.startup.Bootstrap
wrapper.app.parameter.5=true
wrapper.app.parameter.6=1
wrapper.app.parameter.7=stop
wrapper.filter.trigger.1=java.lang.OutOfMemoryError
wrapper.filter.action.1=RESTART
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Wrapper Logging Properties
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Format of output for the console. (See docs for formats)
wrapper.console.format=PM
/# Log Level for console output. (See docs for log levels)
wrapper.console.loglevel=INFO
/# Log file to use for wrapper output logging.
/# 设置log文件路径
wrapper.logfile=%CATALINA_BASE%/logs/wrapper.log
/# Format of output for the log file. (See docs for formats)
wrapper.logfile.format=LPTM
/# Log Level for log file output. (See docs for log levels)
wrapper.logfile.loglevel=INFO
/# Maximum size that the log file will be allowed to grow to before
/# the log is rolled. Size is specified in bytes. The default value
/# of 0, disables log rolling. May abbreviate with the &#39;k&#39; (kb) or
/# &#39;m&#39; (mb) suffix. For example: 10m = 10 megabytes.
/# 设置log文件最大值
wrapper.logfile.maxsize=5
/# Maximum number of rolled log files which will be allowed before old
/# files are deleted. The default value of 0 implies no limit.
/#设置log文件最多个数
wrapper.logfile.maxfiles=10
/# Log Level for sys/event log output. (See docs for log levels)
wrapper.syslog.loglevel=NONE
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Wrapper Windows Properties
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Title to use when running as a console
/# windows下tomcat控制台名称
wrapper.console.title=Tomcat6 Application Server
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Wrapper Windows NT/2000/XP Service Properties
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# WARNING - Do not modify any of these properties when an application
/# using this configuration file has been installed as a service.
/# Please uninstall the service before modifying this section. The
/# service can then be reinstalled.
/# Name of the service
/# 设置服务名称
wrapper.ntservice.name=tomcat6
/# Display name of the service
wrapper.ntservice.displayname=@app.long.name@
/# Description of the service
wrapper.ntservice.description=@app.description@
/# Service dependencies. Add dependencies as needed starting from 1
wrapper.ntservice.dependency.1=
/# Mode in which the service is installed. AUTO_START or DEMAND_START
/# 设置允许Tomcat服务自动启动
wrapper.ntservice.starttype=AUTO_START
/# Allow the service to interact with the desktop.
wrapper.ntservice.interactive=false
<strong>6</strong> 、设置tomcat开机自动运行：
ln -s /opt/tomcat/bin/tomcat /etc/init.d/tomcat
<strong>7</strong> 、测试,执行命令：service tomcat start|stop|restart|status
至此，使用Java Service Wrapper来设置Tomcat作为Linux的服务完成，从此过程看来，Java Service Wrapper对tomcat的控制程度比tomcat自带的JSVC深入多了。
目录结构：
/opt/tomcat/bin
                 | tomcat
                 | wrapper
/opt/tomcat/logs
                 | wrapper.log（程序运行时自动产生）
/opt/tomcat/conf
                 | wrapper.conf
/opt/tomcat/lib
                 | libwrapper.so
                 | wrapper.jar
                 | test.jar</p>
<p>声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。</p>
<p>推荐链接</p>
<ul>
<li><a href="http://www.iteye.com/clicks/508" target="_blank">.Net程序员不用羡慕Android程序员，微软移动战役打响</a></li>
<li><a href="http://www.iteye.com/clicks/716" target="_blank">想进外企，出国，跳槽，找工作？英语不好,快来充电吧</a></li>
<li><a href="http://www.iteye.com/clicks/527" target="_blank">100万现金奖培训出来的程序员</a></li>
<li><a href="http://www.iteye.com/clicks/609" target="_blank">-</a> <a href="http://www.iteye.com/topic/155159#" target="_blank">返回顶楼</a> <a href="http://wenson.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://wenson.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=wenson" title="发送站内短信" target="_blank"> </a> <a href="http://wenson.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=wenson" title="关注作者" target="_blank"> </a>  * nwangwei</li>
<li>等级: <img src="&quot;一星会员&quot;" alt="一星会员"></li>
<li><a href="http://nwangwei.iteye.com/" target="_blank"><img src="&quot;nwangwei的博客: nwangwei&quot;" alt="nwangwei的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 41</li>
<li>积分: 130</li>
<li><img src="" alt="">
  发表时间：2008-03-13  </li>
</ul>
<p>棒！
tomcat的shutdown命令老是关不掉全部的java进程 <a href="http://www.iteye.com/topic/155159#" target="_blank">返回顶楼</a> <a href="http://nwangwei.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://nwangwei.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=nwangwei" title="发送站内短信" target="_blank"> </a> <a href="http://nwangwei.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=nwangwei" title="关注作者" target="_blank"> </a> <a href="http://www.iteye.com/topic/155159#485194" title="nwangwei回帖:使用Java Service Wrapper设置tomcat作为linux服务并且开机自动启动" target="_blank">回帖地址</a></p>
<p><a href="http://www.iteye.com/topic/155159#" title="好" target="_blank">0</a> <a href="http://www.iteye.com/topic/155159#" title="差" target="_blank">0</a> 请登录后投票</p>
<p><a href="http://www.iteye.com/forums" target="_blank">论坛首页</a> → <a href="http://www.iteye.com/forums/board/Java" target="_blank">Java企业应用版</a>
跳转论坛:移动开发技术 Web前端技术 Java企业应用 编程语言技术 综合技术 入门技术 招聘求职 海阔天空</p>
<ul>
<li><a href="http://www.iteye.com/jobs/1555" title="北京:美团诚聘资深研发工程师（Java）" target="_blank">北京: 美团诚聘资深研发工程师（Java）</a></li>
<li><a href="http://www.iteye.com/jobs/1554" title="北京:美团诚聘研发工程师（Java）" target="_blank">北京: 美团诚聘研发工程师（Java）</a></li>
<li><a href="http://www.iteye.com/jobs/712" title="北京:ITeye官方招聘和猎头诚聘ITeye网站诚聘Java高级搜索工程师" target="_blank">北京: ITeye官方招聘和猎头诚聘ITeye网站诚聘Java</a></li>
<li><a href="http://www.iteye.com/jobs/2068" title="吉林:用友汽车软件诚聘Java程序员" target="_blank">吉林: 用友汽车软件诚聘Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/1628" title="浙江:阿里巴巴诚聘高级Java工程师" target="_blank">浙江: 阿里巴巴诚聘高级Java工程师</a></li>
<li><a href="http://www.iteye.com/jobs/2078" title="上海:用友汽车软件诚聘项目经理" target="_blank">上海: 用友汽车软件诚聘项目经理</a></li>
<li><a href="http://www.iteye.com/jobs/1144" title="陕西:ThoughtWorks诚聘西安Senior Java Application Developer" target="_blank">陕西: ThoughtWorks诚聘西安Senior Java Applicatio</a></li>
<li><a href="http://www.iteye.com/jobs/2067" title="重庆:用友汽车软件诚聘Java程序员" target="_blank">重庆: 用友汽车软件诚聘Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/750" title="北京:杰嘉迪诚聘高级Java程序员" target="_blank">北京: 杰嘉迪诚聘高级Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/2111" title="北京:中油瑞飞/richfit诚聘JAVA开发工程师" target="_blank">北京: 中油瑞飞/richfit诚聘JAVA开发工程师</a></li>
<li><a href="http://www.iteye.com/jobs/1891" title="北京:北大软件诚聘Java软件开发工程师（技术研发部110809）" target="_blank">北京: 北大软件诚聘Java软件开发工程师（技术研发部</a></li>
<li><a href="http://www.iteye.com/jobs/755" title="北京:杰嘉迪诚聘Java程序员" target="_blank">北京: 杰嘉迪诚聘Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/1231" title="北京:胡莱游戏诚聘年薪8-16万高级Java程序员" target="_blank">北京: 胡莱游戏诚聘年薪8-16万高级Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/1541" title="上海:大众点评诚聘Java高级开发工程师（上海）" target="_blank">上海: 大众点评诚聘Java高级开发工程师（上海）</a></li>
<li><a href="http://www.iteye.com/jobs/2066" title="湖北:用友汽车软件诚聘Java程序员" target="_blank">湖北: 用友汽车软件诚聘Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/1849" title="浙江:阿里巴巴诚聘C++开发工程师(搜索引擎和广告引擎方向，偏底层)" target="_blank">浙江: 阿里巴巴诚聘C++开发工程师(搜索引擎和广告</a></li>
<li><a href="http://www.iteye.com/jobs/2065" title="安徽:用友汽车软件诚聘Java程序员" target="_blank">安徽: 用友汽车软件诚聘Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/2080" title="上海:用友汽车软件诚聘软件研发工程师（实习岗位）" target="_blank">上海: 用友汽车软件诚聘软件研发工程师（实习岗位）</a></li>
<li><p><a href="http://www.iteye.com/jobs/2064" title="上海:用友汽车软件诚聘高级Java程序员" target="_blank">上海: 用友汽车软件诚聘高级Java程序员</a></p>
</li>
<li><p><a href="http://www.iteye.com/" target="_blank">首页</a></p>
</li>
<li><a href="http://www.iteye.com/news" target="_blank">资讯</a></li>
<li><a href="http://www.iteye.com/magazines" target="_blank">精华</a></li>
<li><a href="http://www.iteye.com/forums" target="_blank">论坛</a></li>
<li><a href="http://www.iteye.com/ask" target="_blank">问答</a></li>
<li><a href="http://www.iteye.com/blogs" target="_blank">博客</a></li>
<li><a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a></li>
<li><a href="http://www.iteye.com/groups" target="_blank">群组</a></li>
<li><a href="http://www.iteye.com/job" target="_blank">招聘</a></li>
<li><a href="http://www.iteye.com/search" target="_blank">搜索</a></li>
<li><a href="http://www.ciecloud.org/2012/index.html" target="_blank">云计算大会</a></li>
<li><a href="http://www.iteye.com/index/service" target="_blank">广告服务</a></li>
<li><a href="http://webmaster.iteye.com/" target="_blank">ITeye黑板报</a></li>
<li><a href="http://www.iteye.com/index/contactus" target="_blank">联系我们</a></li>
<li><a href="http://www.iteye.com/index/friend_links" target="_blank">友情链接</a></li>
</ul>
<p>© 2003-2011 ITeye.com. [ <a href="http://www.miibeian.gov.cn/" target="_blank">京ICP证110151号</a> 京公网安备110105010620 ]
百联优力(北京)投资有限公司 版权所有
上海炯耐计算机软件有限公司 提供商务支持 <img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/wrapper/">wrapper</a></li></span></span> | <span class="tags">Tagged <a href="/tags/wrapper/" class="label label-primary">wrapper</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:45"datetime="2014-03-07 09:54:45"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-wrapper--使用JavaServiceWrapper设置tomcat作为linux服务并且开机自动启动-/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-wrapper--使用JavaServiceWrapper设置tomcat作为linux服务并且开机自动启动-" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-wrapper--使用JavaServiceWrapper把Java程序作为Windows系统服务--IT/">使用Java Service Wrapper 把Java程序作为Windows系统服务 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:45.000Z"> <a href="/2014/02/02/2014-02-02-wrapper--使用JavaServiceWrapper把Java程序作为Windows系统服务--IT/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-java-service-wrapper-java-windows-iteye-">使用Java Service Wrapper 把Java程序作为Windows系统服务 - - ITeye技术网站</h1>
<p><a href="http://www.iteye.com/" target="_blank">首页</a> <a href="http://www.iteye.com/news" target="_blank">资讯</a> <a href="http://www.iteye.com/magazines" target="_blank">精华</a> <a href="http://www.iteye.com/forums" target="_blank">论坛</a> <a href="http://www.iteye.com/ask" target="_blank">问答</a> <a href="http://www.iteye.com/blogs" target="_blank">博客</a> <a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a> <a href="http://www.iteye.com/groups" target="_blank">群组</a> <a href="http://lbyzx123.iteye.com/blog/248210#" target="_blank">更多 ▼</a></p>
<p><a href="http://www.iteye.com/job" target="_blank">招聘</a> <a href="http://www.iteye.com/search" target="_blank">搜索</a></p>
<p><a href="http://lbyzx123.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://lbyzx123.iteye.com/login" target="_blank">登录</a> <a href="http://lbyzx123.iteye.com/signup" target="_blank">注册</a></p>
<h1 id="-lbyzx123-http-lbyzx123-iteye-com-"><a href="http://lbyzx123.iteye.com/" target="_blank">lbyzx123</a></h1>
<ul>
<li><a href="http://lbyzx123.iteye.com/" target="_blank"><strong>博客</strong></a></li>
<li><a href="http://lbyzx123.iteye.com/weibo" target="_blank">微博</a></li>
<li><a href="http://lbyzx123.iteye.com/album" target="_blank">相册</a></li>
<li><a href="http://lbyzx123.iteye.com/link" target="_blank">收藏</a></li>
<li><a href="http://lbyzx123.iteye.com/blog/guest_book" target="_blank">留言</a></li>
<li><a href="http://lbyzx123.iteye.com/blog/profile" target="_blank">关于我</a></li>
</ul>
<h3 id="-java-service-wrapper-java-windows-"><a href="">使用Java Service Wrapper 把Java程序作为Windows系统服务</a> **</h3>
<p><a href="http://www.iteye.com/blogs/tag/Java" target="_blank">Java</a><a href="http://www.iteye.com/blogs/tag/Windows" target="_blank">Windows</a><a href="http://www.iteye.com/blogs/tag/Tomcat" target="_blank">Tomcat</a><a href="http://www.iteye.com/blogs/tag/%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86" target="_blank">配置管理</a><a href="http://www.iteye.com/blogs/tag/C%23" target="_blank">C/#</a></p>
<p>Java程序很多情况下是作为服务程序运行的，在Un/<em>x平台下可以利用在命令后加“&amp;”把程序作为后台服务运行，但在Windows下看作那个Console窗口在桌面上，你是否一直担心别的同时把你的Console窗口关闭？是否怀念用VC写的Win32服务程序？
翻开JBOSS、Tomcat的发布包，发现他们都使用了一个Open source——Java Service Wrapper。用Java Service Wrapper可以轻松解决我们的需求，让我们的服务程序成为 Win32系统服务。
当然，在Un/</em>x下也可以使用Java Service Wrapper，可以避免加“&amp;”的粗暴方式，导致每天收到一堆mail，通过Java Service Wrapper提供的日志方式查看运行信息。
Java Service Wrapper功能很强大，同时支持Windows及Un/*x平台，提供三种方式把你的Java程序包装成系统服务，这里只介绍最简单的一种方式，因这种方式无需对已有的服务程序作任何改变，仅仅增加几个script、配置文件就可以把你的Java服务程序改造成系统服务程序了。
当然在使用之前需要到<a href="http://sourceforge.net/project/showfiles.php?group_id=39428下载Java" target="_blank">http://sourceforge.net/project/showfiles.php?group_id=39428下载Java</a> Service Wrapper的发布包。
下面简单介绍一下具体的使用步骤：</p>
<ol>
<li>将下载的Java Service Wrapper包解压到本地，目录为{WRAPPER_HOME}；</li>
<li>服务应用程序名为MyServApp，在目录d:\MyServApp下建立bin、conf、logs、lib目录；并把你的已有应用程序如NioBlockingServer.class拷贝到该目录下；</li>
<li>将{WRAPPER_HOME}\src\bin\下的遗以下文件拷贝到MyServApp目录下，并重命名。
{WRAPPER_HOME}\bin\Wrapper.exe  C:\ MyServApp \bin\Wrapper.exe
{WRAPPER_HOME}\src\bin\App.bat.in  C:\ MyServApp\bin\MyApp.bat
{WRAPPER_HOME}\src\bin\InstallApp-NT.bat.in  C:\ MyServApp\bin\InstallMyApp-NT.bat
{WRAPPER_HOME}\src\bin\UninstallApp-NT.bat.in  C:\ MyServApp\bin\UninstallMyApp-NT.bat</li>
<li>将{WRAPPER_HOME}\lib下的以下文件拷贝到C:\ MyServApp \lib目录下
{WRAPPER_HOME}\lib\Wrapper.DLL
{WRAPPER_HOME}\lib\wrapper.jar</li>
<li>将{WRAPPER_HOME}\src\conf\wrapper.conf.in拷贝到C:\ MyServApp \conf目录下并命名为wrapper.conf；并修改wrapper.conf文件，在其中配置您的应用服务。
主要修改以下几项即可：
/#你的JVM位置：
wrapper.java.command=D:\Sun\j2sdk1.4.0_03\bin\java
/#运行参数：如：
wrapper.java.additional.1=-Dprogram.name=run.bat
/#classpath：
wrapper.java.classpath.1=../lib/wrapper.jar
wrapper.java.classpath.2=../bin/.
/# Java Library Path (location of Wrapper.DLL or libwrapper.so)
wrapper.java.library.path.1=../lib
/#MAIN CLASS 此处决定了使用Java Service Wrapper的方式
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp
/#你的Java应用类
wrapper.app.parameter.1= NonBlockingServer
/# 服务名
wrapper.ntservice.name=NB
/# Display name of the service
wrapper.ntservice.displayname=Nio Nonblocking Server
/# 服务描述
wrapper.ntservice.description=Nio Nonblocking Server
其他的配置根据你的需要改变即可</li>
<li>对以上配置的MyApp.bat进行测试，运行MyApp.bat，就像在Console窗口下运行Tomcat一样；</li>
<li>对以上配置的服务进行测试，运行C:\ MyServApp\bin\InstallMyApp-NT.bat将把你的应用（此处为NioBlockingServer）安装到Win32系统服务中了。</li>
<li>打开控制面板－管理程序－服务，看到Nio Nonblocking Server已经在系统服务中了，其他用法就与我们熟悉的Windows服务一样了。
Tomcat使用的是Java Service Wrapper模式二，这种方式需要对已有的程序进行小的改动，但可以通过Socket端口的方式控制服务程序核心的启动，更加灵活。Java Service Wrapper提供的模式三比较复杂，需要作出更多的编码，我没有研究。
采用模式一，即可简单有效的把我们的服务程序包装成为系统服务程序，并增强了日志功能，我们可以把MyServApp的几个文件做成模板，每次修改文件名，配置文件就可以了，有精力的朋友更可以做成Eclipse的plugin，鼠标点点就把应用配成服务了。
附件是一个模板，可以直接修改文件名和配置文件就可以把服务改造了。
希望本文能对大家有所帮助，当然也申请加分了，我的2分实在不够混的了。 <h1 id="-files-cai9911-ntservicewrappertemplate-rar-http-files-cnblogs-com-cai9911-ntservicewrappertemplate-rar-"><a href="http://files.cnblogs.com/cai9911/NTServiceWrapperTemplate.rar" target="_blank">/Files/cai9911/NTServiceWrapperTemplate.rar</a></h1>
自己做的一个例子,可以直接拿来修改:
(写下来备忘)
主要修改config/wrapper.conf 一个地方:
wrapper.app.parameter.1= HelloWorld  &lt;要启动的类&gt;
其他的可以修改应用程序的服务名称等.
<a href="http://files.cnblogs.com/cai9911/JavaService.rar" target="_blank">/Files/cai9911/JavaService.rar</a>
分享到： <a href="&quot;分享到新浪微博&quot;"><img src="" alt=""></a> <a href="&quot;分享到腾讯微博&quot;"><img src="" alt=""></a></li>
</ol>
<p><a href="http://lbyzx123.iteye.com/blog/258505" title="javascript中如何给二维数组赋值？" target="_blank">javascript中如何给二维数组赋值？</a> | <a href="http://lbyzx123.iteye.com/blog/248209" title="an error has occurred.See error log for more deta." target="_blank">an error has occurred.See error log for ...</a></p>
<ul>
<li>2008-09-30 13:40:07</li>
<li>浏览 4068</li>
<li><a href="http://lbyzx123.iteye.com/blog/248210#comments" target="_blank">评论(0)</a></li>
<li><a href="http://www.iteye.com/wiki/blog/248210" target="_blank">相关推荐</a></li>
</ul>
<h3 id="-">评论</h3>
<p><a href=""></a></p>
<h3 id="-">发表评论</h3>
<p><a href="http://lbyzx123.iteye.com/login" target="_blank"><img src="" alt=""></a><a href="http://lbyzx123.iteye.com/login" target="_blank">您还没有登录,请您登录后再发表评论</a></p>
<p><a href="http://lbyzx123.iteye.com/" target="_blank"><img src="&quot;lbyzx123的博客: &quot;" alt="lbyzx123的博客"></a></p>
<p>lbyzx123</p>
<ul>
<li>浏览: 51258 次</li>
<li>性别: <img src="&quot;男&quot;" alt="Icon_minigender_1"></li>
<li>来自: 杭州</li>
<li><img src="" alt=""><h3 id="-http-lbyzx123-iteye-com-blog-user_visits-">最近访客 <a href="http://lbyzx123.iteye.com/blog/user_visits" target="_blank">更多访客&gt;&gt;</a></h3>
</li>
</ul>
<p><a href="http://zhaoyijun.iteye.com/" target="_blank"><img src="&quot;zhaoyijun的博客: &quot;" alt="zhaoyijun的博客"></a></p>
<p><a href="http://zhaoyijun.iteye.com/" target="_blank">zhaoyijun</a></p>
<p><a href="http://yang8580330.iteye.com/" target="_blank"><img src="&quot;yang8580330的博客: &quot;" alt="yang8580330的博客"></a></p>
<p><a href="http://yang8580330.iteye.com/" target="_blank">yang8580330</a>
<a href="http://bgvhuy38.iteye.com/" target="_blank"><img src="&quot;bgvhuy38的博客: &quot;" alt="bgvhuy38的博客"></a></p>
<p><a href="http://bgvhuy38.iteye.com/" target="_blank">bgvhuy38</a></p>
<p><a href="http://taibin.iteye.com/" target="_blank"><img src="&quot;taibin的博客: &quot;" alt="taibin的博客"></a></p>
<p><a href="http://taibin.iteye.com/" target="_blank">taibin</a></p>
<h3 id="-">文章分类</h3>
<ul>
<li><a href="http://lbyzx123.iteye.com/" target="_blank">全部博客 (93)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42284" target="_blank">AJAX (0)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42285" target="_blank">J2EE (11)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42283" target="_blank">数据库 (14)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42286" target="_blank">JAVASCRIPT (16)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42287" target="_blank">哲理 (6)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42315" target="_blank">开发工具问题 (12)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42316" target="_blank">设计模式 (0)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/44335" target="_blank">ExtJS (10)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/122708" target="_blank">java (9)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/137565" target="_blank">测试 (2)</a></li>
<li><p><a href="http://lbyzx123.iteye.com/category/191171" target="_blank">c++ (1)</a></p>
<h3 id="-">社区版块</h3>
</li>
<li><p><a href="http://lbyzx123.iteye.com/blog/news" target="_blank">我的资讯</a> (0)</p>
</li>
<li><a href="http://lbyzx123.iteye.com/blog/post" target="_blank">我的论坛</a> (1)</li>
<li><a href="http://lbyzx123.iteye.com/blog/solution" target="_blank">我解决的问题</a> (0)</li>
</ul>
<h3 id="-">存档分类</h3>
<ul>
<li><a href="http://lbyzx123.iteye.com/blog/monthblog/2012-01" target="_blank">2012-01</a> (1)</li>
<li><a href="http://lbyzx123.iteye.com/blog/monthblog/2011-12" target="_blank">2011-12</a> (4)</li>
<li><a href="http://lbyzx123.iteye.com/blog/monthblog/2011-11" target="_blank">2011-11</a> (3)</li>
<li><p><a href="http://lbyzx123.iteye.com/blog/monthblog_more" target="_blank">更多存档...</a></p>
<h3 id="-">评论排行榜</h3>
</li>
<li><p><a href="http://lbyzx123.iteye.com/blog/1139428" title="extjs4 异步树的写法" target="_blank">extjs4 异步树的写法</a></p>
</li>
<li><a href="http://lbyzx123.iteye.com/blog/1073789" title="请问一下mysql是不是限制了单个表的容量，能改吗" target="_blank">请问一下mysql是不是限制了单个表的容量， ...</a></li>
<li><a href="http://lbyzx123.iteye.com/blog/1172418" title="三个故事说穿许多人" target="_blank">三个故事说穿许多人</a></li>
</ul>
<h3 id="-">最新评论</h3>
<ul>
<li><a href="http://paradigm.iteye.com/" target="_blank">paradigm</a>： 谢谢
<a href="http://lbyzx123.iteye.com/blog/764985#bc2227490" target="_blank">WebSphere7.0数据源配置与应用程序发布之创建数据源</a></li>
<li><a href="http://gooderlee.iteye.com/" target="_blank">maozilee</a>： windows下面就用NTFS，没事儿！
<a href="http://lbyzx123.iteye.com/blog/1073789#bc2218928" target="_blank">请问一下mysql是不是限制了单个表的容量，能改吗</a></li>
<li><a href="http://lljjssljseye.iteye.com/" target="_blank">lljjssljseye</a>： ...
<a href="http://lbyzx123.iteye.com/blog/1172418#bc2216979" target="_blank">三个故事说穿许多人</a></li>
<li><a href="http://lbyzx123.iteye.com/" target="_blank">lbyzx123</a>： hable 写道看不明白啊,能不能加点注释 很简单呀，既然是异 ...
<a href="http://lbyzx123.iteye.com/blog/1139428#bc2213672" target="_blank">extjs4 异步树的写法</a></li>
<li><a href="http://hable.iteye.com/" target="_blank">hable</a>： 看不明白啊,能不能加点注释
<a href="http://lbyzx123.iteye.com/blog/1139428#bc2213623" target="_blank">extjs4 异步树的写法</a>
声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。
© 2003-2011 ITeye.com. All rights reserved. [ 京ICP证110151号 京公网安备110105010620 ]
<img src="" alt=""></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/wrapper/">wrapper</a></li></span></span> | <span class="tags">Tagged <a href="/tags/wrapper/" class="label label-primary">wrapper</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:45"datetime="2014-03-07 09:54:45"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-wrapper--使用JavaServiceWrapper把Java程序作为Windows系统服务--IT/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-wrapper--使用JavaServiceWrapper把Java程序作为Windows系统服务--IT" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-wrapper--JavaServiceWrapper-LoggingConfigurationPrope/">Java Service Wrapper </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:45.000Z"> <a href="/2014/02/02/2014-02-02-wrapper--JavaServiceWrapper-LoggingConfigurationPrope/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="java-service-wrapper-logging-configuration-properties">Java Service Wrapper - Logging Configuration Properties</h1>
<p><img src="" alt="World Map">EnglishJapanese (Nihongo)German (Deutsch)</p>
<p><strong>Please  or</strong></p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/" target="_blank"><img src="" alt="Java Service Wrapper Logo"></a></li>
<li><a href="http://www.tanukisoftware.com/" target="_blank"><img src="" alt="Tanuki Software Ltd Logo"></a></li>
</ul>
<p>Java Service Wrapper is the easiest way to make your product more reliable.</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/requestTrial.jsp" target="_blank"><img src="" alt="Free Trial"></a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/accountLicenses.jsp" target="_blank"><img src="" alt="Buy Now"></a></li>
<li><a href="http://www.tanukisoftware.com/" target="_blank">Tanuki Software</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/" target="_blank">Java Service Wrapper</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/download.jsp" target="_blank">Home</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/product-overview.html" target="_blank">Product</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/product-overview.html" target="_blank">Overview</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/product-features.html" target="_blank">Features</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/licenseOverview.html" target="_blank">License</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/faq.html" target="_blank">FAQ</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/download.jsp" target="_blank">Download</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/download.jsp#stable" target="_blank">Stable Release</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/release-notes.html" target="_blank">Release Notes</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/versions.jsp" target="_blank">Past Releases</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/accountLicenses.jsp#purchase" target="_blank">Order</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/accountLicenses.jsp#purchase" target="_blank">Buy now</a></p>
</li>
<li><a href="http://www.tanukisoftware.com/en/distributors.php" target="_blank">Distributors</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/licenseOverview.html" target="_blank">License Overview</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/licenseOverview.html#examples" target="_blank">License FAQ</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/introduction.html" target="_blank">Documentation</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/introduction.html" target="_blank">Introduction</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/integrate.html" target="_blank">Integration Methods</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/launch.html" target="_blank">Launching your Application</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/properties.html" target="_blank">Configuration Properties</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/javadocs.html" target="_blank">Java API</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/i18n.html" target="_blank">Localization / i18n</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/security-model.html" target="_blank">Security Model</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/jmx.html" target="_blank">JMX Control</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/example.html" target="_blank">TestWrapper Application</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/support.jsp" target="_blank">Support</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/debugging.html" target="_blank">Debugging</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/troubleshooting.html" target="_blank">Troubleshooting</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/howto.html" target="_blank">HOWTO</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/qna.html" target="_blank">Questions &amp; Answers</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/faq.html" target="_blank">FAQ</a></li>
<li><a href="http://sourceforge.net/tracker/?group_id=39428" target="_blank">Issue Tracking</a></li>
<li><a href="http://sourceforge.net/mail/?group_id=39428" target="_blank">Maling List</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/support.jsp" target="_blank">Get Support</a></li>
<li><p><a href="http://sourceforge.net/projects/wrapper/" target="_blank">Community</a></p>
</li>
<li><p><a href="http://sourceforge.net/projects/wrapper/" target="_blank">SourceForge Project</a></p>
</li>
<li><a href="http://sourceforge.net/svn/?group_id=39428" target="_blank">Source Repository</a></li>
<li><p><a href="http://www.tanukisoftware.com/en/" target="_blank">About us</a></p>
</li>
<li><p><a href="http://www.tanukisoftware.com/en/company.php" target="_blank">Company Profile</a></p>
</li>
<li><a href="http://www.tanukisoftware.com/en/distributors.php" target="_blank">Distributors</a></li>
<li><a href="http://www.tanukisoftware.com/en/customers.php" target="_blank">Customers</a></li>
<li><a href="http://www.tanukisoftware.com/en/contact.php" target="_blank">Contact us</a></li>
<li><h2 id="properties">Properties</h2>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/properties.html" target="_blank">Configuration Overview</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/properties.html#category" target="_blank">List by Category</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/properties.html#name" target="_blank">List by Name</a></p>
</li>
<li><h2 id="currently-logged-on-">Currently logged on:</h2>
</li>
<li><p>1 users, 100 guests</p>
</li>
<li><h2 id="customers">Customers</h2>
</li>
</ul>
<p>Logging Configuration Properties <a href=""></a> # Logging Configuration Properties Logging properties are used to configure how where the Java Service Wrapper logs internal output as well as JVM output which would normally show up in the console used to launch a Java application. Wrapper Logging properties do not in any way control nor replace Logging tools within the Java application.</p>
<p>[General/Common]</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-adviser.html" target="_blank">wrapper.adviser</a> (3.1.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-debug.html" target="_blank">wrapper.debug</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-filter-x-n.html#action" target="_blank">wrapper.filter.action.<n></a> (3.0.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-filter-x-n.html#allow-wildcards" target="_blank">wrapper.filter.allow_wildcards.<n></a> (3.5.5)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-filter-x-n.html#message" target="_blank">wrapper.filter.message.<n></a> (3.5.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-filter-x-n.html#trigger" target="_blank">wrapper.filter.trigger.<n></a> (3.0.0)</li>
</ul>
<p>[Console]</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-console-flush.html" target="_blank">wrapper.console.flush</a> (3.2.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-console-format.html" target="_blank">wrapper.console.format</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/prop-console-loglevel.html" target="_blank">wrapper.console.loglevel</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/prop-console-x-to-stderr.html" target="_blank">wrapper.console.error_to_stderr</a> (3.5.3)</p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-console-x-to-stderr.html" target="_blank">wrapper.console.fatal_to_stderr</a> (3.5.3)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-console-x-to-stderr.html" target="_blank">wrapper.console.warn_to_stderr</a> (3.5.3)</li>
</ul>
<p>[Command]</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-java-command-loglevel.html" target="_blank">wrapper.java.command.loglevel</a> (3.1.2)</li>
</ul>
<p>[Log File]</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile.html" target="_blank">wrapper.logfile</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-format.html" target="_blank">wrapper.logfile.format</a> (2.2.5)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-inactivity-timeout.html" target="_blank">wrapper.logfile.inactivity.timeout</a> (3.2.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-loglevel.html" target="_blank">wrapper.logfile.loglevel</a> (2.2.5)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-maxfiles.html" target="_blank">wrapper.logfile.maxfiles</a> (2.2.5)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-maxsize.html" target="_blank">wrapper.logfile.maxsize</a> (2.2.5)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-purge-pattern.html" target="_blank">wrapper.logfile.purge.pattern</a> (3.3.8)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-purge-sort.html" target="_blank">wrapper.logfile.purge.sort</a> (3.3.8)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-rollmode.html" target="_blank">wrapper.logfile.rollmode</a> (3.2.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-umask.html#x-umask" target="_blank">wrapper.logfile.umask</a> (3.2.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-log-lf-delay-threshold.html" target="_blank">wrapper.log.lf_delay.threshold</a> (3.5.10)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-log-warning-threshold.html" target="_blank">wrapper.log.warning.threshold</a> (3.5.8)</li>
</ul>
<p>[Log-Dialog]</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logdialog-enable.html" target="_blank">wrapper.logdialog.enable</a> (3.3.1)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logdialog-format.html" target="_blank">wrapper.logdialog.format</a> (3.3.1)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logdialog-lines.html" target="_blank">wrapper.logdialog.lines</a> (3.3.1)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logdialog-loglevel.html" target="_blank">wrapper.logdialog.loglevel</a> (3.3.1)</li>
</ul>
<p>[Syslog]</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-syslog-facility.html" target="_blank">wrapper.syslog.facility</a> (3.2.1)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-syslog-ident.html" target="_blank">wrapper.syslog.ident</a> (3.2.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-syslog-local-host.html" target="_blank">wrapper.syslog.local.host</a> (3.5.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-syslog-loglevel.html" target="_blank">wrapper.syslog.loglevel</a> (2.2.5)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-syslog-remote-host.html" target="_blank">wrapper.syslog.remote.host</a> (3.5.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-syslog-remote-port.html" target="_blank">wrapper.syslog.remote.port</a> (3.5.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/" target="_blank"><img src="" alt=""></a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/product-overview.html" target="_blank">Product</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/product-overview.html" target="_blank">Overview</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/product-features.html" target="_blank">Features</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/download.jsp#stable" target="_blank">Download</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/accountLicenses.jsp#purchase" target="_blank">Buy Now</a></li>
<li><a href="http://www.tanukisoftware.com/en/distributors.php" target="_blank">Distribuitors</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/introduction.html" target="_blank">Documentation</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/introduction.html" target="_blank">Introduction</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/integrate.html" target="_blank">Integration Methods</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/properties.html" target="_blank">Configuration Properties</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/javadocs.html" target="_blank">Java API</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/support.jsp" target="_blank">Support</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/debugging.html" target="_blank">Debugging</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/troubleshooting.html" target="_blank">Troubleshooting</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/qna.html" target="_blank">Questions &amp; Answers</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/faq.html" target="_blank">FAQ</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/support.jsp" target="_blank">Get Support</a></li>
<li><p><a href="http://sourceforge.net/projects/wrapper/" target="_blank">Community</a></p>
</li>
<li><p><a href="http://sourceforge.net/projects/wrapper/" target="_blank"><img src="" alt="SourceForge Project"></a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/" target="_blank">English</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/japanese/" target="_blank">日本語</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/german/" target="_blank">Deutsch</a>
Copyright (c) 2004-2011, Tanuki Software, Ltd. All Rights Reserved.</li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/wrapper/">wrapper</a></li></span></span> | <span class="tags">Tagged <a href="/tags/wrapper/" class="label label-primary">wrapper</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:45"datetime="2014-03-07 09:54:45"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-wrapper--JavaServiceWrapper-LoggingConfigurationPrope/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-wrapper--JavaServiceWrapper-LoggingConfigurationPrope" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-webservice--Java开发的WebService获取客户端IP地址/">Java开发的WebService获取客户端IP地址_数据库 开发_比特网</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:45.000Z"> <a href="/2014/02/02/2014-02-02-webservice--Java开发的WebService获取客户端IP地址/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="java-webservice-ip-">Java开发WebService获取客户端IP地址</h1>
<p>1.基于jax-ws开发的webservice获取客户端ip的方法【在代理类XXXDelegate添加如下代码】：</p>
<p>import javax.annotation.Resource;</p>
<p>import javax.servlet.http.HttpServletRequest;</p>
<p>import javax.xml.ws.WebServiceContext;</p>
<p>import javax.xml.ws.handler.MessageContext;</p>
<p>@Resource</p>
<p>private WebServiceContext wsContext;</p>
<p>private String getClientInfo(){</p>
<p>MessageContext mc = wsContext.getMessageContext();</p>
<p>HttpServletRequest request = (HttpServletRequest)(mc.get(MessageContext.SERVLET_REQUEST));</p>
<p>String remortAddress = request.getRemoteAddr();</p>
<p>return (remortAddress);</p>
<p>}</p>
<p>2.基于axis发布的webservice获取客户端ip的方法</p>
<p>//<em>/</em></p>
<p>/* 获取客户端IP地址，如调用方的IP，以便检查权限。</p>
<p>/* 适用于axis发布的webservice</p>
<p>/* @return</p>
<p>/*/</p>
<p>public String getClientIpAxis() {</p>
<p>MessageContext mc = null;</p>
<p>HttpServletRequest request = null;</p>
<p>try {</p>
<p>mc = MessageContext.getCurrentMessageContext();</p>
<p>if (mc == null)</p>
<p>throw new Exception(“无法获取到MessageContext”);</p>
<p>request = (HttpServletRequest) mc</p>
<p>.getProperty(HTTPConstants.MC_HTTP_SERVLETREQUEST);</p>
<p>System.out.println(“remote ip: ” + request.getRemoteAddr());</p>
<p>} catch (Exception e) {</p>
<p>System.out.println(e.getMessage());</p>
<p>e.printStackTrace();</p>
<p>}</p>
<p>return request.getRemoteAddr();</p>
<p>}</p>
<p>3.基于xfire发布的webservice获取客户端ip的方法</p>
<p>//<em>/</em></p>
<p>/* 获取客户端IP地址</p>
<p>/* 适用于xfire发布的webservice</p>
<p>/* @return</p>
<p>/*/</p>
<p>public String getClientIpXfire() {</p>
<p>String ip = “”;</p>
<p>try {</p>
<p>HttpServletRequest request = XFireServletController.getRequest();</p>
<p>ip = request.getRemoteAddr();</p>
<p>} catch (Exception e) {</p>
<p>System.out.println(“无法获取HttpServletRequest.”);</p>
<p>e.printStackTrace();</p>
<p>}</p>
<p>return ip;</p>
<p>}
关键字：Java</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/webservice/">webservice</a></li></span></span> | <span class="tags">Tagged <a href="/tags/webservice/" class="label label-primary">webservice</a></span> | <span class="time">recent updated:<time title="2014-03-07 10:39:04"datetime="2014-03-07 10:39:04"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-webservice--Java开发的WebService获取客户端IP地址/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-webservice--Java开发的WebService获取客户端IP地址" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-ftp--ApacheFTP实用代码/">Apache FTP 实用代码</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:45.000Z"> <a href="/2014/02/02/2014-02-02-ftp--ApacheFTP实用代码/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="apache-ftp-">Apache FTP 实用代码</h1>
<h2 id="-apache-commons-net-ftputil-">结合网上两个使用apache commons-net包的两个优秀的代码，结合实际，写出了如下的FtpUtil，供参考！</h2>
<p>参考网址：<a href="http://www.iteye.com/topic/173786" target="_blank"><a href="http://www.iteye.com/topic/173786">http://www.iteye.com/topic/173786</a></a>，<a href="http://hi.baidu.com/victorlin23/blog/item/edc62a35dbae8a1a91ef3947.html" target="_blank"><a href="http://hi.baidu.com/victorlin23/blog/item/edc62a35dbae8a1a91ef3947.html">http://hi.baidu.com/victorlin23/blog/item/edc62a35dbae8a1a91ef3947.html</a></a></p>
<h2 id="-"> </h2>
<p>package com.pccw.portlet.publictools;</p>
<p>import java.io.File;</p>
<p>import java.io.FileOutputStream;</p>
<p>import java.io.IOException;</p>
<p>import java.io.InputStream;</p>
<p>import java.io.OutputStream;</p>
<p>import java.io.RandomAccessFile;</p>
<p>import java.net.SocketException;</p>
<p>import java.util.ArrayList;</p>
<p>import java.util.List;</p>
<p>import org.apache.commons.logging.Log;</p>
<p>import org.apache.commons.logging.LogFactory;</p>
<p>import org.apache.commons.net.ftp.FTP;</p>
<p>import org.apache.commons.net.ftp.FTPClient;</p>
<p>import org.apache.commons.net.ftp.FTPFile;</p>
<p>import org.apache.commons.net.ftp.FTPReply;</p>
<p>//<em>/</em></p>
<p> /* FTP工具类</p>
<p> /*</p>
<p> /* @author WangXianfeng 1:16:50 PM Jul 16, 2011</p>
<p> /*/</p>
<p>public class FtpUtil {</p>
<pre><code>   private FTPClient ftpClient;

   private static Log log = LogFactory.getLog(FtpUtil.class);



   //*/*

    /* 根路径为&quot;/&quot;,如果需要链接服务器之后跳转到路径，则在path中定义

    /* @param ftpConfig

    /* @throws SocketException

    /* @throws IOException

    /*/

   public boolean connectServer(FtpConfig ftpConfig) throws SocketException,

                 IOException {

          String server = ftpConfig.getServer();

          int port = ftpConfig.getPort();

          String user = ftpConfig.getUsername();

          String password = ftpConfig.getPassword();

          String path = ftpConfig.getPath();

          return connectServer(server, port, user, password, path);

   }

   //*/*

    /* 连接ftp服务器

    /* @param server 服务器ip

    /* @param port 端口，通常为21

    /* @param user 用户名

    /* @param password 密码

    /* @param path 进入服务器之后的默认路径

    /* @return 连接成功返回true，否则返回false

    /* @throws SocketException

    /* @throws IOException

    /*/

   public boolean connectServer(String server, int port, String user,

                 String password, String path) throws SocketException, IOException {

          ftpClient = new FTPClient();

          ftpClient.connect(server, port);

          ftpClient.setControlEncoding(&quot;GBK&quot;);

          log.info(&quot;Connected to &quot; + server + &quot;.&quot;);

          log.info(&quot;FTP server reply code:&quot; + ftpClient.getReplyCode());

          if (FTPReply.isPositiveCompletion(ftpClient.getReplyCode())) {

                 if (ftpClient.login(user, password)) {

                        // Path is the sub-path of the FTP path

                        if (path.length() != 0) {

                               ftpClient.changeWorkingDirectory(path);

                        }

                        return true;

                 }

          }

          disconnect();

          return false;

   }

   //*/*

    /* 断开与远程服务器的连接

    /* @throws IOException

    /*/

   public void disconnect() throws IOException {

          if (ftpClient.isConnected()) {

                 ftpClient.disconnect();

          }

   }



   //*/*

    /* 从FTP服务器上下载文件,支持断点续传，下载百分比汇报

    /* @param remote 远程文件路径及名称

    /* @param local 本地文件完整绝对路径

    /* @return 下载的状态

    /* @throws IOException

    /*/

   public DownloadStatus download(String remote, String local)

                 throws IOException {

          // 设置被动模式

          ftpClient.enterLocalPassiveMode();

          // 设置以二进制方式传输

          ftpClient.setFileType(FTP.BINARY_FILE_TYPE);

          DownloadStatus result;



          // 检查远程文件是否存在

          FTPFile[] files = ftpClient.listFiles(new String(

                        remote.getBytes(&quot;GBK&quot;), &quot;iso-8859-1&quot;));

          if (files.length != 1) {

                 log.info(&quot;远程文件不存在&quot;);

                 return DownloadStatus.RemoteFileNotExist;

          }



          long lRemoteSize = files[0].getSize();

          File f = new File(local);

          // 本地存在文件，进行断点下载

          if (f.exists()) {

                 long localSize = f.length();

                 // 判断本地文件大小是否大于远程文件大小

                 if (localSize &gt;= lRemoteSize) {

                        log.info(&quot;本地文件大于远程文件，下载中止&quot;);

                        return DownloadStatus.LocalFileBiggerThanRemoteFile;

                 }



                 // 进行断点续传，并记录状态

                 FileOutputStream out = new FileOutputStream(f, true);

                 ftpClient.setRestartOffset(localSize);

                 InputStream in = ftpClient.retrieveFileStream(new String(remote

                               .getBytes(&quot;GBK&quot;), &quot;iso-8859-1&quot;));

                 byte[] bytes = new byte[1024];

                 long step = lRemoteSize / 100;

                 step = step==0?1:step;//文件过小，step可能为0

                 long process = localSize / step;

                 int c;

                 while ((c = in.read(bytes)) != -1) {

                        out.write(bytes, 0, c);

                        localSize += c;

                        long nowProcess = localSize / step;

                        if (nowProcess &gt; process) {

                               process = nowProcess;

                               if (process % 10 == 0){

                                      log.info(&quot;下载进度：&quot; + process);

                               }

                        }

                 }

                 in.close();

                 out.close();

                 boolean isDo = ftpClient.completePendingCommand();

                 if (isDo) {

                        result = DownloadStatus.DownloadFromBreakSuccess;

                 } else {

                        result = DownloadStatus.DownloadFromBreakFailed;

                 }

          } else {

                 OutputStream out = new FileOutputStream(f);

                 InputStream in = ftpClient.retrieveFileStream(new String(remote

                               .getBytes(&quot;GBK&quot;), &quot;iso-8859-1&quot;));

                 byte[] bytes = new byte[1024];

                 long step = lRemoteSize / 100;

                 step = step==0?1:step;//文件过小，step可能为0

                 long process = 0;

                 long localSize = 0L;

                 int c;

                 while ((c = in.read(bytes)) != -1) {

                        out.write(bytes, 0, c);

                        localSize += c;

                        long nowProcess = localSize / step;

                        if (nowProcess &gt; process) {

                               process = nowProcess;

                               if (process % 10 == 0){

                                      log.info(&quot;下载进度：&quot; + process);

                               }

                        }

                 }

                 in.close();

                 out.close();

                 boolean upNewStatus = ftpClient.completePendingCommand();

                 if (upNewStatus) {

                        result = DownloadStatus.DownloadNewSuccess;

                 } else {

                        result = DownloadStatus.DownloadNewFailed;

                 }

          }

          return result;

   }



   public boolean changeDirectory(String path) throws IOException {

          return ftpClient.changeWorkingDirectory(path);

   }



   public boolean createDirectory(String pathName) throws IOException {

          return ftpClient.makeDirectory(pathName);

   }



   public boolean removeDirectory(String path) throws IOException {

          return ftpClient.removeDirectory(path);

   }



   public boolean removeDirectory(String path, boolean isAll)

                 throws IOException {



          if (!isAll) {

                 return removeDirectory(path);

          }



          FTPFile[] ftpFileArr = ftpClient.listFiles(path);

          if (ftpFileArr == null || ftpFileArr.length == 0) {

                 return removeDirectory(path);

          }

          //  

          for (FTPFile ftpFile : ftpFileArr) {

                 String name = ftpFile.getName();

                 if (ftpFile.isDirectory()) {

                        log.info(&quot;/* [sD]Delete subPath [&quot; + path + &quot;/&quot; + name + &quot;]&quot;);

                        if (!ftpFile.getName().equals(&quot;.&quot;)

                                      &amp;&amp; (!ftpFile.getName().equals(&quot;..&quot;))) {

                               removeDirectory(path + &quot;/&quot; + name, true);

                        }

                 } else if (ftpFile.isFile()) {

                        log.info(&quot;/* [sF]Delete file [&quot; + path + &quot;/&quot; + name + &quot;]&quot;);

                        deleteFile(path + &quot;/&quot; + name);

                 } else if (ftpFile.isSymbolicLink()) {



                 } else if (ftpFile.isUnknown()) {



                 }

          }

          return ftpClient.removeDirectory(path);

   }



   //*/*

    /* 查看目录是否存在

    /* @param path

    /* @return

    /* @throws IOException

    /*/

   public boolean isDirectoryExists(String path) throws IOException {

          boolean flag = false;

          FTPFile[] ftpFileArr = ftpClient.listFiles(path);

          for (FTPFile ftpFile : ftpFileArr) {

                 if (ftpFile.isDirectory()

                               &amp;&amp; ftpFile.getName().equalsIgnoreCase(path)) {

                        flag = true;

                        break;

                 }

          }

          return flag;

   }



   //*/*

    /* 得到某个目录下的文件名列表

    /* @param path

    /* @return

    /* @throws IOException

    /*/

   public List&lt;String&gt; getFileList(String path) throws IOException {

          // listFiles return contains directory and file, it&#39;s FTPFile instance

          // listNames() contains directory, so using following to filer

          // directory.

          // String[] fileNameArr = ftpClient.listNames(path);

          FTPFile[] ftpFiles = ftpClient.listFiles(path);



          List&lt;String&gt; retList = new ArrayList&lt;String&gt;();

          if (ftpFiles == null || ftpFiles.length == 0) {

                 return retList;

          }

          for (FTPFile ftpFile : ftpFiles) {

                 if (ftpFile.isFile()) {

                        retList.add(ftpFile.getName());

                 }

          }

          return retList;

   }



   public boolean deleteFile(String pathName) throws IOException {

          return ftpClient.deleteFile(pathName);

   }



   //*/*

    /* 上传文件到FTP服务器，支持断点续传

    /* @param local 本地文件名称，绝对路径

    /* @param remote 远程文件路径，按照Linux上的路径指定方式，支持多级目录嵌套，支持递归创建不存在的目录结构

    /* @return 上传结果

    /* @throws IOException

    /*/

   public UploadStatus upload(String local, String remote) throws IOException {

          // 设置PassiveMode传输

          ftpClient.enterLocalPassiveMode();

          // 设置以二进制流的方式传输

          ftpClient.setFileType(FTP.BINARY_FILE_TYPE);

          ftpClient.setControlEncoding(&quot;GBK&quot;);

          UploadStatus result;

          // 对远程目录的处理

          String remoteFileName = remote;

          if (remote.contains(&quot;/&quot;)) {

                 remoteFileName = remote.substring(remote.lastIndexOf(&quot;/&quot;) + 1);

                 // 创建服务器远程目录结构，创建失败直接返回

                 if (createDirecroty(remote, ftpClient) == UploadStatus.CreateDirectoryFail) {

                        return UploadStatus.CreateDirectoryFail;

                 }

          }



          // 检查远程是否存在文件

          FTPFile[] files = ftpClient.listFiles(new String(remoteFileName

                        .getBytes(&quot;GBK&quot;), &quot;iso-8859-1&quot;));

          if (files.length == 1) {

                 long remoteSize = files[0].getSize();

                 File f = new File(local);

                 long localSize = f.length();

                 if (remoteSize == localSize) { // 文件存在

                        return UploadStatus.FileExits;

                 } else if (remoteSize &gt; localSize) {

                        return UploadStatus.RemoteFileBiggerThanLocalFile;

                 }



                 // 尝试移动文件内读取指针,实现断点续传

                 result = uploadFile(remoteFileName, f, ftpClient, remoteSize);



                 // 如果断点续传没有成功，则删除服务器上文件，重新上传

                 if (result == UploadStatus.UploadFromBreakFailed) {

                        if (!ftpClient.deleteFile(remoteFileName)) {

                               return UploadStatus.DeleteRemoteFaild;

                        }

                        result = uploadFile(remoteFileName, f, ftpClient, 0);

                 }

          } else {

                 result = uploadFile(remoteFileName, new File(local), ftpClient, 0);

          }

          return result;

   }



   //*/*

    /* 递归创建远程服务器目录

    /* @param remote 远程服务器文件绝对路径

    /* @param ftpClient FTPClient对象

    /* @return 目录创建是否成功

    /* @throws IOException

    /*/

   public UploadStatus createDirecroty(String remote, FTPClient ftpClient)

                 throws IOException {

          UploadStatus status = UploadStatus.CreateDirectorySuccess;

          String directory = remote.substring(0, remote.lastIndexOf(&quot;/&quot;) + 1);

          if (!directory.equalsIgnoreCase(&quot;/&quot;)

                        &amp;&amp; !ftpClient.changeWorkingDirectory(new String(directory

                                      .getBytes(&quot;GBK&quot;), &quot;iso-8859-1&quot;))) {

                 // 如果远程目录不存在，则递归创建远程服务器目录

                 int start = 0;

                 int end = 0;

                 if (directory.startsWith(&quot;/&quot;)) {

                        start = 1;

                 } else {

                        start = 0;

                 }

                 end = directory.indexOf(&quot;/&quot;, start);

                 while (true) {

                        String subDirectory = new String(remote.substring(start, end)

                                      .getBytes(&quot;GBK&quot;), &quot;iso-8859-1&quot;);

                        if (!ftpClient.changeWorkingDirectory(subDirectory)) {

                               if (ftpClient.makeDirectory(subDirectory)) {

                                      ftpClient.changeWorkingDirectory(subDirectory);

                               } else {

                                      log.info(&quot;创建目录失败&quot;);

                                      return UploadStatus.CreateDirectoryFail;

                               }

                        }

                        start = end + 1;

                        end = directory.indexOf(&quot;/&quot;, start);

                        // 检查所有目录是否创建完毕

                        if (end &lt;= start) {

                               break;

                        }

                 }

          }

          return status;

   }



   //*/*

    /* 上传文件到服务器,新上传和断点续传

    /* @param remoteFile 远程文件名，在上传之前已经将服务器工作目录做了改变

    /* @param localFile 本地文件File句柄，绝对路径

    /* @param processStep 需要显示的处理进度步进值

    /* @param ftpClient FTPClient引用

    /* @return

    /* @throws IOException

    /*/

   public UploadStatus uploadFile(String remoteFile, File localFile,

                 FTPClient ftpClient, long remoteSize) throws IOException {

          UploadStatus status;

          // 显示进度的上传

          System.out.println(&quot;localFile.length():&quot;+localFile.length());

          long step = localFile.length() / 100;

          step = step==0?1:step;//文件过小，step可能为0

          long process = 0;

          long localreadbytes = 0L;

          RandomAccessFile raf = new RandomAccessFile(localFile, &quot;r&quot;);

          OutputStream out = ftpClient.appendFileStream(new String(remoteFile

                        .getBytes(&quot;GBK&quot;), &quot;iso-8859-1&quot;));

          // 断点续传

          if (remoteSize &gt; 0) {

                 ftpClient.setRestartOffset(remoteSize);

                 process = remoteSize / step;

                 raf.seek(remoteSize);

                 localreadbytes = remoteSize;

          }

          byte[] bytes = new byte[1024];

          int c;

          while ((c = raf.read(bytes)) != -1) {

                 out.write(bytes, 0, c);

                 localreadbytes += c;

                 if (localreadbytes / step != process) {

                        process = localreadbytes / step;

                        if (process % 10 == 0){

                               log.info(&quot;上传进度：&quot; + process);

                        }

                 }

          }

          out.flush();

          raf.close();

          out.close();

          boolean result = ftpClient.completePendingCommand();

          if (remoteSize &gt; 0) {

                 status = result ? UploadStatus.UploadFromBreakSuccess

                               : UploadStatus.UploadFromBreakFailed;

          } else {

                 status = result ? UploadStatus.UploadNewFileSuccess

                               : UploadStatus.UploadNewFileFailed;

          }

          return status;

   }



   public InputStream downFile(String sourceFileName) throws IOException {

          return ftpClient.retrieveFileStream(sourceFileName);

   }



   public enum UploadStatus {

          CreateDirectoryFail, // 远程服务器相应目录创建失败

          CreateDirectorySuccess, // 远程服务器闯将目录成功

          UploadNewFileSuccess, // 上传新文件成功

          UploadNewFileFailed, // 上传新文件失败

          FileExits, // 文件已经存在

          RemoteFileBiggerThanLocalFile, // 远程文件大于本地文件

          UploadFromBreakSuccess, // 断点续传成功

          UploadFromBreakFailed, // 断点续传失败

          DeleteRemoteFaild; // 删除远程文件失败

   }



   public enum DownloadStatus {

          RemoteFileNotExist, // 远程文件不存在

          DownloadNewSuccess, // 下载文件成功

          DownloadNewFailed, // 下载文件失败

          LocalFileBiggerThanRemoteFile, // 本地文件大于远程文件

          DownloadFromBreakSuccess, // 断点续传成功

          DownloadFromBreakFailed; // 断点续传失败

   }
</code></pre><p>}
FtpConfig类：
//<em>/</em>
 /<em> 
 /</em>/
package com.pccw.portlet.publictools;
//<em>/</em>
 /<em> FTP配置类
 /</em> @author WangXianfeng 1:18:45 PM Jul 16, 2011
 /<em>/
public class FtpConfig {
    private String server;
    private int port;
    private String username;
    private String password;
    private String path;
    gets  。。sets。。
}
测试类：
import java.util.List;
import com.pccw.portlet.publictools.FtpConfig;
import com.pccw.portlet.publictools.FtpUtil;
//</em>/<em>
 /</em> 
 /<em> @author WangXianfeng 1:20:45 PM Jul 16, 2011
 /</em>/
public class HelloWorld {
    //<em>/</em>
     /<em> @param args
     /</em>/
    public static void main(String[] args) throws Exception {
        FtpConfig config = new FtpConfig();
        config.setServer(&quot;192.168.0.199&quot;);
        config.setPort(21);
        config.setUsername(&quot;wxf&quot;);
        config.setPassword(&quot;wxf&quot;);
        config.setPath(&quot;bankafile&quot;);
        FtpUtil ftp = new FtpUtil();
        ftp.connectServer(config);
        String localFile = &quot;c:\Seagull.rar&quot;;
        ftp.upload(localFile, &quot;sea.rar&quot;);
        List<String> files = ftp.getFileList(&quot;&quot;);
        //ftp.changeDirectory(&quot;bankafile&quot;);</p>
<pre><code>    for(String file:files){
        System.out.println(file);
        String local = &quot;D:\\ct\\199\\temp\\&quot; + file;
        ftp.download(file, local);
    }
}
</code></pre><p>}</p>
<p>来源： <a href="[http://xianfengmc.blog.163.com/blog/static/82690025201161731615607/](http://xianfengmc.blog.163.com/blog/static/82690025201161731615607/)">[http://xianfengmc.blog.163.com/blog/static/82690025201161731615607/](http://xianfengmc.blog.163.com/blog/static/82690025201161731615607/)</a> </p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/ftp/">ftp</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ftp/" class="label label-primary">ftp</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:45"datetime="2014-03-07 09:54:45"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-ftp--ApacheFTP实用代码/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-ftp--ApacheFTP实用代码" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/6/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/4/">4</a></li><li><a class="page-number" href="/page/5/">5</a></li><li><a class="page-number" href="/page/6/">6</a></li><li class="active"><li><span class="page-number current">7</span></li><li><a class="page-number" href="/page/8/">8</a></li><li><a class="page-number" href="/page/9/">9</a></li><li><a class="page-number" href="/page/10/">10</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/8/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 20:45:44</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
