
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 153 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-架构师--paxos-simple/">paxos</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:28.000Z"> <a href="/2014/02/02/2014-02-02-架构师--paxos-simple/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="paxos-simple">paxos-simple</h1>
<p>Paxos Made Simple
Leslie Lamport 01 Nov 2001
Abstract The Paxos algorithm, when presented in plain English, is very simple.
Contents
1 Introduction 2 The 2.1 2.2 2.3 2.4 2.5 Consensus Algorithm The Problem . . . . . . . Choosing a Value . . . . . Learning a Chosen Value . Progress . . . . . . . . . . The Implementation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1 1 1 2 6 7 7 8 11
3 Implementing a State Machine References
1
Introduction
The Paxos algorithm for implementing a fault-tolerant distributed system has been regarded as diﬃcult to understand, perhaps because the original presentation was Greek to many readers [5]. In fact, it is among the simplest and most obvious of distributed algorithms. At its heart is a consensus algorithm—the “synod” algorithm of [5]. The next section shows that this consensus algorithm follows almost unavoidably from the properties we want it to satisfy. The last section explains the complete Paxos algorithm, which is obtained by the straightforward application of consensus to the state machine approach for building a distributed system—an approach that should be well-known, since it is the subject of what is probably the most often-cited article on the theory of distributed systems [4].
2
2.1
The Consensus Algorithm
The Problem
Assume a collection of processes that can propose values. A consensus algorithm ensures that a single one among the proposed values is chosen. If no value is proposed, then no value should be chosen. If a value has been chosen, then processes should be able to learn the chosen value. The safety requirements for consensus are: • Only a value that has been proposed may be chosen, • Only a single value is chosen, and • A process never learns that a value has been chosen unless it actually has been. We won’t try to specify precise liveness requirements. However, the goal is to ensure that some proposed value is eventually chosen and, if a value has been chosen, then a process can eventually learn the value. We let the three roles in the consensus algorithm be performed by three classes of agents: proposers, acceptors, and learners. In an implementation, a single process may act as more than one agent, but the mapping from agents to processes does not concern us here. Assume that agents can communicate with one another by sending messages. We use the customary asynchronous, non-Byzantine model, in which:
1
• Agents operate at arbitrary speed, may fail by stopping, and may restart. Since all agents may fail after a value is chosen and then restart, a solution is impossible unless some information can be remembered by an agent that has failed and restarted. • Messages can take arbitrarily long to be delivered, can be duplicated, and can be lost, but they are not corrupted.
2.2
Choosing a Value
The easiest way to choose a value is to have a single acceptor agent. A proposer sends a proposal to the acceptor, who chooses the ﬁrst proposed value that it receives. Although simple, this solution is unsatisfactory because the failure of the acceptor makes any further progress impossible. So, let’s try another way of choosing a value. Instead of a single acceptor, let’s use multiple acceptor agents. A proposer sends a proposed value to a set of acceptors. An acceptor may accept the proposed value. The value is chosen when a large enough set of acceptors have accepted it. How large is large enough? To ensure that only a single value is chosen, we can let a large enough set consist of any majority of the agents. Because any two majorities have at least one acceptor in common, this works if an acceptor can accept at most one value. (There is an obvious generalization of a majority that has been observed in numerous papers, apparently starting with [3].) In the absence of failure or message loss, we want a value to be chosen even if only one value is proposed by a single proposer. This suggests the requirement: P1. An acceptor must accept the ﬁrst proposal that it receives. But this requirement raises a problem. Several values could be proposed by diﬀerent proposers at about the same time, leading to a situation in which every acceptor has accepted a value, but no single value is accepted by a majority of them. Even with just two proposed values, if each is accepted by about half the acceptors, failure of a single acceptor could make it impossible to learn which of the values was chosen. P1 and the requirement that a value is chosen only when it is accepted by a majority of acceptors imply that an acceptor must be allowed to accept more than one proposal. We keep track of the diﬀerent proposals that an acceptor may accept by assigning a (natural) number to each proposal, so a proposal consists of a proposal number and a value. To prevent confusion, we require that diﬀerent proposals have diﬀerent numbers. How this is 2
achieved depends on the implementation, so for now we just assume it. A value is chosen when a single proposal with that value has been accepted by a majority of the acceptors. In that case, we say that the proposal (as well as its value) has been chosen. We can allow multiple proposals to be chosen, but we must guarantee that all chosen proposals have the same value. By induction on the proposal number, it suﬃces to guarantee: P2. If a proposal with value v is chosen, then every higher-numbered proposal that is chosen has value v . Since numbers are totally ordered, condition P2 guarantees the crucial safety property that only a single value is chosen. To be chosen, a proposal must be accepted by at least one acceptor. So, we can satisfy P2 by satisfying: P2a . If a proposal with value v is chosen, then every higher-numbered proposal accepted by any acceptor has value v . We still maintain P1 to ensure that some proposal is chosen. Because communication is asynchronous, a proposal could be chosen with some particular acceptor c never having received any proposal. Suppose a new proposer “wakes up” and issues a higher-numbered proposal with a diﬀerent value. P1 requires c to accept this proposal, violating P2a . Maintaining both P1 and P2a requires strengthening P2a to: P2b . If a proposal with value v is chosen, then every higher-numbered proposal issued by any proposer has value v . Since a proposal must be issued by a proposer before it can be accepted by an acceptor, P2b implies P2a , which in turn implies P 2. To discover how to satisfy P2b , let’s consider how we would prove that it holds. We would assume that some proposal with number m and value v is chosen and show that any proposal issued with number n &gt; m also has value v . We would make the proof easier by using induction on n, so we can prove that proposal number n has value v under the additional assumption that every proposal issued with a number in m . . (n − 1) has value v , where i . . j denotes the set of numbers from i through j . For the proposal numbered m to be chosen, there must be some set C consisting of a majority of acceptors such that every acceptor in C accepted it. Combining this with the induction assumption, the hypothesis that m is chosen implies:
3
Every acceptor in C has accepted a proposal with number in m . . (n − 1), and every proposal with number in m . . (n − 1) accepted by any acceptor has value v . Since any set S consisting of a majority of acceptors contains at least one member of C , we can conclude that a proposal numbered n has value v by ensuring that the following invariant is maintained: P2c . For any v and n, if a proposal with value v and number n is issued, then there is a set S consisting of a majority of acceptors such that either (a) no acceptor in S has accepted any proposal numbered less than n, or (b) v is the value of the highest-numbered proposal among all proposals numbered less than n accepted by the acceptors in S . We can therefore satisfy P2b by maintaining the invariance of P2c . To maintain the invariance of P2c , a proposer that wants to issue a proposal numbered n must learn the highest-numbered proposal with number less than n, if any, that has been or will be accepted by each acceptor in some majority of acceptors. Learning about proposals already accepted is easy enough; predicting future acceptances is hard. Instead of trying to predict the future, the proposer controls it by extracting a promise that there won’t be any such acceptances. In other words, the proposer requests that the acceptors not accept any more proposals numbered less than n. This leads to the following algorithm for issuing proposals. 1. A proposer chooses a new proposal number n and sends a request to each member of some set of acceptors, asking it to respond with: (a) A promise never again to accept a proposal numbered less than n, and (b) The proposal with the highest number less than n that it has accepted, if any. I will call such a request a prepare request with number n. 2. If the proposer receives the requested responses from a majority of the acceptors, then it can issue a proposal with number n and value v , where v is the value of the highest-numbered proposal among the responses, or is any value selected by the proposer if the responders reported no proposals.
4
A proposer issues a proposal by sending, to some set of acceptors, a request that the proposal be accepted. (This need not be the same set of acceptors that responded to the initial requests.) Let’s call this an accept request. This describes a proposer’s algorithm. What about an acceptor? It can receive two kinds of requests from proposers: prepare requests and accept requests. An acceptor can ignore any request without compromising safety. So, we need to say only when it is allowed to respond to a request. It can always respond to a prepare request. It can respond to an accept request, accepting the proposal, iﬀ it has not promised not to. In other words: P1a . An acceptor can accept a proposal numbered n iﬀ it has not responded to a prepare request having a number greater than n. Observe that P1a subsumes P1. We now have a complete algorithm for choosing a value that satisﬁes the required safety properties—assuming unique proposal numbers. The ﬁnal algorithm is obtained by making one small optimization. Suppose an acceptor receives a prepare request numbered n, but it has already responded to a prepare request numbered greater than n, thereby promising not to accept any new proposal numbered n. There is then no reason for the acceptor to respond to the new prepare request, since it will not accept the proposal numbered n that the proposer wants to issue. So we have the acceptor ignore such a prepare request. We also have it ignore a prepare request for a proposal it has already accepted. With this optimization, an acceptor needs to remember only the highestnumbered proposal that it has ever accepted and the number of the highestnumbered prepare request to which it has responded. Because P2c must be kept invariant regardless of failures, an acceptor must remember this information even if it fails and then restarts. Note that the proposer can always abandon a proposal and forget all about it—as long as it never tries to issue another proposal with the same number. Putting the actions of the proposer and acceptor together, we see that the algorithm operates in the following two phases. Phase 1. (a) A proposer selects a proposal number n and sends a prepare request with number n to a majority of acceptors. (b) If an acceptor receives a prepare request with number n greater than that of any prepare request to which it has already responded, then it responds to the request with a promise not to accept any more proposals numbered less than n and with the highest-numbered proposal (if any) that it has accepted. 5
Phase 2. (a) If the proposer receives a response to its prepare requests (numbered n) from a majority of acceptors, then it sends an accept request to each of those acceptors for a proposal numbered n with a value v , where v is the value of the highest-numbered proposal among the responses, or is any value if the responses reported no proposals. (b) If an acceptor receives an accept request for a proposal numbered n, it accepts the proposal unless it has already responded to a prepare request having a number greater than n. A proposer can make multiple proposals, so long as it follows the algorithm for each one. It can abandon a proposal in the middle of the protocol at any time. (Correctness is maintained, even though requests and/or responses for the proposal may arrive at their destinations long after the proposal was abandoned.) It is probably a good idea to abandon a proposal if some proposer has begun trying to issue a higher-numbered one. Therefore, if an acceptor ignores a prepare or accept request because it has already received a prepare request with a higher number, then it should probably inform the proposer, who should then abandon its proposal. This is a performance optimization that does not aﬀect correctness.
2.3
Learning a Chosen Value
To learn that a value has been chosen, a learner must ﬁnd out that a proposal has been accepted by a majority of acceptors. The obvious algorithm is to have each acceptor, whenever it accepts a proposal, respond to all learners, sending them the proposal. This allows learners to ﬁnd out about a chosen value as soon as possible, but it requires each acceptor to respond to each learner—a number of responses equal to the product of the number of acceptors and the number of learners. The assumption of non-Byzantine failures makes it easy for one learner to ﬁnd out from another learner that a value has been accepted. We can have the acceptors respond with their acceptances to a distinguished learner, which in turn informs the other learners when a value has been chosen. This approach requires an extra round for all the learners to discover the chosen value. It is also less reliable, since the distinguished learner could fail. But it requires a number of responses equal only to the sum of the number of acceptors and the number of learners. More generally, the acceptors could respond with their acceptances to some set of distinguished learners, each of which can then inform all the learners when a value has been chosen. Using a larger set of distinguished 6
learners provides greater reliability at the cost of greater communication complexity. Because of message loss, a value could be chosen with no learner ever ﬁnding out. The learner could ask the acceptors what proposals they have accepted, but failure of an acceptor could make it impossible to know whether or not a majority had accepted a particular proposal. In that case, learners will ﬁnd out what value is chosen only when a new proposal is chosen. If a learner needs to know whether a value has been chosen, it can have a proposer issue a proposal, using the algorithm described above.
2.4
Progress
It’s easy to construct a scenario in which two proposers each keep issuing a sequence of proposals with increasing numbers, none of which are ever chosen. Proposer p completes phase 1 for a proposal number n 1 . Another proposer q then completes phase 1 for a proposal number n 2 &gt; n 1 . Proposer p’s phase 2 accept requests for a proposal numbered n 1 are ignored because the acceptors have all promised not to accept any new proposal numbered less than n 2 . So, proposer p then begins and completes phase 1 for a new proposal number n 3 &gt; n 2 , causing the second phase 2 accept requests of proposer q to be ignored. And so on. To guarantee progress, a distinguished proposer must be selected as the only one to try issuing proposals. If the distinguished proposer can communicate successfully with a majority of acceptors, and if it uses a proposal with number greater than any already used, then it will succeed in issuing a proposal that is accepted. By abandoning a proposal and trying again if it learns about some request with a higher proposal number, the distinguished proposer will eventually choose a high enough proposal number. If enough of the system (proposer, acceptors, and communication network) is working properly, liveness can therefore be achieved by electing a single distinguished proposer. The famous result of Fischer, Lynch, and Patterson [1] implies that a reliable algorithm for electing a proposer must use either randomness or real time—for example, by using timeouts. However, safety is ensured regardless of the success or failure of the election.
2.5
The Implementation
The Paxos algorithm [5] assumes a network of processes. In its consensus algorithm, each process plays the role of proposer, acceptor, and learner. The algorithm chooses a leader, which plays the roles of the distinguished 7
proposer and the distinguished learner. The Paxos consensus algorithm is precisely the one described above, where requests and responses are sent as ordinary messages. (Response messages are tagged with the corresponding proposal number to prevent confusion.) Stable storage, preserved during failures, is used to maintain the information that the acceptor must remember. An acceptor records its intended response in stable storage before actually sending the response. All that remains is to describe the mechanism for guaranteeing that no two proposals are ever issued with the same number. Diﬀerent proposers choose their numbers from disjoint sets of numbers, so two diﬀerent proposers never issue a proposal with the same number. Each proposer remembers (in stable storage) the highest-numbered proposal it has tried to issue, and begins phase 1 with a higher proposal number than any it has already used.
3
Implementing a State Machine
A simple way to implement a distributed system is as a collection of clients that issue commands to a central server. The server can be described as a deterministic state machine that performs client commands in some sequence. The state machine has a current state; it performs a step by taking as input a command and producing an output and a new state. For example, the clients of a distributed banking system might be tellers, and the state-machine state might consist of the account balances of all users. A withdrawal would be performed by executing a state machine command that decreases an account’s balance if and only if the balance is greater than the amount withdrawn, producing as output the old and new balances. An implementation that uses a single central server fails if that server fails. We therefore instead use a collection of servers, each one independently implementing the state machine. Because the state machine is deterministic, all the servers will produce the same sequences of states and outputs if they all execute the same sequence of commands. A client issuing a command can then use the output generated for it by any server. To guarantee that all servers execute the same sequence of state machine commands, we implement a sequence of separate instances of the Paxos consensus algorithm, the value chosen by the i th instance being the i th state machine command in the sequence. Each server plays all the roles (proposer, acceptor, and learner) in each instance of the algorithm. For now, I assume that the set of servers is ﬁxed, so all instances of the consensus algorithm
8
use the same sets of agents. In normal operation, a single server is elected to be the leader, which acts as the distinguished proposer (the only one that tries to issue proposals) in all instances of the consensus algorithm. Clients send commands to the leader, who decides where in the sequence each command should appear. If the leader decides that a certain client command should be the 135th command, it tries to have that command chosen as the value of the 135th instance of the consensus algorithm. It will usually succeed. It might fail because of failures, or because another server also believes itself to be the leader and has a diﬀerent idea of what the 135th command should be. But the consensus algorithm ensures that at most one command can be chosen as the 135th one. Key to the eﬃciency of this approach is that, in the Paxos consensus algorithm, the value to be proposed is not chosen until phase 2. Recall that, after completing phase 1 of the proposer’s algorithm, either the value to be proposed is determined or else the proposer is free to propose any value. I will now describe how the Paxos state machine implementation works during normal operation. Later, I will discuss what can go wrong. I consider what happens when the previous leader has just failed and a new leader has been selected. (System startup is a special case in which no commands have yet been proposed.) The new leader, being a learner in all instances of the consensus algorithm, should know most of the commands that have already been chosen. Suppose it knows commands 1–134, 138, and 139—that is, the values chosen in instances 1–134, 138, and 139 of the consensus algorithm. (We will see later how such a gap in the command sequence could arise.) It then executes phase 1 of instances 135–137 and of all instances greater than 139. (I describe below how this is done.) Suppose that the outcome of these executions determine the value to be proposed in instances 135 and 140, but leaves the proposed value unconstrained in all other instances. The leader then executes phase 2 for instances 135 and 140, thereby choosing commands 135 and 140. The leader, as well as any other server that learns all the commands the leader knows, can now execute commands 1–135. However, it can’t execute commands 138–140, which it also knows, because commands 136 and 137 have yet to be chosen. The leader could take the next two commands requested by clients to be commands 136 and 137. Instead, we let it ﬁll the gap immediately by proposing, as commands 136 and 137, a special “noop” command that leaves the state unchanged. (It does this by executing phase 2 of instances 136 and 137 of the consensus algorithm.) Once these 9
no-op commands have been chosen, commands 138–140 can be executed. Commands 1–140 have now been chosen. The leader has also completed phase 1 for all instances greater than 140 of the consensus algorithm, and it is free to propose any value in phase 2 of those instances. It assigns command number 141 to the next command requested by a client, proposing it as the value in phase 2 of instance 141 of the consensus algorithm. It proposes the next client command it receives as command 142, and so on. The leader can propose command 142 before it learns that its proposed command 141 has been chosen. It’s possible for all the messages it sent in proposing command 141 to be lost, and for command 142 to be chosen before any other server has learned what the leader proposed as command 141. When the leader fails to receive the expected response to its phase 2 messages in instance 141, it will retransmit those messages. If all goes well, its proposed command will be chosen. However, it could fail ﬁrst, leaving a gap in the sequence of chosen commands. In general, suppose a leader can get α commands ahead—that is, it can propose commands i + 1 through i +α after commands 1 through i are chosen. A gap of up to α−1 commands could then arise. A newly chosen leader executes phase 1 for inﬁnitely many instances of the consensus algorithm—in the scenario above, for instances 135–137 and all instances greater than 139. Using the same proposal number for all instances, it can do this by sending a single reasonably short message to the other servers. In phase 1, an acceptor responds with more than a simple OK only if it has already received a phase 2 message from some proposer. (In the scenario, this was the case only for instances 135 and 140.) Thus, a server (acting as acceptor) can respond for all instances with a single reasonably short message. Executing these inﬁnitely many instances of phase 1 therefore poses no problem. Since failure of the leader and election of a new one should be rare events, the eﬀective cost of executing a state machine command—that is, of achieving consensus on the command/value—is the cost of executing only phase 2 of the consensus algorithm. It can be shown that phase 2 of the Paxos consensus algorithm has the minimum possible cost of any algorithm for reaching agreement in the presence of faults [2]. Hence, the Paxos algorithm is essentially optimal. This discussion of the normal operation of the system assumes that there is always a single leader, except for a brief period between the failure of the current leader and the election of a new one. In abnormal circumstances, the leader election might fail. If no server is acting as leader, then no new commands will be proposed. If multiple servers think they are leaders, then 10
they can all propose values in the same instance of the consensus algorithm, which could prevent any value from being chosen. However, safety is preserved—two diﬀerent servers will never disagree on the value chosen as the i th state machine command. Election of a single leader is needed only to ensure progress. If the set of servers can change, then there must be some way of determining what servers implement what instances of the consensus algorithm. The easiest way to do this is through the state machine itself. The current set of servers can be made part of the state and can be changed with ordinary state-machine commands. We can allow a leader to get α commands ahead by letting the set of servers that execute instance i + α of the consensus algorithm be speciﬁed by the state after execution of the i th state machine command. This permits a simple implementation of an arbitrarily sophisticated reconﬁguration algorithm.
References
[1] Michael J. Fischer, Nancy Lynch, and Michael S. Paterson. Impossibility of distributed consensus with one faulty process. Journal of the ACM, 32(2):374–382, April 1985. [2] Idit Keidar and Sergio Rajsbaum. On the cost of fault-tolerant consensus when there are no faults—a tutorial. TechnicalReport MIT-LCS-TR-821, Laboratory for Computer Science, Massachusetts Institute Technology, Cambridge, MA, 02139, May 2001. also published in SIGACT News 32(2) (June 2001). [3] Leslie Lamport. The implementation of reliable distributed multiprocess systems. Computer Networks, 2:95–114, 1978. [4] Leslie Lamport. Time, clocks, and the ordering of events in a distributed system. Communications of the ACM, 21(7):558–565, July 1978. [5] Leslie Lamport. The part-time parliament. ACM Transactions on Computer Systems, 16(2):133–169, May 1998.
11</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/架构师/">架构师</a></li></span></span> | <span class="tags">Tagged <a href="/tags/架构师/" class="label label-primary">架构师</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:28"datetime="2014-03-07 09:54:28"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-架构师--paxos-simple/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-架构师--paxos-simple" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-lucene--Lucene学习总结之一：全文检索的基本原理/">Lucene学习总结之一：全文检索的基本原理</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:28.000Z"> <a href="/2014/02/02/2014-02-02-lucene--Lucene学习总结之一：全文检索的基本原理/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="lucene-">Lucene学习总结之一：全文检索的基本原理</h1>
<h2 id="-">一、总论</h2>
<p>根据<a href="http://lucene.apache.org/java/docs/index.html" target="_blank"><a href="http://lucene.apache.org/java/docs/index.html">http://lucene.apache.org/java/docs/index.html</a></a>定义：</p>
<p><strong>Lucene**</strong>是一个高效的，基于Java<strong>**的全文检索库。</strong></p>
<p>所以在了解Lucene之前要费一番工夫了解一下全文检索。</p>
<p>那么什么叫做全文检索呢？这要从我们生活中的数据说起。</p>
<p>我们生活中的数据总体分为两种：<strong>结构化数据</strong>和<strong>非结构化数据</strong>。</p>
<ul>
<li><strong>结构化数据：</strong>指具有固定格式或有限长度的数据，如数据库，元数据等。</li>
<li><strong>非结构化数据：</strong>指不定长或无固定格式的数据，如邮件，word文档等。</li>
</ul>
<p>当然有的地方还会提到第三种，半结构化数据，如XML，HTML等，当根据需要可按结构化数据来处理，也可抽取出纯文本按非结构化数据来处理。</p>
<p><strong>非结构化数据又一种叫法叫全文数据。</strong></p>
<hr>
<p>按照数据的分类，搜索也分为两种：</p>
<ul>
<li><strong>对结构化数据的搜索</strong>：如对数据库的搜索，用SQL语句。再如对元数据的搜索，如利用windows搜索对文件名，类型，修改时间进行搜索等。</li>
<li><strong>对非结构化数据的搜索</strong>：如利用windows的搜索也可以搜索文件内容，Linux下的grep命令，再如用Google和百度可以搜索大量内容数据。</li>
</ul>
<p>对非结构化数据也即对全文数据的搜索主要有两种方法：</p>
<p>一种是<strong>顺序扫描法**</strong>(Serial Scanning)：**所谓顺序扫描，比如要找内容包含某一个字符串的文件，就是一个文档一个文档的看，对于每一个文档，从头看到尾，如果此文档包含此字符串，则此文档为我们要找的文件，接着看下一个文件，直到扫描完所有的文件。如利用windows的搜索也可以搜索文件内容，只是相当的慢。如果你有一个80G硬盘，如果想在上面找到一个内容包含某字符串的文件，不花他几个小时，怕是做不到。Linux下的grep命令也是这一种方式。大家可能觉得这种方法比较原始，但对于小数据量的文件，这种方法还是最直接，最方便的。但是对于大量的文件，这种方法就很慢了。</p>
<p>有人可能会说，对非结构化数据顺序扫描很慢，对结构化数据的搜索却相对较快（由于结构化数据有一定的结构可以采取一定的搜索算法加快速度），那么把我们的非结构化数据想办法弄得有一定结构不就行了吗？</p>
<p>这种想法很天然，却构成了全文检索的基本思路，也即将非结构化数据中的一部分信息提取出来，重新组织，使其变得有一定结构，然后对此有一定结构的数据进行搜索，从而达到搜索相对较快的目的。</p>
<p>这部分从非结构化数据中提取出的然后重新组织的信息，我们称之<strong>索引</strong>。</p>
<p>这种说法比较抽象，举几个例子就很容易明白，比如字典，字典的拼音表和部首检字表就相当于字典的索引，对每一个字的解释是非结构化的，如果字典没有音节表和部首检字表，在茫茫辞海中找一个字只能顺序扫描。然而字的某些信息可以提取出来进行结构化处理，比如读音，就比较结构化，分声母和韵母，分别只有几种可以一一列举，于是将读音拿出来按一定的顺序排列，每一项读音都指向此字的详细解释的页数。我们搜索时按结构化的拼音搜到读音，然后按其指向的页数，便可找到我们的非结构化数据——也即对字的解释。</p>
<hr>
<p><strong>这种先建立索引，再对索引进行搜索的过程就叫全文检索(Full-text Search)**</strong>。**</p>
<hr>
<p>下面这幅图来自《Lucene in action》，但却不仅仅描述了Lucene的检索过程，而是描述了全文检索的一般过程。</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/image_2.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p>全文检索大体分两个过程，<strong>索引创建**</strong>(Indexing)<strong>和</strong>搜索索引<strong>**(Search)</strong>。</p>
<ul>
<li>索引创建：将现实世界中所有的结构化和非结构化数据提取信息，创建索引的过程。</li>
<li>搜索索引：就是得到用户的查询请求，搜索创建的索引，然后返回结果的过程。</li>
</ul>
<p>于是全文检索就存在三个重要问题：</p>
<p><strong>1.**</strong>索引里面究竟存些什么？(Index)**</p>
<p><strong>2.**</strong>如何创建索引？(Indexing)**</p>
<p><strong>3.**</strong>如何对索引进行搜索？(Search)**</p>
<p>下面我们顺序对每个个问题进行研究。</p>
<h2 id="-">二、索引里面究竟存些什么</h2>
<p>索引里面究竟需要存些什么呢？</p>
<p>首先我们来看为什么顺序扫描的速度慢：</p>
<p>其实是由于我们想要搜索的信息和非结构化数据中所存储的信息不一致造成的。</p>
<p>非结构化数据中所存储的信息是每个文件包含哪些字符串，也即已知文件，欲求字符串相对容易，也即是从文件到字符串的映射。而我们想搜索的信息是哪些文件包含此字符串，也即已知字符串，欲求文件，也即从字符串到文件的映射。两者恰恰相反。于是如果索引总能够保存从字符串到文件的映射，则会大大提高搜索速度。</p>
<p>由于从字符串到文件的映射是文件到字符串映射的反向过程，于是保存这种信息的索引称为<strong>反向索引</strong>。</p>
<p>反向索引的所保存的信息一般如下：</p>
<p>假设我的文档集合里面有100篇文档，为了方便表示，我们为文档编号从1到100，得到下面的结构</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/inverted%20index_2.jpg" target="_blank"><img src="&quot;inverted index&quot;" alt="inverted index"></a></p>
<p>左边保存的是一系列字符串，称为<strong>词典</strong>。</p>
<p>每个字符串都指向包含此字符串的文档(Document)链表，此文档链表称为<strong>倒排表</strong>(Posting List)。</p>
<p>有了索引，便使保存的信息和要搜索的信息一致，可以大大加快搜索的速度。</p>
<p>比如说，我们要寻找既包含字符串“lucene”又包含字符串“solr”的文档，我们只需要以下几步：</p>
<ol>
<li><p>取出包含字符串“lucene”的文档链表。</p>
</li>
<li><p>取出包含字符串“solr”的文档链表。</p>
</li>
<li><p>通过合并链表，找出既包含“lucene”又包含“solr”的文件。</p>
</li>
</ol>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/inverted%20index%20merge_2.jpg" target="_blank"><img src="&quot;inverted index merge&quot;" alt="inverted index merge"></a></p>
<p>看到这个地方，有人可能会说，全文检索的确加快了搜索的速度，但是多了索引的过程，两者加起来不一定比顺序扫描快多少。的确，加上索引的过程，全文检索不一定比顺序扫描快，尤其是在数据量小的时候更是如此。而对一个很大量的数据创建索引也是一个很慢的过程。</p>
<p>然而两者还是有区别的，顺序扫描是每次都要扫描，而创建索引的过程仅仅需要一次，以后便是一劳永逸的了，每次搜索，创建索引的过程不必经过，仅仅搜索创建好的索引就可以了。</p>
<p><strong>这也是全文搜索相对于顺序扫描的优势之一：一次索引，多次使用。</strong></p>
<h2 id="-">三、如何创建索引</h2>
<p>全文检索的索引创建过程一般有以下几步：</p>
<h3 id="-document-"><strong>第一步：一些要索引的原文档(Document)。</strong></h3>
<p>为了方便说明索引创建过程，这里特意用两个文件为例：</p>
<p>文件一：Students should be allowed to go out with their friends, but not allowed to drink beer.</p>
<p>文件二：My friend Jerry went to school to see his students but found them drunk which is not allowed.</p>
<h3 id="-tokenizer-"><strong>第二步：将原文档传给分次组件(Tokenizer)。</strong></h3>
<p><strong>分词组件(Tokenizer)会做以下几件事情(**</strong>此过程称为Tokenize)<strong>**：</strong></p>
<p><strong>1.**</strong>将文档分成一个一个单独的单词。**</p>
<p><strong>2.**</strong>去除标点符号。**</p>
<p><strong>3.**</strong>去除停词(Stop word)<strong>**。</strong></p>
<p>所谓停词(Stop word)就是一种语言中最普通的一些单词，由于没有特别的意义，因而大多数情况下不能成为搜索的关键词，因而创建索引时，这种词会被去掉而减少索引的大小。</p>
<p>英语中挺词(Stop word)如：“the”,“a”，“this”等。</p>
<p>对于每一种语言的分词组件(Tokenizer)，都有一个停词(stop word)集合。</p>
<hr>
<p><strong>经过分词(Tokenizer)**</strong>后得到的结果称为词元(Token)<strong>**。</strong></p>
<p>在我们的例子中，便得到以下词元(Token)：</p>
<p>“Students”，“allowed”，“go”，“their”，“friends”，“allowed”，“drink”，“beer”，“My”，“friend”，“Jerry”，“went”，“school”，“see”，“his”，“students”，“found”，“them”，“drunk”，“allowed”。</p>
<h3 id="-token-linguistic-processor-"><strong>第三步：将得到的词元(Token)传给语言处理组件(Linguistic Processor)。</strong></h3>
<p>语言处理组件(linguistic processor)主要是对得到的词元(Token)做一些同语言相关的处理。</p>
<p><strong>对于英语，语言处理组件(Linguistic Processor)**</strong>一般做以下几点：**</p>
<p><strong>1.**</strong>变为小写(Lowercase)<strong>**。</strong></p>
<p><strong>2.**</strong>将单词缩减为词根形式，如“cars<strong><strong>”到“car</strong></strong>”等。这种操作称为：stemming<strong>**。</strong></p>
<p><strong>3.**</strong>将单词转变为词根形式，如“drove<strong><strong>”到“drive</strong></strong>”等。这种操作称为：lemmatization<strong>**。</strong></p>
<p><strong>Stemming 和 lemmatization的异同：</strong></p>
<ul>
<li>相同之处：Stemming和lemmatization都要使词汇成为词根形式。</li>
<li><p>两者的方式不同：</p>
</li>
<li><p>Stemming采用的是“缩减”的方式：“cars”到“car”，“driving”到“drive”。</p>
</li>
<li>Lemmatization采用的是“转变”的方式：“drove”到“drove”，“driving”到“drive”。</li>
<li><p>两者的算法不同：</p>
</li>
<li><p>Stemming主要是采取某种固定的算法来做这种缩减，如去除“s”，去除“ing”加“e”，将“ational”变为“ate”，将“tional”变为“tion”。</p>
</li>
<li>Lemmatization主要是采用保存某种字典的方式做这种转变。比如字典中有“driving”到“drive”，“drove”到“drive”，“am, is, are”到“be”的映射，做转变时，只要查字典就可以了。</li>
<li>Stemming和lemmatization不是互斥关系，是有交集的，有的词利用这两种方式都能达到相同的转换。</li>
</ul>
<hr>
<p><strong>语言处理组件(linguistic processor)的结果称为词(Term)**</strong>。**</p>
<p>在我们的例子中，经过语言处理，得到的词(Term)如下：</p>
<p>“student”，“allow”，“go”，“their”，“friend”，“allow”，“drink”，“beer”，“my”，“friend”，“jerry”，“go”，“school”，“see”，“his”，“student”，“find”，“them”，“drink”，“allow”。</p>
<p>也正是因为有语言处理的步骤，才能使搜索drove，而drive也能被搜索出来。</p>
<h3 id="-term-indexer-"><strong>第四步：将得到的词(Term)传给索引组件(Indexer)。</strong></h3>
<p><strong>索引**</strong>组件(Indexer)主要做以下几件事情：**</p>
<p><strong>1. 利用得到的词(Term)创建一个字典。</strong></p>
<p>在我们的例子中字典如下：
Term Document ID student 1 allow 1 go 1 their 1 friend 1 allow 1 drink 1 beer 1 my 2 friend 2 jerry 2 go 2 school 2 see 2 his 2 student 2 find 2 them 2 drink 2 allow 2</p>
<p><strong>2.**</strong>对字典按字母顺序进行排序。**</p>
<p>Term Document ID allow 1 allow 1 allow 2 beer 1 drink 1 drink 2 find 2 friend 1 friend 2 go 1 go 2 his 2 jerry 2 my 2 school 2 see 2 student 1 student 2 their 1 them 2</p>
<hr>
<p><strong>3.**</strong>合并相同的词(Term)<strong><strong>成为文档倒排(Posting List)</strong></strong>链表。**</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/postinglist_2.jpg" target="_blank"><img src="&quot;postinglist&quot;" alt="postinglist"></a></p>
<p>在此表中，有几个定义：</p>
<ul>
<li>Document Frequency 即文档频次，表示总共有多少文件包含此词(Term)。</li>
<li>Frequency 即词频率，表示此文件中包含了几个此词(Term)。</li>
</ul>
<p>所以对词(Term) “allow”来讲，总共有两篇文档包含此词(Term)，从而词(Term)后面的文档链表总共有两项，第一项表示包含“allow”的第一篇文档，即1号文档，此文档中，“allow”出现了2次，第二项表示包含“allow”的第二个文档，是2号文档，此文档中，“allow”出现了1次。</p>
<p>到此为止，索引已经创建好了，我们可以通过它很快的找到我们想要的文档。</p>
<p>而且在此过程中，我们惊喜地发现，搜索“drive”，“driving”，“drove”，“driven”也能够被搜到。因为在我们的索引中，“driving”，“drove”，“driven”都会经过语言处理而变成“drive”，在搜索时，如果您输入“driving”，输入的查询语句同样经过我们这里的一到三步，从而变为查询“drive”，从而可以搜索到想要的文档。</p>
<h2 id="-">三、如何对索引进行搜索？</h2>
<p>到这里似乎我们可以宣布“我们找到想要的文档了”。</p>
<p>然而事情并没有结束，找到了仅仅是全文检索的一个方面。不是吗？如果仅仅只有一个或十个文档包含我们查询的字符串，我们的确找到了。然而如果结果有一千个，甚至成千上万个呢？那个又是您最想要的文件呢？</p>
<p>打开Google吧，比如说您想在微软找份工作，于是您输入“Microsoft job”，您却发现总共有22600000个结果返回。好大的数字呀，突然发现找不到是一个问题，找到的太多也是一个问题。在如此多的结果中，如何将最相关的放在最前面呢？</p>
<p><a href="&quot;clip_image002[4]&quot;">![clip_image002[4]</a>](<a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/clip_image0024.jpg" target="_blank">http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/clip_image0024.jpg</a>)</p>
<p>当然Google做的很不错，您一下就找到了jobs at Microsoft。想象一下，如果前几个全部是“Microsoft does a good job at software industry…”将是多么可怕的事情呀。</p>
<p>如何像Google一样，在成千上万的搜索结果中，找到和查询语句最相关的呢？</p>
<p>如何判断搜索出的文档和查询语句的相关性呢？</p>
<p>这要回到我们第三个问题：如何对索引进行搜索？</p>
<p>搜索主要分为以下几步：</p>
<h3 id="-"><strong>第一步：用户输入查询语句。</strong></h3>
<p>查询语句同我们普通的语言一样，也是有一定语法的。</p>
<p>不同的查询语句有不同的语法，如SQL语句就有一定的语法。</p>
<p>查询语句的语法根据全文检索系统的实现而不同。最基本的有比如：AND, OR, NOT等。</p>
<p>举个例子，用户输入语句：lucene AND learned NOT hadoop。</p>
<p>说明用户想找一个包含lucene和learned然而不包括hadoop的文档。</p>
<h3 id="-"><strong>第二步：对查询语句进行词法分析，语法分析，及语言处理。</strong></h3>
<p>由于查询语句有语法，因而也要进行语法分析，语法分析及语言处理。</p>
<p><strong>1. 词法分析主要用来识别单词和关键字。</strong></p>
<p>如上述例子中，经过词法分析，得到单词有lucene，learned，hadoop, 关键字有AND, NOT。</p>
<p>如果在词法分析中发现不合法的关键字，则会出现错误。如lucene AMD learned，其中由于AND拼错，导致AMD作为一个普通的单词参与查询。</p>
<p><strong>2. 语法分析主要是根据查询语句的语法规则来形成一棵语法树。</strong></p>
<p>如果发现查询语句不满足语法规则，则会报错。如lucene NOT AND learned，则会出错。</p>
<p>如上述例子，lucene AND learned NOT hadoop形成的语法树如下：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/%E8%AF%AD%E6%B3%95%E6%A0%91_2.jpg" target="_blank"><img src="&quot;语法树&quot;" alt="语法树"></a></p>
<p><strong>3. 语言处理同索引过程中的语言处理几乎相同。</strong></p>
<p>如learned变成learn等。</p>
<p>经过第二步，我们得到一棵经过语言处理的语法树。</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/%E8%AF%AD%E6%B3%95%E6%A0%911_2.jpg" target="_blank"><img src="&quot;语法树1&quot;" alt="语法树1"></a></p>
<h3 id="-"><strong>第三步：搜索索引，得到符合语法树的文档。</strong></h3>
<p>此步骤有分几小步：</p>
<ol>
<li>首先，在反向索引表中，分别找出包含lucene，learn，hadoop的文档链表。<em>**</em></li>
<li>其次，对包含lucene，learn的链表进行合并操作，得到既包含lucene又包含learn的文档链表。<em>**</em></li>
<li>然后，将此链表与hadoop的文档链表进行差操作，去除包含hadoop的文档，从而得到既包含lucene又包含learn而且不包含hadoop的文档链表。<em>**</em></li>
<li>此文档链表就是我们要找的文档。</li>
</ol>
<h3 id="-"><strong>第四步：根据得到的文档和查询语句的相关性，对结果进行排序。</strong></h3>
<p>虽然在上一步，我们得到了想要的文档，然而对于查询结果应该按照与查询语句的相关性进行排序，越相关者越靠前。</p>
<p>如何计算文档和查询语句的相关性呢？</p>
<p>不如我们把查询语句看作一片短小的文档，对文档与文档之间的相关性(relevance)进行打分(scoring)，分数高的相关性好，就应该排在前面。</p>
<p>那么又怎么对文档之间的关系进行打分呢？</p>
<p><strong>这可不是一件容易的事情，首先我们看一看判断人之间的关系吧。</strong></p>
<p><strong>首先</strong>看一个人，往往有很多<strong>要素</strong>，如性格，信仰，爱好，衣着，高矮，胖瘦等等。</p>
<p><strong>其次</strong>对于人与人之间的关系，<strong>不同的要素重要性不同</strong>，性格，信仰，爱好可能重要些，衣着，高矮，胖瘦可能就不那么重要了，所以具有相同或相似性格，信仰，爱好的人比较容易成为好的朋友，然而衣着，高矮，胖瘦不同的人，也可以成为好的朋友。</p>
<p>因而判断人与人之间的关系，<strong>首先要找出哪些要素对人与人之间的关系最重要</strong>，比如性格，信仰，爱好。<strong>其次要判断两个人的这些要素之间的关系</strong>，比如一个人性格开朗，另一个人性格外向，一个人信仰佛教，另一个信仰上帝，一个人爱好打篮球，另一个爱好踢足球。我们发现，两个人在性格方面都很积极，信仰方面都很善良，爱好方面都爱运动，因而两个人关系应该会很好。</p>
<p><strong>我们再来看看公司之间的关系吧。</strong></p>
<p><strong>首先</strong>看一个公司，有很多人组成，如总经理，经理，首席技术官，普通员工，保安，门卫等。</p>
<p><strong>其次对于公司与公司之间的关系，不同的人重要性不同</strong>，总经理，经理，首席技术官可能更重要一些，普通员工，保安，门卫可能较不重要一点。所以如果两个公司总经理，经理，首席技术官之间关系比较好，两个公司容易有比较好的关系。然而一位普通员工就算与另一家公司的一位普通员工有血海深仇，怕也难影响两个公司之间的关系。</p>
<p>因而判断公司与公司之间的关系，<strong>首先要找出哪些人对公司与公司之间的关系最重要</strong>，比如总经理，经理，首席技术官。<strong>其次要判断这些人之间的关系</strong>，不如两家公司的总经理曾经是同学，经理是老乡，首席技术官曾是创业伙伴。我们发现，两家公司无论总经理，经理，首席技术官，关系都很好，因而两家公司关系应该会很好。</p>
<p>分析了两种关系，下面看一下<strong>如何判断文档之间的关系</strong>了。</p>
<p><strong>首先，一个文档有很多词(Term)组成</strong>，如search, lucene, full-text, this, a, what等。</p>
<p><strong>其次对于文档之间的关系，不同的Term重要性不同</strong>，比如对于本篇文档，search, Lucene, full-text就相对重要一些，this, a , what可能相对不重要一些。所以如果两篇文档都包含search, Lucene，fulltext，这两篇文档的相关性好一些，然而就算一篇文档包含this, a, what，另一篇文档不包含this, a, what，也不能影响两篇文档的相关性。</p>
<p>因而判断文档之间的关系，首先找出哪些词(Term)对文档之间的关系最重要，如search, Lucene, fulltext。然后判断这些词(Term)之间的关系。</p>
<p><strong>找出词(Term)**</strong>对文档的重要性的过程称为计算词的权重(Term weight)<strong>**的过程。</strong></p>
<p>计算词的权重(term weight)有两个参数，第一个是词(Term)，第二个是文档(Document)。</p>
<p>词的权重(Term weight)表示此词(Term)在此文档中的重要程度，越重要的词(Term)有越大的权重(Term weight)，因而在计算文档之间的相关性中将发挥更大的作用。</p>
<p><strong>判断词(Term)**</strong>之间的关系从而得到文档相关性的过程应用一种叫做向量空间模型的算法(Vector Space Model)<strong>**。</strong></p>
<hr>
<p>下面仔细分析一下这两个过程：</p>
<h3 id="-1-term-weight-"><strong>1. 计算权重(Term weight)的过程。</strong></h3>
<p>影响一个词(Term)在一篇文档中的重要性主要有两个因素：</p>
<ul>
<li>Term Frequency (tf)：即此Term在此文档中出现了多少次。tf 越大说明越重要。</li>
<li>Document Frequency (df)：即有多少文档包含次Term。df 越大说明越不重要。</li>
</ul>
<p>容易理解吗？词(Term)在文档中出现的次数越多，说明此词(Term)对该文档越重要，如“搜索”这个词，在本文档中出现的次数很多，说明本文档主要就是讲这方面的事的。然而在一篇英语文档中，this出现的次数更多，就说明越重要吗？不是的，这是由第二个因素进行调整，第二个因素说明，有越多的文档包含此词(Term), 说明此词(Term)太普通，不足以区分这些文档，因而重要性越低。</p>
<p>这也如我们程序员所学的技术，对于程序员本身来说，这项技术掌握越深越好（掌握越深说明花时间看的越多，tf越大），找工作时越有竞争力。然而对于所有程序员来说，这项技术懂得的人越少越好（懂得的人少df小），找工作越有竞争力。人的价值在于不可替代性就是这个道理。</p>
<p>道理明白了，我们来看看公式：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/image_6.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/image_4.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p>这仅仅只term weight计算公式的简单典型实现。实现全文检索系统的人会有自己的实现，Lucene就与此稍有不同。</p>
<h3 id="-2-term-vsm-"><strong>2. 判断Term之间的关系从而得到文档相关性的过程，也即向量空间模型的算法(VSM)。</strong></h3>
<p>我们把文档看作一系列词(Term)，每一个词(Term)都有一个权重(Term weight)，不同的词(Term)根据自己在文档中的权重来影响文档相关性的打分计算。</p>
<p>于是我们把所有此文档中词(term)的权重(term weight) 看作一个向量。</p>
<p>Document = {term1, term2, …… ,term N}</p>
<p>Document Vector = {weight1, weight2, …… ,weight N}</p>
<p>同样我们把查询语句看作一个简单的文档，也用向量来表示。</p>
<p>Query = {term1, term 2, …… , term N}</p>
<p>Query Vector = {weight1, weight2, …… , weight N}</p>
<p>我们把所有搜索出的文档向量及查询向量放到一个N维空间中，每个词(term)是一维。</p>
<p>如图：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/vsm_2.jpg" target="_blank"><img src="&quot;vsm&quot;" alt="vsm"></a></p>
<p>我们认为两个向量之间的夹角越小，相关性越大。</p>
<p>所以我们计算夹角的余弦值作为相关性的打分，夹角越小，余弦值越大，打分越高，相关性越大。</p>
<p>有人可能会问，查询语句一般是很短的，包含的词(Term)是很少的，因而查询向量的维数很小，而文档很长，包含词(Term)很多，文档向量维数很大。你的图中两者维数怎么都是N呢？</p>
<p>在这里，既然要放到相同的向量空间，自然维数是相同的，不同时，取二者的并集，如果不含某个词(Term)时，则权重(Term Weight)为0。</p>
<p>相关性打分公式如下：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/image11.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p>举个例子，查询语句有11个Term，共有三篇文档搜索出来。其中各自的权重(Term weight)，如下表格。
t1</p>
<p>t2</p>
<p>t3</p>
<p>t4</p>
<p>t5</p>
<p>t6</p>
<p>t7</p>
<p>t8</p>
<p>t9</p>
<p>t10</p>
<p>t11 D1</p>
<p>0</p>
<p>0</p>
<p>.477</p>
<p>0</p>
<p>.477</p>
<p>.176</p>
<p>0</p>
<p>0</p>
<p>0</p>
<p>.176</p>
<p>0 D2</p>
<p>0</p>
<p>.176</p>
<p>0</p>
<p>.477</p>
<p>0</p>
<p>0</p>
<p>0</p>
<p>0</p>
<p>.954</p>
<p>0</p>
<p>.176 D3</p>
<p>0</p>
<p>.176</p>
<p>0</p>
<p>0</p>
<p>0</p>
<p>.176</p>
<p>0</p>
<p>0</p>
<p>0</p>
<p>.176</p>
<p>.176 Q</p>
<p>0</p>
<p>0</p>
<p>0</p>
<p>0</p>
<p>0</p>
<p>.176</p>
<p>0</p>
<p>0</p>
<p>.477</p>
<p>0</p>
<p>.176</p>
<p>于是计算，三篇文档同查询语句的相关性打分分别为：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/image17.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/image20.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/image23.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p>于是文档二相关性最高，先返回，其次是文档一，最后是文档三。</p>
<p>到此为止，我们可以找到我们最想要的文档了。</p>
<p>说了这么多，其实还没有进入到Lucene，而仅仅是信息检索技术(Information retrieval)中的基本理论，然而当我们看过Lucene后我们会发现，Lucene是对这种基本理论的一种基本的的实践。所以在以后分析Lucene的文章中，会常常看到以上理论在Lucene中的应用。</p>
<p>在进入Lucene之前，对上述索引创建和搜索过程所一个总结，如图：</p>
<p>此图参照<a href="http://www.lucene.com.cn/about.htm" target="_blank"><a href="http://www.lucene.com.cn/about.htm">http://www.lucene.com.cn/about.htm</a></a>中文章《开放源代码的全文检索引擎Lucene》</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/185c4e9316f3_147FA/clip_image016_2.jpg" target="_blank"><img src="&quot;clip_image016&quot;" alt="clip_image016"></a></p>
<p><strong>1. 索引过程：</strong></p>
<p><strong>1)**</strong>有一系列被索引文件**</p>
<p><strong>2)**</strong>被索引文件经过语法分析和语言处理形成一系列词(Term)<strong>**。</strong></p>
<p><strong>3)**</strong>经过索引创建形成词典和反向索引表。**</p>
<p><strong>4)**</strong>通过索引存储将索引写入硬盘。**</p>
<p><strong>2. 搜索过程：</strong></p>
<p><strong>a)**</strong>用户输入查询语句。**</p>
<p><strong>b)**</strong>对查询语句经过语法分析和语言分析得到一系列词(Term)<strong>**。</strong></p>
<p><strong>c)**</strong>通过语法分析得到一个查询树。**</p>
<p><strong>d)**</strong>通过索引存储将索引读入到内存。**</p>
<p><strong>e)**</strong>利用查询树搜索索引，从而得到每个词(Term)<strong>**的文档链表，对文档链表进行交，差，并得到结果文档。</strong></p>
<p><strong>f)**</strong>将搜索到的结果文档对查询的相关性进行排序。**</p>
<p><strong>g)**</strong>返回查询结果给用户。**</p>
<p>下面我们可以进入Lucene的世界了。</p>
<p>另：</p>
<p>CSDN中此文章链接为<a href="http://blog.csdn.net/forfuture1978/archive/2009/10/22/4711308.aspx" target="_blank"><a href="http://blog.csdn.net/forfuture1978/archive/2009/10/22/4711308.aspx">http://blog.csdn.net/forfuture1978/archive/2009/10/22/4711308.aspx</a></a></p>
<p>Javaeye中此文章链接为<a href="http://forfuture1978.javaeye.com/blog/546771" target="_blank"><a href="http://forfuture1978.javaeye.com/blog/546771">http://forfuture1978.javaeye.com/blog/546771</a></a></p>
<h3 id="-">评论</h3>
<p><a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#1766929" target="_blank">/#1楼</a><a href=""></a>2010-02-23 08:36<a href="http://www.cnblogs.com/liuc/">Framework</a> <a href="http://space.cnblogs.com/msg/send/Framework" title="发送站内短消息"></a></p>
<p>有深度</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://pic.cnitblog.com/face/u102545.png" target="_blank">http://pic.cnitblog.com/face/u102545.png</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#1874521" target="_blank">/#2楼</a><a href=""></a>2010-07-19 14:43<a href="http://www.cnblogs.com/a-peng/">a-peng</a> <a href="http://space.cnblogs.com/msg/send/a-peng" title="发送站内短消息"></a></p>
<p>谢谢楼主这么好的文章，有两个地方有点不明白。</p>
<ol>
<li>计算权重的公式
w = tf /<em> log(n / df)
log没有底数不知道要怎么计算
比如
n = 8 即8个文档
df = 2 即包含该词的文档有2个
tf = 5 即该词在该文档中出现5次
w = 5 /</em> log4
log没有底数，结果出不来。</li>
<li>举个例子，查询语句有11个Term，共有三篇文档搜索出来。其中各自的权重(Term weight)，如下表格。
表格中最后一行，查询语句中词的权重不知是如何计算出来的，是D1+D2+D3吗，不像，为什么像D2，D3中都是176而Q中确是0呢?</li>
</ol>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#1874557" target="_blank">/#3楼</a><a href=""></a>2010-07-19 15:12<a href="http://www.cnblogs.com/a-peng/">a-peng</a> <a href="http://space.cnblogs.com/msg/send/a-peng" title="发送站内短消息"></a></p>
<p>t2与t11
的数据是一样的都是0, 176, 176可是Q在t2与t11的结果确完全不一样，很困惑。</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2218247" target="_blank">/#4楼</a><a href=""></a>2011-10-12 16:51<a href="http://home.cnblogs.com/u/340163/">林伟健</a> <a href="http://space.cnblogs.com/msg/send/%e6%9e%97%e4%bc%9f%e5%81%a5" title="发送站内短消息"></a></p>
<p><strong>Q的权重怎么来？</strong></p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2218466" target="_blank">/#5楼</a><a href=""></a>[楼主] 2011-10-12 22:33<a href="http://www.cnblogs.com/forfuture1978/">觉先</a> <a href="http://space.cnblogs.com/msg/send/%e8%a7%89%e5%85%88" title="发送站内短消息"></a></p>
<p><a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#1874557" title="查看引用原文" target="_blank">引用</a>a-peng：
t2与t11
的数据是一样的都是0, 176, 176可是Q在t2与t11的结果确完全不一样，很困惑。
不好意思，可能是笔误了。不是查询语句中有11个Term，而是整个向量空间有11个Term。
为0的可以认为此D或者Q不包含此Term。
在这个例子中，Query包含三个Term (t6, t9, t11)，
D1 (t3, t5, t6, t10),
D2 (t2, t4, t9, t11)
D3 (t2, t6, t10, t11)
log的底数可以不同的系统根据自己想选取的平滑程度选取。
在这个例子中，底数是10.
n = 3
如果tf = 1(此文章中此Term出现了1次), df=2(两篇文章包含此Term)，
则1 /<em> log(3/2) = 0.176
如果tf = 1, df = 1, 则 1 /</em> log3 = 0.477
如果tf = 2, df = 1, 则 2 /* log3 = 0.954</p>
<p><a href="">支持(1)</a><a href="">反对(0)</a>
<a href="http://pic.cnitblog.com/face/u103165.jpg" target="_blank">http://pic.cnitblog.com/face/u103165.jpg</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2309807" target="_blank">/#6楼</a><a href=""></a>2012-02-16 10:49<a href="http://home.cnblogs.com/u/330198/">珍帅久久</a> <a href="http://space.cnblogs.com/msg/send/%e7%8f%8d%e5%b8%85%e4%b9%85%e4%b9%85" title="发送站内短消息"></a></p>
<p>很有深度，但又通俗易懂，不可多得的好文章啊。</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2324373" target="_blank">/#7楼</a><a href=""></a>2012-03-06 21:32<a href="http://home.cnblogs.com/u/279684/">waceunmn</a> <a href="http://space.cnblogs.com/msg/send/waceunmn" title="发送站内短消息"></a></p>
<p>不错的内容啊</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2380300" target="_blank">/#8楼</a><a href=""></a>2012-05-18 22:52<a href="http://www.cnblogs.com/scncpb/">scncpb</a> <a href="http://space.cnblogs.com/msg/send/scncpb" title="发送站内短消息"></a></p>
<p>谢谢，讲的真详细，把具体的过程讲的极其清楚。。</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2410964" target="_blank">/#9楼</a><a href=""></a>2012-06-29 17:32<a href="http://www.cnblogs.com/pyt5208/">潘奕涛</a> <a href="http://space.cnblogs.com/msg/send/%e6%bd%98%e5%a5%95%e6%b6%9b" title="发送站内短消息"></a></p>
<p>很好很强大</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://pic.cnitblog.com/face/u16379.jpg" target="_blank">http://pic.cnitblog.com/face/u16379.jpg</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2469601" target="_blank">/#10楼</a><a href=""></a>2012-09-11 13:50<a href="http://www.cnblogs.com/jiuyi/">久依</a> <a href="http://space.cnblogs.com/msg/send/%e4%b9%85%e4%be%9d" title="发送站内短消息"></a></p>
<p>内容非常详细，就是我的数据不怎么好嘿嘿！</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2470199" target="_blank">/#11楼</a><a href=""></a>2012-09-11 22:16<a href="http://www.cnblogs.com/androidapp/">心有多大，舞台就有多大</a> <a href="http://space.cnblogs.com/msg/send/%e5%bf%83%e6%9c%89%e5%a4%9a%e5%a4%a7%ef%bc%8c%e8%88%9e%e5%8f%b0%e5%b0%b1%e6%9c%89%e5%a4%9a%e5%a4%a7" title="发送站内短消息"></a></p>
<p>非常好，草率的看完了</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2567509" target="_blank">/#12楼</a><a href=""></a>2012-11-30 16:53<a href="http://home.cnblogs.com/u/72579/">流民无产者</a> <a href="http://space.cnblogs.com/msg/send/%e6%b5%81%e6%b0%91%e6%97%a0%e4%ba%a7%e8%80%85" title="发送站内短消息"></a></p>
<p>非常好的文章，谢谢博主的分享。
刚开始也没看懂Query的weight如何计算的，后来看了回复就明白了。
只是还有一点不明白的地方，希望博主解答。
tf和df的计算：tf表示的term在一个doc里的权重值。但是df对于一次查询是个常量值，不知道计算有何意义。我觉得df的值对于查询的doc排序没有影响。</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2577177" target="_blank">/#13楼</a><a href=""></a>2012-12-13 18:29<a href="http://www.cnblogs.com/ttltry-air/">coodoing</a> <a href="http://space.cnblogs.com/msg/send/coodoing" title="发送站内短消息"></a></p>
<p>很详细 受用</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://pic.cnitblog.com/face/u74734.png?id=23111117" target="_blank">http://pic.cnitblog.com/face/u74734.png?id=23111117</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2610299" target="_blank">/#14楼</a><a href=""></a>2013-01-29 20:04<a href="http://www.cnblogs.com/hemingwang0902/">星情</a> <a href="http://space.cnblogs.com/msg/send/%e6%98%9f%e6%83%85" title="发送站内短消息"></a></p>
<p>总结得很全面且有深度</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://pic.cnitblog.com/face/u70745.jpg?id=22103524" target="_blank">http://pic.cnitblog.com/face/u70745.jpg?id=22103524</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2657314" target="_blank">/#15楼</a><a href=""></a>2013-04-14 21:02<a href="http://www.cnblogs.com/liubaoshun/">IoT小菜</a> <a href="http://space.cnblogs.com/msg/send/IoT%e5%b0%8f%e8%8f%9c" title="发送站内短消息"></a></p>
<p><a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#1874521" title="查看所回复的评论" target="_blank">@</a>a-peng
计算机里面权重默认是2</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://pic.cnitblog.com/face/456333/20130617210829.png" target="_blank">http://pic.cnitblog.com/face/456333/20130617210829.png</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html#2666068" target="_blank">/#16楼</a><a href=""></a>26660682013/4/25 11:27:402013-04-25 11:27<a href="http://www.cnblogs.com/echofool/">Echofool</a> <a href="http://space.cnblogs.com/msg/send/Echofool" title="发送站内短消息"></a></p>
<p>这么好的文章，为什么没人评论呢？感谢楼主分享。受用了</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
来源： &lt;<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html" target="_blank">Lucene学习总结之一：全文检索的基本原理 - 觉先 - 博客园</a>&gt; <a href=""></a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/lucene/">lucene</a></li></span></span> | <span class="tags">Tagged <a href="/tags/lucene/" class="label label-primary">lucene</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:28"datetime="2014-03-07 09:54:28"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-lucene--Lucene学习总结之一：全文检索的基本原理/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-lucene--Lucene学习总结之一：全文检索的基本原理" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-lucene--Lucene学习总结之二：Lucene的总体架构/">Lucene学习总结之二：Lucene的总体架构</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:28.000Z"> <a href="/2014/02/02/2014-02-02-lucene--Lucene学习总结之二：Lucene的总体架构/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="lucene-lucene-">Lucene学习总结之二：Lucene的总体架构</h1>
<p><a href=""></a></p>
<h1 id="-http-www-cnblogs-com-forfuture1978-"><a href="http://www.cnblogs.com/forfuture1978/" target="_blank">觉先</a></h1>
<p>  <a href="http://www.cnblogs.com/" target="_blank">博客园</a> :: <a href="http://www.cnblogs.com/forfuture1978/" target="_blank">首页</a> :: <a href="http://q.cnblogs.com/" target="_blank">博问</a> :: <a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a> :: <a href="http://www.cnblogs.com/forfuture1978/admin/EditPosts.aspx?opt=1" target="_blank">新随笔</a> :: <a href="http://space.cnblogs.com/msg/send/%e8%a7%89%e5%85%88" target="_blank">联系</a> :: <a href="http://www.cnblogs.com/forfuture1978/rss" target="_blank">订阅</a> <a href="http://www.cnblogs.com/forfuture1978/rss" target="_blank"><img src="" alt="订阅"></a> :: <a href="http://www.cnblogs.com/forfuture1978/admin/EditPosts.aspx" target="_blank">管理</a> :: <img src="" alt="">   130 随笔 :: 0 文章 :: 544 评论 :: 0 引用
<a href="">&lt;</a>2009年12月<a href="">&gt;</a>日一二三四五六293012345678910111213<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14.html" target="_blank">14</a>151617<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/18.html" target="_blank">18</a>1920<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/21.html" target="_blank">21</a>22232425262728293031123456789</p>
<h3 id="-">公告</h3>
<p>昵称：<a href="http://home.cnblogs.com/u/forfuture1978/" target="_blank">觉先</a>
园龄：<a href="http://home.cnblogs.com/u/forfuture1978/" title="入园时间：2009-12-10" target="_blank">3年7个月</a>
荣誉：<a href="http://www.cnblogs.com/expert/" target="_blank">推荐博客</a>
粉丝：<a href="http://home.cnblogs.com/u/forfuture1978/followers/" target="_blank">560</a>
关注：<a href="http://home.cnblogs.com/u/forfuture1978/followees/" target="_blank">3</a></p>
<p><a href="">+加关注</a></p>
<h3 id="-">搜索</h3>
<h3 id="-">常用链接</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/MyPosts.html" target="_blank">我的随笔</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/MyComments.html" target="_blank">我的评论</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/OtherPosts.html" title="我发表过评论的随笔" target="_blank">我的参与</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/RecentComments.html" target="_blank">最新评论</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/tag/" target="_blank">我的标签</a></li>
</ul>
<h3 id="-">随笔分类</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/category/300670.html" target="_blank">Hadoop原理与代码分析(7)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/300669.html" target="_blank">IT外企那点儿事(12)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/345798.html" target="_blank">Java(2)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/345797.html" target="_blank">Linux(14)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/300665.html" target="_blank">Lucene原理与代码分析(38)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/300666.html" target="_blank">长尾理论(16)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/345794.html" target="_blank">管理学(10)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/345800.html" target="_blank">经济学(4)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/345796.html" target="_blank">算法(1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/345795.html" target="_blank">闲话IT业(3)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/300667.html" target="_blank">心理学与管理学效应(9)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/300668.html" target="_blank">组织行为学(15)</a></li>
</ul>
<h3 id="-">随笔档案</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/11.html" target="_blank">2012年11月 (3)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/01.html" target="_blank">2012年1月 (5)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2011/12.html" target="_blank">2011年12月 (6)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2011/10.html" target="_blank">2011年10月 (3)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2011/09.html" target="_blank">2011年9月 (1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/11.html" target="_blank">2010年11月 (8)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/10.html" target="_blank">2010年10月 (1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/09.html" target="_blank">2010年9月 (1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/08.html" target="_blank">2010年8月 (1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/07.html" target="_blank">2010年7月 (1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/06.html" target="_blank">2010年6月 (6)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/05.html" target="_blank">2010年5月 (22)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/04.html" target="_blank">2010年4月 (18)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/03.html" target="_blank">2010年3月 (8)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/02.html" target="_blank">2010年2月 (39)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/01.html" target="_blank">2010年1月 (1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2009/12.html" target="_blank">2009年12月 (6)</a></li>
</ul>
<h3 id="-">相册</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/gallery/247104.html" target="_blank">IT外企那点儿事</a></li>
</ul>
<h3 id="-">最新评论</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/11/26/2788610.html#2727561" target="_blank">1. Re:IT外企那点儿事(12)：也说跳槽</a></li>
<li>楼主怎么之后没有更新hadoop的相关信息了呢？是没有再研究了吗？</li>
<li>--lyeoswu</li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/06/13/1757479.html#2713121" target="_blank">2. Re:Lucene 原理与代码分析完整版</a></li>
<li>提个建议，你生成的pdf中没有目录，影响阅读，用office转制的过程中其实设置一下即可，方便大众嘛~，还望能发我一份，谢谢！
sendreams@hotmail.com</li>
<li>--sendreams</li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/11/26/2788610.html#2712415" target="_blank">3. Re:IT外企那点儿事(12)：也说跳槽</a></li>
<li><a href="&quot;查看所回复的评论&quot;">@</a>mojunbin
现在这公司，本来做的Siverlight，我进去后没多久就转JAVA了，最近在公司折腾JAVA的一些东西，业余时间玩玩游戏，看看CLR、并折腾linux。现在观点有所转变，觉得学技术更多的是为了扩宽思维、提高眼界</li>
<li>--峰顶飞龙</li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/11/26/2788610.html#2711923" target="_blank">4. Re:IT外企那点儿事(12)：也说跳槽</a></li>
<li><a href="&quot;查看所回复的评论&quot;">@</a>峰顶飞龙
您的经历和我差不多，呵呵。不晓得现在兄弟在搞C/C++呢？</li>
<li>--mojunbin</li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/11/23/1884967.html#2708814" target="_blank">5. Re:Hadoop学习总结之五：Hadoop的运行痕迹</a></li>
<li>楼主你好，在远程调试MapReduce时，本地代码进入不了自定义的job类，而是进入到Credentials class中，此类在hadoop-core-1.0.4.jar中，请问楼主在调试过程可否遇到此问题？</li>
<li>--彭莉珊</li>
</ul>
<h3 id="-">阅读排行榜</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/08/04/1791660.html" target="_blank">1. IT外企那点儿事(8)：又是一年加薪时(26798)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/06/13/1757479.html" target="_blank">2. Lucene 原理与代码分析完整版(25615)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/02/23/1671909.html" target="_blank">3. 从技术生命周期看IT历史(20877)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/21/1628546.html" target="_blank">4. 101个著名的管理学及心理学效应(20826)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/11/14/1877086.html" target="_blank">5. Hadoop学习总结之三：Map-Reduce入门(18674)</a></li>
</ul>
<h3 id="-">评论排行榜</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/06/13/1757479.html" target="_blank">1. Lucene 原理与代码分析完整版(68)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/05/05/1727644.html" target="_blank">2. IT外企那点儿事(4)：激动人心的入职演讲(39)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/05/13/1734162.html" target="_blank">3. IT外企那点儿事(6)：管理路线和技术路线(37)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/08/04/1791660.html" target="_blank">4. IT外企那点儿事(8)：又是一年加薪时(35)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/11/26/2788610.html" target="_blank">5. IT外企那点儿事(12)：也说跳槽(33)</a></li>
</ul>
<h3 id="-">推荐排行榜</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/06/13/1757479.html" target="_blank">1. Lucene 原理与代码分析完整版(55)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/05/03/1726200.html" target="_blank">2. IT外企那点儿事(3)：奇怪的面试(39)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/08/04/1791660.html" target="_blank">3. IT外企那点儿事(8)：又是一年加薪时(36)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/11/26/2788610.html" target="_blank">4. IT外企那点儿事(12)：也说跳槽(34)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/05/13/1734162.html" target="_blank">5. IT外企那点儿事(6)：管理路线和技术路线(27)</a></li>
</ul>
<p><a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623596.html" target="_blank">Lucene学习总结之二：Lucene的总体架构</a></p>
<p>Lucene总的来说是：</p>
<ul>
<li>一个高效的，可扩展的，全文检索库。</li>
<li>全部用Java实现，无须配置。</li>
<li>仅支持纯文本文件的索引(Indexing)和搜索(Search)。</li>
<li>不负责由其他格式的文件抽取纯文本文件，或从网络中抓取文件的过程。</li>
</ul>
<p>在Lucene in action中，Lucene 的构架和过程如下图，</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/LuceneLucene_FCFA/image_2.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p><strong>说明Lucene**</strong>是有索引和搜索的两个过程，包含索引创建，索引，搜索三个要点。**</p>
<p>让我们更细一些看Lucene的各组件：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/LuceneLucene_FCFA/lucene  zong ti jia gou_2.jpg" target="_blank"><img src="&quot;lucene  zong ti jia gou&quot;" alt="lucene  zong ti jia gou"></a></p>
<ul>
<li><strong>被索引的文档用Document对象**</strong>表示。**</li>
<li><strong>IndexWriter**</strong>通过函数addDocument<strong>**将文档添加到索引中，实现创建索引的过程。</strong></li>
<li><strong>Lucene**</strong>的索引是应用反向索引。**</li>
<li><strong>当用户有请求时，Query**</strong>代表用户的查询语句。**</li>
<li><strong>IndexSearcher**</strong>通过函数search<strong><strong>搜索Lucene Index</strong></strong>。**</li>
<li><strong>IndexSearcher**</strong>计算term weight<strong><strong>和score</strong></strong>并且将结果返回给用户。**</li>
<li><strong>返回给用户的文档集合用TopDocsCollector**</strong>表示。**</li>
</ul>
<p>那么如何应用这些组件呢？</p>
<p>让我们再详细到对Lucene API 的调用实现索引和搜索过程。</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/LuceneLucene_FCFA/using lucene_2.jpg" target="_blank"><img src="&quot;using lucene&quot;" alt="using lucene"></a></p>
<ul>
<li><p><strong>索引过程如下：</strong></p>
</li>
<li><p><strong>创建一个IndexWriter**</strong>用来写索引文件，它有几个参数，INDEX_DIR<strong><strong>就是索引文件所存放的位置，Analyzer</strong></strong>便是用来对文档进行词法分析和语言处理的。**</p>
</li>
<li><strong>创建一个Document**</strong>代表我们要索引的文档。**</li>
<li><strong>将不同的Field**</strong>加入到文档中。我们知道，一篇文档有多种信息，如题目，作者，修改时间，内容等。不同类型的信息用不同的Field<strong><strong>来表示，在本例子中，一共有两类信息进行了索引，一个是文件路径，一个是文件内容。其中FileReader</strong></strong>的SRC_FILE<strong>**就表示要索引的源文件。</strong></li>
<li><strong>IndexWriter**</strong>调用函数addDocument<strong>**将索引写到索引文件夹中。</strong></li>
<li><p><strong>搜索过程如下：</strong></p>
</li>
<li><p><strong>IndexReader**</strong>将磁盘上的索引信息读入到内存，INDEX_DIR<strong>**就是索引文件存放的位置。</strong></p>
</li>
<li><strong>创建IndexSearcher**</strong>准备进行搜索。**</li>
<li><strong>创建Analyer**</strong>用来对查询语句进行词法分析和语言处理。**</li>
<li><strong>创建QueryParser**</strong>用来对查询语句进行语法分析。**</li>
<li><strong>QueryParser**</strong>调用parser<strong><strong>进行语法分析，形成查询语法树，放到Query</strong></strong>中。**</li>
<li><strong>IndexSearcher**</strong>调用search<strong><strong>对查询语法树Query</strong></strong>进行搜索，得到结果TopScoreDocCollector<strong>**。</strong></li>
</ul>
<p>以上便是Lucene API函数的简单调用。</p>
<p>然而当进入Lucene的源代码后，发现Lucene有很多包，关系错综复杂。</p>
<p>然而通过下图，我们不难发现，Lucene的各源码模块，都是对普通索引和搜索过程的一种实现。</p>
<p>此图是上一节介绍的全文检索的流程对应的Lucene实现的包结构。(参照<a href="http://www.lucene.com.cn/about.htm" target="_blank"><a href="http://www.lucene.com.cn/about.htm">http://www.lucene.com.cn/about.htm</a></a>中文章《开放源代码的全文检索引擎Lucene》)</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/LuceneLucene_FCFA/clip_image008_2.jpg" target="_blank"><img src="&quot;clip_image008&quot;" alt="clip_image008"></a></p>
<ul>
<li><strong>Lucene**</strong>的analysis<strong><strong>模块主要负责词法分析及语言处理而形成Term</strong></strong>。**</li>
<li><strong>Lucene**</strong>的index<strong><strong>模块主要负责索引的创建，里面有IndexWriter</strong></strong>。**</li>
<li><strong>Lucene**</strong>的store<strong>**模块主要负责索引的读写。</strong></li>
<li><strong>Lucene**</strong>的QueryParser<strong>**主要负责语法分析。</strong></li>
<li><strong>Lucene**</strong>的search<strong>**模块主要负责对索引的搜索。</strong></li>
<li><strong>Lucene**</strong>的similarity<strong>**模块主要负责对相关性打分的实现。</strong></li>
</ul>
<p>了解了Lucene的整个结构，我们便可以开始Lucene的源码之旅了。</p>
<p>另：</p>
<p>CSDN此文章链接为：<a href="http://blog.csdn.net/forfuture1978/archive/2009/10/30/4745802.aspx" target="_blank"><a href="http://blog.csdn.net/forfuture1978/archive/2009/10/30/4745802.aspx">http://blog.csdn.net/forfuture1978/archive/2009/10/30/4745802.aspx</a></a></p>
<p>Javaeye此文章链接为：<a href="http://forfuture1978.javaeye.com/blog/546808" target="_blank"><a href="http://forfuture1978.javaeye.com/blog/546808">http://forfuture1978.javaeye.com/blog/546808</a></a> </p>
<p>分类: <a href="http://www.cnblogs.com/forfuture1978/category/300665.html" target="_blank">Lucene原理与代码分析</a></p>
<p>绿色通道： <a href="">好文要顶</a> <a href="">关注我</a> <a href="">收藏该文</a><a href="http://space.cnblogs.com/msg/send/%e8%a7%89%e5%85%88" target="_blank">与我联系</a> <a href="&quot;分享至新浪微博&quot;"><img src="" alt=""></a>
<a href="http://home.cnblogs.com/u/forfuture1978/" target="_blank"><img src="" alt=""></a></p>
<p><a href="http://home.cnblogs.com/u/forfuture1978/" target="_blank">觉先</a>
<a href="http://home.cnblogs.com/u/forfuture1978/followees" target="_blank">关注 - 3</a>
<a href="http://home.cnblogs.com/u/forfuture1978/followers" target="_blank">粉丝 - 560</a></p>
<p>荣誉：<a href="http://www.cnblogs.com/expert/" target="_blank">推荐博客</a>
<a href="">+加关注</a></p>
<p>3</p>
<p>0
(请您对文章做出评价)</p>
<p><a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html" target="_blank">«</a> 上一篇：<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html" title="发布于2009-12-14 12:31" target="_blank">Lucene学习总结之一：全文检索的基本原理</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623597.html" target="_blank">»</a> 下一篇：<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623597.html" title="发布于2009-12-14 12:34" target="_blank">Lucene学习总结之三：Lucene的索引文件格式(1)</a>
posted on 2009-12-14 12:32 <a href="http://www.cnblogs.com/forfuture1978/" target="_blank">觉先</a> 阅读(7647) 评论(2) <a href="http://www.cnblogs.com/forfuture1978/admin/EditPosts.aspx?postid=1623596" target="_blank">编辑</a> <a href="">收藏</a></p>
<p><a href=""></a></p>
<h3 id="-">评论</h3>
<p><a href="">/#1楼</a><a href=""></a>  2010-02-23 10:33  <a href="http://www.cnblogs.com/xuanfeng/">xuanfeng</a> <a href="http://space.cnblogs.com/msg/send/xuanfeng" title="发送站内短消息" target="_blank"> </a></p>
<p>朋友,可不可以了解一下你是用什么工具画的图啊?</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a></p>
<p><a href="">/#2楼</a><a href=""></a>[楼主]17671232010/2/23 10:57:04  2010-02-23 10:57  <a href="http://www.cnblogs.com/forfuture1978/">觉先</a> <a href="http://space.cnblogs.com/msg/send/%e8%a7%89%e5%85%88" title="发送站内短消息" target="_blank"> </a></p>
<p><a href="&quot;查看所回复的评论&quot;">@</a>xuanfeng
比较复杂的图用visio，
简单的图可以用ppt，然后另存为jpg</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://pic.cnitblog.com/face/u103165.jpg" target="_blank">http://pic.cnitblog.com/face/u103165.jpg</a></p>
<p><a href="">刷新评论</a><a href="">刷新页面</a><a href="">返回顶部</a></p>
<p>注册用户登录后才能发表评论，请 <a href="">登录</a> 或 <a href="">注册</a>，<a href="http://www.cnblogs.com/" target="_blank">访问</a>网站首页。
<a href="http://www.cnblogs.com/" title="程序员的网上家园" target="_blank">博客园首页</a><a href="http://q.cnblogs.com/" title="程序员问答社区" target="_blank">博问</a><a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">新闻</a><a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a><a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a><a href="http://kb.cnblogs.com/" target="_blank">知识库</a></p>
<p><strong>最新IT新闻</strong>:
· <a href="http://news.cnblogs.com/n/182453/" target="_blank">这四年 Google中国落寂了 刘允尽力了</a>
· <a href="http://news.cnblogs.com/n/182452/" target="_blank">在线课程“慕课”来袭 专家称大学应主动参与</a>
· <a href="http://news.cnblogs.com/n/182446/" target="_blank">告别编程课，MIT 展示自然语言编程</a>
· <a href="http://news.cnblogs.com/n/182445/" target="_blank">什么样的工程师才可能真正推动创新？</a>
· <a href="http://news.cnblogs.com/n/182444/" target="_blank">在线教育“钱途”光明？</a>
» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></p>
<p><strong>最新知识库文章</strong>:
· <a href="http://kb.cnblogs.com/page/141892/" target="_blank">阿里巴巴集团去IOE运动的思考与总结</a>
· <a href="http://kb.cnblogs.com/page/182265/" target="_blank">硅谷归来7点分享：创业者，做你自己</a>
· <a href="http://kb.cnblogs.com/page/182200/" target="_blank">我为什么不能坚持？</a>
· <a href="http://kb.cnblogs.com/page/168725/" target="_blank">成为高效程序员的7个重要习惯</a>
· <a href="http://kb.cnblogs.com/page/182047/" target="_blank">谈谈对BPM的理解</a>
» <a href="http://kb.cnblogs.com/" target="_blank">更多知识库文章...</a>
Powered by:
<a href="http://www.cnblogs.com/" target="_blank">博客园</a>
Copyright © 觉先</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/lucene/">lucene</a></li></span></span> | <span class="tags">Tagged <a href="/tags/lucene/" class="label label-primary">lucene</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:28"datetime="2014-03-07 09:54:28"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-lucene--Lucene学习总结之二：Lucene的总体架构/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-lucene--Lucene学习总结之二：Lucene的总体架构" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-架构师--构架师已死/">构架师已死</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:28.000Z"> <a href="/2014/02/02/2014-02-02-架构师--构架师已死/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-">构架师已死</h1>
<p>您还未登录！|<a href="https://passport.csdn.net/account/login" target="_blank">登录</a>|<a href="https://passport.csdn.net/account/register" target="_blank">注册</a>|<a href="https://passport.csdn.net/help/faq" target="_blank">帮助</a></p>
<ul>
<li><a href="http://www.csdn.net/" target="_blank">首页</a></li>
<li><a href="http://news.csdn.net/" target="_blank">业界</a></li>
<li><a href="http://mobile.csdn.net/" target="_blank">移动</a></li>
<li><a href="http://cloud.csdn.net/" target="_blank">云计算</a></li>
<li><a href="http://sd.csdn.net/" target="_blank">研发</a></li>
<li><a href="http://bbs.csdn.net/" target="_blank">论坛</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">博客</a></li>
<li><a href="http://download.csdn.net/" target="_blank">下载</a></li>
<li><h2 id="-"><a href="">更多</a></h2>
</li>
</ul>
<h1 id="-http-blog-csdn-net-cunruizhai-"><a href="http://blog.csdn.net/cunruizhai" target="_blank">方剑斌</a></h1>
<h2 id="-">不送不迎 真君子自来去 无晴无雨 大丈夫何逍遥</h2>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai?viewmode=contents" target="_blank"><img src="" alt="">目录视图</a></li>
<li><a href="http://blog.csdn.net/cunruizhai?viewmode=list" target="_blank"><img src="" alt="">摘要视图</a></li>
<li><a href="http://blog.csdn.net/cunruizhai/rss/list" target="_blank"><img src="" alt="">订阅</a>
<a href="https://code.csdn.net/blog/12" target="_blank">公告：博客新增直接引用代码功能</a>        <a href="http://www.csdn.net/article/2013-07-24/2816320" target="_blank">专访谭海燕：移动互联网开发的那些事</a>      <a href="http://blog.csdn.net/csdnproduct/article/details/9226265" target="_blank">CSDN博客频道自定义摘要、图片水印、热门标签等功能上线啦</a>      <a href="http://blog.csdn.net/blogdevteam/article/details/9136613" target="_blank">CSDN博客第二期云计算最佳博主评选</a>      <a href=""></a></li>
</ul>
<h3 id="-"><a href="">构架师已死</a></h3>
<p>分类： <a href="http://blog.csdn.net/cunruizhai/article/category/188552" target="_blank">随笔</a>  2006-06-12 00:24 8291人阅读 <a href="">评论</a>(33) <a href="&quot;收藏&quot;">收藏</a> <a href="&quot;举报&quot;">举报</a>
<a href="http://blog.csdn.net/tag/details.html?tag=%e5%b7%a5%e4%bd%9c" target="_blank">工作</a><a href="http://blog.csdn.net/tag/details.html?tag=struts" target="_blank">struts</a><a href="http://blog.csdn.net/tag/details.html?tag=spring" target="_blank">spring</a><a href="http://blog.csdn.net/tag/details.html?tag=%e9%9d%a2%e8%af%95" target="_blank">面试</a><a href="http://blog.csdn.net/tag/details.html?tag=%e6%95%99%e8%82%b2" target="_blank">教育</a><a href="http://blog.csdn.net/tag/details.html?tag=%e6%a1%86%e6%9e%b6" target="_blank">框架</a></p>
<p>2006年的职场出奇的冷清，相比前几年，简历的数量和质量都大为不如，很难得找到三年工作经验以上的人，有一个不是特别笨，就是特别怪。就是么，干得好谁没事换工作啊！Simon是一家外企软件公司的总经理，最近给这个问题愁坏了。项目一个接一个的接下来，人手越来越紧张。虽然Simon是个极限编程的粉丝，但也不得不批准了一份又一份的加班申请。HR经理把这个问题归结到房价上，他的妙论是“怕失业了还不上房款，不敢跳槽”。</p>
<p>这天，K项目组长Allen终于忍不住了，带了一个只有一年工作经验的小伙子要Simon面试，“很聪明！经验少了点。”</p>
<p>Simon皱了皱眉毛，说：“你不知道这个职位最低要求是三年工作经验吗？”</p>
<p>Allen说：“这已经是三个月里通过技术考试中最好的一个了，老大，试试吧。”Allen是Simon多年的哥们，比较随便。</p>
<p>抵到面子上来，Simon只好让Allen把小伙子带进来。</p>
<p>Simon的面试通常是三步曲：</p>
<p>问题一：你能说说毕业后的主要工作经历吗？</p>
<p>问题二：再说说你在公司的地位？</p>
<p>问题三：你的发展目标是什么？等回答后，比如说构架师，他就跟着问：想象一下你当构架师的一天，说给我听听？</p>
<p>小伙子回答第一问题很快很清楚，一年工作当然没什么东西。Simon觉得小伙子挺聪明。所以在小伙子回答了第二个问题后，问了一个发散性的问题：“你刚才说你在公司里处于中等水平，那比你差的人为什么会比你差呢？”</p>
<p>这个问题是个陷阱。</p>
<p>小伙子冒冒失失回答说：“我觉得他们每天工作是为工作而工作，工作没有责任感。”</p>
<p>Simon点点头说：“是吗？那真是糟糕的员工。那你刚好比糟糕的员工好一点了？”</p>
<p>小伙子的脸一下子红了，“我不是这个意思……”</p>
<p>“好了，那你说说比你好的人为什么比你强？”</p>
<p>“我觉得他非常努力，工作很多年了还在学习各种构架，水平很高。”于是Simon就问那最后一个问题。果然，小伙子回答的是要成为构架师。大概70％的人想成为构架师。但是构架师是什么呢？</p>
<p>Simon问道：“那你为什么要成为构架师呢？”</p>
<p>小伙子一愣，大概还没有人这么置疑过他。“年纪大了，不能老写程序吧。”这个回答，让Simon想起关于他对什么是老的定义：当你希望做年轻人做的事情时，你就还年轻；如果你希望做老年人做的事情，你就老了。这和你出生了多长时间是没有关系的。</p>
<p>Simon接着问：“好吧，那你说说你成为构架师以后，每天都会做什么？”</p>
<p>小伙子说：“我还没想过，不过，我想应该主要是需求分析，设计构架吧……”这大概是现在年轻人的通病，年轻人很容易追逐一些自己也不清楚的目标。</p>
<p>Simon问：“那设计构架具体都做些什么呢？”</p>
<p>小伙子这次的回答是：“比如，选择程序框架，决定用Spring或Struts等等。”</p>
<p>“哦，那我问你，你怎么说服别人是用Spring还是Struts呢？”</p>
<p>“如果我有经验，我会知道哪个更好……”</p>
<p>“是吗，但关于Spring或Struts的知识任谁都可以很容易得到。如果别人不同意你的建议，你怎么说服他？如果同意你的建议，那你不过是作出了和别人一样的认识，别人又凭什么认可你呢？”</p>
<p>小伙子没想过构架师日子里还有一个说服人的工作，说：“我是构架师，我应该有权力做决定吧？”</p>
<p>Simon想起权力的三种层次，第一层，任命；第二层，专业；第三层，品德。</p>
<p>Simon问：“如果在一个成熟的软件企业里没有你所想象的构架师呢？或者说，构架师这种职业已经死亡或消失了呢？你会怎么定位你的职业？”</p>
<p>小伙子显得很震惊。</p>
<p>Simon画了一个系统构架，然后又给小伙子看了一段代码。</p>
<p>“那一个更难懂？”Simon问。</p>
<p>小伙子指着代码说：“代码难懂。”</p>
<p>Simon的解释是：“这就是为什么实际上所谓的构架师不存在的原因。一个更简单的东西怎么会更有价值呢？每个人都能够画出这种构架图，但不是每个人都能写出好的代码。”</p>
<p>送走了小伙子，Simon有点难受。他有点喜欢这个小伙子，但是，这又是一个被愚蠢的教育和误人子弟的技术杂志污染的家伙。Simon在自己的笔记本中加了一句话：中国程序员最愚蠢的认识之三：我想当构架师。前面两个赫然是：</p>
<p>35岁后写不动程序了；</p>
<p>我只要做Java（C＋＋）；
分享到： <a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a></p>
<ul>
<li>上一篇：<a href="http://blog.csdn.net/cunruizhai/article/details/758145" target="_blank">给一段软件公司求职对白，供想要求职的软件开发人员参考</a></li>
<li>下一篇：<a href="http://blog.csdn.net/cunruizhai/article/details/795856" target="_blank">软件工程师好了歌</a>
查看评论<a href=""></a></li>
</ul>
<p>32楼 <a href="http://blog.csdn.net/dongtianlaile" target="_blank">dongtianlaile</a> 2010-11-08 10:14发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/dongtianlaile" target="_blank"><img src="" alt=""></a>我想问一下：为什么“我只要做java（C++）”是三个最愚蠢的认识之一呢？ 很多人接触了java，就不想去做Ｃ＋＋了，专心做ｊａｖａ
，争取在这方面成为专家，有什么不好？难道比较牛的人就要对ｊａｖａ和Ｃ＋＋都很精通吗？31楼 <a href="http://blog.csdn.net/jiayajun88" target="_blank">jiayajun88</a> 2007-12-12 09:27发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/jiayajun88" target="_blank"><img src="" alt=""></a>当一个架构师也想过，但我想那是个漫长而艰辛的过程，我眼下就是要先做一个合格的JAVA程序员！！！！30楼 <a href="http://blog.csdn.net/ilovegnu" target="_blank">ilovegnu</a> 2007-04-29 14:15发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/ilovegnu" target="_blank"><img src="" alt=""></a>我认为能真正把coding做 “好”了，自然就是架构师了；如果每天的coding都只是为了完成工作而做的代码的堆积，那么确实是越老越不值钱，自以为经验很多，其实离架构师越来越远了。29楼 <a href="http://blog.csdn.net/afxcn" target="_blank">afxcn</a> 2007-04-27 21:44发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/afxcn" target="_blank"><img src="" alt=""></a>我就要当架构师
而且我会为这个目标奋斗不已28楼 <a href="http://blog.csdn.net/鼠标" target="_blank">鼠标</a> 2006-10-16 12:03发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/鼠标" target="_blank"><img src="" alt=""></a>我觉得故事里的小伙子没什么错，只是年轻经验不足而已。 <br>我觉得小伙子想法很正确，大家都这么想，只是不是仅仅想就能做好而已。追求一个更美好的未来有什么错？人人都有这个想法，不说才是真的虚伪和不诚信。 <br>这文章写的像“劝善文”......27楼 <a href="http://blog.csdn.net/flyback" target="_blank">魔芋</a> 2006-10-15 20:51发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/flyback" target="_blank"><img src="" alt=""></a>中国不需要更好的软件26楼 <a href="http://blog.csdn.net/zelision" target="_blank">zelision</a> 2006-10-09 11:05发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/zelision" target="_blank"><img src="" alt=""></a>一直关注大师的文章,支持! <br>当经济条件物质生活已经到了一定的层次,即使不用拼命的工作也能让自己和家人过得更好的话,我想会有更多的人去坚持自己的信念走一条自己永远有着自己思想和属于自己的路吧 <br>虽然有点理想化了点,但还是觉得不错!25楼 <a href="http://blog.csdn.net/albertlee" target="_blank">albertlee</a> 2006-09-07 00:45发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/albertlee" target="_blank"><img src="" alt=""></a>写的好啊，估计楼上几位也应该听说过 alienbat 亡灵法师的大名吧~ 呵呵24楼 <a href="http://blog.csdn.net/beggar" target="_blank">beggar</a> 2006-07-16 10:35发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/beggar" target="_blank"><img src="" alt=""></a>找工作最不幸的就是碰上这种高高在上自以为是急功近利的主了，好的架构师必然是一个优秀的程序员，反之亦然，不过一般是从程序员到架构师的过程，架构师必须有编码的功底。系统构架设计出来自然就比较容易看懂，就象整体的战略总比局部的丛林容易明白一样，问题在于对各种部件的准确把握以及自身团队资源的充分了解才能做出近优的设计，招人重要的是看他能不能胜任工作和发展潜力，而不是看别人的人生观是否和你一致23楼 <a href="http://blog.csdn.net/Sean.Pu" target="_blank">Sean.Pu</a> 2006-06-19 10:56发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/Sean.Pu" target="_blank"><img src="" alt=""></a>如果你认为他聪明,可以给予一定机会嘛.从管理的角度来看,他才毕业一年也许很多东西都没有想到.22楼 <a href="http://blog.csdn.net/ballzhi" target="_blank">ballzhi</a> 2006-06-15 17:13发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/ballzhi" target="_blank"><img src="" alt=""></a>构架师价值就好比 战场上将军和小兵的价值对比,不想当将军的士兵不是好士兵, 不过最有价值的还是做管理的皇帝21楼 <a href="http://blog.csdn.net/ballZhi" target="_blank">ballZhi</a> 2006-06-15 17:05发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/ballZhi" target="_blank"><img src="" alt=""></a>姑且不论简单的东西有没有价值,但把复杂的需求变成&quot;简单&quot;的东西的这种能力,就很有价值,20楼 <a href="http://blog.csdn.net/BlueDog" target="_blank">BlueDog</a> 2006-06-14 21:15发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/BlueDog" target="_blank"><img src="" alt=""></a>虽然我们想做一辈子技术，但世俗会充许么 <br>也许我们会屈服于世俗，但却迷失了自我。 <br>做个快乐的Coder或者是迷茫的管理者在中国于每个做技术的人都是个问题？ <br>传统文化告诉人的终极目标是物质世界权力颠峰而不是内心世界的精神领袖19楼 <a href="http://blog.csdn.net/sanniko" target="_blank">sanniko</a> 2006-06-13 13:15发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/sanniko" target="_blank"><img src="" alt=""></a>35岁，你的老板会怎么考虑你的地位呢？？你想做技术，但老板不想再给你钱。我认为是这样.现在很多老板都觉得技术很简单，大学生遍地都是，随便招几个就可以。18楼 <a href="http://blog.csdn.net/哈哈" target="_blank">哈哈</a> 2006-06-13 11:11发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/哈哈" target="_blank"><img src="" alt=""></a>中国有几本技术杂志,哈哈,&lt;&lt;程序员&gt;&gt;??17楼 <a href="http://blog.csdn.net/Shica" target="_blank">Shica</a> 2006-06-13 00:55发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/Shica" target="_blank"><img src="" alt=""></a>虽然有点偏激，但也指出了目前大部分IT人员的盲目与浮躁，一针见血。 <br>架构与编码，关注的面不同，所处的抽象层次也不同，其实也很难做什么比较。16楼 <a href="http://blog.csdn.net/匿名路过" target="_blank">匿名路过</a> 2006-06-13 00:52发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/匿名路过" target="_blank"><img src="" alt=""></a>这篇文字原来是说：只构架不写代码的人已经没有出路了。。。 <br>倒是我一直认同的，现在的java的声势，造就了太多夸夸其谈的人和名词 <br>很多在c/s里用的很平常的做法，到了java上就是一个脍炙人口的创新概念，直到由于java本身的限制，导致新概念的实际应用效果实在太差而不得不被淘汰 <br>对于那个小伙子的被淘汰，觉得有点不公平：人家才工作几年，就要他有这样的想法，现实吗？再说，现在招他，应该也不会让他现在就做架构师啊。。。15楼 <a href="http://blog.csdn.net/匿名路过" target="_blank">匿名路过</a> 2006-06-13 00:44发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/匿名路过" target="_blank"><img src="" alt=""></a>能让你们在每个大的版本都会可以在安全、性能、扩展性的诸多细小方面做构架上的改良的原始架构，应该也就是一个不错的框架了吧 <br>否则，早就在某个版本被彻底抛弃了14楼 <a href="http://blog.csdn.net/cunruizhai" target="_blank">cunruizhai</a> 2006-06-13 00:16发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/cunruizhai" target="_blank"><img src="" alt=""></a>Fasion, 谢谢你的回话。 <br>我所言的构架师已死，很大程度上指那些只构架不写代码的人已经没有出路了。程序的构架仍然至关重要。只是构架的形成不应该是非常早期就形成，而是逐步逼进。这也是我这些年的体会。我们的一个产品，由于非常庞大（800人的项目），几乎每个大的版本都会在安全、性能、扩展性的诸多细小方面做构架上的改良。几个版本后，找到了最原始的构架设计，竟然哑然失笑！因为已经完全不同了。有时候，和同事讨论的时候，说，是否有人可能在第一时间就设计出完美的构架，以后就不需要改了呢？大家一致认为，这是Mission Impossible，明天说不定就会来一个你完全没想到的漏洞。后来看了敏捷的一些概念，特别是设计已死那篇文章，刚好听到这个故事，就随手写了一篇。13楼 <a href="http://blog.csdn.net/fasiondog" target="_blank">fasiondog</a> 2006-06-12 23:08发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/fasiondog" target="_blank"><img src="" alt=""></a>你好，看了你的留言，一时来不及写东西，先来回个话：-） <br>你的观点我不完全赞同，赞同的是最愚蠢的3个认识（“我要做架构师”让我想起了小时候，“我要做科学家”的豪情壮语），不过“架构师已死”我不能完全赞同。 <br>写篇文章真的好累（不知是否有同感），一时我还写不出来，过几日我把我的看法写出来一起讨论。 <br>另外，你的文章很有特色，很棒！（其实你的文章我已经看过，本要使用我的推荐权，可是最近一直无法显示推荐时的验证码，郁闷中）12楼 <a href="http://blog.csdn.net/iqueen" target="_blank">iqueen</a> 2006-06-12 21:13发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/iqueen" target="_blank"><img src="" alt=""></a>结尾没有看懂！11楼 <a href="http://blog.csdn.net/LucasLee" target="_blank">LucasLee</a> 2006-06-12 17:09发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/LucasLee" target="_blank"><img src="" alt=""></a>不错的文章！10楼 <a href="http://blog.csdn.net/bigfanofcpp" target="_blank">bigfanofcpp</a> 2006-06-12 17:06发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/bigfanofcpp" target="_blank"><img src="" alt=""></a>中国程序员最愚蠢的认识之三： <br>我想当构架师。 <br> <br>前面两个赫然是： <br> <br>35岁后写不动程序了； <br> <br>我只要做Java（C＋＋）； <br> <br>这个。。。。。。客观的说恐怕不光是个人原因吧。 <br> <br>9楼 <a href="http://blog.csdn.net/bigfanofcpp" target="_blank">bigfanofcpp</a> 2006-06-12 17:03发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/bigfanofcpp" target="_blank"><img src="" alt=""></a>可悲！ <br>8楼 <a href="http://blog.csdn.net/nlhlx" target="_blank">nlhlx</a> 2006-06-12 12:22发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/nlhlx" target="_blank"><img src="" alt=""></a>山高月小，水落石出，好的程序员象是山中修炼道士，要化长时间修炼，要耐得住寂寞．水滴石穿之时，大功告成． <br>newxy技术就是这样炼成的．<a href="http://www.newxy.net7楼" target="_blank">http://www.newxy.net7楼</a> <a href="http://blog.csdn.net/joshyupeng" target="_blank">joshyupeng</a> 2006-06-12 10:50发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/joshyupeng" target="_blank"><img src="" alt=""></a>自从比尔该死当上架构师之后，所有人都想当架构师了。真正伟大的是架构师手中的砖瓦，而不是架构师本人。 <br>6楼 <a href="http://blog.csdn.net/tototo" target="_blank">tototo</a> 2006-06-12 09:50发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/tototo" target="_blank"><img src="" alt=""></a>团队中的真正高手最大的能力是把复杂的事情分解成简单的部分，工作分解才方便。 <br> <br>而把任务变复杂的人，看起来很NB，个人素质高，但在团队合作中只能当研发人员，根本不可能胜任带管理性质的工作。5楼 <a href="http://blog.csdn.net/walkman" target="_blank">walkman</a> 2006-06-12 09:34发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/walkman" target="_blank"><img src="" alt=""></a>编得吧？真正的架构可不是用spring还是strut这么简单，架构要要考虑系统的方方面面，好的编程功底是基础，我见过好的架构师思维能力不是一般的强，只能说你们公司的架构师太水了4楼 <a href="http://blog.csdn.net/wxfy1977" target="_blank">wxfy1977</a> 2006-06-12 10:21发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/wxfy1977" target="_blank"><img src="" alt=""></a>有点道理3楼 <a href="http://blog.csdn.net/匿名路过" target="_blank">匿名路过</a> 2006-06-12 09:17发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/匿名路过" target="_blank"><img src="" alt=""></a>35岁后写得动程序，而且还写的更好了 <br>但是，收入、地位低得逼你放弃写程序 <br>－－这才是中国国情2楼 <a href="http://blog.csdn.net/jiyucn" target="_blank">jiyucn</a> 2006-06-12 09:07发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/jiyucn" target="_blank"><img src="" alt=""></a>&quot;又是一个被愚蠢的教育和隔离误人子弟的技术杂志污染的家伙&quot;，这样人太多了1楼 <a href="http://blog.csdn.net/jiyucn" target="_blank">jiyucn</a> 2006-06-12 09:03发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/jiyucn" target="_blank"><img src="" alt=""></a>写得好，感触很多。
您还没有登录,请<a href="">[登录]</a>或<a href="http://passport.csdn.net/account/register?from=http%3A%2F%2Fblog.csdn.net%2Fcunruizhai%2Farticle%2Fdetails%2F789941" target="_blank">[注册]</a></p>
<p>/* 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场<a href=""></a><a href=""></a>
<a href="&quot;回到顶部&quot;"><img src="" alt="TOP"></a></p>
<p>个人资料</p>
<p><a href="http://my.csdn.net/cunruizhai" target="_blank"><img src="&quot;访问我的空间&quot;" alt=""></a>
<a href="http://my.csdn.net/cunruizhai" target="_blank">cunruizhai</a></p>
<p><a href="&quot;[加关注]&quot;"></a> <a href="&quot;[发私信]&quot;"></a></p>
<ul>
<li>访问：289015次</li>
<li>积分：3189分</li>
<li><p>排名：第1981名</p>
</li>
<li><p>原创：39篇</p>
</li>
<li>转载：0篇</li>
<li>译文：0篇</li>
<li>评论：598条</li>
</ul>
<p>文章搜索</p>
<p><a href=""></a></p>
<p>文章分类</p>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai/article/category/197359" target="_blank">水果的故事－项目倒计时</a>(4)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/category/230107" target="_blank">灯下黑</a>(11)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/category/197361" target="_blank">研发经理日记</a>(3)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/category/188552" target="_blank">随笔</a>(21)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/category/1104594" target="_blank">gong</a>(0)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/category/1104595" target="_blank">工资</a>(1)</li>
<li><p><a href="http://blog.csdn.net/cunruizhai/article/category/1411335" target="_blank">瀑布式开发流程转型敏捷杂记</a>(1)
文章存档</p>
</li>
<li><p><a href="http://blog.csdn.net/cunruizhai/article/month/2013/05" target="_blank">2013年05月</a>(1)</p>
</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2012/09" target="_blank">2012年09月</a>(1)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2012/08" target="_blank">2012年08月</a>(1)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2012/03" target="_blank">2012年03月</a>(1)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2011/08" target="_blank">2011年08月</a>(1)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2011/05" target="_blank">2011年05月</a>(1)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2011/04" target="_blank">2011年04月</a>(2)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2007/04" target="_blank">2007年04月</a>(1)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2007/03" target="_blank">2007年03月</a>(1)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2006/10" target="_blank">2006年10月</a>(6)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2006/09" target="_blank">2006年09月</a>(4)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2006/08" target="_blank">2006年08月</a>(5)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2006/07" target="_blank">2006年07月</a>(1)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2006/06" target="_blank">2006年06月</a>(3)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2006/05" target="_blank">2006年05月</a>(1)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2006/04" target="_blank">2006年04月</a>(5)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/month/2006/03" target="_blank">2006年03月</a>(4)</li>
</ul>
<p>展开</p>
<p>阅读排行</p>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1282398" title="程序员的灯下黑：坚持和良好心态近乎道" target="_blank">程序员的灯下黑：坚持和良好心态近乎道</a>(33740)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1314592" title="误导程序员的喧嚣：评CSDN引导Java和Ruby之争" target="_blank">误导程序员的喧嚣：评CSDN引导Java和Ruby之争</a>(26947)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1046817" title="程序员的灯下黑：重知识轻技术" target="_blank">程序员的灯下黑：重知识轻技术</a>(23427)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/914566" title="为什么大公司的产品越做越烂" target="_blank">为什么大公司的产品越做越烂</a>(17465)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1325152" title="我为什么反对语言之争？我的语言历险" target="_blank">我为什么反对语言之争？我的语言历险</a>(13688)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1079226" title="程序员的灯下黑：没学会快乐" target="_blank">程序员的灯下黑：没学会快乐</a>(12404)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1335694" title="程序员的灯下黑：能认识自己吗？" target="_blank">程序员的灯下黑：能认识自己吗？</a>(10937)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1588891" title="程序员的灯下黑：如果你想考研究生或是研究生" target="_blank">程序员的灯下黑：如果你想考研究生或是研究生</a>(9676)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1256201" title="程序员的灯下黑：管理还是技术？兴趣优先" target="_blank">程序员的灯下黑：管理还是技术？兴趣优先</a>(9656)</li>
<li><p><a href="http://blog.csdn.net/cunruizhai/article/details/1357848" title="程序员的灯下黑：不要忘记你的目标" target="_blank">程序员的灯下黑：不要忘记你的目标</a>(9545)
评论排行</p>
</li>
<li><p><a href="http://blog.csdn.net/cunruizhai/article/details/1046817" title="程序员的灯下黑：重知识轻技术" target="_blank">程序员的灯下黑：重知识轻技术</a>(81)</p>
</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1325152" title="我为什么反对语言之争？我的语言历险" target="_blank">我为什么反对语言之争？我的语言历险</a>(48)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1079226" title="程序员的灯下黑：没学会快乐" target="_blank">程序员的灯下黑：没学会快乐</a>(45)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1314592" title="误导程序员的喧嚣：评CSDN引导Java和Ruby之争" target="_blank">误导程序员的喧嚣：评CSDN引导Java和Ruby之争</a>(41)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1256201" title="程序员的灯下黑：管理还是技术？兴趣优先" target="_blank">程序员的灯下黑：管理还是技术？兴趣优先</a>(39)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1335694" title="程序员的灯下黑：能认识自己吗？" target="_blank">程序员的灯下黑：能认识自己吗？</a>(33)</li>
<li><a href="&quot;构架师已死&quot;">构架师已死</a>(33)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/914566" title="为什么大公司的产品越做越烂" target="_blank">为什么大公司的产品越做越烂</a>(32)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1588891" title="程序员的灯下黑：如果你想考研究生或是研究生" target="_blank">程序员的灯下黑：如果你想考研究生或是研究生</a>(30)</li>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/6316148" title="管理的灾难：影响每人工作的报表" target="_blank">管理的灾难：影响每人工作的报表</a>(28)</li>
</ul>
<p>推荐文章
最新评论</p>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/1178851#comments" target="_blank">程序员的灯下黑：Hands-on，Hands-on，Hands-on!</a></li>
</ul>
<p><a href="http://blog.csdn.net/yin_wuzhe" target="_blank">yin_wuzhe</a>: 真不错，收藏..</p>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/7930573#comments" target="_blank">用AutoIT删除新浪微博关注博主</a></li>
</ul>
<p><a href="http://blog.csdn.net/linglingluoluo2010" target="_blank">linglingluoluo2010</a>: 我最近也莫名奇妙多了好多关注着，名字都很相像，没有太在意，现在都不怎么玩新浪微博了，没有开始的新鲜劲...</p>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/7376062#comments" target="_blank">一个人值多少钱？</a></li>
</ul>
<p><a href="http://blog.csdn.net/xzhctf" target="_blank">编程难民</a>: 说的好，太抠了，干的不爽，没事也想搞点事</p>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/6731604#comments" target="_blank">公司领导们</a></li>
</ul>
<p><a href="http://blog.csdn.net/suc_qq" target="_blank">suc_qq</a>: 呵呵 真这样。我上个公司就这样。一样的</p>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/6731604#comments" target="_blank">公司领导们</a></li>
</ul>
<p><a href="http://blog.csdn.net/guxm6" target="_blank">大智若愚</a>: 务实！！！</p>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/6731604#comments" target="_blank">公司领导们</a></li>
</ul>
<p><a href="http://blog.csdn.net/liu344781071" target="_blank">liu344781071</a>: 为啥？</p>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/914566#comments" target="_blank">为什么大公司的产品越做越烂</a></li>
</ul>
<p><a href="http://blog.csdn.net/31737951" target="_blank">31737951</a>: 你把软件够架司的位置放到什么地方去了？提出意见要经过够架师再设计把？</p>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/6316148#comments" target="_blank">管理的灾难：影响每人工作的报表</a></li>
</ul>
<p><a href="http://blog.csdn.net/yanmeixiangangel" target="_blank">yanmeixiangangel</a>: 这是一种理念，实际还得根据公司的实际情况走的。对待不同的人都该有所区别。</p>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/6316148#comments" target="_blank">管理的灾难：影响每人工作的报表</a></li>
</ul>
<p><a href="http://blog.csdn.net/waile23" target="_blank">waile23</a>: 管理要从管事转变为管人，就是成功的开始了。</p>
<ul>
<li><a href="http://blog.csdn.net/cunruizhai/article/details/6316148#comments" target="_blank">管理的灾难：影响每人工作的报表</a></li>
</ul>
<p><a href="http://blog.csdn.net/aflyeagle" target="_blank">aflyeagle</a>: 请问一个问题：“设立一个周评审机制，同时所有经理在另一个工具填数据，这样，人员统计就基本准确了。”这...</p>
<p><a href="http://www.csdn.net/company/about.html" target="_blank">公司简介</a>|<a href="http://www.csdn.net/company/recruit.html" target="_blank">招贤纳士</a>|<a href="http://www.csdn.net/company/marketing.html" target="_blank">广告服务</a>|<a href="http://www.csdn.net/company/account.html" target="_blank">银行汇款帐号</a>|<a href="http://www.csdn.net/company/contact.html" target="_blank">联系方式</a>|<a href="http://www.csdn.net/company/statement.html" target="_blank">版权声明</a>|<a href="http://www.csdn.net/company/layer.html" target="_blank">法律顾问</a>|<a href="mailto:webmaster@csdn.net">问题报告</a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=2355263776&amp;site=qq&amp;menu=yes" target="_blank">QQ客服</a> <a href="http://e.weibo.com/csdnsupport/profile" target="_blank">微博客服</a> <a href="http://bbs.csdn.net/forums/Service" target="_blank">论坛反馈</a> <a href="mailto:webmaster@csdn.net">联系邮箱：webmaster@csdn.net</a> 服务热线：400-600-2320京 ICP 证 070598 号北京创新乐知信息技术有限公司 版权所有世纪乐知(北京)网络技术有限公司 提供技术支持江苏乐知网络技术有限公司 提供商务支持Copyright © 1999-2012, CSDN.NET, All Rights Reserved <a href="http://www.hd315.gov.cn/beian/view.asp?bianhao=010202001032100010" target="_blank"><img src="" alt="GongshangLogo"></a>
<img src="http://counter.csdn.net/pv.aspx?id=24" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/架构师/">架构师</a></li></span></span> | <span class="tags">Tagged <a href="/tags/架构师/" class="label label-primary">架构师</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:28"datetime="2014-03-07 09:54:28"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-架构师--构架师已死/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-架构师--构架师已死" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JS用法-jquery-cookie--Documentation/">Documentation</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:28.000Z"> <a href="/2014/02/02/2014-02-02-JS用法-jquery-cookie--Documentation/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="documentation">Documentation</h1>
<p><a href="http://code.google.com/p/cookies/" target="_blank">JavaScript Cookie Handling Library and jQuery plugin</a></p>
<p><a href="http://code.google.com/p/cookies/" target="_blank">Project Home</a> <a href="http://code.google.com/p/cookies/downloads/list" target="_blank">Downloads</a> <a href="http://code.google.com/p/cookies/w/list" target="_blank">Wiki</a> <a href="http://code.google.com/p/cookies/issues/list" target="_blank">Issues</a> <a href="http://code.google.com/p/cookies/source/checkout" target="_blank">Source</a>
Search   Search within:  All wiki pages  Featured pages  Current pages  Deprecated pages  for</p>
<p>Documentation  </p>
<p>How to use jquery.cookies.js
<a href="http://code.google.com/p/cookies/w/list?q=label:Featured" title="Listed on project home page" target="_blank">Featured</a></p>
<p>Updated  Jan 13, 2010 by <a href="http://code.google.com/u/112722706555317592631/" target="_blank">auldrid...@gmail.com</a></p>
<h1 id="-how-to-use-jquery-cookies-js-"><a href=""></a>How to use jquery.cookies.js<a href=""></a></h1>
<ul>
<li><a href="">Without jQuery</a></li>
<li><a href="">With jQuery</a></li>
<li><p><a href="http://code.google.com/p/cookies/wiki/JSON" target="_blank">JSON Support</a></p>
</li>
<li><p><a href="">Get a cookie</a></p>
</li>
<li><a href="">Get Filtered list of cookies</a></li>
<li><a href="">Set a cookie</a></li>
<li><a href="">Delete a cookie</a></li>
<li><a href="">Test if browser is accepting cookies</a></li>
<li><p><a href="">Set default options to use when none are specified</a></p>
</li>
<li><p><a href="">Options object</a></p>
</li>
</ul>
<h2 id="-without-jquery-"><a href=""></a>Without jQuery<a href=""></a></h2>
<p>If jQuery is not available in your page, the core cookies library is available to you under the jaaulde.utils namespace:</p>
<h3 id="-get-a-cookie-"><a href=""></a>Get a cookie<a href=""></a></h3>
<p>//<em>/</em>
 /<em> get - get one, several, or all cookies
 /</em>
 /<em> @access public
 /</em> @paramater Mixed cookieName - String:name of single cookie; Array:list of multiple cookie names; Void (no param):if you want all cookies
 /<em> @return Mixed - Value of cookie as set; Null:if only one cookie is requested and is not found; Object:hash of multiple or all cookies (if multiple or all requested);
 /</em>/
get = function(cookieName)</p>
<h3 id="-example-"><a href=""></a>Example:<a href=""></a></h3>
<ul>
<li><p>jaaulde.utils.cookies.get(&#39;myCookie&#39;);</p>
</li>
<li><p>returns value of myCookie if it is present, null if not</p>
</li>
<li><p>jaaulde.utils.cookies.get([&#39;myCookie&#39;, &#39;myOtherCookie&#39;]);</p>
</li>
<li><p>returns array containing value of each requested cookie if it is present, null if not</p>
</li>
<li><p>jaaulde.utils.cookies.get();</p>
</li>
<li><p>returns array of all cookies from your site</p>
</li>
</ul>
<h3 id="-get-filtered-list-of-cookies-"><a href=""></a>Get Filtered list of cookies<a href=""></a></h3>
<p>//<em>/</em>
 /<em> filter - get array of cookies whose names match the provided RegExp
 /</em>
 /<em> @access public
 /</em> @paramater Object RegExp - The regular expression to match against cookie names
 /<em> @return Mixed - Object:hash of cookies whose names match the RegExp
 /</em>/
filter = function( cookieNameRegExp )</p>
<h3 id="-example-"><a href=""></a>Example:<a href=""></a></h3>
<ul>
<li><p>jaaulde.utils.cookies.filter( /^site/ );</p>
</li>
<li><p>returns list of cookies whose names start with &quot;site&quot;</p>
</li>
</ul>
<h3 id="-set-a-cookie-"><a href=""></a>Set a cookie<a href=""></a></h3>
<p>//<em>/</em>
 /<em> set - set or delete a cookie with desired options
 /</em>
 /<em> @access public
 /</em> @paramater String cookieName - name of cookie to set
 /<em> @paramater Mixed value - Any JS value. If not a string, will be JSON encoded (<a href="http://code.google.com/p/cookies/wiki/JSON" target="_blank">http://code.google.com/p/cookies/wiki/JSON</a>); NULL to delete
 /</em> @paramater Object options - optional list of cookie options to specify
 /<em> @return void
 /</em>/
set = function(cookieName, value, options)</p>
<h3 id="-example-"><a href=""></a>Example:<a href=""></a></h3>
<ul>
<li><p>jaaulde.utils.cookies.set(&#39;myCookie&#39;, &#39;myValue&#39;);</p>
</li>
<li><p>sets cookie by the name of &#39;myCookie&#39; to value of &#39;myValue&#39; with default options</p>
</li>
<li><p>jaaulde.utils.cookies.set(&#39;myCookie&#39;, &#39;myValue&#39;, {path: &#39;/somedir&#39;});</p>
</li>
<li><p>sets cookie by the name of &#39;myCookie&#39; to value of &#39;myValue&#39; with path of &#39;/somedir&#39;</p>
</li>
<li><p><strong>See information on options object below</strong></p>
</li>
</ul>
<h3 id="-delete-a-cookie-"><a href=""></a>Delete a cookie<a href=""></a></h3>
<p>//<em>/</em>
 /<em> del - delete a cookie (domain and path options must match those with which the cookie was set; this is really an alias for set() with parameters simplified for this use)
 /</em>
 /<em> @access public
 /</em> @paramater MIxed cookieName - String name of cookie to delete, or Bool true to delete all
 /<em> @paramater Object options - optional list of cookie options to specify ( path, domain )
 /</em> @return void
 /*/
del = function(cookieName, options)</p>
<h3 id="-example-"><a href=""></a>Example:<a href=""></a></h3>
<ul>
<li><p>jaaulde.utils.cookies.del(&#39;myCookie&#39;);</p>
</li>
<li><p>deletes a cookie, &#39;myCookie&#39;, with default options</p>
</li>
<li><p>jaaulde.utils.cookies.del(&#39;myCookie&#39;, {path: &#39;/somedir&#39;});</p>
</li>
<li><p>deletes a cookie by the name of &#39;myCookie&#39; which had been set with a path of &#39;/somedir&#39;</p>
</li>
<li><p>jaaulde.utils.cookies.del(true);</p>
</li>
<li><p>deletes all cookies</p>
</li>
<li><p>A cookie can only be deleted using the same options with which it was set</p>
</li>
<li><strong>See information on options object below</strong></li>
</ul>
<h3 id="-test-if-browser-is-accepting-cookies-"><a href=""></a>Test if browser is accepting cookies<a href=""></a></h3>
<p>//<em>/</em>
 /<em> test - test whether the browser is accepting cookies
 /</em>
 /<em> @access public
 /</em> @return Boolean
 /*/
test = function()</p>
<h3 id="-example-"><a href=""></a>Example:<a href=""></a></h3>
<ul>
<li><p>jaaulde.utils.cookies.test();</p>
</li>
<li><p>attempts to set a cookie and returns true or false upon success or failure</p>
</li>
</ul>
<h3 id="-set-default-options-to-use-when-none-are-specified-"><a href=""></a>Set default options to use when none are specified<a href=""></a></h3>
<p>//<em>/</em>
 /<em> setOptions - set default options for calls to cookie methods
 /</em>
 /<em> @access public
 /</em> @param Object options - list of cookie options to specify
 /<em> @return void
 /</em>/
setOptions = function(options)</p>
<h3 id="-example-"><a href=""></a>Example:<a href=""></a></h3>
<ul>
<li><p>jaaulde.utils.cookies.setOptions({path: &#39;/somedir&#39;});</p>
</li>
<li><p>all cookies will be set or deleted with the path , &#39;/somedir&#39;, unless it is explicitly provided in a passed options object</p>
</li>
<li><p><strong>See information on options object below</strong></p>
</li>
</ul>
<h2 id="-with-jquery-"><a href=""></a>With jQuery<a href=""></a></h2>
<p>If jQuery is available, then all of the <a href="http://code.google.com/p/cookies/wiki/Documentation#Without_jQuery" target="_blank">above methods</a> are available to you under the jQuery.cookies (or $.cookies ) namespace:</p>
<ul>
<li>$.cookies.get()</li>
<li>$.cookies.filter()</li>
<li>$.cookies.set()</li>
<li>$.cookies.del()</li>
<li>$.cookies.test()</li>
<li>$.cookies.setOptions()</li>
</ul>
<p>In addition, there are some jQuery function additions for helping automate some cookie tasks:</p>
<ul>
<li><p><strong>Set the value of a form field or the HTML of an element to a cookie named after the field&#39;s/element&#39;s name or id attribute</strong></p>
</li>
<li><p>$(&#39;/#username&#39;).cookify();</p>
</li>
<li><p>The value of the field, or HTML of the element, with id &quot;username&quot; is set to a cookie named after the name or id attribute of that field/element. If a radio or checkbox and it&#39;s checked, the value will be set.</p>
</li>
<li><p><strong>Fill a field&#39;s value, or an element&#39;s innerHTML with the value of a cookie</strong></p>
</li>
<li><p>$(&#39;/#username&#39;).cookieFill();</p>
</li>
<li><p>Set the value of the input, or HTML of the element, with id, &#39;username&#39;, to the value of a cookie by the same name. If a radio or checkbox and it is checked, the cookie will be set. If not checked, the cookie will be deleted.</p>
</li>
<li><p><strong>Bind an input to the cookies library</strong></p>
</li>
<li><p>$(&#39;/#username&#39;).cookieBind();</p>
</li>
<li><p>Fills the field or element with id, &#39;username&#39;, with the cookie named the same and sets the field&#39;s/element&#39;s change event to fire cookify() to update the cookie when the input value changes</p>
</li>
</ul>
<h2 id="-options-object-"><a href=""></a>Options object<a href=""></a></h2>
<p>Using the options object, cookies can be set with several options such as the domain and or path for which the cookie should be available, expiration date for the cookie, and whether the cookie should be sent over HTTPS only.</p>
<p>The options object has four properties:</p>
<ul>
<li><p><strong>domain</strong></p>
</li>
<li><p>STRING</p>
</li>
<li><p>For which domain should the cookie be available</p>
</li>
<li><p><strong>path</strong></p>
</li>
<li><p>STRING</p>
</li>
<li><p>For which path should the cookie be available</p>
</li>
<li><p><strong>hoursToLive (DEPRECATED for expiresAt)</strong></p>
</li>
<li><p>NUMBER</p>
</li>
<li><p>For how many hours should the cookie be valid? (Passing 0 means to delete the cookie at the end of the browser session--this is default. Negative values will delete the cookie, but you should use the del() method instead.)</p>
</li>
<li><p><strong>expiresAt</strong></p>
</li>
<li><p>Date OBJECT</p>
</li>
<li><p>Date object representing expiration date/time of cookie</p>
</li>
<li><p><strong>secure</strong></p>
</li>
<li><p>BOOL</p>
</li>
<li>Should cookie be sent to server via HTTPS only?</li>
</ul>
<p>The structure of the object is as follows:
  var newOptions = {
    domain: &#39;/*.mydomain.com&#39;,
    path: &#39;/somedir&#39;,
    expiresAt: new Date( 2011, 1, 1 ),
    secure: true
  }</p>
<p>You need only set those options which you desire to override.</p>
<p>The default options when not overridden are:</p>
<ul>
<li><p><strong>domain</strong></p>
</li>
<li><p>no value - will cause current domain of current page to be used</p>
</li>
<li><p><strong>path</strong></p>
</li>
<li><p>/</p>
</li>
<li><p><strong>expiration</strong></p>
</li>
<li><p>no value--causes cookie to be deleted at end of browser session</p>
</li>
<li><p><strong>secure</strong> (send over HTTPS only)</p>
</li>
<li><p>false</p>
</li>
</ul>
<p>An options object can be passed with set(), del(), cookify(), and cookieBind() to override the defaults on a case by case basis. You can also pass an options object to setOptions() to override the defaults for all calls.</p>
<p><strong>IMPORTANT NOTE:</strong> Cookies must be deleted using the same domain and path options with which they were set. Else the cookie will not delete. This is just how cookies work.</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/JS用法/">JS用法</a></li></span><span class="breadcrumb"><li><a href="/categories/JS用法/">JS用法</a></li><li><a href="/categories/JS用法/jquery-cookie/">jquery-cookie</a></li></span></span> | <span class="tags">Tagged <a href="/tags/JS用法/" class="label label-primary">JS用法</a><a href="/tags/jquery-cookie/" class="label label-success">jquery-cookie</a></span> | <span class="time">recent updated:<time title="2014-03-07 10:04:09"datetime="2014-03-07 10:04:09"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JS用法-jquery-cookie--Documentation/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JS用法-jquery-cookie--Documentation" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/152/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/150/">150</a></li><li><a class="page-number" href="/page/151/">151</a></li><li><a class="page-number" href="/page/152/">152</a></li><li class="active"><li><span class="page-number current">153</span></li><li><a class="page-number" href="/page/154/">154</a></li><li><a class="page-number" href="/page/155/">155</a></li><li><a class="page-number" href="/page/156/">156</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/161/">161</a></li><li><a class="page-number" href="/page/162/">162</a></li><li><a class="extend next" href="/page/154/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Site powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a>  update time: <em>2014-04-07 17:26:53</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
