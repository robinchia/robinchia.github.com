
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 9 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-ftp--ValidateXMLusingaXSD/">Validate XML using a XSD</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:45.000Z"> <a href="/2014/02/02/2014-02-02-ftp--ValidateXMLusingaXSD/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="validate-xml-using-a-xsd">Validate XML using a XSD</h1>
<p>1、xsd文件源;</p>
<p>SchemaFactory: newSchema(Source schema)</p>
<p>//<em>    Parser object is: com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl@c9ba38    Start document:     Start element: local name: PHONEBOOK qname: PHONEBOOK uri:     Characters:       Start element: local name: PERSON qname: PERSON uri:     Characters:        Start element: local name: NAME qname: NAME uri:     Attributes:      Name : firstName      Type : CDATA      Value: Joe      Name : lastName      Type : CDATA      Value: Yin    Characters: Joe    Characters:  Yin    End element: local name: NAME qname: NAME uri:     Characters:        Start element: local name: EMAIL qname: EMAIL uri:     Characters: joe@yourserver.com    End element: local name: EMAIL qname: EMAIL uri:     Characters:        Start element: local name: TELEPHONE qname: TELEPHONE uri:     Characters: 202-999-9999    End element: local name: TELEPHONE qname: TELEPHONE uri:     Characters:        Start element: local name: WEB qname: WEB uri:     Characters: www.java2s.com    End element: local name: WEB qname: WEB uri:     Characters:       End element: local name: PERSON qname: PERSON uri:     Characters:       End element: local name: PHONEBOOK qname: PHONEBOOK uri:     End document:      /</em>/    <strong>import </strong>java.io.StringReader;    <strong>import </strong>javax.xml.XMLConstants;    <strong>import </strong>javax.xml.parsers.ParserConfigurationException;    <strong>import </strong>javax.xml.parsers.SAXParser;    <strong>import </strong>javax.xml.parsers.SAXParserFactory;    <strong>import </strong>javax.xml.transform.sax.SAXSource;    <strong>import </strong>javax.xml.validation.SchemaFactory;    <strong>import </strong>org.xml.sax.Attributes;    <strong>import </strong>org.xml.sax.InputSource;    <strong>import </strong>org.xml.sax.SAXException;    <strong>import </strong>org.xml.sax.SAXParseException;    <strong>import </strong>org.xml.sax.helpers.DefaultHandler;    <strong>public class </strong>MainClass {      <strong>public static **</strong>void <strong>main(String args[])</strong>throws <strong>Exception {        SAXParserFactory spf = SAXParserFactory.newInstance();        SAXParser parser = </strong>null<strong>;        spf.setNamespaceAware(</strong>true<strong>);        </strong>try <strong>{         SchemaFactory sf =                         SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);          spf.setSchema(sf.newSchema(</strong>new <strong>SAXSource(</strong>new <strong>InputSource(</strong>new <strong>StringReader(schemaString)))));         parser = spf.newSAXParser();        }        </strong>catch<strong>(SAXException e) {          e.printStackTrace(System.err);          System.exit(1);            }         </strong>catch<strong>(ParserConfigurationException e) {          e.printStackTrace(System.err);          System.exit(1);            }        MySAXHandler handler = </strong>new <strong>MySAXHandler();         System.out.println(schemaString);        parser.parse(</strong>new <strong>InputSource(</strong>new <strong>StringReader(xmlString)), handler);      }      </strong>static <strong>String xmlString = &quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&quot; +          &quot;<note>&quot; +          &quot;<to>rtoName</to>&quot; +          &quot;<from>FromName</from>&quot; +          &quot;<heading>Info</heading>&quot; +          &quot;<body>Message Body</body>&quot; +          &quot;</note>&quot;;            </strong>static <strong>String schemaString =&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&quot; +          &quot;<xs:schema xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"" +          " targetNamespace=\"http://www.java2s.com\"" +          " xmlns=\"http://www.java2s.com\"" +          " elementFormDefault=\"qualified\">&quot; +          &quot;<xs:element name=\"note\">&quot; +          &quot;<xs:complexType>&quot; +          &quot;<xs:sequence>&quot; +          &quot;<xs:element name=\"to\" type=\"xs:string\"/>&quot; +          &quot;<xs:element name=\"from\" type=\"xs:string\"/>&quot; +          &quot;<xs:element name=\"heading\" type=\"xs:string\"/>&quot; +          &quot;<xs:element name=\"body\" type=\"xs:string\"/>&quot; +          &quot;</xs:sequence>&quot; +                          &quot;</xs:complexType>&quot; +                          &quot;</xs:element>&quot; +                          &quot;</xs:schema>&quot;;    }    </strong>class <strong>MySAXHandler </strong>extends <strong>DefaultHandler {      </strong>public <strong>**void </strong>startDocument() {        System.out.println(&quot;Start document: &quot;);      }            <strong>public **</strong>void <strong>endDocument()  {        System.out.println(&quot;End document: &quot;);      }            </strong>public <strong>**void </strong>startElement(String uri, String localName, String qname,                                                                    Attributes attr)      {        System.out.println(&quot;Start element: local name: &quot; + localName + &quot; qname: &quot;                                                             + qname + &quot; uri: &quot;+uri);        <strong>int </strong>attrCount = attr.getLength();        <strong>if</strong>(attrCount&gt;0) {          System.out.println(&quot;Attributes:&quot;);           <strong>for</strong>(<strong>int </strong>i = 0 ; i&lt;attrCount ; i++) {            System.out.println(&quot;  Name : &quot; + attr.getQName(i));             System.out.println(&quot;  Type : &quot; + attr.getType(i));             System.out.println(&quot;  Value: &quot; + attr.getValue(i));           }        }       }            <strong>public **</strong>void <strong>endElement(String uri, String localName, String qname) {        System.out.println(&quot;End element: local name: &quot; + localName + &quot; qname: &quot;                                                             + qname + &quot; uri: &quot;+uri);      }            </strong>public <strong>**void </strong>characters(<strong>char</strong>[] ch, <strong>int </strong>start, <strong>int </strong>length) {        System.out.println(&quot;Characters: &quot; + <strong>new </strong>String(ch, start, length));      }      <strong>public **</strong>void <strong>ignorableWhitespace(</strong>char<strong>[] ch, </strong>int <strong>start, </strong>int <strong>length) {        System.out.println(&quot;Ignorable whitespace: &quot; + </strong>new <strong>String(ch, start, length));      }      </strong>public <strong>**void </strong>startPrefixMapping(String prefix, String uri) {        System.out.println(&quot;Start \&quot;&quot; + prefix + &quot;\&quot; namespace scope. URI: &quot; + uri);       }      <strong>public **</strong>void <strong>endPrefixMapping(String prefix) {        System.out.println(&quot;End \&quot;&quot; + prefix + &quot;\&quot; namespace scope.&quot;);       }      </strong>public <strong>**void </strong>warning(SAXParseException spe) {        System.out.println(&quot;Warning at line &quot;+spe.getLineNumber());        System.out.println(spe.getMessage());      }      <strong>public **</strong>void <strong>fatalError(SAXParseException spe) </strong>throws <strong>SAXException {        System.out.println(&quot;Fatal error at line &quot;+spe.getLineNumber());        System.out.println(spe.getMessage());        </strong>throw **spe;      }    }</p>
<p><a href="http://www.java2s.com/Code/JavaAPI/javax.xml.validation/SchemaFactorynewSchemaSourceschema.htm" target="_blank">http://www.java2s.com/Code/JavaAPI/javax.xml.validation/SchemaFactorynewSchemaSourceschema.htm</a></p>
<p>另外，可参考：</p>
<p>import java.io.IOException; // SAX import javax.xml.parsers.SAXParser; import javax.xml.parsers.SAXParserFactory; import org.xml.sax.XMLReader; //SAX and external XSD import javax.xml.transform.Source; import javax.xml.transform.stream.StreamSource; import javax.xml.validation.SchemaFactory; import javax.xml.parsers.ParserConfigurationException; import org.xml.sax.ErrorHandler; import org.xml.sax.SAXException; import org.xml.sax.SAXParseException; import org.xml.sax.InputSource; public class XMLUtils {   private XMLUtils() {}      // validate SAX and external XSD    public static boolean validateWithExtXSDUsingSAX(String xml, String xsd)    throws ParserConfigurationException, IOException    {     try {       SAXParserFactory factory = SAXParserFactory.newInstance();      factory.setValidating(false);        factory.setNamespaceAware(true);       SchemaFactory schemaFactory = SchemaFactory.newInstance(&quot;<a href="http://www.w3.org/2001/XMLSchema" target="_blank">http://www.w3.org/2001/XMLSchema</a>&quot;);       SAXParser parser = null;       try {          factory.setSchema(schemaFactory.newSchema(new Source[] {new StreamSource( xsd )}));          parser = factory.newSAXParser();       }       catch (SAXException se) {         System.out.println(&quot;SCHEMA : &quot; + se.getMessage());  // problem in the XSD itself         return false;       }              XMLReader reader = parser.getXMLReader();       reader.setErrorHandler(           new ErrorHandler() {             public void warning(SAXParseException e) throws SAXException {               System.out.println(&quot;WARNING: &quot; + e.getMessage()); // do nothing             }             public void error(SAXParseException e) throws SAXException {               System.out.println(&quot;ERROR : &quot; + e.getMessage());               throw e;             }             public void fatalError(SAXParseException e) throws SAXException {               System.out.println(&quot;FATAL : &quot; + e.getMessage());               throw e;             }           }           );       reader.parse(new InputSource(xml));       return true;     }         catch (ParserConfigurationException pce) {       throw pce;     }      catch (IOException io) {       throw io;     }     catch (SAXException se){       return false;   } } public static void main (String args[]) throws Exception{      System.out.println         (XMLUtils.validateWithExtXSDUsingSAX             (&quot;c:/temp/howto.xml&quot;, &quot;c:/temp/howto.xsd&quot;));     //<em>       output :                true     /</em>/              } }</p>
<p><a href="http://www.rgagnon.com/javadetails/java-0669.html" target="_blank"><a href="http://www.rgagnon.com/javadetails/java-0669.html">http://www.rgagnon.com/javadetails/java-0669.html</a></a></p>
<p>IBM教程上有这个，但是我测试失败：</p>
<p><a href="http://www.ibm.com/developerworks/cn/xml/tips/x-tipvalschm/#ibm-pcon"></a></p>
<h2 id="sax-">SAX 示例</h2>
<p><a href="http://www.ibm.com/developerworks/cn/xml/tips/x-tipvalschm/#code2" target="_blank">清单 2</a>演示了如何使用 JAXP 1.2 中的新特性，通过 SAX 解析器来验证文档。要使用 SAX 解析器来验证文档，请执行以下操作：</p>
<ol>
<li>创建一个          </li>
</ol>
<p>SAXParserFactory
对象。</p>
<ol>
<li>将 namespace-aware 和 validating 特性设置为 true。</li>
<li>获取          </li>
</ol>
<p>SAXParser
对象。</p>
<ol>
<li>设置模式语言和模式源的特性（这是 JAXP 1.2 和模式中新出现的）。</li>
<li>解析文档。解析器必须有权访问          </li>
</ol>
<p>ErrorHandler
对象。</p>
<h3 id="-2-validatesax-java-jaxp-1-2">清单 2. ValidateSAX.java 演示了 JAXP 1.2</h3>
<p>package org.ananas.tips; import java.io./<em>; import org.xml.sax./</em>; import javax.xml.parsers./*; public class ValidateSAX {    public static String SCHEMA_LANGUAGE =       &quot;<a href="http://java.sun.com/xml/jaxp/properties/schemaLanguage" target="_blank">http://java.sun.com/xml/jaxp/properties/schemaLanguage</a>&quot;,                         XML_SCHEMA =       &quot;<a href="http://www.w3.org/2001/XMLSchema" target="_blank">http://www.w3.org/2001/XMLSchema</a>&quot;,                         SCHEMA_SOURCE =       &quot;<a href="http://java.sun.com/xml/jaxp/properties/schemaSource" target="_blank">http://java.sun.com/xml/jaxp/properties/schemaSource</a>&quot;;    public final static void main(String[] args)       throws IOException, SAXException, ParserConfigurationException    {       if(args.length &lt; 2)       {          System.err.println(&quot;usage is:&quot;);          System.err.println(&quot;   java -jar tips.jar -validatesax &quot;                             + &quot;input.xml schema.xsd&quot;);          return;       }       File input = new File(args[0]),            schema = new File(args[1]);       SAXParserFactory factory = SAXParserFactory.newInstance();       factory.setNamespaceAware(true);       factory.setValidating(true);       SAXParser parser = factory.newSAXParser();       try       {          parser.setProperty(SCHEMA_LANGUAGE,XML_SCHEMA);          parser.setProperty(SCHEMA_SOURCE,schema);       }       catch(SAXNotRecognizedException x)       {          System.err.println(&quot;Your SAX parser is not JAXP 1.2 compliant.&quot;);       }       parser.parse(input,new ErrorPrinter());    } }</p>
<p><a href="http://www.ibm.com/developerworks/cn/xml/tips/x-tipvalschm/" target="_blank"><a href="http://www.ibm.com/developerworks/cn/xml/tips/x-tipvalschm/">http://www.ibm.com/developerworks/cn/xml/tips/x-tipvalschm/</a></a></p>
<p>有时间到话，可以在测试。</p>
<p>列下jaxp 1.2教程：</p>
<p>This release includes XML data and example programs showing how to use JAXP  to process XML. Additional examples can be found on the <a href="http://xml.apache.org" target="_blank"><a href="http://xml.apache.org">http://xml.apache.org</a></a> site.</p>
<ul>
<li><a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/docs/samples.html#files" target="_blank">Sample XML Files</a></li>
<li><a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/docs/samples.html#DOMEcho" target="_blank">Printing a DOM Tree</a></li>
<li><a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/docs/samples.html#SAXTagCount" target="_blank">SAX Program to Count Tags</a></li>
<li><a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/docs/samples.html#Schema" target="_blank">Schema Examples</a></li>
</ul>
<p>The example programs include a cross-platform <a href="http://jakarta.apache.org/ant/index.html" target="_blank">ant</a> build file that can be used to build and run the example. Ant is a build tool similar to</p>
<p>make
on Unix and</p>
<p>nmake
on WindowsNT that is also an XML application. To use <a href="http://jakarta.apache.org/ant/index.html" target="_blank">ant</a>, download it from the<a href="http://jakarta.apache.org/site/binindex.html" target="_blank">website</a> and read the install docs. Alternatively, you can also view the ant</p>
<p>build.xml
file to see what needs to be done to manually compile and run an example program on your platform.
<strong>Note:</strong>
 The ant utility uses the value of the</p>
<p>JAVA_HOME
environment  variable to determine which Java platform it uses to compile and run the  sample scripts. Make sure that variable points to the version you intend to  use. If using version 1.4, make sure that the JAXP jar files are installed,  as described in the <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/docs/ReleaseNotes.html" target="_blank">Release Notes.</a></p>
<p><a href=""></a></p>
<h3 id="sample-xml-files">Sample XML Files</h3>
<p>A handful of sample XML files have been provided in the &quot;samples&quot; subdirectory.  Note that the links may not work depending on your browser environment. Please  look in ../samples/data if the links do not display in your browser.</p>
<ul>
<li>A simple <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/data/book-order.xml" target="_blank">Purchase Order</a>    (</li>
</ul>
<p>book-order.xml
) suggesting how an on-line business might    send and receive data.</p>
<ul>
<li>The original <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/data/REC-xml-19980210.xml" target="_blank">XML    specification</a> (</li>
</ul>
<p>REC-xml-19980210.xml
) was written in XML.    With a prepublication version of <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/data/spec.dtd" target="_blank">its    Document Type Definition (DTD) file</a> (</p>
<p>spec.dtd
), it&#39;s    included here as a rather sophisticated example of how DTDs are used.</p>
<ul>
<li>Courtesy of Fuji Xerox, a short XML file in Japanese, using Japanese    tags. This is a <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/data/weekly-euc-jp.xml" target="_blank">weekly    report</a> (</li>
</ul>
<p>weekly-euc-jp.xml
) with <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/data/weekly-euc-jp.dtd" target="_blank">its DTD</a>    (</p>
<p>weekly-euc-jp.dtd
), which can be validated.</p>
<ul>
<li>From a large collection of XML sample documents at the <a href="ftp://sunsite.unc.edu/pub/sun-info/standards/xml/eg/">sunsite.unc.edu</a>    FTP server, <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/data/two_gent.xml" target="_blank">The Two Gentlemen of    Verona</a> (</li>
</ul>
<p>two_gent.xml
) and <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/data/rich_iii.xml" target="_blank">The Tragedy of Richard the Third</a>    (</p>
<p>rich_iii.xml
). These include <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/data/play.dtd" target="_blank">their DTD</a>  (</p>
<p>play.dtd
).</p>
<ul>
<li>A simple example showing the use of <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/data/namespace.xml" target="_blank">XML namespaces</a>    (</li>
</ul>
<p>namespace.xml
).</p>
<ul>
<li>A <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/data/personal-schema.xml" target="_blank">personal-schema.xml</a>    file containing some data that can be validated using its schema    definition, <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/data/personal.xsd" target="_blank">personal.xsd</a>.</li>
</ul>
<p><a href=""></a></p>
<h3 id="printing-a-dom-tree">Printing a DOM Tree</h3>
<p>One of the first things many programmers want to know is how to read an XML file and generate a DOM Document object from it. Use the <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/DOMEcho/DOMEcho.java" target="_blank">DOMEcho example</a> to learn how to do this in three steps. The important lines are:
    // Step 1: create a DocumentBuilderFactory and setNamespaceAware     DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();     dbf.setNamespaceAware(true);     // Step 2: create a DocumentBuilder     DocumentBuilder db = dbf.newDocumentBuilder();     // Step 3: parse the input file to get a Document object     Document doc = db.parse(new File(filename));</p>
<p>The program also gives an example of using an error handler and of setting optional configuration options, such as validation. Finally, this program helps you understand how DOM works by showing you the structure and contents of a DOM tree.</p>
<p><a href=""></a></p>
<h3 id="sax-program-to-count-tags">SAX Program to Count Tags</h3>
<p>The <a href="http://people.apache.org/%7Eedwingo/jaxp-ri-1.2.0-fcs/samples/SAXLocalNameCount/SAXLocalNameCount.java" target="_blank">SAXLocalNameCount</a>program counts the number of unique element local names in an XML document, ignoring the namespace name for simplicity. This example also shows one way to turn on DTD or XSD validation and how to use a SAX ErrorHandler.</p>
<p>There are several ways to parse a document using SAX and JAXP. We show one approach here. The first step is to bootstrap a parser. There are two ways: one is to use only the SAX API, the other is to use the JAXP utility classes in the javax.xml.parsers package. We use the second approach here because at the time of this writing it probably is the most portable solution for a JAXP compatible parser. After bootstrapping a parser/XMLReader, there are several ways to begin a parse. In this example, we use the SAX API.</p>
<h3 id="-schema-examples"><a href=""></a>Schema Examples</h3>
<p>Both of the sample programs include an option (-xsd) that lets you  validate the incoming document using XML Schema, instead of the document&#39;s DTD.  In addition, they include an -xsdss option that lets you specify the  &quot;schema source&quot; (the file that defines the schema for the document).</p>
<p>Both programs define the following constants:
    static final String JAXP_SCHEMA_LANGUAGE =         &quot;<a href="http://java.sun.com/xml/jaxp/properties/schemaLanguage" target="_blank">http://java.sun.com/xml/jaxp/properties/schemaLanguage</a>&quot;;     static final String W3C_XML_SCHEMA =         &quot;<a href="http://www.w3.org/2001/XMLSchema" target="_blank">http://www.w3.org/2001/XMLSchema</a>&quot;;     static final String JAXP_SCHEMA_SOURCE =         &quot;<a href="http://java.sun.com/xml/jaxp/properties/schemaSource" target="_blank">http://java.sun.com/xml/jaxp/properties/schemaSource</a>&quot;;</p>
<p>The schema language property defines the language the schema is written in.  The W3C XML Schema language is specified in these examples. The schema source  property directs the parser to a schema to use, regardless of any schema pointer  that the XML instance document may contain.</p>
<p>This code is abstracted from the SAX example:
    SAXParserFactory spf = SAXParserFactory.newInstance();     // Set namespaceAware to true to get a parser that corresponds to     // the default SAX2 namespace feature setting.  This is necessary     // because the default value from JAXP 1.0 was defined to be false.     spf.setNamespaceAware(true);     spf.setValidating(true);     SAXParser saxParser = spf.newSAXParser();     // Set the schema language if necessary     try {        saxParser.setProperty(JAXP_SCHEMA_LANGUAGE, W3C_XML_SCHEMA);     } catch (SAXNotRecognizedException x) {         // This can happen if the parser does not support JAXP 1.2         ...     }     ...    saxParser.setProperty(JAXP_SCHEMA_SOURCE, new File(schemaSource));</p>
<p>And here is the code abstracted from the DOM example:</p>
<pre><code>DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();     // Set namespaceAware to true to get a DOM Level 2 tree with nodes     // containing namesapce information.  This is necessary because the     // default value from JAXP 1.0 was defined to be false.     dbf.setNamespaceAware(true);     dbf.setValidating(true);     try {        dbf.setAttribute(JAXP_SCHEMA_LANGUAGE, W3C_XML_SCHEMA);     } catch (IllegalArgumentException x) {         // This can happen if the parser does not support JAXP 1.2         ...     }     // Specify other factory configuration settings    dbf.setAttribute(JAXP_SCHEMA_SOURCE, new File(schemaSource));     ...     DocumentBuilder db = dbf.newDocumentBuilder();
</code></pre><p>Note that the values are used to modify the SAX <em>parser,</em> using</p>
<p>setProperty(),
but they are used to modify the DOM parser<em>factory</em>, using</p>
<p>setAttribute()
.</p>
<p><a href="http://people.apache.org/~edwingo/jaxp-ri-1.2.0-fcs/docs/samples.html" target="_blank"><a href="http://people.apache.org/~edwingo/jaxp-ri-1.2.0-fcs/docs/samples.html">http://people.apache.org/~edwingo/jaxp-ri-1.2.0-fcs/docs/samples.html</a></a></p>
<p>另外一种，用 Validating Parser </p>
<p> Using the Validating Parser</p>
<p>By now, you have done a lot of experimenting with the nonvalidating parser. It&#39;s time to have a look at the validating parser to find out what happens when you use it to parse the sample presentation.</p>
<p>You need to understand about two things about the validating parser at the outset:</p>
<p>*</p>
<ul>
<li><p>A schema or document type definition (DTD) is required.</p>
</li>
<li><p>Because the schema or DTD is present, the</p>
</li>
</ul>
<p>ignorableWhitespace
method is invoked whenever possible.</p>
<h3 id="configuring-the-factory">Configuring the Factory</h3>
<p>The first step is to modify the Echo program so that it uses the validating parser instead of the nonvalidating parser.</p>
<p>Note: The code in this section is contained in</p>
<p><a href="http://docs.oracle.com/javaee/1.4/tutorial/examples/jaxp/sax/samples/Echo10.java" target="_blank">Echo10.java</a>
.</p>
<p>To use the validating parser, make the following highlighted changes:
public static void main(String argv[]) {   if (argv.length != 1) {     ...   }   // Use the default (non-validating) parser  // Use the validating parser  SAXParserFactory factory = SAXParserFactory.newInstance();   factory.setValidating(true);  try {     ...</p>
<p>Here, you configure the factory so that it will produce a validating parser when</p>
<p>newSAXParser
is invoked. To configure it to return a namespace-aware parser, you can also use</p>
<p>setNamespaceAware(true)
. Sun&#39;s implementation supports any combination of configuration options. (If a combination is not supported by a particular implementation, it is required to generate a factory configuration error.)</p>
<h3 id="validating-with-xml-schema">Validating with XML Schema</h3>
<p>Although a full treatment of XML Schema is beyond the scope of this tutorial, this section shows you the steps you take to validate an XML document using an existing schema written in the XML Schema language. (To learn more about XML Schema, you can review the online tutorial, XML Schema Part 0: Primer, at</p>
<p><a href="http://www.w3.org/TR/xmlschema-0/" target="_blank"><a href="http://www.w3.org/TR/xmlschema-0/">http://www.w3.org/TR/xmlschema-0/</a></a>
. You can also examine the sample programs that are part of the JAXP download. They use a simple XML Schema definition to validate personnel data stored in an XML file.)</p>
<p>Note: There are multiple schema-definition languages, including RELAX NG, Schematron, and the W3C &quot;XML Schema&quot; standard. (Even a DTD qualifies as a &quot;schema,&quot; although it is the only one that does not use XML syntax to describe schema constraints.) However, &quot;XML Schema&quot; presents us with a terminology challenge. Although the phrase &quot;XML Schema schema&quot; would be precise, we&#39;ll use the phrase &quot;XML Schema definition&quot; to avoid the appearance of redundancy.</p>
<p>To be notified of validation errors in an XML document, the parser factory must be configured to create a validating parser, as shown in the preceding section. In addition, the following must be true:</p>
<p>*</p>
<ul>
<li>The appropriate properties must be set on the SAX parser.</li>
<li>The appropriate error handler must be set.</li>
<li>The document must be associated with a schema.</li>
</ul>
<h3 id="setting-the-sax-parser-properties">Setting the SAX Parser Properties</h3>
<p>It&#39;s helpful to start by defining the constants you&#39;ll use when setting the properties:
static final String JAXP_SCHEMA_LANGUAGE =     &quot;<a href="http://java.sun.com/xml/jaxp/properties/schemaLanguage" target="_blank">http://java.sun.com/xml/jaxp/properties/schemaLanguage</a>&quot;; static final String W3C_XML_SCHEMA =     &quot;<a href="http://www.w3.org/2001/XMLSchema" target="_blank">http://www.w3.org/2001/XMLSchema</a>&quot;;</p>
<p>Next, you configure the parser factory to generate a parser that is namespace-aware as well as validating:
...   SAXParserFactory factory = SAXParserFactory.newInstance();   factory.setNamespaceAware(true);  factory.setValidating(true);</p>
<p>You&#39;ll learn more about namespaces in <a href="http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXPDOM8.html#wp76446" target="_blank">Validating with XML Schema</a>. For now, understand that schema validation is a namespace-oriented process. Because JAXP-compliant parsers are not namespace-aware by default, it is necessary to set the property for schema validation to work.</p>
<p>The last step is to configure the parser to tell it which schema language to use. Here, you use the constants you defined earlier to specify the W3C&#39;s XML Schema language:
saxParser.setProperty(JAXP_SCHEMA_LANGUAGE, W3C_XML_SCHEMA);</p>
<p>In the process, however, there is an extra error to handle. You&#39;ll take a look at that error next.</p>
<h3 id="setting-up-the-appropriate-error-handling">Setting Up the Appropriate Error Handling</h3>
<p>In addition to the error handling you&#39;ve already learned about, there is one error that can occur when you are configuring the parser for schema-based validation. If the parser is not 1.2-compliant and therefore does not support XML Schema, it can throw a</p>
<p>SAXNotRecognizedException
.</p>
<p>To handle that case, you wrap the</p>
<p>setProperty()
statement in a</p>
<p>try
/</p>
<p>catch
block, as shown in the code highlighted here:
... SAXParser saxParser = factory.newSAXParser();try {  saxParser.setProperty(JAXP_SCHEMA_LANGUAGE, W3C_XML_SCHEMA); }  catch (SAXNotRecognizedException x) {  // Happens if the parser does not support JAXP 1.2   ...}...</p>
<h3 id="associating-a-document-with-a-schema">Associating a Document with a Schema</h3>
<p>Now that the program is ready to validate the data using an XML Schema definition, it is only necessary to ensure that the XML document is associated with one. There are two ways to do that:</p>
<p>*</p>
<ul>
<li><p>By including a schema declaration in the XML document</p>
</li>
<li><p>By specifying the schema to use in the application</p>
</li>
</ul>
<p>Note: When the application specifies the schema to use, it overrides any schema declaration in the document.</p>
<p>To specify the schema definition in the document, you create XML such as this:</p>
<p><documentRoot  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:noNamespaceSchemaLocation='YourSchemaDefinition.xsd' >   ...</p>
<p>The first attribute defines the XML namespace (</p>
<p>xmlns
) prefix,</p>
<p>xsi
, which stands for XML Schema instance. The second line specifies the schema to use for elements in the document that do not have a namespace prefix--that is, for the elements you typically define in any simple, uncomplicated XML document.</p>
<p>Note: You&#39;ll learn about namespaces in <a href="http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXPDOM8.html#wp76446" target="_blank">Validating with XML Schema</a>. For now, think of these attributes as the &quot;magic incantation&quot; you use to validate a simple XML file that doesn&#39;t use them. After you&#39;ve learned more about namespaces, you&#39;ll see how to use XML Schema to validate complex documents that use them. Those ideas are discussed in <a href="http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXPDOM8.html#wp63997" target="_blank">Validating with Multiple Namespaces</a>.</p>
<p>You can also specify the schema file in the application:
static final String JAXP_SCHEMA_SOURCE =     &quot;<a href="http://java.sun.com/xml/jaxp/properties/schemaSource" target="_blank">http://java.sun.com/xml/jaxp/properties/schemaSource</a>&quot;; ... SAXParser saxParser = spf.newSAXParser(); ...saxParser.setProperty(JAXP_SCHEMA_SOURCE,     new File(schemaSource));</p>
<p>Now that you know how to use an XML Schema definition, we&#39;ll turn to the kinds of errors you can see when the application is validating its incoming data. To do that, you&#39;ll use a document type definition (DTD) as you experiment with validation.</p>
<h3 id="experimenting-with-validation-errors">Experimenting with Validation Errors</h3>
<p>To see what happens when the XML document does not specify a DTD, remove the</p>
<p>DOCTYPE
statement from the XML file and run the Echo program on it.</p>
<p>Note: The output shown here is contained in</p>
<p><a href="http://docs.oracle.com/javaee/1.4/tutorial/examples/jaxp/sax/samples/Echo10-01.txt" target="_blank">Echo10-01.txt</a>
. (The browsable version is</p>
<p><a href="http://docs.oracle.com/javaee/1.4/tutorial/examples/jaxp/sax/samples/Echo10-01.html" target="_blank">Echo10-01.html</a>
.)</p>
<p>The result you see looks like this:
&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt; /<em>/</em> Parsing error, line 9, uri .../slideSample01.xml   Document root element &quot;slideshow&quot;, must match DOCTYPE root  &quot;null&quot;</p>
<p>Note: This message was generated by the JAXP 1.2 libraries. If you are using a different parser, the error message is likely to be somewhat different.</p>
<p>This message says that the root element of the document must match the element specified in the</p>
<p>DOCTYPE
declaration. That declaration specifies the document&#39;s DTD. Because you don&#39;t yet have one, it&#39;s value is null. In other words, the message is saying that you are trying to validate the document, but no DTD has been declared, because no</p>
<p>DOCTYPE
declaration is present.</p>
<p>So now you know that a DTD is a requirement for a valid document. That makes sense. What happens when you run the parser on your current version of the slide presentation, with the DTD specified?</p>
<p>Note: The output shown here is produced using</p>
<p><a href="http://docs.oracle.com/javaee/1.4/tutorial/examples/xml/samples/slideSample07.xml" target="_blank">slideSample07.xml</a>
, as described in <a href="http://docs.oracle.com/javaee/1.4/tutorial/doc/IntroXML3.html#wp68336" target="_blank">Referencing Binary Entities</a>. The output is contained in</p>
<p><a href="http://docs.oracle.com/javaee/1.4/tutorial/examples/jaxp/sax/samples/Echo10-07.txt" target="_blank">Echo10-07.txt</a>
. (The browsable version is</p>
<p><a href="http://docs.oracle.com/javaee/1.4/tutorial/examples/jaxp/sax/samples/Echo10-07.html" target="_blank">Echo10-07.html</a>
.)</p>
<p>This time, the parser gives a different error message:
  /<em>/</em> Parsing error, line 29, uri file:...   The content of element type &quot;slide&quot; must match  &quot;(image?,title,item/*)</p>
<p>This message says that the element found at line 29 (</p>
<p><item>
) does not match the definition of the</p>
<p><slide>
element in the DTD. The error occurs because the definition says that the</p>
<p>slide
element requires a</p>
<p>title
. That element is not optional, and the copyright slide does not have one. To fix the problem, add a question mark to make</p>
<p>title
an optional element:
&lt;!ELEMENT slide (image?, title?, item/*)&gt;</p>
<p>Now what happens when you run the program?</p>
<p>Note: You could also remove the copyright slide, producing the same result shown next, as reflected in</p>
<p><a href="http://docs.oracle.com/javaee/1.4/tutorial/examples/jaxp/sax/samples/Echo10-06.txt" target="_blank">Echo10-06.txt</a>
. (The browsable version is</p>
<p><a href="http://docs.oracle.com/javaee/1.4/tutorial/examples/jaxp/sax/samples/Echo10-06.html" target="_blank">Echo10-06.html</a>
.)</p>
<p>The answer is that everything runs fine until the parser runs into the</p>
<p><em>
tag contained in the overview slide. Because that tag is not defined in the DTD, the attempt to validate the document fails. The output looks like this:
  ...   ELEMENT: <title>   CHARS:   Overview   END_ELM: </title>   ELEMENT: <item>   CHARS:   Why /<em>/</em> Parsing error, line 28, uri: ...Element &quot;em&quot; must be declared.org.xml.sax.SAXParseException: ... ...</p>
<p>The error message identifies the part of the DTD that caused validation to fail. In this case it is the line that defines an</p>
<p>item
element as</p>
<p>(/#PCDATA | item)
.</p>
<p>As an exercise, make a copy of the file and remove all occurrences of</p>
<p><em>
from it. Can the file be validated now? (In the next section, you&#39;ll learn how to define parameter entries so that we can use XHTML in the elements we are defining as part of the slide presentation.)</p>
<h3 id="error-handling-in-the-validating-parser">Error Handling in the Validating Parser</h3>
<p>It is important to recognize that the only reason an exception is thrown when the file fails validation is as a result of the error-handling code you entered in the early stages of this tutorial. That code is reproduced here:
public void error(SAXParseException e) throws SAXParseException {   throw e;}</p>
<p>If that exception is not thrown, the validation errors are simply ignored. Try commenting out the line that throws the exception. What happens when you run the parser now?</p>
<p>In general, a SAX parsing error is a validation error, although you have seen that it can also be generated if the file specifies a version of XML that the parser is not prepared to handle. Remember that your application will not generate a validation exception unless you supply an error handler such as the one here. </p>
<p><a href="http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXPSAX9.html" target="_blank"><a href="http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXPSAX9.html">http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXPSAX9.html</a></a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/ftp/">ftp</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ftp/" class="label label-primary">ftp</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:45"datetime="2014-03-07 09:54:45"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-ftp--ValidateXMLusingaXSD/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-ftp--ValidateXMLusingaXSD" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-wrapper--JavaServiceWrapper-LoggingConfigurationPrope/">Java Service Wrapper </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:45.000Z"> <a href="/2014/02/02/2014-02-02-wrapper--JavaServiceWrapper-LoggingConfigurationPrope/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="java-service-wrapper-logging-configuration-properties">Java Service Wrapper - Logging Configuration Properties</h1>
<p><img src="" alt="World Map">EnglishJapanese (Nihongo)German (Deutsch)</p>
<p><strong>Please  or</strong></p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/" target="_blank"><img src="" alt="Java Service Wrapper Logo"></a></li>
<li><a href="http://www.tanukisoftware.com/" target="_blank"><img src="" alt="Tanuki Software Ltd Logo"></a></li>
</ul>
<p>Java Service Wrapper is the easiest way to make your product more reliable.</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/requestTrial.jsp" target="_blank"><img src="" alt="Free Trial"></a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/accountLicenses.jsp" target="_blank"><img src="" alt="Buy Now"></a></li>
<li><a href="http://www.tanukisoftware.com/" target="_blank">Tanuki Software</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/" target="_blank">Java Service Wrapper</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/download.jsp" target="_blank">Home</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/product-overview.html" target="_blank">Product</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/product-overview.html" target="_blank">Overview</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/product-features.html" target="_blank">Features</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/licenseOverview.html" target="_blank">License</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/faq.html" target="_blank">FAQ</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/download.jsp" target="_blank">Download</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/download.jsp#stable" target="_blank">Stable Release</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/release-notes.html" target="_blank">Release Notes</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/versions.jsp" target="_blank">Past Releases</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/accountLicenses.jsp#purchase" target="_blank">Order</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/accountLicenses.jsp#purchase" target="_blank">Buy now</a></p>
</li>
<li><a href="http://www.tanukisoftware.com/en/distributors.php" target="_blank">Distributors</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/licenseOverview.html" target="_blank">License Overview</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/licenseOverview.html#examples" target="_blank">License FAQ</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/introduction.html" target="_blank">Documentation</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/introduction.html" target="_blank">Introduction</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/integrate.html" target="_blank">Integration Methods</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/launch.html" target="_blank">Launching your Application</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/properties.html" target="_blank">Configuration Properties</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/javadocs.html" target="_blank">Java API</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/i18n.html" target="_blank">Localization / i18n</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/security-model.html" target="_blank">Security Model</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/jmx.html" target="_blank">JMX Control</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/example.html" target="_blank">TestWrapper Application</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/support.jsp" target="_blank">Support</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/debugging.html" target="_blank">Debugging</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/troubleshooting.html" target="_blank">Troubleshooting</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/howto.html" target="_blank">HOWTO</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/qna.html" target="_blank">Questions &amp; Answers</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/faq.html" target="_blank">FAQ</a></li>
<li><a href="http://sourceforge.net/tracker/?group_id=39428" target="_blank">Issue Tracking</a></li>
<li><a href="http://sourceforge.net/mail/?group_id=39428" target="_blank">Maling List</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/support.jsp" target="_blank">Get Support</a></li>
<li><p><a href="http://sourceforge.net/projects/wrapper/" target="_blank">Community</a></p>
</li>
<li><p><a href="http://sourceforge.net/projects/wrapper/" target="_blank">SourceForge Project</a></p>
</li>
<li><a href="http://sourceforge.net/svn/?group_id=39428" target="_blank">Source Repository</a></li>
<li><p><a href="http://www.tanukisoftware.com/en/" target="_blank">About us</a></p>
</li>
<li><p><a href="http://www.tanukisoftware.com/en/company.php" target="_blank">Company Profile</a></p>
</li>
<li><a href="http://www.tanukisoftware.com/en/distributors.php" target="_blank">Distributors</a></li>
<li><a href="http://www.tanukisoftware.com/en/customers.php" target="_blank">Customers</a></li>
<li><a href="http://www.tanukisoftware.com/en/contact.php" target="_blank">Contact us</a></li>
<li><h2 id="properties">Properties</h2>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/properties.html" target="_blank">Configuration Overview</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/properties.html#category" target="_blank">List by Category</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/properties.html#name" target="_blank">List by Name</a></p>
</li>
<li><h2 id="currently-logged-on-">Currently logged on:</h2>
</li>
<li><p>1 users, 100 guests</p>
</li>
<li><h2 id="customers">Customers</h2>
</li>
</ul>
<p>Logging Configuration Properties <a href=""></a> # Logging Configuration Properties Logging properties are used to configure how where the Java Service Wrapper logs internal output as well as JVM output which would normally show up in the console used to launch a Java application. Wrapper Logging properties do not in any way control nor replace Logging tools within the Java application.</p>
<p>[General/Common]</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-adviser.html" target="_blank">wrapper.adviser</a> (3.1.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-debug.html" target="_blank">wrapper.debug</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-filter-x-n.html#action" target="_blank">wrapper.filter.action.<n></a> (3.0.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-filter-x-n.html#allow-wildcards" target="_blank">wrapper.filter.allow_wildcards.<n></a> (3.5.5)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-filter-x-n.html#message" target="_blank">wrapper.filter.message.<n></a> (3.5.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-filter-x-n.html#trigger" target="_blank">wrapper.filter.trigger.<n></a> (3.0.0)</li>
</ul>
<p>[Console]</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-console-flush.html" target="_blank">wrapper.console.flush</a> (3.2.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-console-format.html" target="_blank">wrapper.console.format</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/prop-console-loglevel.html" target="_blank">wrapper.console.loglevel</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/prop-console-x-to-stderr.html" target="_blank">wrapper.console.error_to_stderr</a> (3.5.3)</p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-console-x-to-stderr.html" target="_blank">wrapper.console.fatal_to_stderr</a> (3.5.3)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-console-x-to-stderr.html" target="_blank">wrapper.console.warn_to_stderr</a> (3.5.3)</li>
</ul>
<p>[Command]</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-java-command-loglevel.html" target="_blank">wrapper.java.command.loglevel</a> (3.1.2)</li>
</ul>
<p>[Log File]</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile.html" target="_blank">wrapper.logfile</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-format.html" target="_blank">wrapper.logfile.format</a> (2.2.5)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-inactivity-timeout.html" target="_blank">wrapper.logfile.inactivity.timeout</a> (3.2.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-loglevel.html" target="_blank">wrapper.logfile.loglevel</a> (2.2.5)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-maxfiles.html" target="_blank">wrapper.logfile.maxfiles</a> (2.2.5)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-maxsize.html" target="_blank">wrapper.logfile.maxsize</a> (2.2.5)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-purge-pattern.html" target="_blank">wrapper.logfile.purge.pattern</a> (3.3.8)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-purge-sort.html" target="_blank">wrapper.logfile.purge.sort</a> (3.3.8)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logfile-rollmode.html" target="_blank">wrapper.logfile.rollmode</a> (3.2.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-umask.html#x-umask" target="_blank">wrapper.logfile.umask</a> (3.2.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-log-lf-delay-threshold.html" target="_blank">wrapper.log.lf_delay.threshold</a> (3.5.10)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-log-warning-threshold.html" target="_blank">wrapper.log.warning.threshold</a> (3.5.8)</li>
</ul>
<p>[Log-Dialog]</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logdialog-enable.html" target="_blank">wrapper.logdialog.enable</a> (3.3.1)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logdialog-format.html" target="_blank">wrapper.logdialog.format</a> (3.3.1)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logdialog-lines.html" target="_blank">wrapper.logdialog.lines</a> (3.3.1)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-logdialog-loglevel.html" target="_blank">wrapper.logdialog.loglevel</a> (3.3.1)</li>
</ul>
<p>[Syslog]</p>
<ul>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-syslog-facility.html" target="_blank">wrapper.syslog.facility</a> (3.2.1)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-syslog-ident.html" target="_blank">wrapper.syslog.ident</a> (3.2.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-syslog-local-host.html" target="_blank">wrapper.syslog.local.host</a> (3.5.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-syslog-loglevel.html" target="_blank">wrapper.syslog.loglevel</a> (2.2.5)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-syslog-remote-host.html" target="_blank">wrapper.syslog.remote.host</a> (3.5.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/prop-syslog-remote-port.html" target="_blank">wrapper.syslog.remote.port</a> (3.5.0)</li>
<li><a href="http://wrapper.tanukisoftware.com/" target="_blank"><img src="" alt=""></a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/product-overview.html" target="_blank">Product</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/product-overview.html" target="_blank">Overview</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/product-features.html" target="_blank">Features</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/download.jsp#stable" target="_blank">Download</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/accountLicenses.jsp#purchase" target="_blank">Buy Now</a></li>
<li><a href="http://www.tanukisoftware.com/en/distributors.php" target="_blank">Distribuitors</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/introduction.html" target="_blank">Documentation</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/introduction.html" target="_blank">Introduction</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/integrate.html" target="_blank">Integration Methods</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/properties.html" target="_blank">Configuration Properties</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/javadocs.html" target="_blank">Java API</a></li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/support.jsp" target="_blank">Support</a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/debugging.html" target="_blank">Debugging</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/troubleshooting.html" target="_blank">Troubleshooting</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/qna.html" target="_blank">Questions &amp; Answers</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/faq.html" target="_blank">FAQ</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/english/support.jsp" target="_blank">Get Support</a></li>
<li><p><a href="http://sourceforge.net/projects/wrapper/" target="_blank">Community</a></p>
</li>
<li><p><a href="http://sourceforge.net/projects/wrapper/" target="_blank"><img src="" alt="SourceForge Project"></a></p>
</li>
<li><p><a href="http://wrapper.tanukisoftware.com/doc/english/" target="_blank">English</a></p>
</li>
<li><a href="http://wrapper.tanukisoftware.com/doc/japanese/" target="_blank">日本語</a></li>
<li><a href="http://wrapper.tanukisoftware.com/doc/german/" target="_blank">Deutsch</a>
Copyright (c) 2004-2011, Tanuki Software, Ltd. All Rights Reserved.</li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/wrapper/">wrapper</a></li></span></span> | <span class="tags">Tagged <a href="/tags/wrapper/" class="label label-primary">wrapper</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:45"datetime="2014-03-07 09:54:45"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-wrapper--JavaServiceWrapper-LoggingConfigurationPrope/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-wrapper--JavaServiceWrapper-LoggingConfigurationPrope" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-wrapper--使用JavaServiceWrapper把Java程序作为Windows系统服务--IT/">使用Java Service Wrapper 把Java程序作为Windows系统服务 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:45.000Z"> <a href="/2014/02/02/2014-02-02-wrapper--使用JavaServiceWrapper把Java程序作为Windows系统服务--IT/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-java-service-wrapper-java-windows-iteye-">使用Java Service Wrapper 把Java程序作为Windows系统服务 - - ITeye技术网站</h1>
<p><a href="http://www.iteye.com/" target="_blank">首页</a> <a href="http://www.iteye.com/news" target="_blank">资讯</a> <a href="http://www.iteye.com/magazines" target="_blank">精华</a> <a href="http://www.iteye.com/forums" target="_blank">论坛</a> <a href="http://www.iteye.com/ask" target="_blank">问答</a> <a href="http://www.iteye.com/blogs" target="_blank">博客</a> <a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a> <a href="http://www.iteye.com/groups" target="_blank">群组</a> <a href="http://lbyzx123.iteye.com/blog/248210#" target="_blank">更多 ▼</a></p>
<p><a href="http://www.iteye.com/job" target="_blank">招聘</a> <a href="http://www.iteye.com/search" target="_blank">搜索</a></p>
<p><a href="http://lbyzx123.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://lbyzx123.iteye.com/login" target="_blank">登录</a> <a href="http://lbyzx123.iteye.com/signup" target="_blank">注册</a></p>
<h1 id="-lbyzx123-http-lbyzx123-iteye-com-"><a href="http://lbyzx123.iteye.com/" target="_blank">lbyzx123</a></h1>
<ul>
<li><a href="http://lbyzx123.iteye.com/" target="_blank"><strong>博客</strong></a></li>
<li><a href="http://lbyzx123.iteye.com/weibo" target="_blank">微博</a></li>
<li><a href="http://lbyzx123.iteye.com/album" target="_blank">相册</a></li>
<li><a href="http://lbyzx123.iteye.com/link" target="_blank">收藏</a></li>
<li><a href="http://lbyzx123.iteye.com/blog/guest_book" target="_blank">留言</a></li>
<li><a href="http://lbyzx123.iteye.com/blog/profile" target="_blank">关于我</a></li>
</ul>
<h3 id="-java-service-wrapper-java-windows-"><a href="">使用Java Service Wrapper 把Java程序作为Windows系统服务</a> **</h3>
<p><a href="http://www.iteye.com/blogs/tag/Java" target="_blank">Java</a><a href="http://www.iteye.com/blogs/tag/Windows" target="_blank">Windows</a><a href="http://www.iteye.com/blogs/tag/Tomcat" target="_blank">Tomcat</a><a href="http://www.iteye.com/blogs/tag/%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86" target="_blank">配置管理</a><a href="http://www.iteye.com/blogs/tag/C%23" target="_blank">C/#</a></p>
<p>Java程序很多情况下是作为服务程序运行的，在Un/<em>x平台下可以利用在命令后加“&amp;”把程序作为后台服务运行，但在Windows下看作那个Console窗口在桌面上，你是否一直担心别的同时把你的Console窗口关闭？是否怀念用VC写的Win32服务程序？
翻开JBOSS、Tomcat的发布包，发现他们都使用了一个Open source——Java Service Wrapper。用Java Service Wrapper可以轻松解决我们的需求，让我们的服务程序成为 Win32系统服务。
当然，在Un/</em>x下也可以使用Java Service Wrapper，可以避免加“&amp;”的粗暴方式，导致每天收到一堆mail，通过Java Service Wrapper提供的日志方式查看运行信息。
Java Service Wrapper功能很强大，同时支持Windows及Un/*x平台，提供三种方式把你的Java程序包装成系统服务，这里只介绍最简单的一种方式，因这种方式无需对已有的服务程序作任何改变，仅仅增加几个script、配置文件就可以把你的Java服务程序改造成系统服务程序了。
当然在使用之前需要到<a href="http://sourceforge.net/project/showfiles.php?group_id=39428下载Java" target="_blank">http://sourceforge.net/project/showfiles.php?group_id=39428下载Java</a> Service Wrapper的发布包。
下面简单介绍一下具体的使用步骤：</p>
<ol>
<li>将下载的Java Service Wrapper包解压到本地，目录为{WRAPPER_HOME}；</li>
<li>服务应用程序名为MyServApp，在目录d:\MyServApp下建立bin、conf、logs、lib目录；并把你的已有应用程序如NioBlockingServer.class拷贝到该目录下；</li>
<li>将{WRAPPER_HOME}\src\bin\下的遗以下文件拷贝到MyServApp目录下，并重命名。
{WRAPPER_HOME}\bin\Wrapper.exe  C:\ MyServApp \bin\Wrapper.exe
{WRAPPER_HOME}\src\bin\App.bat.in  C:\ MyServApp\bin\MyApp.bat
{WRAPPER_HOME}\src\bin\InstallApp-NT.bat.in  C:\ MyServApp\bin\InstallMyApp-NT.bat
{WRAPPER_HOME}\src\bin\UninstallApp-NT.bat.in  C:\ MyServApp\bin\UninstallMyApp-NT.bat</li>
<li>将{WRAPPER_HOME}\lib下的以下文件拷贝到C:\ MyServApp \lib目录下
{WRAPPER_HOME}\lib\Wrapper.DLL
{WRAPPER_HOME}\lib\wrapper.jar</li>
<li>将{WRAPPER_HOME}\src\conf\wrapper.conf.in拷贝到C:\ MyServApp \conf目录下并命名为wrapper.conf；并修改wrapper.conf文件，在其中配置您的应用服务。
主要修改以下几项即可：
/#你的JVM位置：
wrapper.java.command=D:\Sun\j2sdk1.4.0_03\bin\java
/#运行参数：如：
wrapper.java.additional.1=-Dprogram.name=run.bat
/#classpath：
wrapper.java.classpath.1=../lib/wrapper.jar
wrapper.java.classpath.2=../bin/.
/# Java Library Path (location of Wrapper.DLL or libwrapper.so)
wrapper.java.library.path.1=../lib
/#MAIN CLASS 此处决定了使用Java Service Wrapper的方式
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp
/#你的Java应用类
wrapper.app.parameter.1= NonBlockingServer
/# 服务名
wrapper.ntservice.name=NB
/# Display name of the service
wrapper.ntservice.displayname=Nio Nonblocking Server
/# 服务描述
wrapper.ntservice.description=Nio Nonblocking Server
其他的配置根据你的需要改变即可</li>
<li>对以上配置的MyApp.bat进行测试，运行MyApp.bat，就像在Console窗口下运行Tomcat一样；</li>
<li>对以上配置的服务进行测试，运行C:\ MyServApp\bin\InstallMyApp-NT.bat将把你的应用（此处为NioBlockingServer）安装到Win32系统服务中了。</li>
<li>打开控制面板－管理程序－服务，看到Nio Nonblocking Server已经在系统服务中了，其他用法就与我们熟悉的Windows服务一样了。
Tomcat使用的是Java Service Wrapper模式二，这种方式需要对已有的程序进行小的改动，但可以通过Socket端口的方式控制服务程序核心的启动，更加灵活。Java Service Wrapper提供的模式三比较复杂，需要作出更多的编码，我没有研究。
采用模式一，即可简单有效的把我们的服务程序包装成为系统服务程序，并增强了日志功能，我们可以把MyServApp的几个文件做成模板，每次修改文件名，配置文件就可以了，有精力的朋友更可以做成Eclipse的plugin，鼠标点点就把应用配成服务了。
附件是一个模板，可以直接修改文件名和配置文件就可以把服务改造了。
希望本文能对大家有所帮助，当然也申请加分了，我的2分实在不够混的了。 <h1 id="-files-cai9911-ntservicewrappertemplate-rar-http-files-cnblogs-com-cai9911-ntservicewrappertemplate-rar-"><a href="http://files.cnblogs.com/cai9911/NTServiceWrapperTemplate.rar" target="_blank">/Files/cai9911/NTServiceWrapperTemplate.rar</a></h1>
自己做的一个例子,可以直接拿来修改:
(写下来备忘)
主要修改config/wrapper.conf 一个地方:
wrapper.app.parameter.1= HelloWorld  &lt;要启动的类&gt;
其他的可以修改应用程序的服务名称等.
<a href="http://files.cnblogs.com/cai9911/JavaService.rar" target="_blank">/Files/cai9911/JavaService.rar</a>
分享到： <a href="&quot;分享到新浪微博&quot;"><img src="" alt=""></a> <a href="&quot;分享到腾讯微博&quot;"><img src="" alt=""></a></li>
</ol>
<p><a href="http://lbyzx123.iteye.com/blog/258505" title="javascript中如何给二维数组赋值？" target="_blank">javascript中如何给二维数组赋值？</a> | <a href="http://lbyzx123.iteye.com/blog/248209" title="an error has occurred.See error log for more deta." target="_blank">an error has occurred.See error log for ...</a></p>
<ul>
<li>2008-09-30 13:40:07</li>
<li>浏览 4068</li>
<li><a href="http://lbyzx123.iteye.com/blog/248210#comments" target="_blank">评论(0)</a></li>
<li><a href="http://www.iteye.com/wiki/blog/248210" target="_blank">相关推荐</a></li>
</ul>
<h3 id="-">评论</h3>
<p><a href=""></a></p>
<h3 id="-">发表评论</h3>
<p><a href="http://lbyzx123.iteye.com/login" target="_blank"><img src="" alt=""></a><a href="http://lbyzx123.iteye.com/login" target="_blank">您还没有登录,请您登录后再发表评论</a></p>
<p><a href="http://lbyzx123.iteye.com/" target="_blank"><img src="&quot;lbyzx123的博客: &quot;" alt="lbyzx123的博客"></a></p>
<p>lbyzx123</p>
<ul>
<li>浏览: 51258 次</li>
<li>性别: <img src="&quot;男&quot;" alt="Icon_minigender_1"></li>
<li>来自: 杭州</li>
<li><img src="" alt=""><h3 id="-http-lbyzx123-iteye-com-blog-user_visits-">最近访客 <a href="http://lbyzx123.iteye.com/blog/user_visits" target="_blank">更多访客&gt;&gt;</a></h3>
</li>
</ul>
<p><a href="http://zhaoyijun.iteye.com/" target="_blank"><img src="&quot;zhaoyijun的博客: &quot;" alt="zhaoyijun的博客"></a></p>
<p><a href="http://zhaoyijun.iteye.com/" target="_blank">zhaoyijun</a></p>
<p><a href="http://yang8580330.iteye.com/" target="_blank"><img src="&quot;yang8580330的博客: &quot;" alt="yang8580330的博客"></a></p>
<p><a href="http://yang8580330.iteye.com/" target="_blank">yang8580330</a>
<a href="http://bgvhuy38.iteye.com/" target="_blank"><img src="&quot;bgvhuy38的博客: &quot;" alt="bgvhuy38的博客"></a></p>
<p><a href="http://bgvhuy38.iteye.com/" target="_blank">bgvhuy38</a></p>
<p><a href="http://taibin.iteye.com/" target="_blank"><img src="&quot;taibin的博客: &quot;" alt="taibin的博客"></a></p>
<p><a href="http://taibin.iteye.com/" target="_blank">taibin</a></p>
<h3 id="-">文章分类</h3>
<ul>
<li><a href="http://lbyzx123.iteye.com/" target="_blank">全部博客 (93)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42284" target="_blank">AJAX (0)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42285" target="_blank">J2EE (11)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42283" target="_blank">数据库 (14)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42286" target="_blank">JAVASCRIPT (16)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42287" target="_blank">哲理 (6)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42315" target="_blank">开发工具问题 (12)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/42316" target="_blank">设计模式 (0)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/44335" target="_blank">ExtJS (10)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/122708" target="_blank">java (9)</a></li>
<li><a href="http://lbyzx123.iteye.com/category/137565" target="_blank">测试 (2)</a></li>
<li><p><a href="http://lbyzx123.iteye.com/category/191171" target="_blank">c++ (1)</a></p>
<h3 id="-">社区版块</h3>
</li>
<li><p><a href="http://lbyzx123.iteye.com/blog/news" target="_blank">我的资讯</a> (0)</p>
</li>
<li><a href="http://lbyzx123.iteye.com/blog/post" target="_blank">我的论坛</a> (1)</li>
<li><a href="http://lbyzx123.iteye.com/blog/solution" target="_blank">我解决的问题</a> (0)</li>
</ul>
<h3 id="-">存档分类</h3>
<ul>
<li><a href="http://lbyzx123.iteye.com/blog/monthblog/2012-01" target="_blank">2012-01</a> (1)</li>
<li><a href="http://lbyzx123.iteye.com/blog/monthblog/2011-12" target="_blank">2011-12</a> (4)</li>
<li><a href="http://lbyzx123.iteye.com/blog/monthblog/2011-11" target="_blank">2011-11</a> (3)</li>
<li><p><a href="http://lbyzx123.iteye.com/blog/monthblog_more" target="_blank">更多存档...</a></p>
<h3 id="-">评论排行榜</h3>
</li>
<li><p><a href="http://lbyzx123.iteye.com/blog/1139428" title="extjs4 异步树的写法" target="_blank">extjs4 异步树的写法</a></p>
</li>
<li><a href="http://lbyzx123.iteye.com/blog/1073789" title="请问一下mysql是不是限制了单个表的容量，能改吗" target="_blank">请问一下mysql是不是限制了单个表的容量， ...</a></li>
<li><a href="http://lbyzx123.iteye.com/blog/1172418" title="三个故事说穿许多人" target="_blank">三个故事说穿许多人</a></li>
</ul>
<h3 id="-">最新评论</h3>
<ul>
<li><a href="http://paradigm.iteye.com/" target="_blank">paradigm</a>： 谢谢
<a href="http://lbyzx123.iteye.com/blog/764985#bc2227490" target="_blank">WebSphere7.0数据源配置与应用程序发布之创建数据源</a></li>
<li><a href="http://gooderlee.iteye.com/" target="_blank">maozilee</a>： windows下面就用NTFS，没事儿！
<a href="http://lbyzx123.iteye.com/blog/1073789#bc2218928" target="_blank">请问一下mysql是不是限制了单个表的容量，能改吗</a></li>
<li><a href="http://lljjssljseye.iteye.com/" target="_blank">lljjssljseye</a>： ...
<a href="http://lbyzx123.iteye.com/blog/1172418#bc2216979" target="_blank">三个故事说穿许多人</a></li>
<li><a href="http://lbyzx123.iteye.com/" target="_blank">lbyzx123</a>： hable 写道看不明白啊,能不能加点注释 很简单呀，既然是异 ...
<a href="http://lbyzx123.iteye.com/blog/1139428#bc2213672" target="_blank">extjs4 异步树的写法</a></li>
<li><a href="http://hable.iteye.com/" target="_blank">hable</a>： 看不明白啊,能不能加点注释
<a href="http://lbyzx123.iteye.com/blog/1139428#bc2213623" target="_blank">extjs4 异步树的写法</a>
声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。
© 2003-2011 ITeye.com. All rights reserved. [ 京ICP证110151号 京公网安备110105010620 ]
<img src="" alt=""></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/wrapper/">wrapper</a></li></span></span> | <span class="tags">Tagged <a href="/tags/wrapper/" class="label label-primary">wrapper</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:45"datetime="2014-03-07 09:54:45"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-wrapper--使用JavaServiceWrapper把Java程序作为Windows系统服务--IT/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-wrapper--使用JavaServiceWrapper把Java程序作为Windows系统服务--IT" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-wrapper--使用JavaServiceWrapper设置tomcat作为linux服务并且开机自动启动-/">使用Java Service Wrapper设置tomcat作为linux服务并且开机自动启动 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:45.000Z"> <a href="/2014/02/02/2014-02-02-wrapper--使用JavaServiceWrapper设置tomcat作为linux服务并且开机自动启动-/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-java-service-wrapper-tomcat-linux-tomcat-java-iteye-">使用Java Service Wrapper设置tomcat作为linux服务并且开机自动启动 - Tomcat - Java - ITeye论坛</h1>
<p><a href="http://www.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://www.iteye.com/login" target="_blank">登录</a> <a href="http://www.iteye.com/signup" target="_blank">注册</a></p>
<p><a href="http://www.iteye.com/" target="_blank"><img src="&quot;ITeye-最棒的软件开发交流社区&quot;" alt="ITeye-最棒的软件开发交流社区"></a></p>
<p>-</p>
<p><a href="http://www.iteye.com/forums" target="_blank">论坛首页</a> → <a href="http://www.iteye.com/forums/board/Java" target="_blank">Java企业应用论坛</a> →</p>
<h1 id="-java-service-wrapper-tomcat-linux-">使用Java Service Wrapper设置tomcat作为linux服务并且开机自动启动</h1>
<p><a href="http://www.iteye.com/forums/board/Java" target="_blank">全部</a> <a href="http://www.iteye.com/forums/tag/Hibernate" target="_blank">Hibernate</a> <a href="http://www.iteye.com/forums/tag/Spring" target="_blank">Spring</a> <a href="http://www.iteye.com/forums/tag/Struts" target="_blank">Struts</a> <a href="http://www.iteye.com/forums/tag/iBATIS" target="_blank">iBATIS</a> <a href="http://www.iteye.com/forums/tag/%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8" target="_blank">企业应用</a> <a href="http://www.iteye.com/forums/tag/Lucene" target="_blank">Lucene</a> <a href="http://www.iteye.com/forums/tag/SOA" target="_blank">SOA</a> <a href="http://www.iteye.com/forums/tag/Java%E7%BB%BC%E5%90%88" target="_blank">Java综合</a> <a href="http://www.iteye.com/forums/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank">设计模式</a> <a href="http://www.iteye.com/forums/tag/Tomcat" target="_blank">Tomcat</a> <a href="http://www.iteye.com/forums/tag/OO" target="_blank">OO</a> <a href="http://www.iteye.com/forums/tag/JBoss" target="_blank">JBoss</a>
<a href="http://www.iteye.com/clicks/593" target="_blank">最成熟稳定甘特图控件,支持Java和.Net</a></p>
<p>浏览 5354 次 锁定老帖子 <a href="">主题：使用Java Service Wrapper设置tomcat作为linux服务并且开机自动启动</a></p>
<p>精华帖 (0) :: 良好帖 (0) :: 新手帖 (0) :: 隐藏帖 (0) 作者 正文 * wenson</p>
<ul>
<li>等级: 初级会员</li>
<li><a href="http://wenson.iteye.com/" target="_blank"><img src="&quot;wenson的博客: 山下的人&quot;" alt="wenson的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 111</li>
<li>积分: 80</li>
<li>来自: 广州</li>
<li><img src="" alt="">
  发表时间：2008-01-11   最后修改：2009-02-02</li>
</ul>
<p><a href="http://www.iteye.com/topic/155159#" target="_blank">&lt;</a> <a href="http://www.iteye.com/topic/155159#" target="_blank">&gt;</a>  猎头职位: <a href="http://www.iteye.com/jobs/1847" target="_blank">北京:  ITeye网站诚聘产品交互设计</a></p>
<p>相关文章: <a href="http://www.iteye.com/topic/155159#" title="关闭" target="_blank"> </a></p>
<ul>
<li><a href="http://www.iteye.com/topic/36657" title="把java程序做成windows服务（转）" target="_blank">把java程序做成windows服务（转）</a></li>
<li><a href="http://www.iteye.com/topic/557980" title="tomcat源码—redirect和forward的实现" target="_blank">tomcat源码—redirect和forward的实现</a></li>
<li><a href="http://www.iteye.com/topic/614683" title="tomcat集群时统计session与在线人数" target="_blank">tomcat集群时统计session与在线人数</a>
推荐群组: <a href="http://ubuntu.group.iteye.com/" target="_blank">Ubuntu For Fun</a>
<a href="http://www.iteye.com/wiki/topic/155159" target="_blank">更多相关推荐</a>
<a href="http://www.iteye.com/forums/tag/Tomcat" target="_blank">Tomcat</a></li>
</ul>
<p>前几天总结了使用JSVC来设置tomcat作为linux服务并且开机自动启动，但是如果要更专业一点来控制tomcat的启动，使用Java Service Wrapper应该不失为一个好的选择，下面来总结一下Java Service Wrapper在Linux中对于tomcat启动的设置：
<strong>1、</strong> 安装JDK、Tomcat,此处略过。比如tomcat安装在/opt/tomcat目录中。
<strong>2</strong> 、使用命令wget 下载Java Service Wrapper(目前版本wrapper-linux-x86-32-3.2.3，官网：<a href="http://wrapper.tanukisoftware.org" target="_blank">http://wrapper.tanukisoftware.org</a>), 用命令tar -zxvf wrapper-linux-x86-32-3.2.3.tar.gz 解压，得到目录wrapper-linux-x86-32-3.2.3，使用ln -s wrapper-linux-x86-32-3.2.3 wrapper 给目录wrapper-linux-x86-32-3.2.3 建一个名称为wrapper的快捷方式。
<strong>3</strong> 、复制wrapper\src\bin\sh.script.in到/opt/tomcat/bin目录，重命名为tomcat
复制wrapper\src\conf\wrapper.conf.in到/opt/tomcat/conf目录，重命名为wrapper.conf
复制wrapper\lib目录下的所有3个文件到/opt/tomcat/lib目录
复制wrapper\bin目录下的wrapper文件到/opt/tomcat/bin目录
<strong>4</strong> 、修改/opt/testapp/bin/tomcat文件
APP_NAME=&quot;tomcat&quot;
APP_LONG_NAME=&quot;Tomcat Application Server&quot;
WRAPPER_CMD=&quot;./wrapper&quot;
WRAPPER_CONF=&quot;../conf/wrapper.conf&quot;
赋予执行权限
chmod 775 /opt/tomcat/bin/tomcat
chmod 775 /opt/tomcat/bin/tomcat
<strong>5</strong> 、修改/opt/tomcat/conf/wrapper.conf文件，如：
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Wrapper Properties
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Java Application
/# 设置环境变量
set.JAVA_HOME=/usr/java/jdk1.6.0_01
set.CATALINA_HOME=/opt/tomcat
set.CATALINA_BASE=/opt/tomcat
wrapper.java.command=/usr/java/jdk1.6.0_01/bin/java
/# Java Main class. This class must implement the WrapperListener interface
/# or guarantee that the WrapperManager class is initialized. Helper
/# classes are provided to do this for you. See the Integration section
/# of the documentation for details.
/# 使用WrapperStartStopApp，这样可以通过命令带start/stop来启动/停止程序。
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperStartStopApp
/# Java Classpath (include wrapper.jar) Add class path elements as
/# needed starting from 1
/# 设置执行tomcat的classpath文件
wrapper.java.classpath.1=%CATALINA_HOME%/lib/wrapper.jar
wrapper.java.classpath.2=%CATALINA_BASE%/bin/bootstrap.jar
/# Java Library Path (location of Wrapper.DLL or libwrapper.so)
/# 设置tomcat的lib路径
wrapper.java.library.path.1=%CATALINA_HOME%/lib/
/# Java Additional Parameters
/# 设置额外参数
wrapper.java.additional.1=-Djava.endorsed.dirs=%CATALINA_HOME%/common/endorsed
wrapper.java.additional.2=-Dcatalina.base=%CATALINA_BASE%
wrapper.java.additional.3=-Dcatalina.home=%CATALINA_HOME%
wrapper.java.additional.4=-Djava.io.tmpdir=%CATALINA_BASE%/temp
/# Initial Java Heap Size (in MB)
/# 设置tomcat的JVM初始化堆的大小
wrapper.java.initmemory=128
/# Maximum Java Heap Size (in MB)
/# 设置tomcat的JVM堆的最大值
wrapper.java.maxmemory=512
/# Application parameters. Add parameters as needed starting from 1
/# 设置启动、停止和重启参数
wrapper.app.parameter.1=org.apache.catalina.startup.Bootstrap
wrapper.app.parameter.2=1
wrapper.app.parameter.3=start
wrapper.app.parameter.4=org.apache.catalina.startup.Bootstrap
wrapper.app.parameter.5=true
wrapper.app.parameter.6=1
wrapper.app.parameter.7=stop
wrapper.filter.trigger.1=java.lang.OutOfMemoryError
wrapper.filter.action.1=RESTART
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Wrapper Logging Properties
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Format of output for the console. (See docs for formats)
wrapper.console.format=PM
/# Log Level for console output. (See docs for log levels)
wrapper.console.loglevel=INFO
/# Log file to use for wrapper output logging.
/# 设置log文件路径
wrapper.logfile=%CATALINA_BASE%/logs/wrapper.log
/# Format of output for the log file. (See docs for formats)
wrapper.logfile.format=LPTM
/# Log Level for log file output. (See docs for log levels)
wrapper.logfile.loglevel=INFO
/# Maximum size that the log file will be allowed to grow to before
/# the log is rolled. Size is specified in bytes. The default value
/# of 0, disables log rolling. May abbreviate with the &#39;k&#39; (kb) or
/# &#39;m&#39; (mb) suffix. For example: 10m = 10 megabytes.
/# 设置log文件最大值
wrapper.logfile.maxsize=5
/# Maximum number of rolled log files which will be allowed before old
/# files are deleted. The default value of 0 implies no limit.
/#设置log文件最多个数
wrapper.logfile.maxfiles=10
/# Log Level for sys/event log output. (See docs for log levels)
wrapper.syslog.loglevel=NONE
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Wrapper Windows Properties
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Title to use when running as a console
/# windows下tomcat控制台名称
wrapper.console.title=Tomcat6 Application Server
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# Wrapper Windows NT/2000/XP Service Properties
/#/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>
/# WARNING - Do not modify any of these properties when an application
/# using this configuration file has been installed as a service.
/# Please uninstall the service before modifying this section. The
/# service can then be reinstalled.
/# Name of the service
/# 设置服务名称
wrapper.ntservice.name=tomcat6
/# Display name of the service
wrapper.ntservice.displayname=@app.long.name@
/# Description of the service
wrapper.ntservice.description=@app.description@
/# Service dependencies. Add dependencies as needed starting from 1
wrapper.ntservice.dependency.1=
/# Mode in which the service is installed. AUTO_START or DEMAND_START
/# 设置允许Tomcat服务自动启动
wrapper.ntservice.starttype=AUTO_START
/# Allow the service to interact with the desktop.
wrapper.ntservice.interactive=false
<strong>6</strong> 、设置tomcat开机自动运行：
ln -s /opt/tomcat/bin/tomcat /etc/init.d/tomcat
<strong>7</strong> 、测试,执行命令：service tomcat start|stop|restart|status
至此，使用Java Service Wrapper来设置Tomcat作为Linux的服务完成，从此过程看来，Java Service Wrapper对tomcat的控制程度比tomcat自带的JSVC深入多了。
目录结构：
/opt/tomcat/bin
                 | tomcat
                 | wrapper
/opt/tomcat/logs
                 | wrapper.log（程序运行时自动产生）
/opt/tomcat/conf
                 | wrapper.conf
/opt/tomcat/lib
                 | libwrapper.so
                 | wrapper.jar
                 | test.jar</p>
<p>声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。</p>
<p>推荐链接</p>
<ul>
<li><a href="http://www.iteye.com/clicks/508" target="_blank">.Net程序员不用羡慕Android程序员，微软移动战役打响</a></li>
<li><a href="http://www.iteye.com/clicks/716" target="_blank">想进外企，出国，跳槽，找工作？英语不好,快来充电吧</a></li>
<li><a href="http://www.iteye.com/clicks/527" target="_blank">100万现金奖培训出来的程序员</a></li>
<li><a href="http://www.iteye.com/clicks/609" target="_blank">-</a> <a href="http://www.iteye.com/topic/155159#" target="_blank">返回顶楼</a> <a href="http://wenson.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://wenson.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=wenson" title="发送站内短信" target="_blank"> </a> <a href="http://wenson.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=wenson" title="关注作者" target="_blank"> </a>  * nwangwei</li>
<li>等级: <img src="&quot;一星会员&quot;" alt="一星会员"></li>
<li><a href="http://nwangwei.iteye.com/" target="_blank"><img src="&quot;nwangwei的博客: nwangwei&quot;" alt="nwangwei的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 41</li>
<li>积分: 130</li>
<li><img src="" alt="">
  发表时间：2008-03-13  </li>
</ul>
<p>棒！
tomcat的shutdown命令老是关不掉全部的java进程 <a href="http://www.iteye.com/topic/155159#" target="_blank">返回顶楼</a> <a href="http://nwangwei.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://nwangwei.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=nwangwei" title="发送站内短信" target="_blank"> </a> <a href="http://nwangwei.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=nwangwei" title="关注作者" target="_blank"> </a> <a href="http://www.iteye.com/topic/155159#485194" title="nwangwei回帖:使用Java Service Wrapper设置tomcat作为linux服务并且开机自动启动" target="_blank">回帖地址</a></p>
<p><a href="http://www.iteye.com/topic/155159#" title="好" target="_blank">0</a> <a href="http://www.iteye.com/topic/155159#" title="差" target="_blank">0</a> 请登录后投票</p>
<p><a href="http://www.iteye.com/forums" target="_blank">论坛首页</a> → <a href="http://www.iteye.com/forums/board/Java" target="_blank">Java企业应用版</a>
跳转论坛:移动开发技术 Web前端技术 Java企业应用 编程语言技术 综合技术 入门技术 招聘求职 海阔天空</p>
<ul>
<li><a href="http://www.iteye.com/jobs/1555" title="北京:美团诚聘资深研发工程师（Java）" target="_blank">北京: 美团诚聘资深研发工程师（Java）</a></li>
<li><a href="http://www.iteye.com/jobs/1554" title="北京:美团诚聘研发工程师（Java）" target="_blank">北京: 美团诚聘研发工程师（Java）</a></li>
<li><a href="http://www.iteye.com/jobs/712" title="北京:ITeye官方招聘和猎头诚聘ITeye网站诚聘Java高级搜索工程师" target="_blank">北京: ITeye官方招聘和猎头诚聘ITeye网站诚聘Java</a></li>
<li><a href="http://www.iteye.com/jobs/2068" title="吉林:用友汽车软件诚聘Java程序员" target="_blank">吉林: 用友汽车软件诚聘Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/1628" title="浙江:阿里巴巴诚聘高级Java工程师" target="_blank">浙江: 阿里巴巴诚聘高级Java工程师</a></li>
<li><a href="http://www.iteye.com/jobs/2078" title="上海:用友汽车软件诚聘项目经理" target="_blank">上海: 用友汽车软件诚聘项目经理</a></li>
<li><a href="http://www.iteye.com/jobs/1144" title="陕西:ThoughtWorks诚聘西安Senior Java Application Developer" target="_blank">陕西: ThoughtWorks诚聘西安Senior Java Applicatio</a></li>
<li><a href="http://www.iteye.com/jobs/2067" title="重庆:用友汽车软件诚聘Java程序员" target="_blank">重庆: 用友汽车软件诚聘Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/750" title="北京:杰嘉迪诚聘高级Java程序员" target="_blank">北京: 杰嘉迪诚聘高级Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/2111" title="北京:中油瑞飞/richfit诚聘JAVA开发工程师" target="_blank">北京: 中油瑞飞/richfit诚聘JAVA开发工程师</a></li>
<li><a href="http://www.iteye.com/jobs/1891" title="北京:北大软件诚聘Java软件开发工程师（技术研发部110809）" target="_blank">北京: 北大软件诚聘Java软件开发工程师（技术研发部</a></li>
<li><a href="http://www.iteye.com/jobs/755" title="北京:杰嘉迪诚聘Java程序员" target="_blank">北京: 杰嘉迪诚聘Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/1231" title="北京:胡莱游戏诚聘年薪8-16万高级Java程序员" target="_blank">北京: 胡莱游戏诚聘年薪8-16万高级Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/1541" title="上海:大众点评诚聘Java高级开发工程师（上海）" target="_blank">上海: 大众点评诚聘Java高级开发工程师（上海）</a></li>
<li><a href="http://www.iteye.com/jobs/2066" title="湖北:用友汽车软件诚聘Java程序员" target="_blank">湖北: 用友汽车软件诚聘Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/1849" title="浙江:阿里巴巴诚聘C++开发工程师(搜索引擎和广告引擎方向，偏底层)" target="_blank">浙江: 阿里巴巴诚聘C++开发工程师(搜索引擎和广告</a></li>
<li><a href="http://www.iteye.com/jobs/2065" title="安徽:用友汽车软件诚聘Java程序员" target="_blank">安徽: 用友汽车软件诚聘Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/2080" title="上海:用友汽车软件诚聘软件研发工程师（实习岗位）" target="_blank">上海: 用友汽车软件诚聘软件研发工程师（实习岗位）</a></li>
<li><p><a href="http://www.iteye.com/jobs/2064" title="上海:用友汽车软件诚聘高级Java程序员" target="_blank">上海: 用友汽车软件诚聘高级Java程序员</a></p>
</li>
<li><p><a href="http://www.iteye.com/" target="_blank">首页</a></p>
</li>
<li><a href="http://www.iteye.com/news" target="_blank">资讯</a></li>
<li><a href="http://www.iteye.com/magazines" target="_blank">精华</a></li>
<li><a href="http://www.iteye.com/forums" target="_blank">论坛</a></li>
<li><a href="http://www.iteye.com/ask" target="_blank">问答</a></li>
<li><a href="http://www.iteye.com/blogs" target="_blank">博客</a></li>
<li><a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a></li>
<li><a href="http://www.iteye.com/groups" target="_blank">群组</a></li>
<li><a href="http://www.iteye.com/job" target="_blank">招聘</a></li>
<li><a href="http://www.iteye.com/search" target="_blank">搜索</a></li>
<li><a href="http://www.ciecloud.org/2012/index.html" target="_blank">云计算大会</a></li>
<li><a href="http://www.iteye.com/index/service" target="_blank">广告服务</a></li>
<li><a href="http://webmaster.iteye.com/" target="_blank">ITeye黑板报</a></li>
<li><a href="http://www.iteye.com/index/contactus" target="_blank">联系我们</a></li>
<li><a href="http://www.iteye.com/index/friend_links" target="_blank">友情链接</a></li>
</ul>
<p>© 2003-2011 ITeye.com. [ <a href="http://www.miibeian.gov.cn/" target="_blank">京ICP证110151号</a> 京公网安备110105010620 ]
百联优力(北京)投资有限公司 版权所有
上海炯耐计算机软件有限公司 提供商务支持 <img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/wrapper/">wrapper</a></li></span></span> | <span class="tags">Tagged <a href="/tags/wrapper/" class="label label-primary">wrapper</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:45"datetime="2014-03-07 09:54:45"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-wrapper--使用JavaServiceWrapper设置tomcat作为linux服务并且开机自动启动-/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-wrapper--使用JavaServiceWrapper设置tomcat作为linux服务并且开机自动启动-" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-wrapper--发布Java程序为Windows（Linux）服务JavaServiceWrapper-/">发布Java程序为Windows（Linux）服务[Java Service Wrapper] </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:45.000Z"> <a href="/2014/02/02/2014-02-02-wrapper--发布Java程序为Windows（Linux）服务JavaServiceWrapper-/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-java-windows-linux-java-service-wrapper-iteye-">发布Java程序为Windows（Linux）服务[Java Service Wrapper] - 点点知识小屋 - ITeye技术网站</h1>
<p><a href="http://www.iteye.com/" target="_blank">首页</a> <a href="http://www.iteye.com/news" target="_blank">资讯</a> <a href="http://www.iteye.com/magazines" target="_blank">精华</a> <a href="http://www.iteye.com/forums" target="_blank">论坛</a> <a href="http://www.iteye.com/ask" target="_blank">问答</a> <a href="http://www.iteye.com/blogs" target="_blank">博客</a> <a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a> <a href="http://www.iteye.com/groups" target="_blank">群组</a> <a href="http://tsunzhang.iteye.com/blog/969521#" target="_blank">更多 ▼</a></p>
<p><a href="http://www.iteye.com/job" target="_blank">招聘</a> <a href="http://www.iteye.com/search" target="_blank">搜索</a></p>
<p><a href="http://tsunzhang.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://tsunzhang.iteye.com/login" target="_blank">登录</a> <a href="http://tsunzhang.iteye.com/signup" target="_blank">注册</a></p>
<h1 id="-http-tsunzhang-iteye-com-"><a href="http://tsunzhang.iteye.com/" target="_blank">点点知识小屋</a></h1>
<ul>
<li><a href="http://tsunzhang.iteye.com/" target="_blank"><strong>博客</strong></a></li>
<li><a href="http://tsunzhang.iteye.com/weibo" target="_blank">微博</a></li>
<li><a href="http://tsunzhang.iteye.com/album" target="_blank">相册</a></li>
<li><a href="http://tsunzhang.iteye.com/link" target="_blank">收藏</a></li>
<li><a href="http://tsunzhang.iteye.com/blog/guest_book" target="_blank">留言</a></li>
<li><a href="http://tsunzhang.iteye.com/blog/profile" target="_blank">关于我</a></li>
</ul>
<h3 id="-java-windows-linux-java-service-wrapper-"><a href="">发布Java程序为Windows（Linux）服务[Java Service Wrapper]</a> **</h3>
<p><strong>博客分类：</strong></p>
<ul>
<li><a href="http://tsunzhang.iteye.com/category/60981" target="_blank">java</a>
<a href="http://www.iteye.com/blogs/tag/Java" target="_blank">Java</a><a href="http://www.iteye.com/blogs/tag/Windows" target="_blank">Windows</a><a href="http://www.iteye.com/blogs/tag/Linux" target="_blank">Linux</a><a href="http://www.iteye.com/blogs/tag/JVM" target="_blank">JVM</a><a href="http://www.iteye.com/blogs/tag/MySQL" target="_blank">MySQL</a></li>
</ul>
<p>☆<strong>下载Windows版本</strong>：(请使用Community版本，因Professional和Standard版本需要购买Licenses)
      ☆假设项目放在目录project文件夹下，发布的包放在project/lib下，日志文件放在project/log下，配置文件放在project/conf下，运行的jar为myjar.jar。
      ☆在下载包后解压，将Java Service Wrapper包中src/bin/的App.bat.in，InstallApp-NT.bat.in，UninstallApp-NT.bat.in和bin/下的wrapper.exe放在project目录下，把后缀.in去掉。【App.bat(可以直接运行程序)，InstallApp-NT.bat(安装成Windows服务)，UninstallApp-NT.bat(卸载Windows服务)】。修改App.bat，InstallApp-NT.bat，UninstallApp-NT.bat中的set _WRAPPER_CONF=&quot;%_REALPATH%conf\wrapper.conf&quot;。
      ☆把Java Service Wrapper包中lib目录下的Wrapper.DLL，wrapper.jar拷贝到project/lib下，在原来的运行的jar文件myjar.jar中的MANIFEST.MF增加Class-Path: 其他jar wrapper.jar wrapper.dll。
      ☆把Java Service Wrapper包中src/conf目录下的wrapper.conf.in放到project/conf下，去掉后缀.in。然后修改为
wrapper.java.classpath.1=dist/wrapper.jar
wrapper.java.classpath.2=dist/myjar.jar
wrapper.java.library.path.1=dist
/#原来程序运行的入口
wrapper.app.parameter.1=myapp.mainClass
wrapper.logfile=log/wrapper.log
wrapper.console.title=MyApp服务
wrapper.ntservice.name=MyApp服务
wrapper.ntservice.displayname=MyApp服务
wrapper.ntservice.description=MyApp服务</p>
<pre><code>  ☆然后直接运行App.bat，如果运行成功的话，然后就可以执行InstallApp-NT.bat发布成Windows服务，然后就可以设置成开机自启动了，不怕别人启动的时候自己的程序没有执行。另外如果在project/bin当成bat的目录的话没这么麻烦。
</code></pre><!-- Linux-->

<p>使用Java Service Wrapper将java程序作为linux服务并且开机自动启动
以java应用程序为例，打包为tianlong.jar，程序入口为tianlong.QueueTest。
下面在linux的/opt下建立tianlong目录，复制tianlong.jar到/opt/tianlong/lib目录下。
1、下载Java Service Wrapper(请使用Community版本，因Professional和Standard版本需要购买Licenses), 解压。 
      <a href="http://wrapper.tanukisoftware.org/" target="_blank"><a href="http://wrapper.tanukisoftware.org/">http://wrapper.tanukisoftware.org/</a></a>
      复制src\bin\sh.script.in到/opt/tianlong/bin目录，重命名为QueueTest
      复制wrapper\bin目录下的wrapper文件到/opt/tianlong/bin目录
      复制src\conf\wrapper.conf.in到/opt/tianlong/conf目录，重命名为wrapper.conf
      复制src\lib\lib目录下3个文件到/opt/tianlong/lib目录
              wrapper.so
              wrapper.jar
              wrappertest.jar
2、修改/opt/tianlong/bin/QueueTest文件
      APP_NAME=&quot;QueueTest&quot; //注意这里，这里的应用服务名称应该与第1步的/opt/tianlong/bin里面的  QueueTest名字相同
      APP_LONG_NAME=&quot;QueueTest Application Server&quot;
      WRAPPER_CMD=&quot;./wrapper&quot; //这里的路径要写正确，这里是对应了/opt/tianlong/bin/wrapper这个文件
      WRAPPER_CONF=&quot;../conf/wrapper.conf&quot; //这里的路径要写正确，这里是对应了/opt/tianlong/conf/wrapper.conf这个文件
      赋予执行权限
      chmod 775 /opt/testapp/bin/SocketServer
      chmod 775 /opt/testapp/bin/wrapper
3、修改/opt/tianlong/conf/wrapper.conf文件
      wrapper.java.command=/usr/java/jdk1.6.0_07/bin/java   //这里是写java的安装路径
      使用WrapperStartStopApp，这样可以通过命令带start/stop来启动/停止程序。
      wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperStartStopApp
      /#这里添加你用到的jar包文件，从1..n你自己全写上吧，不过wrapper是必须的
      wrapper.java.classpath.1=../lib/wrapper.jar
      wrapper.java.classpath.2=../lib/tianlong.jar     //这里表示将打包好的tianlong.jar放在/opt/tianlong/lib这个文件夹中
      wrapper.java.classpath.3=../lib/asterisk-java-0.3.jar
      wrapper.java.classpath.4=../lib/mysql-connector-java-5.1.6-bin.jar
      wrapper.java.classpath.5=/usr/java/jdk1.6.0_07/lib/dt.jar
      wrapper.java.classpath.6=/usr/java/jdk1.6.0_07/lib/tools.jar
      wrapper.java.classpath.7=../cofig.properties   //这个是应用程序用到的配置文件。如果使用的应用程序需要用到  配置，就需要把这个文件包含进来
      wrapper.java.library.path.1=../lib   //这里是表示wrapper使用到的jar包的路径，一般默认即可，绝对路径是：/opt/tianlong/lib
      /#wrapper.java.initmemory=3
        JVM启动时的初始内存大小,当前是3M,如果要自定义，将/#去掉，设置自己的值即可。
      /#wrapper.java.maxmemory=64
      JVM启动时的最大内存使用量,当前是64M,如果要自定义，将/#去掉，设置自己的值即可。
      /#这个就是你自己可执行程序的主类(MainClass)，一般来说，就是包含public static void main的那个类
      wrapper.app.parameter.1=tianlong.QueueTest
      wrapper.app.parameter.2=1
      wrapper.app.parameter.3=true
      wrapper.app.parameter.4=tianlong.QueueTest
      wrapper.app.parameter.5=true
      wrapper.app.parameter.6=1
      wrapper.app.parameter.7=stop
4、让QueueTest开机自动运行
      ln -s /opt/tianlong/bin/QueueTest  /etc/init.d/QueueTest
      ln -s /opt/tianlong/bin/QueueTest /etc/rc0.d/QueueTest
      ln -s /opt/tianlong/bin/QueueTest /etc/rc1.d/QueueTest
      ln -s /opt/tianlong/bin/QueueTest /etc/rc2.d/QueueTest
      ln -s /opt/tianlong/bin/QueueTest /etc/rc3.d/QueueTest
      ln -s /opt/tianlong/bin/QueueTest /etc/rc4.d/QueueTest
      ln -s /opt/tianlong/bin/QueueTest /etc/rc5.d/QueueTest
      ln -s /opt/tianlong/bin/QueueTest /etc/rc6.d/QueueTest
5、测试 执行命令：service QueueTest start|stop|restart|status
      程序运行时，Java Service Wrapper在/opt/tianlong/bin/目录下产生wrapper.log日志，
      STATUS | wrapper  | 2009/02/25 17:04:01 | --&gt; Wrapper Started as Daemon
      STATUS | wrapper  | 2009/02/25 17:04:01 | Java Service Wrapper Community Edition 3.3.2
      STATUS | wrapper  | 2009/02/25 17:04:01 |   Copyright (C) 1999-2009 Tanuki Software, Ltd.  All Rights Reserved.
      STATUS | wrapper  | 2009/02/25 17:04:01 |     <a href="http://wrapper.tanukisoftware.org" target="_blank">http://wrapper.tanukisoftware.org</a>
      STATUS | wrapper  | 2009/02/25 17:04:01 |
      STATUS | wrapper  | 2009/02/25 17:04:01 | Launching a JVM...
      INFO   | jvm 1    | 2009/02/25 17:04:02 | WrapperManager: Initializing...
出现上面这个就表示已经配置成功了。如果配置有错误的话，在wrapper.log里面会有提示。
同时，如果程序配置成功的并且启动的话，在/opt/tianlong/bin里面会有一个QueueTest.pid。
附目录结构
/opt/tianlong/
    cofig.properties
/opt/tianlong/bin
                 | QueueTest
                 | wrapper
                 | wrapper.log（程序运行时自动产生）
/opt/tianlong/conf
                | wrapper.conf
/opt/tianlong/lib
                | libwrapper.so
                | wrapper.jar
                | tianlong.jar
                | mysql-connector-java-5.1.6-bin.jar
                | asterisk-java-0.3.jar</p>
<ul>
<li><a href="http://dl.iteye.com/topics/download/b2a3facb-d7b0-3245-b5be-4eec51a884aa" target="_blank">wrapper-linux-x86-32-3.5.7.tar.gz</a> (415.6 KB)</li>
<li><p>下载次数: 15</p>
</li>
<li><p><a href="http://dl.iteye.com/topics/download/8d826566-6eae-330c-b75f-9607844f3ea2" target="_blank">wrapper-windows-x86-32-3.5.7.zip</a> (556.5 KB)</p>
</li>
<li>下载次数: 5</li>
</ul>
<p>分享到： <a href="&quot;分享到新浪微博&quot;"><img src="" alt=""></a> <a href="&quot;分享到腾讯微博&quot;"><img src="" alt=""></a>
<a href="http://tsunzhang.iteye.com/blog/970749" title="log4j配置简要说明" target="_blank">log4j配置简要说明</a> | <a href="http://tsunzhang.iteye.com/blog/899637" title="EXP-××××: 问题处理方法(整理中..)" target="_blank">EXP-××××: 问题处理方法(整理中..)</a></p>
<ul>
<li>2011-03-21 16:18:34</li>
<li>浏览 411</li>
<li><a href="http://tsunzhang.iteye.com/blog/969521#comments" target="_blank">评论(0)</a></li>
<li>分类:<a href="http://www.iteye.com/blogs/category/language" target="_blank">编程语言</a></li>
<li><a href="http://www.iteye.com/wiki/blog/969521" target="_blank">相关推荐</a><h3 id="-">评论</h3>
</li>
</ul>
<p><a href=""></a></p>
<h3 id="-">发表评论</h3>
<p><a href="http://tsunzhang.iteye.com/login" target="_blank"><img src="" alt=""></a><a href="http://tsunzhang.iteye.com/login" target="_blank">您还没有登录,请您登录后再发表评论</a></p>
<p><a href="http://tsunzhang.iteye.com/" target="_blank"><img src="&quot;coconut_zhang的博客: 点点知识小屋&quot;" alt="coconut_zhang的博客"></a></p>
<p>coconut_zhang</p>
<ul>
<li>浏览: 62966 次</li>
<li>性别: <img src="&quot;男&quot;" alt="Icon_minigender_1"></li>
<li>来自: 天津</li>
<li><img src="" alt=""><h3 id="-http-tsunzhang-iteye-com-blog-user_visits-">最近访客 <a href="http://tsunzhang.iteye.com/blog/user_visits" target="_blank">更多访客&gt;&gt;</a></h3>
</li>
</ul>
<p><a href="http://jjunxiao.iteye.com/" target="_blank"><img src="&quot;jjunxiao的博客: jjunxiao&quot;" alt="jjunxiao的博客"></a></p>
<p><a href="http://jjunxiao.iteye.com/" target="_blank">jjunxiao</a></p>
<p><a href="http://eyubean-163-com.iteye.com/" target="_blank"><img src="&quot;毛广斌的博客: &quot;" alt="毛广斌的博客"></a></p>
<p><a href="http://eyubean-163-com.iteye.com/" target="_blank">毛广斌</a>
<a href="http://alex-zeng.iteye.com/" target="_blank"><img src="&quot;alex.zeng的博客: &quot;" alt="alex.zeng的博客"></a></p>
<p><a href="http://alex-zeng.iteye.com/" target="_blank">alex.zeng</a></p>
<p><a href="http://return-space.iteye.com/" target="_blank"><img src="&quot;return_space的博客: &quot;" alt="return_space的博客"></a></p>
<p><a href="http://return-space.iteye.com/" target="_blank">return_space</a></p>
<h3 id="-">文章分类</h3>
<ul>
<li><a href="http://tsunzhang.iteye.com/" target="_blank">全部博客 (128)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/60979" target="_blank">hibernate,struts,spring (9)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/60981" target="_blank">java (28)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/60982" target="_blank">c,c++,c/# (39)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/60983" target="_blank">eclipse,myeclipse,lomboz (2)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/60984" target="_blank">tomcat,weblogic (2)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/60985" target="_blank">javascript,ajax,web (4)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/60980" target="_blank">oracle,sqlserver,mysql,sql (22)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/104329" target="_blank">linux,unix,windows (11)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/61096" target="_blank">文摘 (2)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/104330" target="_blank">生活 (0)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/183172" target="_blank">javascript (2)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/183173" target="_blank">ajax (2)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/183174" target="_blank">web (2)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/186108" target="_blank">strtus2.0实现上传 (1)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/186109" target="_blank">hibernate (3)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/186110" target="_blank">struts (3)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/186111" target="_blank">spring (3)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/187825" target="_blank">tomcat (2)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/187826" target="_blank">weblogic (1)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/191426" target="_blank">linux (1)</a></li>
<li><a href="http://tsunzhang.iteye.com/category/191427" target="_blank">unix (1)</a></li>
<li><p><a href="http://tsunzhang.iteye.com/category/191428" target="_blank">windows (1)</a></p>
<h3 id="-">社区版块</h3>
</li>
<li><p><a href="http://tsunzhang.iteye.com/blog/news" target="_blank">我的资讯</a> (0)</p>
</li>
<li><a href="http://tsunzhang.iteye.com/blog/post" target="_blank">我的论坛</a> (221)</li>
<li><a href="http://tsunzhang.iteye.com/blog/solution" target="_blank">我解决的问题</a> (0)</li>
</ul>
<h3 id="-">存档分类</h3>
<ul>
<li><a href="http://tsunzhang.iteye.com/blog/monthblog/2012-02" target="_blank">2012-02</a> (3)</li>
<li><a href="http://tsunzhang.iteye.com/blog/monthblog/2011-11" target="_blank">2011-11</a> (4)</li>
<li><a href="http://tsunzhang.iteye.com/blog/monthblog/2011-10" target="_blank">2011-10</a> (3)</li>
<li><p><a href="http://tsunzhang.iteye.com/blog/monthblog_more" target="_blank">更多存档...</a></p>
<h3 id="-">评论排行榜</h3>
</li>
<li><p><a href="http://tsunzhang.iteye.com/blog/1064298" title="关于shell脚本中报 “/bin/sh^M: bad interpreter: 没有那个文件或目录”的解决方法" target="_blank">关于shell脚本中报 “/bin/sh^M: bad int ...</a></p>
</li>
</ul>
<h3 id="-">最新评论</h3>
<ul>
<li><a href="http://ronqi.iteye.com/" target="_blank">RonQi</a>： 今天在CentOS上面做Tomcat的自启动，那个脚本文件是在 ...
<a href="http://tsunzhang.iteye.com/blog/1064298#bc2221452" target="_blank">关于shell脚本中报 “/bin/sh^M: bad interpreter: 没有那个文件或目录”的解决方法</a></li>
<li><a href="http://huqingwei311.iteye.com/" target="_blank">huqingwei311</a>： 非常感谢楼主，我的问题也解决了
<a href="http://tsunzhang.iteye.com/blog/758378#bc2216263" target="_blank">struts2与jasperreport整合不能显示图片imgags/px</a></li>
<li><a href="http://beisicao.iteye.com/" target="_blank">beisicao</a>： ...
<a href="http://tsunzhang.iteye.com/blog/732624#bc2208607" target="_blank">Applet安全限制和签名Applet</a></li>
<li><a href="http://tsunzhang.iteye.com/" target="_blank">coconut_zhang</a>： hastune 写道Struts2拦截器都是放在栈里的。 AO ...
<a href="http://tsunzhang.iteye.com/blog/811566#bc1997752" target="_blank">Struts2拦截器执行顺序</a></li>
<li><a href="http://hastune.iteye.com/" target="_blank">hastune</a>： Struts2拦截器都是放在栈里的。AOP就是需要一个Invo ...
<a href="http://tsunzhang.iteye.com/blog/811566#bc1997073" target="_blank">Struts2拦截器执行顺序</a>
声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。
© 2003-2011 ITeye.com. All rights reserved. [ 京ICP证110151号 京公网安备110105010620 ]
<img src="" alt=""></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/wrapper/">wrapper</a></li></span></span> | <span class="tags">Tagged <a href="/tags/wrapper/" class="label label-primary">wrapper</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:45"datetime="2014-03-07 09:54:45"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-wrapper--发布Java程序为Windows（Linux）服务JavaServiceWrapper-/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-wrapper--发布Java程序为Windows（Linux）服务JavaServiceWrapper-" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/8/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/6/">6</a></li><li><a class="page-number" href="/page/7/">7</a></li><li><a class="page-number" href="/page/8/">8</a></li><li class="active"><li><span class="page-number current">9</span></li><li><a class="page-number" href="/page/10/">10</a></li><li><a class="page-number" href="/page/11/">11</a></li><li><a class="page-number" href="/page/12/">12</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/163/">163</a></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="extend next" href="/page/10/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Site powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a>  update time: <em>2014-03-29 22:06:56</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
