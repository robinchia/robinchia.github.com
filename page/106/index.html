
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 106 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-zhiya-技术之路--一位技术人员成长历程/">一位技术人员成长历程</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-zhiya-技术之路--一位技术人员成长历程/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-">一位技术人员成长历程</h1>
<p><img src="" alt="">
4、坚持了第一个月，再坚持半年，以后的学习速度越来越快，你离专家、技术大牛就越来越近了。</p>
<h2 id="-http-www-iteye-com-topic-672554-">下面这篇文章，只是我<a href="http://www.iteye.com/topic/672554" target="_blank">一篇博客</a>的回复，但我认为可以单独作为一篇文章。</h2>
<p>首先声明，我不是Expert，但我发现很多有成就的技术大牛，很多都在30岁左右，这类人，一般都是23岁左右毕业，工作两年后，开始从事自己感兴趣的细分行业。
打个比方吧，这位牛人23岁毕业，做了两年嵌入式C编程，25岁时，突然对Java的优雅设计情有独钟，而正好这时，公司有个Java项目，Java技术之旅开始了。
<strong>1、</strong>最开始三个月，开始接触Java，比如接口、继承、封装等，买了本《Think in Java》天天啃，并且同时做项目实践。猛学了三个月后，对面向对象编程OOP熟悉了，原来脚本式思维和对象思维确实有差别。
<strong>2、</strong>三个月后，开始啃《Core Java》，《Effective Java》，对Java有了更深入的了解，回调的概念也有了，逐渐接触到更高的层次，面向对象设计OOD，这时又看了一本书《Head First Design Patterns》，感觉设计模式特别有趣。再写代码，已经不是面向实现编程，而是面向设计编程。感觉写Java代码太简单了。
因为每天还有Java的Web项目开发，逐渐了解了WebWork等Web框架的使用。
<strong>3、</strong>六个月过去了，Java瘾越来越大，逐渐开始往更高层次攀登，这时，又看到两本书《企业应用架构模式》、《UML和模式应用：面向对象分析与设计导论》，已经开始从设计往面向对象分析OOA、架构攀登了。
因为大半年的Java企业开发，Hibernate已经比较熟悉了，了解Hibernate背后的持久化技术、Spring背后的IoC容器、组装技术原理。
<strong>4、</strong>一年后，他逐渐脱离了Java语言，开始看这类书《面向模式的软件体系结构 卷1》。这个阶段持续了一年，并且对以前的学过的设计模式，如命令模式、观察家模式有一个更深入的了解。
因为两年的企业应用开发，他已经熟悉了Java EE的十来种规范，对Web容器和Servlet规范的关系有很深的理解，对JDBC规范和数据库驱动程序的关系也很了解。
他正在经历Java开发的快速上升期，对应于<strong>曲线的一年时间点</strong>。
<strong>5、</strong>两年后，他突然发现，他学的很多东西都没用，都是纸上谈兵，比如，在自己的企业应用开发中，Command模式、Template从来没有用过。
他还发现，本来100行写的一个功能，花了1000行，就是为了所谓的设计优雅性：可扩展。而实际上，还没有等到扩展，该系统就已经废掉了。
他发现原来设计模式主要用在系统框架开发，而不是应用开发，一般开发人员不用，只需要理解。
他还发现，他认真学过的JMS、JCA、JTA、EJB像是从来没有用过。突然他想通了，JMS、JTA可能是一种无奈的选择：处理遗留系统。
当他开始对自己两年学到的知识进行反省、批驳时，他已经有了技术辨别能力，知道技术推广也不是那么纯洁，也有商业炒作。
知道Java虽然是Sun公司发明的，但Sun公司没有赚到钱，IBM却赚得盆满钵满，最后Sun公司竟然卖给了技术商人Ellison所创立的Oracle了，Java之父James Gosling也混得并不好，从Sun公司到Oracle，最后还不欢离开了。
这时候，他已经不限于Java了，开始了解C/#，Ruby，发现Java可能并不太适合互联网开发，PHP可能更适合，ROR开发更快但需要在牛人的手里。两年后的这个时候，他才开始真正驾驭Java，他已经不再限于Java，而是企业应用。
这个时候，技术提升的速度越来越慢了(<strong>曲线的三年分界点</strong>)，因为不知道还可以学习什么新技术。因为他发现，原来这些东西，最深层次的，都是几十年前的技术概念：消息系统、异步通讯、事件机制等等....
<strong>6、</strong>三年过去后，他已经不再限于企业应用，而是解决方案，技术只是一种解决问题的方式，比如企业信息化成功的关键，恐怕不是技术，而是企业本身的业务流程成熟度；企业信息化成功的关键，不是处理好了技术，而是处理好了几位企业高官的利益。
这时候，对IT行业新闻，逐渐有判断力和免疫力。
他突然发现，技术的力量很有限，商业才是最大的驱动力量。而此时，他已经不再钻研技术细节，比如JVM的垃圾回收机制，如果他在一个技术研发型公司，比如普元，可能还会深入挖掘技术。如果他在东软这类行业应用开发企业，这类企业的口号是Beyond Technology，这时候他再执迷于技术而轻业务，恐怕不太受欢迎。
这个时候，技术的提升，就会进入一个平台期，也就是<strong>曲线的水平部分</strong>。再平稳发展，技术大牛就开始炼成了。</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/zhiya/">zhiya</a></li></span><span class="breadcrumb"><li><a href="/categories/职涯/">职涯</a></li><li><a href="/categories/职涯/技术之路/">技术之路</a></li></span></span> | <span class="tags">Tagged <a href="/tags/zhiya/" class="label label-primary">zhiya</a><a href="/tags/技术之路/" class="label label-success">技术之路</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-zhiya-技术之路--一位技术人员成长历程/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-zhiya-技术之路--一位技术人员成长历程" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-正则--使用Java正则表达式匹配、替换HTML内容/">使用Java正则表达式匹配、替换HTML内容</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-正则--使用Java正则表达式匹配、替换HTML内容/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-java-html-">使用Java正则表达式匹配、替换HTML内容</h1>
<p><a href="http://www.51cto.com/" target="_blank">51CTO首页</a> | <a href="http://news.51cto.com/" target="_blank">新闻</a> | <a href="http://www.51cto.com/col/35" target="_blank">专题</a> | <a href="http://bbs.51cto.com/" target="_blank">论坛</a> | <a href="http://blog.51cto.com/" target="_blank">博客</a> | <a href="http://g.51cto.com/" target="_blank">技术圈</a> | <a href="http://book.51cto.com/" target="_blank">读书</a> | <a href="http://www.51cto.com/col/35/" target="_blank">技术频道</a>| <a href="http://www.cioage.com/" target="_blank">CIO</a>| <a href="http://www.watchstor.com/" target="_blank">存储</a>| <a href="http://www.51cto.com/about/map.htm" target="_blank">地图</a> | <a href="http://www.51cto.com/about/aboutus_e.html" target="_blank">English</a></p>
<ul>
<li><a href="http://network.51cto.com/" target="_blank">组网建网</a></li>
<li><a href="http://netsecurity.51cto.com/" target="_blank">网络安全</a></li>
<li><a href="http://server.51cto.com/" target="_blank">服务器</a></li>
<li><a href="http://os.51cto.com/" target="_blank">操作系统</a></li>
<li><a href="http://virtual.51cto.com/" target="_blank">虚拟化</a></li>
<li><a href="http://developer.51cto.com/" target="_blank">开发</a></li>
<li><a href="http://www.cioage.com/news" target="_blank">资讯前沿</a></li>
<li><a href="http://www.cioage.com/insight" target="_blank">业界观察</a></li>
<li><a href="http://www.cioage.com/exp" target="_blank">应用体验</a></li>
<li><p><a href="http://www.cioage.com/tech" target="_blank">杀手技术</a></p>
</li>
<li><p><a href="http://news.watchstor.com/" target="_blank">新闻资讯</a></p>
</li>
<li><a href="http://tech.watchstor.com/" target="_blank">技术中心</a></li>
<li><a href="http://video.watchstor.com/" target="_blank">互动视频</a></li>
<li><a href="http://special.watchstor.com/" target="_blank">专题汇聚</a>
<em>
</em>
<em>
</em></li>
</ul>
<p><img src="" alt=""></p>
<p><a href="http://developer.51cto.com/" target="_blank">首页</a> | <a href="http://developer.51cto.com/java/" target="_blank">Java</a> | <a href="http://developer.51cto.com/.net/" target="_blank">.Net</a> | <a href="http://developer.51cto.com/web/" target="_blank">Web</a> | <a href="http://developer.51cto.com/col/1315/" target="_blank">XML</a> | <a href="http://developer.51cto.com/col/585/" target="_blank">语言工具</a> | <a href="http://developer.51cto.com/col/1312/" target="_blank">测试</a> | <a href="http://developer.51cto.com/col/1314/" target="_blank">游戏</a> | <a href="http://developer.51cto.com/col/583/" target="_blank">移动</a> | <a href="http://developer.51cto.com/col/1308/" target="_blank">架构</a> | <a href="http://developer.51cto.com/col/586/" target="_blank">项目管理</a> | <a href="http://publish.51cto.com/list/460/" target="_blank">全部文章</a>
<a href=""></a>
您所在的位置： <a href="http://www.51cto.com/" target="_blank">首页</a> &gt; <a href="http://developer.51cto.com/" target="_blank">开发</a> &gt; <a href="http://developer.51cto.com/col/461/" target="_blank">JAVA</a> &gt; <a href="http://developer.51cto.com/col/1000/" target="_blank">JAVA专区</a> &gt; <a href="http://developer.51cto.com/col/1005/" target="_blank">基础教程</a> &gt;</p>
<h1 id="-java-html-">使用Java正则表达式匹配、替换HTML内容</h1>
<p><a href="http://developer.51cto.com/" target="_blank"><a href="http://developer.51cto.com/">http://developer.51cto.com/</a></a>  2009-06-10 13:51    新浪科技  <a href="http://www.51cto.com/php/feedbackt.php?id=127998" target="_blank">我要评论(0)</a></p>
<ul>
<li>摘要：本文向您介绍使用Java正则表达式匹配和替换HTML的内容，作者介绍了两种方法，一种用于替换链接地址，一种用于替换图片。</li>
<li>标签：<a href="http://www.51cto.com/php/search.php?keyword=Java%D5%FD%D4%F2%B1%ED%B4%EF%CA%BD" target="_blank">Java正则表达式</a>  <a href="http://www.51cto.com/php/search.php?keyword=%C6%A5%C5%E4" target="_blank">匹配</a>  <a href="http://www.51cto.com/php/search.php?keyword=%CC%E6%BB%BB" target="_blank">替换</a>
*</li>
</ul>
<p>曾经了解过JavaScript的正则表达式，知道其功能的强大，对于处理文本比用普通的API处理不管从效率上还是从功能上都有很大的优势。今天项目要求用到Java的正则表达式，于是在网上Google，找到一个Jakarta ORO的库，听说是Java中功能最强大的正则表达式库，确实也如此，Sun公司的JDK里自带的正则表达式功能是远远不如ORO库，从正则表达式的角度上看，其比普通的API处理文本是复杂很多。</p>
<p>但如果应用得恰当的话，会提高工程的质量，于是项目中就应用了这个ORO库，把浏览器请求得到的HTML页面进行解释替换实现一个代理采集信息的功能。感觉自己好像是在开发软件，不是在设计网页。正则表达式有一个很好用的工具--RegexBuddy，应用这个工具可以调度一个匹配你需要的正则表达式串，经过几番调度，把一些HTML标签的正则表达式匹配出来。</p>
<p>第一：像网页链接<a .......... href="[url1]" .......>之间的内容中[URL[绝对地址替换成相对地址，首先要查找匹配这个链接，查找匹配这个串的正则表达式串为</p>
<p><em>(&lt;</em><a href=""><em>\s/</em>a\s+(?:[^\s&gt;]\s/<em>){0,})href\s/</em>=\s/<em>(\&quot;|&#39;|)([^\2\s&gt;]/</em>)\2((?:\s/<em>[^\s&gt;]){0,}\s</em></a><em>/</em>&gt;)*</p>
<ol>
<li>//查找匹配的代码如下：  </li>
<li>String  patternStrs=&quot;(&lt;\s/<em>a\s+(?:[^\s&gt;]\s/</em>){0,})href\s/<em>=\s/</em>
(\&quot;|&#39;|)([^\2\s&gt;]/<em>)\2((?:\s/</em>[^\s&gt;]){0,}\s /*&gt;)&quot;;  </li>
<li>PatternCompiler complier = new Perl5Compiler();  </li>
<li>PatternMatcher matcher = new Perl5Matcher();  </li>
<li></li>
<li>Pattern patternForLink = complier.compile(patternStrs,  </li>
<li>Perl5Compiler.  </li>
<li>CASE_INSENSITIVE_MASK);  </li>
<li>PatternMatcherInput input = new PatternMatcherInput(htmlContent);  </li>
<li>while (matcher.contains(input, patternForLink)) {  </li>
<li>MatchResult match = matcher.getMatch();  </li>
<li>//处理匹配的结果，是要替换还是要其他处理  </li>
<li>}  </li>
<li></li>
</ol>
<p>第二：对其他的标签也类似只要把匹配的字符串改一下为要匹配的标签就可以了。(如IMG标签)</p>
<p><em>(&lt;\s/</em>img\s+(?:[^\s&gt;]\s/<em>){0,})src\s/</em>=\s/<em>(&quot;|&#39;|)([^\2\s&gt;]/</em>)\2((?:\s/<em>[^\s&gt;]){0,}\s/</em>&gt;)，*这样就可以处理</p>
<p><img.....................src="[url]"...............>的标签匹配，对其他的标签也一样.</p>
<p>总结：对于大量要处理的文本，建议还是用到正则表达式，而要处理的文本比较少时，用普通的字符串API处理函数就足够了。</p>
<p>【编辑推荐】</p>
<ol>
<li><a href="http://developer.51cto.com/art/200906/127741.htm" target="_blank">Java正则表达式的解释说明</a></li>
<li><a href="http://developer.51cto.com/art/200906/127717.htm" target="_blank">JAVA正则表达式4种常用的功能</a></li>
<li><a href="http://developer.51cto.com/art/200906/127640.htm" target="_blank">Java正则表达式之group()</a></li>
<li><a href="http://developer.51cto.com/art/200902/110238.htm" target="_blank">Java正则表达式入门</a></li>
<li><a href="http://developer.51cto.com/art/200812/100610.htm" target="_blank">Java正则表达式初学者使用法简介</a>
【责任编辑：<a href="mailto:liusn@51cto.com">red7</a> TEL：（010）68476606】
原文：<a href="http://developer.51cto.com/art/200906/127998.htm" target="_blank">使用Java正则表达式匹配、替换HTML内容</a></li>
</ol>
<p>上一篇： <a href="http://developer.51cto.com/art/200906/127994.htm" target="_blank">Java正则表达式工具类实例</a> 下一篇： <a href="http://developer.51cto.com/art/200906/128100.htm" target="_blank">Java GUI的发展和演化简史</a></p>
<ul>
<li><img src="" alt=""> 相关文章</li>
<li>·<a href="http://developer.51cto.com/art/200906/131761.htm" title="浅谈Java正则表达式中的Pattern类与Matcher类" target="_blank">浅谈Java正则表达式中的Pattern类与Matcher类</a></li>
<li>·<a href="http://developer.51cto.com/art/200906/127994.htm" title="Java正则表达式工具类实例" target="_blank">Java正则表达式工具类实例</a></li>
<li>·<a href="http://developer.51cto.com/art/200906/127741.htm" title="Java正则表达式的解释说明" target="_blank">Java正则表达式的解释说明</a></li>
<li>·<a href="http://developer.51cto.com/art/200906/127717.htm" title="JAVA正则表达式4种常用的功能" target="_blank">JAVA正则表达式4种常用的功能</a></li>
<li><p>·<a href="http://developer.51cto.com/art/200906/127640.htm" title="Java正则表达式之group()" target="_blank">Java正则表达式之group()</a></p>
</li>
<li><p><img src="" alt=""> 频道热门</p>
</li>
<li>·<a href="http://developer.51cto.com/art/200907/137210.htm" title="半数软件开发商因收购重新审视Java" target="_blank">半数软件开发商因收购重新审视Java</a></li>
<li>·<a href="http://developer.51cto.com/art/200907/138415.htm" title="Google Wave将于九月底面向10万用户公测" target="_blank">Google Wave将于九月底面向10万用户公测</a></li>
<li>·<a href="http://database.51cto.com/art/200907/137239.htm" title="MySQL一派添“轻功”Drizzle+PHP抢先体验" target="_blank">MySQL一派添“轻功”Drizzle+PHP抢先体验</a></li>
<li>·<a href="http://developer.51cto.com/art/200907/138027.htm" title="Windows 7千人核心开发团队揭秘 " target="_blank">Windows 7千人核心开发团队揭秘</a></li>
<li>·<a href="http://developer.51cto.com/art/200907/138074.htm" title="Ruby高手点评Scala编程语言十大绝招" target="_blank">Ruby高手点评Scala编程语言十大绝招</a></li>
</ul>
<p><a href="http://developer.51cto.com/art/200907/138855.htm" title="ASP.NET数据库开发手册" target="_blank"><img src="" alt="ASP.NET数据库开发手册"></a></p>
<p><a href="http://developer.51cto.com/art/200907/133817.htm" title="51CTO教你做SEO狂人" target="_blank"><img src="" alt="51CTO教你做SEO狂人"></a>
<a href="http://developer.51cto.com/art/200907/133407.htm" title="HTML 5 下一代Web开发标准详解" target="_blank"><img src="" alt="HTML 5 下一代Web开发标准详解"></a></p>
<p><a href="http://developer.51cto.com/art/200906/127830.htm" title="Scala编程语言" target="_blank"><img src="" alt="Scala编程语言"></a>
<a href="http://developer.51cto.com/art/200905/124179.htm" title="大型网站架构技术专家谈" target="_blank"><img src="" alt="大型网站架构技术专家谈"></a>
<a href="http://www.51cto.com/php/feedbackt.php?id=127998" target="_blank">查看所有评论</a>()</p>
<p> 验证码： <img src="" alt=""> (点击刷新验证码)   匿名发表</p>
<h2 id="-http-developer-51cto-com-click-1005-"><a href="http://developer.51cto.com/click/1005" target="_blank">频道推荐</a></h2>
<p><a href="http://developer.51cto.com/click/1005" target="_blank">更多&gt;&gt;</a></p>
<ul>
<li>·<a href="http://developer.51cto.com/art/200907/137210.htm" title="半数软件开发商因收购重新审视Java" target="_blank">半数软件开发商因收购重新审视Java</a></li>
<li>·<a href="http://developer.51cto.com/art/200907/138415.htm" title="Google Wave将于九月底面向10万用户公测" target="_blank">Google Wave将于九月底面向10万用户公测</a></li>
<li>·<a href="http://database.51cto.com/art/200907/137239.htm" title="MySQL一派添“轻功”Drizzle+PHP抢先体验" target="_blank">MySQL一派添“轻功”Drizzle+PHP抢先体验</a><h2 id="-http-www-51cto-com-"><a href="http://www.51cto.com/" target="_blank">热点标签</a></h2>
</li>
</ul>
<p><a href="http://server.51cto.com/Blade" title="刀片服务器专区" target="_blank">刀片服务器</a>   <a href="http://cloud.51cto.com/" title="云计算频道全新上线" target="_blank">云计算</a>   <a href="http://netsecurity.51cto.com/art/200609/31897.htm" title="ARP攻击与防御" target="_blank">ARP攻防</a>   <a href="http://training.51cto.com/cisco" title="思科培训技术专区" target="_blank">思科培训</a>  </p>
<h2 id="-http-www-51cto-com-"><a href="http://www.51cto.com/" target="_blank">全站热点</a></h2>
<p><a href="http://www.51cto.com/" target="_blank">更多&gt;&gt;</a></p>
<p><a href="http://netsecurity.51cto.com/art/200609/31897.htm" title="ARP攻击防范与解决方案" target="_blank"><img src="" alt="ARP攻击防范与解决方案"></a></p>
<p><a href="http://netsecurity.51cto.com/art/200609/31897.htm" title="ARP攻击防范与解决方案" target="_blank">ARP攻击防范与..</a></p>
<p><a href="http://training.51cto.com/art/200804/71335.htm" title="2009年上半年软考最新试题与答案" target="_blank"><img src="" alt="2009年上半年软考最新试题与答案"></a></p>
<p><a href="http://training.51cto.com/art/200804/71335.htm" title="2009年上半年软考最新试题与答案" target="_blank">2009年上半年..</a></p>
<ul>
<li>·<a href="http://network.51cto.com/art/200907/137241.htm" title="成本速度定成败 四种宽带接入技术大比拼" target="_blank">成本速度定成败 四种宽带接入技术大比拼</a></li>
<li>·<a href="http://netsecurity.51cto.com/art/200907/132905.htm" title="H3C交换机配置案例：防止同网段ARP攻击" target="_blank">H3C交换机配置案例：防止同网段ARP攻击</a></li>
<li>·<a href="http://news.51cto.com/art/200907/137687.htm" title="7月第3周要闻回顾：Firefox兵祸连结 微软谷歌再起战端" target="_blank">7月第3周要闻回顾：Firefox兵祸连结 微软谷歌..</a></li>
<li>·<a href="http://developer.51cto.com/art/200907/137210.htm" title="半数软件开发商因收购重新审视Java" target="_blank">半数软件开发商因收购重新审视Java</a></li>
<li>·<a href="http://fellow.51cto.com/art/200907/137755.htm" title="熊猫烧香主犯将出狱 接受专访称想去大网络公司工作" target="_blank">熊猫烧香主犯将出狱 接受专访称想去大网络公司..</a></li>
</ul>
<h2 id="-http-fellow-51cto-com-"><a href="http://fellow.51cto.com/" target="_blank">技术人</a></h2>
<p><a href="http://fellow.51cto.com/" target="_blank">更多&gt;&gt;</a>
<a href="http://fellow.51cto.com/art/200906/130832.htm" title="乔布斯病假月底结束 能否上岗决定苹果前途" target="_blank"><img src="" alt=""></a></p>
<p><a href="http://fellow.51cto.com/art/200906/130832.htm" title="乔布斯病假月底结束 能否上岗决定苹果前途" target="_blank">乔布斯病假月底..</a></p>
<p><a href="http://fellow.51cto.com/art/200906/126354.htm" title="魔兽易主，三大矛盾存隐患" target="_blank"><img src="" alt=""></a></p>
<p><a href="http://fellow.51cto.com/art/200906/126354.htm" title="魔兽易主，三大矛盾存隐患" target="_blank">魔兽易主，三大..</a></p>
<ul>
<li>·<a href="http://fellow.51cto.com/art/200907/137755.htm" title="熊猫烧香主犯将出狱 接受专访称想去大网络公司工作" target="_blank">熊猫烧香主犯将出狱 接受专访称想去大网络公司..</a></li>
<li>·<a href="http://fellow.51cto.com/art/200907/137213.htm" title="魔兽玩家掀起史上最大规模维权 称行政审批应便民" target="_blank">魔兽玩家掀起史上最大规模维权 称行政审批应便..</a></li>
<li>·<a href="http://training.51cto.com/art/200907/137727.htm" title="职业教育与学历教育，哪个更重要？" target="_blank">职业教育与学历教育，哪个更重要？</a></li>
<li>·<a href="http://job.51cto.com/art/200907/137196.htm" title="Sun股东批准与甲骨文合并 8月或能完成协议" target="_blank">Sun股东批准与甲骨文合并 8月或能完成协议</a></li>
<li>·<a href="http://fellow.51cto.com/art/200907/138008.htm" title="富士康25岁员工跳楼自杀 据称曾遭公司拘禁殴打" target="_blank">富士康25岁员工跳楼自杀 据称曾遭公司拘禁殴打</a><h2 id="-http-book-51cto-com-"><a href="http://book.51cto.com/" target="_blank">读书</a></h2>
</li>
</ul>
<p><a href="http://book.51cto.com/" target="_blank">更多&gt;&gt;</a></p>
<p><a href="http://book.51cto.com/art/200907/137586.htm" title="我也能做CTO之程序员职业规划" target="_blank"><img src="" alt=""></a></p>
<ul>
<li><h2 id="-cto-http-book-51cto-com-art-200907-137586-htm-"><a href="http://book.51cto.com/art/200907/137586.htm" target="_blank">我也能做CTO之程序员职业规划</a></h2>
</li>
<li>作者：高阳</li>
<li>你是否每天例行的上下班很累，感觉自己就像一个木头人被推着走这走那？你是否感觉不满：重复的工作真的很无聊，目前凭我的能力..</li>
<li>·<a href="http://book.51cto.com/art/200906/131809.htm" title="Java程序员 上班那点事儿" target="_blank">Java程序员 上班那点事儿</a></li>
<li>·<a href="http://book.51cto.com/art/200906/131503.htm" title="亮剑.NET. 图解C#开发实战" target="_blank">亮剑.NET. 图解C/#开发实战</a></li>
<li>·<a href="http://book.51cto.com/art/200907/134805.htm" title="Oracle PL/SQL实例精解" target="_blank">Oracle PL/SQL实例精解</a></li>
<li>·<a href="http://book.51cto.com/art/200907/133513.htm" title="把脉VC++" target="_blank">把脉VC++</a></li>
</ul>
<h2 id="-http-blog-51cto-com-"><a href="http://blog.51cto.com/" target="_blank">优秀博文</a></h2>
<p><a href="http://blog.51cto.com/" target="_blank">更多&gt;&gt;</a></p>
<h2 id="-http-bbs-51cto-com-hotthreads-php-"><a href="http://bbs.51cto.com/hotthreads.php" target="_blank">最新热帖</a></h2>
<p><a href="http://bbs.51cto.com/hotthreads.php" target="_blank">更多&gt;&gt;</a></p>
<h2 id="-http-www-51cto-com-col-1323-"><a href="http://www.51cto.com/col/1323/" target="_blank">技术快讯</a></h2>
<p><a href="http://www.51cto.com/col/1323/" target="_blank">查看样刊</a></p>
<p><a href=""></a>
<a href=""></a></p>
<p>Copyright©2005-2009 51CTO.COM 版权所有</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/正则/">正则</a></li></span></span> | <span class="tags">Tagged <a href="/tags/正则/" class="label label-primary">正则</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-正则--使用Java正则表达式匹配、替换HTML内容/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-正则--使用Java正则表达式匹配、替换HTML内容" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Httpclient--AdvancedHTTPClientInfo/">Advanced HTTPClient Info</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-Httpclient--AdvancedHTTPClientInfo/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="advanced-httpclient-info">Advanced HTTPClient Info</h1>
<h1 id="advanced-httpclient-info">Advanced HTTPClient Info</h1>
<h2 id="contents">Contents</h2>
<ul>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#proxies" target="_blank">Proxies</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#timeouts" target="_blank">Timeouts</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#out_streams" target="_blank">Output Streams</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#contexts" target="_blank">Contexts</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#pers_con" target="_blank">Persistent Connections (Keep-Alive&#39;s)</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#close_con" target="_blank">Closing Connections</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#pipelining" target="_blank">Pipelining</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#conn_details" target="_blank">Relationship between HTTPConnection instances and TCP connections</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#threading" target="_blank">Multithreading</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#urlcon" target="_blank">HttpURLConnection</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#prot_vers" target="_blank">Protocol Version</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#modules" target="_blank">Modules</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#properties" target="_blank">Java System Properties recognized by HTTPClient</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#headers" target="_blank">HTTP Header Fields</a></li>
<li><a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#specs" target="_blank">HTTP (and related) Specifications</a></li>
</ul>
<h2 id="-proxies-"><a href="">Proxies</a></h2>
<p>Support for proxies (including SOCKS) is fully implemented. However, using proxies in applets is subject to a number of security restrictions (see <a href="http://www.innovation.ch/java/HTTPClient/security.html" target="_blank">security</a> for more information on the various security policies and the consequences that arise from them). If you are using an http proxy then use the <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setProxyServer(java.lang.String, int" target="_blank">HTTPConnection.setProxyServer()</a>) method to set the default proxy for all new HTTPConnections; <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setCurrentProxy(java.lang.String, int" target="_blank">HTTPConnection.setCurrentProxy()</a>) can be used to set a proxy for the current HTTPConnection only. You can also manipulate a list of hosts for which no proxy is to be used with the methods <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#dontProxyFor(java.lang.String" target="_blank">HTTPConnection.dontProxyFor()</a>) and <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#doProxyFor(java.lang.String" target="_blank">HTTPConnection.doProxyFor()</a>). Example:
HTTPConnection.setProxyServer(&quot;my.proxy.dom&quot;, 8008); HTTPConnection.dontProxyFor(&quot;localhost&quot;); HTTPConnection.dontProxyFor(&quot;.mycompany.com&quot;); AuthorizationInfo.addBasicAuthorization(&quot;my.proxy.dom&quot;, 8008, realm, user, passwd); ... HTTPConnection con = new HTTPConnection(...);This will cause all connections to use the proxy (and automatically authenticate with it) except when connecting to localhost or any other machine within the company.</p>
<p>If you are using SOCKS then the method to use is <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setSocksServer(java.lang.String" target="_blank">setSocksServer()</a>). Note that both an http proxy and a SOCKS proxy can be set at the same time, in which case a request is sent via the SOCKS server to the proxy server, which in turn relays the request to the desired destination.</p>
<p>Some proxies will proxy for protocols other than http using http to contact the proxy itself. If you have such a proxy then you can use the HTTPClient to do requests for other protocols through the proxy. To do this you need to create an HTTPConnection to the proxy itself (i.e. <em>don&#39;t</em> use <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setCurrentProxy(java.lang.String, int" target="_blank">setCurrentProxy()</a>) or <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setProxyServer(java.lang.String, int" target="_blank">setProxyServer()</a>)) and specify the full URL of the file/article/whatever in the Get(), Put(), etc. Example: if you want to retrieve the file /pub/README via ftp from rtfm.mit.edu then you could use something like:
HTTPConnection proxy = new HTTPConnection(&quot;my.proxy.dom&quot;, 8000); HTTPResponse resp = proxy.Get(&quot;ftp://rtfm.mit.edu/pub/README&quot;); ...</p>
<h2 id="-timeouts-"><a href="">Timeouts</a></h2>
<p>Sometimes one doesn&#39;t want to wait (almost) forever until a connection is established to the server or until the server answers. In this case a timeout can be set using the methods <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setDefaultTimeout(int" target="_blank">HTTPConnection.setDefaultTimeout()</a>) and <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setTimeout(int" target="_blank">HTTPConnection.setTimeout()</a>). Setting a timeout will cause the client to limit the time it will spend trying to get the hosts IP-address and establishing a connection with the server, and it will also set the timeout on the socket while reading the response.</p>
<p><strong>Note:</strong> if a timeout occurs while reading the response (i.e. an InterruptedIOException is thrown) then doing another</p>
<p>read()
may or may not lose data, depending on what streams have been pushed on the response input stream. In general all HTTPClient streams are restartable, but those from the JDK aren&#39;t (e.g GZIPInputStream). This means that if such a stream has been pushed onto the stack (typically when a compression content-coding or transfer-coding was used) and an InterruptedIOException occurs then chances are the response data will be corrupted.</p>
<h2 id="-output-streams-"><a href="">Output Streams</a></h2>
<p>All request methods which may send data (such as POST and PUT) take either a byte[] or an <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HttpOutputStream.html" target="_blank">HttpOutputStream</a>. Using the latter may be beneficial when sending large amounts of data because it streams the data directly over the socket in many cases. However, restrictions on many servers may prevent the streaming, necessitating buffering of the data by the HttpOutputStream. The class documentation gives the full details, but in summary here are the things to consider: if you know the length of the data beforehand then use the appropriate constructor and you will be able to stream the data to any server. If you do not know the length beforehand then you may encounter problems, in which case you&#39;ll need to set the java system property HTTPClient.dontChunkRequests to true, and all data will be buffered by the client and only sent when the stream is close()&#39;d.</p>
<p>Various modules (such as the RedirectionModule and AuthorizationModule) need to resend certain requests in order to do their job. However, if the request used an HttpOutputStream then they cannot do so; in such cases the application will have to handle those statuses itself. In order to partially solve this problem, an application may set the java system property HTTPClient.deferStreamed to true. Requests which need resending (and which used an HttpOutputStream) are then remembered by the modules and the <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPResponse.html#retryRequest(" target="_blank">retry flag</a>) in the response is set to true. The application can then check this flag, and if it&#39;s true just blindly resend the request; the modules will detect the resend and apply the appropriate modifications (such as adding the necessary Authorization header field, or changing the request-uri to a new location).</p>
<h2 id="-contexts-"><a href="">Contexts</a></h2>
<p>By default all authorization info, cookies, permanent redirection lists, etc. are shared between all instance of HTTPConnection. However, there are cases where one wants to simulate multiple independent clients or users within the same application. To enable this the HTTPClient a supports a concept called contexts. Each HTTPConnection instance has an associated context, which can be any Object at all, and which can be set using (<a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setContext(java.lang.Object" target="_blank">HTTPConnection.setContext()</a>)). All instances of HTTPConnection which have the same context will share all info on cookies, authorization info, etc. This is done by having each <a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#modules" target="_blank">module</a> which keeps information on behalf of the application (such as the cookie module, the authorization module and the redirection module) use a separate list for each context. By setting the context for each HTTPConnection instance appropriately, you can control exactly which instances share data and which don&#39;t.</p>
<p>Note that you can&#39;t have more than one context per HTTPConnection, i.e. you need at least one separate instance of HTTPConnection for each client.</p>
<p>Example: suppose you want to simulate 3 independent clients, each having two HTTPConnection instances. Then you could do something like:
HTTPConnection cl1_con1 = new HTTPConnection(...); HTTPConnection cl1_con2 = new HTTPConnection(...); cl1_con1.setContext(&quot;client1&quot;); cl1_con2.setContext(&quot;client1&quot;); HTTPConnection cl2_con1 = new HTTPConnection(...); HTTPConnection cl2_con2 = new HTTPConnection(...); cl2_con1.setContext(&quot;client2&quot;); cl2_con2.setContext(&quot;client2&quot;); HTTPConnection cl3_con1 = new HTTPConnection(...); HTTPConnection cl3_con2 = new HTTPConnection(...); cl3_con1.setContext(&quot;client3&quot;); cl3_con2.setContext(&quot;client3&quot;);</p>
<p>As mentioned above, the context may be any object at all. So, if in the above example you were going to run each client in a separate thread then you could use the thread itself as the context (e.g.</p>
<p>con.setContext(Thread.currentThread());
). If no context is set a default context is used which is the same for all HTTPConnection&#39;s. Therefore applications which don&#39;t need this feature can just ignore it.</p>
<h2 id="-persistent-connections-keep-alive-s-"><a href="">Persistent Connections (Keep-Alive&#39;s)</a></h2>
<p>The Hypertext Transfer Protocol originally allowed only one request per TCP connection. However, establishing a TCP connection is fairly expensive time wise, so that some implementors of HTTP/1.0 added so called Keep-Alive&#39;s to keep a connection open after a request was completed and to allow further requests to be made over that connection. Unfortunately, this was not well defined and is broken in the face of proxies. HTTP/1.1 defines persistent connections correctly and even makes them the default.</p>
<p>The HTTPClient will by default try to keep a connection alive for as many requests as possible, both when talking to HTTP/1.0 and HTTP/1.1 servers. To disable persistent connections you can specify a Connection header with the value close. Example:
NVPair[] def_hdrs = { new NVPair(&quot;Connection&quot;, &quot;close&quot;) }; con.setDefaultHeaders(def_hdrs);</p>
<p>This will disable persistent connections for all future request (unless overridden by a connection header on the request method call).</p>
<p>Keeping the socket connection to the server open after a request is fine as long as another request follows within a short period of time. However when you are done you should let the library know by passing the above</p>
<p>&quot;Connection: close&quot;
header with the last request. Furthermore, to limit the length of time the connection will be held open a timer is started after each request which will close the socket connection if no further requests arrive within the next 60 seconds.</p>
<p>Note that most of this is transparent as far as the functioning of the requests is concerned; the only differences you will notice is in the time required for a request to be sent. Also note that persistent connections are only done within the context of a given instance of HTTPConnection; so if you create two instances both pointing at the same server then they will create separate connections to the server.</p>
<h2 id="-closing-connections-"><a href="">Closing Connections</a></h2>
<p>The HTTPClient will close a socket as soon as it has determined that no more data will arrive on the socket or that any outstanding data is to be discarded. However, this is not always easy to do, and in at least one common case the client will keep a connection open indefinitely unless a simple precaution is taken (see below).</p>
<p>A socket is closed when one of the five following conditions occurs:</p>
<ul>
<li>an exception occurs during read or write.</li>
<li>the connection timeout triggers and no responses are outstanding (note this is <em>not</em> the timeout set by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setTimeout(int" target="_blank">HTTPConnection.setTimeout()</a>), but an internal, hard coded 60 second timeout).</li>
<li>all response streams on the connection have been closed, up to and including a terminal response.</li>
<li><a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#stop(" target="_blank">stop()</a>) is invoked on the HTTPConnection.</li>
<li>the stream demultiplexer is finalized.</li>
</ul>
<p>A &quot;terminal&quot; response is a response for which client has determined that the connection should be closed after it has been fully received. This includes the server sending a</p>
<p>&quot;Connection: close&quot;
(in the case of an HTTP/1.1 server) or not sending a</p>
<p>Connection: keep-alive
(in the case of an HTTP/1.0 server) with the response, the response having no Content-length and no self-delimiting body, or the receipt of certain error status codes.</p>
<p>As can be seen from above, a basic condition for the connection to be closed is that the response streams have been closed. This is necessary because the client can&#39;t distinguish between a slow application which takes its time to read the response and an application which is not interested in the response. Failing to close the response streams can lead to a lot of open connections hanging around, which will eventually cause you to run out of file descriptors (on a Unix box - socket descriptors on Windoze). Therefore it is important that you <strong>always close the response stream</strong> of every response. This can be done either by invoking</p>
<p>resp.getData()
or invoking</p>
<p>close()
on the stream from</p>
<p>resp.getInputStream()
(where resp is the HTTPResponse). If you are not interested in the response data you can just do a</p>
<p>resp.getInputStream().close()
.</p>
<h2 id="-pipelining-"><a href="">Pipelining</a></h2>
<p>If the connection is kept open across requests then the requests may be pipelined. Pipelining here means that a new request is sent before the response to a previous request is received. Since this can obviously enhance performance by reducing the overall round-trip time for a series of requests to the same server, the HTTPClient has been written to support pipelining (at the expense of some extra code to keep track of the outstanding requests).</p>
<p>The programming model is always the same: for every request you send you get a response back which contains the headers and data of the servers response. Now, to support pipelining, the fields in the response aren&#39;t necessarily filled in yet when the HTTPResponse object is returned to the caller (i.e. the actual response headers and data haven&#39;t been read off the net), but the first call to any method in the response (e.g. a getStatusCode()) will wait till the response has actually been read and parsed. Also any previous requests will be forced to read their responses if they have not already done so (so e.g. if you send two consecutive requests and receive responses r1 and r2, calling</p>
<p>r2.getHeader(&quot;Content-type&quot;)
will first force the complete response r1 to be read before reading the response r2). All this should be completely transparent, except for the fact that invoking a method on one response may sometimes take a few seconds to complete, while the same method on a different response will return immediately with the desired info.</p>
<h2 id="-relationship-between-httpconnection-instances-and-tcp-connections-"><a href="">Relationship between HTTPConnection instances and TCP connections</a></h2>
<p>The relationship between an HTTPConnection instance and actual TCP connections (instances of java.net.Socket) is as follows: each HTTPConnection instance creates its own sockets, i.e. sockets are not shared between instances. Sockets are created on demand, just before a request is sent (so creating an HTTPConnection instance does <em>not</em> immediately cause a TCP connection to be opened). A new socket is only created if either the current socket (if any) has been closed, or the previous request/response over it has determined that it will be closed at the end that response.</p>
<p>Some implications of the above are that 1) applications can control the number of parallel TCP connections to some degree by creating multiple instances of HTTPConnection pointing to the same server, but 2) that control is not absolute: if the server does not support keep-alive&#39;s and the application sends requests before having the read the response to the previous request, then you may end up with multiple parallel TCP connections from the same HTTPConnection instance.</p>
<h2 id="-multithreading-"><a href="">Multithreading</a></h2>
<p>The HTTPClient is completely multithread safe (or at least should be ;-). A single HTTPConnection instance may be shared between multiple threads, multiple requests may be run concurrently on a single or multiple HTTPConnection instances, and you may even have multiple threads reading on a single response (though I&#39;m not sure that the latter makes much sense). Because a number of parameters are on a per HTTPConnection instance basis (such as the module list, proxy settings, default headers, etc), care should be taken when modifying these parameters if the HTTPConnection instance is shared among multiple threads.</p>
<h2 id="-httpurlconnection-"><a href="">HttpURLConnection</a></h2>
<p>The <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HttpURLConnection.html" target="_blank">HttpURLConnection</a> class provides a java.net.HttpURLConnection compatible interface to the HTTPClient. It exists mainly to allow the HTTPClient to be used as a direct plug-in replacement for Sun&#39;s HttpClient (part of the JDK); if you are writing HTTPClient specific code, then I recommend using the HTTPClient&#39;s &quot;native&quot; API, i.e. HTTPConnection et. al.</p>
<p>The HttpURLConnection follows the model of java.net.URLConnection and java.net.HttpURLConnection in that each instance is only capable of doing a single request (i.e. a new instance must be created for each request, usually via</p>
<p>URL.openConnection()
or</p>
<p>URL.openStream()
). To enable reuse of connections, HttpURLConnection manages a pool of HTTPConnection&#39;s internally. Different instances of HttpURLConnection will use the same HTTPConnection if they have the same host and port. This way socket connections are reused as much as possible (i.e. you still get to take advantage of the persistent connections capability). In addition, <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HttpURLConnection.html#connect(" target="_blank">connect()</a>) will only send the request but not read or parse the response; only when a method such as</p>
<p>getInputStream()
,</p>
<p>getResponseCode()
, etc, is invoked is the response read and parsed. This, together with the reuse of HTTPConnection&#39;s, allows requests to be pipelined by explicitly invoking</p>
<p>connect()
. Example:
URLConnection con1 = url1.openConnection(); con1.connect(); // sends first request URLConnection con2 = url2.openConnection(); con2.connect(); // sends second request InputStream is1 = con1.getInputStream(); // waits for first response InputStream is2 = con2.getInputStream(); // waits for second response</p>
<h2 id="-protocol-version-"><a href="">Protocol Version</a></h2>
<p>The request protocol version sent is always HTTP/1.1, except in a few circumstances when a broken server is encountered, in which case the version sent reverts to HTTP/1.0. An HTTP/0.9 request is never sent.</p>
<p>The protocol version returned by the server is used to select between different mechanisms for persistent connections. If the server advertises itself as being HTTP/1.1 compliant then HTTP/1.1 persistent connections are used; otherwise HTTP/1.0 keep-alive&#39;s are used (the difference is the tokens used in the Connection header for signaling persistence and the end of a connection). Apart from this, the only other distinction made between talking to an HTTP/1.0 or an HTTP/1.1 server is in how request are automatically retried (retried requests with a body need to use slightly different mechanisms for determining how long to wait after sending the headers, before sending the body).</p>
<h2 id="-modules-"><a href="">Modules</a></h2>
<p>A number of functions of the HTTPClient, such as authorization and redirection handling, are broken out into <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPClientModule.html" target="_blank">modules</a>. Modules can be dynamically added and removed, thereby allowing certain functionality to be disabled or new functionality to be added without having to modify any of the core code. Each connection has a list of modules it will use to process a request and response. When a request method is invoked (such as</p>
<p>Get()
or</p>
<p>Post()
) the request is first assembled into a <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/Request.html" target="_blank">Request</a> instance. Then the <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPClientModule.html#requestHandler(HTTPClient.Request,HTTPClient.Response[]" target="_blank">request handler</a>) of each module is invoked in turn with this request. This handler may modify the request (such as add headers) or even generate a response directly (such as a cache might do). Only after all handlers have been invoked (and none of them generated a response) is the request actually sent over the wire. Similarly, when a response is read the <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPClientModule.html#responsePhase1Handler(HTTPClient.Response,HTTPClient.RoRequest" target="_blank">response handlers</a>) in each module are invoked in turn. They may do certain things based on the status code (such as the redirection module) or the headers (such as the cookie module), modify the response, or even generate a new request (such as in the redirection and authentication modules). If a new request is generated the process starts from the top again.</p>
<p>The currently supplied modules are the AuthorizationModule, the RedirectionModule, the ContentEncodingModule, the TransferEncodingModule, the CookieModule, the ContentMD5Module, the RetryModule and the DefaultModule. These are explained in more detail further down.</p>
<p>Modules can be dynamically added and removed to tailor the request and response processing desired. The methods <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#addDefaultModule(java.lang.Class, int" target="_blank">HTTPConnection.addDefaultModule()</a>), <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#removeDefaultModule(java.lang.Class" target="_blank">HTTPConnection.removeDefaultModule()</a>) and <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#getDefaultModules(" target="_blank">HTTPConnection.getDefaultModules()</a>) manipulate and return the list of default modules which is used when a new <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a> is created. Similarly, the methods <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#addModule(java.lang.Class, int" target="_blank">HTTPConnection.addModule()</a>), <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#removeModule(java.lang.Class" target="_blank">HTTPConnection.removeModule()</a>) and <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#getModules(" target="_blank">HTTPConnection.getModules()</a>) manipulate and return the list of current modules for an HTTPConnection instance. Note that for the modules which are not public you must get their Class objects via Class.forName() (e.g. to remove the redirection module, use</p>
<p>con.removeModule(Class.forName(&quot;HTTPClient.RedirectionModule&quot;))
).</p>
<p>The default list of modules is initialized from the java system property HTTPClient.Modules. This property must be a &quot;|&quot; separated list of class names. If this property is not set it defaults to all the classes listed below. Normally if during class initialization any module in the list does not exist or cannot be instantiated then an Error is thrown. However, if this is being used in an unsigned applet then the error is suppressed. This way applets can limit the modules loaded over the net by simply not providing them (remember, they can&#39;t set system properties due to security restrictions).</p>
<p>You may create your own modules and add them using the above methods. Any module you write must implement the <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPClientModule.html" target="_blank">HTTPClientModule</a> interface. See the API docs more info. <strong>Note:</strong> this interface may change. If you write a module and find the interface insufficient or difficult, please contact me. Also, if you write a module which you think might be of general usefulness and would like to make it freely available, let me know.</p>
<p>Here is a short description of each module.</p>
<h3 id="-authorizationmodule-"><a href="">AuthorizationModule</a></h3>
<p>Authorization briefly described in <a href="http://www.innovation.ch/java/HTTPClient/getting_started.html#auth" target="_blank">Getting Started</a>. As mentioned, this module will handle both server and proxy authorization requests (status codes 401 and 407). In addition to the &#39;Basic&#39; and &#39;Digest&#39; authorization schemes, the AuthorizationModule can be made to handle other schemes as well, so long as they are not &quot;too exotic&quot; (i.e. they follow the simple challenge-response mechanism outlined in the http specs); this is done by setting your own <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/AuthorizationHandler.html" target="_blank">AuthorizationHandler</a>. Of course, if you need to something more sophisticated you can always plug in your own authorization module.</p>
<p>When confronted with an authorization request the authorization module will query all known authorization info for a possible candidate (the match must be for the host, port, scheme and realm). If no suitable info is found, or if the server rejects any info found, an authorization handler is called to try and get the necessary info from the user; if the user does not give any information, or if the information she gives is also rejected, then the retrying is terminated and the last failure status returned to the caller. The default handler currently only understands requests for the &#39;Basic&#39; and &#39;Digest&#39; authorization schemes; you may however set your own handler via the <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/AuthorizationInfo.html#setAuthHandler(HTTPClient.AuthorizationHandler" target="_blank">AuthorizationInfo.setAuthHandler()</a>) method. The handler given must implement the <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/AuthorizationHandler.html" target="_blank">AuthorizationHandler</a> interface. To disable the handler completely give null for the handler.</p>
<p>A server (or proxy) may send multiple authorization challenges in the response, in which case the above algorithm is modified to go through the list of challenges in the same order as they were sent, trying to get authorization info for each challenge in the list and going to the next challenge if either no info was found or the server rejects that info. If the end of the list is reached without achieving authorization then the authorization handler is called on each challenge (in the same order) until either an authorization request is successful, the authorization handler returns null (e.g. when the Cancel button in the default popup box is activated) or the list is exhausted, in which case the response to the last failed request is returned.</p>
<p>Whenever the <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/DefaultAuthHandler.html" target="_blank">default authorization handler</a> needs to ask the user for a username and password, it queries the current <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/AuthorizationPrompter.html" target="_blank">AuthorizationPrompter</a>. This is responsible for popping up a dialog box or otherwise acquiring the necessary info. A default prompter is provided which will pop up a simple dialog box, if the AWT is running, or use a command line prompt if it isn&#39;t and the currently running system is Unix or VMS; you may set your own prompter using <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/DefaultAuthHandler.html#setAuthorizationPrompter(HTTPClient.AuthorizationPrompter" target="_blank">DefaultAuthHandler.setAuthorizationPrompter()</a>). To prevent the prompter from being queried (e.g. to prevent the popup box from appearing) you can either set the prompter to null, or use <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setAllowUserInteraction(boolean" target="_blank">con.setAllowUserInteraction(false)</a>).</p>
<h3 id="-redirectionmodule-"><a href="">RedirectionModule</a></h3>
<p>This module handles the redirection status codes 301, 302, 303, 305 and 307. 301 and 307 responses are only redirected if the request method was GET or HEAD; this is because redirecting, say, a POST blindly might lead to undesired behaviour, as the circumstances leading to the POST might have changed. 302 and 303 are treated identically: the new request to the new location is done using GET (this is what many cgi&#39;s expect - they are basically directing you to a prefabricated answer). 305 is only honored if the connection is not already using a proxy.</p>
<p>This module also keeps a list of permanently redirected URL&#39;s (status code 301) and will preemptively redirect requests for these. This list is volatile (i.e. it will be lost when the application exits).</p>
<h3 id="-cookiemodule-http-www-innovation-ch-java-httpclient-api-httpclient-cookiemodule-html-"><a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/CookieModule.html" target="_blank">CookieModule</a></h3>
<p>This module implements cookies as defined by <a href="http://home.netscape.com/newsref/std/cookie_spec.html" target="_blank">Netscape&#39;s cookie spec</a> and the latest <a href="http://www.ietf.org/rfc/rfc2965.txt" target="_blank">HTTP State Management Mechanism</a> spec. During response processing it intercepts and parses the Set-Cookie and Set-Cookie2 header fields (removing them from the response in the process), and during request processing it adds all eligible cookies to the requests.</p>
<p>Because of privacy issues surrounding cookies, whenever the server tries to set a cookie a <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/CookiePolicyHandler.html" target="_blank">policy handler</a> is invoked to see whether this cookie should be accepted. The default handler brings up a popup describing the cookie and allowing the user to accept or reject it; the user may also summarily accept or reject cookies from whole domains. You may substitute your own policy handler using the <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/CookieModule.html#setCookiePolicyHandler(HTTPClient.CookiePolicyHandler" target="_blank">setCookiePolicyHandler()</a>) method. If you set the handler to null then all cookies will be silently accepted. If you do not want any cookies to be accepted then either remove the CookieModule from the list of modules or set your own handler which always returns false. The handler must implement the <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/CookiePolicyHandler.html" target="_blank">CookiePolicyHandler</a> interface.</p>
<p>The CookieModule provides methods to view the currently stored cookies, and to add and remove cookies from that list. If you want to manually provide additional cookies for a request then you must add them to the CookieModule&#39;s internal list - any Cookie header fields you create yourself and pass to a request will be removed by the CookieModule.</p>
<p>The CookieModule will save and restore cookies at the start and end of the application only if the java system property HTTPClient.cookies.save is set to true. All cookies which are meant to persist across invocations are then saved to a file when the application exits and read from that file when the CookieModule is loaded. The format of the file is a serialized Hashtable of Cookies. The name of file can controlled through the system property HTTPClient.cookies.jar. If this is not set, a system dependent name is used:</p>
<ul>
<li>Unix: $HOME/.httpclient_cookies</li>
<li>Mac: System Folder:Preferences:HTTPClientCookies</li>
<li>OS/2: $HOME/.httpclient_cookies</li>
<li>Win95: $JAVA_HOME/.httpclient_cookies</li>
<li>WinNT: $HOME/.httpclient_cookies
(where $HOME is the value of the java system property &quot;user.home&quot;, and $JAVA_HOME is the value of the java system property &quot;java.home&quot;).</li>
</ul>
<h3 id="-contentencodingmodule-"><a href="">ContentEncodingModule</a></h3>
<p>Servers may apply various content encodings to the content. The most widely used encodings are compressions: gzip, compress, and deflate. This module will handle these three content encodings by pushing an appropriate decoding stream; this means that the data read from <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPResponse.html#getInputStream(" target="_blank">getInputStream()</a>) will be the clear text. The Content-Encoding header is also modified appropriately.</p>
<p>You might want to consider disabling this module if you are using the HTTPClient for things like web-copying where storing the compressed document makes sense.</p>
<h3 id="-transferencodingmodule-"><a href="">TransferEncodingModule</a></h3>
<p>This is similar to the ContentEncoding module except that it applies to transfer encodings. It also handles the gzip, compress, and deflate encodings by pushing an appropriate decoding stream onto the response input stream and modifies the Transfer-Encoding header appropriately.</p>
<h3 id="-contentmd5module-"><a href="">ContentMD5Module</a></h3>
<p>Some servers may generate a Content-MD5 header which contains an MD5 hash of the message body (after any content encoding, but before any transport encoding is applied). If this header is present this module will push a stream which calculates the MD5 hash of the body. When the stream is closed or the end of the data is reached the calculated hash is compared to the one in the Content-MD5 header and if they don&#39;t match an IOException is thrown.</p>
<h3 id="-defaultmodule-"><a href="">DefaultModule</a></h3>
<p>This handles the response status codes 408 (request timeout) and 411 (length required).</p>
<h3 id="-retrymodule-"><a href="">RetryModule</a></h3>
<p>This module is special. It is responsible for automatically retrying requests which were aborted due to an IOException on the socket. It is unlike other modules in that it is closely tied in to the core code, instead of just manipulating the request and response structures as other modules do. The code in this module could have been put in with the rest of the core code, but moving it to a module has the advantage that this automatic retrying of requests may be disabled using the standard mechanism of removing modules.</p>
<h3 id="ordering-the-modules">Ordering the Modules</h3>
<p>The handlers in the modules are invoked in the order the modules are placed in the list. Because of certain constraints between modules this order is important. The default order for the supplied modules is:</p>
<ol>
<li>RetryModule</li>
<li>CookieModule</li>
<li>RedirectionModule</li>
<li>AuthorizationModule</li>
<li>DefaultModule</li>
<li>TransferEncodingModule</li>
<li>ContentMD5Module</li>
<li>ContentEncodingModule
However the constraints impose only a partial ordering, so that the above order may be changed as long as the following restrictions are observed:</li>
</ol>
<ul>
<li>The RetryModule <em>must</em> be first. It catches a special RetryException, which is thrown by the core code. If it were not the first module it would not be able to catch this exception.</li>
<li>The TransferEncoding module must precede any module which handles the response message (such as the ContentEncoding module and the ContentMD5Module). There are a number of reasons for this, but basically it&#39;s because all the headers refer to the message before transport encoding is applied.</li>
<li>The ContentMD5 module must precede the ContentEncoding module, as the hash is calculated for the encoded message.</li>
</ul>
<h2 id="-java-system-properties-recognized-by-httpclient-"><a href="">Java System Properties recognized by HTTPClient</a></h2>
<p>There are a number of java system properties which are used by the HTTPClient. Most are documented somewhere in the api docs. Some of the properties may contain a list of elements, in which case the elements are separated by vertical bars (&quot;|&quot;). White space is ignored, except that a &quot;| |&quot; produces an empty element whereas &quot;||&quot; is treated like a single delimiter (i.e. &quot;|&quot;).</p>
<p>The properties are read once, when the class that uses them is loaded (i.e. they&#39;re read in the class&#39; static initializer). This means they need to be set either on the command line via the -D option, as in
java -DHTTPClient.dontChunkRequests=true MyAppor early in your application before the class is first accessed: System.getProperties().put(&quot;HTTPClient.dontChunkRequests&quot;, &quot;true&quot;); ... HTTPConnection.setDefaultHeaders(...);</p>
<p>Here is summary of all properties recognized:</p>
<p>http.proxyHostRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Used to specify the http proxy to use. See <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setProxyServer(java.lang.String, int" target="_blank">setProxyServer()</a>) for more info. This is the same property that is used by Sun&#39;s JDK 1.1 (and later).http.proxyPortRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Used to specify the http proxy to use. See <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setProxyServer(java.lang.String, int" target="_blank">setProxyServer()</a>) for more info. This is the same property that is used by Sun&#39;s JDK 1.1 (and later).proxySetRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Obsolete. Used by Sun&#39;s JDK 1.0.2. If http.proxyHost is not set and proxySet is true, then the default proxy is set using the values in proxyHost and proxyPort.proxyHostRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Obsolete. Used by Sun&#39;s JDK 1.0.2. If http.proxyHost is not set and proxySet is true, then the default proxy is set using the values in proxyHost and proxyPort.proxyPortRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Obsolete. Used by Sun&#39;s JDK 1.0.2. If http.proxyHost is not set and proxySet is true, then the default proxy is set using the values in proxyHost and proxyPort.HTTPClient.nonProxyHostsRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Used to specify a list hosts for which no http proxy is to be used. See <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#dontProxyFor(java.lang.String" target="_blank">dontProxyFor()</a>) for more info.http.nonProxyHostsRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Used to specify a list hosts for which no http proxy is to be used. See <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#dontProxyFor(java.lang.String" target="_blank">dontProxyFor()</a>) for more info. This is the same property that is used by Sun&#39;s JDK 1.1 (and later).HTTPClient.socksHostRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Used to specify the SOCKS proxy host. See <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setSocksServer(java.lang.String, int, int" target="_blank">setSocksServer()</a>) for more info.HTTPClient.socksPortRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Used to specify the SOCKS proxy port. See <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setSocksServer(java.lang.String, int, int" target="_blank">setSocksServer()</a>) for more info.HTTPClient.socksVersionRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Used to specify the SOCKS proxy version. See <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#setSocksServer(java.lang.String, int, int" target="_blank">setSocksServer()</a>) for more info.HTTPClient.ModulesRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Used to define the default list of modules. See <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html#addDefaultModule(java.lang.Class, int" target="_blank">HTTPConnection.addDefaultModule()</a>) for more info.HTTPClient.disable_pipeliningRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Used to disable all pipelining. This should never be needed, but you may encounter a server which displays problems when pipelining requests. Setting this property to true will cause the HTTPClient to stall each request until the headers from the response to the previous request have been received and parsed.HTTPClient.disableKeepAlivesRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Used to disable keep-alive&#39;s. This exactly equivalent to (and is implemented as)</p>
<p>con.setDefaultHeaders(new NVPair[] { new NVPair(&quot;Connection&quot;, &quot;close&quot;) })
.HTTPClient.forceHTTP_1.0Read by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Used to force the client to pretend it&#39;s only capable of HTTP/1.0. Setting this to true causes all requests to be sent as if the server could only handle HTTP/1.0, and causes the HTTP-version in the request-line to be sent as HTTP/1.0.HTTPClient.dontChunkRequestsRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. Used to prevent the client from using the chunked transfer encoding on requests. Setting this to true causes all data written to an HttpOutputStream (that was not constructed with a content length) to be buffered and only sent when the stream is closed.HTTPClient.deferStreamedRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPConnection.html" target="_blank">HTTPConnection</a>. When a request is sent which uses an <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HttpOutputStream.html" target="_blank">HttpOutputStream</a>, and handling of the response by modules would require the module to resend the request, then modules have to punt because they do not have the request data (i.e. the data written to the output stream). In order to make things easier on the application, an application can set this property to true and then check the <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HTTPResponse.html#retryRequest(" target="_blank">retry flag</a>) in the response for whether it needs to resend the request. If the value is false, the retry flag will always be false. The default is false in order to prevent memory leaks in applications which aren&#39;t prepared for it.HTTPClient.dontTimeoutRespBodyRead by RespInputStream. Used to restore pre-V0.3-3 behaviour of disabling any timeout while reading the response body. Setting this to true causes read()&#39;s on the response input stream to block indefinitely until some data arrives or the connection closes, irrespective of whether a timeout has been set or not.HTTPClient.cookies.hosts.acceptRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/CookieModule.html" target="_blank">CookieModule</a>. Used to initialize the list of hosts and domains from which to always accept cookies. See <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/CookieModule.html#setCookiePolicyHandler(HTTPClient.CookiePolicyHandler" target="_blank">setCookiePolicyHandler()</a>) for more info.HTTPClient.cookies.hosts.rejectRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/CookieModule.html" target="_blank">CookieModule</a>. Used to initialize the list of hosts and domains from which to always reject cookies. See <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/CookieModule.html#setCookiePolicyHandler(HTTPClient.CookiePolicyHandler" target="_blank">setCookiePolicyHandler()</a>) for more info.HTTPClient.cookies.saveRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/CookieModule.html" target="_blank">CookieModule</a>. If set to true then the CookieModule will read stored cookie at startup time, and save cookies that should persist at application exit time.HTTPClient.cookies.jarRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/CookieModule.html" target="_blank">CookieModule</a>. This specifies the cookie jar to use for reading and saving cookies. If not set, a system dependent name is used.HTTPClient.log.fileRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/Log.html" target="_blank">Log</a>. If defined, this specifies the name of the file to which log messages are to be written. By default log messages are written to System.err.HTTPClient.log.maskRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/Log.html" target="_blank">Log</a>. If defined, this specifies which debug messages should be logged. The value is a number which is the bitwise OR (&#39;|&#39;) of the values of the facilities for which logging should be enabled. E.g. the value -1 enables logging for all facilities. By default logging is disabled.HTTPClient.HttpURLConnection.AllowUIRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HttpURLConnection.html" target="_blank">HttpURLConnection</a>. If set to true then set the defaultAllowUserInteraction to true. By default this is set to false in java.net.URLConnection.http.agentRead by <a href="http://www.innovation.ch/java/HTTPClient/api/HTTPClient/HttpURLConnection.html" target="_blank">HttpURLConnection</a>. If set then the &quot;User-Agent&quot; header is set to this property&#39;s value.</p>
<h2 id="-http-header-fields-"><a href="">HTTP Header Fields</a></h2>
<p>All request methods accept optional header fields to be sent with the request. Here are a list of possible request and response header fields as defined in the HTTP/1.1 spec. I have added some comments to some of them, but for further info I recommend getting the <a href="http://www.innovation.ch/java/HTTPClient/advanced_info.html#specs" target="_blank">specs</a> (every header field is described in a paragraph of its own in the spec, so you can read just the part that interests you and ignore the rest).</p>
<h3 id="request-header-fields">Request Header Fields</h3>
<ul>
<li>Cache-Control</li>
<li>Connection - used for persistent connections; need not be set by applications</li>
<li>Date - use only in PUT/POST; even then optional</li>
<li>Keep-Alive - used for persistent connections (HTTP/1.0 only); set by the HTTPClient as needed.</li>
<li>Pragma</li>
<li>Transfer-Encoding - set by the client as necessary</li>
<li>Upgrade</li>
<li><p>Via</p>
</li>
<li><p>Accept</p>
</li>
<li>Accept-Charset</li>
<li>Accept-Encoding - set by the ContentEncoding module</li>
<li>Accept-Language</li>
<li>Authorization - generated by HTTPClient as necessary</li>
<li>From</li>
<li>Host - set by HTTPClient; may be overridden by application</li>
<li>If-Modified-Since - the server returns 304 if the document was not modified</li>
<li>If-Match - the server returns 412 if the match fails</li>
<li>If-NoneMatch - the server returns 304 if the match succeeds</li>
<li>If-Range</li>
<li>If-Unmodified-Since - the server returns 412 if modified</li>
<li>Max-Forwards - used with TRACE and OPTIONS</li>
<li>Proxy-Authorization - generated by HTTPClient as necessary</li>
<li>Range</li>
<li>Referer</li>
<li><p>User-Agent - generated by HTTPClient; can be modified</p>
</li>
<li><p>Allow - only with PUT</p>
</li>
<li>Content-Base</li>
<li>Content-Encoding - examples: gzip, compress, deflate</li>
<li>Content-Language</li>
<li>Content-Length - set by HTTPClient</li>
<li>Content-MD5</li>
<li>Content-Range</li>
<li>Content-Type</li>
</ul>
<h3 id="response-header-fields">Response Header Fields</h3>
<ul>
<li>Cache-Control</li>
<li>Connection - used for persistent connections</li>
<li>Date - date that the document was delivered (<strong>not</strong> when it was last modified)</li>
<li>Keep-Alive - used for persistent connections (HTTP/1.0 only)</li>
<li>Pragma</li>
<li>Transfer-Encoding - HTTPClient handles chunked in the core code; gzip and deflate are handled by the TransferEncoding module.</li>
<li>Upgrade - sent with a 101 response;</li>
<li><p>Via - carries a list of proxies that were involved in returning the request; especially interesting for TRACE and OPTIONS requests.</p>
</li>
<li><p>Age - from caches</p>
</li>
<li>Location - sent with a redirection status code; since HTTPClient automatically handles 301, 302, 303, 305 and 307 status codes this field is seldom seen.</li>
<li>Proxy-Authenticate - read by HTTPClient</li>
<li>Public</li>
<li>Retry-After - optionally sent with a 503 status</li>
<li>Vary</li>
<li>Warning</li>
<li><p>WWW-Authenticate - read by HTTPClient</p>
</li>
<li><p>Accept-Ranges</p>
</li>
<li>Allow - with a 405 status</li>
<li>Content-Base</li>
<li>Content-Encoding - gzip, deflate, and compress are handled by the ContentEncoding module.</li>
<li>Content-Language</li>
<li>Content-Length</li>
<li>Content-Location</li>
<li>Content-MD5 - handled by the ContentMD5 module.</li>
<li>Content-Range</li>
<li>Content-Type</li>
<li>ETag</li>
<li>Expires - the date when the document expires</li>
<li>Last-Modified - the date the document was last modified</li>
</ul>
<h1 id="-further-reading-"><a href="">Further Reading</a></h1>
<p><img src="" alt="*"> <a href="http://www.w3.org/Protocols/" target="_blank">General HTTP Info at W3C</a><img src="" alt="*"> <a href="http://www.ietf.org/rfc/rfc1945.txt" target="_blank">HTTP/1.0 Spec (RFC 1945)</a><img src="" alt="*"> <a href="http://www.ietf.org/rfc/rfc2616.txt" target="_blank">HTTP/1.1 Spec (RFC 2616)</a><img src="" alt="*"> <a href="http://www.ietf.org/rfc/rfc2617.txt" target="_blank">Digest Authentication Spec (RFC 2617)</a></p>
<p><a href="http://www.innovation.ch/java/HTTPClient/index.html" target="_blank"><img src="" alt="[HTTPClient]"></a></p>
<p>Ronald Tschalär / 6. May 2001 / <a href="mailto:ronald@innovation.ch">ronald@innovation.ch</a>.</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Httpclient/">Httpclient</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Httpclient/" class="label label-primary">Httpclient</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Httpclient--AdvancedHTTPClientInfo/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Httpclient--AdvancedHTTPClientInfo" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-hadoop--Hadoop121编译Eclipse插件/">Hadoop 1.2.1编译Eclipse插件</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:36.000Z"> <a href="/2014/02/02/2014-02-02-hadoop--Hadoop121编译Eclipse插件/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="hadoop-1-2-1-eclipse-">Hadoop 1.2.1编译Eclipse插件</h1>
<h2 id="-src-contrib-eclipse-plugin-build-xml">/src/contrib/eclipse-plugin/build.xml</h2>
<h3 id="1-ivy-download-">1）取消ivy-download：</h3>
<p><a href="http://static.oschina.net/uploads/space/2013/0520/194613_IBLw_256028.png" target="_blank"><img src="" alt=""></a></p>
<h3 id="2-plugin-jar-">2）添加将要打包到plugin中的第三方jar包列表：</h3>
<p>01</p>
<!-- Override jar target to specify manifest -->


<p>02</p>
<p>&lt;</p>
<p>target</p>
<p>name</p>
<p>=</p>
<p>&quot;jar&quot;</p>
<p>depends</p>
<p>=</p>
<p>&quot;compile&quot;</p>
<p>unless</p>
<p>=</p>
<p>&quot;skip.contrib&quot;</p>
<p>&gt;
03</p>
<p>&lt;</p>
<p>mkdir</p>
<p>dir</p>
<p>=</p>
<p>&quot;${build.dir}/lib&quot;</p>
<p>/&gt; </p>
<p>04</p>
<p>05</p>
<!-- 自定义的修改内容：begin -->


<p>06</p>
<!--
07

<copy file="${hadoop.root}/build/hadoop-core-${version}.jar"

08



tofile="${build.dir}/lib/hadoop-core.jar" verbose="true"/>
09

<copy file="${hadoop.root}/build/ivy/lib/Hadoop/common/commons-cli-${commons-cli.version}.jar" 

10



todir="${build.dir}/lib" verbose="true"/> 
11

-->


<p>12</p>
<p>&lt;</p>
<p>copy</p>
<p>file</p>
<p>=</p>
<p>&quot;${hadoop.root}/hadoop-core-${version}.jar&quot;</p>
<p>tofile</p>
<p>=</p>
<p>&quot;${build.dir}/lib/hadoop-core.jar&quot;</p>
<p>verbose</p>
<p>=</p>
<p>&quot;true&quot;</p>
<p>/&gt;
13</p>
<p>&lt;</p>
<p>copy</p>
<p>file</p>
<p>=</p>
<p>&quot;${hadoop.root}/lib/commons-cli-1.2.jar&quot;</p>
<p>todir</p>
<p>=</p>
<p>&quot;${build.dir}/lib&quot;</p>
<p>verbose</p>
<p>=</p>
<p>&quot;true&quot;</p>
<p>/&gt; </p>
<p>14</p>
<p>&lt;</p>
<p>copy</p>
<p>file</p>
<p>=</p>
<p>&quot;${hadoop.root}/lib/commons-configuration-1.6.jar&quot;</p>
<p>todir</p>
<p>=</p>
<p>&quot;${build.dir}/lib&quot;</p>
<p>verbose</p>
<p>=</p>
<p>&quot;true&quot;</p>
<p>/&gt; 
15</p>
<p>&lt;</p>
<p>copy</p>
<p>file</p>
<p>=</p>
<p>&quot;${hadoop.root}/lib/commons-httpclient-3.0.1.jar&quot;</p>
<p>todir</p>
<p>=</p>
<p>&quot;${build.dir}/lib&quot;</p>
<p>verbose</p>
<p>=</p>
<p>&quot;true&quot;</p>
<p>/&gt; </p>
<p>16</p>
<p>&lt;</p>
<p>copy</p>
<p>file</p>
<p>=</p>
<p>&quot;${hadoop.root}/lib/commons-lang-2.4.jar&quot;</p>
<p>todir</p>
<p>=</p>
<p>&quot;${build.dir}/lib&quot;</p>
<p>verbose</p>
<p>=</p>
<p>&quot;true&quot;</p>
<p>/&gt;<br>17</p>
<p>&lt;</p>
<p>copy</p>
<p>file</p>
<p>=</p>
<p>&quot;${hadoop.root}/lib/jackson-core-asl-1.8.8.jar&quot;</p>
<p>todir</p>
<p>=</p>
<p>&quot;${build.dir}/lib&quot;</p>
<p>verbose</p>
<p>=</p>
<p>&quot;true&quot;</p>
<p>/&gt;</p>
<p>18</p>
<p>&lt;</p>
<p>copy</p>
<p>file</p>
<p>=</p>
<p>&quot;${hadoop.root}/lib/jackson-mapper-asl-1.8.8.jar&quot;</p>
<p>todir</p>
<p>=</p>
<p>&quot;${build.dir}/lib&quot;</p>
<p>verbose</p>
<p>=</p>
<p>&quot;true&quot;</p>
<p>/&gt;<br>19</p>
<!-- 自定义的修改内容：end -->


<p>20</p>
<p>&lt;</p>
<p>jar
21</p>
<p>jarfile</p>
<p>=</p>
<p>&quot;${build.dir}/hadoop-${name}-${version}.jar&quot;</p>
<p>22</p>
<p>manifest</p>
<p>=</p>
<p>&quot;${root}/META-INF/MANIFEST.MF&quot;</p>
<blockquote>
<p>23</p>
</blockquote>
<p>&lt;</p>
<p>fileset</p>
<p>dir</p>
<p>=</p>
<p>&quot;${build.dir}&quot;</p>
<p>includes</p>
<p>=</p>
<p>&quot;classes/ lib/&quot;</p>
<p>/&gt; </p>
<p>24</p>
<p>&lt;</p>
<p>fileset</p>
<p>dir</p>
<p>=</p>
<p>&quot;${root}&quot;</p>
<p>includes</p>
<p>=</p>
<p>&quot;resources/ plugin.xml&quot;</p>
<p>/&gt; 
25</p>
<p>&lt;/</p>
<p>jar</p>
<blockquote>
</blockquote>
<p>26</p>
<p>&lt;/</p>
<p>target</p>
<blockquote>
<p>&lt;</p>
</blockquote>
<p>span</p>
<p>style</p>
<p>=</p>
<p>&quot;font-size:10pt;line-height:1.5;font-family:&#39;sans serif&#39;, tahoma, verdana, helvetica;&quot;</p>
<blockquote>
<p> &lt;/</p>
</blockquote>
<p>span</p>
<p>&gt;</p>
<p><a href="http://static.oschina.net/uploads/space/2013/0520/194752_bBaX_256028.png" target="_blank"><img src="" alt=""></a> </p>
<h2 id="3-hadoop-src-contrib-build-contrib-xml-">3.%hadoop%/src/contrib/build-contrib.xml ：</h2>
<h3 id="1-hadoop-version-eclipse-eclipse-home-">1）添加hadoop的version和eclipse的eclipse.home属性：</h3>
<p>1</p>
<p>&lt;?</p>
<p>xml</p>
<p>version</p>
<p>=</p>
<p>&quot;1.0&quot;</p>
<p>?&gt;</p>
<p>2</p>
<!-- Imported by contrib//*/build.xml files to share generic targets. -->
3

&lt;

project


name

=

&quot;hadoopbuildcontrib&quot;


xmlns:ivy

=

&quot;antlib:org.apache.ivy.ant&quot;

&gt;

4

&lt;

property


name

=

&quot;name&quot;


value

=

&quot;${ant.project.name}&quot;

/&gt;
5

&lt;

property


name

=

&quot;root&quot;


value

=

&quot;${basedir}&quot;

/&gt;

6

&lt;

property


name

=

&quot;hadoop.root&quot;


location

=

&quot;${root}/../../../&quot;

/&gt;
7

<!-- hadoop版本、eclipse安装路径 -->

<p>8</p>
<p>&lt;</p>
<p>property</p>
<p>name</p>
<p>=</p>
<p>&quot;version&quot;</p>
<p>value</p>
<p>=</p>
<p>&quot;1.1.2&quot;</p>
<p>/&gt;
9</p>
<p>&lt;</p>
<p>property</p>
<p>name</p>
<p>=</p>
<p>&quot;eclipse.home&quot;</p>
<p>location</p>
<p>=</p>
<p>&quot;%eclipse%&quot;</p>
<p>/&gt;</p>
<p><a href="http://static.oschina.net/uploads/space/2013/0520/194838_mpUD_256028.png" target="_blank"><img src="" alt=""></a>  </p>
<h3 id="2-ivy-download-">2）取消ivy-download：</h3>
<p><a href="http://static.oschina.net/uploads/space/2013/0520/194859_Cc5J_256028.png" target="_blank"><img src="" alt=""></a> 
来源： <a href="[http://my.oschina.net/vigiles/blog/132238](http://my.oschina.net/vigiles/blog/132238)">[http://my.oschina.net/vigiles/blog/132238](http://my.oschina.net/vigiles/blog/132238)</a></p>
<p>配置/${hadoop-home}/src/contrib/eclipse-plugins/build.xml</p>
<p>找到</p>
<path id=”classpath”>

<p>然后添加</p>
<fileset dir=”${hadoop.root}/”>
      <include name=”/*.jar”/>
</fileset>

<p><strong>这一步很重要，如果不添加的话会出现找不到相应的程序包，错误如下（给出部分）</strong> ：</p>
<p>[javac]      Counters.Group group = counters.getGroup(groupName);
    [javac]              ^
    [javac] /home/summerdg/hadoop_src/hadoop-1.2.1/src/contrib/eclipse-plugin/src/java/org/apache/hadoop/eclipse/server/HadoopJob.java:305: 错误: 程序包Counters不存在
    [javac]      for (Counters.Counter counter : group) {
    [javac]                    ^
    [javac] /home/summerdg/hadoop_src/hadoop-1.2.1/src/contrib/eclipse-plugin/src/java/org/apache/hadoop/eclipse/dfs/DFSFile.java:74: 错误: 找不到符号
    [javac]      FileStatus fs = getDFS().getFileStatus(path);
    [javac]      ^
    [javac]  符号:  类 FileStatus
    [javac]  位置: 类 DFSFile
    [javac] 注: 某些输入文件使用或覆盖了已过时的 API。
    [javac] 注: 有关详细信息, 请使用 -Xlint:deprecation 重新编译。
    [javac] 注: 某些输入文件使用了未经检查或不安全的操作。
    [javac] 注: 有关详细信息, 请使用 -Xlint:unchecked 重新编译。
    [javac] 100 个错误</p>
<p>当然，出现这个错误还有个原因，就是你已经设置了这句，但你依然出现这个错误，那就是你eclipse版本的问题了。</p>
<p>找到
来源： <a href="[http://www.kankanews.com/ICkengine/archives/63441.shtml](http://www.kankanews.com/ICkengine/archives/63441.shtml)">[http://www.kankanews.com/ICkengine/archives/63441.shtml](http://www.kankanews.com/ICkengine/archives/63441.shtml)</a> </p>
<h2 id="4-hadoop_home-build-xml-">4.编辑%HADOOP_HOME%/build.xml：</h2>
<h3 id="1-hadoop-">1）修改hadoop版本号：</h3>
<p><a href="http://static.oschina.net/uploads/space/2013/0520/194950_g5cw_256028.png" target="_blank"><img src="" alt=""></a></p>
<h3 id="2-ivy-download-">2）取消ivy-download：</h3>
<p><a href="http://static.oschina.net/uploads/space/2013/0520/195011_l8BK_256028.png" target="_blank"><img src="" alt=""></a> </p>
<h2 id="5-hadoop-src-contrib-eclipse-plugin-meta-inf-manifest-mf-">5.修改%hadoop%/src/contrib/eclipse-plugin/META-INF/MANIFEST.MF：</h2>
<p>修改${HADOOP_HOME}/src/contrib/eclipse-plugin/META-INF/MANIFEST.MF的Bundle-ClassPath：
1</p>
<p>Bundle-ClassPath: classes/,</p>
<p>2</p>
<p>lib/hadoop-core.jar,
3</p>
<p>lib/commons-cli-1.2.jar,</p>
<p>4</p>
<p>lib/commons-configuration-1.6.jar,
5</p>
<p>lib/commons-httpclient-3.0.1.jar,</p>
<p>6</p>
<p>lib/commons-lang-2.4.jar,
7</p>
<p>lib/jackson-core-asl-1.8.8.jar,</p>
<p>8</p>
<p>lib/jackson-mapper-asl-1.8.8.jar</p>
<p><a href="http://static.oschina.net/uploads/space/2013/0520/195106_mqwV_256028.png" target="_blank"><img src="" alt=""></a> </p>
<h2 id="-build-contrib-eclipse-plugin-ant-jar-">进入到 /build/contrib/eclipse-plugin/执行 ant jar ：</h2>
<p>01</p>
<p>hep@hep-ubuntu:~$ </p>
<p>cd</p>
<p>~/hadoop/src/contrib/eclipse-plugin</p>
<p>02</p>
<p>hep@hep-ubuntu:~/hadoop/src/contrib/eclipse-plugin$ ant jar
03</p>
<p>Buildfile: /home/hep/hadoop/src/contrib/eclipse-plugin/build.xml</p>
<p>04</p>
<p>05</p>
<p>check-contrib:</p>
<p>06</p>
<p>07</p>
<p>init:</p>
<p>08</p>
<p>[</p>
<p>echo</p>
<p>] contrib: eclipse-plugin
09</p>
<p>10</p>
<p>init-contrib:
11</p>
<p>12</p>
<p>ivy-probe-antlib:
13</p>
<p>14</p>
<p>ivy-init-antlib:
15</p>
<p>16</p>
<p>ivy-init:
17</p>
<p>[ivy:configure] :: Ivy 2.1.0 - 20090925235825 :: <a href="http://ant.apache.org/ivy/" target="_blank">http://ant.apache.org/ivy/</a> ::</p>
<p>18</p>
<p>[ivy:configure] :: loading settings :: </p>
<p>file</p>
<p>= /home/hep/hadoop/ivy/ivysettings.xml
19</p>
<p>20</p>
<p>ivy-resolve-common:
21</p>
<p>[ivy:resolve] :: resolving dependencies :: org.apache.hadoop</p>
<p>/#eclipse-plugin;working@hep-ubuntu</p>
<p>22</p>
<p>[ivy:resolve]   confs: [common]
23</p>
<p>[ivy:resolve]   found commons-logging</p>
<p>/#commons-logging;1.0.4 in maven2</p>
<p>24</p>
<p>[ivy:resolve]   found log4j</p>
<p>/#log4j;1.2.15 in maven2
25</p>
<p>[ivy:resolve] :: resolution report :: resolve 171ms :: artifacts dl 4ms</p>
<p>26</p>
<hr>
<p>27</p>
<p>|                  |            modules            ||   artifacts   |</p>
<p>28</p>
<p>|       conf       | number| search|dwnlded|evicted|| number|dwnlded|
29</p>
<hr>
<p>30</p>
<p>|      common      |   2   |   0   |   0   |   0   ||   2   |   0   |
31</p>
<hr>
<p>32</p>
<p>33</p>
<p>ivy-retrieve-common:</p>
<p>34</p>
<p>[ivy:retrieve] :: retrieving :: org.apache.hadoop</p>
<p>/#eclipse-plugin [sync]
35</p>
<p>[ivy:retrieve]  confs: [common]</p>
<p>36</p>
<p>[ivy:retrieve]  0 artifacts copied, 2 already retrieved (0kB/6ms)
37</p>
<p>[ivy:cachepath] DEPRECATED: </p>
<p>&#39;ivy.conf.file&#39;</p>
<p>is deprecated, use </p>
<p>&#39;ivy.settings.file&#39;</p>
<p>instead</p>
<p>38</p>
<p>[ivy:cachepath] :: loading settings :: </p>
<p>file</p>
<p>= /home/hep/hadoop/ivy/ivysettings.xml
39</p>
<p>40</p>
<p>compile:
41</p>
<p>[</p>
<p>echo</p>
<p>] contrib: eclipse-plugin</p>
<p>42</p>
<p>[javac] /home/hep/hadoop/src/contrib/eclipse-plugin/build.xml:61: warning: </p>
<p>&#39;includeantruntime&#39;</p>
<p>was not </p>
<p>set</p>
<p>, defaulting to build.sysclasspath=last; </p>
<p>set</p>
<p>to </p>
<p>false</p>
<p>for</p>
<p>repeatable builds
43</p>
<p>44</p>
<p>jar:
45</p>
<p>[</p>
<p>mkdir</p>
<p>] Created </p>
<p>dir</p>
<p>: /home/hep/hadoop/build/contrib/eclipse-plugin/lib</p>
<p>46</p>
<p>[copy] Copying 1 </p>
<p>file</p>
<p>to /home/hep/hadoop/build/contrib/eclipse-plugin/lib
47</p>
<p>[copy] Copying /home/hep/hadoop/hadoop-core-1.1.2.jar to /home/hep/hadoop/build/contrib/eclipse-plugin/lib/hadoop-core.jar</p>
<p>48</p>
<p>[copy] Copying 1 </p>
<p>file</p>
<p>to /home/hep/hadoop/build/contrib/eclipse-plugin/lib
49</p>
<p>[copy] Copying /home/hep/hadoop/lib/commons-cli-1.2.jar to /home/hep/hadoop/build/contrib/eclipse-plugin/lib/commons-cli-1.2.jar</p>
<p>50</p>
<p>[copy] Copying 1 </p>
<p>file</p>
<p>to /home/hep/hadoop/build/contrib/eclipse-plugin/lib
51</p>
<p>[copy] Copying /home/hep/hadoop/lib/commons-configuration-1.6.jar to /home/hep/hadoop/build/contrib/eclipse-plugin/lib/commons-configuration-1.6.jar</p>
<p>52</p>
<p>[copy] Copying 1 </p>
<p>file</p>
<p>to /home/hep/hadoop/build/contrib/eclipse-plugin/lib
53</p>
<p>[copy] Copying /home/hep/hadoop/lib/commons-httpclient-3.0.1.jar to /home/hep/hadoop/build/contrib/eclipse-plugin/lib/commons-httpclient-3.0.1.jar</p>
<p>54</p>
<p>[copy] Copying 1 </p>
<p>file</p>
<p>to /home/hep/hadoop/build/contrib/eclipse-plugin/lib
55</p>
<p>[copy] Copying /home/hep/hadoop/lib/commons-lang-2.4.jar to /home/hep/hadoop/build/contrib/eclipse-plugin/lib/commons-lang-2.4.jar</p>
<p>56</p>
<p>[copy] Copying 1 </p>
<p>file</p>
<p>to /home/hep/hadoop/build/contrib/eclipse-plugin/lib
57</p>
<p>[copy] Copying /home/hep/hadoop/lib/jackson-core-asl-1.8.8.jar to /home/hep/hadoop/build/contrib/eclipse-plugin/lib/jackson-core-asl-1.8.8.jar</p>
<p>58</p>
<p>[copy] Copying 1 </p>
<p>file</p>
<p>to /home/hep/hadoop/build/contrib/eclipse-plugin/lib
59</p>
<p>[copy] Copying /home/hep/hadoop/lib/jackson-mapper-asl-1.8.8.jar to /home/hep/hadoop/build/contrib/eclipse-plugin/lib/jackson-mapper-asl-1.8.8.jar</p>
<p>60</p>
<p>[jar] Building jar: /home/hep/hadoop/build/contrib/eclipse-plugin/hadoop-eclipse-plugin-1.1.2.jar
61</p>
<p>62</p>
<p>BUILD SUCCESSFUL
63</p>
<p>Total </p>
<p>time</p>
<p>: 3 seconds</p>
<p>生成的插件jar就在本目录中。</p>
<p>把编译好的插件放入 $eclipse_home/dropins/hadoop/plugins/ (mkdir -p 创建)</p>
<p>启动eclipse 新建mapreduce project， 配置好map/reduce location, 就可以看到hdfs中的文件了</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/hadoop/">hadoop</a></li></span></span> | <span class="tags">Tagged <a href="/tags/hadoop/" class="label label-primary">hadoop</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:36"datetime="2014-03-07 09:54:36"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-hadoop--Hadoop121编译Eclipse插件/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-hadoop--Hadoop121编译Eclipse插件" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-linux-android--linux下adb工具的安装/">linux下adb工具的安装</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:36.000Z"> <a href="/2014/02/02/2014-02-02-linux-android--linux下adb工具的安装/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="linux-adb-">linux下adb工具的安装</h1>
<p>第一步：启动开发板，进入android系统后，在linux终端输入lsusb命令查询USB总线上的设备，比如我这里查询结果如下：</p>
<p>我这里是:
Bus 007 Device 009: ID 18d1:4e12</p>
<p>第二步：下载最新的android SDK并解压到某目录，下载地址：
<a href="http://developer.android.com/sdk/index.html" target="_blank"><a href="http://developer.android.com/sdk/index.html">http://developer.android.com/sdk/index.html</a></a>
截至目前最新的SDK为android-sdk_r12-linux_x86.tgz
解压出来的名称为android-sdk-linux_x86
进入下面目录：
cd android-sdk-linux_x86/tools/
./android update adb</p>
<p>第三步：创建一个新的udev规则的文件，在/etc/udev/rules.d路径下，新建名为imx-android.rules的文件，编辑内容如下：
vim /etc/udev/rules.d/50-android.rules</p>
<p>文件里添加如下配置参数:</p>
<p>/#Acer      0502</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;0502&quot;, MODE=&quot;0666&quot;</p>
<p>/#Dell     413c</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;413c&quot;, MODE=&quot;0666&quot;</p>
<p>/#Foxconn     0489</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;0489&quot;, MODE=&quot;0666&quot;</p>
<p>/#Garmin-Asus     091E</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;091e&quot;, MODE=&quot;0666&quot;</p>
<p>/#HTC     0bb4</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;0bb4&quot;, MODE=&quot;0666&quot;</p>
<p>/#Huawei     12d1</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;12d1&quot;, MODE=&quot;0666&quot;</p>
<p>/#Kyocera     0482</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;0482&quot;, MODE=&quot;0666&quot;</p>
<p>/#LG     1004</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;1004&quot;, MODE=&quot;0666&quot;</p>
<p>/#Motorola     22b8</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;22b8&quot;, MODE=&quot;0666&quot;</p>
<p>/#Nvidia     0955</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;0955&quot;, MODE=&quot;0666&quot;</p>
<p>/#Pantech     10A9</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;10A9&quot;, MODE=&quot;0666&quot;</p>
<p>/#Samsung     04e8</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;04e8&quot;, MODE=&quot;0666&quot;</p>
<p>/#Sharp     04dd</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;04dd&quot;, MODE=&quot;0666&quot;</p>
<p>/#Sony Ericsson     0fce</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;0fce&quot;, MODE=&quot;0666&quot;</p>
<p>/#ZTE     19D2</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;19D2&quot;, MODE=&quot;0666</p>
<p>/#MEIZU     18d1</p>
<p>SUBSYSTEM==&quot;usb&quot;, SYSFS{idVendor}==&quot;18d1&quot;, MODE=&quot;0666</p>
<p>但是这上面的ID，并不能包括所有。
解决办法是你可以使用lsusb命令查看你的USB ID</p>
<p>第四步：在/etc/profile中声明adb的路径:</p>
<p>export PATH=/usr/local/android-sdk-linux/platform-tools:$PATH</p>
<p>第五步：重启ADB
adb kill-server
adb start-server</p>
<p>第六步：使用adb devices命令查找设备：</p>
<p>[root@redhat6 platform-tools]/# adb devices</p>
<p>List of devices attached</p>
<p>353BCHHRB44F    device</p>
<p>至此，安装成功。</p>
<p>你可以进去设备了，用adb shell，可以操作你到android了。</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/linux/">linux</a></li></span><span class="breadcrumb"><li><a href="/categories/linux/">linux</a></li><li><a href="/categories/linux/android/">android</a></li></span></span> | <span class="tags">Tagged <a href="/tags/android/" class="label label-primary">android</a><a href="/tags/linux/" class="label label-success">linux</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:36"datetime="2014-03-07 09:54:36"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-linux-android--linux下adb工具的安装/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-linux-android--linux下adb工具的安装" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/105/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/103/">103</a></li><li><a class="page-number" href="/page/104/">104</a></li><li><a class="page-number" href="/page/105/">105</a></li><li class="active"><li><span class="page-number current">106</span></li><li><a class="page-number" href="/page/107/">107</a></li><li><a class="page-number" href="/page/108/">108</a></li><li><a class="page-number" href="/page/109/">109</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/162/">162</a></li><li><a class="page-number" href="/page/163/">163</a></li><li><a class="extend next" href="/page/107/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Site powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a>  update time: <em>2014-03-30 14:30:16</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
