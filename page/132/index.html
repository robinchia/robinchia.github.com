
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 132 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-mysql--一个备份MySQL数据库的简单Shell脚本/">一个备份MySQL数据库的简单Shell脚本</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:33.000Z"> <a href="/2014/02/02/2014-02-02-DB-mysql--一个备份MySQL数据库的简单Shell脚本/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-mysql-shell-">一个备份MySQL数据库的简单Shell脚本</h1>
<p>本文翻译自 <a href="http://isystemadmin.com/" target="_blank">iSystemAdmin</a> 的 《<a href="http://isystemadmin.com/a-simple-shell-script-to-backup-mysql-database" target="_blank">A Simple Shell Script to Backup MySQL Database</a>》</p>
<p>Shell脚本是我们写不同类型命令的一种脚本，这些命令在这一个文件中就可以执行。我们也可以逐一敲入命令手动执行。如果我们要使用shell脚本就必须在一开始把这些命令写到一个文本文件中，以后就可以随意反复运行这些命令了。</p>
<p>我首先要在本文带给你的是完整脚本。后面会对该脚本做说明。我假定你已经知道<strong>shell scripting、</strong> <strong>mysqldump和**</strong>crontab。**</p>
<p>适用操作系统：任何Linux或UNIX。</p>
<p><a href="http://cdn2.jobbole.com/2012/04/a-simple-shell-script-to-backup-mysql-database.jpg" title="a-simple-shell-script-to-backup-mysql-database" target="_blank"><img src="&quot;a-simple-shell-script-to-backup-mysql-database&quot;" alt="a-simple-shell-script-to-backup-mysql-database"></a></p>
<p><strong>主脚本（用于备份mysql数据库）：</strong></p>
<p>该Shell脚本可以自动备份数据库。只要复制粘贴本脚本到文本编辑器中，输入数据库用户名、密码以及数据库名即可。我备份数据库使用的是<strong>mysqlump</strong> 命令。后面会对每行脚本命令进行说明。</p>
<p><strong>1. 分别建立目录“backup”和“oldbackup”</strong>
1</p>
<p>2
 /#mkdir /backup</p>
<p>/#mkdir /oldbackup</p>
<p><strong>2. 现在使用你喜欢的编辑软件创建并编辑“backup.sh”</strong></p>
<p>这里我用的是 vi
1 /# vi /backup/backup.sh</p>
<p>现在把以下几行命令输入到 backup.sh 文件中：</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
9 /#!bin/bash</p>
<p>cd</p>
<p>/backup
echo</p>
<p>“You are In Backup Directory”</p>
<p>mv</p>
<p>backup/*</p>
<p>/oldbackup
echo</p>
<p>“Old Databases are Moved to oldbackup folder”</p>
<p>Now=$(</p>
<p>date</p>
<p>+”%d-%m-%Y--%H:%M:%S”)
File=backup-$Now.sql</p>
<p>mysqldump –u user-name  –p ‘password’ database-name &gt; $File
echo</p>
<p>“Your Database Backup Successfully Completed”</p>
<p><strong>脚本说明：</strong></p>
<p>切记，在第8行命令中，在mysqldump命令后要输入自己的数据库用户名、密码及数据库名。</p>
<p>执行该脚本，首先会进入 <em>/backup</em> 目录，然后该脚本会把原有的旧数据库备份移动到 <em>/oldbackup</em> 文件夹中，接着根据系统的日期及时间生成一个文件名，在最后 <strong>mysqldump</strong> 命令会生成一个“.sql”格式的数据库备份文件。</p>
<p><strong>3. 设置 backup.sh 脚本文件的可执行许可</strong>
1 /# chmod +x /backup/backup.sh</p>
<p><strong>4. 执行脚本</strong></p>
<p>1 /#./backup.sh</p>
<p>脚本运行结束后会得到以下输入。</p>
<p>1</p>
<p>2
3</p>
<p>4
5 root@Server1:</p>
<p>/download</p>
<p>/#./backup.sh</p>
<p>You areinDownload Directory
Old Backup DatabaseisMoved to oldbackup folder</p>
<p>database backup successful completed
root@Server1:</p>
<p>/download</p>
<p>/#</p>
<p>注：首次执行该脚本会有一个“no such file”的提示信息，这是由于旧备份文件还不存在。只要再次执行该脚本就没有问题了，这个问题已经不存在了。</p>
<p><strong>5. 使用cron制订备份计划</strong></p>
<p>使用Cron可以定时执行该脚本，备份会自动完成。使用 <strong>crontab</strong> 命令编辑cron 执行的计划任务。
1 /#crontab –e</p>
<p>只要在编辑器上加入下面这一行代码保存即可。</p>
<p>1 013/<em> /</em> /<em> /</em></p>
<p>/backup/backup</p>
<p>.sh</p>
<p>本任务表示的是在每天下午1点钟把数据库备份到指定的文件夹。有关cron任务设置的详细内容可以查阅crontab手册。</p>
<p>对初学者而言，这是非常基础的脚本。希望你能举一反三写出更复杂的备份脚本。我们会努力提供更自动化的新脚本。请大家不吝赐教，我们会尽力解决你们的问题。感谢与我们相伴。
来源： <a href="[http://blog.jobbole.com/18005/](http://blog.jobbole.com/18005/)">[http://blog.jobbole.com/18005/](http://blog.jobbole.com/18005/)</a> </p>
<p>A Simple Shell Script to Backup MySQL DataBase</p>
<p>The Shell script is a script where we are writing different types of commands and executing those commands from a single file.  We can execute that command manually, by entering command one by one. But if we use shell script we have to write those commands into a text file for the first time and then we can run those commands as many times as required.</p>
<p>In this article first I will show you, Complete Script. Later on, you will get a description of that script.  I assumed that you know about <strong>shell scripting</strong>, <strong>mysqldump</strong> and <strong>crontab</strong>.</p>
<p>Operating System: Any Linux or UNIX.</p>
<p><strong>Main Script (for backup your <a href="http://resources.isystemadmin.com/mysql/" title="MySQL Introduction" target="_blank">MySQL</a> database):</strong></p>
<p>This shell script will make the backup process of a database automatic. Just copy and paste this script in a text editor, put database user name, password, and database name. I will use <strong>mysqlump</strong> command to backup the database. Later on you will get description of each line.
<strong>1. Make a directory name “backup” and “oldbackup”</strong></p>
<p>1</p>
<p>2
 /#mkdir /backup</p>
<p>/#mkdir /oldbackup
<strong>2. Now make file name “backup.sh” and edit with any editor you like</strong></p>
<p>I’m using vi here-</p>
<p>1 /# vi /backup/backup.sh</p>
<p>Now write these lines into backup.sh file:</p>
<p>/#!bin/bash</p>
<p>cd /backup
echo “You are In Backup Directory”</p>
<p>mv backup/* /oldbackup
echo “Old Databases are Moved to oldbackup folder”</p>
<p>Now=$(date +”%d-%m-%Y--%H:%M:%S”)
File=backup-$Now.sql</p>
<p>mysqldump –u user-name  –p ‘password’ database-name &gt; $File
echo “Your Database Backup Successfully Completed”</p>
<p><strong>Script Description:</strong></p>
<p>Remember, in line number 8: Put your Database username, Password, database name after mysqldump command.</p>
<p>When we run this script, first it goes to a <em>/backup</em> directory. Then it will move old database backup files to <em>/oldbackup</em> folder. Next it generates a file name from system date and time. And finally <strong>mysqldump</strong> command will generate a database backup file with “.sql” format
<strong>3. Set permission to backup.sh file executable</strong></p>
<p>1 /# chmod +x /backup/backup.sh
<strong>4. Running the Script</strong></p>
<p>1 /#./backup.sh</p>
<p>You will get following output after executing the script.
root@Server1:/download/#./backup.sh</p>
<p>You are in Download Directory
Old Backup Database is Moved to oldbackup folder</p>
<p>database backup successful completed
root@Server1:/download/#</p>
<p>NB: first time when you run this script you will get a message “no such file”, because you don’t have old backup file. No problem just runs again this script, problem will be solved.</p>
<p><strong>5. Schedule the Backup using cron</strong></p>
<p>Using Cron job you can execute this script in a certain time, and all works will be done automatically. Use <strong>crontab</strong> command to edit editing cron schedules.</p>
<p>/#crontab –e</p>
<p>Just add below line in the editor and save it.
0 13 /<em> /</em> /<em> /</em> /backup/backup.sh</p>
<p>In this way every day 1PM your database will back up in your desired folder. Please visit crontab manuals for more details about setting the cron jobs.</p>
<p>This is a very basic script for the beginners. Hope you can use the same idea for more complex backup. We will try to come up with new scripts to automate further. Please ask any question you have. We will try our best to address your questions. Thanks for staying with us.</p>
<p><strong>No Related Posts</strong></p>
<h2 id="-">#</h2>
<p>Sifat is a veteran System Administrator who still loves to make his hand dirty with text consoles. Sifat has 14 years of Operations and Management experience in IT and telecommunication industries.He has proven record of IT planning, Policy Development, IT Process Management, Cost Control and successful leadership for effective and efficient IT organization. He is effective in reducing Capital and Operation Expense by H/W &amp; Software consolidation and virtualization. Sifat is a certified ITIL and VMWare Professional.</p>
<p><a href="http://isystemadmin.com/author/sifat" target="_blank">View all posts by Sifat →</a></p>
<p>来源： <a href="[http://isystemadmin.com/a-simple-shell-script-to-backup-mysql-database](http://isystemadmin.com/a-simple-shell-script-to-backup-mysql-database)">[http://isystemadmin.com/a-simple-shell-script-to-backup-mysql-database](http://isystemadmin.com/a-simple-shell-script-to-backup-mysql-database)</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/mysql/">mysql</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/mysql/" class="label label-success">mysql</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:33"datetime="2014-03-07 09:54:33"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-mysql--一个备份MySQL数据库的简单Shell脚本/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-mysql--一个备份MySQL数据库的简单Shell脚本" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-mysql--mysql性能的检查和调优方法-sudonecom服务器系统架构分析日志/">mysql性能的检查和调优方法 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:33.000Z"> <a href="/2014/02/02/2014-02-02-DB-mysql--mysql性能的检查和调优方法-sudonecom服务器系统架构分析日志/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="mysql-sudone-com-">mysql性能的检查和调优方法 - sudone.com服务器系统架构分析日志</h1>
<h1 id="-sudone-com-http-www-sudone-com-"><a href="http://www.sudone.com/" target="_blank">sudone.com</a> 服务器系统架构分析日志</h1>
<h1 id="mysql-">mysql性能的检查和调优方法</h1>
<p>[2012-08-02 15:22:04]</p>
<p>我一直是使用mysql这个数据库软件，它工作比较稳定，效率也很高。在遇到严重性能问题时，一般都有这么几种可能：
1、索引没有建好；
2、sql写法过于复杂；
3、配置错误；
4、机器实在负荷不了；
1、索引没有建好
如果看到mysql消耗的cpu很大，可以用mysql的client工具来检查。
在linux下执行
/usr/local/mysql/bin/mysql -hlocalhost -uroot -p
输入密码，如果没有密码，则不用-p参数就可以进到客户端界面中。
看看当前的运行情况
show full processlist
可以多运行几次
这个命令可以看到当前正在执行的sql语句，它会告知执行的sql、数据库名、执行的状态、来自的客户端ip、所使用的帐号、运行时间等信息
在我的cache后端，这里面大部分时间是看不到显示任何sql语句的，我认为这样才算比较正常。如果看到有很多sql语句，那么这台mysql就一定会有性能问题
如果出现了性能问题，则可以进行分析：
1、是不是有sql语句卡住了？
这是出现比较多的情况，如果数据库是采用myisam，那么有可能有一个写入的线程会把数据表给锁定了，如果这条语句不结束，则其它语句也无法运行。
查看processlist里的time这一项，看看有没有执行时间很长的语句，要留意这些语句。
2、大量相同的sql语句正在执行
如果出现这种情况，则有可能是该sql语句执行的效率低下，同样要留意这些语句。
然后把你所怀疑的语句统统集合一下，用desc（explain）来检查这些语句。
首先看看一个正常的desc输出：
mysql&gt; desc select /<em> from imgs where imgid=1651768337;
+----+-------------+-------+-------+---------------+---------+---------+-------+------+-------+
| id | select_type | table | type  | possible_keys | key     | key_len | ref   | rows | Extra |
+----+-------------+-------+-------+---------------+---------+---------+-------+------+-------+
|  1 | SIMPLE      | imgs  | const | PRIMARY       | PRIMARY | 8       | const |    1 |       |
+----+-------------+-------+-------+---------------+---------+---------+-------+------+-------+
1 row in set (0.00 sec)
注意key、rows和Extra这三项，这条语句返回的结果说明了该sql会使用PRIMARY主键索引来查询，结果集数量为1条，Extra没有显示，证明没有用到排序或其他操作。由此结果可以推断，mysql会从索引中查询imgid=1651768337这条记录，然后再到真实表中取出所有字段，是很简单的操作。
key是指明当前sql会使用的索引，mysql执行一条简单语句时只能使用到一条索引，注意这个限制；rows是返回的结果集大小，结果集就是使用该索引进行一次搜索的所有匹配结果；Extra一般会显示查询和排序的方式，。
如果没有使用到key，或者rows很大而用到了filesort排序，一般都会影响到效率，例如：
mysql&gt; desc select /</em> from imgs where userid=&quot;7mini&quot; order by clicks desc limit 10;
+----+-------------+-------+------+---------------+------+---------+------+-------+-----------------------------+
| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows  | Extra                       |
+----+-------------+-------+------+---------------+------+---------+------+-------+-----------------------------+
|  1 | SIMPLE      | imgs  | ALL  | NULL          | NULL | NULL    | NULL | 12506 | Using where; Using filesort |
+----+-------------+-------+------+---------------+------+---------+------+-------+-----------------------------+
1 row in set (0.00 sec)
这条sql结果集会有12506条，用到了filesort，所以执行起来会非常消耗效率的。这时mysql执行时会把整个表扫描一遍，一条一条去找到匹配userid=&quot;7mini&quot;的记录，然后还要对这些记录的clicks进行一次排序，效率可想而知。真实执行时如果发现还比较快的话，那是因为服务器内存还足够将12506条比较短小的记录全部读入内存，所以还比较快，但是并发多起来或者表大起来的话，效率问题就严重了。
这时我把userid加入索引：
create index userid on imgs (userid);
然后再检查：
mysql&gt; desc select /<em> from imgs where userid=&quot;7mini&quot; order by clicks desc limit 10;
+----+-------------+-------+------+---------------+--------+---------+-------+------+-----------------------------+
| id | select_type | table | type | possible_keys | key    | key_len | ref   | rows | Extra                       |
+----+-------------+-------+------+---------------+--------+---------+-------+------+-----------------------------+
|  1 | SIMPLE      | imgs  | ref  | userid        | userid | 51      | const |    8 | Using where; Using filesort |
+----+-------------+-------+------+---------------+--------+---------+-------+------+-----------------------------+
1 row in set (0.00 sec)
嗯，这时可以看到mysql使用了userid这个索引搜索了，用userid索引一次搜索后，结果集有8条。然后虽然使用了filesort一条一条排序，但是因为结果集只有区区8条，效率问题得以缓解。
但是，如果我用别的userid查询，结果又会有所不同：
mysql&gt; desc select /</em> from imgs where userid=&quot;admin&quot; order by clicks desc limit 10;
+----+-------------+-------+------+---------------+--------+---------+-------+------+-----------------------------+
| id | select_type | table | type | possible_keys | key    | key_len | ref   | rows | Extra                       |
+----+-------------+-------+------+---------------+--------+---------+-------+------+-----------------------------+
|  1 | SIMPLE      | imgs  | ref  | userid        | userid | 51      | const | 2944 | Using where; Using filesort |
+----+-------------+-------+------+---------------+--------+---------+-------+------+-----------------------------+
1 row in set (0.00 sec)
这个结果和userid=&quot;7mini&quot;的结果基本相同，但是mysql用userid索引一次搜索后结果集的大小达到2944条，这2944条记录都会加入内存进行filesort，效率比起7mini那次来说就差很多了。这时可以有两种办法可以解决，第一种办法是再加一个索引和判断条件，因为我只需要根据点击量取最大的10条数据，所以有很多数据我根本不需要加进来排序，比如点击量小于10的，这些数据可能占了很大部分。
我对clicks加一个索引，然后加入一个where条件再查询：
create index clicks on imgs(clicks);
mysql&gt; desc select /<em> from imgs where userid=&quot;admin&quot; order by clicks desc limit 10;
+----+-------------+-------+------+---------------+--------+---------+-------+------+-----------------------------+
| id | select_type | table | type | possible_keys | key    | key_len | ref   | rows | Extra                       |
+----+-------------+-------+------+---------------+--------+---------+-------+------+-----------------------------+
|  1 | SIMPLE      | imgs  | ref  | userid,clicks | userid | 51      | const | 2944 | Using where; Using filesort |
+----+-------------+-------+------+---------------+--------+---------+-------+------+-----------------------------+
1 row in set (0.00 sec)
这时可以看到possible_keys变成了userid,clicks，possible_keys是可以匹配的所有索引，mysql会从possible_keys中自己判断并取用其中一个索引来执行语句，值得注意的是，mysql取用的这个索引未必是最优化的。这次查询mysql还是使用userid这个索引来查询的，并没有按照我的意愿，所以结果还是没有什么变化。改一下sql加上use index强制mysql使用clicks索引：
mysql&gt; desc select /</em> from imgs use index (clicks) where userid=&#39;admin&#39; and clicks&gt;10 order by clicks desc limit 10
+----+-------------+-------+-------+---------------+--------+---------+------+------+-------------+
| id | select_type | table | type  | possible_keys | key    | key_len | ref  | rows | Extra       |
+----+-------------+-------+-------+---------------+--------+---------+------+------+-------------+
|  1 | SIMPLE      | imgs  | range | clicks        | clicks | 4       | NULL | 5455 | Using where |
+----+-------------+-------+-------+---------------+--------+---------+------+------+-------------+
1 row in set (0.00 sec)
这时mysql用到了clicks索引进行查询，但是结果集比userid还要大！看来还要再进行限制：
mysql&gt; desc select /<em> from imgs use index (clicks) where userid=&#39;admin&#39; and clicks&gt;1000 order by clicks desc limit 10
+----+-------------+-------+-------+---------------+--------+---------+------+------+-------------+
| id | select_type | table | type  | possible_keys | key    | key_len | ref  | rows | Extra       |
+----+-------------+-------+-------+---------------+--------+---------+------+------+-------------+
|  1 | SIMPLE      | imgs  | range | clicks        | clicks | 4       | NULL |  312 | Using where |
+----+-------------+-------+-------+---------------+--------+---------+------+------+-------------+
1 row in set (0.00 sec)
加到1000的时候结果集变成了312条，排序效率应该是可以接受。
不过，采用换索引这种优化方式需要取一个采样点，比如这个例子中的1000这个数字，这样，对userid的每个数值，都要去找一个采样点，这样对程序来说是很难办的。如果按1000取样的话，那么userid=&#39;7mini&#39;这个例子中，取到的结果将不会是8条，而是2条，给用户造成了困惑。
当然还有另一种办法，加入双索引：
create index userid_clicks on imgs (userid, clicks)
mysql&gt; desc select /</em> from imgs where userid=&quot;admin&quot; order by clicks desc limit 10;
+----+-------------+-------+------+----------------------+---------------+---------+-------+------+-------------+
| id | select_type | table | type | possible_keys        | key           | key_len | ref   | rows | Extra       |
+----+-------------+-------+------+----------------------+---------------+---------+-------+------+-------------+
|  1 | SIMPLE      | imgs  | ref  | userid,userid_clicks | userid_clicks | 51      | const | 2944 | Using where |
+----+-------------+-------+------+----------------------+---------------+---------+-------+------+-------------+
1 row in set (0.00 sec)
这时可以看到，结果集还是2944条，但是Extra中的filesort不见了。这时mysql使用userid_clicks这个索引去查询，这不但能快速查询到userid=&quot;admin&quot;的所有记录，并且结果是根据clicks排好序的！所以不用再把这个结果集读入内存一条一条排序了，效率上会高很多。
但是用多字段索引这种方式有个问题，如果查询的sql种类很多的话，就得好好规划一下了，否则索引会建得非常多，不但会影响到数据insert和update的效率，而且数据表也容易损坏。
以上是对索引优化的办法，因为原因可能会比较复杂，所以写得比较的长，一般好好优化了索引之后，mysql的效率会提升n个档次，从而也不需要考虑增加机器来解决问题了。
但是，mysql甚至所有数据库，可能都不好解决limit的问题。在mysql中，limit 0,10只要索引合适，是没有问题的，但是limit 100000,10就会很慢了，因为mysql会扫描排好序的结果，然后找到100000这个点，取出10条返回。要找到100000这个点，就要扫描100000条记录，这个循环是比较耗时的。不知道会不会有什么好的算法可以优化这个扫描引擎，我冥思苦想也想不出有什么好办法。对于limit，目前直至比较久远的将来，我想只能通过业务、程序和数据表的规划来优化，我想到的这些优化办法也都还没有一个是万全之策，往后再讨论。
2、sql写法过于复杂
sql写法假如用到一些特殊的功能，比如groupby、或者多表联合查询的话，mysql用到什么方式来查询也可以用desc来分析，我这边用复杂sql的情况还不算多，所以不常分析，暂时就没有好的建议。
3、配置错误
配置里主要参数是key_buffer、sort_buffer_size/myisam_sort_buffer_size，这两个参数意思是：
key_buffer=128M：全部表的索引都会尽可能放在这块内存区域内，索引比较大的话就开稍大点都可以，我一般设为128M，有个好的建议是把很少用到并且比较大的表想办法移到别的地方去，这样可以显著减少mysql的内存占用。
sort_buffer_size=1M：单个线程使用的用于排序的内存，查询结果集都会放进这内存里，如果比较小，mysql会多放几次，所以稍微开大一点就可以了，重要是优化好索引和查询语句，让他们不要生成太大的结果集。
另外一些配置：
thread_concurrency=8：这个配置标配=cpu数量x2
interactive_timeout=30
wait_timeout=30：这两个配置使用10-30秒就可以了，这样会尽快地释放内存资源，注意：一直在使用的连接是不会断掉的，这个配置只是断掉了长时间不动的连接。
query_cache：这个功能不要使用，现在很多人看到cache这几个字母就像看到了宝贝，这是不唯物主义的。mysql的query_cache在每次表数据有变化的时候都会重新清理连至该表的所有缓存，如果更新比较频繁，query_cache不但帮不上忙，而且还会对效率影响很大。这个参数只适合只读型的数据库，如果非要用，也只能用query_cache_type=2自行用SQL_CACHE指定一些sql进行缓存。
max_connections：默认为100，一般情况下是足够用的，但是一般要开大一点，开到400-600就可以了，能超过600的话一般就有效率问题，得另找对策，光靠增加这个数字不是办法。
其它配置可以按默认就可以了，个人觉得问题还不是那么的大，提醒一下：1、配置虽然很重要，但是在绝大部分情况下都不是效率问题的罪魁祸首。2、mysql是一个数据库，对于数据库最重要考究的不应是效率，而是稳定性和数据准确性。
4、机器实在负荷不了
如果做了以上调整，服务器还是不能承受，那就只能通过架构级调整来优化了。
1、mysql同步。
通过mysql同步功能将数据同步到数台从数据库，由主数据库写入，从数据库提供读取。
我个人不是那么乐意使用mysql同步，因为这个办法会增加程序的复杂性，并常常会引起数据方面的错误。在高负荷的服务中，死机了还可以快速重启，但数据错误的话要恢复就比较麻烦。
2、加入缓存
加入缓存之后，就可以解决并发的问题，效果很明显。如果是实时系统，可以考虑用刷新缓存方式使缓存保持最新。
在前端加入squid的架构比较提倡使用，在命中率比较高的应用中，基本上可以解决问题。
如果是在程序逻辑层里面进行缓存，会增加很多复杂性，问题会比较多而且难解决，不建议在这一层面进行调整。
3、程序架构调整，支持同时连接多个数据库
如果web加入缓存后问题还是比较严重，只能通过程序架构调整，把应用拆散，用多台的机器同时提供服务。
如果拆散的话，对业务是有少许影响，如果业务当中有部分功能必须使用所有的数据，可以用一个完整库+n个分散库这样的架构，每次修改都在完整库和分散库各操作一次，或定期整理完整库。
当然，还有一种最笨的，把数据库整个完完整整的做拷贝，然后程序每次都把完整的sql在这些库执行一遍，访问时轮询访问，我认为这样要比mysql同步的方式安全。
4、使用 mysql proxy 代理
mysql proxy 可以通过代理把数据库中的各个表分散到数台服务器，但是它的问题是没有能解决热门表的问题，如果热门内容散在多个表中，用这个办法是比较轻松就能解决问题。
我没有用过这个软件也没有认真查过，不过我对它的功能有一点点怀疑，就是它怎么实现多个表之间的联合查询？如果能实现，那么效率如何呢？
5、使用memcachedb
数据库换用支持mysql的memcachedb，是可以一试的想法，从memcachedb的实现方式和层面来看对数据没有什么影响，不会对用户有什么困扰。
为我现在因为数据库方面问题不多，没有试验过这个玩意。不过，只要它支持mysql的大部分主要的语法，而且本身稳定，可用性是无需置疑的。
  站名：<a href="http://www.sudone.com/" target="_blank">sudone.com</a>; 站长：<a href="http://www.sudone.com/ayou.html" target="_blank">Ayou</a>; 服务器：ubuntu+nginx+squid+php</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/mysql/">mysql</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/mysql/" class="label label-success">mysql</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:33"datetime="2014-03-07 09:54:33"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-mysql--mysql性能的检查和调优方法-sudonecom服务器系统架构分析日志/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-mysql--mysql性能的检查和调优方法-sudonecom服务器系统架构分析日志" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-mysql--为MySQL选择合适的备份方式/">为MySQL选择合适的备份方式</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:33.000Z"> <a href="/2014/02/02/2014-02-02-DB-mysql--为MySQL选择合适的备份方式/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-mysql-">为MySQL选择合适的备份方式</h1>
<p>[<img src="" alt=""></p>
<p>mysql 5.1同步到5.5卡库问题一则
](<a href="http://nettedfish.sinaapp.com/blog/2013/02/22/51-55-slave-sql-thread-error/" target="_blank">http://nettedfish.sinaapp.com/blog/2013/02/22/51-55-slave-sql-thread-error/</a> &quot;mysql 5.1同步到5.5卡库问题一则&quot;)[<img src="" alt=""></p>
<p>一键搭建blackhole从库
](<a href="http://nettedfish.sinaapp.com/blog/2012/10/19/auto-build-blackhole-slave" target="_blank">http://nettedfish.sinaapp.com/blog/2012/10/19/auto-build-blackhole-slave</a> &quot;一键搭建blackhole从库&quot;)[<img src="" alt=""></p>
<p>如何产生唯一的server id
](<a href="http://nettedfish.sinaapp.com/blog/2013/07/24/how-to-generate-unique-server_id/" target="_blank">http://nettedfish.sinaapp.com/blog/2013/07/24/how-to-generate-unique-server_id/</a> &quot;如何产生唯一的server id&quot;)[<img src="" alt=""></p>
<p>如何生成唯一的server id
](<a href="http://nettedfish.sinaapp.com//blog/2013/07/24/how-to-generate-unique-server_id/" target="_blank">http://nettedfish.sinaapp.com//blog/2013/07/24/how-to-generate-unique-server_id/</a> &quot;如何生成唯一的server id&quot;)</p>
<p><a href="http://www.ujian.cc/index2" title="友荐是什么？" target="_blank">友荐[?]</a></p>
<p><a href="&quot;返回顶部&quot;">返回顶部</a><a href="&quot;猜你喜欢&quot;">猜你喜欢</a>
[<img src="" alt=""></p>
<p>mysql 5.1同步到5.5卡库问题一则
](<a href="http://nettedfish.sinaapp.com/blog/2013/02/22/51-55-slave-sql-thread-error/" target="_blank">http://nettedfish.sinaapp.com/blog/2013/02/22/51-55-slave-sql-thread-error/</a> &quot;mysql 5.1同步到5.5卡库问题一则&quot;)[<img src="" alt=""></p>
<p>金泫雅清新素颜照
](<a href="http://www.cmsbs.com/pic/zp/4993.html" target="_blank">http://www.cmsbs.com/pic/zp/4993.html</a> &quot;金泫雅清新素颜照&quot;)[<img src="" alt=""></p>
<p>学生办理签证重要的标准
](<a href="http://www.cmsbs.com/eut/luixue/5105.html" target="_blank">http://www.cmsbs.com/eut/luixue/5105.html</a> &quot;学生办理签证重要的标准&quot;)[<img src="" alt=""></p>
<p>深田恭子艳丽沙滩迷情写真
](<a href="http://www.cmsbs.com/pic/hot/5228.html" target="_blank">http://www.cmsbs.com/pic/hot/5228.html</a> &quot;深田恭子艳丽沙滩迷情写真&quot;)[<img src="" alt=""></p>
<p>李颖芝穿金色比基尼与保时捷亲密接触
](<a href="http://www.cmsbs.com/pic/xg/5166.html" target="_blank">http://www.cmsbs.com/pic/xg/5166.html</a> &quot;李颖芝穿金色比基尼与保时捷亲密接触&quot;)</p>
<p><a href="http://www.ujian.cc/index2" title="友荐是什么？" target="_blank">友荐[?]</a></p>
<p><a href="&quot;返回顶部&quot;">返回顶部</a><a href="&quot;猜你喜欢&quot;">猜你喜欢</a></p>
<h1 id="-learn-and-share-http-nettedfish-sinaapp-com-"><a href="http://nettedfish.sinaapp.com/" target="_blank">Learn and Share</a></h1>
<h2 id="-">陌上发花，可以缓缓醉矣， 忍把浮名，换了浅酌低唱</h2>
<ul>
<li><p><a href="http://nettedfish.sinaapp.com/atom.xml" title="RSS订阅" target="_blank">RSS</a>
Navigate…» 首页» 文章归档» 资料分享» 去哪儿招聘» 关于我» RSS</p>
</li>
<li><p><a href="http://nettedfish.sinaapp.com/" target="_blank">首页</a></p>
</li>
<li><a href="http://nettedfish.sinaapp.com/blog/archives" target="_blank">文章归档</a></li>
<li><a href="http://nettedfish.sinaapp.com/my_share.html" target="_blank">资料分享</a></li>
<li><a href="http://nettedfish.sinaapp.com/enroll.html" target="_blank">去哪儿招聘</a></li>
<li><a href="http://nettedfish.sinaapp.com/about.html" target="_blank">关于我</a><h1 id="-mysql-">为MySQL选择合适的备份方式</h1>
</li>
</ul>
<p>2013年-05月-31日 16:01:00
数据库的备份是极其重要的事情。如果没有备份，遇到下列情况就会抓狂：</p>
<h3 id="update-or-delete-whitout-where-">UPDATE or DELETE whitout where…</h3>
<h3 id="table-was-dropped-accidentally-">table was DROPPed accidentally…</h3>
<h3 id="innodb-was-corrupt-">INNODB was corrupt…</h3>
<h3 id="entire-datacenter-loses-power-">entire datacenter loses power…</h3>
<p>从数据安全的角度来说，服务器磁盘都会做raid，MySQL本身也有主从、drbd等容灾机制，但它们都无法完全取代备份。容灾和高可用能帮我们有效的应对物理的、硬件的、机械的故障，而对我们犯下的逻辑错误却无能为力。每一种逻辑错误发生的概率都极低，但是当多种可能性叠加的时候，小概率事件就放大成很大的安全隐患，这时候备份的必要性就凸显了。那么在众多的MySQL备份方式中，哪一种才是适合我们的呢？</p>
<h2 id="-">常见的备份方式</h2>
<p>MySQL本身为我们提供了mysqldump、mysqlbinlog远程备份工具，percona也为我们提供了强大的Xtrabackup，加上开源的mydumper，还有基于主从同步的延迟备份、从库冷备等方式，以及基于文件系统快照的备份，其实选择已经多到眼花缭乱。而备份本身是为了恢复，所以能够让我们在出现故障后迅速、准确恢复的备份方式，就是最适合我们的，当然，同时能够省钱、省事，那就非常完美。下面就我理解的几种备份工具进行一些比较，探讨下它们各自的适用场景。</p>
<h3 id="1-mysqldump-mydumper">1. mysqldump &amp; mydumper</h3>
<p>mysqldump是最简单的逻辑备份方式。在备份myisam表的时候，如果要得到一致的数据，就需要锁表，简单而粗暴。而在备份innodb表的时候，加上–master-data=1 –single-transaction 选项，在事务开始时刻，记录下binlog pos点，然后利用mvcc来获取一致的数据，由于是一个长事务，在写入和更新量很大的数据库上，将产生非常多的undo，显著影响性能，所以要慎用。 <img src="" alt=""></p>
<ul>
<li>优点：简单，可针对单表备份，在全量导出表结构的时候尤其有用。</li>
<li>缺点：简单粗暴，单线程，备份慢而且恢复慢，跨IDC有可能遇到时区问题。
mydumper是mysqldump的加强版。相比mysqldump：</li>
<li>内置支持压缩，可以节省2-4倍的存储空间。</li>
<li>支持并行备份和恢复，因此速度比mysqldump快很多，但是由于是逻辑备份，仍不是很快。</li>
</ul>
<h3 id="2-">2. 基于文件系统的快照</h3>
<p>基于文件系统的快照，是物理备份的一种。在备份前需要进行一些复杂的设置，在备份开始时刻获得快照并记录下binlog pos点，然后采用类似copy-on-write的方式，把快照进行转储。转储快照本身会消耗一定的IO资源，而且在写入压力较大的实例上，保存被更改数据块的前印象也会消耗IO，最终表现为整体性能的下降。而且服务器还要为copy-on-write快照预留较多的磁盘空间，这本身对资源也是一种浪费。因此这种备份方式我们使用的不多。 <img src="" alt=""></p>
<h3 id="3-xtrabackup">3. Xtrabackup</h3>
<p>这或许是最为广泛的备份方式。percona之所以家喻户晓，Xtrabackup应该功不可没。它实际上是物理备份+逻辑备份的组合。在备份innodb表的时候，它拷贝ibd文件，并一刻不停的监视redo log的变化，append到自己的事务日志文件。在拷贝ibd文件过程中，ibd文件本身可能被写”花”，这都不是问题，因为在拷贝完成后的第一个prepare阶段，Xtrabackup采用类似于innodb崩溃恢复的方法，把数据文件恢复到与日志文件一致的状态，并把未提交的事务回滚。如果同时需要备份myisam表以及innodb表结构等文件，那么就需要用flush tables with lock来获得全局锁，开始拷贝这些不再变化的文件，同时获得binlog位置，拷贝结束后释放锁，也停止对redo log的监视。
它的工作原理如下：
<img src="" alt="">
由于mysql中不可避免的含有myisam表，同时innobackup并不备份表结构等文件，因此想要完整的备份mysql实例，就少不了要执行flush tables with read lock，而这个语句会被任何查询(包括select)阻塞，在阻塞过程中，它又反过来阻塞任何查询(包括select)。如果碰巧备份实例上有长查询先于flush tables with read lock执行，数据库就会hang住。而当flush tables with read lock获得全局锁后，虽然查询可以执行，但是仍会阻塞更新，所以，我们希望flush tables with read lock从发起到结束，持续的时间越短越好。
为了解决这个问题，有两种比较有效的方法：</p>
<h3 id="1-myisam-">1. 尽量不用myisam表。</h3>
<h3 id="2-xtrabackup-rsync-rsync-">2. Xtrabackup增加了–rsync选项，通过两次rsync来减少持有全局锁的时间。</h3>
<p>优化后的备份过程如下：
<img src="" alt=""></p>
<ul>
<li>优点：在线热备，全备+增备+流备，支持限速，支持压缩，支持加密。</li>
<li>缺点：需要获取全局锁，如果遇到长查询，等待时间将不可控，因此要做好监控，必要时杀死长查询或自杀；遇到超大的实例，备份过程较长，redo log太大会影响恢复速度，这种情况下最好采用延迟备份。</li>
</ul>
<h3 id="4-mysqlbinlog-5-6">4. mysqlbinlog 5.6</h3>
<p>上述所有的备份方式，都只能把数据库恢复到备份的某个时间点：mysqldump和mydumper，以及snapshot是备份开始的时间点；Xtrabackup是备份结束的时间点。要想实现point in time的恢复，还必须备份binlog。同时binlog也是实现增备的宝贵资源。
幸运的是，mysql 5.6为我们提供了远程备份binlog的选项：</p>
<p>mysqlbinlog --raw --read-from-remote-server --stop-never
它会伪装成mysql从库，从远程获取binlog然后进行转储。这对线上主库容量不够无法保存较多binlog的场景非常有用。但是，它毕竟不像真正的mysql从库实例，状态监控和同步都需要单独部署。因此个人觉得采用blackhole来备份全量的binlog是更好的选择。笔者曾经实现过一个<a href="https://github.com/nettedfish/create_blackhole_slave" target="_blank">自动搭建blackhole从库的工具</a>，稍加修改，就可以完美搭建出blackhole从库。一旦同步起来，基本一劳永逸，很少出问题，主从切换的时候跟着切了就行。</p>
<h3 id="-">提示：</h3>
<ul>
<li>不要小看binlog的备份。当5.6的多线程复制大规模使用后，从库追赶主库命令点的耗时将被极大缩短，这样我们把每天一次的全量备份改为每3天一次、甚至每周一次的全量备份，和持续的binlog增量备份。遇到故障需要恢复数据的时候，重放3、5天的binlog也是极快的。降低备份频率最直接的好处是，省钱、省事。</li>
<li>blackhole对于备份binlog是极好的。一方面可以长久的备份binlog用于恢复数据库，另一方面，在其上配置半同步复制，可以有效防止主库的binlog丢失。</li>
</ul>
<h2 id="-">总结</h2>
<p>备份方式各有千秋，而对我们来说，面对数千实例，选择合适的备份工具来实现统一配置、统一规划，构建智能调度的备份云平台才是王道。毕竟，多种备份方式共存的运维成本是不容忽视的。
从使用经验来看，用Xtrabackup全备数据，用blackhole增备binlog，并定期对备份数据的有效性进行验证，是当下比较好的选择。</p>
<p>Posted by nettedfish 2013年-05月-31日 16:01:00  <a href="http://nettedfish.sinaapp.com/blog/categories/mysql/" target="_blank">mysql</a></p>
<p><a href="http://nettedfish.sinaapp.com/blog/2013/02/22/51-55-slave-sql-thread-error/" title="Previous Post: mysql 5.1同步到5.5卡库问题一则" target="_blank">« mysql 5.1同步到5.5卡库问题一则</a> <a href="http://nettedfish.sinaapp.com/blog/2013/06/04/check-replication-consistency-by-pt-table-checksum/" title="Next Post: 用pt-table-checksum校验数据一致性" target="_blank">用pt-table-checksum校验数据一致性 »</a>
<a href="http://www.ujian.cc/" target="_blank"><img src="" alt="友荐云推荐"></a></p>
<p><a href=""><img src="" alt=""></a><a href=""><img src="" alt=""></a></p>
<p>共有1人喜欢  共3条评论
<a href="">登录</a><a href="">社区</a></p>
<p><a href=""></a></p>
<p>头衔:<a href="">确定</a><a href="">取消</a></p>
<p><a href="">编辑头衔</a>
邮箱:<a href="">确定</a><a href="">取消</a></p>
<p><a href="">跟踪回复</a></p>
<p>0条评论</p>
<p>0次被喜欢
发表评论</p>
<p><a href=""></a><a href=""></a><a href=""></a><a href=""></a><a href=""></a>
<a href=""></a><a href=""></a><a href=""></a><a href=""></a><a href=""></a></p>
<p><img src="" alt=""></p>
<p>请输入你的评论
        表情</p>
<ul>
<li>默认表情</li>
<li>阿狸</li>
</ul>
<p>140
<a href="">发  布</a></p>
<p><img src="" alt=""></p>
<p><img src="" alt="">
<img src="" alt="">
<a href="">按时间排序</a></p>
<p>排序方式:<a href="">按时间排序</a><a href="">按热度排序</a>
<a href="http://s.uyan.cc/?u=http%3A%2F%2Fweibo.com%2F1774036133" target="_blank"><img src="" alt=""></a>  <a href="http://s.uyan.cc/?u=http%3A%2F%2Fweibo.com%2F1774036133" title="新浪微博"></a></p>
<p><a href="http://s.uyan.cc/?u=http%3A%2F%2Fweibo.com%2F1774036133" target="_blank">jianfengye110</a> (<a href="http://s.uyan.cc/?u=http%3A%2F%2Fweibo.com%2F1774036133" target="_blank">新浪微博</a>)</p>
<p>推荐～～<img src="" alt="">
<a href="">回复</a><a href=""></a> <a href="">踩</a> <a href=""></a> <a href="">顶</a> <a href=""></a></p>
<p>22小时前</p>
<p><a href="http://s.uyan.cc/?u=http%3A%2F%2Fweibo.com%2F1642647770" target="_blank"><img src="" alt=""></a>  <a href="http://s.uyan.cc/?u=http%3A%2F%2Fweibo.com%2F1642647770" title="新浪微博"></a></p>
<p><a href="http://s.uyan.cc/?u=http%3A%2F%2Fweibo.com%2F1642647770" target="_blank">sin30_net</a> (<a href="http://s.uyan.cc/?u=http%3A%2F%2Fweibo.com%2F1642647770" target="_blank">新浪微博</a>)</p>
<p>微博转发：转发微博
<a href="">回复</a><a href=""></a> <a href="">踩</a> <a href=""></a> <a href="">顶</a> <a href=""></a></p>
<p>22小时前
<a href="http://s.uyan.cc/?u=http%3A%2F%2Fweibo.com%2F2000702247" target="_blank"><img src="" alt=""></a>  <a href="http://s.uyan.cc/?u=http%3A%2F%2Fweibo.com%2F2000702247" title="新浪微博"></a></p>
<p><a href="http://s.uyan.cc/?u=http%3A%2F%2Fweibo.com%2F2000702247" target="_blank">vvsherry</a> (<a href="http://s.uyan.cc/?u=http%3A%2F%2Fweibo.com%2F2000702247" target="_blank">新浪微博</a>)</p>
<p><img src="" alt="">
<a href="">回复</a><a href=""></a> <a href="">踩</a> <a href=""></a> <a href="">顶1</a> <a href=""></a></p>
<p>6月1日 00:44</p>
<p>更多热评文章</p>
<p>[* <img src="" alt=""></p>
<p>mysql 5.1同步到5.5卡库问题一则](<a href="http://nettedfish.sinaapp.com/blog/2013/02/22/51-55-slave-sql-thread-error/" target="_blank">http://nettedfish.sinaapp.com/blog/2013/02/22/51-55-slave-sql-thread-error/</a> &quot;mysql 5.1同步到5.5卡库问题一则&quot;)</p>
<p>[* <img src="" alt=""></p>
<p>一键搭建blackhole从库](<a href="http://nettedfish.sinaapp.com/blog/2012/10/19/auto-build-blackhole-slave" target="_blank">http://nettedfish.sinaapp.com/blog/2012/10/19/auto-build-blackhole-slave</a> &quot;一键搭建blackhole从库&quot;)
[* <img src="" alt=""></p>
<p>如何产生唯一的server id](<a href="http://nettedfish.sinaapp.com/blog/2013/07/24/how-to-generate-unique-server_id/" target="_blank">http://nettedfish.sinaapp.com/blog/2013/07/24/how-to-generate-unique-server_id/</a> &quot;如何产生唯一的server id&quot;)</p>
<p>[* <img src="" alt=""></p>
<p>如何生成唯一的server id](<a href="http://nettedfish.sinaapp.com//blog/2013/07/24/how-to-generate-unique-server_id/" target="_blank">http://nettedfish.sinaapp.com//blog/2013/07/24/how-to-generate-unique-server_id/</a> &quot;如何生成唯一的server id&quot;)
<a href="http://www.uyan.cc/" title="社会化评论是什么？" target="_blank">友言[?]</a></p>
<p><img src="" alt=""></p>
<p>请输入你的评论
        表情</p>
<ul>
<li>默认表情</li>
<li>阿狸
140</li>
</ul>
<p><a href="">回  复</a>
<img src="" alt=""></p>
<p><img src="" alt="">
<img src="" alt="">
nettedfish.sinaapp.com</p>
<p>43
评论数</p>
<p>8
喜欢数
21
用户数
数据正在加载中...</p>
<p><a href="http://www.uyan.cc/" target="_blank">友言</a></p>
<p>社会化帐号登录</p>
<h2 id="-">点击按钮，使用社交帐号评论</h2>
<p><a href="&quot;用新浪微博账号登陆&quot;"><img src="&quot;用新浪微博账号登陆&quot;" alt="">  新浪微博</a><a href="&quot;用腾讯微博账号登陆&quot;"><img src="&quot;用腾讯微博账号登陆&quot;" alt="">  腾讯微博</a><a href="&quot;用人人网账号登陆&quot;"><img src="&quot;用人人网账号登陆&quot;" alt="">  人人网</a><a href="&quot;用网易微博账号登陆&quot;"><img src="&quot;用网易微博账号登陆&quot;" alt="">  网易微博</a><a href="&quot;用搜狐微博账号登陆&quot;"><img src="&quot;用搜狐微博账号登陆&quot;" alt="">  搜狐微博</a><a href="&quot;用开心网账号登陆&quot;"><img src="&quot;用开心网账号登陆&quot;" alt="">  开心网</a></p>
<h2 id="-">作为游客留言</h2>
<p>Email /*</p>
<p>昵  称
顶并分享到:</p>
<p>新浪微博
新浪微博</p>
<p>新浪微博
<a href="">顶</a><a href="">取消</a></p>
<h2 id="-qunar-mysql-dba-http-nettedfish-sinaapp-com-enroll-html-"><a href="http://nettedfish.sinaapp.com/enroll.html" target="_blank">qunar诚招MySQL DBA</a></h2>
<h1 id="-">最新发表</h1>
<ul>
<li><a href="http://nettedfish.sinaapp.com/blog/2013/08/05/deep-into-git-with-diagrams/" target="_blank">图解GIT</a></li>
<li><a href="http://nettedfish.sinaapp.com/blog/2013/07/24/how-to-generate-unique-server_id/" target="_blank">如何生成唯一的server id</a></li>
<li><a href="http://nettedfish.sinaapp.com/blog/2013/06/05/synchronizes-data-efficiently-by-pt-table-sync/" target="_blank">用pt-table-sync修复不一致的数据</a></li>
<li><a href="http://nettedfish.sinaapp.com/blog/2013/06/04/check-replication-consistency-by-pt-table-checksum/" target="_blank">用pt-table-checksum校验数据一致性</a></li>
<li><a href="">为MySQL选择合适的备份方式</a></li>
<li><a href="http://nettedfish.sinaapp.com/blog/2013/02/22/51-55-slave-sql-thread-error/" target="_blank">mysql 5.1同步到5.5卡库问题一则</a></li>
<li><a href="http://nettedfish.sinaapp.com/blog/2013/01/30/python-encode-decode/" target="_blank">python 字符串编解码研究</a></li>
<li><a href="http://nettedfish.sinaapp.com/blog/2013/01/07/disk-throughtput/" target="_blank">test disk throughtput with dd</a></li>
</ul>
<h1 id="-">分类目录</h1>
<ul>
<li><a href="http://nettedfish.sinaapp.com/blog/categories/linux" target="_blank">linux (1)</a></li>
<li><a href="http://nettedfish.sinaapp.com/blog/categories/mysql" target="_blank">mysql (7)</a></li>
<li><a href="http://nettedfish.sinaapp.com/blog/categories/python" target="_blank">python (1)</a></li>
<li><a href="http://nettedfish.sinaapp.com/blog/categories/tools" target="_blank">tools (3)</a></li>
<li><a href="http://nettedfish.sinaapp.com/blog/categories/生活札记" target="_blank">生活札记 (1)</a></li>
</ul>
<h1 id="github-repos">GitHub Repos</h1>
<ul>
<li><a href="https://github.com/nettedfish/dzpk" target="_blank">dzpk</a></li>
</ul>
<p>德州扑克筹码计算工具</p>
<ul>
<li><a href="https://github.com/nettedfish/gnuplot" target="_blank">gnuplot</a></li>
</ul>
<p>gnuplot作图的一些例子</p>
<ul>
<li><a href="https://github.com/nettedfish/create_blackhole_slave" target="_blank">create_blackhole_slave</a></li>
</ul>
<p>一键搭建blackhole从库</p>
<ul>
<li><a href="https://github.com/nettedfish/psutil" target="_blank">psutil</a></li>
</ul>
<p>psutil</p>
<ul>
<li><a href="https://github.com/nettedfish/codernitydb" target="_blank">codernitydb</a></li>
</ul>
<p>开源的纯python写的nosql数据库,学习
<a href="https://github.com/nettedfish" target="_blank">@nettedfish</a> on GitHub</p>
<h1 id="-">友情链接</h1>
<ul>
<li><a href="http://www.orczhou.com/" target="_blank">淘宝周振兴</a></li>
<li><a href="http://papaisadba.puyu.me/" target="_blank">去哪儿周彦伟</a></li>
<li><a href="https://blogs.oracle.com/MySQL/" target="_blank">oracle innodb 官方</a></li>
<li><a href="http://www.cnblogs.com/shenguanpu/" target="_blank">坚毅的刀刀</a></li>
<li><a href="http://blog.csdn.net/liuben" target="_blank">存储专栏</a></li>
<li><a href="http://huoding.com/" target="_blank">火丁笔记</a></li>
<li><a href="http://blog.yufeng.info/" target="_blank">淘宝褚霸</a></li>
<li><a href="http://dinglin.iteye.com/" target="_blank">淘宝丁奇</a></li>
<li><a href="http://www.mysqlops.com/" target="_blank">mysql ops</a></li>
<li><a href="http://www.penglixun.com/" target="_blank">plinux</a></li>
<li><a href="http://www.hellodb.net/" target="_blank">hellodba</a></li>
<li><a href="http://timyang.net/" target="_blank">timyang</a></li>
<li><a href="http://www.ningoo.net/" target="_blank">ningoo</a></li>
<li><a href="http://www.mysqlperformanceblog.com/" target="_blank">performanceblog</a></li>
<li><a href="http://www.xaprb.com/blog/" target="_blank">Xaprb</a></li>
<li><a href="http://hedengcheng.com/" target="_blank">登博</a></li>
<li><a href="http://dom.as/" target="_blank">Domas Mituzas</a></li>
<li><a href="http://hackmysql.com/" target="_blank">hack mysql</a></li>
<li><a href="http://www.dbsnake.com/" target="_blank">dbsnake</a></li>
<li><a href="http://blog.cydu.net/" target="_blank">dcy</a></li>
<li><a href="http://code.openark.org/blog/" target="_blank">Shlomi Noach</a></li>
<li><a href="http://www.yankay.com/" target="_blank">yankay</a></li>
<li><a href="http://www.mysqlsupport.cn/" target="_blank">吴炳锡</a></li>
<li><a href="http://coolshell.cn/" target="_blank">左耳朵耗子</a></li>
<li><a href="http://www.realzyy.com/" target="_blank">张云杨</a></li>
<li><a href="http://www.iamcjd.com/" target="_blank">最醉红楼</a></li>
<li><a href="http://dbahacker.com/" target="_blank">杨德华</a></li>
<li><a href="http://huoding.com/" target="_blank">火丁笔记</a></li>
<li><a href="http://isky000.com/" target="_blank">简朝阳</a></li>
<li><a href="http://www.mysqlab.net/" target="_blank">谭俊青</a></li>
<li><a href="http://blog.csdn.net/lanphaday" target="_blank">赖永浩</a></li>
<li><a href="http://www.alidba.net/" target="_blank">阿里巴巴DBA</a></li>
</ul>
<p>Copyright © 2013 - nettedfish - Powered by <a href="http://octopress.org/" target="_blank">Octopress</a>   <a href="http://tongji.baidu.com/hm-web/welcome/ico?s=e0f5d44e4da361e95c65c951fc44fec6" target="_blank"><img src="" alt=""></a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/mysql/">mysql</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/mysql/" class="label label-success">mysql</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:34"datetime="2014-03-07 09:54:34"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-mysql--为MySQL选择合适的备份方式/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-mysql--为MySQL选择合适的备份方式" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-mariadb--MySQL-56-和-MariaDB-100-的性能比较测试/">MySQL</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:33.000Z"> <a href="/2014/02/02/2014-02-02-DB-mariadb--MySQL-56-和-MariaDB-100-的性能比较测试/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="mysql-5-6-mariadb-10-0-">MySQL-5.6-和-MariaDB-10.0-的性能比较测试</h1>
<p>[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/mini_07a0c0d02f0ff9b5eb35_120_120.jpg" alt=""></p>
<p>上使用MySQL的简单总结
](<a href="http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20+Jexus+MySQL+mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93" target="_blank">http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20+Jexus+MySQL+mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93</a> &quot;上使用MySQL的简单总结&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/21.jpg" alt=""></p>
<p>php与mysql
](<a href="http://www.xiuxiandou.com/content-blog-3114-php%E4%B8%8Emysql-web-%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3---php%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84%E5%92%8C%E5%87%BD%E6%95%B0" target="_blank">http://www.xiuxiandou.com/content-blog-3114-php%E4%B8%8Emysql-web-%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3---php%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84%E5%92%8C%E5%87%BD%E6%95%B0</a> &quot;php与mysql&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/4.jpg" alt=""></p>
<p>LJMM平台（
](<a href="http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20%20Jexus%20MySQL%20mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93" target="_blank">http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20%20Jexus%20MySQL%20mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93</a> &quot;LJMM平台（&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/42.jpg" alt=""></p>
<p>JDeveloper
](<a href="http://www.xiuxiandou.com/content-blog-220-How-to-Run-Standard-OA-Framework-Pages-from-JDeveloper" target="_blank">http://www.xiuxiandou.com/content-blog-220-How-to-Run-Standard-OA-Framework-Pages-from-JDeveloper</a> &quot;JDeveloper&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/33.jpg" alt=""></p>
<p>《审计学习题集》扫描版<a href="http://www.xiuxiandou.com/content-book-38684-%E3%80%8A%E5%AE%A1%E8%AE%A1%E5%AD%A6%E4%B9%A0%E9%A2%98%E9%9B%86%E3%80%8B%E6%89%AB%E6%8F%8F%E7%89%88[PDF]" title="《审计学习题集》扫描版[PDF]">PDF]
</a>[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/26.jpg" alt=""></p>
<p>盖茨扎克伯格现身说法：讲述编程之酷
](<a href="http://www.xiuxiandou.com/content-it-14757-%E7%9B%96%E8%8C%A8%E6%89%8E%E5%85%8B%E4%BC%AF%E6%A0%BC%E7%8E%B0%E8%BA%AB%E8%AF%B4%E6%B3%95%EF%BC%9A%E8%AE%B2%E8%BF%B0%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%85%B7" target="_blank">http://www.xiuxiandou.com/content-it-14757-%E7%9B%96%E8%8C%A8%E6%89%8E%E5%85%8B%E4%BC%AF%E6%A0%BC%E7%8E%B0%E8%BA%AB%E8%AF%B4%E6%B3%95%EF%BC%9A%E8%AE%B2%E8%BF%B0%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%85%B7</a> &quot;盖茨扎克伯格现身说法：讲述编程之酷&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/mini_5d312b52998536eb1b8b_120_120.jpg" alt=""></p>
<p>360黑匣子之谜，你怎么看？
](<a href="http://www.1ban.com.cn/zh-CN/surveys/extend_info?survey_id=97" target="_blank">http://www.1ban.com.cn/zh-CN/surveys/extend_info?survey_id=97</a> &quot;360黑匣子之谜，你怎么看？&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/mini_4e33b31aa1a9b82f7701_120_120.jpg" alt=""></p>
<p>云访问-企业网站全球云加速服务
](<a href="http://www.yunfangwen.com/?ujian" target="_blank">http://www.yunfangwen.com/?ujian</a> &quot;云访问-企业网站全球云加速服务&quot;)</p>
<p><a href="http://www.ujian.cc/index2" title="友荐是什么？" target="_blank">友荐[?]</a></p>
<p><a href="http://www.xiuxiandou.com/#" title="返回顶部" target="_blank">返回顶部</a><a href="http://www.xiuxiandou.com/#" title="猜你喜欢" target="_blank">猜你喜欢</a>
[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/mini_07a0c0d02f0ff9b5eb35_120_120.jpg" alt=""></p>
<p>上使用MySQL的简单总结
](<a href="http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20+Jexus+MySQL+mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93" target="_blank">http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20+Jexus+MySQL+mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93</a> &quot;上使用MySQL的简单总结&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/3.jpg" alt=""></p>
<p>php与mysql
](<a href="http://www.xiuxiandou.com/content-blog-3114-php%E4%B8%8Emysql-web-%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3---php%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84%E5%92%8C%E5%87%BD%E6%95%B0" target="_blank">http://www.xiuxiandou.com/content-blog-3114-php%E4%B8%8Emysql-web-%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3---php%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84%E5%92%8C%E5%87%BD%E6%95%B0</a> &quot;php与mysql&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/13.jpg" alt=""></p>
<p>LJMM平台（
](<a href="http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20%20Jexus%20MySQL%20mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93" target="_blank">http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20%20Jexus%20MySQL%20mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93</a> &quot;LJMM平台（&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/19.jpg" alt=""></p>
<p>JDeveloper
](<a href="http://www.xiuxiandou.com/content-blog-220-How-to-Run-Standard-OA-Framework-Pages-from-JDeveloper" target="_blank">http://www.xiuxiandou.com/content-blog-220-How-to-Run-Standard-OA-Framework-Pages-from-JDeveloper</a> &quot;JDeveloper&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/7.jpg" alt=""></p>
<p>《审计学习题集》扫描版<a href="http://www.xiuxiandou.com/content-book-38684-%E3%80%8A%E5%AE%A1%E8%AE%A1%E5%AD%A6%E4%B9%A0%E9%A2%98%E9%9B%86%E3%80%8B%E6%89%AB%E6%8F%8F%E7%89%88[PDF]" title="《审计学习题集》扫描版[PDF]">PDF]
</a>[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/43.jpg" alt=""></p>
<p>盖茨扎克伯格现身说法：讲述编程之酷
](<a href="http://www.xiuxiandou.com/content-it-14757-%E7%9B%96%E8%8C%A8%E6%89%8E%E5%85%8B%E4%BC%AF%E6%A0%BC%E7%8E%B0%E8%BA%AB%E8%AF%B4%E6%B3%95%EF%BC%9A%E8%AE%B2%E8%BF%B0%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%85%B7" target="_blank">http://www.xiuxiandou.com/content-it-14757-%E7%9B%96%E8%8C%A8%E6%89%8E%E5%85%8B%E4%BC%AF%E6%A0%BC%E7%8E%B0%E8%BA%AB%E8%AF%B4%E6%B3%95%EF%BC%9A%E8%AE%B2%E8%BF%B0%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%85%B7</a> &quot;盖茨扎克伯格现身说法：讲述编程之酷&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/mini_a897a95cdb5fc07444b6_120_120.jpg" alt=""></p>
<p>【爱慕20周年庆】新品首次特惠 8折体验
](<a href="http://www.aimer.com.cn/interface.php?u_id=20016&amp;sub_id=tongtou&amp;m=4&amp;url=http://www.aimer.com.cn/z/es/38new20130301.shtml" target="_blank">http://www.aimer.com.cn/interface.php?u_id=20016&amp;sub_id=tongtou&amp;m=4&amp;url=http://www.aimer.com.cn/z/es/38new20130301.shtml</a> &quot;【爱慕20周年庆】新品首次特惠 8折体验&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/mini_f142ed01aae662177abf_120_120.jpg" alt=""></p>
<p>中高考冲刺计时 早一天抓住“核心要点” 就多一分制胜把握
](<a href="http://rrurl.cn/pNQDfO" target="_blank">http://rrurl.cn/pNQDfO</a> &quot;中高考冲刺计时 早一天抓住“核心要点” 就多一分制胜把握&quot;)</p>
<p><a href="http://www.ujian.cc/index2" title="友荐是什么？" target="_blank">友荐[?]</a></p>
<p><a href="http://www.xiuxiandou.com/#" title="返回顶部" target="_blank">返回顶部</a><a href="http://www.xiuxiandou.com/#" title="猜你喜欢" target="_blank">猜你喜欢</a>
<a href="">设为首页</a> <a href="">收藏本站</a></p>
<h2 id="-mysql-5-6-mariadb-10-0-"><a href="&quot;MySQL-5.6-和-MariaDB-10.0-的性能比较测试&quot;"></a></h2>
<p>用户名 暂时未开放注册密码<em>登录</em></p>
<p><a href=""></a></p>
<ul>
<li><a href="http://www.xiuxiandou.com/indexs" title="BT电影高清种子,下载" target="_blank">今日更新</a></li>
<li><a href="http://www.xiuxiandou.com/indexs" title="BT电影高清种子,下载" target="_blank">今日兼职</a></li>
<li><a href="http://www.xiuxiandou.com/blog" title="Blog-界面来源于&lt;水平凡&gt;" target="_blank">日志Blog</a></li>
<li><a href="http://www.xiuxiandou.com/jiji" title="记记,每天记录一点" target="_blank">记记JiJi</a></li>
<li><a href="http://www.xiuxiandou.com/me" title="给我留言" target="_blank">留言Blog</a>
电影 游戏 电子书 资讯 IT博客  <strong>搜索</strong></li>
</ul>
<p>今日 资讯:<em>90</em> 条| 电影:<em>1</em>部|书籍: <em>5</em> 本|游戏: <em>5</em> 款|IT博客:<em>46</em>条|评论: <em>1</em> 条| 留言: <em>0</em> 条</p>
<h1 id="-">某鲜花店的广告：今日本店的玫瑰售价最为低廉，甚至可以买几朵送给太太。</h1>
<h1 id="-">我不是随便的人！但随便起来就不是人！</h1>
<h1 id="mysql-5-6-mariadb-10-0-">MySQL 5.6 和 MariaDB-10.0 的性能比较测试</h1>
<p><a href="http://www.xiuxiandou.com/" title="休闲豆-MySQL 5.6 和 MariaDB-10.0 的性能比较测试" target="_blank">休闲豆</a> 已有 33 次阅读 2013-02-14 10:41:24 来源 <strong><a href="http://www.oschina.net/question/12_90065" title="点击查看来源: 开源中国社区" target="_blank">开源中国社区</a></strong></p>
<p>JetBrains 开发工具全场2折，<a href="http://www.oschina.net/shop/jetbrains" target="_blank">详情»</a></p>
<p>Oracle 刚刚发布了 <a href="http://www.oschina.net/news/37438/oracle-mysql-5-6-final" target="_blank">MySQL 5.6.10 GA</a> 版本，所以是时候更新下之前的性能测试数据了，此次的测试包括以下几个版本：</p>
<ul>
<li>MySQL-5.5.29 </li>
<li>MySQL-5.6.10 </li>
<li>MariaDB-5.5.28a </li>
<li>MariaDB-10.0.1 </li>
</ul>
<p>此次测试还保留了 5.5 版本是为了进行回归测试。之前我们经常发现新版本在性能上反倒而落后的情况。</p>
<p>此次测试在不同的环境下执行，主要的不同是没用 SSD 而是使用高性能的带 512 兆 battery-backed 缓存的 RAID-5 存储。此外测试的机器具有 16 核，其中 12 核运行 mysqld ，另外 4 核运行 sysbench。</p>
<p>测试使用 sysbench-0.5 OLTP ，包好 8 个表和 10G 的数据。InnoDB 的缓冲池大小是 16G，日志 4G。不同的磁盘系统要求不同的 InnoDB 配置：</p>
<ul>
<li>innodb_io_capacity = 1000 (was 20000 for SSD) </li>
<li>innodb_flush_neighbors = 1 (was 0 for SSD) </li>
</ul>
<p>下面是测试结果，首先是 OLTP 只读：</p>
<p><a href="http://blog.mariadb.org/wp-content/uploads/2013/02/20130213-sb-ro-tps.png"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/14101044_u5Dc.png" alt="xiuxiandou.com" title="xiuxiandou.com">
</a></p>
<p>非常奇怪，MySQL 5.6 在此轮测试中居然表现异常。在 8 个线程时相差不大，在 16 个线程时变现最佳。但更高的并发下性能就迅速下降，甚至比 MySQL 5.5 还差。而 MariaDB 10.0 则比 MariaDB 5.5 表现上要差一些，但没那么明显。</p>
<p>而响应时间图表则表示比较好而且平滑：</p>
<p><a href="http://blog.mariadb.org/wp-content/uploads/2013/02/20130213-sb-ro-rt.png"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/14101044_1vV1.png" alt="xiuxiandou.com" title="xiuxiandou.com">
</a></p>
<p>MySQL-5.6 和 MariaDB-10.0 看起来要稍微好一些，意味着它们能更好的分配 CPU 周期。</p>
<p>声明: 此次测试没有使用线程池。Oracle 的线程池实现已经闭源了，因此没法进行测试和使用，如果在 MariaDB 上使用线程池的话就显得有点不公平。</p>
<p>如果你想了解线程池对性能的影响，可查看之前的两篇文章：</p>
<ul>
<li><a href="http://blog.mariadb.org/mariadb-5-5-thread-pool-performance/" target="_blank">MariaDB-5.5 thread pool performance</a> </li>
<li><a href="http://blog.mariadb.org/mariadb-5-5-performance-on-windows/" target="_blank">MariaDB-5.5 performance on Windows</a> </li>
</ul>
<p>第二个测试：OLTP 读写测试</p>
<p><a href="http://blog.mariadb.org/wp-content/uploads/2013/02/20130213-sb-rw-tps.png"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/14101045_l8vb.png" alt="xiuxiandou.com" title="xiuxiandou.com">
</a></p>
<p>这个图跟前一个测试差不多，MySQL 5.6 和 MariaDB 10.0 在性能表现上都比 5.5 版本要下滑不少，在高负载的情况下，下滑了 10% 左右。</p>
<p>这是一个人所共知的事实，MySQL 5.5 在高负载下因为同步的 flush 操作导致的性能下滑。</p>
<p>响应时间图相对要好一些：</p>
<p><a href="http://blog.mariadb.org/wp-content/uploads/2013/02/20130213-sb-rw-rt.png"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/14101045_7ZB4.png" alt="xiuxiandou.com" title="xiuxiandou.com">
</a></p>
<p>这是一个好消息，5.5 版本在 64 个线程或者更多线程的情况下响应时间差了很多。而 MySQL 5.6 和 MariaDB 10.0 的适应性 flush 算法似乎工作良好。</p>
<p>这里还有一个问题：如果你使用多个缓冲池实例，你将会看到写操作延迟更厉害。上面的结果中，只读测试使用了 16 个缓冲池，而读写测试只用了 1个。</p>
<p>结论：</p>
<ul>
<li>MySQL-5.6 性能表现比前一个版本要差，特别是高并发的情况下。这与 Oracle 发布的测试结果不符。我只能推测为什么结果差异那么大，我猜是 Oracle 闭源的线程池以及 Oracle 在更大的机器上进行测试导致。 </li>
<li>使用单个缓冲池情况下不需要担心写延迟的问题。同时 MySQL 5.6 允许高达 512G 的 redo 日志可降低同步 flush 操作。 </li>
</ul>
<p>此次测试的脚本可通过下面地址访问：
<a href="http://bazaar.launchpad.net/~ahel/maria/mariadb-benchmarks/revision/20" target="_blank"><a href="http://bazaar.launchpad.net/~ahel/maria/mariadb-benchmarks/revision/20">http://bazaar.launchpad.net/~ahel/maria/mariadb-benchmarks/revision/20</a></a></p>
<p>欢迎大家重做这个测试并与我们分享测试结果。</p>
<p>via <a href="http://blog.mariadb.org/sysbench-oltp-mysql-5-6-vs-mariadb-10-0/" target="_blank">mariadb</a></p>
<p>  <strong>标签：</strong>   <a href="http://www.oschina.net/question/tag/mysql" title="数据库服务器 MySQL" target="_blank">MySQL</a> <a href="http://www.oschina.net/question/tag/mariadb" title="MySQL 分支 MariaDB" target="_blank">MariaDB</a> <a href="http://www.oschina.net/question/tag/sysbench" title="性能测试工具 SysBench" target="_blank">SysBench</a>
    <a href="">补充话题说明»</a> </p>
<p><strong>分享到</strong> <a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a>**</p>
<p><a href="&quot;收藏此话题&quot;">收藏</a>
**</p>
<p>9
**</p>
<p><a href="">举报</a>
**</p>
<pre><code>    [踩]( &quot;踩：这问题不知道在说什么，或者没什么用&quot;)  0  |        [顶]( &quot;顶：这问题很有用或者很清晰明了&quot;)  0 
</code></pre><p>  ** </p>
<h2 id="-http-www-oschina-net-question-12_90065-answers-http-www-xiuxiandou-com-sort-time-answers-http-www-xiuxiandou-com-top-6-http-www-xiuxiandou-com-answerform-"><a href="http://www.oschina.net/question/12_90065#answers" target="_blank">按默认排序</a> |  <a href="http://www.xiuxiandou.com/?sort=time#answers" target="_blank">显示最新评论</a> | <a href="http://www.xiuxiandou.com/#top" target="_blank">回页面顶部</a>    <a href=""></a>共有<em>6</em>个评论 <a href="http://www.xiuxiandou.com/#answerform">发表评论»</a></h2>
<ul>
<li><a href="http://my.oschina.net/yz2yz"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/84873_50.jpg" alt="xiuxiandou.com" title="xiuxiandou.com">
</a></li>
</ul>
<p><a href="http://my.oschina.net/yz2yz" target="_blank">铂金小鬼</a> 回答于 2013-02-14 10:16</p>
<pre><code>  [举报]()   
</code></pre><p>哇哇，到底是好，还是差啊？！ 
<a href="&quot;这是一个好评论，能解决问题&quot;">有帮助</a><em>(0)</em> |  <a href="&quot;这评论无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> |  <a href="">评论</a><em>(0)</em> |    <a href="http://www.xiuxiandou.com/question/answer?question=90065&amp;answer=415509" target="_blank">引用此评论</a> </p>
<ul>
<li><a href="http://my.oschina.net/mallon"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/23734_50.jpg" alt="xiuxiandou.com" title="xiuxiandou.com">
</a></li>
</ul>
<p><a href="http://my.oschina.net/mallon" target="_blank">Mallon</a> 回答于 2013-02-14 10:25</p>
<pre><code>  [举报]()   
</code></pre><h3 id="-">引用来自“铂金小鬼”的答案</h3>
<p>哇哇，到底是好，还是差啊？！</p>
<p>半斤八两，在误差允许范围内，哈哈</p>
<p><strong>—- 共有 1 条评论—-</strong></p>
<ul>
<li><a href="http://my.oschina.net/samshuai"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/130291_50.jpg" alt="xiuxiandou.com" title="xiuxiandou.com">
</a>    差距不大的话…我还是愿意用mysql  (11小时前 by 蟋蟀哥哥)  <a href="">回复</a>     </li>
</ul>
<p><a href="&quot;这是一个好评论，能解决问题&quot;">有帮助</a><em>(0)</em> |  <a href="&quot;这评论无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> |  <a href="">评论</a><em>(1)</em> |    <a href="http://www.xiuxiandou.com/question/answer?question=90065&amp;answer=415510" target="_blank">引用此评论</a></p>
<ul>
<li><a href="http://my.oschina.net/u/569120"></a>
<a href="http://my.oschina.net/u/569120"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/569120_50.jpg" alt="xiuxiandou.com" title="xiuxiandou.com">
</a></li>
</ul>
<p><a href="http://my.oschina.net/u/569120"></a></p>
<p><a href="http://my.oschina.net/u/569120" target="_blank">光头程序员</a> 回答于 2013-02-14 10:45 来自 <a href="http://www.oschina.net/mobile" target="_blank">Android</a></p>
<pre><code>  [举报]()   
</code></pre><p>说这么多 我又看不懂 直接说应该用哪个不就行了 
<a href="&quot;这是一个好评论，能解决问题&quot;">有帮助</a><em>(0)</em> |  <a href="&quot;这评论无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> |  <a href="">评论</a><em>(0)</em> |    <a href="http://www.xiuxiandou.com/question/answer?question=90065&amp;answer=415513" target="_blank">引用此评论</a> </p>
<ul>
<li><a href="http://my.oschina.net/u/725743"></a>
<a href="http://my.oschina.net/u/725743"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/725743_50.jpg" alt="xiuxiandou.com" title="xiuxiandou.com">
</a></li>
</ul>
<p><a href="http://my.oschina.net/u/725743"></a></p>
<p><a href="http://my.oschina.net/u/725743" target="_blank">严瑾</a> 回答于 2013-02-14 13:55 来自 <a href="http://www.oschina.net/mobile" target="_blank">Android</a></p>
<pre><code>  [举报]()   
</code></pre><p>！！！！！！！！！！！没看懂 
<a href="&quot;这是一个好评论，能解决问题&quot;">有帮助</a><em>(0)</em> |  <a href="&quot;这评论无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> |  <a href="">评论</a><em>(0)</em> |    <a href="http://www.xiuxiandou.com/question/answer?question=90065&amp;answer=415545" target="_blank">引用此评论</a> </p>
<ul>
<li><a href="http://my.oschina.net/bwin"></a>
<a href="http://my.oschina.net/bwin"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/152915_50.jpg" alt="xiuxiandou.com" title="xiuxiandou.com">
</a></li>
</ul>
<p><a href="http://my.oschina.net/bwin"></a></p>
<p><a href="http://my.oschina.net/bwin" target="_blank">新君悦</a> 回答于 2013-02-14 14:11</p>
<pre><code>  [举报]()   
</code></pre><p>按照以往的&quot;经验&quot;  凡是出现Mysql的文章都会被某些人&quot;喷&quot;的,正在奇怪这篇文章怎么没人喷口水呢，拖上一看 原来作者是站长 难怪...</p>
<p><strong>—- 共有 1 条评论—-</strong></p>
<ul>
<li><a href="http://my.oschina.net/javayou"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/12_50.jpg" alt="xiuxiandou.com" title="xiuxiandou.com">
</a>    翻译的  (8小时前 by 红薯)  <a href="">回复</a>     </li>
</ul>
<p><a href="&quot;这是一个好评论，能解决问题&quot;">有帮助</a><em>(0)</em> |  <a href="&quot;这评论无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> |  <a href="">评论</a><em>(1)</em> |    <a href="http://www.xiuxiandou.com/question/answer?question=90065&amp;answer=415549" target="_blank">引用此评论</a></p>
<ul>
<li><a href="http://my.oschina.net/bootstrap"></a>
<a href="http://my.oschina.net/bootstrap"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/736867_50.jpg" alt="xiuxiandou.com" title="xiuxiandou.com">
</a></li>
</ul>
<p><a href="http://my.oschina.net/bootstrap"></a></p>
<p><a href="http://my.oschina.net/bootstrap" target="_blank">抓瓦Or</a> 回答于 2013-02-14 14:58</p>
<pre><code>  [举报]()   
</code></pre><p>mysql这么好的东西，为啥乱喷，Oracle 虽然商业化严重，但是其技术还是可以的吧 </p>
<p><a href="&quot;这是一个好评论，能解决问题&quot;">有帮助</a><em>(0)</em> |  <a href="&quot;这评论无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> |  <a href="">评论</a><em>(0)</em> |    <a href="http://www.xiuxiandou.com/question/answer?question=90065&amp;answer=415559" target="_blank">引用此评论</a> </p>
<p><a href=""></a>
<a href=""><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/portrait.gif" alt="xiuxiandou.com" title="xiuxiandou.com">
</a></p>
<p><a href=""></a></p>
<p>  <a href="http://www.xiuxiandou.com/#answers" target="_blank">回评论顶部</a> | <a href="http://www.xiuxiandou.com/#top" target="_blank">回页面顶部</a>    </p>
<p>资源来源互联网,版权归该下载资源的合法拥有者所有。</p>
<p>本文链接：<a href="http://www.xiuxiandou.com/content-it-11099" target="_blank"><a href="http://www.xiuxiandou.com/content-it-11099.html">http://www.xiuxiandou.com/content-it-11099.html</a></a>
关键字：MySQL 5.6 和 MariaDB-10.0 的性能比较测试
若无特别注明，文章皆为<a href="http://www.xiuxiandou.com/" target="_blank">休闲豆</a>原创，转载请注明出处</p>
<p>注:本文来源地址为 :<a href="http://www.oschina.net/question/12_90065" title="点击查看来源: 开源中国社区" target="_blank">开源中国社区</a></p>
<p><a href="">0</a></p>
<p><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/loading.gif" alt="正在加载推荐文章"></p>
<p>休闲豆推荐：
[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/mini_07a0c0d02f0ff9b5eb35_120_120.jpg" alt=""></p>
<p>上使用MySQL的简单总结
](<a href="http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20+Jexus+MySQL+mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93" target="_blank">http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20+Jexus+MySQL+mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93</a> &quot;上使用MySQL的简单总结&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/1.jpg" alt=""></p>
<p>php与mysql
](<a href="http://www.xiuxiandou.com/content-blog-3114-php%E4%B8%8Emysql-web-%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3---php%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84%E5%92%8C%E5%87%BD%E6%95%B0" target="_blank">http://www.xiuxiandou.com/content-blog-3114-php%E4%B8%8Emysql-web-%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3---php%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84%E5%92%8C%E5%87%BD%E6%95%B0</a> &quot;php与mysql&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/6.jpg" alt=""></p>
<p>LJMM平台（
](<a href="http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20%20Jexus%20MySQL%20mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93" target="_blank">http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20%20Jexus%20MySQL%20mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93</a> &quot;LJMM平台（&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/11.jpg" alt=""></p>
<p>JDeveloper
](<a href="http://www.xiuxiandou.com/content-blog-220-How-to-Run-Standard-OA-Framework-Pages-from-JDeveloper" target="_blank">http://www.xiuxiandou.com/content-blog-220-How-to-Run-Standard-OA-Framework-Pages-from-JDeveloper</a> &quot;JDeveloper&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/23.jpg" alt=""></p>
<p>《审计学习题集》扫描版<a href="http://www.xiuxiandou.com/content-book-38684-%E3%80%8A%E5%AE%A1%E8%AE%A1%E5%AD%A6%E4%B9%A0%E9%A2%98%E9%9B%86%E3%80%8B%E6%89%AB%E6%8F%8F%E7%89%88[PDF]" title="《审计学习题集》扫描版[PDF]">PDF]
</a>[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/14.jpg" alt=""></p>
<p>盖茨扎克伯格现身说法：讲述编程之酷
](<a href="http://www.xiuxiandou.com/content-it-14757-%E7%9B%96%E8%8C%A8%E6%89%8E%E5%85%8B%E4%BC%AF%E6%A0%BC%E7%8E%B0%E8%BA%AB%E8%AF%B4%E6%B3%95%EF%BC%9A%E8%AE%B2%E8%BF%B0%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%85%B7" target="_blank">http://www.xiuxiandou.com/content-it-14757-%E7%9B%96%E8%8C%A8%E6%89%8E%E5%85%8B%E4%BC%AF%E6%A0%BC%E7%8E%B0%E8%BA%AB%E8%AF%B4%E6%B3%95%EF%BC%9A%E8%AE%B2%E8%BF%B0%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%85%B7</a> &quot;盖茨扎克伯格现身说法：讲述编程之酷&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/mini_579fbfdf75e09aeb0b83_120_120.jpg" alt=""></p>
<p>牙疼小妙招，立竿见影！
](<a href="http://www.duobei.com/room/2831608242?utm_source=weibo&amp;utm_medium=plugin&amp;utm_campaign=UweiboA115" target="_blank">http://www.duobei.com/room/2831608242?utm_source=weibo&amp;utm_medium=plugin&amp;utm_campaign=UweiboA115</a> &quot;牙疼小妙招，立竿见影！&quot;)[<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/mini_87b8684f627768210ab3_120_120.jpg" alt=""></p>
<p>【爱慕官方商城】爱慕20周年庆 3.8女人节 感恩回馈3折起！
](<a href="http://www.aimer.com.cn/interface.php?u_id=20016&amp;sub_id=tongtou&amp;url=http://www.aimer.com.cn/" target="_blank">http://www.aimer.com.cn/interface.php?u_id=20016&amp;sub_id=tongtou&amp;url=http://www.aimer.com.cn/</a> &quot;【爱慕官方商城】爱慕20周年庆 3.8女人节 感恩回馈3折起！&quot;)</p>
<p><a href="http://www.ujian.cc/index2" title="友荐是什么？" target="_blank">友荐[?]</a>
<a href=""></a><a href=""></a><a href=""></a><a href=""></a><a href=""></a></p>
<p><a href="">社区</a>
0<a href=""> 喜欢</a></p>
<p><a href=""></a></p>
<p>头衔:<a href="">确定</a><a href="">取消</a></p>
<p><a href="">编辑头衔</a>
邮箱:<a href="">确定</a><a href="">取消</a></p>
<p><a href="">跟踪回复</a></p>
<p>0条评论
0次被喜欢
<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/duface.png" alt=""></p>
<p>请输入你的评论</p>
<p>140</p>
<ul>
<li>默认表情</li>
<li>阿狸
<a href="">发  布</a></li>
</ul>
<p><a href="&quot;加入邮箱和网址信息&quot;"></a>
<a href="&quot;使用新浪微博账号登陆&quot;"></a><a href="&quot;使用QQ账号账号登陆&quot;"></a><a href="&quot;使用腾讯微博账号登陆&quot;"></a><a href="&quot;使用人人账号登陆&quot;"></a><a href="&quot;使用搜狐微博账号登陆&quot;"></a><a href="&quot;选择更多登陆账号&quot;"></a><a href="&quot;kaixin001&quot;"></a><a href="&quot;163&quot;"></a></p>
<p><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/kaixin001.png" alt=""></p>
<p><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/tsohu.png" alt="">
<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/t163.png" alt="">
<a href="">按时间排序</a></p>
<p>|
<a href="">新浪微博</a></p>
<p>|
<a href="">腾讯微博</a></p>
<p>排序方式:<a href="">按时间排序</a><a href="">按热度排序</a>
还没有评论内容</p>
<p>更多热评文章</p>
<p>[* <img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/mini_07a0c0d02f0ff9b5eb35_120_120.jpg" alt=""></p>
<p>上使用MySQL的简单总结](<a href="http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20+Jexus+MySQL+mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93" target="_blank">http://www.xiuxiandou.com/content-blog-3041-LJMM%E5%B9%B3%E5%8F%B0%EF%BC%88%20Linux%20+Jexus+MySQL+mono%EF%BC%89%20%E4%B8%8A%E4%BD%BF%E7%94%A8MySQL%E7%9A%84%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93</a> &quot;上使用MySQL的简单总结&quot;)</p>
<p>[* <img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/3.jpg" alt=""></p>
<p>php与mysql](<a href="http://www.xiuxiandou.com/content-blog-3114-php%E4%B8%8Emysql-web-%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3---php%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84%E5%92%8C%E5%87%BD%E6%95%B0" target="_blank">http://www.xiuxiandou.com/content-blog-3114-php%E4%B8%8Emysql-web-%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3---php%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84%E5%92%8C%E5%87%BD%E6%95%B0</a> &quot;php与mysql&quot;)
[* <img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/mini_5d312b52998536eb1b8b_120_120.jpg" alt=""></p>
<p>360黑匣子之谜，你怎么看？](<a href="http://www.1ban.com.cn/zh-CN/surveys/extend_info?survey_id=97" target="_blank">http://www.1ban.com.cn/zh-CN/surveys/extend_info?survey_id=97</a> &quot;360黑匣子之谜，你怎么看？&quot;)</p>
<p>[* <img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/mini_4e33b31aa1a9b82f7701_120_120.jpg" alt=""></p>
<p>云访问-企业网站全球云加速服务](<a href="http://www.yunfangwen.com/?ujian" target="_blank">http://www.yunfangwen.com/?ujian</a> &quot;云访问-企业网站全球云加速服务&quot;)
<a href="http://www.uyan.cc/" title="社会化评论是什么？" target="_blank">友言[?]</a></p>
<p><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/duface.png" alt=""></p>
<p>请输入你的评论</p>
<p>140</p>
<ul>
<li>默认表情</li>
<li>阿狸
<a href="">回  复</a></li>
</ul>
<p><a href="&quot;加入邮箱和网址信息&quot;"></a>
<a href="&quot;使用新浪微博账号登陆&quot;"></a><a href="&quot;使用QQ账号账号登陆&quot;"></a><a href="&quot;使用腾讯微博账号登陆&quot;"></a><a href="&quot;使用人人账号登陆&quot;"></a><a href="&quot;使用搜狐微博账号登陆&quot;"></a><a href="&quot;选择更多登陆账号&quot;"></a><a href="&quot;kaixin001&quot;"></a><a href="&quot;163&quot;"></a></p>
<p><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/kaixin001.png" alt=""></p>
<p><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/tsohu.png" alt="">
<img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/t163.png" alt="">
www.xiuxiandou.com</p>
<p>1
评论数</p>
<p>-1
喜欢数
1
用户数
数据正在加载中...</p>
<p><a href="http://www.uyan.cc/" target="_blank">友言</a></p>
<p>社会化帐号登录</p>
<h2 id="-">点击按钮，使用社交帐号评论</h2>
<p><a href="&quot;用新浪微博帐号登录&quot;"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/tsina.png" alt="" title="用新浪微博帐号登录">  新浪微博</a><a href="&quot;用QQ帐号登录&quot;"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/qq.png" alt="" title="用QQ帐号登录">  QQ</a><a href="&quot;用腾讯微博帐号登录&quot;"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/tqq.png" alt="" title="用腾讯微博帐号登录">  腾讯微博</a><a href="&quot;用人人网帐号登录&quot;"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/renren.png" alt="" title="用人人网帐号登录">  人人网</a><a href="&quot;用网易微博帐号登录&quot;"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/t163.png" alt="" title="用网易微博帐号登录">  网易微博</a><a href="&quot;用搜狐微博帐号登录&quot;"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/tsohu.png" alt="" title="用搜狐微博帐号登录">  搜狐微博</a><a href="&quot;用开心网帐号登录&quot;"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/kaixin001.png" alt="" title="用开心网帐号登录">  开心网</a></p>
<h2 id="-">作为游客留言</h2>
<p>Email /*</p>
<p>昵  称
顶并分享到:</p>
<p>新浪微博
新浪微博</p>
<p>新浪微博
<a href="">顶</a><a href="">取消</a></p>
<ul>
<li><h3 id="-">[</h3>
<h2 id="-">简明现代魔法</h2>
</li>
</ul>
<p>](<a href="http://www.nowamagic.net/" target="_blank">http://www.nowamagic.net/</a> &quot;简明现代魔法&quot;)</p>
<ul>
<li><h3 id="-">[</h3>
<h2 id="-">百度博客</h2>
</li>
</ul>
<p>](<a href="http://hi.baidu.com/273579540" target="_blank">http://hi.baidu.com/273579540</a> &quot;我的百度博客&quot;)</p>
<ul>
<li><h3 id="-">[</h3>
<h2 id="-">我的代码托管</h2>
</li>
</ul>
<p>](<a href="https://github.com/hubs" target="_blank">https://github.com/hubs</a> &quot;代码托管&quot;)</p>
<ul>
<li><h3 id="-">[</h3>
<h2 id="-">不求人薪水网</h2>
</li>
</ul>
<p>](<a href="http://www.orzro.net/" target="_blank">http://www.orzro.net/</a> &quot;不求人薪水网&quot;)</p>
<ul>
<li><h3 id="-">[</h3>
<h2 id="360-">360安全网址导航</h2>
</li>
</ul>
<p>](<a href="http://hao.360.cn/" target="_blank">http://hao.360.cn/</a> &quot;360安全网址导航&quot;)</p>
<h3 id="-828-1463-10812-950-3351-it-13-1-10-"><strong>**网站数据</strong> - <strong>828</strong> 部电影, - <strong>1463</strong> 款游戏, -<strong>10812</strong> 条资讯, -<strong>950</strong> 本电子书, -<strong>3351</strong> 条IT博客 , -<strong>13</strong> 条评论, -<strong>1</strong> 条留言, -<strong>10</strong> 个网站模板, .**</h3>
<p><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1963612630&amp;site=qq&amp;menu=yes" target="_blank"><strong>休闲豆QQ在线</strong></a>| <a href="http://www.xiuxiandou.com/feed" target="_blank">本站RSS</a>| <a href="http://www.xiuxiandou.com/sitemap" target="_blank">网站地图</a>| <a href="http://www.xiuxiandou.com/indexs/link" target="_blank">申请友链</a>| <a href="http://www.xiuxiandou.com/indexs/about" target="_blank">关于我们</a>| <a href="http://wap.xiuxiandou.com/" target="_blank">手机版</a>| <strong><a href="http://www.xiuxiandou.com/" target="_blank">休闲豆</a></strong> ( <a href="http://www.miitbeian.gov.cn/" target="_blank">桂ICP备11002319号-1</a> )   <a href="http://tongji.baidu.com/hm-web/welcome/ico?s=cc369fcd21817e7c8c74e1ce3ee37f8f" target="_blank"><img src="http://./MySQL-5.6-和-MariaDB-10.0-的性能比较测试_files/21.gif" alt=""></a></p>
<p>13-03-06 10:03:21</p>
<p>Powered by <strong><a href="http://www.xiuxiandou.com/" target="_blank">Xiuxiandou.com!</a></strong></p>
<p>© 2001-2012 <a href="http://www.comsenz.com/" target="_blank">Xiuxiandou.com</a> skin by <a href="http://www.eisdl.com/" target="_blank">eisdl</a>
本站是一个免费提供电影资源下载的网站，本站资源均为网络免费资源搜索机器人自动搜索的结果，本站只和网友相互分享和测试电影资源搜索结果，并不存放任何资源！所有视频版权归原权利人，如有关视频侵犯了你的权益，请联系本站告之，本站将于24小时内删除！ 我们强烈建议所有影视爱好者测试后24小时内删除资源！并购买正版音像制品！</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/mariadb/">mariadb</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/mariadb/" class="label label-success">mariadb</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:33"datetime="2014-03-07 09:54:33"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-mariadb--MySQL-56-和-MariaDB-100-的性能比较测试/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-mariadb--MySQL-56-和-MariaDB-100-的性能比较测试" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-DB-mysql--如何优化MySQLinsert性能/">如何优化MySQL insert性能</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:33.000Z"> <a href="/2014/02/02/2014-02-02-DB-mysql--如何优化MySQLinsert性能/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-mysql-insert-">如何优化MySQL insert性能</h1>
<p>您还未登录！|<a href="https://passport.csdn.net/account/login" target="_blank">登录</a>|<a href="https://passport.csdn.net/account/register" target="_blank">注册</a>|<a href="https://passport.csdn.net/help/faq" target="_blank">帮助</a></p>
<ul>
<li><a href="http://www.csdn.net/" target="_blank">首页</a></li>
<li><a href="http://news.csdn.net/" target="_blank">业界</a></li>
<li><a href="http://mobile.csdn.net/" target="_blank">移动</a></li>
<li><a href="http://cloud.csdn.net/" target="_blank">云计算</a></li>
<li><a href="http://sd.csdn.net/" target="_blank">研发</a></li>
<li><a href="http://bbs.csdn.net/" target="_blank">论坛</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">博客</a></li>
<li><a href="http://download.csdn.net/" target="_blank">下载</a></li>
<li><h2 id="-"><a href="">更多</a></h2>
</li>
</ul>
<h1 id="-tigernorth-http-blog-csdn-net-tigernorth-"><a href="http://blog.csdn.net/tigernorth" target="_blank">tigernorth的专栏</a></h1>
<h2 id="beginning-linux-programming-">Beginning Linux Programming 笔记</h2>
<ul>
<li><a href="http://blog.csdn.net/tigernorth?viewmode=contents" target="_blank"><img src="" alt="">目录视图</a></li>
<li><a href="http://blog.csdn.net/tigernorth?viewmode=list" target="_blank"><img src="" alt="">摘要视图</a></li>
<li><a href="http://blog.csdn.net/tigernorth/rss/list" target="_blank"><img src="" alt="">订阅</a>
<a href="https://code.csdn.net/blog/12" target="_blank">公告：博客新增直接引用代码功能</a>        <a href="http://www.csdn.net/article/2013-07-24/2816320" target="_blank">专访谭海燕：移动互联网开发的那些事</a>      <a href="http://blog.csdn.net/csdnproduct/article/details/9495139" target="_blank">CSDN博客频道自定义域名、标签搜索功能上线啦！</a>      <a href="http://blog.csdn.net/adali/article/details/9813651" target="_blank">独一无二的职位：开源社区经理</a></li>
</ul>
<h3 id="-mysql-insert-"><a href="">如何优化MySQL insert性能</a></h3>
<p>分类： <a href="http://blog.csdn.net/tigernorth/article/category/1222822" target="_blank">MySQL</a>  2012-10-20 23:50 2602人阅读 <a href="">评论</a>(14) <a href="&quot;收藏&quot;">收藏</a> <a href="&quot;举报&quot;">举报</a>
<a href="http://blog.csdn.net/tag/details.html?tag=insert" target="_blank">insert</a><a href="http://blog.csdn.net/tag/details.html?tag=mysql" target="_blank">mysql</a><a href="http://blog.csdn.net/tag/details.html?tag=%e4%bc%98%e5%8c%96" target="_blank">优化</a><a href="http://blog.csdn.net/tag/details.html?tag=sql" target="_blank">sql</a><a href="http://blog.csdn.net/tag/details.html?tag=%e6%b5%8b%e8%af%95" target="_blank">测试</a><a href="http://blog.csdn.net/tag/details.html?tag=table" target="_blank">table</a></p>
<pre><code>对于一些数据量较大的系统，面临的问题除了是查询效率低下，还有一个很重要的问题就是插入时间长。我们就有一个业务系统，每天的数据导入需要4-5个钟。这种费时的操作其实是很有风险的，假设程序出了问题，想重跑操作那是一件痛苦的事情。因此，提高大数据量系统的MySQL insert效率是很有必要的。

经过对MySQL的测试，发现一些可以提高insert效率的方法，供大家参考参考。
</code></pre><p><strong>1. 一条SQL语句插入多条数据。</strong>
常用的插入语句如：
<strong>[sql]</strong> <a href="&quot;view plain&quot;">view plain</a><a href="&quot;copy&quot;">copy</a><a href="&quot;print&quot;">print</a><a href="&quot;?&quot;">?</a></p>
<ol>
<li>INSERT INTO <code>insert_table</code> (<code>datetime</code>, <code>uid</code>, <code>content</code>, <code>type</code>) VALUES (&#39;0&#39;, &#39;userid_0&#39;, &#39;content_0&#39;, 0);  </li>
<li><p>INSERT INTO <code>insert_table</code> (<code>datetime</code>, <code>uid</code>, <code>content</code>, <code>type</code>) VALUES (&#39;1&#39;, &#39;userid_1&#39;, &#39;content_1&#39;, 1);<br>INSERT INTO <code>insert_table</code> (<code>datetime</code>, <code>uid</code>, <code>content</code>, <code>type</code>) VALUES (&#39;0&#39;, &#39;userid_0&#39;, &#39;content_0&#39;, 0); INSERT INTO <code>insert_table</code> (<code>datetime</code>, <code>uid</code>, <code>content</code>, <code>type</code>) VALUES (&#39;1&#39;, &#39;userid_1&#39;, &#39;content_1&#39;, 1);修改成：
<strong>[sql]</strong> <a href="&quot;view plain&quot;">view plain</a><a href="&quot;copy&quot;">copy</a><a href="&quot;print&quot;">print</a><a href="&quot;?&quot;">?</a></p>
</li>
<li><p>INSERT INTO <code>insert_table</code> (<code>datetime</code>, <code>uid</code>, <code>content</code>, <code>type</code>) VALUES (&#39;0&#39;, &#39;userid_0&#39;, &#39;content_0&#39;, 0), (&#39;1&#39;, &#39;userid_1&#39;, &#39;content_1&#39;, 1);<br>INSERT INTO <code>insert_table</code> (<code>datetime</code>, <code>uid</code>, <code>content</code>, <code>type</code>) VALUES (&#39;0&#39;, &#39;userid_0&#39;, &#39;content_0&#39;, 0), (&#39;1&#39;, &#39;userid_1&#39;, &#39;content_1&#39;, 1);</p>
</li>
</ol>
<p>修改后的插入操作能够提高程序的插入效率。这里第二种SQL执行效率高的主要原因有两个，一是减少SQL语句解析的操作， 只需要解析一次就能进行数据的插入操作，二是SQL语句较短，可以减少网络传输的IO。</p>
<p>这里提供一些测试对比数据，分别是进行单条数据的导入与转化成一条SQL语句进行导入，分别测试1百、1千、1万条数据记录。
记录数 单条数据插入 多条数据插入 1百 0.149s 0.011s 1千 1.231s 0.047s 1万 11.678s 0.218s
<strong>2. 在事务中进行插入处理。</strong>
把插入修改成：
<strong>[sql]</strong> <a href="&quot;view plain&quot;">view plain</a><a href="&quot;copy&quot;">copy</a><a href="&quot;print&quot;">print</a><a href="&quot;?&quot;">?</a></p>
<ol>
<li>START TRANSACTION;  </li>
<li>INSERT INTO <code>insert_table</code> (<code>datetime</code>, <code>uid</code>, <code>content</code>, <code>type</code>) VALUES (&#39;0&#39;, &#39;userid_0&#39;, &#39;content_0&#39;, 0);  </li>
<li>INSERT INTO <code>insert_table</code> (<code>datetime</code>, <code>uid</code>, <code>content</code>, <code>type</code>) VALUES (&#39;1&#39;, &#39;userid_1&#39;, &#39;content_1&#39;, 1);  </li>
<li>...  </li>
<li>COMMIT;<br>START TRANSACTION; INSERT INTO <code>insert_table</code> (<code>datetime</code>, <code>uid</code>, <code>content</code>, <code>type</code>) VALUES (&#39;0&#39;, &#39;userid_0&#39;, &#39;content_0&#39;, 0); INSERT INTO <code>insert_table</code> (<code>datetime</code>, <code>uid</code>, <code>content</code>, <code>type</code>) VALUES (&#39;1&#39;, &#39;userid_1&#39;, &#39;content_1&#39;, 1); ... COMMIT;</li>
</ol>
<p>使用事务可以提高数据的插入效率，这是因为进行一个INSERT操作时，MySQL内部会建立一个事务，在事务内进行真正插入处理。通过使用事务可以减少数据库执行插入语句时多次“创建事务，提交事务”的消耗，所有插入都在执行后才进行提交操作。</p>
<p>这里也提供了测试对比，分别是不使用事务与使用事务在记录数为1百、1千、1万的情况。
记录数 不使用事务 使用事务 1百 0.149s 0.033s 1千 1.231s 0.115s 1万 11.678s 1.050s
<strong>性能测试：</strong>
这里提供了同时使用上面两种方法进行INSERT效率优化的测试。即多条数据合并为同一个SQL，并且在事务中进行插入。
记录数 单条数据插入 合并数据+事务插入 1万 0m15.977s 0m0.309s 10万 1m52.204s 0m2.271s 100万 18m31.317s 0m23.332s</p>
<p>从测试结果可以看到，insert的效率大概有50倍的提高，这个一个很客观的数字。<em>**</em></p>
<p><strong>注意事项：</strong></p>
<ol>
<li><p>SQL语句是有长度限制，在进行数据合并在同一SQL中务必不能超过SQL长度限制，通过max_allowed_packe配置可以修改，默认是1M。</p>
</li>
<li><p>事务需要控制大小，事务太大可能会影响执行的效率。MySQL有innodb_log_buffer_size配置项，超过这个值会日志会使用磁盘数据，这时，效率会有所下降。所以比较好的做法是，在事务大小达到配置项数据级前进行事务提交。</p>
</li>
</ol>
<p>转载文章请注明来源： <a href="http://blog.csdn.net/tigernorth/article/details/8094277" target="_blank">http://blog.csdn.net/tigernorth/article/details/8094277</a>
分享到： <a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a></p>
<ol>
<li>上一篇：<a href="http://blog.csdn.net/tigernorth/article/details/7948539" target="_blank">MySQL锁的用法之行级锁</a></li>
<li>下一篇：<a href="http://blog.csdn.net/tigernorth/article/details/8184924" target="_blank">MySQL 查询数据不一致</a>
顶 7 踩 0
查看评论<a href=""></a></li>
</ol>
<p>7楼 <a href="http://blog.csdn.net/kxxxxxxxb" target="_blank">kxxxxxxxb</a> 2013-05-21 15:19发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/kxxxxxxxb" target="_blank"><img src="" alt=""></a>楼主请教下，我一条sql语句一次性插入30000行数据出错，报的错误是mysql server has gone away ，插入25000行就可以，难道一行sql插入的大小是有限制的？（我已经调高了max_allowed_packet=16M）6楼 <a href="http://blog.csdn.net/huanggy001" target="_blank">huanggy001</a> 2012-11-28 10:03发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/huanggy001" target="_blank"><img src="" alt=""></a>多谢分享！5楼 <a href="http://blog.csdn.net/chunhaicao" target="_blank">chunhaicao</a> 2012-10-30 11:26发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/chunhaicao" target="_blank"><img src="" alt=""></a>方法很好啊
只是我们大部分的备份数据都是“
INSERT INTO <code>insert_table</code> (<code>datetime</code>, <code>uid</code>, <code>content</code>, <code>type</code>) VALUES (&#39;0&#39;, &#39;userid_0&#39;, &#39;content_0&#39;, 0);
INSERT INTO <code>insert_table</code> (<code>datetime</code>, <code>uid</code>, <code>content</code>, <code>type</code>) VALUES (&#39;1&#39;, &#39;userid_1&#39;, &#39;content_1&#39;, 1);”
类的，这个有什么好的方法可以快速的转为一条Sql语句吗？Re: <a href="http://blog.csdn.net/tigernorth" target="_blank">tigernorth</a> 2012-10-30 13:11发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/tigernorth" target="_blank"><img src="" alt=""></a>回复chunhaicao：使用mysqldump就能生成多行数据合并的sql的，用--extended-insert指定一个sql多条记录。4楼 <a href="http://blog.csdn.net/dont27" target="_blank">Shellphon</a> 2012-10-28 22:51发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/dont27" target="_blank"><img src="" alt=""></a>最后一句：“转载文章请注明来源： <a href="http://blog.csdn.net/tigernorth/article/details/8094277”是你写的么？Re" target="_blank">http://blog.csdn.net/tigernorth/article/details/8094277”是你写的么？Re</a>: <a href="http://blog.csdn.net/tigernorth" target="_blank">tigernorth</a> 2012-10-29 12:57发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/tigernorth" target="_blank"><img src="" alt=""></a>回复dont27：在百度搜博文标题，基本都只看到转载网站的搜索结果，CSND有事还看不到，很是郁闷。。Re: <a href="http://blog.csdn.net/dont27" target="_blank">Shellphon</a> 2012-10-29 23:26发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/dont27" target="_blank"><img src="" alt=""></a>回复tigernorth：我勒个去，都是抓取的吧……话说那句话是你自己写的还是csdn自己加的？Re: <a href="http://blog.csdn.net/tigernorth" target="_blank">tigernorth</a> 2012-10-29 23:43发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/tigernorth" target="_blank"><img src="" alt=""></a>回复dont27：自己写的。Re: <a href="http://blog.csdn.net/dont27" target="_blank">Shellphon</a> 2012-10-30 21:28发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/dont27" target="_blank"><img src="" alt=""></a>回复tigernorth：之前百度一些技术的博客，貌似经常出现转载的情况，但都会留下最后“转载”的句子。我看那些抓取这文章的相当坑爹，都直接截取掉了……3楼 <a href="http://blog.csdn.net/dongfangling" target="_blank">dongfangling</a> 2012-10-23 22:45发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/dongfangling" target="_blank"><img src="" alt=""></a>事物?还是事务?
通过使用事物可以减少创建事物的消耗?Re: <a href="http://blog.csdn.net/tigernorth" target="_blank">tigernorth</a> 2012-10-24 12:55发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/tigernorth" target="_blank"><img src="" alt=""></a>回复dongfangling：是“事务”，写错了，多谢提醒哈。
是通过使用“事务”可以减少数据库插入数据时“创建事务，提交事务”的消耗，因为只需要开始创建一个事务，结束时提交即可。Re: <a href="http://blog.csdn.net/dongfangling" target="_blank">dongfangling</a> 2012-10-24 13:52发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/dongfangling" target="_blank"><img src="" alt=""></a>回复tigernorth：COOL2楼 <a href="http://blog.csdn.net/tewuxiaoqiang" target="_blank">特务苹果</a> 2012-10-23 20:47发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/tewuxiaoqiang" target="_blank"><img src="" alt=""></a>学习了。1楼 <a href="http://blog.csdn.net/limingchuan123456789" target="_blank">limingchuan123456789</a> 2012-10-22 11:07发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/limingchuan123456789" target="_blank"><img src="" alt=""></a>学习了。
您还没有登录,请<a href="">[登录]</a>或<a href="http://passport.csdn.net/account/register?from=http%3A%2F%2Fblog.csdn.net%2Ftigernorth%2Farticle%2Fdetails%2F8094277" target="_blank">[注册]</a></p>
<p>/* 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场<a href=""></a><a href=""></a>
<a href="&quot;回到顶部&quot;"><img src="" alt="TOP"></a></p>
<p>个人资料</p>
<p><a href="http://my.csdn.net/tigernorth" target="_blank"><img src="&quot;访问我的空间&quot;" alt=""></a>
<a href="http://my.csdn.net/tigernorth" target="_blank">tigernorth</a></p>
<p><a href="&quot;[加关注]&quot;"></a> <a href="&quot;[发私信]&quot;"></a></p>
<ul>
<li>访问：16316次</li>
<li>积分：430分</li>
<li><p>排名：千里之外</p>
</li>
<li><p>原创：21篇</p>
</li>
<li>转载：1篇</li>
<li>译文：0篇</li>
<li>评论：24条</li>
</ul>
<p>文章搜索</p>
<p><a href=""></a></p>
<p>文章分类</p>
<ul>
<li><a href="http://blog.csdn.net/tigernorth/article/category/806238" target="_blank">Beginning Linux Programming 笔记</a>(7)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/category/806236" target="_blank">TCP/IP相关工具命令</a>(1)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/category/816887" target="_blank">Thinking in C++</a>(3)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/category/811054" target="_blank">微博开发平台</a>(1)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/category/1073888" target="_blank">PHP</a>(2)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/category/1080760" target="_blank">linux</a>(2)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/category/1222822" target="_blank">MySQL</a>(5)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/category/1228827" target="_blank">锁机制</a>(1)</li>
<li><p><a href="http://blog.csdn.net/tigernorth/article/category/1228828" target="_blank">MySQL锁</a>(2)
文章存档</p>
</li>
<li><p><a href="http://blog.csdn.net/tigernorth/article/month/2012/11" target="_blank">2012年11月</a>(1)</p>
</li>
<li><a href="http://blog.csdn.net/tigernorth/article/month/2012/10" target="_blank">2012年10月</a>(1)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/month/2012/09" target="_blank">2012年09月</a>(2)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/month/2012/08" target="_blank">2012年08月</a>(1)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/month/2012/06" target="_blank">2012年06月</a>(1)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/month/2012/02" target="_blank">2012年02月</a>(2)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/month/2011/10" target="_blank">2011年10月</a>(1)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/month/2011/05" target="_blank">2011年05月</a>(3)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/month/2011/04" target="_blank">2011年04月</a>(10)</li>
</ul>
<p>展开</p>
<p>阅读排行</p>
<ul>
<li><a href="&quot;如何优化MySQL insert性能&quot;">如何优化MySQL insert性能</a>(2602)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/6331008" title="微博API：获取用户发布的微博" target="_blank">微博API：获取用户发布的微博</a>(2487)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/7242146" title="如何使用CURL复用连接（PHP）" target="_blank">如何使用CURL复用连接（PHP）</a>(1094)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/7272075" title="linux排重的方法" target="_blank">linux排重的方法</a>(832)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/6388604" title="C++循环变量定义生命周期" target="_blank">C++循环变量定义生命周期</a>(700)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/7948539" title="MySQL锁的用法之行级锁" target="_blank">MySQL锁的用法之行级锁</a>(593)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/7909951" title="PHP中MySQL连接管理" target="_blank">PHP中MySQL连接管理</a>(583)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/8184924" title="MySQL 查询数据不一致" target="_blank">MySQL 查询数据不一致</a>(576)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/7670768" title="编写Linux定时处理程序" target="_blank">编写Linux定时处理程序</a>(515)</li>
<li><p><a href="http://blog.csdn.net/tigernorth/article/details/7935766" title="MySQL锁的用法之表级锁" target="_blank">MySQL锁的用法之表级锁</a>(425)
评论排行</p>
</li>
<li><p><a href="&quot;如何优化MySQL insert性能&quot;">如何优化MySQL insert性能</a>(14)</p>
</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/6331008" title="微博API：获取用户发布的微博" target="_blank">微博API：获取用户发布的微博</a>(5)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/7242146" title="如何使用CURL复用连接（PHP）" target="_blank">如何使用CURL复用连接（PHP）</a>(2)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/6388604" title="C++循环变量定义生命周期" target="_blank">C++循环变量定义生命周期</a>(1)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/6844312" title="【转】如何才能做到网站高并发访问?" target="_blank">【转】如何才能做到网站高并发访问?</a>(1)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/7670768" title="编写Linux定时处理程序" target="_blank">编写Linux定时处理程序</a>(1)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/7272075" title="linux排重的方法" target="_blank">linux排重的方法</a>(0)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/7909951" title="PHP中MySQL连接管理" target="_blank">PHP中MySQL连接管理</a>(0)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/7935766" title="MySQL锁的用法之表级锁" target="_blank">MySQL锁的用法之表级锁</a>(0)</li>
<li><a href="http://blog.csdn.net/tigernorth/article/details/7948539" title="MySQL锁的用法之行级锁" target="_blank">MySQL锁的用法之行级锁</a>(0)</li>
</ul>
<p>推荐文章
最新评论</p>
<ul>
<li><a href="">如何优化MySQL insert性能</a></li>
</ul>
<p><a href="http://blog.csdn.net/kxxxxxxxb" target="_blank">kxxxxxxxb</a>: 楼主请教下，我一条sql语句一次性插入30000行数据出错，报的错误是mysql server ha...</p>
<ul>
<li><a href="http://blog.csdn.net/tigernorth/article/details/7670768#comments" target="_blank">编写Linux定时处理程序</a></li>
</ul>
<p><a href="http://blog.csdn.net/u010138411" target="_blank">u010138411</a>: good</p>
<ul>
<li><a href="">如何优化MySQL insert性能</a></li>
</ul>
<p><a href="http://blog.csdn.net/huanggy001" target="_blank">huanggy001</a>: 多谢分享！</p>
<ul>
<li><a href="">如何优化MySQL insert性能</a></li>
</ul>
<p><a href="http://blog.csdn.net/dont27" target="_blank">Shellphon</a>: @tigernorth:之前百度一些技术的博客，貌似经常出现转载的情况，但都会留下最后“转载”的句子...</p>
<ul>
<li><a href="">如何优化MySQL insert性能</a></li>
</ul>
<p><a href="http://blog.csdn.net/tigernorth" target="_blank">tigernorth</a>: @chunhaicao:使用mysqldump就能生成多行数据合并的sql的，用--extended...</p>
<ul>
<li><a href="">如何优化MySQL insert性能</a></li>
</ul>
<p><a href="http://blog.csdn.net/chunhaicao" target="_blank">chunhaicao</a>: 方法很好啊只是我们大部分的备份数据都是“INSERT INTO <code>insert_table</code> (`d...</p>
<ul>
<li><a href="">如何优化MySQL insert性能</a></li>
</ul>
<p><a href="http://blog.csdn.net/tigernorth" target="_blank">tigernorth</a>: @dont27:自己写的。</p>
<ul>
<li><a href="">如何优化MySQL insert性能</a></li>
</ul>
<p><a href="http://blog.csdn.net/dont27" target="_blank">Shellphon</a>: @tigernorth:我勒个去，都是抓取的吧……话说那句话是你自己写的还是csdn自己加的？</p>
<ul>
<li><a href="">如何优化MySQL insert性能</a></li>
</ul>
<p><a href="http://blog.csdn.net/tigernorth" target="_blank">tigernorth</a>: @dont27:在百度搜博文标题，基本都只看到转载网站的搜索结果，CSND有事还看不到，很是郁闷。。</p>
<ul>
<li><a href="">如何优化MySQL insert性能</a></li>
</ul>
<p><a href="http://blog.csdn.net/dont27" target="_blank">Shellphon</a>: 最后一句：“转载文章请注明来源： <a href="http://blog.csdn.net/tigernorth/a" target="_blank">http://blog.csdn.net/tigernorth/a</a>...</p>
<p><a href="http://www.csdn.net/company/about.html" target="_blank">公司简介</a>|<a href="http://www.csdn.net/company/recruit.html" target="_blank">招贤纳士</a>|<a href="http://www.csdn.net/company/marketing.html" target="_blank">广告服务</a>|<a href="http://www.csdn.net/company/account.html" target="_blank">银行汇款帐号</a>|<a href="http://www.csdn.net/company/contact.html" target="_blank">联系方式</a>|<a href="http://www.csdn.net/company/statement.html" target="_blank">版权声明</a>|<a href="http://www.csdn.net/company/layer.html" target="_blank">法律顾问</a>|<a href="mailto:webmaster@csdn.net">问题报告</a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=2355263776&amp;site=qq&amp;menu=yes" target="_blank">QQ客服</a> <a href="http://e.weibo.com/csdnsupport/profile" target="_blank">微博客服</a> <a href="http://bbs.csdn.net/forums/Service" target="_blank">论坛反馈</a> <a href="mailto:webmaster@csdn.net">联系邮箱：webmaster@csdn.net</a> 服务热线：400-600-2320京 ICP 证 070598 号北京创新乐知信息技术有限公司 版权所有世纪乐知(北京)网络技术有限公司 提供技术支持江苏乐知网络技术有限公司 提供商务支持Copyright © 1999-2012, CSDN.NET, All Rights Reserved <a href="http://www.hd315.gov.cn/beian/view.asp?bianhao=010202001032100010" target="_blank"><img src="" alt="GongshangLogo"></a>
<img src="http://counter.csdn.net/pv.aspx?id=24" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/DB/">DB</a></li></span><span class="breadcrumb"><li><a href="/categories/DB/">DB</a></li><li><a href="/categories/DB/mysql/">mysql</a></li></span></span> | <span class="tags">Tagged <a href="/tags/DB/" class="label label-primary">DB</a><a href="/tags/mysql/" class="label label-success">mysql</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:33"datetime="2014-03-07 09:54:33"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-DB-mysql--如何优化MySQLinsert性能/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-DB-mysql--如何优化MySQLinsert性能" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/131/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/129/">129</a></li><li><a class="page-number" href="/page/130/">130</a></li><li><a class="page-number" href="/page/131/">131</a></li><li class="active"><li><span class="page-number current">132</span></li><li><a class="page-number" href="/page/133/">133</a></li><li><a class="page-number" href="/page/134/">134</a></li><li><a class="page-number" href="/page/135/">135</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/162/">162</a></li><li><a class="page-number" href="/page/163/">163</a></li><li><a class="extend next" href="/page/133/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Site powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a>  update time: <em>2014-03-30 14:30:16</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
