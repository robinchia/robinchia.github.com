
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 28 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--Java对XML节点的修改、添加、删除–ByXstream框架-J2EE企业应用顾问咨询/">Java对XML节点的修改、添加、删除 –By Xstream框架 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--Java对XML节点的修改、添加、删除–ByXstream框架-J2EE企业应用顾问咨询/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="java-xml-by-xstream-j2ee-java-h-e-s-blog">Java对XML节点的修改、添加、删除 –By Xstream框架 - J2EE企业应用 顾问 咨询 Java传教士 -H.E.&#39;s Blog</h1>
<h1 id="-http-www-javabloger-com-index-php-feed-h-e-s-blog-http-www-javabloger-com-"><a href="http://www.javabloger.com/index.php/feed/" target="_blank"><img src="" alt="订阅"></a> <a href="http://www.javabloger.com/" target="_blank">H.E.&#39;s Blog</a></h1>
<p> 用最简洁的页面描述企业应用与Java艺术!     <a href="http://www.javabloger.com/" target="_blank">首页</a> <a href="http://www.javabloger.com/about_njthnet.html" target="_blank">关于作者</a> <a href="http://www.javabloger.com/work_together.html" target="_blank">项目合作</a> <a href="http://www.javabloger.com/article" target="_blank">本站文章</a> <a href="http://www.javabloger.com/opensource_project.html" target="_blank">开源项目</a>  </p>
<h2 id="java-xml-by-xstream-">Java对XML节点的修改、添加、删除 –By Xstream框架</h2>
<p>12 三月, 2010 (10:36) | <a href="http://www.javabloger.com/article/category/code" title="查看 代码 的全部文章" target="_blank">代码</a> |  <a href="http://translate.google.com/translate?langpair=zh-CN%7Czh-TW&amp;u=http://www.javabloger.com/article/java-xml-node-add-delete-update.html" target="_blank">繁体</a> <a href="http://translate.google.com/translate?langpair=zh-CN%7Cen&amp;u=http://www.javabloger.com/article/java-xml-node-add-delete-update.html" target="_blank">English</a>    <img src="" alt=""><a href="http://delicious.com/save" target="_blank"><strong>DeliciOus</strong></a>    <a href="http://www.google.com/buzz/post" title="在 Google Buzz 上分享本文" target="_blank">0</a>  【<a href="http://v.t.sina.com.cn/share/share.php?title=Java%E5%AF%B9XML%E8%8A%82%E7%82%B9%E7%9A%84%E4%BF%AE%E6%94%B9%E3%80%81%E6%B7%BB%E5%8A%A0%E3%80%81%E5%88%A0%E9%99%A4%20%E2%80%93By%20Xstream%E6%A1%86%E6%9E%B6&amp;url=http://www.javabloger.com/article/java-xml-node-add-delete-update.html?source=rss&amp;conten=%E5%86%8D%E6%AC%A1%E6%84%9F%E8%B0%A2%E4%BD%A0%E7%9A%84%E5%88%86%E4%BA%AB" target="_blank">分享到<strong>新浪微博</strong></a>】
作者: H.E. | 您可以转载, 但必须以超链接形式标明文章原始出处和作者信息及版权声明
网址: <a href=""><a href="http://www.javabloger.com/article/java-xml-node-add-delete-update.html">http://www.javabloger.com/article/java-xml-node-add-delete-update.html</a></a>
<strong>豆瓣读书</strong> 向你推荐有关 <a href="http://book.douban.com/subject_search?search_text=%E4%BB%A3%E7%A0%81&amp;cat=1001" target="_blank">代码</a>、 类别的图书。</p>
<p>在J2EE、Java项目中对xml操作是一项非常常见的事情，在我认识了XStream以后，才彻底明白XML模型对象的概念，使用XStream让我XML的设计不由自主更符合OO的风格。另外，除了在设计上得到的体验，还在实际操作中得到了便捷的体验。</p>
<p>简单来说，我在IBM的Java开发园地上看过一些操作XML经典的文章被广为流传，但是无论是采用DOM4J还是JDOM对XML文件中的节点或者整个文件的进行 修改、添加、删除 都没有XStream 简单、方便。</p>
<p>下面来看一下 XStream 官方网站上的例子，网站地址：     <a href="http://xstream.codehaus.org/tutorial.html。" target="_blank">http://xstream.codehaus.org/tutorial.html。</a></p>
<p>官方网站上的例子只是提供了一个例子，并没有说明如何对 XML节点进行修改、添加、删除，XStream 官方网站上只是给出了一个从对象到XML，从XML到对象的例子。</p>
<p>Javabloger的作者H.E.通过实践发现采用 XStream可以很简单的对XML节点进行 修改、添加、删除，比传统的XML框架简单很多倍，用过一次的人都不会忘记，<strong>因为实在是太方便了</strong>。</p>
<p><strong>修改XML节点代码示例如下：</strong></p>
<pre><code>public void upDateMySQLRecentHost(String  HostID)  throws  Exception {
    List &lt;RecentHost&gt; list=null;
    try {
            list=getMySQLRecentHost();   **// 1. 先通过 XStream读取XML文件，变成List集合里面包含节点对象。**

            for (int i=0;i&lt;list.size();i++){      **  //  2. 遍历整个 List 对象集合**
                if (list.get(i).getId().equals(HostID )){        **// 3. 比较 需要进行修改的节点 ID**
                    list.remove(i);                                     **//  4. 移除 指定的节点  **
                    list.add(recentHost);                          **  //  5. 添加 定义的新节点**
                }
            }                                                                **   //  完成操作，对节点进行 匹配的删除和添加 这个就修改。**

       *    //  以下代码H.E.就不一一介绍了，大致意思就是 将修改过的List 对象集合，重新写入XML中。*
            xstream.alias(&quot;RecentHost&quot;,  RecentHost.class);         
            String xml=&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;+xstream.toXML(list);
             System.out.println ( xml );
            FileWriter resultFile = new FileWriter(recentLoginHostCaseXMLFile);
            PrintWriter myFile = new PrintWriter(resultFile);
            myFile.println(xml);
            resultFile.close();
        }
    catch ( Exception e) {
        logger.error(e);
    }
}
</code></pre><p><strong>添加XML节点代码示例如下：</strong></p>
<pre><code>public void AddMySQLRecentHost(RecentHost RecentHostInfo)  throws  Exception {
    List &lt;RecentHost&gt; list=null;
    try {
            list=getMySQLRecentHost(); **  // 1. 先通过 XStream读取XML文件，变成List集合里面包含节点对象。**
            list.add( RecentHostInfo  );    **//   2. 添加到  List集合里面。**

            xstream.alias(&quot;RecentHost&quot;,  RecentHost.class);  **// 3.进行XML对象映射**
            String xml=&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;+xstream.toXML(list);

         *   //  以下代码H.E.就不一一介绍了，大致意思就是 将添加过的List 对象集合，重新写入XML中。*
            FileWriter resultFile = new FileWriter(recentLoginHostCaseXMLFile);
            PrintWriter myFile = new PrintWriter(resultFile);
            myFile.println(xml);
            resultFile.close();      
        }
    catch ( Exception e) {
        logger.error(e);
    }
}
</code></pre><p><strong>删除XML节点代码示例如下：</strong></p>
<pre><code>public void deleteMySQLRecentHost(String id)  throws  Exception {
    List &lt;RecentHost&gt; list=null;
    try {
            list=getMySQLRecentHost();   **// 1. 先通过 XStream读取XML文件，变成List集合里面包含节点对象。**

            for (int i=0;i&lt;list.size();i++){      **  //  2. 遍历整个 List 对象集合**
                if (list.get(i).getId().equals(HostID )){       **// 3. 比较 需要进行修改的节点 ID**
                    list.remove(i);                                    **  //  4. 移除 指定的节点  **
                }                                                                                                                     
            }                                                             **      //  完成删除操作。**                            

*            //  以下代码H.E.就不一一介绍了，大致意思就是 将修改过的List 对象集合，重新写入XML中。*
            xstream.alias(&quot;RecentHost&quot;,  RecentHost.class);                                     
            String xml=&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;+xstream.toXML(list);
             System.out.println ( xml );                                                   
            FileWriter resultFile = new FileWriter(recentLoginHostCaseXMLFile);
            PrintWriter myFile = new PrintWriter(resultFile);                                      
            myFile.println(xml);                                                                                        
            resultFile.close();                                                                                           
        }                                                                                                                              
    catch ( Exception e) {                                                                                              
        logger.error(e);                                                                                                    
    }                                                                                                                                  
}
</code></pre><p>–end–</p>
<p><strong>豆瓣读书</strong>  向你推荐有关<a href="http://book.douban.com/subject_search?search_text=%E4%BB%A3%E7%A0%81&amp;cat=1001" target="_blank">代码</a>、 类别的图书。
<a href="http://creativecommons.org/licenses/by/2.5/cn/"><img src="" alt="Creative Commons License">
</a> 本文由<a href="http://www.javabloger.com/" target="_blank">J2ee企业顾问</a>-黄毅创作,并已采用<a href="http://creativecommons.org/licenses/by/2.5/cn/" title="Creative Commons Attribution 2.5 China Mainland License" target="_blank">创作共用署名2.5中国大陆版许可证</a>授权。</p>
<p>标签: <a href="http://www.javabloger.com/article/tag/xml%e8%8a%82%e7%82%b9" target="_blank">XML节点</a>, <a href="http://www.javabloger.com/article/tag/xstream" target="_blank">Xstream</a>, <a href="http://www.javabloger.com/article/tag/%e4%bf%ae%e6%94%b9%e3%80%81%e6%b7%bb%e5%8a%a0%e3%80%81%e5%88%a0%e9%99%a4" target="_blank">修改、添加、删除</a></p>
<p>« <a href="http://www.javabloger.com/article/javamail-web-site-mailinator.html" target="_blank">大型JavaMail网站Mailinator架构(Linux+Tomcat+Java)</a></p>
<p><a href="http://www.javabloger.com/article/top-20-web-stie-web-server.html" target="_blank">大型网站的web服务器</a> »</p>
<h2 id="-">评论</h2>
<p>评论也是有版权的！</p>
<p>姓名:</p>
<p>E-mail:</p>
<p>网址:</p>
<p>验证码:  8138</p>
<p>正文 (必填, 最长字数:1200):</p>
<h2 id="-">我的废话</h2>
<p>印象中google、微软中的工程师和普通程序员最大的区别并不是他们的薪水与待遇，而是他们用80%时间去思考，20%的时间去修改代码，另则是用80%的时间去修改代码，<strong>只</strong>用20%的时间去思考问题。</p>
<h2 id="-">关注我@</h2>
<p>   <a href="http://t.sina.com.cn/javabloger" target="_blank"><img src="" alt=""></a>
   <a href="http://feed.feedsky.com/javaBloger" target="_blank"><img src="" alt=""></a>
   <a href="http://www.douban.com/people/njthnet" target="_blank"><img src="" alt=""></a>
   <a href="http://www.google.com/profiles/njthnet" target="_blank"><img src="" alt=""></a>
   <strong>IM提醒</strong>
   <a href="http://inezha.com/add2?url=http://feed.feedsky.com/javaBloger" target="_blank"><img src="" alt=""></a></p>
<h2 id="-">个人介绍</h2>
<p><strong>H.E.@Info:</strong>
J2EE Architect/<strong>J</strong>Evangelist
Life@NanJing
Hobby@Photography
Email@njthnet(at)gmail.com
<a href="http://www.javabloger.com/about_njthnet.html" target="_blank">更多...</a></p>
<h2 id="-">加入小圈子</h2>
<h2 id="-">小道消息</h2>
<p><a href="http://www.javabloger.com/webservice" target="_blank">本站Service API 测试ing</a>
<a href="http://javabloger-mini-books.googlecode.com/files/Java-JMS-Javabloger-mini-book.pdf" target="_blank">第三期<strong>“迷你书” JMS与消息中间件 专题</strong>(PDF)</a>
<a href="http://javabloger-mini-books.googlecode.com/files/JavaBloger-mini_book-2010-4.pdf" target="_blank">第二期<strong>“迷你书” 架构! 专题</strong>(PDF)</a>
<a href="http://javabloger-mini-books.googlecode.com/files/MongoDB_1_en.pdf" target="_blank">MongoDB<strong>入门介绍</strong>(PDF)</a></p>
<h2 id="-">最被关注</h2>
<ul>
<li><a href="http://www.javabloger.com/article/google-analytics-architecture.html" target="_blank">Google Analytics(谷歌分析) 架构与原理</a></li>
<li><a href="http://www.javabloger.com/article/category/hbase" title=" Spring3 REST实现html伪静态分页效果" target="_blank">HBase 技术专题</a></li>
<li><a href="http://www.javabloger.com/article/j2ee-adviser.html" target="_blank">J2ee企业顾问的职责</a></li>
<li><a href="http://www.javabloger.com/article/core-j2ee-patterns-micr_architecture.html" target="_blank">J2ee核心模式–微架构</a></li>
<li><a href="http://www.javabloger.com/article/java_and_php_mixed.html" target="_blank">Java+PHP=混血新宠儿</a></li>
<li><a href="http://www.javabloger.com/article/mongodb-java.html" target="_blank">Java操作MongoDB NoSQL数据库</a></li>
<li><a href="http://www.javabloger.com/article/memcached-cluster-error-msag.html" target="_blank">Memcached集群/分布式的单点故障</a></li>
<li><a href="http://www.javabloger.com/article/mongodb-cluster.html" target="_blank">MongoDB 集群</a></li>
<li><a href="http://www.javabloger.com/article/seo-java-j2ee-web-development.html" target="_blank">SEO与Java Web网站开发</a></li>
<li><a href="http://www.javabloger.com/article/spring3-rest-mvc-example.html" title="Spring3 REST MVC框架,提速你的Web开发" target="_blank">Spring3 REST MVC框架,提速你的Web开发</a></li>
<li><a href="http://www.javabloger.com/article/spring3-rest-java-on-google.html" target="_blank">Spring3 REST实现html伪静态分页</a></li>
<li><a href="http://www.javabloger.com/article/why_use_j2ee_framework.html" target="_blank">什么使用J2ee开源框架</a></li>
<li><a href="http://www.javabloger.com/article/what-large-web-site-using-j2ee-architecture.html" target="_blank">哪些大型网站采用J2EE架构</a></li>
<li><a href="http://www.javabloger.com/article/j2ee-clustering-architecture.html" target="_blank">大型J2EE系统架构</a></li>
<li><a href="http://www.javabloger.com/article/myspace-cloudtest.html" target="_blank">大型网站百万级高并发“云测试”</a></li>
<li><a href="http://www.javabloger.com/article/top-20-web-stie-web-server.html" target="_blank">大型网站的web服务器</a></li>
<li><a href="http://www.javabloger.com/article/implement-agile.html" target="_blank">敏捷的要素</a></li>
<li><a href="http://www.javabloger.com/article/great-agile-workspace.html" target="_blank">理想的敏捷工作环境与氛围</a></li>
<li><a href="http://www.javabloger.com/article/j2ee-push-mail-of-team.html" title="百万级 J2EE Push Mail 项目后记2" target="_blank">百万级 J2EE Push Mail 项目后记2</a></li>
<li><a href="http://www.javabloger.com/article/talk-about-project-dailymeeting.html" target="_blank">说说每日项目例会的必要性</a></li>
<li><p><a href="http://www.javabloger.com/article/microsoft_and_sun_testing_process.html" target="_blank">谈谈我知道的微软、SUN公司 测试工作</a></p>
<h2 id="-">最近文章</h2>
</li>
<li><p><a href="http://www.javabloger.com/article/thrift-java-code-example.html" title="Apache Thrift入门2-代码实现例子" target="_blank">Apache Thrift入门2-代码实现例子</a></p>
</li>
<li><a href="http://www.javabloger.com/article/apache-thrift-architecture.html" title="Apache Thrift入门1-架构&amp;介绍" target="_blank">Apache Thrift入门1-架构&amp;介绍</a></li>
<li><a href="http://www.javabloger.com/article/2011-pic-1.html" title="2011 新年里" target="_blank">2011 新年里</a></li>
<li><a href="http://www.javabloger.com/article/hbase-secure-privilege.html" title="HBase入门7 -安全&amp;权限" target="_blank">HBase入门7 -安全&amp;权限</a></li>
<li><a href="http://www.javabloger.com/article/hbase-mysql-rdbms.html" title="Hbase入门6 -白话MySQL(RDBMS)与HBase之间" target="_blank">Hbase入门6 -白话MySQL(RDBMS)与HBase之间</a></li>
<li><a href="http://www.javabloger.com/article/lily-hbase-solr-lucene-zookeeper.html" title="Lily-建立在HBase上的分布式搜索" target="_blank">Lily-建立在HBase上的分布式搜索</a></li>
<li><a href="http://www.javabloger.com/article/hbase-im-jabase-xmpp.html" title="基于Hbase存储的分布式消息(IM)系统-JABase" target="_blank">基于Hbase存储的分布式消息(IM)系统-JABase</a></li>
<li><a href="http://www.javabloger.com/article/hadoop-hive-mysql-sqoop.html" title="MySQL向Hive/HBase的迁移工具" target="_blank">MySQL向Hive/HBase的迁移工具</a></li>
<li><a href="http://www.javabloger.com/article/jee-and-mobile-internet.html" title="JEE技术在移动互联网中的应用" target="_blank">JEE技术在移动互联网中的应用</a></li>
<li><a href="http://www.javabloger.com/article/javabloger-site-features.html" title="新年，新功能" target="_blank">新年，新功能</a></li>
<li><a href="http://www.javabloger.com/article/javabloger-google-analytics-2010.html" title="谷歌分析数据" target="_blank">谷歌分析数据</a></li>
<li><a href="http://www.javabloger.com/article/egosurf.html" title="谁引用了本站的内容?" target="_blank">谁引用了本站的内容?</a></li>
<li><a href="http://www.javabloger.com/article/bye-2010-hello-hty.html" title="GoodBye,2010" target="_blank">GoodBye,2010</a></li>
<li><a href="http://www.javabloger.com/article/apache-hadoop-hama-bsp.html" title="Hadoop Hama项目–BSP模型的实现" target="_blank">Hadoop Hama项目–BSP模型的实现</a></li>
<li><a href="http://www.javabloger.com/article/stop-complaining.html" title="停止你的抱怨！" target="_blank">停止你的抱怨！</a></li>
</ul>
<h2 id="-lomo">摄影/生活–LOMO</h2>
<h3 id="-pizza-http-www-javabloger-com-article-beijing_cafe_bistro_pizza-factory-html-">·<a href="http://www.javabloger.com/article/beijing_cafe_bistro_pizza-factory.html" target="_blank">北京<code>咖啡店</code>小酒馆`pizza</a></h3>
<h3 id="-2009-http-www-javabloger-com-2009_selected_photo-">·<a href="http://www.javabloger.com/2009_selected_photo" target="_blank">2009与我的照片精选</a></h3>
<h3 id="-http-www-javabloger-com-post_by_2008-">·<a href="http://www.javabloger.com/post_by_2008" target="_blank">初学摄影时获奖的照片</a></h3>
<h3 id="-http-www-javabloger-com-other_pics_1-">·<a href="http://www.javabloger.com/other_pics_1" target="_blank">鼓浪屿游记</a></h3>
<h3 id="-http-www-javabloger-com-other_pics_2-">·<a href="http://www.javabloger.com/other_pics_2" target="_blank">有趣的照片</a></h3>
<h3 id="-http-www-javabloger-com-other_pics_3-">·<a href="http://www.javabloger.com/other_pics_3" target="_blank">收藏岁月的时光</a></h3>
<h3 id="-h-e-http-www-javabloger-com-black_and_white_photograph-">·<a href="http://www.javabloger.com/black_and_white_photograph" target="_blank">关于H.E.的黑白照片</a></h3>
<h3 id="-http-www-javabloger-com-mass_flower_photo-">·<a href="http://www.javabloger.com/mass_flower_photo" target="_blank">花花 草草,多么环保</a></h3>
<h3 id="-google-http-www-javabloger-com-google_office_environment-">·<a href="http://www.javabloger.com/google_office_environment" target="_blank">google的办公环境【转】</a></h3>
<p><a href="http://www.javabloger.com/album" target="_blank">更多...</a></p>
<h2 id="-">本站文章分类</h2>
<ul>
<li><a href="http://www.javabloger.com/article/category/android" title="查看 Android 下的所有文章" target="_blank">Android</a></li>
<li><a href="http://www.javabloger.com/article/category/chukwa" title="查看 ChukWa 下的所有文章" target="_blank">ChukWa</a></li>
<li><a href="http://www.javabloger.com/article/category/download" title="查看 Download 下的所有文章" target="_blank">Download</a></li>
<li><a href="http://www.javabloger.com/article/category/glassfish-j2ee-server" title="GlassFish应用服务器" target="_blank">GlassFish</a></li>
<li><a href="http://www.javabloger.com/article/category/google-analytics" title="查看 google-analytics 下的所有文章" target="_blank">google-analytics</a></li>
<li><a href="http://www.javabloger.com/article/category/hadoop" title="查看 Hadoop 下的所有文章" target="_blank">Hadoop</a></li>
<li><a href="http://www.javabloger.com/article/category/hama" title="查看 hama 下的所有文章" target="_blank">hama</a></li>
<li><a href="http://www.javabloger.com/article/category/hbase" title="查看 HBase 下的所有文章" target="_blank">HBase</a></li>
<li><a href="http://www.javabloger.com/article/category/hive" title="查看 Hive 下的所有文章" target="_blank">Hive</a></li>
<li><a href="http://www.javabloger.com/article/category/j2ee-adviser" title="软件开发的职场经验" target="_blank">J2ee企业顾问</a></li>
<li><a href="http://www.javabloger.com/article/category/j2ee-server" title="查看 J2EE服务器 下的所有文章" target="_blank">J2EE服务器</a></li>
<li><a href="http://www.javabloger.com/article/category/j2ee-framework" title="查看 J2EE框架 下的所有文章" target="_blank">J2EE框架</a></li>
<li><a href="http://www.javabloger.com/article/category/jms" title="查看 JMS 下的所有文章" target="_blank">JMS</a></li>
<li><a href="http://www.javabloger.com/article/category/life" title="查看 Life 下的所有文章" target="_blank">Life</a></li>
<li><a href="http://www.javabloger.com/article/category/linux" title="查看 Linux/Unix 下的所有文章" target="_blank">Linux/Unix</a></li>
<li><a href="http://www.javabloger.com/article/category/lucene" title="查看 lucene 下的所有文章" target="_blank">lucene</a></li>
<li><a href="http://www.javabloger.com/article/category/mac" title="查看 mac 下的所有文章" target="_blank">mac</a></li>
<li><a href="http://www.javabloger.com/article/category/mapreduce" title="查看 MapReduce 下的所有文章" target="_blank">MapReduce</a></li>
<li><a href="http://www.javabloger.com/article/category/middleware" title="查看 MiddleWare 下的所有文章" target="_blank">MiddleWare</a></li>
<li><a href="http://www.javabloger.com/article/category/mongodb" title="查看 MongoDB 下的所有文章" target="_blank">MongoDB</a></li>
<li><a href="http://www.javabloger.com/article/category/nosql" title="查看 NoSQL 下的所有文章" target="_blank">NoSQL</a></li>
<li><a href="http://www.javabloger.com/article/category/oo" title="查看 OO 下的所有文章" target="_blank">OO</a></li>
<li><a href="http://www.javabloger.com/article/category/openmq" title="查看 openmq 下的所有文章" target="_blank">openmq</a></li>
<li><a href="http://www.javabloger.com/article/category/opensource" title="查看 OpenSource 下的所有文章" target="_blank">OpenSource</a></li>
<li><a href="http://www.javabloger.com/article/category/php" title="查看 php 下的所有文章" target="_blank">php</a></li>
<li><a href="http://www.javabloger.com/article/category/pig" title="查看 Pig 下的所有文章" target="_blank">Pig</a></li>
<li><a href="http://www.javabloger.com/article/category/seo" title="搜索引擎优化" target="_blank">SEO</a></li>
<li><a href="http://www.javabloger.com/article/category/spring3" title="查看 spring3 下的所有文章" target="_blank">spring3</a></li>
<li><a href="http://www.javabloger.com/article/category/testing" title="查看 Testing 下的所有文章" target="_blank">Testing</a></li>
<li><a href="http://www.javabloger.com/article/category/thrift" title="查看 Thrift 下的所有文章" target="_blank">Thrift</a></li>
<li><a href="http://www.javabloger.com/article/category/web-dev" title="查看 web 下的所有文章" target="_blank">web</a></li>
<li><a href="http://www.javabloger.com/article/category/zookeeper" title="查看 zookeeper 下的所有文章" target="_blank">zookeeper</a></li>
<li><a href="http://www.javabloger.com/article/category/cloud" title="查看 云计算 下的所有文章" target="_blank">云计算</a></li>
<li><a href="http://www.javabloger.com/article/category/code" title="查看 代码 下的所有文章" target="_blank">代码</a></li>
<li><a href="http://www.javabloger.com/article/category/distributed" title="查看 分布式 下的所有文章" target="_blank">分布式</a></li>
<li><a href="http://www.javabloger.com/article/category/storage" title="查看 存储 下的所有文章" target="_blank">存储</a></li>
<li><a href="http://www.javabloger.com/article/category/performance" title="查看 性能 下的所有文章" target="_blank">性能</a></li>
<li><a href="http://www.javabloger.com/article/category/retain" title="查看 招聘 下的所有文章" target="_blank">招聘</a></li>
<li><a href="http://www.javabloger.com/article/category/recommendation" title="查看 推荐引擎 下的所有文章" target="_blank">推荐引擎</a></li>
<li><a href="http://www.javabloger.com/article/category/agile" title="查看 敏捷 下的所有文章" target="_blank">敏捷</a></li>
<li><a href="http://www.javabloger.com/article/category/database" title="查看 数据库 下的所有文章" target="_blank">数据库</a></li>
<li><a href="http://www.javabloger.com/article/category/other" title="查看 杂类 下的所有文章" target="_blank">杂类</a></li>
<li><a href="http://www.javabloger.com/article/category/architecture" title="查看 架构设计 下的所有文章" target="_blank">架构设计</a></li>
<li><a href="http://www.javabloger.com/article/category/success_story" title="工作与实施顾问中的记实录，讲述身边的事儿，讲述与你共鸣的那点事儿。" target="_blank">案例与故事</a></li>
<li><a href="http://www.javabloger.com/article/category/occupation" title="查看 职场 下的所有文章" target="_blank">职场</a></li>
<li><a href="http://www.javabloger.com/article/category/mini-book" title="查看 迷你书 下的所有文章" target="_blank">迷你书</a></li>
</ul>
<h2 id="-">文章索引模板</h2>
<ul>
<li><a href="http://www.javabloger.com/article/2011/02" title="2011年二月" target="_blank">2011年二月</a></li>
<li><a href="http://www.javabloger.com/article/2011/01" title="2011年一月" target="_blank">2011年一月</a></li>
<li><a href="http://www.javabloger.com/article/2010/12" title="2010年十二月" target="_blank">2010年十二月</a></li>
<li><a href="http://www.javabloger.com/article/2010/11" title="2010年十一月" target="_blank">2010年十一月</a></li>
<li><a href="http://www.javabloger.com/article/2010/10" title="2010年十月" target="_blank">2010年十月</a></li>
<li><a href="http://www.javabloger.com/article/2010/09" title="2010年九月" target="_blank">2010年九月</a></li>
<li><a href="http://www.javabloger.com/article/2010/08" title="2010年八月" target="_blank">2010年八月</a></li>
<li><a href="http://www.javabloger.com/article/2010/07" title="2010年七月" target="_blank">2010年七月</a></li>
<li><a href="http://www.javabloger.com/article/2010/06" title="2010年六月" target="_blank">2010年六月</a></li>
<li><a href="http://www.javabloger.com/article/2010/05" title="2010年五月" target="_blank">2010年五月</a></li>
<li><a href="http://www.javabloger.com/article/2010/04" title="2010年四月" target="_blank">2010年四月</a></li>
<li><a href="http://www.javabloger.com/article/2010/03" title="2010年三月" target="_blank">2010年三月</a></li>
<li><a href="http://www.javabloger.com/article/2010/02" title="2010年二月" target="_blank">2010年二月</a></li>
<li><a href="http://www.javabloger.com/article/2010/01" title="2010年一月" target="_blank">2010年一月</a></li>
<li><a href="http://www.javabloger.com/article/2008/06" title="2008年六月" target="_blank">2008年六月</a></li>
<li><a href="http://www.javabloger.com/article/2008/02" title="2008年二月" target="_blank">2008年二月</a></li>
<li><a href="http://www.javabloger.com/article/2007/06" title="2007年六月" target="_blank">2007年六月</a><h2 id="-">本站信息</h2>
</li>
</ul>
<p><img src="" alt="">
网志文章均为原创
本站版权<a href="http://www.javabloger.com/article/creative-commons.html" target="_blank">创作共用</a>
<a href="http://www.cnaaa.com/" target="_blank">3A网络</a>提供本站网络资源
<strong>Started</strong>@2009/01/15</p>
<p> © 2011 H.E. &#39;s Blog | <a href="http://www.javabloger.com/index.php/feed=rss2" target="_blank">Entries (RSS)</a> | <a href="http://www.javabloger.com/index.php/feed=comments-rss2" target="_blank">Comments (RSS)</a>   <a href="http://www.javabloger.com/sitemap.xml" target="_blank">本站地图</a>
苏ICP备10012508号</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--Java对XML节点的修改、添加、删除–ByXstream框架-J2EE企业应用顾问咨询/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--Java对XML节点的修改、添加、删除–ByXstream框架-J2EE企业应用顾问咨询" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--XStream-AnnotationsTutorial/">XStream </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--XStream-AnnotationsTutorial/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="xstream-annotations-tutorial">XStream - Annotations Tutorial</h1>
<p><a href="http://xstream.codehaus.org/index.html" target="_blank"><img src="" alt="XStream"></a></p>
<h1 id="annotations-tutorial">Annotations Tutorial</h1>
<h2 id="motivation">Motivation</h2>
<p>Sometimes it can get tedious to call all those XStream aliases/register converter methods or you might simply like the new trend on configuring POJOs: Java annotations.</p>
<p>This tutorial will show you how to use some of the annotations provided by XStream in order to make configuration easier. Let&#39;s start with a custom Message class:
package com.thoughtworks.xstream; package com.thoughtworks.xstream; public class RendezvousMessage { private int messageType; public RendezvousMessage(int messageType) { this.messageType = messageType; } }</p>
<p>Let&#39;s code the XStream calls which generate the XML file:</p>
<p>package com.thoughtworks.xstream; public class Tutorial { public static void main(String[] args) { XStream stream = new XStream(); RendezvousMessage msg = new RendezvousMessage(15); System.out.println(stream.toXML(msg)); } }</p>
<p>Results in the following XML:</p>
<p><com.thoughtworks.xstream.RendezvousMessage> <messageType>15</messageType> </com.thoughtworks.xstream.RendezvousMessage></p>
<h2 id="aliasing-annotation">Aliasing Annotation</h2>
<p>The most basic annotation is the one responsible for type and field aliasing: @XStreamAlias. Let&#39;s annotate both our type and field and run the tutorial method again:
@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; public RendezvousMessage(int messageType) { this.messageType = messageType; } }</p>
<p>In some strange way, the result is the same. What happened here? XStream does not read this annotation by default as it would be impossible to deserialize the XML code. Therefore we need to tell XStream to read the annotations from this type:</p>
<p>public static void main(String[] args) { XStream stream = new XStream(); xstream.processAnnotations(RendezvousMessage.class); RendezvousMessage msg = new RendezvousMessage(15); System.out.println(stream.toXML(msg)); }</p>
<p>Note that we have called the processAnnotations method of XStream. This method registers all aliases annotations in the XStream instance passed as first argument. You may also use the overloaded version of this method taking an array of types. The resulting XML is now what we have expected:</p>
<message> <type>15</type> </message>

<p>If you let XStream process the annotations of a type, it will also process all annotations of the related types i.e. all super types, implemented interfaces, the class types of the members and all their generic types.</p>
<h2 id="implicit-collections">Implicit Collections</h2>
<p>Let&#39;s add a List of content to our RendezvousMessage. We desire the same functionality obtained with implicit collections:
@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; private List<String> content; public RendezvousMessage(int messageType, String ... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>public static void main(String[] args) { XStream stream = new XStream(); xstream.processAnnotations(RendezvousMessage.class); RendezvousMessage msg = new RendezvousMessage(15, &quot;firstPart&quot;,&quot;secondPart&quot;); System.out.println(stream.toXML(msg)); }</p>
<p>The resulting XML shows the collection name before its elements:</p>
<message> <type>15</type> <content class="java.util.Arrays$ArrayList"> <a class="string-array"> <string>firstPart</string> <string>secondPart</string> </a> </content> </message>

<p>This is not what we desire therefore we will annotate the content list to be recognized as an implicit collection:</p>
<p>@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; @XStreamImplicit private List<String> content; public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>Resulting in an XML which ignores the field name (content) of the list:</p>
<message> <type>15</type> <a class="string-array"> <string>firstPart</string> <string>secondPart</string> </a> </message>

<p>We are almost there... we still want to remove the &#39;a&#39; tag, and define each content part with the tag &#39;part&#39;. In order to do so, let&#39;s add another attribute to our implicit collection annotation. The attribute field defines the name of the tag used for data contained inside this collection:</p>
<p>@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>Resulting in a cleaner XML:</p>
<message> <type>15</type> <part>firstPart</part> <part>secondPart</part> </message>

<h2 id="local-converters">Local Converters</h2>
<p>Let&#39;s create another attribute which defines the timestamp when the message was created:
@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; private Calendar created = new GregorianCalendar(); public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>Resulting in the following xml:</p>
<message> <type>15</type> <part>firstPart</part> <part>secondPart</part> <created> <time>1154097812245</time> <timezone>America/Sao_Paulo</timezone> </created> </message>

<p>Now we face the following problem: We want to use a custom converter locally for this Calendar, but only for this Calendar, this exact field in this exact type. Easy... let&#39;s annotate it with the custom converter annotation:</p>
<p>@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; @XStreamConverter(SingleValueCalendarConverter.class) private Calendar created = new GregorianCalendar(); public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>Let&#39;s create the custom converter:</p>
<p>public class SingleValueCalendarConverter implements Converter { public void marshal(Object source, HierarchicalStreamWriter writer, MarshallingContext context) { Calendar calendar = (Calendar) source; writer.setValue(String.valueOf(calendar.getTime().getTime())); } public Object unmarshal(HierarchicalStreamReader reader, UnmarshallingContext context) { GregorianCalendar calendar = new GregorianCalendar(); calendar.setTime(new Date(Long.parseLong(reader.getValue()))); return calendar; } public boolean canConvert(Class type) { return type.equals(GregorianCalendar.class); } }</p>
<p>And we end up with the converter being used and generating the following XML:</p>
<message> <type>15</type> <part>firstPart</part> <part>secondPart</part> <created>1154097812245</created> </message>

<h2 id="attributes">Attributes</h2>
<p>The client may asks for the type tag to be an attribute inside the message tag, as follows:</p>
<message type="15"> <part>firstPart</part> <part>secondPart</part> <created>1154097812245</created> </message>

<p>All you need to do is add the @XStreamAsAttribute annotation:</p>
<p>@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamAlias(&quot;type&quot;) @XStreamAsAttribute private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; @XStreamConverter(SingleValueCalendarConverter.class) private Calendar created = new GregorianCalendar(); public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<h2 id="omitting-fields">Omitting Fields</h2>
<p>Sometimes a class may contain elements that should not be part of the resulting XML. In our case we may now drop the &#39;messageType&#39;, since we are only interested at the content. This is easy using the @XStreamOmitField annotation:
@XStreamAlias(&quot;message&quot;) class RendezvousMessage { @XStreamOmitField private int messageType; @XStreamImplicit(itemFieldName=&quot;part&quot;) private List<String> content; @XStreamConverter(SingleValueCalendarConverter.class) private Calendar created = new GregorianCalendar(); public RendezvousMessage(int messageType, String... content) { this.messageType = messageType; this.content = Arrays.asList(content); } }</p>
<p>The resulting XML does not contain the type of the message anymore:</p>
<message> <part>firstPart</part> <part>secondPart</part> <created>1154097812245</created> </message>

<h2 id="auto-detect-annotations">Auto-detect Annotations</h2>
<p>Until now we have always told you, that you have to call processAnnotation to configure the XStream instance with the present annotations in the different classes. However, this is only half the truth. You can run XStream also in a lazy mode, where it auto-detects the annotations while processing the object graph and configure the XStream instance on-the-fly:
package com.thoughtworks.xstream; public class Tutorial { public static void main(String[] args) { XStream stream = new XStream(); xstream.autodetectAnnotations(true); RendezvousMessage msg = new RendezvousMessage(15); System.out.println(stream.toXML(msg)); } }</p>
<p>The resulting XML will look as expected! Nevertheless you have to understand the implications, therefore some words of warning:</p>
<ol>
<li><strong>Chicken-and-egg problem</strong></li>
</ol>
<p>An XStream instance caches all class types processed for annotations. Every time XStream converts an object it will in auto-detection mode first process the object&#39;s type and all the types related (as explained <a href="http://xstream.codehaus.org/annotations-tutorial.html#Aliasing" target="_blank">above</a>). Therefore it is no problem to serialize an object graph into XML, since XStream will know of all types in advance. This is no longer true at deserialization time. XStream has to know the alias to turn it into the proper type, but it can find the annotation for the alias only if it has processed the type in advance. Therefore deserialization will fail if the type has not already been processed either by having called XStream&#39;s processAnnotations method or by already having serialized this type. However, @XStreamAlias is the only annotation that may fail in this case.</p>
<ol>
<li><strong>Concurrency</strong></li>
</ol>
<p>XStream is not thread-safe while it is configured, thread-safety is only guaranteed during marshalling and unmarshalling. However an annotation is defining a change in configuration that is now applied while object marshalling is processed. Therefore will the auto-detection mode turn XStream&#39;s marshalling process in a thread-unsafe operation any you may run under certain circumstances into concurrency problems.</p>
<ol>
<li><strong>Exceptions</strong></li>
</ol>
<p>XStream uses a well-defined exception hierarchy. Normally an InitializationException is only thrown while XStream is configured. If annotations are processed on the fly they can be thrown obviously also in a marshalling process.</p>
<ol>
<li><strong>Performance</strong></li>
</ol>
<p>In auto-detection mode XStream will have to examine any unknown class type for annotations. This will slow down the marshalling process until all processed types have been examined once.</p>
<p>Please note, that any call to XStream.processAnnotations will turn off the auto-detection mode.</p>
<h2 id="summing-up">Summing up</h2>
<p>The XStream annotations support might help you configuring your class mappings in some ways, as the custom configuration will appear in your types, but might not be the solution for other problems, i.e. when you need to map the same type to two different XML &#39;standards&#39;. Others might claim that the configuration should be clearly stated in a Java class and not mixed with your model, its up to you to pick the best approach in your case: Annotations or direct method calls to the XStream instance. Annotations do not provide more functionality, but may improve convenience.</p>
<h1 id="software">Software</h1>
<ul>
<li><a href="http://xstream.codehaus.org/index.html" target="_blank">About XStream</a></li>
<li><a href="http://xstream.codehaus.org/news.html" target="_blank">News</a></li>
<li><a href="http://xstream.codehaus.org/changes.html" target="_blank">Change History</a></li>
<li><a href="http://xstream.codehaus.org/versioning.html" target="_blank">About Versioning</a></li>
</ul>
<h1 id="evaluating-xstream">Evaluating XStream</h1>
<ul>
<li><a href="http://xstream.codehaus.org/tutorial.html" target="_blank">Two Minute Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/graphs.html" target="_blank">Object references</a></li>
<li><a href="http://xstream.codehaus.org/manual-tweaking-output.html" target="_blank">Tweaking the Output</a></li>
<li><a href="http://xstream.codehaus.org/license.html" target="_blank">License</a></li>
<li><a href="http://xstream.codehaus.org/download.html" target="_blank">Download</a></li>
<li><a href="http://xstream.codehaus.org/references.html" target="_blank">References</a></li>
<li><p><a href="http://www.ohloh.net/projects/3459" target="_blank">Statistics</a></p>
<h1 id="using-xstream">Using XStream</h1>
</li>
<li><p><a href="http://xstream.codehaus.org/architecture.html" target="_blank">Architecture Overview</a></p>
</li>
<li><a href="http://xstream.codehaus.org/converters.html" target="_blank">Converters</a></li>
<li><a href="http://xstream.codehaus.org/faq.html" target="_blank">Frequently Asked Questions</a></li>
<li><a href="http://xstream.codehaus.org/list-user.html" target="_blank">Users&#39; Mailing List</a></li>
<li><a href="http://xstream.codehaus.org/javadoc/index.html" target="_blank">JavaDoc Core</a></li>
<li><a href="http://xstream.codehaus.org/benchmark-javadoc/index.html" target="_blank">JavaDoc Benchmark</a></li>
<li><a href="http://xstream.codehaus.org/issues.html" target="_blank">Reporting Issues</a></li>
</ul>
<h1 id="tutorials">Tutorials</h1>
<ul>
<li><a href="http://xstream.codehaus.org/tutorial.html" target="_blank">Two Minute Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/alias-tutorial.html" target="_blank">Alias Tutorial</a></li>
<li>Annotations Tutorial</li>
<li><a href="http://xstream.codehaus.org/converter-tutorial.html" target="_blank">Converter Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/objectstream.html" target="_blank">Object Streams Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/persistence-tutorial.html" target="_blank">Persistence API Tutorial</a></li>
<li><p><a href="http://xstream.codehaus.org/json-tutorial.html" target="_blank">JSON Tutorial</a></p>
<h1 id="developing-xstream">Developing XStream</h1>
</li>
<li><p><a href="http://xstream.codehaus.org/how-to-contribute.html" target="_blank">How to Contribute</a></p>
</li>
<li><a href="http://xstream.codehaus.org/list-dev.html" target="_blank">Developers&#39; Mailing List</a></li>
<li><a href="http://xstream.codehaus.org/team.html" target="_blank">Development Team</a></li>
<li><a href="http://xstream.codehaus.org/repository.html" target="_blank">Source Repository</a></li>
<li><a href="http://bamboo.ci.codehaus.org/browse/XSTREAM" target="_blank">Continuous Integration</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--XStream-AnnotationsTutorial/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--XStream-AnnotationsTutorial" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--XStream-FrequentlyAskedQuestions/">XStream </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--XStream-FrequentlyAskedQuestions/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="xstream-frequently-asked-questions">XStream - Frequently Asked Questions</h1>
<p><a href="http://xstream.codehaus.org/index.html" target="_blank"><img src="" alt="XStream"></a></p>
<h1 id="frequently-asked-questions">Frequently Asked Questions</h1>
<ol>
<li><a href="http://xstream.codehaus.org/faq.html#Compatibility" target="_blank">Compatibility</a></li>
<li><a href="http://xstream.codehaus.org/faq.html#Serialization" target="_blank">Serialization</a></li>
<li><a href="http://xstream.codehaus.org/faq.html#XML" target="_blank">XML specifics</a></li>
<li><a href="http://xstream.codehaus.org/faq.html#JSON" target="_blank">JSON specifics</a></li>
<li><a href="http://xstream.codehaus.org/faq.html#Other_Products" target="_blank">Comparison to other products</a></li>
<li><a href="http://xstream.codehaus.org/faq.html#Scalability" target="_blank">Scalability</a></li>
<li><a href="http://xstream.codehaus.org/faq.html#Uses" target="_blank">Uses of XStream</a></li>
</ol>
<h1 id="compatibility">Compatibility</h1>
<h2 id="which-jdk-is-required-to-use-xstream-">Which JDK is required to use XStream?</h2>
<p>1.3 or later.</p>
<h2 id="does-xstream-behave-differently-across-different-jvms-">Does XStream behave differently across different JVMs?</h2>
<p>XStream has two modes of operation: <strong>Pure Java</strong> and <strong>Enhanced</strong>. In pure Java mode, XStream behaves in the same way across different JVMs, however its features are limited to what reflection allows, meaning it cannot serialize certain classes or fields. In <strong>enhanced</strong> mode, XStream does not have these limitations, however this mode of operation is not available to all JVMs.</p>
<h2 id="which-jvms-allow-xstream-to-operate-in-enhanced-mode-">Which JVMs allow XStream to operate in enhanced mode?</h2>
<p>Currently on the Sun, Apple, HP, IBM and Blackdown 1.4 JVMs and onwards. Also for Hitachi, SAP and Diablo from 1.5 and onwards. Support for BEA JRockit starting with R25.1.0. For all other JVMs, XStream should be used in pure Java mode.</p>
<h2 id="what-are-the-advantages-of-using-enhanced-mode-over-pure-java-mode-">What are the advantages of using enhanced mode over pure Java mode?</h2>
<p>Feature Pure Java Enhanced Mode Public classes Yes Yes Non public classes No Yes Static inner classes Yes Yes Non-static inner classes No Yes Anonymous inner classes No Yes With default constructor Yes Yes Without default constructor No Yes Private fields Yes Yes Final fields Yes &gt;= JDK 1.5 Yes</p>
<h2 id="can-i-use-xstream-in-an-android-application-">Can I use XStream in an Android application?</h2>
<p>XStream does work in Android 1.0, but has limited capabilities. XStream does not support enhanced mode for Android. Additionally Android reports itself as implementation of JDK specification 0.9, so it is not possible to write into final fields. Android also does not include the java.beans package. Therefore you cannot use the JavaBeanConverter.</p>
<h2 id="why-does-xstream-fail-on-harmony-">Why does XStream fail on Harmony?</h2>
<p>Since JDK 5 it is possible according the Java specification to write into final fields using reflection. This is not yet supported by Harmony and therefore the PureJavaReflectionProvider fails. We have also already investigated into enhanced mode in Harmony, but the Harmony JVM currently crashes running the unit tests. It is simply not yet ready.</p>
<h2 id="are-there-plans-to-provide-enhanced-mode-support-to-other-jvms-">Are there plans to provide enhanced mode support to other JVMs?</h2>
<p>Yes. <a href="http://xstream.codehaus.org/list-user.html" target="_blank">Let us know</a> which JVM you would like supported.</p>
<h2 id="when-should-i-use-xstream-not-in-enhanced-mode-">When should I use XStream not in enhanced mode?</h2>
<p>Running XStream in a secured environment can prevent XStream from running in enhanced mode. This is especially true when running XStream in an applet. You may also try to use the JavaBeanConverter as alternative to the ReflectionConverter running in enhanced or pure Java mode.</p>
<h2 id="which-permissions-does-xstream-need-when-running-with-an-active-securitymanager-">Which permissions does XStream need when running with an active SecurityManager?</h2>
<p>This depends on the mode XStream is running in. Refer to the <a href="http://svn.xstream.codehaus.org/browse/xstream/trunk/xstream/src/test/com/thoughtworks/acceptance/SecurityManagerTest.java" target="_blank">SecurityManagerTest</a> for details.</p>
<h2 id="why-does-xstream-1-2-no-longer-read-xml-generated-with-xstream-1-1-x-">Why does XStream 1.2 no longer read XML generated with XStream 1.1.x?</h2>
<p>The architecture in XStream has slightly changed. Starting with XStream 1.2 the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/HierarchicalStreamDriver.html" target="_blank">HierarchicalStreamDriver</a> implementation is responsible to ensure that XML tags and attributes are valid names in XML, in XStream 1.1.x this responsibility was part of the ClassMapper implementations. Under some rare circumstances this will result in an unreadable XML due to the different processing order in the workflow of such problematic tag names.</p>
<p>You can run XStream in 1.1 compatibility mode though:
XStream xstream = new XStream(new XppDriver(new XStream11XmlFriendlyReplacer())) { protected boolean useXStream11XmlFriendlyMapper() { return true; } };</p>
<h2 id="xstream-1-3-ignores-suddenly-annotated-converters-xstreamconverter-and-xstreamconverters-">XStream 1.3 ignores suddenly annotated converters (@XStreamConverter and @XStreamConverters)?</h2>
<p>XStream treats now all annotations the same and therefore it no longer auto-detects any annotation by default. You can configure XStream to run in auto-detection mode, but be aware if the <a href="http://xstream.codehaus.org/annotations-tutorial.html#AutoDetect" target="_blank">implications</a>. As alternative you might register the deprecated AnnotationReflectionConverter, that was used for XStream pre 1.3.x, but as drawback the functionality to register a local converter with XStream.registerLocalConverter will no longer work.</p>
<h2 id="xstream-1-3-suddenly-has-a-different-field-order-">XStream 1.3 suddenly has a different field order?</h2>
<p>Yes. This was announced with the last 1.2.x release and was done to support the type inheritance of XML schemas. However, XStream is delivered with the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/HierarchicalStreamDriver.html" target="_blank">XStream12FieldKeySorter</a> that can be used to <a href="http://xstream.codehaus.org/faq.html#Serialization_sort_fields" target="_blank">sort the fields</a> according XStream 1.2.2.</p>
<h1 id="serialization">Serialization</h1>
<h2 id="which-class-types-can-be-serialized-by-xstream-">Which class types can be serialized by XStream?</h2>
<p>In contrast to the JDK XStream is not tied to a marker interface to serialize a class. XStream ships with some specialized <a href="http://xstream.codehaus.org/converters.html" target="_blank">converters</a>, but will use reflection by default for &quot;unknown&quot; classes to examine, read and write the class&#39; data. Therefore XStream can handle quite any class, especially the ones referred as POJO (Plain Old Java Object).</p>
<p>However, some types of classes exist with typical characteristics, that cannot be handled - at least not out of the box:</p>
<ol>
<li>Objects that are based on threads or thread local data: Thread, Timer, ThreadLocal and so on. These classes keep different data for different threads and there&#39;s no possibility to recreate a thread in a generic way nor recreating thread specific data. There might be special use cases, but this will always involve a custom converter where threads can be recreated in a specific way tied to that use case.</li>
<li>Class types that are based on generated classes. Such types have often names that are unique to the current process and will have no meaning in a different process. A custom converter might help to write the appropriate data into the serializing stream to be able to recreate a equivalent class at deserialization time.</li>
<li>Types that keep and use system resources like file handles, sockets, pipes and so on. ClassLoader, FileInputStream, FileOutputStream, Socket and so on. To deserialize such a class the converter must be able to claim the appropriate resource from the system again. With the help of a custom converter this might be possible, but with the reflection converter the deserialized class might refer a system resource that is no longer valid or belongs to somebody else. Behavior is undefined then.</li>
<li>A very special case of such allocated system resources are those classes that keep handles to system memory directly, because they are partly implemented native. It is known to be true for the Linux version of Sun&#39;s JDK that the BufferedImage references some system specific types of the JDK that themselves have member fields with such memory handles. While it is possible at first sight to serialize and deserialize a BufferedImage, the reflection converter will also duplicate the memory handle. As a result the JVM might crash easily because of freeing unallocated memory or freeing the same memory twice. It might be possible to create a custom converter, but the data structure is really complex in this area and nobody has been investigating so far to such an extent. However, <strong>do not use the reflection converter for these types! You have been warned!</strong></li>
</ol>
<h2 id="how-do-i-specify-that-a-field-should-not-be-serialized-">How do I specify that a field should not be serialized?</h2>
<p>Make it</p>
<p>transient
, specify it with</p>
<p>XStream.omitField()
or annotate it with @XStreamOmitField</p>
<h2 id="how-do-i-initialize-a-transient-field-at-deserialization-">How do I initialize a transient field at deserialization?</h2>
<p>XStream uses the same mechanism as the JDK serialization. Example:
class ThreadAwareComponent { private transient ThreadLocal component; // ... private Object readResolve() { component = new ThreadLocal(); return this; } }</p>
<h2 id="xstream-is-not-calling-the-default-constructor-during-deserialization-">XStream is not calling the default constructor during deserialization.</h2>
<p>This is, in fact, the same case as above. XStream uses the same mechanism as the JDK serialization. When using the enhanced mode with the optimized reflection API, it does not invoke the default constructor. The solution is to implement the readResolve method as above:
class MyExecutor { private Object readResolve() { // do what you need to do here System.out.println(&quot;After instantiating MyExecutor&quot;); // at the end returns itself return this; } }</p>
<h2 id="what-do-serialized-collections-look-like-">What do serialized collections look like?</h2>
<p>See example for the <a href="http://xstream.codehaus.org/converters.html#java.util" target="_blank">CollectionConverter</a>.</p>
<p>Note, that it is possible to configure XStream to omit the container element toys using implicit collections.</p>
<h2 id="do-my-classes-have-to-implement-serializable-if-xstream-is-to-serialize-them-">Do my classes have to implement Serializable if XStream is to serialize them?</h2>
<p>No.</p>
<h2 id="can-dynamic-proxies-be-serialized-">Can dynamic proxies be serialized?</h2>
<p>Yes.</p>
<h2 id="can-cglib-proxies-be-serialized-">Can CGLIB proxies be serialized?</h2>
<p>Only limitedly. A proxy generated with the CGLIB Enhancer is supported, if the proxy uses either a factory or only one callback. Then it is possible to recreate the proxy instance at unmarshalling time. Starting with XStream 1.3.1 CGLIB support is no longer automatically installed because of possible classloader problems and side-effects, because of incompatible ASM versions. You can enable CGLIB support with:
XStream xstream = new XStream() { protected MapperWrapper wrapMapper(MapperWrapper next) { return new CGLIBMapper(next); } }; xstream.registerConverter(new CGLIBEnhancedConverter(xstream.getMapper(), xstream.getReflectionProvider()));</p>
<h2 id="cglibenhancedconverter-fails-at-initialization-with-exceptionininitializererror">CGLIBEnhancedConverter fails at initialization with ExceptionInInitializerError</h2>
<p>This is not a problem of XStream. You have incompatible ASM versions in your classpath. CGLIB 2.1.x and below is based on ASM 1.5.x which is incompatible to newer versions that are used by common packages like Hibernate, Groovy or Guice. Check your dependencies and ensure that you are using either using cglib-nodep-2.x.jar instead of cglib-2.x.jar or update to cglib-2.2.x that depends on ASM 3.1. However, the <em>nodep</em> version contains a copy of the ASM classes with private packages and will therefore not raise class incompatibilities at all.</p>
<h2 id="serialization-fails-with-nosuchmethoderror-net-sf-cglib-proxy-enhancer-isenhanced-ljava-lang-class-z">Serialization fails with NoSuchMethodError: net.sf.cglib.proxy.Enhancer.isEnhanced(Ljava/lang/Class;)Z</h2>
<p>XStream uses this method to detect a CGLIB-enhanced proxy. Unfortunately the method is not available in the cglib-2.0 version. Since this version is many years old and the method is available starting with cglib-2.0.1, please consider an upgrade of the dependency, it works usually smoothly.</p>
<h2 id="my-attributes-are-interpreted-by-xstream-itself-and-cause-unexpected-behavior">My attributes are interpreted by XStream itself and cause unexpected behavior</h2>
<p>XStream&#39;s generic converters and the marshalling strategies use a number of attributes on their own. Especially the attributes named <em>id</em>, <em>class</em> and <em>reference</em> are likely to cause such collisions. Main reason is XStream&#39;s history, because originally user defined attributes were not supported and all attribute were system generated. Starting with XStream 1.3.1 you can redefine those attributes to allow the names to be used for your own ones. The following snippet defines XStream to use different system attributes for <em>id</em> and <em>class</em> while the field <em>id</em> of YourClass is written into the attribute <em>class</em>:
XStream xstream = new XStream() { xstream.useAttributeFor(YourClass.class, &quot;id&quot;); xstream.aliasAttribute(&quot;class&quot;, &quot;id&quot;); xstream.aliasSystemAttribute(&quot;type&quot;, &quot;class&quot;); xstream.aliasSystemAttribute(&quot;refid&quot;, &quot;id&quot;);</p>
<h2 id="can-i-select-the-field-order-in-which-xstream-serializes-objects-">Can I select the field order in which XStream serializes objects?</h2>
<p>Yes. XStream&#39;s ReflectionConverter uses the defined field order by default. You can override it by using an specific FieldKeySorter:
SortableFieldKeySorter sorter = new SortableFieldKeySorter(); sorter.registerFieldOrder(MyType.class, new String[] { &quot;firstToSerialize&quot;, &quot;secondToSerialize&quot;, &quot;thirdToSerialize&quot; }); xstream = new XStream(new Sun14ReflectionProvider(new FieldDictionary(sorter)));</p>
<h2 id="how-does-xstream-deal-with-newer-versions-of-classes-">How does XStream deal with newer versions of classes?</h2>
<ul>
<li>If a new field is added to the class, deserializing an old version will leave the field uninitialized.</li>
<li>If a field is removed from the class, deserializing an old version that contains the field will cause an exception. Leaving the field in place but declaring it as transient will avoid the exception, but XStream will not try to deserialize it.</li>
<li>If a class is renamed, aliases can be used to create an abstraction between the name used in XML and the real class name.</li>
<li>If a field is renamed, this should be treated as adding a field and removing a field.</li>
</ul>
<p>For more advanced class migrations, you may</p>
<ul>
<li>have to do custom pre-processing of the XML before sending it to XStream (for example, with XSLT or DOM manipulations)</li>
<li>declare new fields as transient</li>
<li>implement your own converter, that can handle the situation</li>
<li>add a readResolve() method to your class, that initializes the object accordingly</li>
<li>implement a custom mapper to ignore unknown fields automatically (see acceptance test CustomMapperTest.testCanBeUsedToOmitUnexpectedElements())</li>
</ul>
<p>Future versions of XStream will include features to make these type of migrations easier.</p>
<h2 id="how-does-xstream-cope-with-isolated-class-loaders-">How does XStream cope with isolated class loaders?</h2>
<p>Serializing an object graph is never a problem, even if the classes of those objects have been loaded by a different class loader. The situation changes completely at deserialization time. In this case you must set the class loader to use with:
xstream.setClassLoader(yourClassLoader);</p>
<p>Although XStream caches a lot of type related information to gain speed, it keeps those information in tables with weak references that should be cleaned by the garbage collector when the class loader is freed.</p>
<p>Note, that this call should be made quite immediately after creating the XStream and before any other configuration is done. Otherwise configuration based on special types might refer classes loaded with the wrong classloader.</p>
<h1 id="xml-specifics">XML specifics</h1>
<h2 id="why-does-xstream-not-respect-the-encoding-in-the-xml-declaration-">Why does XStream not respect the encoding in the XML declaration?</h2>
<p>XStream architecture is based on IO Readers and Writers, while the XML declaration is the responsibility of XML parsers. XStream all <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/HierarchicalStreamDriver.html" target="_blank">HierarchicalStreamDriver</a> implementation respect the encoding since version 1.3, but only if you provide an <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/io/InputStream.html" target="_blank">InputStream</a>. If XStream consumes a <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/io/Reader.html" target="_blank">Reader</a> you have to initialize the reader with the appropriate encoding yourself, since it is now the reader&#39;s task to perform the encoding and no XML parser can change the encoding of a Reader and any encoding definition in the XML header will be ignored.</p>
<h2 id="why-does-xstream-not-write-an-xml-declaration-">Why does XStream not write an XML declaration?</h2>
<p>XStream is designed to write XML snippets, so you can embed its output into an existing stream or string. You can write the XML declaration yourself into the Writer before using it to call XStream.toXML(writer).</p>
<h2 id="why-does-xstream-not-write-xml-in-utf-8-">Why does XStream not write XML in UTF-8?</h2>
<p>XStream does no character encoding by itself, it relies on the configuration of the underlying XML writer. By default it uses its own PrettyPrintWriter which writes into the default encoding of the current locale. To write UTF-8 you have to provide a <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/io/Writer.html" target="_blank">Writer</a> with the appropriate encoding yourself.</p>
<h2 id="why-do-field-names-suddenly-have-double-underscores-in-the-generated-xml-">Why do field names suddenly have double underscores in the generated XML?</h2>
<p>XStream maps Java class names and field names to XML tags or attributes. Unfortunately this mapping cannot be 1:1, since some identifiers of Java contain a dollar sign which is invalid in XML names. Therefore XStream uses an <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/xml/XmlFriendlyReplacer.html" target="_blank">XmlFriendlyReplacer</a> to replace this character with a replacement. By default this replacement uses an underscore and therefore the replacer must escape the underscore itself also. You may provide a different configured instance of the XmlFriendlyReplacer or a complete own implementation, but you must ensure, that the resulting names are valid for XML.</p>
<h2 id="xstream-fails-to-unmarshal-my-given-xml-and-i-do-not-know-why-">XStream fails to unmarshal my given XML and I do not know why?</h2>
<p>By default XStream is written for persistence i.e. it will read the XML it can write. If you have to transform a given XML into an object graph, you should go the other way round. Use XStream to transfer your objects into XML. If the written XML matches your schema, XStream is also able to read it. This way is much easier, since you can spot the differences in the XML much more easy than to interpret the exceptions XStream will throw if it cannot match the XML into your objects.</p>
<h2 id="my-parser-claims-the-x0-character-to-be-invalid-but-it-was-written-with-xstream-">My parser claims the &amp;/#x0; character to be invalid, but it was written with XStream!</h2>
<p>Your parser is basically right! A character of value 0 is not valid as part of XML according the XML specification (see version <a href="http://www.w3.org/TR/2006/REC-xml-20060816/#charsets" target="_blank">1.0</a> or <a href="http://www.w3.org/TR/2006/REC-xml11-20060816/#charsets" target="_blank">1.1</a>), neither directly nor as character entity nor within CDATA. But not every parser respects this part of the specification (e.g. Xpp3 will ignore it and read character entities). If you expect such characters in your strings and you do not use the Xpp3 parser, you should consider to use a converter that writes the string as byte array in Base64 code. As alternative you may force the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/xml/PrettyPrintWriter.html" target="_blank">PrettyPrintWriter</a> or derived writers to be XML 1.0 or 1.1. compliant, i.e. in this mode a StreamException is thrown.</p>
<h2 id="my-parser-claims-a-control-character-to-be-invalid-but-it-was-written-with-xstream-">My parser claims a control character to be invalid, but it was written with XStream!</h2>
<p>Your parser is probably right! Control characters are only valid as part of XML 1.1. You should add an XML header declaring this version or use a parser that does not care about this part of the specification (e.g. Xpp3 parser).</p>
<h2 id="why-is-my-element-not-written-as-xml-attribute-although-i-have-configured-it-">Why is my element not written as XML attribute although I have configured it?</h2>
<p>You can only write types as attributes that are represented as a single String value and are handled therefore by SingleValueConverter implementations. If your type is handled by a Converter implementation, the configuration of XStream to write an attribute (using XStream.useAttributeFor() or @XStreamAsAttribute) is simply ignored.</p>
<h2 id="why-are-whitespace-characters-missing-in-my-attribute-values-after-deserialization-">Why are whitespace characters missing in my attribute values after deserialization?</h2>
<p>This is part of the XML specification and a required functionality for any XML parser called <a href="http://www.w3.org/TR/2006/REC-xml-20060816/#AVNormalize" target="_blank">attribute value normalization</a>. It cannot be influenced by XStream. Do not use attributes if your values contain leading or trailing whitespaces, other whitespaces than blanks, or sequences of whitespaces.</p>
<h2 id="why-does-xstream-not-have-any-namespace-support-">Why does XStream not have any namespace support?</h2>
<p>Not every XML parser supports namespaces and not every XML parser that supports namespaces can be configured within XStream to use those. Basically namespaces must be supported individually for the different XML parsers and the only support for namespaces that has currently been implemented in XStream is for the StAX paser. Therefore use and configure the StaxDriver of XStream to use namespaces.</p>
<h1 id="json-specifics">JSON specifics</h1>
<h2 id="why-are-there-two-json-driver-implementations-">Why are there two JSON driver implementations?</h2>
<p>As always, first for historical reasons! Main difference is that the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/json/JettisonMappedXmlDriver.html" target="_blank">JettisonMappedXmlDriver</a> is a thin wrapper around <a href="http://jettison.codehaus.org/" target="_blank">Jettison</a> in combination with the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/xml/StaxDriver.html" target="_blank">StaxDriver</a>, while the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/io/json/JsonHierarchicalStreamDriver.html" target="_blank">JsonHierarchicalStreamDriver</a> uses an own more flexible implementation, but can only be used to generate JSON, deserialization is not implemented.</p>
<h2 id="why-is-it-not-possible-to-deserialize-a-json-string-starting-with-an-array-">Why is it not possible to deserialize a JSON string starting with an array?</h2>
<p>XStream&#39;s implementation to deserialize JSON is based on Jettison and StAX. Jettison implements a XMLStreamReader of StaX and transforms the processed JSON virtually into XML first. However, if the JSON string starts with an array it is not possible for Jettison to create a valid root element, since it has no name.</p>
<h2 id="xstream-fails-to-unmarshal-my-json-string-and-i-do-not-know-why-">XStream fails to unmarshal my JSON string and I do not know why?</h2>
<p>Deserialization of JSON is currently done by Jettison, that transforms the JSON string into a StAX stream. XStream itself does nothing know about the JSON format here. If your JSON string reaches some kind of complexity and you do not know how to design your Java objects and configure XStream to match those, you should have a look at the intermediate XML that is processed by XStream in the end. This might help to identify the problematic spots. Also consider then <a href="http://xstream.codehaus.org/faq.html#XML_unmarshalling_fails" target="_blank">marshalling your Java objects into XML first</a>. You can use following code to generate the XML:
String json = &quot;{\&quot;string\&quot;: \&quot;foo\&quot;}&quot;; HierarchicalStreamDriver driver = new JettisonMappedXmlDriver(); StringReader reader = new StringReader(json); HierarchicalStreamReader hsr = driver.createReader(reader); StringWriter writer = new StringWriter(); new HierarchicalStreamCopier().copy(hsr, new PrettyPrintWriter(writer)); writer.close(); System.out.println(writer.toString());</p>
<h2 id="what-limitations-has-xstream-s-json-support-">What limitations has XStream&#39;s JSON support?</h2>
<p>JSON represents a very simple data model for easy data transfer. Especially it has no equivalent for XML attributes. Those are written with a leading &quot;@&quot; character, but this is not always possible without violating the syntax (e.g. for array types). Those may silently dropped (and makes it therefore difficult to implement deserialization). References are another issue in the serialized object graph, since JSON has no possibility to express such a construct. You should therefore always set the NO_REFERENCES mode of XStream.</p>
<h2 id="why-are-there-invalid-characters-in-my-json-representation-">Why are there invalid characters in my JSON representation?</h2>
<p>The JSON spec requires any JSON string to be in UTF-8 encoding. However, XStream ensures this only if you provide an InputStream or an OutputStream. If you provide a Reader or Writer you have to ensure this requirement on your own.</p>
<h2 id="the-generated-json-is-invalid-it-contains-a-dash-in-the-label-">The generated JSON is invalid, it contains a dash in the label!</h2>
<p>Well, no, the JSON is valid! Please check yourself with the <a href="http://www.jslint.com/" target="_blank">JSON syntax checker</a>. However, some JavaScript libraries silently assume that the JSON labels are valid JavaScript identifiers, because JavaScript supports a convenient way to address an element, <strong>if</strong> the label is a valid JavaScript identifier:
var json = {&quot;label&quot;: &quot;foo&quot;, &quot;label-with-dash&quot;: &quot;bar&quot;}; var fooVar = json.label; // works for labels that are JavaScript identifiers var barVar = json[&quot;label-with-dash&quot;]; // using an array index works always</p>
<p>As alternative you may wrap the JsonWriter and replace any dash with an underscore:</p>
<p>HierarchicalStreamDriver driver = new JsonHierarchicalStreamDriver() { public HierarchicalStreamWriter createWriter(Writer out) { return new WriterWrapper(super.createWriter(out)) { public void startNode(String name) { startNode(name, null); } public void startNode(String name, Class clazz) { wrapped.startNode(name.replace(&#39;-&#39;, &#39;_&#39;), clazz); } } } }; XStream xstream = new XStream(driver);</p>
<h1 id="comparison-to-other-products">Comparison to other products</h1>
<h2 id="how-does-xstream-compare-to-java-beans-xmlencoder-">How does XStream compare to java.beans.XMLEncoder?</h2>
<p>XStream is designed for serializing objects using internal fields, whereas <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/beans/XMLEncoder.html" target="_blank">XMLEncoder</a> is designed for serializing JavaBeans using public API methods (typically in the form of</p>
<p>getXXX()
,</p>
<p>setXXX()
,</p>
<p>addXXX()
and</p>
<p>removeXXX()
methods.</p>
<h2 id="how-does-xstream-compare-to-jaxb-java-api-for-xml-binding-">How does XStream compare to JAXB (Java API for XML Binding)?</h2>
<p>JAXB is a Java binding tool. It generates Java code from a schema and you are able to transform from those classes into XML matching the processed schema and back. Note, that you cannot use your own objects, you have to use what is generated.</p>
<h1 id="scalability">Scalability</h1>
<h2 id="is-xstream-thread-safe-">Is XStream thread safe?</h2>
<p>Yes. Once the XStream instance has been created and configured, it may be shared across multiple threads allowing objects to be serialized/deserialized concurrently (unless you enable the auto.detection and processing of annotations). Actually the creation and initialization of XStream is quite expensive, therefore it is recommended to keep the XStream instance itself.</p>
<h2 id="how-much-memory-does-xstream-consume-">How much memory does XStream consume?</h2>
<p>This cannot be answered in general, but following topics have impact on the memory:</p>
<ol>
<li>XML parser technology in use: You should use a streaming parser like Xpp3 or StAX. DOM-based parsers process the complete XML and create their document model in memory before the first converter of XStream is called.</li>
<li>Your object model: Is it necessary to keep the complete object graph in memory at once. As alternative you might use <a href="http://xstream.codehaus.org/objectstream.html" target="_blank">object streams</a> or write custom converters that can load and save objects of your object model on the fly without adding them to the object graph physically. As example see the implementation of the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/persistence/XmlArrayList.html" target="_blank">XmlArrayList</a> in combination with the <a href="http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/persistence/FileStreamStrategy.html" target="_blank">FileStreamStrategy</a> to keep parts of the object graph separate.</li>
<li>References: By default XStream supports references to the same object in an object graph. This implies that XStream keeps track of all serialized and deserialized objects internally. These references are kept with WeakReferences, so that the memory can be freed as soon as nobody references these objects anymore.</li>
<li>XML values: Any tag and attribute value that is converted into a Java String in the object graph will use the same String instance.</li>
<li>XStream caches: To increase performance XStream caches quite a lot like classes, converters to use, aliasing, tag names. All those caches make usage of WeakReferences or will exist only while marshalling one object graph resp. unmarshalling one input stream.</li>
</ol>
<h2 id="can-the-performance-of-xstream-be-increased-">Can the performance of XStream be increased?</h2>
<p>XStream is a generalizing library, it inspects and handles your types on the fly. Therefore it will normally be slower than a piece of optimized Java code generated out of a schema. However, it is possible to increase the performance anyway:</p>
<ul>
<li>Write custom converters for those of your types that occur very often in your XML.</li>
<li>Keep a configured XStream instance for multiple usage. Creation and initialization is quite expensive compared to the overhead of XStream when calling marshall or unmarshal.</li>
<li>Use Xpp3 or StAX parsers.</li>
</ul>
<p>Note, you should never try to optimize code for performance simply because you <strong>believe</strong> that you have detected a bottle neck. Always use proper tools like a profiler to verify where your hotspots are and whether your optimization was really successful or not.</p>
<h1 id="uses-of-xstream">Uses of XStream</h1>
<h2 id="is-xstream-a-data-binding-tool-">Is XStream a data binding tool?</h2>
<p>No. It is a serialization tool.</p>
<h2 id="can-xstream-generate-classes-from-xsd-">Can XStream generate classes from XSD?</h2>
<p>No. For this kind of work a data binding tool such as <a href="http://xmlbeans.apache.org/" target="_blank">XMLBeans</a> is appropriate.</p>
<h2 id="why-is-there-no-saxreader-">Why is there no SaxReader?</h2>
<p>XStream works on a stream-based parser model, while SAX is event-based. The stream based model implies, that the caller consumes the individual tokens from the XML parser on demand, while in an event-based model the parser controls the application flow on its own and will use callbacks to support client processing. The different architecture makes it therefore impossible for XStream to use an event-driven XML parser.</p>
<h1 id="software">Software</h1>
<ul>
<li><a href="http://xstream.codehaus.org/index.html" target="_blank">About XStream</a></li>
<li><a href="http://xstream.codehaus.org/news.html" target="_blank">News</a></li>
<li><a href="http://xstream.codehaus.org/changes.html" target="_blank">Change History</a></li>
<li><a href="http://xstream.codehaus.org/versioning.html" target="_blank">About Versioning</a></li>
</ul>
<h1 id="evaluating-xstream">Evaluating XStream</h1>
<ul>
<li><a href="http://xstream.codehaus.org/tutorial.html" target="_blank">Two Minute Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/graphs.html" target="_blank">Object references</a></li>
<li><a href="http://xstream.codehaus.org/manual-tweaking-output.html" target="_blank">Tweaking the Output</a></li>
<li><a href="http://xstream.codehaus.org/license.html" target="_blank">License</a></li>
<li><a href="http://xstream.codehaus.org/download.html" target="_blank">Download</a></li>
<li><a href="http://xstream.codehaus.org/references.html" target="_blank">References</a></li>
<li><p><a href="http://www.ohloh.net/projects/3459" target="_blank">Statistics</a></p>
<h1 id="using-xstream">Using XStream</h1>
</li>
<li><p><a href="http://xstream.codehaus.org/architecture.html" target="_blank">Architecture Overview</a></p>
</li>
<li><a href="http://xstream.codehaus.org/converters.html" target="_blank">Converters</a></li>
<li>Frequently Asked Questions</li>
<li><a href="http://xstream.codehaus.org/list-user.html" target="_blank">Users&#39; Mailing List</a></li>
<li><a href="http://xstream.codehaus.org/javadoc/index.html" target="_blank">JavaDoc Core</a></li>
<li><a href="http://xstream.codehaus.org/benchmark-javadoc/index.html" target="_blank">JavaDoc Benchmark</a></li>
<li><a href="http://xstream.codehaus.org/issues.html" target="_blank">Reporting Issues</a></li>
</ul>
<h1 id="tutorials">Tutorials</h1>
<ul>
<li><a href="http://xstream.codehaus.org/tutorial.html" target="_blank">Two Minute Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/alias-tutorial.html" target="_blank">Alias Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/annotations-tutorial.html" target="_blank">Annotations Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/converter-tutorial.html" target="_blank">Converter Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/objectstream.html" target="_blank">Object Streams Tutorial</a></li>
<li><a href="http://xstream.codehaus.org/persistence-tutorial.html" target="_blank">Persistence API Tutorial</a></li>
<li><p><a href="http://xstream.codehaus.org/json-tutorial.html" target="_blank">JSON Tutorial</a></p>
<h1 id="developing-xstream">Developing XStream</h1>
</li>
<li><p><a href="http://xstream.codehaus.org/how-to-contribute.html" target="_blank">How to Contribute</a></p>
</li>
<li><a href="http://xstream.codehaus.org/list-dev.html" target="_blank">Developers&#39; Mailing List</a></li>
<li><a href="http://xstream.codehaus.org/team.html" target="_blank">Development Team</a></li>
<li><a href="http://xstream.codehaus.org/repository.html" target="_blank">Source Repository</a></li>
<li><a href="http://bamboo.ci.codehaus.org/browse/XSTREAM" target="_blank">Continuous Integration</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--XStream-FrequentlyAskedQuestions/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--XStream-FrequentlyAskedQuestions" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--XStream使用方法总结附实例代码_JSP编程_脚本之家/">XStream使用方法总结附实例代码_JSP编程_脚本之家</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--XStream使用方法总结附实例代码_JSP编程_脚本之家/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="xstream-_jsp-_-">XStream使用方法总结附实例代码<em>JSP编程</em>脚本之家</h1>
<p>页面导航： <a href="http://www.jb51.net/index.htm" target="_blank">首页</a> → <a href="http://www.jb51.net/list/index_1.htm" title="网络编程" target="_blank">网络编程</a> → <a href="http://www.jb51.net/list/list_83_1.htm" title="JSP编程" target="_blank">JSP编程</a> → 正文内容 XStream 实例 </p>
<h1 id="xstream-">XStream使用方法总结附实例代码</h1>
<p>发布：dxy 字体：[<a href="">增加</a> <a href="">减小</a>] 类型：转载 </p>
<p>XStream是一个Java对象和XML相互转换的工具，很好很强大。提供了所有的基础类型、数组、集合等类型直接转换的支持。因此XML常用于数据交换、对象序列化（这种序列化和Java对象的序列化技术有着本质的区别）。
XStream中的核心类就是XStream类，一般来说，熟悉这个类基本就够用了，如果你用的更多，估计是你设计有问题，否则不需要。 
XStream对象相当Java对象和XML之间的转换器，转换过程是双向的。创建XSteam对象的方式很简单，只需要new XStream()即可。 
Java到xml，用toXML()方法。 
Xml到Java，用fromXML()方法。 
在没有任何设置默认情况下，java到xml的映射，是java成员名对应xml的元素名，java类的全名对应xml根元素的名字。而实际中，往往是xml和java类都有了，要完成相互转换，必须进行别名映射。 
别名配置包含三种情况： 
1、类别名，用alias(String name, Class type)。 
2、类成员别名，用aliasField(String alias, Class definedIn, String fieldName) 
3、类成员作为属性别名，用 aliasAttribute(Class definedIn, String attributeName, String alias)，单独命名没有意义，还要通过useAttributeFor(Class definedIn, String fieldName) 应用到某个类上。 
别名的配置是非常重要的，但是其中有些细节问题很重要，在例子中会专门做详细说明。 
另外还有不太常用的方法： 
addImplicitCollection(Class ownerType, String fieldName)，去掉集合类型生成xml的父节点。 
registerConverter(Converter converter) ，注册一个转换器。 
如果你的xml很大，或者为了安全性，以流的方式传输，那么XStream也提供丰富的API， 
使用起来也非常简便。目前还用不到，暂不考虑。 
如果这些基本的操作还不能满足你应用的需求，XStream提供丰富的扩展点。你可以实现自己的转换器。还可以利用XStream完成更负责的功能，比如输出其他非xml格式的数据，还可以输出html，还支持XML Dom类型数据，这些应用起来稍微复杂些。当然这些不是XStream应用的重点，也不用理会，真正需要的时候再查看API和源码研究研究。 
XStream的优点很多，但是也有一些小bug，比如在定义别名中的下划线“<em>”转换为xml后会变成“_</em>”这个符号，很变态。因此，尽量避免在别名中实用任何符号，却是需要下划线的时候，可以考虑实用连接符“-”，这个没有问题。 
另外，我们的Java Bean中，常常有一些常量，在转换过程，XStream也会将这些常量转换过去，形成常量的xml节点，这显然不是想要的结果，对于常量字段，就不做转换了。 
下面给出一个非常典型的而且实用的例子，作为对总结的补充： 
package test; 
import java.util.List; 
//<em>/</em> 
/<em> Created by IntelliJ IDEA.<br> 
/</em> <b>User</b>: leizhimin<br> 
/<em> <b>Date</b>: 2008-5-22 21:10:13<br> 
/</em> <b>Note</b>: Please add comment here! 
/<em>/ 
public class Person { 
private String name; 
private String age; 
private Profile profile; 
private List<Address> addlist; 
public Person(String name, String age, Profile profile, List<Address> addlist) { 
this.name = name; 
this.age = age; 
this.profile = profile; 
this.addlist = addlist; 
} 
public String toString() { 
return &quot;Person{&quot; + 
&quot;name=&#39;&quot; + name + &#39;\&#39;&#39; + 
&quot;, age=&#39;&quot; + age + &#39;\&#39;&#39; + 
&quot;, profile=&quot; + profile + 
&quot;, addlist=&quot; + addlist + 
&#39;}&#39;; 
} 
} 
package test; 
import java.sql.Date; 
//</em>/<em> 
/</em> Created by IntelliJ IDEA.<br> 
/<em> <b>User</b>: leizhimin<br> 
/</em> <b>Date</b>: 2008-5-22 21:10:32<br> 
/<em> <b>Note</b>: Please add comment here! 
/</em>/ 
public class Profile { 
private String job; 
private String tel; 
private String remark; 
public Profile(String job, String tel, String remark) { 
this.job = job; 
this.tel = tel; 
this.remark = remark; 
} 
public String toString() { 
return &quot;Profile{&quot; + 
&quot;job=&#39;&quot; + job + &#39;\&#39;&#39; + 
&quot;, tel=&#39;&quot; + tel + &#39;\&#39;&#39; + 
&quot;, remark=&#39;&quot; + remark + &#39;\&#39;&#39; + 
&#39;}&#39;; 
} 
} 
package test; 
//<em>/</em> 
/<em> Created by IntelliJ IDEA.<br> 
/</em> <b>User</b>: leizhimin<br> 
/<em> <b>Date</b>: 2008-5-22 21:10:22<br> 
/</em> <b>Note</b>: Please add comment here! 
/<em>/ 
public class Address { 
private String add; 
private String zipcode; 
public Address(String add, String zipcode) { 
this.add = add; 
this.zipcode = zipcode; 
} 
public String toString() { 
return &quot;Address{&quot; + 
&quot;add=&#39;&quot; + add + &#39;\&#39;&#39; + 
&quot;, zipcode=&#39;&quot; + zipcode + &#39;\&#39;&#39; + 
&#39;}&#39;; 
} 
} 
package test; 
import com.thoughtworks.xstream.XStream; 
import java.util.List; 
import java.util.ArrayList; 
//</em>/<em> 
/</em> Created by IntelliJ IDEA.<br> 
/<em> <b>User</b>: leizhimin<br> 
/</em> <b>Date</b>: 2008-5-22 21:10:47<br> 
/<em> <b>Note</b>: XStream学习[<a href="http://lavasoft.blog.51cto.com" target="_blank">http://lavasoft.blog.51cto.com</a>] 
/</em>/ 
public class TestXStream { 
public static void main(String args[]) { 
test(); 
} 
public static void test() { 
System.out.println(&quot;----------XStream学习:<a href="http://lavasoft.blog.51cto.com----------" target="_blank">http://lavasoft.blog.51cto.com----------</a>&quot;); 
//目标对象 
Address address1 = new Address(&quot;郑州市经三路&quot;, &quot;450001&quot;); 
Address address2 = new Address(&quot;西安市雁塔路&quot;, &quot;710002&quot;); 
List<Address> addList = new ArrayList<Address>(); 
addList.add(address1); 
addList.add(address2); 
Profile profile = new Profile(&quot;软件工程师&quot;, &quot;13512129933&quot;, &quot;备注说明&quot;); 
Person person = new Person(&quot;熔岩&quot;, &quot;27&quot;, profile, addList); 
//转换装配 
XStream xStream = new XStream(); 
//<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em> 设置类别名 /<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/ 
xStream.alias(&quot;PERSON&quot;, test.Person.class); 
xStream.alias(&quot;PROFILE&quot;, test.Profile.class); 
xStream.alias(&quot;ADDRESS&quot;, test.Address.class); 
output(1, xStream, person); 
//<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em> 设置类成员的别名 /</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/ 
//设置Person类的name成员别名Name 
xStream.aliasField(&quot;Name&quot;, Person.class, &quot;name&quot;); 
//<em>[注意] 设置Person类的profile成员别名PROFILE,这个别名和Profile类的别名一致, 
/</em> 这样可以保持XStream对象可以从profile成员生成的xml片段直接转换为Profile成员, 
/<em> 如果成员profile的别名和Profile的别名不一致,则profile成员生成的xml片段不可 
/</em> 直接转换为Profile对象,需要重新创建XStream对象,这岂不给自己找麻烦? /<em>/ 
xStream.aliasField(&quot;PROFILE&quot;, test.Person.class, &quot;profile&quot;); 
xStream.aliasField(&quot;ADDLIST&quot;, test.Person.class, &quot;addlist&quot;); 
xStream.aliasField(&quot;Add&quot;, test.Address.class, &quot;add&quot;); 
xStream.aliasField(&quot;Job&quot;, test.Profile.class, &quot;job&quot;); 
output(2, xStream, person); 
//</em>/<em>/</em>/<em>/</em>/<em>/</em> 设置类成员为xml一个元素上的属性 /<em>/</em>/<em>/</em>/<em>/</em>/<em>/ 
xStream.useAttributeFor(Address.class, &quot;zipcode&quot;); 
//</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em> 设置属性的别名 /<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/ 
xStream.aliasAttribute(test.Address.class, &quot;zipcode&quot;, &quot;Zipcode&quot;); 
output(3, xStream, person); 
//</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em> 将xml转为java对象 /<em>/</em>/<em>/</em>/<em>/</em>×/<em>/</em>/<em>/</em>/ 
String person_xml = &quot;<PERSON>\n&quot; + 
&quot; <Name>熔岩</Name>\n&quot; + 
&quot; <age>27</age>\n&quot; + 
&quot; <PROFILE>\n&quot; + 
&quot; <Job>软件工程师</Job>\n&quot; + 
&quot; <tel>13512129933</tel>\n&quot; + 
&quot; <remark>备注说明</remark>\n&quot; + 
&quot; </PROFILE>\n&quot; + 
&quot; <ADDLIST>\n&quot; + 
&quot; <ADDRESS Zipcode=\"450001\">\n&quot; + 
&quot; <Add>郑州市经三路</Add>\n&quot; + 
&quot; </ADDRESS>\n&quot; + 
&quot; <ADDRESS Zipcode=\"710002\">\n&quot; + 
&quot; <Add>西安市雁塔路</Add>\n&quot; + 
&quot; </ADDRESS>\n&quot; + 
&quot; </ADDLIST>\n&quot; + 
&quot;</PERSON>&quot;; 
String profile_xml = &quot; <PROFILE>\n&quot; + 
&quot; <Job>软件工程师</Job>\n&quot; + 
&quot; <tel>13512129933</tel>\n&quot; + 
&quot; <remark>备注说明</remark>\n&quot; + 
&quot; </PROFILE>&quot;; 
String address_xml = &quot; <ADDRESS Zipcode=\"710002\">\n&quot; + 
&quot; <Add>西安市雁塔路</Add>\n&quot; + 
&quot; </ADDRESS>&quot;; 
//同样实用上面的XStream对象xStream 
System.out.println(xStream.fromXML(person_xml).toString()); 
System.out.println(xStream.fromXML(profile_xml).toString()); 
System.out.println(xStream.fromXML(address_xml).toString()); 
} 
public static void output(int i, XStream xStream, Object obj) { 
String xml = xStream.toXML(obj); 
System.out.println(&quot;&gt;&gt;&gt;第[ &quot; + i + &quot;]次输出\n&quot;); 
System.out.println(xml + &quot;\n&quot;); 
} 
} 
----------XStream学习:<a href="http://lavasoft.blog.51cto.com----------" target="_blank">http://lavasoft.blog.51cto.com----------</a> </p>
<blockquote>
<blockquote>
<blockquote>
<p>第[ 1]次输出 </p>
<p><PERSON> </p>
<p><name>熔岩</name> </p>
<p><age>27</age> </p>
<p><profile> </p>
<p><job>软件工程师</job> </p>
<p><tel>13512129933</tel> </p>
<p><remark>备注说明</remark> 
</profile> </p>
<p><addlist> </p>
<p><ADDRESS> </p>
<p><add>郑州市经三路</add> </p>
<p><zipcode>450001</zipcode> 
</ADDRESS> </p>
<p><ADDRESS> </p>
<p><add>西安市雁塔路</add> </p>
<p><zipcode>710002</zipcode> 
</ADDRESS> 
</addlist> 
</PERSON> 
第[ 2]次输出 </p>
<p><PERSON> </p>
<p><Name>熔岩</Name> </p>
<p><age>27</age> </p>
<p><PROFILE> </p>
<p><Job>软件工程师</Job> </p>
<p><tel>13512129933</tel> </p>
<p><remark>备注说明</remark> 
</PROFILE> </p>
<p><ADDLIST> </p>
<p><ADDRESS> </p>
<p><Add>郑州市经三路</Add> </p>
<p><zipcode>450001</zipcode> 
</ADDRESS> </p>
<p><ADDRESS> </p>
<p><Add>西安市雁塔路</Add> </p>
<p><zipcode>710002</zipcode> 
</ADDRESS> 
</ADDLIST> 
</PERSON> 
第[ 3]次输出 </p>
<p><PERSON> </p>
<p><Name>熔岩</Name> </p>
<p><age>27</age> </p>
<p><PROFILE> </p>
<p><Job>软件工程师</Job> </p>
<p><tel>13512129933</tel> </p>
<p><remark>备注说明</remark> 
</PROFILE> </p>
<p><ADDLIST> </p>
<p><ADDRESS Zipcode="450001"> </p>
<p><Add>郑州市经三路</Add> 
</ADDRESS> </p>
<p><ADDRESS Zipcode="710002"> </p>
<p><Add>西安市雁塔路</Add> 
</ADDRESS> 
</ADDLIST> 
</PERSON> 
Person{name=&#39;熔岩&#39;, age=&#39;27&#39;, profile=Profile{job=&#39;软件工程师&#39;, tel=&#39;13512129933&#39;, remark=&#39;备注说明&#39;}, addlist=[Address{add=&#39;郑州市经三路&#39;, zipcode=&#39;450001&#39;}, Address{add=&#39;西安市雁塔路&#39;, zipcode=&#39;710002&#39;}]} 
Profile{job=&#39;软件工程师&#39;, tel=&#39;13512129933&#39;, remark=&#39;备注说明&#39;} 
Address{add=&#39;西安市雁塔路&#39;, zipcode=&#39;710002&#39;} 
Process finished with exit code 0 
在实际中，类的属性很多，嵌套层次也很复杂，如果仅仅使用XStream原生API来硬编码设置别名等属性，显得太生硬也难以维护。完全可以考虑通过一个xml配置文件来定义所有用到的类的别名定义（包括其成员），然后，通过读取配置构建一个XStream的工厂，在用到时候直接去取，而不是让实用者组装。我目前的一个项目中，就是这么实现的，效果非常的好。 
下面我给出针对上面提出的问题一个解决方案： 
思想：考虑做一个过滤器，在xml转java之前，在Java转xml之后，应用这个过滤器。这个过滤器提供将xml中的“<strong>”替换为“-”，并且将xml中的不需要的节点剔除。 
在过滤之前，我实现了个转换器装配，这一步通过xml来配置，并在java中获取。 
代码就省略了，这一步很灵活，关键看你的应用了。 
为了能过滤xml，我们需要用Dom4j递归遍历xml文档。下面一些算法代码： 
//递归算法：遍历配置文件，找出所有有效的xpath 
private static void recursiveElement(Element element) { 
List<Element> elements = element.elements(); 
validXPathList.add(element.getPath()); 
if (elements.size() == 0) { 
//没有子元素 
} else { 
//有子元素 
for (Iterator<Element> it = elements.iterator(); it.hasNext();) { 
//递归遍历 
recursiveElement(it.next()); 
} 
} 
} 
//递归算法：遍历xml，标识无效的元素节点 
private static void recursiveFixElement(Element element) { 
List<Element> elements = element.elements(); 
if (!validXPathList.contains(element.getPath())) { 
element.addAttribute(&quot;delete&quot;, &quot;true&quot;); 
} 
if (elements.size() == 0) { 
//没有子元素 
} else { 
//有子元素 
for (Iterator<Element> it = elements.iterator(); it.hasNext();) { 
Element e = it.next(); 
if (!validXPathList.contains(e.getPath())) { 
e.addAttribute(&quot;delete&quot;, &quot;true&quot;); 
} 
//递归遍历 
recursiveFixElement(e); 
} 
} 
} 
//<em>/</em> 
/<em> 过滤器接口方法，转换不规范字符，剔除无效节点 
/</em> 
/<em> @param xmlStr 要过滤的xml 
/</em> @return 符合转换器要求的xml 
/*/ 
public static String filter(String xmlStr) { 
Document document = null; 
try { 
document = DocumentHelper.parseText(xmlStr.replaceAll(&quot;</strong>&quot;, &quot;_&quot;)); 
//递归的调用：标记要剔除的xml元素 
recursiveFixElement(document.getRootElement()); 
List<Node> nodeList = document.selectNodes(&quot;//@delete&quot;); 
for (Node node : nodeList) { 
node.getParent().detach(); //剔除xml元素 
} 
} catch (DocumentException e) { 
System.out.println(e.getMessage()); 
e.printStackTrace(); 
} 
return document.asXML(); 
} </p>
</blockquote>
</blockquote>
</blockquote>
<p>-</p>
<p><strong>Tags：</strong><a href="http://img.jb51.net/tag/XStream/1.htm" title="搜索关于XStream的文章" target="_blank">XStream</a> <a href="http://img.jb51.net/tag/%CA%B5%C0%FD/1.htm" title="搜索关于实例的文章" target="_blank">实例</a>
<a href="&quot;复制本文链接发给你QQ/MSN上的好友&quot;">复制链接</a><a href="">收藏本文</a><a href="">打印本文</a><a href="">关闭本文</a><a href="http://www.jb51.net/index.htm" target="_blank">返回首页</a> </p>
<p>上一篇：<a href="http://www.jb51.net/article/13684.htm" title="下载完成后页面不自动关闭的方法" target="_blank">下载完成后页面不自动关闭的方法</a></p>
<p>下一篇：<a href="http://www.jb51.net/article/27084.htm" target="_blank">java+sql2005 随机抽取试题的代码</a>
<a href="http://s.jb51.net/"></a></p>
<h2 id="-">相关文章</h2>
<ul>
<li><a href="http://www.jb51.net/article/16686.htm" title="java struts常见错误以及原因分析" target="_blank">java struts常见错误以及原因分析</a></li>
<li><a href="http://www.jb51.net/article/2657.htm" title="指南：想成为一个JSP网站程序员吗？" target="_blank">指南：想成为一个JSP网站程序员吗？</a></li>
<li><a href="http://www.jb51.net/article/2544.htm" title="实例讲解JSP Model2体系结构（上）" target="_blank">实例讲解JSP Model2体系结构（上）</a></li>
<li><a href="http://www.jb51.net/article/16653.htm" title="jsp JFreeChart使用心得与例子" target="_blank">jsp JFreeChart使用心得与例子</a></li>
<li><a href="http://www.jb51.net/article/2665.htm" title="JSP的内部对象" target="_blank">JSP的内部对象</a></li>
<li><a href="http://www.jb51.net/article/16478.htm" title="jsp Hibernate入门教程" target="_blank">jsp Hibernate入门教程</a></li>
<li><a href="http://www.jb51.net/article/2572.htm" title="使用JavaBean创建您的网上日历本(2)" target="_blank">使用JavaBean创建您的网上日历本(2)</a></li>
<li><a href="http://www.jb51.net/article/13160.htm" title="jsp中文乱码 jsp mysql 乱码的解决方法" target="_blank">jsp中文乱码 jsp mysql 乱码的解决方法</a>
<strong>友情提醒</strong>：本站文件的解压密码：<a href="http://www.jb51.net" target="_blank">www.jb51.net</a> (请使用最新的winrar)<a href="http://www.tuidc.com/" title="腾佑科技"></a></li>
</ul>
<h2 id="-">文章评论</h2>
<p>共有 <strong>0 </strong> 位脚本之家网友发表了评论<a href="http://img.jb51.net/comment.asp?id=14542" target="_blank">我来说两句</a></p>
<p><a href="http://idc567.com/" target="_blank"></a>  <a href="http://www.geisnic.com/"></a></p>
<h3 id="-">最 近 更 新</h3>
<ul>
<li><a href="http://www.jb51.net/article/2800.htm" title="为Java应用程序添加退出事件响应" target="_blank">为Java应用程序添加退出事件响应</a></li>
<li><a href="http://www.jb51.net/article/2531.htm" title="我认为JSP有问题(下)" target="_blank">我认为JSP有问题(下)</a></li>
<li><a href="http://www.jb51.net/article/17863.htm" title="jsp 页面上图片分行输出小技巧" target="_blank">jsp 页面上图片分行输出小技巧</a></li>
<li><a href="http://www.jb51.net/article/2527.htm" title="JSP教程(五)-JSP Actions的使用下" target="_blank">JSP教程(五)-JSP Actions的使用下</a></li>
<li><a href="http://www.jb51.net/article/2618.htm" title="也谈用JSP实现新郎、sohu新闻系统的技术。" target="_blank">也谈用JSP实现新郎、sohu新闻系统的技术。</a></li>
<li><a href="http://www.jb51.net/article/2770.htm" title="Java开源项目Hibernate" target="_blank">Java开源项目Hibernate</a></li>
<li><a href="http://www.jb51.net/article/2470.htm" title="一个可以防止刷新的JSP计数器" target="_blank">一个可以防止刷新的JSP计数器</a></li>
<li><a href="http://www.jb51.net/article/2712.htm" title="面向对象编程,我的思想(5)" target="_blank">面向对象编程,我的思想(5)</a></li>
<li><a href="http://www.jb51.net/article/2510.htm" title="JAVA/JSP学习系列之二(Tomcat安装)" target="_blank">JAVA/JSP学习系列之二(Tomcat安装)</a></li>
<li><a href="http://www.jb51.net/article/5296.htm" title="JDBC板块精华整理20051226" target="_blank">JDBC板块精华整理20051226</a></li>
</ul>
<h3 id="-">热 点 排 行</h3>
<ul>
<li><a href="http://www.jb51.net/article/15792.htm" title="FCKeditor使用方法(FCKeditor_2.6.3)详细使用说明" target="_blank">FCKeditor使用方法(FCKeditor_2.</a></li>
<li><a href="http://www.jb51.net/article/15976.htm" title="struts2+spring+hibernate分页代码[比较多]" target="_blank">struts2+spring+hibernate分页代</a></li>
<li><a href="http://www.jb51.net/article/16653.htm" title="jsp JFreeChart使用心得与例子" target="_blank">jsp JFreeChart使用心得与例子</a></li>
<li><a href="http://www.jb51.net/article/21204.htm" title="搭建EXTJS和STRUTS2框架(ext和struts2简单实例)" target="_blank">搭建EXTJS和STRUTS2框架(ext和st</a></li>
<li><a href="http://www.jb51.net/article/6740.htm" title="jsp生成静态页面的方法" target="_blank">jsp生成静态页面的方法</a></li>
<li><a href="http://www.jb51.net/article/13388.htm" title="Jsp页面实现文件上传下载类代码" target="_blank">Jsp页面实现文件上传下载类代码</a></li>
<li><a href="http://www.jb51.net/article/15974.htm" title="一个实用的JSP分页代码" target="_blank">一个实用的JSP分页代码</a></li>
<li><a href="http://www.jb51.net/article/6742.htm" title="JSP连接Access数据库" target="_blank">JSP连接Access数据库</a></li>
<li><a href="&quot;XStream使用方法总结附实例代码&quot;">XStream使用方法总结附实例代码</a></li>
<li><a href="http://www.jb51.net/article/16437.htm" title="response.setHeader参数、用法的介绍" target="_blank">response.setHeader参数、用法的</a></li>
</ul>
<h3 id="js-css-">Js与CSS工具</h3>
<ul>
<li><a href="http://www.jb51.net/tools/cssyasuo.shtml" target="_blank">CSS在线压缩格式化(中文)</a></li>
<li><a href="http://www.codebeautifier.com/" target="_blank">css 格式化整理工具(英文)</a></li>
<li><a href="http://www.jb51.net/csstidy/css_optimiser.php?lang=zh" target="_blank">CSS整形格式化</a></li>
<li><a href="http://tools.jb51.net/tools/js_geshihua.asp" target="_blank">JavaScript 格式化整理工具</a></li>
<li><a href="http://jsbeautifier.org/" target="_blank">jsbeautifier Js格式化整理工具(英文)</a></li>
<li><a href="http://www.phpformatter.com/" target="_blank">php 格式化整理工具(英文)</a></li>
<li><a href="http://www.jb51.net/tools/html-js.htm" target="_blank">HTML/JS互相转换工具</a></li>
<li><a href="http://www.jb51.net/tools/packer.htm" target="_blank">javascript pack加密压缩工具</a></li>
<li><a href="http://www.jb51.net/tools/jsmin/index.htm" target="_blank">JS Minifier压缩</a></li>
<li><a href="http://www.jb51.net/tools/JShunxiao.htm" target="_blank">JS混淆工具</a></li>
<li><a href="http://www.jb51.net/tools/js_Debug.htm" target="_blank">在线JS脚本校验器错误</a></li>
<li><p><a href="http://tools.jb51.net/tools/regex.asp" target="_blank">JavaScript 正则表达式在线测试工具</a></p>
<h3 id="-">代码转换工具</h3>
</li>
<li><p><a href="http://www.jb51.net/tools/base64.htm" target="_blank">Base64编码加密</a></p>
</li>
<li><a href="http://tools.jb51.net//tools/Escape.asp" target="_blank">Escape加解密</a></li>
<li><a href="http://tools.jb51.net/html_ubb.asp" target="_blank">HTML/UBB代码转换</a></li>
<li><a href="http://www.jb51.net/tools/fanjianzhi.htm" target="_blank">GB2312/BIG5繁简字转换</a></li>
<li><a href="http://www.jb51.net/tools/jingdian.shtml" target="_blank">经典小工具集 数字转换</a></li>
<li><a href="http://www.jb51.net/tools/htmlto.htm" target="_blank">HTML多功能代码转换器</a></li>
<li><a href="http://www.jb51.net/tools/xunleijm.htm" target="_blank">迅雷快车加/解密</a></li>
<li><a href="http://tools.jb51.net/tools/pinyin.asp" target="_blank">汉字转换拼音</a>
<a href="http://www.enkj.com/" target="_blank"></a> <a href="http://www.tuidc.com/"></a></li>
</ul>
<p><a href="http://www.xunbiz.com/click/click.asp?str=44717c87b8d8fc3a3e18797345b90434"></a></p>
<p>-</p>
<ul>
<li><a href="http://www.jb51.net/tools/cssyasuo.shtml" target="_blank">CSS在线压缩格式化(中文)</a></li>
<li><a href="http://www.codebeautifier.com" target="_blank">css 格式化整理工具(英文)</a></li>
<li><a href="http://www.jb51.net/csstidy/css_optimiser.php?lang=zh" target="_blank">CSS整形格式化</a></li>
<li><a href="http://tools.jb51.net/tools/js_geshihua.asp" target="_blank">JavaScript 格式化整理工具</a></li>
<li><a href="http://jsbeautifier.org" target="_blank">jsbeautifier Js格式化整理工具(英文)</a></li>
<li><a href="http://www.phpformatter.com" target="_blank">php 格式化整理工具(英文)</a></li>
<li><a href="http://www.jb51.net/tools/html-js.htm" target="_blank">HTML/JS互相转换工具</a></li>
<li><a href="http://www.jb51.net/tools/packer.htm" target="_blank">javascript pack加密压缩工具</a></li>
<li><a href="http://www.jb51.net/tools/jsmin/index.htm" target="_blank">JS Minifier压缩</a></li>
<li><a href="http://www.jb51.net/tools/JShunxiao.htm" target="_blank">JS混淆工具</a></li>
<li><a href="http://www.jb51.net/tools/js_Debug.htm" target="_blank">在线JS脚本校验器错误</a></li>
<li><p><a href="http://tools.jb51.net/tools/regex.asp" target="_blank">JavaScript 正则表达式在线测试工具</a></p>
</li>
<li><p><a href="http://www.jb51.net/tools/base64.htm" target="_blank">Base64编码加密</a></p>
</li>
<li><a href="http://tools.jb51.net//tools/Escape.asp" target="_blank">Escape加解密</a></li>
<li><a href="http://tools.jb51.net/html_ubb.asp" target="_blank">HTML/UBB代码转换</a></li>
<li><a href="http://www.jb51.net/tools/fanjianzhi.htm" target="_blank">GB2312/BIG5繁简字转换</a></li>
<li><a href="http://www.jb51.net/tools/jingdian.shtml" target="_blank">经典小工具集 数字转换</a></li>
<li><a href="http://www.jb51.net/tools/htmlto.htm" target="_blank">HTML多功能代码转换器</a></li>
<li><a href="http://www.jb51.net/tools/xunleijm.htm" target="_blank">迅雷快车加/解密</a></li>
<li><a href="http://tools.jb51.net/tools/pinyin.asp" target="_blank">汉字转换拼音</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--XStream使用方法总结附实例代码_JSP编程_脚本之家/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--XStream使用方法总结附实例代码_JSP编程_脚本之家" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--XStream学习笔记-枫情的Blog-BlogJava/">XStream 学习笔记 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--XStream学习笔记-枫情的Blog-BlogJava/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="xstream-blog-blogjava">XStream 学习笔记 - 枫情的Blog - BlogJava</h1>
<p>  <a href="http://www.blogjava.net/zlkn2005/" target="_blank">枫情的Blog</a>
程序员不光有自己的程序还有自己的生活。 风雨情     ### 常用链接</p>
<ul>
<li><a href="http://www.blogjava.net/zlkn2005/MyPosts.html" target="_blank">我的随笔</a></li>
<li><a href="http://www.blogjava.net/zlkn2005/MyComments.html" target="_blank">我的评论</a></li>
<li><a href="http://www.blogjava.net/zlkn2005/OtherPosts.html" target="_blank">我的参与</a></li>
<li><a href="http://www.blogjava.net/zlkn2005/RecentComments.html" target="_blank">最新评论</a></li>
</ul>
<h3 id="-1-">留言簿(1)</h3>
<ul>
<li><a href="http://www.blogjava.net/zlkn2005/Contact.aspx?id=1" target="_blank">给我留言</a></li>
<li><a href="http://www.blogjava.net/zlkn2005/default.aspx?opt=msg" target="_blank">查看公开留言</a></li>
<li><a href="http://www.blogjava.net/zlkn2005/admin/MyMessages.aspx" target="_blank">查看私人留言</a></li>
</ul>
<h1 id="-">随笔档案</h1>
<ul>
<li><a href="http://www.blogjava.net/zlkn2005/archive/2005/12.html" target="_blank">2005年12月 (1)</a></li>
</ul>
<h1 id="-msn-">我MSN的个人空间</h1>
<ul>
<li><a href="http://spaces.msn.com/members/zlkn2005/" target="_blank">枫情之家</a></li>
</ul>
<h3 id="-">搜索</h3>
<p>*</p>
<ul>
<li></li>
</ul>
<h3 id="-">积分与排名</h3>
<ul>
<li>积分 - 3689</li>
<li>排名 - 2224</li>
</ul>
<h3 id="-http-www-blogjava-net-zlkn2005-commentsrss-aspx-">最新评论 <a href="http://www.blogjava.net/zlkn2005/CommentsRSS.aspx" target="_blank"><img src="" alt=""></a></h3>
<ul>
<li><a href="http://www.blogjava.net/zlkn2005/archive/2008/05/12/24240.html#200051" target="_blank">1. re: XStream 学习笔记</a></li>
<li>评论内容较长,点击标题查看</li>
<li>--jadar</li>
<li><a href="http://www.blogjava.net/zlkn2005/archive/2008/03/03/24240.html#183462" target="_blank">2. re: XStream 学习笔记</a></li>
<li>呵呵.在JAVA里面,INT类型的变量本来默认值就是0,你没有给它值,它也会默认将0作为这个变量的初始值....@xmlspy2004</li>
<li>--心无痕</li>
<li><a href="http://www.blogjava.net/zlkn2005/archive/2005/12/19/24240.html#24616" target="_blank">3. re: XStream 学习笔记</a></li>
<li>评论内容较长,点击标题查看</li>
<li>--xmlspy2004</li>
<li><a href="http://www.blogjava.net/zlkn2005/archive/2005/12/16/24240.html#24242" target="_blank">4. re: XStream 学习笔记</a></li>
<li>好</li>
<li>--fanta
Powered by: <a href="http://www.cnblogs.com/" target="_blank">博客园</a>
模板提供：<a href="http://blog.hjenglish.com/" target="_blank">沪江博客</a> <a href="http://www.blogjava.net/" target="_blank">BlogJava</a> | <a href="http://www.blogjava.net/zlkn2005/" target="_blank">首页</a> | <a href="http://www.blogjava.net/zlkn2005/admin/EditPosts.aspx?opt=1" target="_blank">发新随笔</a> | <a href="http://www.blogjava.net/EnterMyBlog.aspx?NewArticle=1" target="_blank">发新文章</a> | <a href="http://www.blogjava.net/zlkn2005/contact.aspx?id=1" target="_blank">联系</a> | <a href="http://www.blogjava.net/zlkn2005/rss" target="_blank">聚合</a><a href="http://www.blogjava.net/zlkn2005/rss" target="_blank"><img src="" alt=""></a> | <a href="http://www.blogjava.net/zlkn2005/admin/EditPosts.aspx" target="_blank">管理</a></li>
</ul>
<h1 id="-xstream-"><a href="">XStream 学习笔记</a></h1>
<p><strong>XStream</strong></p>
<p><strong>使用XStream**</strong>的初衷**</p>
<p>研究和使用XStream的原因是我在项目中的一个预研。在项目中需要应用到对XML文件的管理和配置，因此需要一个能够将对象保存为XML的工具库，在这里有多种方法实现，我也研究并进行了比对，比如与Zeus工具的比对，与Java自身的XML工具库的比对等。在这里，我就描述下我的XStream学习过程和研究结果。</p>
<p><strong>XStream**</strong>简单介绍**</p>
<p>XStream是一个开源项目，一套简单实用的类库，用于序列化对象与XML对象之间的相互转换。将XML文件内容解析为一个对象或将一个对象序列化为XML文件。</p>
<p>XStream可以用于JDK1.3以上的版本使用，我是在JDK1.5下使用它的。</p>
<p>XStream的相关信息可以到<a href="http://xstream.codehaus.org/下查看，它有专门的JavaDoc，可以方便的阅读Xstream的函数及方法。" target="_blank">http://xstream.codehaus.org/下查看，它有专门的JavaDoc，可以方便的阅读Xstream的函数及方法。</a></p>
<p>XStream中主要的类为XStream，它用于序列化对象与XML 对象之间的相互转换。简单的使用它就可以解决很多问题。</p>
<p>XStream中主要的方法也是我用的比较多的是fromXML()和toXML()。</p>
<p>fromXML用于从XML中将对象解析出来。</p>
<p>toXML用于将对象序列化为XML文件。</p>
<p>在XStream中我还使用HierarchicalStreamWriter，HierarchicalStreamReader，createObjectInputStream()，createObjectOutputStream()，主要是用于对象的输入输出。</p>
<p>下面我们来研究下XStream的工作方式。</p>
<p><strong>XStream**</strong>的实例——将一个序列化对象转化为XML<strong>**对象。</strong></p>
<p>一，创建XStream对象。</p>
<p>XStream xstream=new XStream();</p>
<p>用默认构造器构造了一个名为xstream的XStream的对象。默认构造器所使用XML解析库为Xpp3库，XPP3是一种运行效率非常高的XML全解析实现。</p>
<p>二，创建需要序列化的对象。</p>
<p>比如这个类就叫PrintUnit。</p>
<p>构造也比较简单，一个简单的JavaBean</p>
<pre><code>   public class PrintUnit

   {

          Private String a;

          Private String b;

          Private String c;



          Public PrintUnit(){}



          Public setA(String a)

          {

                 this.a=a;

          }



          Public getA()

          {

                 return a;

          }



          Public setB(String b)

          {

                 this.b=b;

          }



          Public getB()

          {

                 return b;

          }



          Public setC(String c)

          {

                 This.c=c;

          }



          Public getC()

          {

                 Return c;

          }

   }
</code></pre><p>在例子中使用这个JavaBean。</p>
<p>创建并初始化PrintUnit。</p>
<p>PrintUnit pu=new PrintUnit();</p>
<p>pu.setA(&quot;A11&quot;);</p>
<p>pu.setB(&quot;B22&quot;);</p>
<p>pu.setC(&quot;C33&quot;);</p>
<p>三，创建Writer。</p>
<p>创建一个输出流，至于怎么输出我发现可以使用多种方法，其实原理是一样的。</p>
<p>在这里就不得不提到HierarchicalStreamWriter,HierarchicalStreamWriter是一个接口，从字面上意思来说它是有等级的输入流。同样在XStream中也有不少这个接口的实现类用于输出。我现在所用过的有CompactWriter和PrettyPrintWriter这2个。</p>
<p>我是这样做的：</p>
<p>String str=&quot;stream.xml&quot;; //本目录下的一个名为stream的XML文件</p>
<p>PrintWriter pw=new PrintWriter(str);//创建一个PrintWriter对象，用于输出。</p>
<p>之后选用一个HierarchicalStreamWriter的实现类来创建输出。</p>
<p>选用CompactWriter创建：</p>
<p>CompactWriter cw=new CompactWriter(pw);</p>
<p>选用PrettyPrintWriter创建：</p>
<p>PrettyPrintWriter ppw=new PrettyPrintWriter(pw);</p>
<p>两者所使用的方法都是很简单的。</p>
<p>CompactWriter与PrettyPrintWriter的区别在于，以CompactWriter方法输出的为连续的没有分隔的XML文件，而用PrettyPrintWriter方法输出的为有分隔有一定格式的XML文件。</p>
<p>以CompactWriter方式生成的XML文件：</p>
<object-stream><PrintUnit><a>A11</a><b>B22</b><c>C33</c></PrintUnit></object-stream>



以PrettyPrintWriter方式生成的XML文件：

       <object-stream>

             <PrintUnit>

                  <a>A11</a>

                  <b>B22</b>

                  <c>C33</c>

             </PrintUnit>

       </object-stream>



       我想大家能很容易的分辨出它们的差异。



       四，输出操作<br>
以上步骤完成后就可以做输出操作了，XStream的输出方式有多种：toXML方式，ObjectOutputStream方式，marshal方式以及一些我尚未发现的一些其它方式。

先说下我所使用的方式它们各自的不同点，从工作原理上说它们是相似的，但是做法各不相同。

toXML()方法，本身toXML的方法就有2种：

第一种:java.lang.String toXML(java.lang.Object obj)

将对象序列化为XML格式并保存到一个String对象中。

第二种:void toXML(java.lang.Object obj, java.io.Writer out)

将对象序列化为XML格式后以Writer输出到某个地方存储。

我所使用的是第二种方式，使用前面已经做好的Pw就可以实现输出，它其实很简单不需要再去做其它定义，只需要一个PrintWriter对象和需要序列化的Object即可。

直接调用xstream.toXML(printUnit,pw);就能输出XML文件,在这里是输出到该目录下的stream.xml中。这里的输出都是覆盖性的，不是末尾添加形式。

使用ObjectOutputStream方式，简单说它就是生成一个对象输出流。

ObjectOutputStream obj<em>out = xstream.createObjectOutputStream(ppw);

使用XStream的createObjectOutputStream方法创建一个ObjectOutputStream对象，用于XML的输出。这里使用的是PrettyPrintWriter的方式。   之后调用writerObject方法既可，使用方法与其它输出流类似。

obj_out.writeObject(pu);

obj_out.close();

使用marshal方式，其实marshal方法和toXML方法是相同的。在调用toXML方法进行输出时，在XStream内部是需要调用marshal方法的，然后它再去调用对象marshallingStrategy的marshal方法。所以做toXML其实和marshal是相同的，在这里只是想更加说明它的工作方式。



使用 void marshal(java.lang.Object obj, HierarchicalStreamWriter writer)方法。

延续上面的例子，在这里可以这样写：xstream.marshal(pu,ppw);



需要注意的是，和toXML不同的是参数，一个是PrintWriter对象一个则是PrettyPrintWriter对象。因为marshal中需要

HierarchicalStreamWriter，而PrettyPrintWriter则是实现了HierarchicalStreamWriter接口的实现类。



结果和toXML是相同的。



五，结果：

       <object-stream>

             <PrintUnit>

                  <a>A11</a>

                  <b>B22</b>

                  <c>C33</c>

             </PrintUnit>

       </object-stream>



经过以上5步的操作既可将一个序列化对象转化为XML对象。





<strong>toXML**</strong>内部调用图：<strong>

</strong> <strong>

<img src="" alt="XStream.gif">toXML操作时的内部调用图，自己随意画的。有些没有详细说明。





</strong>XStream<strong><strong>的实例——将XML</strong></strong>文件转化为一个对象<strong>



通过上面的一个例子不难看出XStream简便性，既然有了输出就一定会有输入。

输入方我们将会使用ObjectInputStream。

与输出相同我们需要有一个XStream对象，暂且名为xstream。之后需要读取的XML文件地址目录信息。沿用上面的例子。

String inputStr=&quot;xstream.xml&quot;;

XStream xstream=new XStream();

我们需要通过对象流进行输入操作，所以需要FileReader和BufferedReader。

FileReader fr=new FileReader(inputStr);

BufferedReader br=new BufferedReader(fr);

创建对象输入流

ObjectInputStream obj_input=xstream.createObjectInputStream(br);

创建对象，还是使用PrintUnit这个对象。

PrintUnit pu2;

通过ObjectInputStream中的readObject()方法将对象从XML文件中读取出来。

pu2=(PrintUnit)obj_input.readObject();

获取值：

System.out.println(pu2.getB());

控制台：

B22 



从整个输入的过程来看，是一个文件的读取，将其中的对象数据取出来，然后再对这个对象数据进行操作。内容也比较简单通过ObjectInputStream输入对象。

通过以上的输入输出例子，我想大家应该很容易就能理解XStream是如何实现的。



</strong>FomXML<strong>



上面使用的是以ObjectInputStream的方式进行XML与对象之间进行转换的。下面我将使用XStream中的fromXML（）方法进行转换。

首先在使用fromXML我发现一个问题，它必须使用正确的解析方式或输出方式对应的输入方式才可以正常解析读取文件，这个问题有点怪，不过确实存在，当我使用前面ObjectOutputStream方式输出的XML文件,用fromXML（）解析读取时，它会报错。

错误信息：

Exception in thread &quot;main&quot; com.thoughtworks.xstream.alias.CannotResolveClassException: object$stream : object$stream

信息内容为：不能解析这个文件。我认为它和输出方式有关，因为上面例子中使用的是ObjectOutputStream，当我反过来做了一个实验后也证明了这一点。

实验大致内容：使用toXML()方法输出XML文件，使用ObjectInputStream解析，发现会在读取的时候抛出CannotResolveClassException异常。

错误信息：

Exception in thread &quot;main&quot; com.thoughtworks.xstream.alias.CannotResolveClassException:

a : a

       因此我认为在解析文件的时候必须先要确定这个文件是由什么方式生成的，然后在解析它，对于使用Dom,Dom4j,XPP等不同方式解析尚未尝试。以上测试是在默认的基础上实验的，默认为XPP3的解析器。



       使用fromXML的方法。



       public java.lang.Object fromXML(java.lang.String xml)

       public java.lang.Object fromXML(java.io.Reader xml)

public java.lang.Object fromXML(java.lang.String xml,java.lang.Object root)

public java.lang.Object fromXML(java.io.Reader xml,java.lang.Object root)



例子：

       PrintUnit puTwo=(PrintUnit)xstream.fromXML(xml);



这里的xml必须是使用toXML()生成出来的。对于Reader没有太多的要求。





</strong>XStream<strong><strong>与</strong></strong>Java.Bean<strong><strong>中</strong></strong>XML<strong><strong>工具的比较**</strong></strong>



       XStream主要作用是将序列化的对象转化为一个XML文件或将XML文件解析为一个对象。当然并非只有它可以做到，很多其它工具一样可以，在Java中存在这样两个类XMLDecoder和XMLEncoder，它们是在Java.Bean包下的，它们的作用是将JavaBean转化为XML或将XML文件转化为一个Java Bean。

       XMLDecoder是通过一个输入流将对象从输入流中取出并转化为一个实例的方法。它所需要的就是一个输入流及一个转化过程。



       XMLDecoder的实例：



       String fileStr=”xstream.xml”;//XML文件，在本目录下，延用上次使用文件。

       ObjectInputStream in=new ObjectInputStream(new FileInputStream(fileStr));//创建一个ObjectInputStream用于输入。

       XMLDecoder xmld=new XMLDecoder(in);//创建一个XMLDecoder对象。

       延用前面所使用PrintUnit这个Bean。

       PrintUnit pu=(PrintUnit)xmld.readObject();//通过XMLDecoder中的readObject方法获得PrintUnit对象。

如果获取到了这个对象那么pu中将有它的值a=A11,b=B22,c=C33。整个过程最好放try

…catch中去，能够捕获一些如：文件不存在等异常。

       从操作方式上看XMLDecoder似乎不比XStream差多少，同样是可以通过ObjectInputStream获取XML文件中的对象。它们的差异就是解析的方式不同，XMLDecoder是使用Java自带的XML解析方式，而XStream则是可以自定义的，它可以使用多中方式进行解析。这些是我个人所发现的一些不同点。



       XMLEncoder是通过一个输出流将对象序列化并输出为XML文件。它所需要的是一个输出流及一个输出方式。



       XMLEncoder的实例：



       String fileStr=”xstream.xml”;//定义一个输入的目标文件。

       ObjectOutputStream out=new ObjectOutputStream(new FileOutputStream(fileStr));//创建一个对象输出流。

       XMLEncoder xmle=new XMLEncoder(out);//创建一个XMLEncoder对象。

       延用前面所使用PrintUnit这个Bean。

//创建并初始化PrintUnit对象。

PrintUnit pu=new PrintUnit();

pu.setA(“AAA”);

pu.setB(“BBB”);

pu.setC(“CCC”);



       xmle.writeObject(pu);//使用XMLEncode的writeObject方法输出pu

       xmle.flush();//刷新

       xmle.close();//关闭输出流



       从上面的代码不难看出，使用XMLEncode方式将对象序列化并输出也是很方便的，简单调用writeObject方法能将普通Bean输出为XML文件。



       XML文件的内容：



�</em> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

<java version="1.5.0" class="java.beans.XMLDecoder">

 <object class="test.PrintUnit">

  <void property="a">

   <string>AAA</string>

  </void>

  <void property="b">

   <string>BBB</string>

  </void>

  <void property="c">

   <string>CCC</string>

  </void>

 </object>

<p>w   </java></p>
<pre><code>   不知道是我哪里没有处理，还是实际并不是像我想象的哪么简单，使用XMLEncoder所输出的XML文件中有一定的问题，虽然它很详细，比起XStream所生成的更多，包括了XML和Java的版本看上去更像是个完整的XML文件，不过再细看它们两生成的XML格式内容，完全不同，这个我想就是它们最大的区别。这让我想到了很多内容：工作方式，解析器，转换方式等。大家有没发现在开始和结束都存在一些乱码数据，难道在XMLEncoder输出过程中或数据转换中内容已经存在“脏”数据了？还是我所使用的输出方式存在问题？哎…一个又一个问题出现了。我想我需要再进一步的研究和学习才能得到答案。

   不过尽管有这个那个的问题，使用Java本身自带的XML工具还是一样很实用的，读取和输出一样可用，操作也很灵活。因此我觉得在某些场合使用特定的工具可能会更好，利用XMLEncoder和XMLDecoder同样可以解决一些问题。
</code></pre><p>我的这个使用XMLDecoder和XMLEncoder的序列化格式输出暂研究到这里。
枫情·太子爷
2005年12月16日</p>
<p>发表于 2005-12-16 16:22 <a href="http://www.blogjava.net/zlkn2005/" target="_blank">枫情·太子爷</a> 阅读(3625) <a href="http://www.blogjava.net/zlkn2005/archive/2005/12/16/24240.html#Post" target="_blank">评论(4)</a>  <a href="http://www.blogjava.net/zlkn2005/admin/EditPosts.aspx?postid=24240" target="_blank">编辑</a>  <a href="http://www.blogjava.net/zlkn2005/AddToFavorite.aspx?id=24240" target="_blank">收藏</a></p>
<p><img src="" alt=""></p>
<p><a href=""></a></p>
<p><a href=""></a></p>
<p><a href="">评论</a></p>
<p><a href=""></a></p>
<p><a href=""></a></p>
<p><a href=""></a><a href="http://www.blogjava.net/zlkn2005/archive/2005/12/16/24240.html#24242" title="permalink: re: XStream 学习笔记">/#</a> <a href=""></a>re: XStream 学习笔记  <a href="http://www.blogjava.net/zlkn2005/archive/2005/12/16/24240.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=fanta" title="查看该作者发表过的评论" target="_blank">更多评论</a>  <a href=""></a>  <a href=""></a>
好</p>
<p><a href="http://www.blogjava.net/fanscial/" target="_blank">fanta</a> 评论于 2005-12-16 16:45
<a href="http://www.blogjava.net/zlkn2005/archive/2005/12/16/24240.html#24616" title="permalink: re: XStream 学习笔记" target="_blank">/#</a> <a href=""></a>re: XStream 学习笔记  <a href="http://www.blogjava.net/zlkn2005/archive/2005/12/16/24240.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=xmlspy2004" title="查看该作者发表过的评论" target="_blank">更多评论</a>  <a href=""></a>  <a href=""></a></p>
<p>还有很多问题，比如：
当bean的字段为int类型，如果这个字段没有值，它默认输出是0
而实际应用中我们需要的是<intField></intField>.
类似的问题还很多，都需要你去处理。
但处理来处理去，你会发现，自己做的修改很多，还不如自己手动写xml的String。
<a href="">xmlspy2004</a> 评论于 2005-12-19 12:42</p>
<p><a href="http://www.blogjava.net/zlkn2005/archive/2005/12/16/24240.html#183462" title="permalink: re: XStream 学习笔记" target="_blank">/#</a> <a href=""></a>re: XStream 学习笔记  <a href="http://www.blogjava.net/zlkn2005/archive/2005/12/16/24240.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=%e5%bf%83%e6%97%a0%e7%97%95" title="查看该作者发表过的评论" target="_blank">更多评论</a>  <a href=""></a>  <a href=""></a></p>
<p>呵呵.在JAVA里面,INT类型的变量本来默认值就是0,你没有给它值,它也会默认将0作为这个变量的初始值....@xmlspy2004
<a href="http://www.blogjava.net/xinwuhen/" target="_blank">心无痕</a> 评论于 2008-03-03 14:39
<a href="http://www.blogjava.net/zlkn2005/archive/2005/12/16/24240.html#200051" title="permalink: re: XStream 学习笔记" target="_blank">/#</a> <a href=""></a>re: XStream 学习笔记<a href=""></a>  <a href="http://www.blogjava.net/zlkn2005/archive/2005/12/16/24240.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=jadar" title="查看该作者发表过的评论" target="_blank">更多评论</a>  <a href=""></a>  <a href=""></a></p>
<p>出现：Exception in thread &quot;main&quot; com.thoughtworks.xstream.alias.CannotResolveClassException:
的可能原因是:调用xStream.alias(&quot;PrintUnit &quot;,PrintUnit.class) 时写错了，
尤其是第一个参数，要跟xml中的大小写一致！
good Luck！
<a href="">jadar</a> 评论于 2008-05-12 16:52</p>
<p><a href="http://www.blogjava.net/RequireRegister.aspx" target="_blank">新用户注册</a>  <a href="">刷新评论列表</a><br><a href=""></a> <a href="http://job.cnblogs.com/">找优秀程序员，就在博客园</a>
<a href="http://job.cnblogs.com/offer/12368/" target="_blank">网易有道诚聘CRM研发工程师</a>
<a href="http://job.cnblogs.com/offer/11576/" target="_blank">锦江国际诚聘Java高级软件工程师</a>
<a href="http://job.cnblogs.com/offer/12493/" target="_blank">福州几维网络诚聘Java服务端程序员</a>
IT新闻：
· <a href="http://news.cnblogs.com/n/103732/" target="_blank">百度LOGO控烟日变脸：李彦宏签名倡导无烟</a>
· <a href="http://news.cnblogs.com/n/103731/" target="_blank">高毛利驱动线上线下T恤战：B2C卖19元成本10元</a>
· <a href="http://news.cnblogs.com/n/103730/" target="_blank">美女子森林中用iPhone意外拍到大脚野人视频</a>
· <a href="http://news.cnblogs.com/n/103727/" target="_blank">欧盟延长2起并购案交易审查期限：涉及希捷等</a>
· <a href="http://news.cnblogs.com/n/103726/" target="_blank">联通呼吁成立操作系统联盟 三大运营商有望联手</a>   <a href="http://www.cnblogs.com/" target="_blank">博客园</a>  <a href="http://home.cnblogs.com/q/" target="_blank">博问</a>  <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>  <a href="http://job.cnblogs.com/cate-java_programmer/" target="_blank">Java程序员招聘</a> 标题  请输入标题 姓名  请输入你的姓名 主页 请输入验证码 验证码 /*  <img src="" alt=""> 内容(请不要发表任何与政治相关的内容) 请输入评论内容 Remember Me?   <a href="http://www.blogjava.net/login.aspx?ReturnURL=http://www.blogjava.net/zlkn2005/archive/2005/12/16/24240.html&amp;SourceURL=/zlkn2005/archive/2005/12/16/24240.html" target="_blank">登录</a>       [使用Ctrl+Enter键可以直接提交]    推荐职位：
· <a href="http://job.cnblogs.com/offer/12638/" target="_blank">[急聘] ASP.NET 软件高级开发工程师(北京网笑信息)</a>
· <a href="http://job.cnblogs.com/offer/11670/" target="_blank">ASP.NET中高级软件工程师(联展壹步科技)</a>
· <a href="http://job.cnblogs.com/offer/13073/" target="_blank">中高级前端网页设计师(联展壹步科技)</a>
· <a href="http://job.cnblogs.com/offer/11671/" target="_blank">网页美工设计(联展壹步科技)</a>
· <a href="http://job.cnblogs.com/offer/5914/" target="_blank">北京.NET 研发工程师 (北京捷报数据)</a>
· <a href="http://job.cnblogs.com/offer/12527/" target="_blank">(北京).NET软件开发工程师(北京龙达)</a>
· <a href="http://job.cnblogs.com/offer/11584/" target="_blank">厦门高级.NET软件工程师(服务于美国Amazon)</a>
· <a href="http://job.cnblogs.com/offer/10723/" target="_blank">高级Web页面前端开发工程师(新蛋中国)</a></p>
<p>博客园首页随笔：
· <a href="http://www.cnblogs.com/TextEditor/archive/2011/05/31/2063172.html" target="_blank">一个网站的诞生- MagicDict开发总结5 [检索候补列表的生成]</a>
· <a href="http://www.cnblogs.com/guozili/archive/2011/05/31/2063957.html" target="_blank">基于Silverlight的快速开发框架RapidSL之开源</a>
· <a href="http://www.cnblogs.com/twodays/archive/2011/05/31/whats-new-in-mango-for-dev-3.html" target="_blank">你不可不知的Mango — 开发者篇（3）</a>
· <a href="http://www.cnblogs.com/Wendy_Yu/archive/2011/05/31/2063720.html" target="_blank">巧用Silverlight之Path</a>
· <a href="http://www.cnblogs.com/lhb25/archive/2011/05/31/2056103.html" target="_blank">60款很酷的 jQuery 幻灯片演示和下载</a>
知识库：
· <a href="http://kb.cnblogs.com/page/100991/" target="_blank">谁做了程序员眼中的程序员</a>
· <a href="http://kb.cnblogs.com/page/100468/" target="_blank">复杂是大敌</a>
· <a href="http://kb.cnblogs.com/page/100657/" target="_blank">告诉你一些DBA求职面试技巧</a>
· <a href="http://kb.cnblogs.com/page/100350/" target="_blank">模型驱动开发 —在RUP与Agile之间找到平衡点</a>
· <a href="http://kb.cnblogs.com/page/103569/" target="_blank">总结一下领域模型的验证（附代码下载）</a> 最简洁阅读版式：
<a href="http://archive.cnblogs.com/b/24240/" target="_blank">XStream 学习笔记</a> 网站导航:</p>
<p><a href="http://www.cnblogs.com/" title="程序员的网上家园" target="_blank">博客园</a>   <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>   <a href="http://kb.cnblogs.com/" target="_blank">知识库</a>   <a href="http://www.cnweblog.com/" target="_blank">博客生活</a>   <a href="http://www.cnitblog.com/" target="_blank">IT博客网</a>   <a href="http://www.cppblog.com/" target="_blank">C++博客</a>   <a href="http://space.cnblogs.com/q/" title="IT问答" target="_blank">博问</a>   <a href="http://www.blogjava.net/zlkn2005/archive/2005/12/16/24240.html?opt=admin" target="_blank">管理</a>   </p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--XStream学习笔记-枫情的Blog-BlogJava/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--XStream学习笔记-枫情的Blog-BlogJava" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/27/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/25/">25</a></li><li><a class="page-number" href="/page/26/">26</a></li><li><a class="page-number" href="/page/27/">27</a></li><li class="active"><li><span class="page-number current">28</span></li><li><a class="page-number" href="/page/29/">29</a></li><li><a class="page-number" href="/page/30/">30</a></li><li><a class="page-number" href="/page/31/">31</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/29/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 15:12:18</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
