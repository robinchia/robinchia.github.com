
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 89 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-CAS--UseJavascriptRedirection-CASUserManual-Jas/">Use Javascript Redirection </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-CAS--UseJavascriptRedirection-CASUserManual-Jas/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="use-javascript-redirection-cas-user-manual-jasig-wiki">Use Javascript Redirection - CAS User Manual - Jasig Wiki</h1>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#title-heading" target="_blank">Skip to content</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#breadcrumbs" target="_blank">Skip to breadcrumbs</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#header-menu-bar" target="_blank">Skip to header menu</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#navigation" target="_blank">Skip to action menu</a></li>
<li><p><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#quick-search-query" target="_blank">Skip to quick search</a>
Quick Search</p>
</li>
<li><p><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#" target="_blank">Browse</a></p>
</li>
<li><p><a href="https://wiki.jasig.org/pages/listpages.action?key=CASUM" title="Browse pages in the CAS User Manual space ( Type &#39;g&#39; then &#39;s" target="_blank">Pages</a>&quot;)</p>
</li>
<li><a href="https://wiki.jasig.org/pages/viewrecentblogposts.action?key=CASUM" title="Browse blogs in the CAS User Manual space" target="_blank">Blog</a></li>
<li><a href="https://wiki.jasig.org/labels/listlabels-heatmap.action?key=CASUM" title="Browse labels in the CAS User Manual space" target="_blank">Labels</a></li>
<li><a href="https://wiki.jasig.org/spaces/listattachmentsforspace.action?key=CASUM" title="Browse attachments in the CAS User Manual space" target="_blank">Attachments</a></li>
<li><a href="https://wiki.jasig.org/mail/archive/viewmailarchive.action?key=CASUM" title="Browse mail in the CAS User Manual space" target="_blank">Mail</a></li>
<li><a href="https://wiki.jasig.org/spaces/viewspacesummary.action?key=CASUM" title="Browse additional space functions in the CAS User Manual space" target="_blank">Advanced</a></li>
<li><p><a href="https://wiki.jasig.org/spaces/usage/report.action?key=CASUM" target="_blank">Activity</a></p>
</li>
<li><p><a href="http://docs.atlassian.com/confluence/docs-41/whatsnew/iframe" target="_blank">What’s New</a></p>
</li>
<li><a href="https://wiki.jasig.org/spacedirectory/view.action" title="Browse the Confluence space directory" target="_blank">Space Directory</a></li>
<li><a href="https://wiki.jasig.org/dashboard/configurerssfeed.action" title="Create your custom RSS feed." target="_blank">Feed Builder</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#" title="View available keyboard shortcuts ( Type &#39;?" target="_blank">Keyboard Shortcuts</a>&quot;)</li>
<li><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#" title="Browse gadgets provided by Confluence" target="_blank">Confluence Gadgets</a></li>
<li><a href="https://wiki.jasig.org/login.action?os_destination=%2Fdisplay%2FCASUM%2FUse%2BJavascript%2BRedirection" target="_blank">Log In</a></li>
<li><a href="https://wiki.jasig.org/signup.action" target="_blank">Sign Up</a></li>
</ul>
<ol>
<li><a href="https://wiki.jasig.org/dashboard.action" title="Go to Dashboard ( Type &#39;g&#39; then &#39;d" target="_blank">Dashboard</a>&quot;)</li>
<li><a href="https://wiki.jasig.org/display/CASUM" target="_blank">CAS User Manual</a></li>
<li><strong>…</strong></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Navigation" target="_blank">Navigation</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Advanced+Topics" target="_blank">Advanced Topics</a></li>
<li><a href="">Use Javascript Redirection</a></li>
</ol>
<ul>
<li><p><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#" target="_blank">Tools</a></p>
</li>
<li><p><a href="https://wiki.jasig.org/pages/viewpageattachments.action?pageId=12157004" title="View Attachments ( Type &#39;t" target="_blank">Attachments (0)</a>&quot;)</p>
</li>
<li><a href="https://wiki.jasig.org/pages/viewpreviousversions.action?pageId=12157004" target="_blank">Page History</a></li>
<li><p><a href="https://wiki.jasig.org/pages/viewinfo.action?pageId=12157004" title="Edit restrictions" target="_blank">Restrictions</a></p>
</li>
<li><p><a href="https://wiki.jasig.org/pages/viewinfo.action?pageId=12157004" target="_blank">Info</a></p>
</li>
<li><a href="https://wiki.jasig.org/pages/viewinfo.action?pageId=12157004" title="Link to this Page ( Type &#39;k" target="_blank">Link to this Page…</a>&quot;)</li>
<li><a href="https://wiki.jasig.org/pages/listpages-dirview.action?key=CASUM&amp;openId=12157004#selectedPageInHierarchy" target="_blank">View in Hierarchy</a></li>
<li><a href="https://wiki.jasig.org/plugins/viewsource/viewpagesrc.action?pageId=12157004" target="_blank">View Source</a></li>
</ul>
<h1 id="-use-javascript-redirection-"><a href="">Use Javascript Redirection</a></h1>
<p><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#page-metadata-end" target="_blank">Skip to end of metadata</a></p>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#" title="Page restrictions apply. Click the lock icon to view or edit the restriction." target="_blank">Page restrictions apply</a></li>
<li>Added by <a href="https://wiki.jasig.org/display/~dale77" target="_blank">Dale Ogilvie</a>, last edited by <a href="https://wiki.jasig.org/display/~dale77" target="_blank">Dale Ogilvie</a> on Apr 30, 2008  (<a href="https://wiki.jasig.org/pages/diffpages.action?pageId=12157004&amp;originalId=52495846" target="_blank">view change</a>)</li>
<li><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#" target="_blank">show comment</a> <a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#" target="_blank">hide comment</a>
<strong>Comment:</strong> Corrected links that should have been relative instead of absolute.
<a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#page-metadata-start" target="_blank">Go to start of metadata</a>   Table of Contents</li>
</ul>
<h3 id="-home-https-wiki-jasig-org-display-casum-home-"><a href="https://wiki.jasig.org/display/CASUM/Home" target="_blank">Home</a></h3>
<h3 id="-overall-architecture-https-wiki-jasig-org-display-casum-overall-architecture-"><a href="https://wiki.jasig.org/display/CASUM/Overall+Architecture" target="_blank">Overall Architecture</a></h3>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/Building+and+Deploying" target="_blank">Building and Deploying</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Development" target="_blank">Development</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Introduction" target="_blank">Introduction</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Java+Versions" target="_blank">Java Versions</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Releasing" target="_blank">Releasing</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Spring+Configuration" target="_blank">Spring Configuration</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Technical+Overview" target="_blank">Technical Overview</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Upgrading" target="_blank">Upgrading</a></li>
</ul>
<h3 id="-authentication-https-wiki-jasig-org-display-casum-authentication-"><a href="https://wiki.jasig.org/display/CASUM/Authentication" target="_blank">Authentication</a></h3>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/Active+Directory" target="_blank">Active Directory</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Generic" target="_blank">Generic</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/JAAS" target="_blank">JAAS</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/JDBC" target="_blank">JDBC</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/LDAP" target="_blank">LDAP</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Legacy" target="_blank">Legacy</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/RADIUS" target="_blank">RADIUS</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/SPNEGO" target="_blank">SPNEGO</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Trusted" target="_blank">Trusted</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/X.509+Certificates" target="_blank">X.509 Certificates</a></li>
</ul>
<h3 id="-authentication-managers-https-wiki-jasig-org-display-casum-authentication-managers-"><a href="https://wiki.jasig.org/display/CASUM/Authentication+Managers" target="_blank">Authentication Managers</a></h3>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/Default+AuthenticationManager" target="_blank">Default AuthenticationManager</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Direct+Mapping+AuthenticationManager" target="_blank">Direct Mapping AuthenticationManager</a></li>
</ul>
<h3 id="-security-policy-https-wiki-jasig-org-display-casum-security-policy-"><a href="https://wiki.jasig.org/display/CASUM/Security+Policy" target="_blank">Security Policy</a></h3>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/Ticket+Expiration+Policy" target="_blank">Ticket Expiration Policy</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Remember+Me" target="_blank">Remember Me</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Throttling+Login+Attempts" target="_blank">Throttling Login Attempts</a></li>
</ul>
<h3 id="-ticketregistry-https-wiki-jasig-org-display-casum-ticketregistry-"><a href="https://wiki.jasig.org/display/CASUM/TicketRegistry" target="_blank">TicketRegistry</a></h3>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/BerkleyDB" target="_blank">BerkleyDB</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Default" target="_blank">Default</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/EhcacheTicketRegistry" target="_blank">EhcacheTicketRegistry</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/JBOSS+TreeCache" target="_blank">JBOSS TreeCache</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/JDBCTicketRegistry" target="_blank">JDBCTicketRegistry</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/JpaTicketRegistry" target="_blank">JpaTicketRegistry</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/MemcacheTicketRegistry" target="_blank">MemcacheTicketRegistry</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/TicketRegistry+Cleaner" target="_blank">TicketRegistry Cleaner</a></li>
</ul>
<h3 id="-testing-https-wiki-jasig-org-display-casum-testing-"><a href="https://wiki.jasig.org/display/CASUM/Testing" target="_blank">Testing</a></h3>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/Apache+JMeter" target="_blank">Apache JMeter</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Java+HttpComponents+Based+Test+Class" target="_blank">Java HttpComponents Based Test Class</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Nagios+plugins" target="_blank">Nagios plugins</a></li>
</ul>
<h3 id="-protocols-https-wiki-jasig-org-display-casum-protocols-"><a href="https://wiki.jasig.org/display/CASUM/Protocols" target="_blank">Protocols</a></h3>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/Add+Your+Custom+Protocol" target="_blank">Add Your Custom Protocol</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Applications+that+Require+POST+Responses" target="_blank">Applications that Require POST Responses</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/CAS" target="_blank">CAS</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/OAuth" target="_blank">OAuth</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/OpenID" target="_blank">OpenID</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/RESTful+API" target="_blank">RESTful API</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/SAML+1.1" target="_blank">SAML 1.1</a></li>
<li><a href="https://wiki.jasig.org/pages/viewpage.action?pageId=6063484" target="_blank">SAML 2.0 (Google Accounts Integration)</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Single+Sign+Out" target="_blank">Single Sign Out</a></li>
</ul>
<h3 id="-advanced-topics-https-wiki-jasig-org-display-casum-advanced-topics-"><a href="https://wiki.jasig.org/display/CASUM/Advanced+Topics" target="_blank">Advanced Topics</a></h3>
<ul>
<li><a href="https://wiki.jasig.org/pages/viewpage.action?pageId=13570204" target="_blank">Adding &quot;Public Workstation&quot; vs. &quot;Private Workstation&quot; Timeouts</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Auditing+and+Statistics+Via+Inspektr" target="_blank">Auditing and Statistics Via Inspektr</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Internationalization" target="_blank">Internationalization</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/LDAP+Password+Policy+Enforcement" target="_blank">LDAP Password Policy Enforcement</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Second-Level+CAS+Server" target="_blank">Second-Level CAS Server</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Terracotta" target="_blank">Terracotta</a></li>
<li><a href="">Use Javascript Redirection</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Deployment+Scenarios" target="_blank">Deployment Scenarios</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Acceptable+Use+interface+for+Login+Webflow" target="_blank">Acceptable Use interface for Login Webflow</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Change+Password+Integration+With+Jasig+CAS+3.4.7" target="_blank">Change Password Integration With Jasig CAS 3.4.7</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Localization" target="_blank">Localization</a></li>
</ul>
<h3 id="-tutorials-and-howtos-https-wiki-jasig-org-display-casum-tutorials-and-howtos-"><a href="https://wiki.jasig.org/display/CASUM/Tutorials+and+HOWTOs" target="_blank">Tutorials and HOWTOs</a></h3>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/CAS+on+Windows+Quick+Setup+Guide" target="_blank">CAS on Windows Quick Setup Guide</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Clustering+CAS" target="_blank">Clustering CAS</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Demo" target="_blank">Demo</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/HOWTO+Configure+JBoss+for+HTTPS" target="_blank">HOWTO Configure JBoss for HTTPS</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/HOWTO+Configure+Single+Sign+On+Session+Timeout" target="_blank">HOWTO Configure Single Sign On Session Timeout</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/HOWTO+Setup+Dual+Authentication+in+CAS+-+SSL+Client+Auth+and+LDAP" target="_blank">HOWTO Setup Dual Authentication in CAS - SSL Client Auth and LDAP</a></li>
<li><a href="https://wiki.jasig.org/pages/viewpage.action?pageId=10650669" target="_blank">HOWTO Setup LDAP GSSAPI+Kerberos Authentication in CAS</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/HOWTO+Switch+to+Sun+JVM+in+RHEL" target="_blank">HOWTO Switch to Sun JVM in RHEL</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/End-to-end+Windows+Example" target="_blank">End-to-end Windows Example</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/HOWTO+Use+Jasypt+to+encrypt+passwords+in+configuration+files" target="_blank">HOWTO Use Jasypt to encrypt passwords in configuration files</a></li>
<li><a href="https://wiki.jasig.org/pages/viewpage.action?pageId=47874068" target="_blank">HOWTO utilize javax.servlet.http.HttpServletRequest isUserInRole( java.lang.String role )</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Migrating+an+existing+CAS+server+installation" target="_blank">Migrating an existing CAS server installation</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Best+Practice+-+Setting+Up+CAS+Locally+using+the+Maven2+WAR+Overlay+Method" target="_blank">Best Practice - Setting Up CAS Locally using the Maven2 WAR Overlay Method</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Deploying+CAS+3.0.x+in+RHEL+5+with+Sun+Java" target="_blank">Deploying CAS 3.0.x in RHEL 5 with Sun Java</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/HOWTO+CASifying+ASP.NET+WebApp+-+ExampleWebsite" target="_blank">HOWTO CASifying ASP.NET WebApp - ExampleWebsite</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/HOWTO+Configure+CAS+for+LDAP+DIGEST-MD5" target="_blank">HOWTO Configure CAS for LDAP DIGEST-MD5</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/HOWTO+Run+Canoo+Web+Tests" target="_blank">HOWTO Run Canoo Web Tests</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Shibboleth-CAS+Integration" target="_blank">Shibboleth-CAS Integration</a></li>
</ul>
<h3 id="-troubleshooting-https-wiki-jasig-org-display-casum-troubleshooting-"><a href="https://wiki.jasig.org/display/CASUM/Troubleshooting" target="_blank">Troubleshooting</a></h3>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/Logging" target="_blank">Logging</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/SSL+Troubleshooting+and+Reference+Guide" target="_blank">SSL Troubleshooting and Reference Guide</a></li>
</ul>
<h3 id="-services-management-https-wiki-jasig-org-display-casum-services-management-"><a href="https://wiki.jasig.org/display/CASUM/Services+Management" target="_blank">Services Management</a></h3>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/Adding+a+New+Service" target="_blank">Adding a New Service</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Attributes" target="_blank">Attributes</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Configuring" target="_blank">Configuring</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Deleting" target="_blank">Deleting</a></li>
<li><a href="https://wiki.jasig.org/display/CASUM/Editing" target="_blank">Editing</a></li>
</ul>
<h3 id="-extensions-https-wiki-jasig-org-display-casum-extensions-"><a href="https://wiki.jasig.org/display/CASUM/Extensions" target="_blank">Extensions</a></h3>
<ul>
<li><a href="https://wiki.jasig.org/display/CASUM/ClearPass" target="_blank">ClearPass</a>
When redirecting from the https CAS application back to an http service after authenticating successfully, IE6 presents the user with a security dialog saying &quot;you are about to be redirected to a connection that is not secure, do you really want to do this?&quot;. We can avoid this by using javascript to perform the redirection in the client browser, instead of a server side redirect. This approach works fine for web pages, but does not work for protected image content, which will not execute the returned javascript, so we revert to a serverside redirect for this type of content.</li>
</ul>
<ol>
<li>Create WEB-INF/view/jsp/default/ui/redirect.jsp to perform the redirection using javascript
<a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#" target="_blank">?</a>&lt;%</li>
</ol>
<p>@page</p>
<p>import</p>
<p>=</p>
<p>&quot;org.jasig.cas.authentication.principal.WebApplicationService&quot;</p>
<p>%&gt;</p>
<p>&lt;%</p>
<p>@page</p>
<p>import</p>
<p>=</p>
<p>&quot;org.jasig.cas.web.support.WebUtils&quot;</p>
<p>%&gt;
&lt;%</p>
<p>@page</p>
<p>import</p>
<p>=</p>
<p>&quot;java.net.URL&quot;</p>
<p>%&gt;</p>
<p>&lt;%
WebApplicationService service = (WebApplicationService) request.getAttribute(</p>
<p>&quot;service&quot;</p>
<p>);</p>
<p>String ticket  = (String) request.getAttribute(</p>
<p>&quot;serviceTicketId&quot;</p>
<p>);
String redirectURL = service.getResponse(ticket).getUrl();</p>
<p>boolean</p>
<p>serverSideRedirect =</p>
<p>false</p>
<p>;
// if redirect is for an image, js or css file</p>
<p>URL url =</p>
<p>new</p>
<p>URL(redirectURL);
String path = url.getPath();</p>
<p>int</p>
<p>dotPos = path.lastIndexOf(</p>
<p>&quot;.&quot;</p>
<p>);</p>
<p>// returns -1 if not found
if</p>
<p>( dotPos != -</p>
<p>1</p>
<p>)</p>
<p>{</p>
<p>String ext = path.substring(dotPos).toLowerCase();</p>
<p>serverSideRedirect =</p>
<p>&quot;.gif&quot;</p>
<p>.equals(ext) ||</p>
<p>&quot;.jpg&quot;</p>
<p>.equals(ext) ||</p>
<p>&quot;.png&quot;</p>
<p>.equals(ext) ||</p>
<p>&quot;.js&quot;</p>
<p>.equals(ext) ||</p>
<p>&quot;.css&quot;</p>
<p>.equals(ext);
}</p>
<p>if</p>
<p>( serverSideRedirect )
{</p>
<p>// Serverside redirect using HTTP 302</p>
<p>response.sendRedirect(redirectURL);</p>
<p>}
else</p>
<p>{</p>
<p>// Client side redirect using javascript</p>
<p>%&gt;
&lt;!DOCTYPE html PUBLIC</p>
<p>&quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;</p>
<p>&quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" target="_blank"><a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd</a>&quot;</a></p>
<p>&gt;</p>
<html xmlns=

"[http://www.w3.org/1999/xhtml"](http://www.w3.org/1999/xhtml)

>


<head>



<script type=

"text/javascript"

language=

"javascript"

>


<!--



window.location.replace (

"<%=redirectURL%>"

);


-->



</script>


<title>Redirect</title>



</head>


<body></body>

<p></html>
&lt;%</p>
<p>}
%&gt;</p>
<ol>
<li>Make a redirect view available to CAS by adding it to WEB-INF/classes/default_view.properties</li>
</ol>
<p><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#" target="_blank">?</a>/#/#/# Redirect view (logged in, javascript redirect to service)</p>
<p>redirectView.(</p>
<p>class</p>
<p>)=org.springframework.web.servlet.view.JstlView
redirectView.url=/WEB-INF/view/jsp/</p>
<p>default</p>
<p>/ui/redirect.jsp</p>
<ol>
<li>Modify WEB-INF/login-webflow.xml to make the redirect end state use the new view</li>
</ol>
<p><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#" target="_blank">?</a>&lt;end-state id=</p>
<p>&quot;redirect&quot;</p>
<p>view=</p>
<p>&quot;redirectView&quot;</p>
<p>/&gt;</p>
<p>Labels:</p>
<p>None</p>
<p><a href="https://wiki.jasig.org/display/CASUM/Use+Javascript+Redirection#" title="Edit Labels ( Type &#39;l" target="_blank">Edit Labels</a>&quot;)
Powered by a free <strong>Atlassian Confluence Open Source Project License</strong> granted to Java Architectures Special Interest Group. <a href="http://www.atlassian.com/c/conf/11461" target="_blank">Evaluate Confluence today</a>.
This Confluence installation runs a Free Gliffy License - <a href="http://www.gliffy.com/products/confluence-plugin/" target="_blank">Evaluate Gliffy</a> for your Wiki!</p>
<ul>
<li>Powered by <a href="http://www.atlassian.com/software/confluence" target="_blank">Atlassian Confluence</a> 4.1.5, the <a href="http://www.atlassian.com/software/confluence/tour/enterprise-wiki.jsp" target="_blank">Enterprise Wiki</a></li>
<li>Printed by Atlassian Confluence 4.1.5, the Enterprise Wiki.</li>
<li>·  <a href="http://jira.atlassian.com/secure/BrowseProject.jspa?id=10470" target="_blank">Report a bug</a></li>
<li>·  <a href="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" target="_blank">Atlassian News</a></li>
</ul>
<p><a href=""></a><a href=""></a><a href=""></a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/CAS/">CAS</a></li></span></span> | <span class="tags">Tagged <a href="/tags/CAS/" class="label label-primary">CAS</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-CAS--UseJavascriptRedirection-CASUserManual-Jas/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-CAS--UseJavascriptRedirection-CASUserManual-Jas" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-CAS--casclient使用指南-老老-ITeye技术网站/">cas client使用指南 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-CAS--casclient使用指南-老老-ITeye技术网站/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="cas-client-iteye-">cas client使用指南 - 老老 - ITeye技术网站</h1>
<p><a href="http://www.iteye.com/" target="_blank">首页</a> <a href="http://www.iteye.com/news" target="_blank">资讯</a> <a href="http://www.iteye.com/magazines" target="_blank">精华</a> <a href="http://www.iteye.com/forums" target="_blank">论坛</a> <a href="http://www.iteye.com/ask" target="_blank">问答</a> <a href="http://www.iteye.com/blogs" target="_blank">博客</a> <a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a> <a href="http://www.iteye.com/groups" target="_blank">群组</a> <a href="http://lvyanglin.iteye.com/blog/618081#" target="_blank">更多 ▼</a></p>
<p><a href="http://www.iteye.com/job" target="_blank">招聘</a> <a href="http://www.iteye.com/search" target="_blank">搜索</a></p>
<p><a href="http://lvyanglin.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://lvyanglin.iteye.com/login" target="_blank">登录</a> <a href="http://lvyanglin.iteye.com/signup" target="_blank">注册</a></p>
<h1 id="-http-lvyanglin-iteye-com-"><a href="http://lvyanglin.iteye.com/" target="_blank">老老</a></h1>
<ul>
<li><a href="http://lvyanglin.iteye.com/" target="_blank"><strong>博客</strong></a></li>
<li><a href="http://lvyanglin.iteye.com/weibo" target="_blank">微博</a></li>
<li><a href="http://lvyanglin.iteye.com/album" target="_blank">相册</a></li>
<li><a href="http://lvyanglin.iteye.com/link" target="_blank">收藏</a></li>
<li><a href="http://lvyanglin.iteye.com/blog/guest_book" target="_blank">留言</a></li>
<li><a href="http://lvyanglin.iteye.com/blog/profile" target="_blank">关于我</a></li>
</ul>
<h3 id="-cas-client-"><a href="">cas client使用指南</a> **</h3>
<p><strong>博客分类：</strong></p>
<ul>
<li><a href="http://lvyanglin.iteye.com/category/67638" target="_blank">java</a>
<a href="http://www.iteye.com/blogs/tag/%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8" target="_blank">企业应用</a><a href="http://www.iteye.com/blogs/tag/SSO" target="_blank">SSO</a><a href="http://www.iteye.com/blogs/tag/SQL%20Server" target="_blank">SQL Server</a><a href="http://www.iteye.com/blogs/tag/%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8" target="_blank">应用服务器</a><a href="http://www.iteye.com/blogs/tag/Spring" target="_blank">Spring</a> </li>
</ul>
<p>2008-02-27
JA-SIG（CAS）学习笔记3
关键字: cas sso 统一身份认证 java ja-sig
技术背景知识：
  JA-SIG CAS服务环境搭建，请参考 ：JA-SIG（CAS）学习笔记1 
  JA-SIG CAS业务架构介绍，请参考 ：JA-SIG（CAS）学习笔记2
  HTTPS所涉及的Java安全证书知识，请参考 ：Java  keytool 安全证书学习笔记
CAS技术框架
  CAS  Server
    目前，我们使用的CAS Server 3.1.1的是基于Spring Framework编写的，因此在CAS服务器端的配置管理中，绝大多数是Spring式的Java Bean XML配置。CAS 的服务器提供了一套易于定制的用户认证器接口，用户可以根据自身企业的在线系统的认证方式，来定制自己的认证逻辑。不论是传统的用户名/密码方式，还是基于安全证书的方式；是基于关系数据库的存储，还是采用LDAP服务器，CAS  Server给我们提供了这些常用的验证器模板代码，只要稍作修改，便可灵活使用了。
    对于广大的中国企业用户而言，另一个需要定制的功能莫过于全中文、企业特色的用户身份认证页面了。CAS Server提供了两套系统界面，一套是默认的CAS英文标准页面，另一套则是专门提供给用户来定制修改的。（PS：老外们做事情就是人性化啊~~）那么对CAS Server端的后续学习，我们将围绕着身份认证模块定制和界面定制这两方面展开。
  CAS  Client
    客户端我们使用的是CAS Client 2.1.1。虽然在官方网站上已出现了3.1.0版本的下载，但该版本地代码已经完全重写，使用的package和类名同2.1.1大相径庭了，最关键的是，该版本暂时没有对应的API说明文档。虽然咖啡我对程序版本怀有极大的“喜新厌旧”的心态，但安全起见，还是先2.1.1吧，相信3.1.0的文档耶鲁大学的大牛们已经在整理了，期待中……
CAS Client2.1.1.jar中的代码是相当精炼的，有兴趣的朋友建议阅读一下源码。Jar包中的代码分成三个大部分</p>
<ol>
<li>edu.yale.its.tp.cas.util 包，其中只有一个工具类 SecureURL.java 用来访问HTTPS URL</li>
<li>edu.yale.its.tp.cas.proxy包，用来处理Proxy Authentication代理认证的3个类，其中ProxyTicketReceptor.java是 接收PGT回调的servlet，在下文中我们会提及。</li>
<li>edu.yale.its.tp.cas.client包，其中包含了CAS Filter ，Tag Library等主要的认证客户端工具类，我们在后面会进行重点介绍。
针对CAS Client的学习，我们的重点将放在CAS Filter 和ProxyTicketReceptor 的配置以及在Java SE环境下，直接使用 ServiceTicketValidator进行Ticket认证实现上。
CAS服务器端应用
定制适合你的身份认证程序
通过前面的学习，我们了解了CAS具有一个良好而强大的SSO功能框架。接下来，我们要学习如何将实际企业应用中的身份认证同CAS进行整合。
简单的说，要将现有企业应用中的认证集成到CAS Server中，只要实现一个名为AuthenticationHandler的一个认证处理Java接口就行。以下是该接口的源代码：
Java代码
public interface AuthenticationHandler {<br>//<em>/</em> 
/<em> 该方法决定一个受支持的credentials是否是可用的， 
/</em> 如果可用，该方法返回true，则说明身份认证通过 
/<em>/ 
boolean  authenticate(Credentials credentials)  throws  AuthenticationException;<br>//</em>/<em> 
/</em> 该方法决定一个credentials是否是当前的handle所支持的 
/<em>/ 
boolean  supports(Credentials credentials);<br>} 
public interface AuthenticationHandler {
//</em>/<em>
/</em> 该方法决定一个受支持的credentials是否是可用的，
/<em> 如果可用，该方法返回true，则说明身份认证通过
/</em>/
boolean  authenticate(Credentials credentials)  throws  AuthenticationException;
//<em>/</em>
/<em> 该方法决定一个credentials是否是当前的handle所支持的
/</em>/
boolean  supports(Credentials credentials);
}
这里我们要说明一下Credentials这个CAS的概念。所谓Credentials是由外界提供给CAS来证明自身身份的信息，简单的如一个用户名/密码对就是一个Credentials，或者一个经过某种加密算法生成的密文证书也可以是一个Credentials。在程序的实现上，Credentials被声明为一个可序列化的接口，仅仅起着标识作用，源代码如下：
Java代码
public interface Credentials extends Serializable {<br>// marker interface contains no methods<br>} 
public interface Credentials extends Serializable {
// marker interface contains no methods
}
CAS的API中，已经为我们提供了一个最常用的实现UsernamePasswordCredentials  用户名/密码凭证，代码如下：
Java代码
public class UsernamePasswordCredentials implements Credentials {<br>//<em>/</em> Unique ID for serialization. /<em>/ 
private static final long serialVersionUID = -8343864967200862794L;<br>//</em>/<em> The username. /</em>/ 
private String username;<br>//<em>/</em> The password. /*/ 
private String password;<br>public final String getPassword() {<br>   return this.password;<br>}<br>public final void setPassword(final String password) {<br>   this.password = password;<br>}<br>public final String getUsername() {<br>   return this.username;<br>}<br>public final void setUsername(final String userName) {<br>   this.username = userName;<br>}<br>public String toString() {<br>   return this.username;<br>}<br>public boolean equals(final Object obj) {<br>   if (obj == null || !obj.getClass().equals(this.getClass())) {  <pre><code>   return false;  
</code></pre>   }<br>   final UsernamePasswordCredentials c = (UsernamePasswordCredentials) obj;<br>   return this.username.equals(c.getUsername())  <pre><code>   &amp;&amp; this.password.equals(c.getPassword());  
</code></pre>}<br>public int hashCode() {<br>   return this.username.hashCode() ^ this.password.hashCode();<br>}<br>} 
public class UsernamePasswordCredentials implements Credentials {
//<em>/</em> Unique ID for serialization. /<em>/
private static final long serialVersionUID = -8343864967200862794L;
//</em>/<em> The username. /</em>/
private String username;
//<em>/</em> The password. /*/
private String password;
public final String getPassword() {
   return this.password;
}
public final void setPassword(final String password) {
   this.password = password;
}
public final String getUsername() {
   return this.username;
}
public final void setUsername(final String userName) {
   this.username = userName;
}
public String toString() {
   return this.username;
}
public boolean equals(final Object obj) {
   if (obj == null || !obj.getClass().equals(this.getClass())) {<pre><code>   return false;
</code></pre>   }
   final UsernamePasswordCredentials c = (UsernamePasswordCredentials) obj;
   return this.username.equals(c.getUsername())<pre><code>   &amp;&amp; this.password.equals(c.getPassword());
</code></pre>}
public int hashCode() {
   return this.username.hashCode() ^ this.password.hashCode();
}
}
很简单不是吗？就是存储一个用户名和密码的java bean而已。
 接下来，我们将一个Credentials传给一个AuthenticationHandler进行认证，首先调用boolean  supports(Credentials credentials)方法察看当前传入的Credentials实例，AuthenticationHandler实例现是否支持它？如果支持，再调用boolean  authenticate(Credentials credentials)方法进行认证。由于用户名/密码方式是最常用的认证方法，因此CAS为我们提供了一个现成的基于该方式的抽象认证处理类AbstractUsernamePasswordAuthenticationHandler。通常我们只需要继承该类，并实现其中的    authenticateUsernamePasswordInternal方法即可。下面我们给出一个Demo的实现类，它的校验逻辑很简单——仅校验用户名的字符长度是否与密码的相等（这里密码是一个表示长度的整数），如果相等则认为认证通过，请看代码：
Java代码
public class UsernameLengthAuthnHandler  <pre><code>              extends AbstractUsernamePasswordAuthenticationHandler {  
</code></pre>protected boolean authenticateUsernamePasswordInternal( UsernamePasswordCredentials credentials)  throws AuthenticationException {<br>//<em><br>/</em> 这里我们完全可以用自己的认证逻辑代替，比如将用户名/密码传入一个SQL语句<br>/<em> 向数据库验证是否有对应的用户账号，这不是我们最经常干的事么？<br>/</em> 只需要将下面的程序替换掉就OK了！！So  easy，so  simple！<br>/<br>String username = credentials.getUsername();<br>String password = credentials.getPassword();<br>String correctPassword = Integer.toString(username.length());<br>return correctPassword.equals(password);<br>}<br>} 
public class UsernameLengthAuthnHandler<pre><code>              extends AbstractUsernamePasswordAuthenticationHandler {
</code></pre>protected boolean authenticateUsernamePasswordInternal( UsernamePasswordCredentials credentials)  throws AuthenticationException {
//<em>
/</em> 这里我们完全可以用自己的认证逻辑代替，比如将用户名/密码传入一个SQL语句
/<em> 向数据库验证是否有对应的用户账号，这不是我们最经常干的事么？
/</em> 只需要将下面的程序替换掉就OK了！！So  easy，so  simple！
/
String username = credentials.getUsername();
String password = credentials.getPassword();
String correctPassword = Integer.toString(username.length());
return correctPassword.equals(password);
}
}
介绍到这里，大家应该清楚如何定制自己的AuthenticationHandler类了吧！这里要附带说明的是，在CAS Server的扩展API中已经提供了大量常用认证形式的实现类，它们同CAS Server的war包一同分发：
cas-server-support-generic-3.1.1.jar ——使用Map记录用户认证信息的实现
cas-server-support-jdbc-3.1.1.jar —— 基于Spring JDBC的数据库实现（我们常用的）
cas-server-support-ldap-3.1.1.jar —— 基于LDAP的用户认证实现
更多其他形式的实现各位看官有兴趣的，可以一一阅读源码。
配置你的身份认证程序
完成了定制认证类的代码编写，接下来就是要让CAS Server来调用它了。在CAS的框架中，对程序的配置都是使用Spring Framework的xml文件，这对于熟悉Spring的程序员而言算驾轻就熟了。
配置文件位于应用部署目录的WEB-INF子目录下——deployerConfigContext.xml。在bean id=authenticationManager 的 authenticationHandlers属性中配置我们的AuthenticationHandlers：
引用
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:p="http://www.springframework.org/schema/p"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">
<bean id="authenticationManager"
class="org.jasig.cas.authentication.AuthenticationManagerImpl">
   。。。
   。。。
<property name="authenticationHandlers">
<list>
<bean class="org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler" p:httpClient-ref="httpClient" />
   &lt;!—下面就是系统默认的验证器配置，你可以替换它，或者增加一个新的handler --&gt;
<bean     class="org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler" />
</list>
</property>
</bean>
。。。
。。。
</beans>
我们发现authenticationHandlers属性是一个list，在这个list中可以配置多个AuthenticationHandlers。这些AuthenticationHandlers形成了一个验证器链，所有提交给CAS的Credentials信息将通过这个验证器链的链式过滤，只要这链中有一个验证器通过了对Credentials的验证，就认为这个Credentials是合法的。这样的设计使得我们可以很轻松的整合不同验证体系的已有应用到同一个CAS上，比如：A验证器负责校验alpha系统提交的Credentials，它是基于LDAP服务器的；B验证器负责校验beta系统提交的Credentials，它是一个传统的RDB用户表认证；C验证器负责校验gamma系统提交的基于RSA证书加密的Credentials。3种完全不同的用户身份认证通过配置就可以统一在同一个CAS服务内，很好很强大，不是吗！！
定制身份验证登录界面
 CAS Server在显示界面层view使用了“主题Theme”的概念。在{project.home}/webapp/WEB-INF/view/jsp/目录下，系统默认提供了两套得UI —— default和simple 。default方案使用了CSS等相对复杂得界面元素，而simple方案提供了最简化的界面表示方式。在整个的CAS Server服务器端，有四个界面是我们必须要实现的：
casConfirmView.jsp —— 确认信息（警告信息）页面
casGenericSuccess.jsp —— 登陆成功提示页面
casLoginView.jsp —— 登录输入页面
casLogoutView.jsp —— SSO登出提示页面
这些都是标准的jsp页面，如何实现他们，完全由您说了算，除了名字不能改。
CAS为view的展示提供了3个级别的定制方式，让我们从最直观简单的开始吧。
1． 采用文件覆盖方式：直接修改default中的页面或者将新写好的四个jsp文件覆盖到default目录中。这种方式最直观和简单，但咖啡建议各位在使用这种方式前将原有目录中的文件备份一下，以备不时之需。
2． 修改UI配置文件，定位UI目录：在CAS Server端/webapp/WEB-INF/classes/ 目录下，有一个名为default_views.properties的属性配置文件，你可以通过修改配置文件中的各个页面文件位置，指向你新UI文件，来达到修改页面展示的目的。
3． 修改配置文件的配置文件，这话看起来有点别扭，其实一点不难理解。在方法2中的default_views.properties文件是一整套的UI页面配置。如果我想保存多套的UI页面配置就可以写多个的properties文件来保存这些配置。在CAS Server端/webapp/WEB-INF/目录下有cas-servlet.xml和cas.properties两个文件，cas-servlet.xml使用了cas.properties文件中的cas.viewResolver.basename属性来定义view属性文件的名字，因此你可以选者直接修改cas-servlet.xml中的viewResolver 下的basenames属性，或者修改cas.properties中的cas.viewResolver.basename属性，指定新的properties文件名，这样可以轻松的替换全套UI。
CAS客户端配置及API应用
CASFilter的配置
对于大部分web应用而言，使用CAS集成统一认证是相对简单的事，只要为需要认证的URL配置edu.yale.its.tp.cas.client.filter.CASFilter认证过滤器。下面我们就针对过滤器的配置进行说明。首先参看一下Filter的基本配置：
引用
<web-app>
...
<filter>
<filter-name>CAS Filter</filter-name>
<filter-class>edu.yale.its.tp.cas.client.filter.CASFilter</filter-class>
<init-param>
  <param-name>edu.yale.its.tp.cas.client.filter.loginUrl</param-name>
  <param-value><a href="https://secure.its.yale.edu/cas/login" target="_blank">https://secure.its.yale.edu/cas/login</a>&lt;;/param-value&gt;
</init-param>
<init-param>
  <param-name>edu.yale.its.tp.cas.client.filter.validateUrl</param-name>
  <param-value><a href="https://secure.its.yale.edu/cas/serviceValidate" target="_blank">https://secure.its.yale.edu/cas/serviceValidate</a>&lt;;/param-value&gt;
</init-param>
<init-param>
  <param-name>edu.yale.its.tp.cas.client.filter.serverName</param-name>
  <param-value>your server name and port (e.g., www.yale.edu:8080)</param-value>
</init-param>
</filter>
<filter-mapping>
<filter-name>CAS Filter</filter-name>
<url-pattern>/requires-cas-authetication//<em></url-pattern>
</filter-mapping>
...
</web-app>
上述配置中的init-param是filter的3个必备的属性，下面这张表则是filter全部属性的详细说明：
ProxyTicketReceptor的配置
大家还记得在前面我们说过的Proxy Authentication中的call back URL吗？ProxyTicketReceptor是部署在client端的一个servlet，提供server端回传PGT和PGTIOU的。它的xml部署如下：
引用
<web-app>
...
<servlet>
<servlet-name>ProxyTicketReceptor</servlet-name>
<servlet-class>edu.yale.its.tp.cas.proxy.ProxyTicketReceptor</servlet-class>
<init-param>
  <param-name>edu.yale.its.tp.cas.proxyUrl</param-name>
  <param-value><a href="https://secure.its.yale.edu/cas/proxy" target="_blank">https://secure.its.yale.edu/cas/proxy</a>&lt;;/param-value&gt;
</init-param>
</servlet>
<servlet-mapping>
<servlet-name>ProxyTicketReceptor</servlet-name>
<url-pattern>/CasProxyServlet</url-pattern>
</servlet-mapping>
...
</webapp>
这里要说明的是它的参数edu.yale.its.tp.cas.proxyUrl。在服务端通过ProxyTicketReceptor将PGT和PGTIOU传给客户端后，ProxyTicketReceptor在进行Proxy Authentication的过程中需要向服务端请求一个ProxyTicket（PT），这个proxyUrl就是服务端的请求入口了。（关于Proxy Authentication的运作原理，参见JA-SIG（CAS）学习笔记2 ）
CAS Client端的API应用1．用户可以通过以下两种方式的任意一种，从JSP或servlet中获取通过认证的用户名：
引用
String username = (String)session.getAttribute(CASFilter.CAS_FILTER_USER);
或者
String username = (String)session.getAttribute(&quot;edu.yale.its.tp.cas.client.filter.user&quot;);
2．获得更完整的受认证用户信息对象CASReceipt Java Bean，可以使用以下语句的任一:
引用
CASReceipt  receipt = (CASReceipt )session.getAttribute(CASFilter.CAS_FILTER_RECEIPT);
或者
CASReceipt  receipt = (CASReceipt )session.getAttribute(&quot;edu.yale.its.tp.cas.client.filter.receipt&quot;);
3．手工编码使用CAS Java Object进行用户验证，使用ServiceTicketValidator或者 ProxyTicketValidator（代理认证模式下），在servlet中对用户身份进行验证。
3-1．ServiceTicketValidator
Java代码
import edu.yale.its.tp.cas.client./</em>;<br>...<br>String user = null;<br>String errorCode = null;<br>String errorMessage = null;<br>String xmlResponse = null;  </li>
</ol>
<p>//<em> instantiate a new ServiceTicketValidator /</em>/ 
ServiceTicketValidator sv = new ServiceTicketValidator();  </p>
<p>//<em> set its parameters /</em>/ 
sv.setCasValidateUrl(&quot;<a href="https://secure.its.yale.edu/cas/serviceValidate" target="_blank">https://secure.its.yale.edu/cas/serviceValidate</a>&quot;);<br>sv.setService(urlOfThisService);<br>sv.setServiceTicket(request.getParameter(&quot;ticket&quot;));   </p>
<p>String urlOfProxyCallbackServlet = &quot;<a href="https://portal.yale.edu/CasProxyServlet" target="_blank">https://portal.yale.edu/CasProxyServlet</a>&quot;;<br>sv.setProxyCallbackUrl(urlOfProxyCallbackServlet);  </p>
<p>//<em> contact CAS and validate /</em>/ 
sv.validate();  </p>
<p>//<em> if we want to look at the raw response, we can use getResponse() /</em>/ 
xmlResponse = sv.getResponse();  </p>
<p>if(sv.isAuthenticationSuccesful()) {<br>  user = sv.getUser();<br>} else {<br>  errorCode = sv.getErrorCode();<br>  errorMessage = sv.getErrorMessage();<br>}<br>  //<em> The user is now authenticated. /</em>/ 
  //<em> If we did set the proxy callback url, we can get proxy tickets with: /</em>/ 
  String urlOfTargetService = &quot;<a href="http://hkg2.its.yale.edu/someApp/portalFeed" target="_blank">http://hkg2.its.yale.edu/someApp/portalFeed</a>&quot;;<br>  String proxyTicket = ProxyTicketReceptor.getProxyTicket( sv.getPgtIou() , urlOfTargetService); 
import edu.yale.its.tp.cas.client./<em>;
...
String user = null;
String errorCode = null;
String errorMessage = null;
String xmlResponse = null;
//</em> instantiate a new ServiceTicketValidator /<em>/
ServiceTicketValidator sv = new ServiceTicketValidator();
//</em> set its parameters /<em>/
sv.setCasValidateUrl(&quot;<a href="https://secure.its.yale.edu/cas/serviceValidate" target="_blank">https://secure.its.yale.edu/cas/serviceValidate</a>&quot;);
sv.setService(urlOfThisService);
sv.setServiceTicket(request.getParameter(&quot;ticket&quot;));
String urlOfProxyCallbackServlet = &quot;<a href="https://portal.yale.edu/CasProxyServlet" target="_blank">https://portal.yale.edu/CasProxyServlet</a>&quot;;
sv.setProxyCallbackUrl(urlOfProxyCallbackServlet);
//</em> contact CAS and validate /<em>/
sv.validate();
//</em> if we want to look at the raw response, we can use getResponse() /<em>/
xmlResponse = sv.getResponse();
if(sv.isAuthenticationSuccesful()) {
  user = sv.getUser();
} else {
  errorCode = sv.getErrorCode();
  errorMessage = sv.getErrorMessage();
}
  //</em> The user is now authenticated. /<em>/
  //</em> If we did set the proxy callback url, we can get proxy tickets with: /<em>/
  String urlOfTargetService = &quot;<a href="http://hkg2.its.yale.edu/someApp/portalFeed" target="_blank">http://hkg2.its.yale.edu/someApp/portalFeed</a>&quot;;
  String proxyTicket = ProxyTicketReceptor.getProxyTicket( sv.getPgtIou() , urlOfTargetService);
3-2．ProxyTicketValidator
Java代码
import edu.yale.its.tp.cas.client./</em>;<br>...<br>String user = null;<br>String errorCode = null;<br>String errorMessage = null;<br>String xmlResponse = null;<br>List proxyList = null;  </p>
<p>//<em> instantiate a new ProxyTicketValidator /</em>/ 
ProxyTicketValidator pv = new ProxyTicketValidator();   </p>
<p>//<em> set its parameters /</em>/ 
pv.setCasValidateUrl(&quot;<a href="https://secure.its.yale.edu/cas/proxyValidate" target="_blank">https://secure.its.yale.edu/cas/proxyValidate</a>&quot;);<br>pv.setService(urlOfThisService);<br>pv.setServiceTicket(request.getParameter(&quot;ticket&quot;));   </p>
<p>String urlOfProxyCallbackServlet = &quot;<a href="https://portal.yale.edu/CasProxyServlet" target="_blank">https://portal.yale.edu/CasProxyServlet</a>&quot;;<br>pv.setProxyCallbackUrl(urlOfProxyCallbackServlet);   </p>
<p>//<em> contact CAS and validate /</em>/ 
pv.validate();  </p>
<p>//<em> if we want to look at the raw response, we can use getResponse() /</em>/ 
xmlResponse = pv.getResponse();   </p>
<p>//<em> read the response /</em>/ 
if(pv.isAuthenticationSuccesful()) {<br>  user = pv.getUser();<br>  proxyList = pv.getProxyList();<br>} else {<br>  errorCode = pv.getErrorCode();<br>  errorMessage = pv.getErrorMessage();<br>  //<em> handle the error /</em>/ 
}<br>//<em> The user is now authenticated. /</em>/<br>//<em> If we did set the proxy callback url, we can get proxy tickets with this method call: /</em>/<br>String urlOfTargetService = &quot;<a href="http://hkg2.its.yale.edu/someApp/portalFeed" target="_blank">http://hkg2.its.yale.edu/someApp/portalFeed</a>&quot;;<br>String proxyTicket = ProxyTicketReceptor.getProxyTicket( pv.getPgtIou() , urlOfTargetService); 
import edu.yale.its.tp.cas.client./<em>;
...
String user = null;
String errorCode = null;
String errorMessage = null;
String xmlResponse = null;
List proxyList = null;
//</em> instantiate a new ProxyTicketValidator /<em>/
ProxyTicketValidator pv = new ProxyTicketValidator();
//</em> set its parameters /<em>/
pv.setCasValidateUrl(&quot;<a href="https://secure.its.yale.edu/cas/proxyValidate" target="_blank">https://secure.its.yale.edu/cas/proxyValidate</a>&quot;);
pv.setService(urlOfThisService);
pv.setServiceTicket(request.getParameter(&quot;ticket&quot;));
String urlOfProxyCallbackServlet = &quot;<a href="https://portal.yale.edu/CasProxyServlet" target="_blank">https://portal.yale.edu/CasProxyServlet</a>&quot;;
pv.setProxyCallbackUrl(urlOfProxyCallbackServlet);
//</em> contact CAS and validate /<em>/
pv.validate();
//</em> if we want to look at the raw response, we can use getResponse() /<em>/
xmlResponse = pv.getResponse();
//</em> read the response /<em>/
if(pv.isAuthenticationSuccesful()) {
  user = pv.getUser();
  proxyList = pv.getProxyList();
} else {
  errorCode = pv.getErrorCode();
  errorMessage = pv.getErrorMessage();
  //</em> handle the error /<em>/
}
//</em> The user is now authenticated. /<em>/
//</em> If we did set the proxy callback url, we can get proxy tickets with this method call: /*/
String urlOfTargetService = &quot;<a href="http://hkg2.its.yale.edu/someApp/portalFeed" target="_blank">http://hkg2.its.yale.edu/someApp/portalFeed</a>&quot;;
String proxyTicket = ProxyTicketReceptor.getProxyTicket( pv.getPgtIou() , urlOfTargetService);
在这里，我们假设上下文环境中的用户已经通过了CAS登录认证，被重定向到当前的servlet下，我们在servlet中获取ticket凭证，servlet的URL对用户身份进行确认。如果上下文参数中无法获取ticket凭证，我们就认为用户尚未登录，那么，该servlet必须负责将用户重定向到CAS的登录页面去。
初战告捷
      到今天为止，我们已经通过JA-SIG学习笔记的1-3部分，对CAS这个开源SSO的框架有了个大体的了解和初步的掌握，希望这些知识能为各位步入CAS殿堂打开一扇的大门。咖啡希望在今后的工作应用中，能同大家一块共同探讨，进一步深入了解CAS。
学无止境。。。。。。
分享到： <a href="&quot;分享到新浪微博&quot;"><img src="" alt=""></a> <a href="&quot;分享到腾讯微博&quot;"><img src="" alt=""></a></p>
<p><a href="http://lvyanglin.iteye.com/blog/622656" title="cas-server-3.3.2  使用举例" target="_blank">cas-server-3.3.2 使用举例</a> | <a href="http://lvyanglin.iteye.com/blog/615166" title="cas 服务器端的配置" target="_blank">cas 服务器端的配置</a></p>
<ul>
<li>2010-03-17 14:56</li>
<li>浏览 770</li>
<li><a href="http://lvyanglin.iteye.com/blog/618081#comments" target="_blank">评论(0)</a></li>
<li>分类:<a href="http://www.iteye.com/blogs/category/language" target="_blank">编程语言</a></li>
<li><a href="http://www.iteye.com/wiki/blog/618081" target="_blank">相关推荐</a></li>
</ul>
<h3 id="-">评论</h3>
<p><a href=""></a></p>
<h3 id="-">发表评论</h3>
<p><a href="http://lvyanglin.iteye.com/login" target="_blank"><img src="" alt=""></a><a href="http://lvyanglin.iteye.com/login" target="_blank">您还没有登录,请您登录后再发表评论</a></p>
<p><a href="http://lvyanglin.iteye.com/" target="_blank"><img src="&quot;lvyanglin的博客: 老老&quot;" alt="lvyanglin的博客"></a></p>
<p>lvyanglin</p>
<ul>
<li>浏览: 11625 次</li>
<li>性别: <img src="&quot;男&quot;" alt="Icon_minigender_1"></li>
<li>来自: 广州</li>
<li><img src="" alt=""><h3 id="-http-lvyanglin-iteye-com-blog-user_visits-">最近访客 <a href="http://lvyanglin.iteye.com/blog/user_visits" target="_blank">更多访客&gt;&gt;</a></h3>
</li>
</ul>
<p><a href="http://shangyue1110.iteye.com/" target="_blank"><img src="&quot;shangyue1110的博客: &quot;" alt="shangyue1110的博客"></a></p>
<p><a href="http://shangyue1110.iteye.com/" title="shangyue1110" target="_blank">shangyue1110</a></p>
<p><a href="http://dylinshi126.iteye.com/" target="_blank"><img src="&quot;dylinshi126的博客: &quot;" alt="dylinshi126的博客"></a></p>
<p><a href="http://dylinshi126.iteye.com/" title="dylinshi126" target="_blank">dylinshi126</a>
<a href="http://dada7020.iteye.com/" target="_blank"><img src="&quot;dada7020的博客: &quot;" alt="dada7020的博客"></a></p>
<p><a href="http://dada7020.iteye.com/" title="dada7020" target="_blank">dada7020</a></p>
<p><a href="http://k175981998.iteye.com/" target="_blank"><img src="&quot;k175981998的博客: &quot;" alt="k175981998的博客"></a></p>
<p><a href="http://k175981998.iteye.com/" title="k175981998" target="_blank">k175981998</a></p>
<h3 id="-">文章分类</h3>
<ul>
<li><a href="http://lvyanglin.iteye.com/" target="_blank">全部博客 (35)</a></li>
<li><a href="http://lvyanglin.iteye.com/category/67638" target="_blank">java (20)</a></li>
<li><a href="http://lvyanglin.iteye.com/category/67639" target="_blank">数据库 (5)</a></li>
<li><a href="http://lvyanglin.iteye.com/category/67640" target="_blank">其他 (5)</a></li>
<li><a href="http://lvyanglin.iteye.com/category/187499" target="_blank">在centsos上安装chrome (1)</a></li>
<li><a href="http://lvyanglin.iteye.com/category/194903" target="_blank">centos 安装 (1)</a></li>
<li><p><a href="http://lvyanglin.iteye.com/category/220785" target="_blank">学习linux (0)</a></p>
<h3 id="-">社区版块</h3>
</li>
<li><p><a href="http://lvyanglin.iteye.com/blog/news" target="_blank">我的资讯</a> (0)</p>
</li>
<li><a href="http://lvyanglin.iteye.com/blog/post" target="_blank">我的论坛</a> (0)</li>
<li><a href="http://lvyanglin.iteye.com/blog/answered_problems" target="_blank">我的问答</a> (1)</li>
</ul>
<h3 id="-">存档分类</h3>
<ul>
<li><a href="http://lvyanglin.iteye.com/blog/monthblog/2011-12" target="_blank">2011-12</a> (2)</li>
<li><a href="http://lvyanglin.iteye.com/blog/monthblog/2011-11" target="_blank">2011-11</a> (1)</li>
<li><a href="http://lvyanglin.iteye.com/blog/monthblog/2011-05" target="_blank">2011-05</a> (2)</li>
<li><p><a href="http://lvyanglin.iteye.com/blog/monthblog_more" target="_blank">更多存档...</a></p>
<h3 id="-">最新评论</h3>
</li>
<li><p><a href="http://403577706.iteye.com/" title="403577706" target="_blank">403577706</a>： sudo apt-get build-dep /#(packag ...
<a href="http://lvyanglin.iteye.com/blog/800337#bc2250038" target="_blank">sudo apt-get -f install</a>
声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。
© 2003-2011 ITeye.com. All rights reserved. [ 京ICP证110151号 京公网安备110105010620 ]
<img src="" alt=""></p>
</li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/CAS/">CAS</a></li></span></span> | <span class="tags">Tagged <a href="/tags/CAS/" class="label label-primary">CAS</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-CAS--casclient使用指南-老老-ITeye技术网站/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-CAS--casclient使用指南-老老-ITeye技术网站" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-CAS--CAS返回多个信息为空--ITeye技术网站/">CAS 返回多个信息为空 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-CAS--CAS返回多个信息为空--ITeye技术网站/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="cas-iteye-">CAS 返回多个信息为空 - - ITeye技术网站</h1>
<p><a href="http://www.iteye.com/" target="_blank">首页</a> <a href="http://www.iteye.com/news" target="_blank">资讯</a> <a href="http://www.iteye.com/magazines" target="_blank">精华</a> <a href="http://www.iteye.com/forums" target="_blank">论坛</a> <a href="http://www.iteye.com/ask" target="_blank">问答</a> <a href="http://www.iteye.com/blogs" target="_blank">博客</a> <a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a> <a href="http://www.iteye.com/groups" target="_blank">群组</a> <a href="http://liuzhiyi7288.iteye.com/blog/1135001#" target="_blank">更多 ▼</a></p>
<p><a href="http://www.iteye.com/job" target="_blank">招聘</a> <a href="http://www.iteye.com/search" target="_blank">搜索</a></p>
<p><a href="http://liuzhiyi7288.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://liuzhiyi7288.iteye.com/login" target="_blank">登录</a> <a href="http://liuzhiyi7288.iteye.com/signup" target="_blank">注册</a></p>
<h1 id="-liuzhiyi7288-http-liuzhiyi7288-iteye-com-"><a href="http://liuzhiyi7288.iteye.com/" target="_blank">liuzhiyi7288</a></h1>
<ul>
<li><a href="http://liuzhiyi7288.iteye.com/" target="_blank"><strong>博客</strong></a></li>
<li><a href="http://liuzhiyi7288.iteye.com/weibo" target="_blank">微博</a></li>
<li><a href="http://liuzhiyi7288.iteye.com/album" target="_blank">相册</a></li>
<li><a href="http://liuzhiyi7288.iteye.com/link" target="_blank">收藏</a></li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/guest_book" target="_blank">留言</a></li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/profile" target="_blank">关于我</a></li>
</ul>
<h3 id="-cas-"><a href="">CAS 返回多个信息为空</a> **</h3>
<p>CAS client 端使用Filter 获得server端传回的信息，如果多个信息使用：
Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li><p>assertion.getPrincipal().getAttributes()<br>assertion.getPrincipal().getAttributes()来获得一个Map，但是有的时候Map中没有数据为null；
解决方案：配置deployerConfigContext.xml中名称为serviceRegistryDao的bean，如下
Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><bean id="serviceRegistryDao" class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl">  </li>
<li><property name="registeredServices">  </li>
<li><list>  </li>
<li>&lt;bean class=&quot;org.jasig.cas.services.RegisteredServiceImpl&quot;   </li>
<li>p:id=&quot;1&quot;  </li>
<li>p:description=&quot;test&quot;  </li>
<li>p:serviceId=&quot;<a href="http://192.168.104.101:8080//*" target="_blank">http://192.168.104.101:8080//*</a>&quot;  </li>
<li>p:enabled=&quot;true&quot;   </li>
<li>p:ssoEnabled=&quot;true&quot;   </li>
<li>p:anonymousAccess=&quot;false&quot;&gt;  </li>
<li><property name="allowedAttributes" value="key1,key2,key3"/>  </li>
<li></bean>                    </list>  </li>
<li><p></property><br><bean id="serviceRegistryDao" class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl"> <property name="registeredServices"> <list> <bean class="org.jasig.cas.services.RegisteredServiceImpl" p:id="1" p:description="test" p:serviceId="http://192.168.104.101:8080//*" p:enabled="true" p:ssoEnabled="true" p:anonymousAccess="false"> <property name="allowedAttributes" value="key1,key2,key3"/> </bean> </list> </property>，其中最重要的配置为：<property name="allowedAttributes" value="key1,key2,key3"/>
这个属性决定了我们在client端获得map是否为null，如果不配置该属性则为null，该属性配置我们返回多个信息对应的key；
此处对应CAS SERVER端源码如下 CentralAuthenticationServiceImpl.java：
Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><p>// 获得deployerConfigContext.xml中serviceRegistryDao配置的registeredServices  </p>
</li>
<li>final RegisteredService registeredService = this.servicesManager  </li>
<li><p>.findServiceBy(service);<br>// 获得deployerConfigContext.xml中serviceRegistryDao配置的registeredServices final RegisteredService registeredService = this.servicesManager .findServiceBy(service);
allowwedAttributes配置对应的代码如下：
Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><p>//<em>/</em> </p>
</li>
<li>/* 从principal.getAttributes()获得map后，获取registeredService的allowedAttributes属性， </li>
<li>/* 可以对应的key存入返回客户端信息的中map中 </li>
<li>/*/  </li>
<li>for (final String attribute : registeredService  </li>
<li>.getAllowedAttributes()) {  </li>
<li>final Object value = principal.getAttributes().get(  </li>
<li>attribute);  </li>
<li>if (value != null) {  </li>
<li>attributes.put(attribute, value);  </li>
<li>}  </li>
<li>}  </li>
<li></li>
<li>final Principal modifiedPrincipal = new SimplePrincipal(  </li>
<li>principalId, attributes);  </li>
<li></li>
<li>final MutableAuthentication mutableAuthentication = new MutableAuthentication(  </li>
<li>modifiedPrincipal);<br>//<em>/</em> /<em> 从principal.getAttributes()获得map后，获取registeredService的allowedAttributes属性， /</em> 可以对应的key存入返回客户端信息的中map中 /*/ for (final String attribute : registeredService .getAllowedAttributes()) { final Object value = principal.getAttributes().get( attribute); if (value != null) { attributes.put(attribute, value); } } final Principal modifiedPrincipal = new SimplePrincipal( principalId, attributes); final MutableAuthentication mutableAuthentication = new MutableAuthentication( modifiedPrincipal);；
希望对大家有所帮助
分享到： <a href="&quot;分享到新浪微博&quot;"><img src="" alt=""></a> <a href="&quot;分享到腾讯微博&quot;"><img src="" alt=""></a></li>
</ol>
<p><a href="http://liuzhiyi7288.iteye.com/blog/1135037" title="CAS client 端添加初始化参数传到server端" target="_blank">CAS client 端添加初始化参数传到server端</a> | <a href="http://liuzhiyi7288.iteye.com/blog/1132260" title="CAS 集成java 登录成功后空白页面" target="_blank">CAS 集成java 登录成功后空白页面</a></p>
<ul>
<li>2011-07-28 17:21</li>
<li>浏览 389</li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/1135001#comments" target="_blank">评论(1)</a></li>
<li>分类:<a href="http://www.iteye.com/blogs/category/opensource" target="_blank">开源软件</a></li>
<li><a href="http://www.iteye.com/wiki/blog/1135001" target="_blank">相关推荐</a></li>
</ul>
<h3 id="-">评论</h3>
<p><a href=""></a></p>
<p>1 楼 <a href="http://solomon.iteye.com/" title="solomon" target="_blank">solomon</a> 2011-10-31  </p>
<p>  不错，雪中送炭。　<img src="" alt=""></p>
<h3 id="-">发表评论</h3>
<p><a href="http://liuzhiyi7288.iteye.com/login" target="_blank"><img src="" alt=""></a><a href="http://liuzhiyi7288.iteye.com/login" target="_blank">您还没有登录,请您登录后再发表评论</a></p>
<p><a href="http://liuzhiyi7288.iteye.com/" target="_blank"><img src="&quot;liuzhiyi7288的博客: &quot;" alt="liuzhiyi7288的博客"></a></p>
<p>liuzhiyi7288</p>
<ul>
<li>浏览: 2639 次</li>
<li>性别: <img src="&quot;男&quot;" alt="Icon_minigender_1"></li>
<li>来自: 北京</li>
<li><img src="" alt=""><h3 id="-http-liuzhiyi7288-iteye-com-blog-user_visits-">最近访客 <a href="http://liuzhiyi7288.iteye.com/blog/user_visits" target="_blank">更多访客&gt;&gt;</a></h3>
</li>
</ul>
<p><a href="http://mzmingly.iteye.com/" target="_blank"><img src="&quot;mzmingly的博客: &quot;" alt="mzmingly的博客"></a></p>
<p><a href="http://mzmingly.iteye.com/" title="mzmingly" target="_blank">mzmingly</a></p>
<p><a href="http://hasker.iteye.com/" target="_blank"><img src="&quot;hasker的博客: &quot;" alt="hasker的博客"></a></p>
<p><a href="http://hasker.iteye.com/" title="hasker" target="_blank">hasker</a>
<a href="http://ninisui.iteye.com/" target="_blank"><img src="&quot;ninisui的博客: &quot;" alt="ninisui的博客"></a></p>
<p><a href="http://ninisui.iteye.com/" title="ninisui" target="_blank">ninisui</a></p>
<p><a href="http://dawnstars.iteye.com/" target="_blank"><img src="&quot;dawnstars的博客: dawnstars&quot;" alt="dawnstars的博客"></a></p>
<p><a href="http://dawnstars.iteye.com/" title="dawnstars" target="_blank">dawnstars</a></p>
<h3 id="-">文章分类</h3>
<ul>
<li><a href="http://liuzhiyi7288.iteye.com/" target="_blank">全部博客 (9)</a></li>
<li><p><a href="http://liuzhiyi7288.iteye.com/category/199341" target="_blank">svn branch merge trunk (1)</a></p>
<h3 id="-">社区版块</h3>
</li>
<li><p><a href="http://liuzhiyi7288.iteye.com/blog/news" target="_blank">我的资讯</a> (0)</p>
</li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/post" target="_blank">我的论坛</a> (0)</li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/answered_problems" target="_blank">我的问答</a> (1)</li>
</ul>
<h3 id="-">存档分类</h3>
<ul>
<li><a href="http://liuzhiyi7288.iteye.com/blog/monthblog/2012-01" target="_blank">2012-01</a> (1)</li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/monthblog/2011-12" target="_blank">2011-12</a> (1)</li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/monthblog/2011-10" target="_blank">2011-10</a> (1)</li>
<li><p><a href="http://liuzhiyi7288.iteye.com/blog/monthblog_more" target="_blank">更多存档...</a></p>
<h3 id="-">评论排行榜</h3>
</li>
<li><p><a href="http://liuzhiyi7288.iteye.com/blog/1290155" title="openOffice  conversion failed: could not load input document" target="_blank">openOffice conversion failed: could not ...</a></p>
</li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/1334978" title="from branch merge to trunk" target="_blank">from branch merge to trunk</a></li>
<li><a href="&quot;CAS 返回多个信息为空&quot;">CAS 返回多个信息为空</a></li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/1132260" title="CAS 集成java 登录成功后空白页面" target="_blank">CAS 集成java 登录成功后空白页面</a></li>
</ul>
<h3 id="-">最新评论</h3>
<ul>
<li><a href="http://muqingren.iteye.com/" title="muqingren" target="_blank">muqingren</a>： 我没用过这个组件，抱歉
<a href="http://liuzhiyi7288.iteye.com/blog/1290155#bc2252321" target="_blank">openOffice conversion failed: could not load input document</a></li>
<li><a href="http://muqingren.iteye.com/" title="muqingren" target="_blank">muqingren</a>： 辛苦
<a href="http://liuzhiyi7288.iteye.com/blog/1334978#bc2252320" target="_blank">from branch merge to trunk</a></li>
<li><a href="http://muqingren.iteye.com/" title="muqingren" target="_blank">muqingren</a>： ...
<a href="http://liuzhiyi7288.iteye.com/blog/1334978#bc2252317" target="_blank">from branch merge to trunk</a></li>
<li><a href="http://chinacq.iteye.com/" title="chinacq" target="_blank">chinacq</a>： 我没有用到 XComponent document，但是上传有 ...
<a href="http://liuzhiyi7288.iteye.com/blog/1290155#bc2248988" target="_blank">openOffice conversion failed: could not load input document</a></li>
<li><a href="http://solomon.iteye.com/" title="solomon" target="_blank">solomon</a>：   不错，雪中送炭。　
<a href="http://liuzhiyi7288.iteye.com/blog/1135001#bc2225743" target="_blank">CAS 返回多个信息为空</a>
声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。
© 2003-2011 ITeye.com. All rights reserved. [ 京ICP证110151号 京公网安备110105010620 ]
<img src="" alt=""></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/CAS/">CAS</a></li></span></span> | <span class="tags">Tagged <a href="/tags/CAS/" class="label label-primary">CAS</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-CAS--CAS返回多个信息为空--ITeye技术网站/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-CAS--CAS返回多个信息为空--ITeye技术网站" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-CAS--CAS配置第二步：服务器端的配置-RIA之路-ITeye技术网站/">CAS配置第二步：服务器端的配置 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-CAS--CAS配置第二步：服务器端的配置-RIA之路-ITeye技术网站/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="cas-ria-iteye-">CAS配置第二步：服务器端的配置 - RIA之路 - ITeye技术网站</h1>
<p><a href="http://www.iteye.com/" target="_blank">首页</a> <a href="http://www.iteye.com/news" target="_blank">资讯</a> <a href="http://www.iteye.com/magazines" target="_blank">精华</a> <a href="http://www.iteye.com/forums" target="_blank">论坛</a> <a href="http://www.iteye.com/ask" target="_blank">问答</a> <a href="http://www.iteye.com/blogs" target="_blank">博客</a> <a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a> <a href="http://www.iteye.com/groups" target="_blank">群组</a> <a href="http://andy-ghg.iteye.com/blog/942653#" target="_blank">更多 ▼</a></p>
<p><a href="http://www.iteye.com/job" target="_blank">招聘</a> <a href="http://www.iteye.com/search" target="_blank">搜索</a></p>
<p><a href="http://andy-ghg.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://andy-ghg.iteye.com/login" target="_blank">登录</a> <a href="http://andy-ghg.iteye.com/signup" target="_blank">注册</a></p>
<h1 id="-ria-http-andy-ghg-iteye-com-"><a href="http://andy-ghg.iteye.com/" target="_blank">RIA之路</a></h1>
<ul>
<li><a href="http://andy-ghg.iteye.com/" target="_blank"><strong>博客</strong></a></li>
<li><a href="http://andy-ghg.iteye.com/weibo" target="_blank">微博</a></li>
<li><a href="http://andy-ghg.iteye.com/album" target="_blank">相册</a></li>
<li><a href="http://andy-ghg.iteye.com/link" target="_blank">收藏</a></li>
<li><a href="http://andy-ghg.iteye.com/blog/guest_book" target="_blank">留言</a></li>
<li><a href="http://andy-ghg.iteye.com/blog/profile" target="_blank">关于我</a></li>
</ul>
<h3 id="-cas-"><a href="">CAS配置第二步：服务器端的配置</a> **</h3>
<p><strong>博客分类：</strong></p>
<ul>
<li><a href="http://andy-ghg.iteye.com/category/146164" target="_blank">Java</a>
<a href="http://www.iteye.com/blogs/tag/Oracle" target="_blank">Oracle</a><a href="http://www.iteye.com/blogs/tag/XML" target="_blank">XML</a><a href="http://www.iteye.com/blogs/tag/Tomcat" target="_blank">Tomcat</a><a href="http://www.iteye.com/blogs/tag/JSP" target="_blank">JSP</a><a href="http://www.iteye.com/blogs/tag/SQL%20Server" target="_blank">SQL Server</a> </li>
</ul>
<p>紧接上一篇<a href="http://andy-ghg.iteye.com/blog/942595" target="_blank">CAS配置第一步：准备工作</a>
<strong>CAS Java 群35271653</strong>
<strong>1:加入数据库验证</strong>
再将cas.war部署到tomcat-cas-server下之后，
将oracle数据库驱动加入到cas工程的lib下
打开目录X:\tomcat-cas-server\webapps\cas\WEB-INF下的deployerConfigContext.xml修改里面的内容，注释掉以下代码：
Xml代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li><p>&lt;bean class=&quot;org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler&quot;<br>&lt;bean class=&quot;org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler&quot;
这段代码CAS默认的验证方式，就是用户名和密码相同即可通过认证，我们现在做的时候加入数据库验证，就是用户名密码来自数据库。
在相同的位置上加入如下代码：
Xml代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><bean class="org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler">  </li>
<li><property name="sql" value="select pwd from portal_user where id=? and sessionid is null" />  </li>
<li><property name="dataSource" ref="dataSource" />  </li>
<li><p></bean><br><bean class="org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler"> <property name="sql" value="select pwd from portal_user where id=? and sessionid is null" /> <property name="dataSource" ref="dataSource" /> </bean>
其中，sql语句可以自定义成你想要的结果，例如：
Sql代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><p>select password from tablename where username=?<br>select password from tablename where username=?
然后在根节点<beans>下加入节点如下：
Xml代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><p>&lt;bean id=&quot;dataSource&quot;  </p>
</li>
<li>class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;  </li>
<li><property name="driverClassName">  </li>
<li><value>oracle.jdbc.driver.OracleDriver</value>  </li>
<li></property>  </li>
<li><property name="url">  </li>
<li><value>jdbc:oracle:thin:@xxxxxxxxxxxxx:1521:pisdb</value>  </li>
<li></property>  </li>
<li><property name="username">  </li>
<li><value>pis</value>  </li>
<li></property>  </li>
<li><property name="password">  </li>
<li><value>pis</value>  </li>
<li></property>  </li>
<li><p></bean><br><bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"> <property name="driverClassName"> <value>oracle.jdbc.driver.OracleDriver</value> </property> <property name="url"> <value>jdbc:oracle:thin:@xxxxxxxxxxxxx:1521:pisdb</value> </property> <property name="username"> <value>pis</value> </property> <property name="password"> <value>pis</value> </property> </bean>
里面的参数配置，XML诠释的非常清楚，不再解释。
<strong>2:让CAS返回更多用户信息XML修改</strong>
然后找到serviceRegistryDao这个节点，将里面的内容全部注释掉：
Xml代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><bean id="serviceRegistryDao" class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl">  </li>
<li>&lt;!--<property name="registeredServices">  </li>
<li><list>  </li>
<li><bean class="org.jasig.cas.services.RegisteredServiceImpl">  </li>
<li><property name="id" value="0" />  </li>
<li><property name="name" value="HTTP" />  </li>
<li><property name="description" value="Only Allows HTTP Urls" />  </li>
<li><property name="serviceId" value="http:///*/*" />  </li>
<li></bean>  </li>
<li></li>
<li><bean class="org.jasig.cas.services.RegisteredServiceImpl">  </li>
<li><property name="id" value="1" />  </li>
<li><property name="name" value="HTTPS" />  </li>
<li><property name="description" value="Only Allows HTTPS Urls" />  </li>
<li><property name="serviceId" value="https:///*/*" />  </li>
<li></bean>  </li>
<li></li>
<li><bean class="org.jasig.cas.services.RegisteredServiceImpl">  </li>
<li><property name="id" value="2" />  </li>
<li><property name="name" value="IMAPS" />  </li>
<li><property name="description" value="Only Allows HTTPS Urls" />  </li>
<li><property name="serviceId" value="imaps:///*/*" />  </li>
<li></bean>  </li>
<li></li>
<li><bean class="org.jasig.cas.services.RegisteredServiceImpl">  </li>
<li><property name="id" value="3" />  </li>
<li><property name="name" value="IMAP" />  </li>
<li><property name="description" value="Only Allows IMAP Urls" />  </li>
<li><property name="serviceId" value="imap:///*/*" />  </li>
<li></bean>  </li>
<li></list>  </li>
<li></property>--&gt;  </li>
<li><p></bean><br><bean id="serviceRegistryDao" class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl"> <!--<property name="registeredServices"> <list> <bean class="org.jasig.cas.services.RegisteredServiceImpl"> <property name="id" value="0" /> <property name="name" value="HTTP" /> <property name="description" value="Only Allows HTTP Urls" /> <property name="serviceId" value="http:///*/*" /> </bean> <bean class="org.jasig.cas.services.RegisteredServiceImpl"> <property name="id" value="1" /> <property name="name" value="HTTPS" /> <property name="description" value="Only Allows HTTPS Urls" /> <property name="serviceId" value="https:///*/*" /> </bean> <bean class="org.jasig.cas.services.RegisteredServiceImpl"> <property name="id" value="2" /> <property name="name" value="IMAPS" /> <property name="description" value="Only Allows HTTPS Urls" /> <property name="serviceId" value="imaps:///*/*" /> </bean> <bean class="org.jasig.cas.services.RegisteredServiceImpl"> <property name="id" value="3" /> <property name="name" value="IMAP" /> <property name="description" value="Only Allows IMAP Urls" /> <property name="serviceId" value="imap:///*/*" /> </bean> </list> </property>--> </bean>
此节点的作用为：如果你在<list>中加入了bean，并设定了serviceId的value，那么通过CAS你只能访问这个url地址，其他的url地址将不能访问，/<em>/</em>代表的意思就是指该协议下所有的都允许被访问。但是在实际操作中，加入如果不注释掉里面的内容，将会在客户端无法获取到用户更多的登录信息。
然后在配置文件的根节点（<beans>）下加入以下XML配置：
Xml代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><bean id="attributeRepository" class="org.jasig.services.persondir.support.jdbc.SingleRowJdbcPersonAttributeDao">  </li>
<li><constructor-arg index="0" ref="dataSource"/>  </li>
<li><constructor-arg index="1" value="select /* from portal_user where {0}" />  </li>
<li><property name="queryAttributeMapping">    </li>
<li><map>    </li>
<li><entry key="username" value="id" />    </li>
<li></map>    </li>
<li></property>  </li>
<li><property name="resultAttributeMapping">  </li>
<li><map>  </li>
<li><entry key="id" value="UserId"/>  </li>
<li></li>
<li><entry key="sessionid" value="UserName"/>  </li>
<li><entry key="uclass" value="UserClass"/>  </li>
<li></map>  </li>
<li></property>  </li>
<li><p></bean><br><bean id="attributeRepository" class="org.jasig.services.persondir.support.jdbc.SingleRowJdbcPersonAttributeDao"> <constructor-arg index="0" ref="dataSource"/> <constructor-arg index="1" value="select /* from portal_user where {0}" /> <property name="queryAttributeMapping"> <map> <entry key="username" value="id" /> </map> </property> <property name="resultAttributeMapping"> <map> <entry key="id" value="UserId"/> <entry key="sessionid" value="UserName"/> <entry key="uclass" value="UserClass"/> </map> </property> </bean>
其中的sql语句可以根据自己的情况来写。下面resultAttributeMapping中的参数解释如下：
<entry key="id" value="UserId"/>
key代表的是你数据库中的字段，Value是客户端通过 AttributePrincipal获取时的参数
<strong>3:CAS登录获取更多用户信息的JSP修改</strong>
仅仅是修改xml是不够的，你必须修改他的casServiceValidationSuccess.jsp，路径为：
X:\tomcat-cas-server\webapps\cas\WEB-INF\view\jsp\protocol\2.0
在其中紧接着加入以下代码：
Xml代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><c:if test="${fn:length(assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes) > 0}">  </li>
<li><cas:attributes>  </li>
<li><c:forEach var="attr" items="${assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes}">  </li>
<li><cas:attribute>  </li>
<li><cas:${fn:escapeXml(attr.key)}>${fn:escapeXml(attr.value)}</cas:${fn:escapeXml(attr.key)}>  </li>
<li></cas:attribute>  </li>
<li></c:forEach>  </li>
<li></cas:attributes>  </li>
<li><p></c:if><br><c:if test="${fn:length(assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes) > 0}"> <cas:attributes> <c:forEach var="attr" items="${assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes}"> <cas:attribute> <cas:${fn:escapeXml(attr.key)}>${fn:escapeXml(attr.value)}</cas:${fn:escapeXml(attr.key)}> </cas:attribute> </c:forEach> </cas:attributes> </c:if>
<strong>注意：</strong>
1.在casServiceValidationSuccess.jsp中加入我们的代码的时候
Xml代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><p><cas:${fn:escapeXml(attr.key)}>${fn:escapeXml(attr.value)}</cas:${fn:escapeXml(attr.key)}><br><cas:${fn:escapeXml(attr.key)}>${fn:escapeXml(attr.value)}</cas:${fn:escapeXml(attr.key)}>
这里千万不能有空格！
2.在attributeRepository这个节点中，resultAttributeMapping下的配置，例如<entry key="id" value="UserId"/>在配置的时候需要注意数据库中存放的不能是中文（不过理论上可以解决，具体原因就是casServiceValidationSuccess.jsp在拼接XML的时候出现乱码。）有兴趣的可以尝试解决一下。
<strong>2</strong>
顶</p>
</li>
</ol>
<p><strong>9</strong>
踩</p>
<p>分享到： <a href="&quot;分享到新浪微博&quot;"><img src="" alt=""></a> <a href="&quot;分享到腾讯微博&quot;"><img src="" alt=""></a></p>
<p><a href="http://andy-ghg.iteye.com/blog/942700" title="CAS配置第三步：客户端的配置" target="_blank">CAS配置第三步：客户端的配置</a> | <a href="http://andy-ghg.iteye.com/blog/942595" title="CAS配置第一步：准备工作" target="_blank">CAS配置第一步：准备工作</a></p>
<ul>
<li>2011-03-06 15:37</li>
<li>浏览 1030</li>
<li><a href="http://andy-ghg.iteye.com/blog/942653#comments" target="_blank">评论(3)</a></li>
<li>分类:<a href="http://www.iteye.com/blogs/category/architecture" target="_blank">企业架构</a></li>
<li><a href="http://www.iteye.com/wiki/blog/942653" target="_blank">相关推荐</a></li>
</ul>
<h3 id="-">评论</h3>
<p><a href=""></a></p>
<p>3 楼 <a href="http://andy-ghg.iteye.com/" title="andy_ghg" target="_blank">andy_ghg</a> 2012-02-10  </p>
<p>queryAttributeMapping</p>
<p>01jiangwei01 写道
引用</p>
<p><bean id="attributeRepository" class="org.jasig.services.persondir.support.jdbc.SingleRowJdbcPersonAttributeDao"> 
    <constructor-arg index="0" ref="dataSource"/> 
    <constructor-arg index="1" value="select /* from portal_user where {0}" /> 
   <property name="queryAttributeMapping"><br>            <map><br>                <entry key="username" value="id" /><br>            </map><br>    </property> 
    <property name="resultAttributeMapping"> 
        <map> 
            <entry key="id" value="UserId"/> 
            <entry key="sessionid" value="UserName"/> 
            <entry key="uclass" value="UserClass"/> 
        </map> 
    </property> 
</bean>
中的queryAttributeMapping是什麼意思啊？
查询数据库的时候所使用的参数，我也很久没有做这个配置了。可能也记不太清楚了。不好意思。
2 楼 <a href="http://01jiangwei01.iteye.com/" title="01jiangwei01" target="_blank">01jiangwei01</a> 2012-02-08  </p>
<p>引用</p>
<p><bean id="attributeRepository" class="org.jasig.services.persondir.support.jdbc.SingleRowJdbcPersonAttributeDao"> 
    <constructor-arg index="0" ref="dataSource"/> 
    <constructor-arg index="1" value="select /* from portal_user where {0}" /> 
   <property name="queryAttributeMapping"><br>            <map><br>                <entry key="username" value="id" /><br>            </map><br>    </property> 
    <property name="resultAttributeMapping"> 
        <map> 
            <entry key="id" value="UserId"/> 
            <entry key="sessionid" value="UserName"/> 
            <entry key="uclass" value="UserClass"/> 
        </map> 
    </property> 
</bean>
中的queryAttributeMapping是什麼意思啊？</p>
<p>1 楼 <a href="http://runkityboy.iteye.com/" title="runkityboy" target="_blank">runkityboy</a> 2011-12-19  </p>
<p>谢谢帮我解决问题了</p>
<h3 id="-">发表评论</h3>
<p><a href="http://andy-ghg.iteye.com/login" target="_blank"><img src="" alt=""></a><a href="http://andy-ghg.iteye.com/login" target="_blank">您还没有登录,请您登录后再发表评论</a></p>
<p><a href="http://andy-ghg.iteye.com/" target="_blank"><img src="&quot;andy_ghg的博客: RIA之路&quot;" alt="andy_ghg的博客"></a></p>
<p>andy_ghg</p>
<ul>
<li>浏览: 50654 次</li>
<li>性别: <img src="&quot;男&quot;" alt="Icon_minigender_1"></li>
<li>来自: 扬州</li>
<li><img src="" alt=""><h3 id="-http-andy-ghg-iteye-com-blog-user_visits-">最近访客 <a href="http://andy-ghg.iteye.com/blog/user_visits" target="_blank">更多访客&gt;&gt;</a></h3>
</li>
</ul>
<p><a href="http://asd51731.iteye.com/" target="_blank"><img src="&quot;asd51731的博客: &quot;" alt="asd51731的博客"></a></p>
<p><a href="http://asd51731.iteye.com/" title="asd51731" target="_blank">asd51731</a></p>
<p><a href="http://shuta.iteye.com/" target="_blank"><img src="&quot;shuta的博客: &quot;" alt="shuta的博客"></a></p>
<p><a href="http://shuta.iteye.com/" title="shuta" target="_blank">shuta</a>
<a href="http://lzf0112.iteye.com/" target="_blank"><img src="&quot;lzf0112的博客: &quot;" alt="lzf0112的博客"></a></p>
<p><a href="http://lzf0112.iteye.com/" title="lzf0112" target="_blank">lzf0112</a></p>
<p><a href="http://young-java.iteye.com/" target="_blank"><img src="&quot;young.java的博客: young.java&quot;" alt="young.java的博客"></a></p>
<p><a href="http://young-java.iteye.com/" title="young.java" target="_blank">young.java</a></p>
<h3 id="-">文章分类</h3>
<ul>
<li><a href="http://andy-ghg.iteye.com/" target="_blank">全部博客 (39)</a></li>
<li><a href="http://andy-ghg.iteye.com/category/80684" target="_blank">EXTJS (11)</a></li>
<li><a href="http://andy-ghg.iteye.com/category/146164" target="_blank">Java (10)</a></li>
<li><a href="http://andy-ghg.iteye.com/category/80685" target="_blank">Flex (8)</a></li>
<li><a href="http://andy-ghg.iteye.com/category/80686" target="_blank">杂谈 (5)</a></li>
<li><a href="http://andy-ghg.iteye.com/category/151763" target="_blank">C/# (1)</a></li>
<li><a href="http://andy-ghg.iteye.com/category/175959" target="_blank">hadoop (3)</a></li>
<li><a href="http://andy-ghg.iteye.com/category/179432" target="_blank">flash (1)</a></li>
<li><a href="http://andy-ghg.iteye.com/category/226152" target="_blank">Nutch (1)</a></li>
<li><p><a href="http://andy-ghg.iteye.com/category/226153" target="_blank">Eclipse (1)</a></p>
<h3 id="-">社区版块</h3>
</li>
<li><p><a href="http://andy-ghg.iteye.com/blog/news" target="_blank">我的资讯</a> (0)</p>
</li>
<li><a href="http://andy-ghg.iteye.com/blog/post" target="_blank">我的论坛</a> (124)</li>
<li><a href="http://andy-ghg.iteye.com/blog/answered_problems" target="_blank">我的问答</a> (9)</li>
</ul>
<h3 id="-">存档分类</h3>
<ul>
<li><a href="http://andy-ghg.iteye.com/blog/monthblog/2012-06" target="_blank">2012-06</a> (1)</li>
<li><a href="http://andy-ghg.iteye.com/blog/monthblog/2011-09" target="_blank">2011-09</a> (3)</li>
<li><a href="http://andy-ghg.iteye.com/blog/monthblog/2011-08" target="_blank">2011-08</a> (1)</li>
<li><p><a href="http://andy-ghg.iteye.com/blog/monthblog_more" target="_blank">更多存档...</a></p>
<h3 id="-">评论排行榜</h3>
</li>
<li><p><a href="http://andy-ghg.iteye.com/blog/1133456" title="ExtJS 4.0 的改变--较为完整的介绍。" target="_blank">ExtJS 4.0 的改变--较为完整的介绍。</a></p>
</li>
<li><a href="http://andy-ghg.iteye.com/blog/1121285" title="ExtJS 4.0.2a ActionColumn的使用" target="_blank">ExtJS 4.0.2a ActionColumn的使用</a></li>
<li><a href="http://andy-ghg.iteye.com/blog/1179848" title="Hadoop学习笔记－读取视频流给Flash播放器" target="_blank">Hadoop学习笔记－读取视频流给Flash播放器</a></li>
</ul>
<h3 id="-">最新评论</h3>
<ul>
<li><a href="http://l5061109.iteye.com/" title="l5061109" target="_blank">l5061109</a>： 密码校验是自己通过从数据库中取到用户信息，包括用户名，密码，角 ...
<a href="http://andy-ghg.iteye.com/blog/1071639#bc2257421" target="_blank">MyEclipse中Spring Security 3.0.3无废话配置（第一章）。</a></li>
<li><a href="http://happy-every-daya-163-com.iteye.com/" title="优游人间" target="_blank">优游人间</a>： 刚刚开始学，我也mark一下
<a href="http://andy-ghg.iteye.com/blog/1133456#bc2252138" target="_blank">ExtJS 4.0 的改变--较为完整的介绍。</a></li>
<li><a href="http://andy-ghg.iteye.com/" title="andy_ghg" target="_blank">andy_ghg</a>： Navee 写道我有一点疑惑就是密码的验证是交给这个框架做的还 ...
<a href="http://andy-ghg.iteye.com/blog/1071639#bc2248201" target="_blank">MyEclipse中Spring Security 3.0.3无废话配置（第一章）。</a></li>
<li><a href="http://navee.iteye.com/" title="Navee" target="_blank">Navee</a>： 我有一点疑惑就是密码的验证是交给这个框架做的还是服务层自己实现 ...
<a href="http://andy-ghg.iteye.com/blog/1071639#bc2248169" target="_blank">MyEclipse中Spring Security 3.0.3无废话配置（第一章）。</a></li>
<li><a href="http://andy-ghg.iteye.com/" title="andy_ghg" target="_blank">andy_ghg</a>： queryAttributeMapping01jiangwei ...
<a href="http://andy-ghg.iteye.com/blog/942653#bc2242603" target="_blank">CAS配置第二步：服务器端的配置</a>
声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。
© 2003-2011 ITeye.com. All rights reserved. [ 京ICP证110151号 京公网安备110105010620 ]
<img src="" alt=""></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/CAS/">CAS</a></li></span></span> | <span class="tags">Tagged <a href="/tags/CAS/" class="label label-primary">CAS</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-CAS--CAS配置第二步：服务器端的配置-RIA之路-ITeye技术网站/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-CAS--CAS配置第二步：服务器端的配置-RIA之路-ITeye技术网站" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-CAS--CAS返回多个信息为空--ITeye技术网站2/">CAS 返回多个信息为空 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-CAS--CAS返回多个信息为空--ITeye技术网站2/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="cas-iteye-2-">CAS 返回多个信息为空 - - ITeye技术网站 (2)</h1>
<p><a href="http://www.iteye.com/" target="_blank">首页</a> <a href="http://www.iteye.com/news" target="_blank">资讯</a> <a href="http://www.iteye.com/magazines" target="_blank">精华</a> <a href="http://www.iteye.com/forums" target="_blank">论坛</a> <a href="http://www.iteye.com/ask" target="_blank">问答</a> <a href="http://www.iteye.com/blogs" target="_blank">博客</a> <a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a> <a href="http://www.iteye.com/groups" target="_blank">群组</a> <a href="http://liuzhiyi7288.iteye.com/blog/1135001#" target="_blank">更多 ▼</a></p>
<p><a href="http://www.iteye.com/job" target="_blank">招聘</a> <a href="http://www.iteye.com/search" target="_blank">搜索</a></p>
<p><a href="http://liuzhiyi7288.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://liuzhiyi7288.iteye.com/login" target="_blank">登录</a> <a href="http://liuzhiyi7288.iteye.com/signup" target="_blank">注册</a></p>
<h1 id="-liuzhiyi7288-http-liuzhiyi7288-iteye-com-"><a href="http://liuzhiyi7288.iteye.com/" target="_blank">liuzhiyi7288</a></h1>
<ul>
<li><a href="http://liuzhiyi7288.iteye.com/" target="_blank"><strong>博客</strong></a></li>
<li><a href="http://liuzhiyi7288.iteye.com/weibo" target="_blank">微博</a></li>
<li><a href="http://liuzhiyi7288.iteye.com/album" target="_blank">相册</a></li>
<li><a href="http://liuzhiyi7288.iteye.com/link" target="_blank">收藏</a></li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/guest_book" target="_blank">留言</a></li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/profile" target="_blank">关于我</a></li>
</ul>
<h3 id="-cas-"><a href="">CAS 返回多个信息为空</a> **</h3>
<p>CAS client 端使用Filter 获得server端传回的信息，如果多个信息使用：
Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li><p>assertion.getPrincipal().getAttributes()<br>assertion.getPrincipal().getAttributes()来获得一个Map，但是有的时候Map中没有数据为null；
解决方案：配置deployerConfigContext.xml中名称为serviceRegistryDao的bean，如下
Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><bean id="serviceRegistryDao" class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl">  </li>
<li><property name="registeredServices">  </li>
<li><list>  </li>
<li>&lt;bean class=&quot;org.jasig.cas.services.RegisteredServiceImpl&quot;   </li>
<li>p:id=&quot;1&quot;  </li>
<li>p:description=&quot;test&quot;  </li>
<li>p:serviceId=&quot;<a href="http://192.168.104.101:8080//*" target="_blank">http://192.168.104.101:8080//*</a>&quot;  </li>
<li>p:enabled=&quot;true&quot;   </li>
<li>p:ssoEnabled=&quot;true&quot;   </li>
<li>p:anonymousAccess=&quot;false&quot;&gt;  </li>
<li><property name="allowedAttributes" value="key1,key2,key3"/>  </li>
<li></bean>                    </list>  </li>
<li><p></property><br><bean id="serviceRegistryDao" class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl"> <property name="registeredServices"> <list> <bean class="org.jasig.cas.services.RegisteredServiceImpl" p:id="1" p:description="test" p:serviceId="http://192.168.104.101:8080//*" p:enabled="true" p:ssoEnabled="true" p:anonymousAccess="false"> <property name="allowedAttributes" value="key1,key2,key3"/> </bean> </list> </property>，其中最重要的配置为：<property name="allowedAttributes" value="key1,key2,key3"/>
这个属性决定了我们在client端获得map是否为null，如果不配置该属性则为null，该属性配置我们返回多个信息对应的key；
此处对应CAS SERVER端源码如下 CentralAuthenticationServiceImpl.java：
Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><p>// 获得deployerConfigContext.xml中serviceRegistryDao配置的registeredServices  </p>
</li>
<li>final RegisteredService registeredService = this.servicesManager  </li>
<li><p>.findServiceBy(service);<br>// 获得deployerConfigContext.xml中serviceRegistryDao配置的registeredServices final RegisteredService registeredService = this.servicesManager .findServiceBy(service);
allowwedAttributes配置对应的代码如下：
Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><p>//<em>/</em> </p>
</li>
<li>/* 从principal.getAttributes()获得map后，获取registeredService的allowedAttributes属性， </li>
<li>/* 可以对应的key存入返回客户端信息的中map中 </li>
<li>/*/  </li>
<li>for (final String attribute : registeredService  </li>
<li>.getAllowedAttributes()) {  </li>
<li>final Object value = principal.getAttributes().get(  </li>
<li>attribute);  </li>
<li>if (value != null) {  </li>
<li>attributes.put(attribute, value);  </li>
<li>}  </li>
<li>}  </li>
<li></li>
<li>final Principal modifiedPrincipal = new SimplePrincipal(  </li>
<li>principalId, attributes);  </li>
<li></li>
<li>final MutableAuthentication mutableAuthentication = new MutableAuthentication(  </li>
<li>modifiedPrincipal);<br>//<em>/</em> /<em> 从principal.getAttributes()获得map后，获取registeredService的allowedAttributes属性， /</em> 可以对应的key存入返回客户端信息的中map中 /*/ for (final String attribute : registeredService .getAllowedAttributes()) { final Object value = principal.getAttributes().get( attribute); if (value != null) { attributes.put(attribute, value); } } final Principal modifiedPrincipal = new SimplePrincipal( principalId, attributes); final MutableAuthentication mutableAuthentication = new MutableAuthentication( modifiedPrincipal);；
希望对大家有所帮助
分享到： <a href="&quot;分享到新浪微博&quot;"><img src="" alt=""></a> <a href="&quot;分享到腾讯微博&quot;"><img src="" alt=""></a></li>
</ol>
<p><a href="http://liuzhiyi7288.iteye.com/blog/1135037" title="CAS client 端添加初始化参数传到server端" target="_blank">CAS client 端添加初始化参数传到server端</a> | <a href="http://liuzhiyi7288.iteye.com/blog/1132260" title="CAS 集成java 登录成功后空白页面" target="_blank">CAS 集成java 登录成功后空白页面</a></p>
<ul>
<li>2011-07-28 17:21</li>
<li>浏览 389</li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/1135001#comments" target="_blank">评论(1)</a></li>
<li>分类:<a href="http://www.iteye.com/blogs/category/opensource" target="_blank">开源软件</a></li>
<li><a href="http://www.iteye.com/wiki/blog/1135001" target="_blank">相关推荐</a></li>
</ul>
<h3 id="-">评论</h3>
<p><a href=""></a></p>
<p>1 楼 <a href="http://solomon.iteye.com/" title="solomon" target="_blank">solomon</a> 2011-10-31  </p>
<p>  不错，雪中送炭。　<img src="" alt=""></p>
<h3 id="-">发表评论</h3>
<p><a href="http://liuzhiyi7288.iteye.com/login" target="_blank"><img src="" alt=""></a><a href="http://liuzhiyi7288.iteye.com/login" target="_blank">您还没有登录,请您登录后再发表评论</a></p>
<p><a href="http://liuzhiyi7288.iteye.com/" target="_blank"><img src="&quot;liuzhiyi7288的博客: &quot;" alt="liuzhiyi7288的博客"></a></p>
<p>liuzhiyi7288</p>
<ul>
<li>浏览: 2639 次</li>
<li>性别: <img src="&quot;男&quot;" alt="Icon_minigender_1"></li>
<li>来自: 北京</li>
<li><img src="" alt=""><h3 id="-http-liuzhiyi7288-iteye-com-blog-user_visits-">最近访客 <a href="http://liuzhiyi7288.iteye.com/blog/user_visits" target="_blank">更多访客&gt;&gt;</a></h3>
</li>
</ul>
<p><a href="http://mzmingly.iteye.com/" target="_blank"><img src="&quot;mzmingly的博客: &quot;" alt="mzmingly的博客"></a></p>
<p><a href="http://mzmingly.iteye.com/" title="mzmingly" target="_blank">mzmingly</a></p>
<p><a href="http://hasker.iteye.com/" target="_blank"><img src="&quot;hasker的博客: &quot;" alt="hasker的博客"></a></p>
<p><a href="http://hasker.iteye.com/" title="hasker" target="_blank">hasker</a>
<a href="http://ninisui.iteye.com/" target="_blank"><img src="&quot;ninisui的博客: &quot;" alt="ninisui的博客"></a></p>
<p><a href="http://ninisui.iteye.com/" title="ninisui" target="_blank">ninisui</a></p>
<p><a href="http://dawnstars.iteye.com/" target="_blank"><img src="&quot;dawnstars的博客: dawnstars&quot;" alt="dawnstars的博客"></a></p>
<p><a href="http://dawnstars.iteye.com/" title="dawnstars" target="_blank">dawnstars</a></p>
<h3 id="-">文章分类</h3>
<ul>
<li><a href="http://liuzhiyi7288.iteye.com/" target="_blank">全部博客 (9)</a></li>
<li><p><a href="http://liuzhiyi7288.iteye.com/category/199341" target="_blank">svn branch merge trunk (1)</a></p>
<h3 id="-">社区版块</h3>
</li>
<li><p><a href="http://liuzhiyi7288.iteye.com/blog/news" target="_blank">我的资讯</a> (0)</p>
</li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/post" target="_blank">我的论坛</a> (0)</li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/answered_problems" target="_blank">我的问答</a> (1)</li>
</ul>
<h3 id="-">存档分类</h3>
<ul>
<li><a href="http://liuzhiyi7288.iteye.com/blog/monthblog/2012-01" target="_blank">2012-01</a> (1)</li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/monthblog/2011-12" target="_blank">2011-12</a> (1)</li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/monthblog/2011-10" target="_blank">2011-10</a> (1)</li>
<li><p><a href="http://liuzhiyi7288.iteye.com/blog/monthblog_more" target="_blank">更多存档...</a></p>
<h3 id="-">评论排行榜</h3>
</li>
<li><p><a href="http://liuzhiyi7288.iteye.com/blog/1290155" title="openOffice  conversion failed: could not load input document" target="_blank">openOffice conversion failed: could not ...</a></p>
</li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/1334978" title="from branch merge to trunk" target="_blank">from branch merge to trunk</a></li>
<li><a href="&quot;CAS 返回多个信息为空&quot;">CAS 返回多个信息为空</a></li>
<li><a href="http://liuzhiyi7288.iteye.com/blog/1132260" title="CAS 集成java 登录成功后空白页面" target="_blank">CAS 集成java 登录成功后空白页面</a></li>
</ul>
<h3 id="-">最新评论</h3>
<ul>
<li><a href="http://muqingren.iteye.com/" title="muqingren" target="_blank">muqingren</a>： 我没用过这个组件，抱歉
<a href="http://liuzhiyi7288.iteye.com/blog/1290155#bc2252321" target="_blank">openOffice conversion failed: could not load input document</a></li>
<li><a href="http://muqingren.iteye.com/" title="muqingren" target="_blank">muqingren</a>： 辛苦
<a href="http://liuzhiyi7288.iteye.com/blog/1334978#bc2252320" target="_blank">from branch merge to trunk</a></li>
<li><a href="http://muqingren.iteye.com/" title="muqingren" target="_blank">muqingren</a>： ...
<a href="http://liuzhiyi7288.iteye.com/blog/1334978#bc2252317" target="_blank">from branch merge to trunk</a></li>
<li><a href="http://chinacq.iteye.com/" title="chinacq" target="_blank">chinacq</a>： 我没有用到 XComponent document，但是上传有 ...
<a href="http://liuzhiyi7288.iteye.com/blog/1290155#bc2248988" target="_blank">openOffice conversion failed: could not load input document</a></li>
<li><a href="http://solomon.iteye.com/" title="solomon" target="_blank">solomon</a>：   不错，雪中送炭。　
<a href="http://liuzhiyi7288.iteye.com/blog/1135001#bc2225743" target="_blank">CAS 返回多个信息为空</a>
声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。若作者同意转载，必须以超链接形式标明文章原始出处和作者。
© 2003-2011 ITeye.com. All rights reserved. [ 京ICP证110151号 京公网安备110105010620 ]
<img src="" alt=""></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/CAS/">CAS</a></li></span></span> | <span class="tags">Tagged <a href="/tags/CAS/" class="label label-primary">CAS</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-CAS--CAS返回多个信息为空--ITeye技术网站2/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-CAS--CAS返回多个信息为空--ITeye技术网站2" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/88/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/86/">86</a></li><li><a class="page-number" href="/page/87/">87</a></li><li><a class="page-number" href="/page/88/">88</a></li><li class="active"><li><span class="page-number current">89</span></li><li><a class="page-number" href="/page/90/">90</a></li><li><a class="page-number" href="/page/91/">91</a></li><li><a class="page-number" href="/page/92/">92</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/90/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 13:06:28</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
