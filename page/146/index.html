
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 146 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-框架汇总-ORM-hibernate--Hibernate的体系结构与分析、工作原理/">Hibernate的体系结构与分析、工作原理</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:29.000Z"> <a href="/2014/02/02/2014-02-02-框架汇总-ORM-hibernate--Hibernate的体系结构与分析、工作原理/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="hibernate-">Hibernate的体系结构与分析、工作原理</h1>
<p>本文摘自 李刚 著 《Java EE企业应用实战》</p>
<pre><code>    现在我们知道了一个概念**Hibernate Session**，只有处于**Session**管理下的**POJO**才具有持久化操作能力。当应用程序对于处于**Session**管理下的**POJO**实例执行操作时，**Hibernate**将这种面向对象的操作转换成了持久化操作能力。
</code></pre><p>HIbernate简要的体系结构如下图所示：</p>
<p><img src="" alt=""></p>
<pre><code>    通过上图能够发现HIbernate需要一个**hibernate.properties**文件，该文件用于配置**Hibernate**和数据库连接的信息。还需要一个XML文件，该映射文件确定了持久化类和数据表、数据列之间的想对应关系。
</code></pre><p>除了使用hibernate.properties文件，还可以采用另一种形式的配置文件： <strong>/*.cfg.xml</strong>文件。在实际应用中，采用XML配置文件的方式更加广泛，两种配置文件的实质是一样的。</p>
<pre><code>    Hibernate的持久化解决方案将用户从赤裸裸的JDBC访问中释放出来，用户无需关注底层的JDBC操作，而是以面向对象的方式进行持久层操作。底层数据连接的获得、数据访问的实现、事务控制都无需用户关心。这是一种“全面解决”的体系结构方案，将应用层从底层的JDBC/JTA API中抽象出来。通过配置文件来管理底层的JDBC连接，让Hibernate解决持久化访问的实现。这种“全面解决”方案的体系结构图如图所示：
</code></pre><p><img src="" alt=""></p>
<pre><code>    针对以上的Hibernate全面解决方案架构图：

  （1）**SessionFactory**：**这是Hibernate的关键对象，**它是单个数据库映射关系经过编译后的内存镜像，它也是**线程安全的**。**它是生成Session的工厂**，本身要应用到ConnectionProvider，该对象可以在进程和集群的级别上，为那些事务之间可以重用的数据提供可选的二级缓存。

  （2）**Session**：它是应用程序和持久存储层之间交互操作的一个单线程对象。它也是Hibernate持久化操作的关键对象，所有的持久化对象必须在Session的管理下才能够进行持久化操作。**此对象的生存周期很短，其隐藏了JDBC连接，也是Transaction 的工厂。Session对象有一个一级缓存，现实执行Flush之前，所有的持久化操作的数据都在缓存中Session对象处。**

  （3）**持久化对象**：系统创建的POJO实例一旦与特定Session关联，并对应数据表的指定记录，那该对象就处于持久化状态，这一系列的对象都被称为持久化对象。程序中对持久化对象的修改，都将自动转换为持久层的修改。**持久化对象完全可以是普通的Java Beans/POJO，唯一的特殊性是它们正与Session关联着。**

  （4）**瞬态对象和脱管对象**：系统进行new关键字进行创建的Java 实例，没有Session 相关联，此时处于瞬态。瞬态实例可能是在被应用程序实例化后，尚未进行持久化的对象。如果一个曾今持久化过的实例，但因为Session的关闭而转换为脱管状态。

  （5）**事务(Transaction)**：代表一次原子操作，它具有数据库事务的概念。但它通过抽象，将应用程序从底层的具体的JDBC、JTA和CORBA事务中隔离开。在某些情况下，一个Session 之内可能包含多个Transaction对象。虽然事务操作是可选的，但是所有的持久化操作都应该在事务管理下进行，即使是只读操作。

  （6）**连接提供者(ConnectionProvider)：****它是生成JDBC的连接的工厂，同时具备连接池的作用。他通过抽象将底层的DataSource和DriverManager隔离开。这个对象无需应用程序直接访问，仅在应用程序需要扩展时使用。**

  （7）事务工厂(TransactionFactory)：他是生成Transaction对象实例的工厂。该对象也无需应用程序的直接访问。
</code></pre><p>来源： <a href="[http://blog.csdn.net/titilover/article/details/6920457](http://blog.csdn.net/titilover/article/details/6920457)">[http://blog.csdn.net/titilover/article/details/6920457](http://blog.csdn.net/titilover/article/details/6920457)</a> </p>
<pre><code>前面说了一些宏观上学习框架相关的思想方面的东西，下面继续来介绍我经常使用的框架和框架的分析，这篇博客主要介绍的是hibernate框架。

  首先说hibernate框架是数据持久层的框架，这个框架是非常强大的，它让编程人员纯粹的用面向对象的方式来做开发，让编程人员所面对的都是对象。仅仅从这一点它的设计思路就是非常让编程人员喜爱的。

  回想我们普通的开发流程，和客户沟通定需求，抽象出来原型，从原型中建立数据模型到库表结构的建立，之后在映射成对象模型，之后在用oo的设计思想完成后续的程序开发。但是当我们使用了hibernate框架以后，原先的设计思路就显得不再那么具有优势了。我们直接建立对象模型，之后利用hibernate框架映射成数据模型，我们不再去考虑数据库关系模型的东西，仅仅考虑的东西仅仅就是类和对象，这样的开发才是面向对象的开发，也才是最接近人类思考问题的方式。所以hibernate框架的设计思路是非常好的。

    hibernate框架设计思路的优越性其实体现在了它本身的框架的原理上。hibernate封装了JDBC，减轻了开发人员在持久层的大量重复性工作，它利用了java反射机制来实现程序的透明性；它就是通过这两点才达到从对象出发而非关系数据库出发的效果。



  介绍这么多理论性的东西之后我们能够感觉到hibernate框架的强大，来看看它的结构图：
</code></pre><p><img src="" alt=""></p>
<pre><code>   在hibernate框架中有几个比较重要的接口和类：
</code></pre><ol>
<li><p>Query接口：Query负责执行各种数据库查询。它可以使用HQL语句或SQL语句两种表达方式。</p>
</li>
<li><p>Configuration类：Configuration类负责配置并启动Hibernate，创建SessionFactory对象</p>
</li>
<li><p>SessionFactory接口：SessionFactory接口负责初始化Hibernate。它充当数据存储源的代理，并负责创建Session对象</p>
</li>
<li><p>Session接口：Session接口负责执行被持久化对象的CRUD操作</p>
</li>
<li><p>Transaction接口：Transaction接口负责事务相关的操作</p>
</li>
</ol>
<pre><code>     hibernate框架就是在利用这几个接口来封装了JDBC，而且我们用这些接口来操作数据库变得非常简单，减少了我们在持久层的代码量。

   从这个结构图和我的一些分析就能发现hibernate框架是非常强大，而且它给我们开发人员的开发带来了非常大的便利，尤其是他的设计思路还有它的“全自动”的映射对象模型和关系模型。

   但是hibernate框架也有它的一些缺点：
</code></pre><ol>
<li><p>既然是封装了JDBC，所以很明显它没有JDBC的效率高，尤其是在大量的处理表更新操作的时候。</p>
</li>
<li><p>它有局限性，一个持久化类不能映射多个表</p>
</li>
<li>它应对大数量的时候显得非常笨拙，这一点没有JDBC和接下来要介绍的IBatis框架</li>
</ol>
<pre><code>   其实一项技术或者一个框架都有它的优缺点，选择最合适的才是王道。
</code></pre><p>来源： <a href="[http://blog.csdn.net/lfsf802/article/details/7941958](http://blog.csdn.net/lfsf802/article/details/7941958)">[http://blog.csdn.net/lfsf802/article/details/7941958](http://blog.csdn.net/lfsf802/article/details/7941958)</a> </p>
<p>Hibernate工作原理：</p>
<p>1.Hibernate 的初始化.</p>
<p>读取Hibernate 的配置信息-〉创建Session Factory</p>
<p>1)创建Configeration类的实例：</p>
<p>它的构造方法：将配置信息(Hibernate config.xml)读入到内存。 
一个Configeration 实例代表Hibernate 所有Java类到Sql数据库映射的集合。</p>
<p>2)创建SessionFactory实例：</p>
<p>把Configeration 对象中的所有配置信息拷贝到SessionFactory的缓存中。 
SessionFactory的实例代表一个数据库存储员源，创建后不再与Configeration 对象关联。</p>
<p>3)调用SessionFactory创建Session的方法：</p>
<pre><code>    1】用户自行提供JDBC连接。

    Connection con=dataSource.getConnection();
    Session s=sessionFactory.openSession(con);

    2】让SessionFactory提供连接

    Session s=sessionFactory.openSession();
</code></pre><p>4)通过Session 接口提供的各种方法来操纵数据库访问。</p>
<p>Hibernate 的缓存体系</p>
<p>一级缓存：</p>
<p>Session 有一个内置的缓存，其中存放了被当前工作单元加载的对象。 
每个Session 都有自己独立的缓存，且只能被当前工作单元访问。</p>
<p>二级缓存：</p>
<p>SessionFactory的外置的可插拔的缓存插件。其中的数据可被多个Session共享访问。</p>
<p>SessionFactory的内置缓存：存放了映射元数据，预定义的Sql语句。</p>
<p>Hibernate 中Java对象的状态</p>
<p>1.临时状态 (transient)</p>
<p>特征：</p>
<p>1】不处于Session 缓存中
2】数据库中没有对象记录</p>
<p>Java如何进入临时状态</p>
<p>1】通过new语句刚创建一个对象时 
2】当调用Session 的delete()方法，从Session 缓存中删除一个对象时。</p>
<p>2.持久化状态(persisted)</p>
<p>特征：</p>
<p>1】处于Session 缓存中 
2】持久化对象数据库中设有对象记录 
3】Session 在特定时刻会保持二者同步</p>
<p>Java如何进入持久化状态</p>
<p>1】Session 的save()把临时－》持久化状态 
2】Session 的load(),get()方法返回的对象 
3】Session 的find()返回的list集合中存放的对象 
4】Session 的update(),saveOrupdate()使游离－》持久化</p>
<p>3.游离状态(detached)</p>
<p>特征：</p>
<p>1】不再位于Session 缓存中 
2】游离对象由持久化状态转变而来，数据库中可能还有对应记录。</p>
<p>Java如何进入持久化状态－》游离状态</p>
<p>1】Session 的close()方法 
2】Session 的evict()方法，从缓存中删除一个对象。提高性能。少用。</p>
<p>总结一下Hibernate的好处：</p>
<p>1.JDBC访问数据库的代码做了封装，大大简化了数据访问层繁琐的重复性代码。</p>
<ol>
<li><p>Hibernate是一个基于JDBC的主流持久化框架，是一个优秀的ORM实现。他很大程度的简化DAO层的编码工作</p>
</li>
<li><p>hibernate使用Java反射机制，而不是字节码增强程序来实现透明性。</p>
</li>
<li><p>hibernate的性能非常好，因为它是个轻量级框架。映射的灵活性很出色。它支持各种关系数据库，从一对一到多对多的各种复杂关系。
来源： <a href="[http://www.linuxidc.com/Linux/2012-12/76684.htm](http://www.linuxidc.com/Linux/2012-12/76684.htm)">[http://www.linuxidc.com/Linux/2012-12/76684.htm](http://www.linuxidc.com/Linux/2012-12/76684.htm)</a> </p>
</li>
</ol>
<p><img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/框架汇总/">框架汇总</a></li></span><span class="breadcrumb"><li><a href="/categories/框架汇总/">框架汇总</a></li><li><a href="/categories/框架汇总/ORM/">ORM</a></li><li><a href="/categories/框架汇总/ORM/hibernate/">hibernate</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ORM/" class="label label-primary">ORM</a><a href="/tags/hibernate/" class="label label-success">hibernate</a><a href="/tags/框架汇总/" class="label label-info">框架汇总</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:29"datetime="2014-03-07 09:54:29"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-框架汇总-ORM-hibernate--Hibernate的体系结构与分析、工作原理/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-框架汇总-ORM-hibernate--Hibernate的体系结构与分析、工作原理" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-框架汇总-ORM-ibatis--IbatisSqlExecutorexecuteQuery/">Ibatis SqlExecutor.executeQuery</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:29.000Z"> <a href="/2014/02/02/2014-02-02-框架汇总-ORM-ibatis--IbatisSqlExecutorexecuteQuery/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="ibatis-sqlexecutor-executequery">Ibatis SqlExecutor.executeQuery</h1>
<h1 id="-"><a href="">小猫的窝棚</a></h1>
<h1 id="-">#</h1>
<ul>
<li><a href=""><img src="" alt="">目录视图</a></li>
<li><a href=""><img src="" alt="">摘要视图</a></li>
<li><a href=""><img src="" alt="">订阅</a>
<a href="http://blog.csdn.net/csdnproduct/article/details/6692206" target="_blank">公告：新版下载频道介绍之二——上传和下载资源页面介绍</a>                 <a href="http://g.csdn.net/5193964" target="_blank">bShare分享，迅速提升10倍流量</a></li>
</ul>
<h3 id="-ibatis-sqlexecutor-executequery-zz-ibatis-sqlexecutor-executequery-zz-"><a href="&quot;Ibatis SqlExecutor.executeQuery(ZZ">Ibatis SqlExecutor.executeQuery(ZZ)</a>&quot;)</h3>
<p>分类： <a href="">Java</a>  2008-07-28 10:37 688人阅读 <a href="">评论</a>(1) <a href="&quot;收藏&quot;">收藏</a> <a href="&quot;举报&quot;">举报</a></p>
<p>一直以来ibatis的分页都是通过滚动ResultSet实现的，应该算是逻辑分页吧。逻辑分页虽然能很干净地独立于特定数据库，但效率在多数情况下不及特定数据库支持的物理分页，而hibernate的分页则是直接组装sql，充分利用了特定数据库的分页机制，效率相对较高。本文讲述的就是如何在不重新编译ibatis源码的前提下，为ibatis引入hibernate式的物理分页机制。 基本思路就是找到ibatis执行sql的地方，截获sql并重新组装sql。通过分析ibatis源码知道，最终负责执行sql的类是com.ibatis.sqlmap.engine.execution.SqlExecutor，此类没有实现任何接口，这多少有点遗憾，因为接口是相对稳定契约，非大的版本更新，接口一般是不会变的，而类就相对易变一些，所以这里的代码只能保证对当前版本（2.1.7）的ibatis有效。下面是SqlExecutor执行查询的方法： //<em>/</em> /<em> Long form of the method to execute a query /</em> /<em> @param request - the request scope /</em> @param conn - the database connection /<em> @param sql - the SQL statement to execute /</em> @param parameters - the parameters for the statement /<em> @param skipResults - the number of results to skip /</em> @param maxResults - the maximum number of results to return /<em> @param callback - the row handler for the query /</em> /<em> @throws SQLException - if the query fails /</em>/ public void executeQuery(RequestScope request, Connection conn, String sql, Object[] parameters, int skipResults, int maxResults, RowHandlerCallback callback) throws SQLException { ErrorContext errorContext = request.getErrorContext(); errorContext.setActivity(&quot;executing query&quot;); errorContext.setObjectId(sql); PreparedStatement ps = null; ResultSet rs = null; try { errorContext.setMoreInfo(&quot;Check the SQL Statement (preparation failed).&quot;); Integer rsType = request.getStatement().getResultSetType(); if (rsType != null) { ps = conn.prepareStatement(sql, rsType.intValue(), ResultSet.CONCUR_READ_ONLY); } else { ps = conn.prepareStatement(sql); } Integer fetchSize = request.getStatement().getFetchSize(); if (fetchSize != null) { ps.setFetchSize(fetchSize.intValue()); } errorContext.setMoreInfo(&quot;Check the parameters (set parameters failed).&quot;); request.getParameterMap().setParameters(request, ps, parameters); errorContext.setMoreInfo(&quot;Check the statement (query failed).&quot;); ps.execute(); rs = getFirstResultSet(ps); if (rs != null) { errorContext.setMoreInfo(&quot;Check the results (failed to retrieve results).&quot;); handleResults(request, rs, skipResults, maxResults, callback); } // clear out remaining results while (ps.getMoreResults()); } finally { try { closeResultSet(rs); } finally { closeStatement(ps); } } } 其中handleResults(request, rs, skipResults, maxResults, callback)一句用于处理分页，其实此时查询已经执行完毕，可以不必关心handleResults方法，但为清楚起见，下面来看看handleResults的实现： private void handleResults(RequestScope request, ResultSet rs, int skipResults, int maxResults, RowHandlerCallback callback) throws SQLException { try { request.setResultSet(rs); ResultMap resultMap = request.getResultMap(); if (resultMap != null) { // Skip Results if (rs.getType() != ResultSet.TYPE_FORWARD_ONLY) { if (skipResults &gt; 0) { rs.absolute(skipResults); } } else { for (int i = 0; i &lt; skipResults; i++) { if (!rs.next()) { break; } } } // Get Results int resultsFetched = 0; while ((maxResults == SqlExecutor.NO_MAXIMUM_RESULTS || resultsFetched &lt; maxResults) &amp;&amp; rs.next()) { Object[] columnValues = resultMap.resolveSubMap(request, rs).getResults(request, rs); callback.handleResultObject(request, columnValues, rs); resultsFetched++; } } } finally { request.setResultSet(null); } } 此处优先使用的是ResultSet的absolute方法定位记录，是否支持absolute取决于具体数据库驱动，但一般当前版本的数据库都支持该方法，如果不支持则逐条跳过前面的记录。由此可以看出如果数据库支持absolute，则ibatis内置的分页策略与特定数据库的物理分页效率差距就在于物理分页查询与不分页查询在数据库中的执行效率的差距了。因为查询执行后读取数据前数据库并未把结果全部返回到内存，所以本身在存储占用上应该差距不大，如果都使用索引，估计执行速度也差不太多。 继续我们的话题。其实只要在executeQuery执行前组装sql，然后将其传给executeQuery，并告诉handleResults我们不需要逻辑分页即可。拦截executeQuery可以采用aop动态实现，也可直接继承SqlExecutor覆盖executeQuery来静态地实现，相比之下后者要简单许多，而且由于SqlExecutor没有实现任何接口，比较易变，动态拦截反到增加了维护的工作量，所以我们下面来覆盖executeQuery： package com.aladdin.dao.ibatis.ext; import java.sql.Connection; import java.sql.SQLException; import org.apache.commons.logging.Log; import org.apache.commons.logging.LogFactory; import com.aladdin.dao.dialect.Dialect; import com.ibatis.sqlmap.engine.execution.SqlExecutor; import com.ibatis.sqlmap.engine.mapping.statement.RowHandlerCallback; import com.ibatis.sqlmap.engine.scope.RequestScope; public class LimitSqlExecutor extends SqlExecutor { private static final Log logger = LogFactory.getLog(LimitSqlExecutor.class); private Dialect dialect; private boolean enableLimit = true; public Dialect getDialect() { return dialect; } public void setDialect(Dialect dialect) { this.dialect = dialect; } public boolean isEnableLimit() { return enableLimit; } public void setEnableLimit(boolean enableLimit) { this.enableLimit = enableLimit; } @Override public void executeQuery(RequestScope request, Connection conn, String sql, Object[] parameters, int skipResults, int maxResults, RowHandlerCallback callback) throws SQLException { if ((skipResults != NO_SKIPPED_RESULTS || maxResults != NO_MAXIMUM_RESULTS) &amp;&amp; supportsLimit()) { sql = dialect.getLimitString(sql, skipResults, maxResults); if(logger.isDebugEnabled()){ logger.debug(sql); } skipResults = NO_SKIPPED_RESULTS; maxResults = NO_MAXIMUM_RESULTS; } super.executeQuery(request, conn, sql, parameters, skipResults, maxResults, callback); } public boolean supportsLimit() { if (enableLimit &amp;&amp; dialect != null) { return dialect.supportsLimit(); } return false; } } 其中： skipResults = NO_SKIPPED_RESULTS; maxResults = NO_MAXIMUM_RESULTS; 告诉handleResults不分页（我们组装的sql已经使查询结果是分页后的结果了），此处引入了类似hibenate中的数据库方言接口Dialect，其代码如下： package com.aladdin.dao.dialect; public interface Dialect { public boolean supportsLimit(); public String getLimitString(String sql, boolean hasOffset); public String getLimitString(String sql, int offset, int limit); } 下面为Dialect接口的MySQL实现： package com.aladdin.dao.dialect; public class MySQLDialect implements Dialect { protected static final String SQL_END_DELIMITER = &quot;;&quot;; public String getLimitString(String sql, boolean hasOffset) { return new StringBuffer(sql.length() + 20).append(trim(sql)).append( hasOffset ? &quot; limit ?,?&quot; : &quot; limit ?&quot;) .append(SQL_END_DELIMITER).toString(); } public String getLimitString(String sql, int offset, int limit) { sql = trim(sql); StringBuffer sb = new StringBuffer(sql.length() + 20); sb.append(sql); if (offset &gt; 0) { sb.append(&quot; limit &quot;).append(offset).append(&#39;,&#39;).append(limit) .append(SQL_END_DELIMITER); } else { sb.append(&quot; limit &quot;).append(limit).append(SQL_END_DELIMITER); } return sb.toString(); } public boolean supportsLimit() { return true; } private String trim(String sql) { sql = sql.trim(); if (sql.endsWith(SQL_END_DELIMITER)) { sql = sql.substring(0, sql.length() - 1 - SQL_END_DELIMITER.length()); } return sql; } } 接下来的工作就是把LimitSqlExecutor注入ibatis中。我们是通过spring来使用ibatis的，所以在我们的dao基类中执行注入，代码如下： package com.aladdin.dao.ibatis; import java.io.Serializable; import java.util.List; import org.springframework.orm.ObjectRetrievalFailureException; import org.springframework.orm.ibatis.support.SqlMapClientDaoSupport; import com.aladdin.dao.ibatis.ext.LimitSqlExecutor; import com.aladdin.domain.BaseObject; import com.aladdin.util.ReflectUtil; import com.ibatis.sqlmap.client.SqlMapClient; import com.ibatis.sqlmap.engine.execution.SqlExecutor; import com.ibatis.sqlmap.engine.impl.ExtendedSqlMapClient; public abstract class BaseDaoiBatis extends SqlMapClientDaoSupport { private SqlExecutor sqlExecutor; public SqlExecutor getSqlExecutor() { return sqlExecutor; } public void setSqlExecutor(SqlExecutor sqlExecutor) { this.sqlExecutor = sqlExecutor; } public void setEnableLimit(boolean enableLimit) { if (sqlExecutor instanceof LimitSqlExecutor) { ((LimitSqlExecutor) sqlExecutor).setEnableLimit(enableLimit); } } public void initialize() throws Exception { if (sqlExecutor != null) { SqlMapClient sqlMapClient = getSqlMapClientTemplate() .getSqlMapClient(); if (sqlMapClient instanceof ExtendedSqlMapClient) { ReflectUtil.setFieldValue(((ExtendedSqlMapClient) sqlMapClient) .getDelegate(), &quot;sqlExecutor&quot;, SqlExecutor.class, sqlExecutor); } } } ... } 其中的initialize方法执行注入，稍后会看到此方法在spring Beans 配置中指定为init-method。由于sqlExecutor是com.ibatis.sqlmap.engine.impl.ExtendedSqlMapClient的私有成员，且没有公开的set方法，所以此处通过反射绕过java的访问控制，下面是ReflectUtil的实现代码： package com.aladdin.util; import java.lang.reflect.Field; import java.lang.reflect.Method; import java.lang.reflect.Modifier; import org.apache.commons.logging.Log; import org.apache.commons.logging.LogFactory; public class ReflectUtil { private static final Log logger = LogFactory.getLog(ReflectUtil.class); public static void setFieldValue(Object target, String fname, Class ftype, Object fvalue) { if (target == null || fname == null || &quot;&quot;.equals(fname) || (fvalue != null &amp;&amp; !ftype.isAssignableFrom(fvalue.getClass()))) { return; } Class clazz = target.getClass(); try { Method method = clazz.getDeclaredMethod(&quot;set&quot; + Character.toUpperCase(fname.charAt(0)) + fname.substring(1), ftype); if (!Modifier.isPublic(method.getModifiers())) { method.setAccessible(true); } method.invoke(target, fvalue); } catch (Exception me) { if (logger.isDebugEnabled()) { logger.debug(me); } try { Field field = clazz.getDeclaredField(fname); if (!Modifier.isPublic(field.getModifiers())) { field.setAccessible(true); } field.set(target, fvalue); } catch (Exception fe) { if (logger.isDebugEnabled()) { logger.debug(fe); } } } } }<PRE></p>
<p>到此剩下的就是通过Spring将sqlExecutor注入BaseDaoiBatis中了，下面是Spring Beans配置文件： &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; <BEANS> <!-- Transaction manager for a single JDBC DataSource --> <BEAN class=org.springframework.jdbc.datasource.DataSourceTransactionManager id=transactionManager> <property name="dataSource"> <REF bean="dataSource" /> </property> </bEAN> <!-- SqlMap setup for iBATIS Database Layer --> <BEAN class=org.springframework.orm.ibatis.SqlMapClientFactoryBean id=sqlMapClient> <property name="configLocation"> <VALUE>classpath:/com/aladdin/dao/ibatis/sql-map-config.xml</vALUE> </property> <property name="dataSource"> <REF bean="dataSource" /> </property> </bEAN> <BEAN class=com.aladdin.dao.ibatis.ext.LimitSqlExecutor id=sqlExecutor> <property name="dialect"> <BEAN class=com.aladdin.dao.dialect.MySQLDialect /> </property> </bEAN> <BEAN class=com.aladdin.dao.ibatis.BaseDaoiBatis id=baseDao init-method="initialize" abstract="true"> <property name="dataSource"> <REF bean="dataSource" /> </property> <property name="sqlMapClient"> <REF bean="sqlMapClient" /> </property> <property name="sqlExecutor"> <REF bean="sqlExecutor" /> </property> </bEAN> <BEAN class=com.aladdin.dao.ibatis.UserDaoiBatis id=userDao parent="baseDao" /> <BEAN class=com.aladdin.dao.ibatis.RoleDaoiBatis id=roleDao parent="baseDao" /> <BEAN class=com.aladdin.dao.ibatis.ResourceDaoiBatis id=resourceDao parent="baseDao" /> </bEANS><PRE></p>
<p>此后就可以通过调用org.springframework.orm.ibatis.SqlMapClientTemplate的 public List queryForList(final String statementName, final Object parameterObject, final int skipResults, final int maxResults) throws DataAccessException 或 public PaginatedList queryForPaginatedList(final String statementName, final Object parameterObject, final int pageSize) throws DataAccessException 得到分页结果了。建议使用第一个方法，第二个方法返回的是PaginatedList，虽然使用简单，但是其获得指定页的数据是跨过我们的dao直接访问ibatis的，不方便统一管理。 <PRE></p>
<ul>
<li>上一篇：<a href="http://blog.csdn.net/fulianglove/article/details/2708480" target="_blank">Table的一些不常用的属性(ZZ)</a></li>
<li>下一篇：<a href="http://blog.csdn.net/fulianglove/article/details/2722784" target="_blank">海量数据库的查询优化(ZZ)</a>
查看评论<a href=""></a></li>
</ul>
<p>/* 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场</p>
<p>个人资料</p>
<p><a href="&quot;我的博客主页&quot;"><img src="" alt=""></a>
fulianglove</p>
<ul>
<li>访问：19467次</li>
<li>积分：496分</li>
<li><p>排名：第13741名</p>
</li>
<li><p>原创：22篇</p>
</li>
<li>转载：32篇</li>
<li>译文：0篇</li>
<li>评论：24条</li>
</ul>
<p>文章搜索</p>
<p><a href=""></a>
文章分类</p>
<ul>
<li><a href="http://blog.csdn.net/fulianglove/article/category/404780" target="_blank">.NET</a>(3)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/category/400749" target="_blank">Java</a>(24)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/category/417945" target="_blank">JavaScript</a>(9)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/category/403582" target="_blank">Rails/Ruby</a>(0)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/category/403569" target="_blank">Spring</a>(1)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/category/400748" target="_blank">sql</a>(5)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/category/440985" target="_blank">数据库</a>(1)</li>
</ul>
<p>文章存档</p>
<ul>
<li><a href="http://blog.csdn.net/fulianglove/article/month/2009/02" target="_blank">2009年02月</a>(1)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/month/2009/01" target="_blank">2009年01月</a>(2)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/month/2008/12" target="_blank">2008年12月</a>(2)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/month/2008/10" target="_blank">2008年10月</a>(6)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/month/2008/09" target="_blank">2008年09月</a>(5)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/month/2008/08" target="_blank">2008年08月</a>(9)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/month/2008/07" target="_blank">2008年07月</a>(10)</li>
<li><a href="http://blog.csdn.net/fulianglove/article/month/2008/06" target="_blank">2008年06月</a>(14)</li>
<li><p><a href="http://blog.csdn.net/fulianglove/article/month/2008/05" target="_blank">2008年05月</a>(5)
阅读排行</p>
</li>
<li><p><a href="&quot;sqlserver中判断表是否存在&quot;">sqlserver中判断表是否存在</a> (2489)</p>
</li>
<li><a href="&quot;js获取鼠标点击位置(很旧很旧。。。">js获取鼠标点击位置(很旧很旧。。。)</a>&quot;) (1487)</li>
<li><a href="&quot;Response下载Content－type：HTTP相应的Content类型(转贴">Response下载Content－ty...</a>&quot;) (1330)</li>
<li><a href="&quot;js利用object标签显示动态图片&quot;">js利用object标签显示动态图片</a> (1089)</li>
<li><a href="&quot;Spring+Ibatis集成 &quot;">Spring+Ibatis集成</a> (910)</li>
<li><a href="&quot;EHCache使用(收集ZZ">EHCache使用(收集ZZ)</a>&quot;) (894)</li>
<li><a href="&quot;window.print(">window.print()使用</a>使用&quot;) (808)</li>
<li><a href="&quot;JSP中文件下载(转贴">JSP中文件下载(转贴)</a> &quot;) (745)</li>
<li><a href="&quot;java LinkedList分析(ZZ">java LinkedList分析(ZZ...</a>&quot;) (690)</li>
<li><a href="&quot;Ibatis SqlExecutor.executeQuery(ZZ">Ibatis SqlExecutor.e...</a>&quot;) (687)</li>
</ul>
<p>评论排行</p>
<ul>
<li><a href="&quot;如何正确的使用Java序列化技术(转贴">如何正确的使用Java序列化技术(转贴)</a>&quot;) (5)</li>
<li><a href="&quot;Oracle,Sql Server, MySql, DB2使用sql分页(ZZ">Oracle,Sql Server, M...</a>&quot;) (4)</li>
<li><a href="&quot;js获取鼠标点击位置(很旧很旧。。。">js获取鼠标点击位置(很旧很旧。。。)</a>&quot;) (3)</li>
<li><a href="&quot;js利用object标签显示动态图片&quot;">js利用object标签显示动态图片</a> (2)</li>
<li><a href="&quot;sqlserver中判断表是否存在&quot;">sqlserver中判断表是否存在</a> (2)</li>
<li><a href="&quot;JSP中文件下载(转贴">JSP中文件下载(转贴)</a> &quot;) (2)</li>
<li><a href="&quot;重复提交解决办法&quot;">重复提交解决办法</a> (1)</li>
<li><a href="&quot;动态为表格添加行&quot;">动态为表格添加行</a> (1)</li>
<li><a href="&quot;JS 事件注册&quot;">JS 事件注册</a> (1)</li>
<li><p><a href="&quot;EHCache使用(收集ZZ">EHCache使用(收集ZZ)</a>&quot;) (1)
最新评论</p>
</li>
<li><p><a href=""></a></p>
</li>
<li><a href=""></a></li>
<li><a href=""></a></li>
<li><a href=""></a></li>
<li><a href="">不错，</a></li>
<li><a href=""></a></li>
<li><a href=""></a></li>
<li><a href=""></a></li>
<li><a href="">怎么不写了？</a></li>
<li><a href="&quot;SELECT *FROM person WHERE uid LIKE ? OR name LIKE ? limit" title=" (currentPage-1)*lineSize &quot;,&quot; lineSizemysql这样，sql2005该怎样表示啊？？？">SELECT /*FROM pe...</a></li>
</ul>
<p>.NET</p>
<ul>
<li><p><a href="http://www.cnblogs.com/abei108/archive/2006/09/12/422125.html" target="_blank">AjaxPage--Asp.Net2.0中的Callback机制</a>
JavaScript</p>
</li>
<li><p><a href="http://www.ajaxjs.com/docs/docs/" target="_blank">ExtJs</a></p>
</li>
</ul>
<p>java技术链接</p>
<ul>
<li><a href="http://scottding.blog.chinajavaworld.com/entry.jspa?id=2992" target="_blank">[Java原型数据类型在分布式Cache中的同步处理]</a></li>
<li><a href="https://www6.software.ibm.com/developerworks/cn/education/java/j-nio/tutorial/index.html" target="_blank">JAVA NIO入门</a></li>
<li><a href="http://www.w3school.com.cn/htmldom/dom_obj_object.asp" target="_blank">HTML DOM Object 对象</a></li>
<li><a href="http://dotnet.aspx.cc/ShowList.aspx?id=1&amp;page=1" target="_blank">孟宪会之精彩世界[.Net版]</a></li>
<li><a href="http://hbcui1984.javaeye.com/blog/56496" target="_blank">java读取配置文件的几种方法</a></li>
<li><a href="http://hi.baidu.com/fanyouan/blog/item/b1743e2e2e2bc5504fc226dd.html" target="_blank">HTML DOM Object 对象(2)</a></li>
<li><a href="http://www.infomall.cn/cgi-bin/mallgate/20040514/http://hedong.3322.org/archives/000333.html" target="_blank">Digester学习笔记(一)BY竹笋炒肉</a></li>
<li><a href="http://www.infomall.cn/cgi-bin/mallgate/20040514/http://hedong.3322.org/archives/000336.html" target="_blank">Digester学习笔记(二)BY竹笋炒肉</a></li>
<li><a href="http://www.infomall.cn/cgi-bin/mallgate/20040514/http://hedong.3322.org/archives/000337.html" target="_blank">Digester学习笔记(三)BY竹笋炒肉</a></li>
<li><a href="http://www.infomall.cn/cgi-bin/mallgate/20040514/http://hedong.3322.org/archives.html" target="_blank">博客文章BY竹笋炒肉</a></li>
<li><a href="http://gemini.javaeye.com/blog/163747" target="_blank">Struts处理请求全过程</a></li>
<li><a href="http://www-128.ibm.com/developerworks/cn/" target="_blank">IBM developerWorks 中国</a></li>
<li><a href="http://www.javaeye.com/topic/55844" target="_blank">利用java操作Excel文件</a></li>
<li><a href="http://www.blogjava.net/i369/articles/182041.html" target="_blank">获取Java文件路径</a></li>
<li><p><a href="http://blog.csdn.net/apicescn/archive/2007/12/04/1916551.aspx" target="_blank">Spring+Ibatis集成开发实例</a>
Protocol Buffers</p>
</li>
<li><p><a href="http://hellobmw.com/archives/protocol-buffers-based-addressbook.html" target="_blank">北极冰仔部落格--[第一个 Protocol Buffers 小程序：电话本]</a></p>
</li>
<li><a href="http://code.google.com/apis/protocolbuffers/docs/javatutorial.html" target="_blank">Protocol Buffer Basics: Java</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/框架汇总/">框架汇总</a></li></span><span class="breadcrumb"><li><a href="/categories/框架汇总/">框架汇总</a></li><li><a href="/categories/框架汇总/ORM/">ORM</a></li><li><a href="/categories/框架汇总/ORM/ibatis/">ibatis</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ORM/" class="label label-primary">ORM</a><a href="/tags/ibatis/" class="label label-success">ibatis</a><a href="/tags/框架汇总/" class="label label-info">框架汇总</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:29"datetime="2014-03-07 09:54:29"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-框架汇总-ORM-ibatis--IbatisSqlExecutorexecuteQuery/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-框架汇总-ORM-ibatis--IbatisSqlExecutorexecuteQuery" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-框架汇总-ORM-ibatis--ibatis学习（三）-ibatis与spring的整合-joe-专注java-开源-架/">ibatis学习（三）</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:29.000Z"> <a href="/2014/02/02/2014-02-02-框架汇总-ORM-ibatis--ibatis学习（三）-ibatis与spring的整合-joe-专注java-开源-架/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="ibatis-ibatis-spring-joe-java-blogjava">ibatis学习（三）---ibatis与spring的整合 - joe --专注java,开源,架构,项目管理 - BlogJava</h1>
<h1 id="-joe-java-http-www-blogjava-net-freeman1984-"><a href="http://www.blogjava.net/freeman1984/" target="_blank">joe --专注java,开源,架构,项目管理</a></h1>
<p>STANDING ON THE SHOULDERS OF GIANTS</p>
<p>posts - 339, comments - 292, trackbacks - 0, articles - 1  <a href="http://www.blogjava.net/" target="_blank">BlogJava</a> :: <a href="http://www.blogjava.net/freeman1984/" target="_blank">首页</a> :: <a href="http://www.blogjava.net/freeman1984/admin/EditPosts.aspx?opt=1" target="_blank">新随笔</a> :: <a href="http://www.blogjava.net/freeman1984/contact.aspx?id=1" target="_blank">联系</a> :: <a href="http://www.blogjava.net/freeman1984/rss" target="_blank">聚合</a> <a href="http://www.blogjava.net/freeman1984/rss" target="_blank"><img src="" alt=""></a> :: <a href="http://www.blogjava.net/freeman1984/admin/EditPosts.aspx" target="_blank">管理</a> ## <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html" target="_blank">ibatis学习（三）---ibatis与spring的整合</a></p>
<p>Posted on 2007-12-07 18:26 <a href="http://www.blogjava.net/freeman1984/" target="_blank">@joe</a> 阅读(13593) <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#Post" target="_blank">评论(11)</a>  <a href="http://www.blogjava.net/freeman1984/admin/EditPosts.aspx?postid=166112" target="_blank">编辑</a>  <a href="http://www.blogjava.net/freeman1984/AddToFavorite.aspx?id=166112" target="_blank">收藏</a> <img src="" alt=""></p>
<p>Spring通过DAO模式，提供了对iBATIS的良好支持。SqlMapClient对象是iBATIS中的主要对象，我们可以通过配置让spring来管理SqlMapClient对象的创建。</p>
<p>与hibernate类似，Spring 提供了SqlMapClientDaoSupport对象，我们的DAO可以继承这个类，通过它所提供的SqlMapClientTemplate对象来操纵数据库。看起来这些概念都与hibernate类似。</p>
<p>通过SqlMapClientTemplate来操纵数据库的CRUD是没有问题的，这里面关键的问题是事务处理。Spring提供了强大的声明式事务处理的功能，我们已经清楚hibernate中如何配置声明式的事务，那么在iBATIS中如何获得声明式事务的能力呢？</p>
<p>第一，我们需要了解的是spring通过AOP来拦截方法的调用，从而在这些方法上面添加声明式事务处理的能力。典型配置如下：applicationContext-common.xml
    <!-- 配置事务特性 --></p>
<pre><code>&lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;*事务管理器名称*&quot;&gt;

    &lt;tx:attributes&gt;

       &lt;tx:method name=&quot;add/*&quot; propagation=&quot;REQUIRED&quot;/&gt;

       &lt;tx:method name=&quot;del/*&quot; propagation=&quot;REQUIRED&quot;/&gt;

       &lt;tx:method name=&quot;update/*&quot; propagation=&quot;REQUIRED&quot;/&gt;

       &lt;tx:method name=&quot;/*&quot; read-only=&quot;true&quot;/&gt;

   &lt;/tx:attributes&gt;

&lt;/tx:advice&gt;



&lt;!-- 配置哪些类的方法需要进行事务管理 --&gt;

&lt;aop:config&gt;

   &lt;aop:pointcut id=&quot;allManagerMethod&quot; expression=&quot;execution(/* com.ibatis.manager./*./*(..))&quot;/&gt;

   &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;allManagerMethod&quot;/&gt;

&lt;/aop:config&gt;
</code></pre><p>这些事务都是声明在业务逻辑层的对象上的。</p>
<p>第二，我们需要一个事务管理器，对事务进行管理。
    <bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"></p>
<pre><code>&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;

&lt;/bean&gt;

&lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;&gt;

    &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;

    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://127.0.0.1/ibatis&quot;/&gt;

    &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;

    &lt;property name=&quot;password&quot; value=&quot;mysql&quot;/&gt;

&lt;/bean&gt;
</code></pre><p>此后，我们需要让spring来管理SqlMapClient对象：</p>
<pre><code>&lt;bean id=&quot;sqlMapClient&quot; class=&quot;org.springframework.orm.ibatis.SqlMapClientFactoryBean&quot;&gt;

   &lt;property name=&quot;configLocation&quot;&gt;&lt;value&gt;classpath:sqlMapConfig.xml&lt;/value&gt;&lt;/property&gt;

&lt;/bean&gt;
</code></pre><p>我们的sqlMapConfig.xml就可以简写为：</p>
<p>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</p>
<p>&lt;!DOCTYPE sqlMapConfig     </p>
<pre><code>PUBLIC &quot;-//ibatis.apache.org//DTD SQL Map Config 2.0//EN&quot;     

&quot;http://ibatis.apache.org/dtd/sql-map-config-2.dtd&quot;&gt;
</code></pre><sqlMapConfig>

    <settings

       lazyLoadingEnabled="true"

        useStatementNamespaces="true" />

    <!-- 使用spring之后，数据源的配置移植到了spring上，所以iBATIS本身的配置可以取消 -->

  <sqlMap resource="com/ibatis/dao/impl/ibatis/User.xml"/>

</sqlMapConfig>

<p>User.xml:如下</p>
<p>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</p>
<p>&lt;!DOCTYPE sqlMap     </p>
<pre><code>PUBLIC &quot;-//ibatis.apache.org//DTD SQL Map 2.0//EN&quot;     

&quot;http://ibatis.apache.org/dtd/sql-map-2.dtd&quot;&gt;
</code></pre><sqlMap namespace="User">

 <!-- Use type aliases to avoid typing the full classname every time. -->

 <typeAlias alias="User" type="com.ibatis.User"/>

 <!-- Select with no parameters using the result map for Account class. -->

 <select id="selectAllUsers" resultClass="User">

    select /<em> from t_user

 </select>



 <select id="selectUser" resultClass="User" parameterClass="int">

  select /</em> from t_user where id=/#id/#

 </select>



 <insert id="insertUser" parameterClass="User">

  insert into t_user values (

       null,/#username/#,/#password/#

  )

 </insert>



 <update id="updateUser" parameterClass="User">

  update t_user set username = /#username/#,password=/#password/#

  where id=/#id/#

  </update>



 <delete id="deleteUser" parameterClass="int">

  delete from t_user where id=/#id/#

 </delete>

</sqlMap>

<p>我们的DAO的编写：
package com.iabtis.dao.impl.ibatis;</p>
<p>import java.util.List;</p>
<p>import org.springframework.orm.ibatis.support.SqlMapClientDaoSupport;</p>
<p>import com.ibatis.dao.UserDAO;</p>
<p>import com.ibatis.crm.model.User;</p>
<p>public class UserDAOImpl extends SqlMapClientDaoSupport implements UserDAO {</p>
<pre><code>public void select(User user) {

          getSqlMapClientTemplate().delete(&quot;selectUser &quot;,user.getId());

   }
</code></pre><p>   public List findAll() {</p>
<pre><code>          return getSqlMapClientTemplate().queryForList(&quot;selectAllUsers &quot;);

   }

   public void delete(User user) {

          getSqlMapClientTemplate().delete(&quot;deleteUser &quot;,user.getId());

   }

   public void save(User user) {

          getSqlMapClientTemplate().insert(&quot;insertUser &quot;,user);

   }

   public void update(User user) {

          getSqlMapClientTemplate().update(&quot;updateUser &quot;,user);

   }
</code></pre><p>}</p>
<p>继承SqlMapClientDaoSupport，要求我们注入SqlMapClient对象，因此，需要有如下的DAO配置：</p>
<bean id="userDAO" class="com.ibatils.dao.impl.ibatis.UserDAOImpl">

     <property name=”sqlMapClient” ref=”sqlMapClient”/>

</bean>

<p>这就是所有需要注意的问题了，此后就可以在业务逻辑层调用DAO对象了！</p>
<p><a href=""></a></p>
<h3 id="-">评论</h3>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-166209-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-laocat-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#166209" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=laocat" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2007-12-08 09:42 by <a href="">laocat</a></p>
<p>豁然开朗 ！！</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-188269-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-e5-b1-b9-e7-a0-be-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#188269" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=%e5%b1%b9%e7%a0%be" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2008-03-24 16:08 by <a href="http://www.blogjava.net/eli/" target="_blank">屹砾</a></p>
<p>整合的问题现在终于清楚了，
对于advice和aop还有点不清楚。</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-207721-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-e5-86-b7-e6-bc-a0-e5-a4-a7-e7-a5-9e-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#207721" title="permalink: re: ibatis学习（三）---ibatis与spring的整合[未登录]" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合[未登录]  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=%e5%86%b7%e6%bc%a0%e5%a4%a7%e7%a5%9e" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2008-06-13 17:26 by <a href="http://o(â©_â©" target="_blank">冷漠大神</a>o.../)</p>
<p>真是不错的文章啊 如果在在可以把源码提供下载 那就更完美了 :-) 呵呵 是不是有点贪心</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-207724-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-e5-86-b7-e6-bc-a0-e5-a4-a7-e7-a5-9e-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#207724" title="permalink: re: ibatis学习（三）---ibatis与spring的整合[未登录]" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合[未登录]  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=%e5%86%b7%e6%bc%a0%e5%a4%a7%e7%a5%9e" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2008-06-13 17:34 by <a href="http://o(â©_â©" target="_blank">冷漠大神</a>o.../)</p>
<p>有没有代码下载啊？</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-224098-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-379548695qq-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#224098" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=379548695qq" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2008-08-25 11:35 by <a href="">379548695qq</a></p>
<p>UserDAO类里面的内容是什么？</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-260672-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-e8-99-ab-e5-ad-90-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#260672" title="permalink: re: ibatis学习（三）---ibatis与spring的整合[未登录]" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合[未登录]  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=%e8%99%ab%e5%ad%90" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2009-03-19 10:17 by <a href="">虫子</a></p>
<p>正在烦恼中，google到了你的方案！呵呵</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-291041-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-jadmin-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#291041" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=jadmin" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2009-08-13 16:32 by <a href="http://hi.baidu.com/jadmin" target="_blank">jadmin</a></p>
<p>很好，学习了</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-291296-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-e5-8c-b9-e9-a9-ac-e5-8d-95-e6-9e-aa-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#291296" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=%e5%8c%b9%e9%a9%ac%e5%8d%95%e6%9e%aa" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2009-08-15 23:15 by <a href="">匹马单枪</a></p>
<p>好帖， 学习了！</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-293434-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-2-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#293434" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=2" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2009-09-01 13:07 by <a href="">2</a></p>
<p>为什么我的出错了</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-319581-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-test-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#319581" title="permalink: re: ibatis学习（三）---ibatis与spring的整合[未登录]" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合[未登录]  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post">回复</a>  <a href="http://www.blogjava.net/comment?author=test" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2010-04-28 11:10 by <a href="">test</a></p>
<p>autocommit 如果不设置为false, 事务有用么</p>
<h2 id="-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-336667-permalink-re-ibatis-ibatis-spring-re-ibatis-ibatis-spring-http-www-blogjava-net-freeman1984-archive-2007-12-07-166112-html-post-http-www-blogjava-net-comment-author-rr-"><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#336667" title="permalink: re: ibatis学习（三）---ibatis与spring的整合" target="_blank">/#</a> <a href=""></a>re: ibatis学习（三）---ibatis与spring的整合<a href=""></a>  <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=rr" title="查看该作者发表过的评论" target="_blank">更多评论</a> <a href=""></a>  <a href=""></a></h2>
<p>2010-11-01 13:42 by <a href="">rr</a></p>
<p>sqlMapClient里应该注入dataSource</p>
<p><a href="http://www.blogjava.net/RequireRegister.aspx" target="_blank">新用户注册</a>  <a href="">刷新评论列表</a><br><a href=""></a> <a href="http://job.cnblogs.com/">找优秀程序员，就在博客园</a>
IT新闻：
· <a href="http://news.cnblogs.com/n/112126/" target="_blank">婚恋网世纪佳缘乱象重生 成一夜情猎场</a>
· <a href="http://news.cnblogs.com/n/112124/" target="_blank">帝国时代 Online 已发布，可免费下载</a>
· <a href="http://news.cnblogs.com/n/112123/" target="_blank">小米发布会中的亮点与尿点：“狗日的 1999”</a>
· <a href="http://news.cnblogs.com/n/112122/" target="_blank">315投诉网疑被关后改名重开张 新网站否认</a>
· <a href="http://news.cnblogs.com/n/112121/" target="_blank">团购网站融资冷却裁员求生 行业洗牌危机并存</a>    <a href="http://www.cnblogs.com/" target="_blank">博客园</a>  <a href="http://home.cnblogs.com/q/" target="_blank">博问</a>  <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>  <a href="http://job.cnblogs.com/cate-java_programmer/" target="_blank">Java程序员招聘</a> 标题  请输入标题 姓名  请输入你的姓名 主页 请输入验证码 验证码 /*  <img src="" alt=""> 内容(请不要发表任何与政治相关的内容) 请输入评论内容 Remember Me?   <a href="http://www.blogjava.net/login.aspx?ReturnURL=http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html&amp;SourceURL=/freeman1984/archive/2007/12/07/166112.html" target="_blank">登录</a>       [使用Ctrl+Enter键可以直接提交]    推荐职位：
· <a href="http://job.cnblogs.com/offer/15741/" target="_blank">广州ASP.NET程序员(广州丹霄信息技术)</a>
· <a href="http://job.cnblogs.com/offer/15624/" target="_blank">上海 .NET软件工程师(上海苏秦网络)</a>
· <a href="http://job.cnblogs.com/offer/15546/" target="_blank">上海.NET软件开发工程师(东方财富信息)</a>
· <a href="http://job.cnblogs.com/offer/14109/" target="_blank">北京 SQL数据库开发工程师(圣特尔科技)</a>
· <a href="http://job.cnblogs.com/offer/15489/" target="_blank">北京高新诚聘 ASP.NET 程序员(盈科融通软件)</a>
· <a href="http://job.cnblogs.com/Offer/15346/" target="_blank">北京 .NET软件工程师(北京科胜永昌)</a>
· <a href="http://job.cnblogs.com/offer/5914/" target="_blank">北京.NET 研发工程师 (北京捷报数据)</a>
· <a href="http://job.cnblogs.com/offer/14108/" target="_blank">北京C/#开发工程师 B/S方向(圣特尔科技)</a></p>
<p>博客园首页随笔：
· <a href="http://www.cnblogs.com/saville/archive/2011/08/17/2142754.html" target="_blank">C/#设计模式——命令模式(Command Pattern)</a>
· <a href="http://www.cnblogs.com/ahl5esoft/archive/2011/08/17/2142739.html" target="_blank">老系统维护</a>
· <a href="http://www.cnblogs.com/codingmyworld/archive/2011/08/17/2141706.html" target="_blank">使用单例模式实现自己的HttpClient工具类</a>
· <a href="http://www.cnblogs.com/powertoolsteam/archive/2011/08/17/2142085.html" target="_blank">Spread for Windows Forms高级主题(2)---理解单元格类型</a>
· <a href="http://www.cnblogs.com/JamesLi2015/archive/2011/08/17/2142012.html" target="_blank">ERP/MIS开发 菜单设计器(Menu Designer)及其B/S,C/S双重实现（B/S开源）</a>
知识库：
· <a href="http://kb.cnblogs.com/page/104475/" target="_blank">IT项目管理的六种错误思维</a>
· <a href="http://kb.cnblogs.com/page/107415/" target="_blank">我的10个开发原则</a>
· <a href="http://kb.cnblogs.com/page/111704/" target="_blank">大数据下的数据分析平台架构</a>
· <a href="http://kb.cnblogs.com/page/109493/" target="_blank">为什么编程是独一无二的职业</a>
· <a href="http://kb.cnblogs.com/page/104736/" target="_blank">分享8年开发经验，浅谈个人发展经历，明确自己发展方向</a> 最简洁阅读版式：
<a href="http://archive.cnblogs.com/b/166112/" target="_blank">ibatis学习（三）---ibatis与spring的整合</a> 网站导航:</p>
<p><a href="http://www.cnblogs.com/" title="程序员的网上家园" target="_blank">博客园</a>   <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>   <a href="http://kb.cnblogs.com/" target="_blank">知识库</a>   <a href="http://www.cnweblog.com/" target="_blank">博客生活</a>   <a href="http://www.cnitblog.com/" target="_blank">IT博客网</a>   <a href="http://www.cppblog.com/" target="_blank">C++博客</a>   <a href="http://space.cnblogs.com/q/" title="IT问答" target="_blank">博问</a>   <a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html?opt=admin" target="_blank">管理</a>    Powered by:
<a href="http://www.blogjava.net/" target="_blank">BlogJava</a>
Copyright © @joe</p>
<p><img src="" alt=""></p>
<h3 id="-">公告</h3>
<p><a href="http://shop59092284.taobao.com/" target="_blank"></a><a href="http://shop59092284.taobao.com/"></a><a href="http://shop59092284.taobao.com/" target="_blank"><strong> 老婆的淘宝,欢迎选购</strong></a></p>
<p><img src="" alt=""></p>
<h3 id="-2-">留言簿(2)</h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/Contact.aspx?id=1" target="_blank">给我留言</a></li>
<li><a href="http://www.blogjava.net/freeman1984/default.aspx?opt=msg" target="_blank">查看公开留言</a></li>
<li><a href="http://www.blogjava.net/freeman1984/admin/MyMessages.aspx" target="_blank">查看私人留言</a>
<img src="" alt=""></li>
</ul>
<h3 id="-">随笔分类</h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/category/26087.html/rss" title="Subscribe to all 生活杂谈(14)" target="_blank"><img src="&quot;Subscribe to all 生活杂谈(14" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/26087.html" target="_blank">all 生活杂谈(14)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/42532.html/rss" title="Subscribe to android(18)" target="_blank"><img src="&quot;Subscribe to android(18" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/42532.html" target="_blank">android(18)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/46243.html/rss" title="Subscribe to apache项目(13)" target="_blank"><img src="&quot;Subscribe to apache项目(13" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/46243.html" target="_blank">apache项目(13)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/43680.html/rss" title="Subscribe to chart(1)" target="_blank"><img src="&quot;Subscribe to chart(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/43680.html" target="_blank">chart(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/49019.html/rss" title="Subscribe to concurrent(1)" target="_blank"><img src="&quot;Subscribe to concurrent(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/49019.html" target="_blank">concurrent(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/38740.html/rss" title="Subscribe to database(34)" target="_blank"><img src="&quot;Subscribe to database(34" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/38740.html" target="_blank">database(34)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/42595.html/rss" title="Subscribe to dwr(3)" target="_blank"><img src="&quot;Subscribe to dwr(3" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/42595.html" target="_blank">dwr(3)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/43586.html/rss" title="Subscribe to flex(1)" target="_blank"><img src="&quot;Subscribe to flex(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/43586.html" target="_blank">flex(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/42534.html/rss" title="Subscribe to hibernate(23)" target="_blank"><img src="&quot;Subscribe to hibernate(23" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/42534.html" target="_blank">hibernate(23)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/26086.html/rss" title="Subscribe to java (123)" target="_blank"><img src="&quot;Subscribe to java (123" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/26086.html" target="_blank">java (123)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/41058.html/rss" title="Subscribe to javafx(1)" target="_blank"><img src="&quot;Subscribe to javafx(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/41058.html" target="_blank">javafx(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/43930.html/rss" title="Subscribe to java安全(6)" target="_blank"><img src="&quot;Subscribe to java安全(6" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/43930.html" target="_blank">java安全(6)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/43783.html/rss" title="Subscribe to java性能(12)" target="_blank"><img src="&quot;Subscribe to java性能(12" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/43783.html" target="_blank">java性能(12)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/38739.html/rss" title="Subscribe to jbpm(1)" target="_blank"><img src="&quot;Subscribe to jbpm(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/38739.html" target="_blank">jbpm(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/44698.html/rss" title="Subscribe to jquery(3)" target="_blank"><img src="&quot;Subscribe to jquery(3" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/44698.html" target="_blank">jquery(3)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/46405.html/rss" title="Subscribe to linux(6)" target="_blank"><img src="&quot;Subscribe to linux(6" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/46405.html" target="_blank">linux(6)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/47431.html/rss" title="Subscribe to lucene(1)" target="_blank"><img src="&quot;Subscribe to lucene(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/47431.html" target="_blank">lucene(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/47801.html/rss" title="Subscribe to lucene(1)" target="_blank"><img src="&quot;Subscribe to lucene(1" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/47801.html" target="_blank">lucene(1)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/26088.html/rss" title="Subscribe to others(2)" target="_blank"><img src="&quot;Subscribe to others(2" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/26088.html" target="_blank">others(2)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/38742.html/rss" title="Subscribe to questions(7)" target="_blank"><img src="&quot;Subscribe to questions(7" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/38742.html" target="_blank">questions(7)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/38741.html/rss" title="Subscribe to questions_hander(5)" target="_blank"><img src="&quot;Subscribe to questions_hander(5" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/38741.html" target="_blank">questions_hander(5)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/42533.html/rss" title="Subscribe to spring(24)" target="_blank"><img src="&quot;Subscribe to spring(24" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/42533.html" target="_blank">spring(24)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/42535.html/rss" title="Subscribe to struts(8)" target="_blank"><img src="&quot;Subscribe to struts(8" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/42535.html" target="_blank">struts(8)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/42536.html/rss" title="Subscribe to swing" target="_blank"><img src="&quot;Subscribe to swing&quot;" alt=""></a><a href="http://www.blogjava.net/freeman1984/category/42536.html" target="_blank">swing</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/48926.html/rss" title="Subscribe to UML(2)" target="_blank"><img src="&quot;Subscribe to UML(2" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/48926.html" target="_blank">UML(2)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/44672.html/rss" title="Subscribe to web(33)" target="_blank"><img src="&quot;Subscribe to web(33" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/44672.html" target="_blank">web(33)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/38743.html/rss" title="Subscribe to webservice(5)" target="_blank"><img src="&quot;Subscribe to webservice(5" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/38743.html" target="_blank">webservice(5)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/43702.html/rss" title="Subscribe to xml(2)" target="_blank"><img src="&quot;Subscribe to xml(2" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/43702.html" target="_blank">xml(2)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/46247.html/rss" title="Subscribe to 敏捷(6)" target="_blank"><img src="&quot;Subscribe to 敏捷(6" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/46247.html" target="_blank">敏捷(6)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/46503.html/rss" title="Subscribe to 方法论(14)" target="_blank"><img src="&quot;Subscribe to 方法论(14" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/46503.html" target="_blank">方法论(14)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/46575.html/rss" title="Subscribe to 架构(10)" target="_blank"><img src="&quot;Subscribe to 架构(10" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/46575.html" target="_blank">架构(10)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/49063.html/rss" title="Subscribe to 网络通讯(5)" target="_blank"><img src="&quot;Subscribe to 网络通讯(5" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/49063.html" target="_blank">网络通讯(5)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/category/46246.html/rss" title="Subscribe to 项目管理(17)" target="_blank"><img src="&quot;Subscribe to 项目管理(17" alt="">&quot;)</a><a href="http://www.blogjava.net/freeman1984/category/46246.html" target="_blank">项目管理(17)</a></li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-">相册</h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/gallery/42537.html" target="_blank">我的相册</a>
<img src="" alt=""></li>
</ul>
<h3 id="-">搜索</h3>
<ul>
<li></li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-">积分与排名</h3>
<ul>
<li>积分 - 249820</li>
<li>排名 - 69
<img src="" alt=""></li>
</ul>
<h3 id="-http-www-blogjava-net-freeman1984-commentsrss-aspx-">最新评论 <a href="http://www.blogjava.net/freeman1984/CommentsRSS.aspx" target="_blank"><img src="" alt=""></a></h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/08/08/148850.html#356038" target="_blank">1. re: 一篇不错的讲解Java异常的文章(转载）----感觉很不错，读了以后很有启发[未登录]</a></li>
<li>受教了。非常感谢。
不过，后面罗列的那么多异常有点不必要了。</li>
<li>--jake</li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/07/25/324133.html#355011" target="_blank">2. re: strtuts2 异常之Could not create and/or set value back on to object [未登录]</a></li>
<li>thank you very much！</li>
<li>--fighting</li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/07/22/301081.html#354834" target="_blank">3. re: Android屏幕元素层次结构[未登录]</a></li>
<li><p style="color:red">顶一下</p></li>
<li>--黑石</li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/07/21/354712.html#354750" target="_blank">4. re: 不同技术团队的配合问题及DevOps(不错的文章，来自infoq)</a></li>
<li>做个记号。</li>
<li>--何杨</li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/07/12/154309.html#354154" target="_blank">5. re: other[未登录]</a></li>
<li>希望学习，谢谢！
trust_myself@126.com</li>
<li>--asa</li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-">阅读排行榜</h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/09/27/148850.html" target="_blank">1. 一篇不错的讲解Java异常的文章(转载）----感觉很不错，读了以后很有启发(17440)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2009/11/05/301262.html" target="_blank">2. 世界上最健康的作息时间表 大家对比下(16717)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166112.html" target="_blank">3. ibatis学习（三）---ibatis与spring的整合(13592)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/09/24/147879.html" target="_blank">4. 如何用javascript控制checkbox，并进行批量删除(8527)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/12/07/166113.html" target="_blank">5. ibatis学习（二）--ibatis使用介绍(6368)</a>
<img src="" alt=""></li>
</ul>
<h3 id="-">评论排行榜</h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/10/19/154309.html" target="_blank">1. other(41)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/09/27/148850.html" target="_blank">2. 一篇不错的讲解Java异常的文章(转载）----感觉很不错，读了以后很有启发(22)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2007/11/16/161093.html" target="_blank">3. ssh中利用pager-taglib和filter进行分页(14)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2010/11/12/337878.html" target="_blank">4. 团队内是有必要统一IDE(14)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2009/11/05/301262.html" target="_blank">5. 世界上最健康的作息时间表 大家对比下(13)</a></li>
</ul>
<h3 id="60-">60天内阅读排行</h3>
<ul>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/06/20/352649.html" target="_blank">1. 大家都用什么bug管理软件？(2031)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/07/04/353654.html" target="_blank">2. CountDownLatch 简介和例子(1412)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/08/04/355820.html" target="_blank">3. 统计指标和术语汇总(1396)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/07/20/354712.html" target="_blank">4. 不同技术团队的配合问题及DevOps(不错的文章，来自infoq)(1321)</a></li>
<li><a href="http://www.blogjava.net/freeman1984/archive/2011/08/04/355808.html" target="_blank">5. connection.release_mode，connection.autocommit和transaction.auto_close_session用法(1003)</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/框架汇总/">框架汇总</a></li></span><span class="breadcrumb"><li><a href="/categories/框架汇总/">框架汇总</a></li><li><a href="/categories/框架汇总/ORM/">ORM</a></li><li><a href="/categories/框架汇总/ORM/ibatis/">ibatis</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ORM/" class="label label-primary">ORM</a><a href="/tags/ibatis/" class="label label-success">ibatis</a><a href="/tags/框架汇总/" class="label label-info">框架汇总</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:29"datetime="2014-03-07 09:54:29"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-框架汇总-ORM-ibatis--ibatis学习（三）-ibatis与spring的整合-joe-专注java-开源-架/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-框架汇总-ORM-ibatis--ibatis学习（三）-ibatis与spring的整合-joe-专注java-开源-架" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-架构师--通向架构师的道路（第二十六天）漫谈架构与设计文档的写作技巧/">通向架构师的道路（第二十六天）漫谈架构与设计文档的写作技巧</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:29.000Z"> <a href="/2014/02/02/2014-02-02-架构师--通向架构师的道路（第二十六天）漫谈架构与设计文档的写作技巧/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-">通向架构师的道路（第二十六天）漫谈架构与设计文档的写作技巧</h1>
<p>您还未登录！|<a href="https://passport.csdn.net/account/login" target="_blank">登录</a>|<a href="https://passport.csdn.net/account/register" target="_blank">注册</a>|<a href="https://passport.csdn.net/help/faq" target="_blank">帮助</a></p>
<ul>
<li><a href="http://www.csdn.net/" target="_blank">首页</a></li>
<li><a href="http://news.csdn.net/" target="_blank">业界</a></li>
<li><a href="http://mobile.csdn.net/" target="_blank">移动</a></li>
<li><a href="http://cloud.csdn.net/" target="_blank">云计算</a></li>
<li><a href="http://sd.csdn.net/" target="_blank">研发</a></li>
<li><a href="http://bbs.csdn.net/" target="_blank">论坛</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">博客</a></li>
<li><a href="http://download.csdn.net/" target="_blank">下载</a></li>
<li><h2 id="-"><a href="">更多</a></h2>
</li>
</ul>
<h1 id="-lifetragedy-http-blog-csdn-net-lifetragedy-"><a href="http://blog.csdn.net/lifetragedy" target="_blank">lifetragedy的专栏</a></h1>
<h2 id="-it">吾以吾血荐我中华之IT</h2>
<ul>
<li><a href="http://blog.csdn.net/lifetragedy?viewmode=contents" target="_blank"><img src="" alt="">目录视图</a></li>
<li><a href="http://blog.csdn.net/lifetragedy?viewmode=list" target="_blank"><img src="" alt="">摘要视图</a></li>
<li><a href="http://blog.csdn.net/lifetragedy/rss/list" target="_blank"><img src="" alt="">订阅</a>
<a href="http://blog.csdn.net/blogdevteam/article/details/9819385" target="_blank">《这些年，我们读过的技术经典图书》主题有奖征文</a>        <a href="http://www.csdn.net/article/2013-08-06/2816471" target="_blank">专访李铁军：从医生到金山首席安全专家的转变</a>      <a href="http://blog.csdn.net/adali/article/details/9813651" target="_blank">独一无二的职位：开源社区经理</a>        <a href="http://blog.csdn.net/blogdevteam/article/details/10389969" target="_blank">CSDN博客第三期云计算最佳博主评选</a></li>
</ul>
<h3 id="-"><a href="">通向架构师的道路（第二十六天）漫谈架构与设计文档的写作技巧</a></h3>
<p>分类： <a href="http://blog.csdn.net/lifetragedy/article/category/1175320" target="_blank">架构师之路</a>  2012-12-06 16:19 6424人阅读 <a href="">评论</a>(28) <a href="&quot;收藏&quot;">收藏</a> <a href="&quot;举报&quot;">举报</a>
<a href="http://blog.csdn.net/tag/details.html?tag=%e6%9e%b6%e6%9e%84%e5%b8%88 %e5%85%b7%e5%a4%87 %e6%8a%80%e8%83%bd %e6%88%90%e4%b8%ba %e6%9e%b6%e6%9e%84%e5%b8%88" target="_blank">架构师 具备 技能 成为 架构师</a></p>
<p>目录<a href="&quot;系统根据文章中H1到H6标签自动生成文章目录&quot;">(?)</a><a href="&quot;展开&quot;">[+]</a></p>
<ol>
<li><a href="">前言</a></li>
<li><p><a href="">一Soft Skill与Hard Skill</a></p>
</li>
<li><p><a href="">先来说一下Hard Skill</a></p>
</li>
<li><a href="">什么是Soft Skill</a></li>
<li><a href="">Documentation Skill与Presentation Skill</a></li>
<li><p><a href="">要善于懂得包装</a></p>
</li>
<li><p><a href="">三如何写好一篇文档和提高你的documentation skill</a></p>
</li>
<li><p><a href="">一图胜千言</a></p>
</li>
<li><a href=""></a></li>
<li><p><a href="">画好你的图</a></p>
</li>
<li><p><a href="">架构图的配色与表达手法</a></p>
</li>
<li><a href="">以图绘意</a></li>
<li><p><a href="">依照八股文来绘制设计图</a></p>
</li>
<li><p><a href="">四如何画出准确且漂亮的设计图呢</a></p>
</li>
<li><a href="">五图文混杂的技巧</a><h1 id="-"><a href=""></a>前言：</h1>
</li>
</ol>
<p>这篇是一篇番外篇，没有太多代码与逻辑，完全是一种”软“技巧，但是它对于你如何成为一名合构的架构设计人员很重要。</p>
<p>在此要澄清一点，架构师本身也是”程序员“，不是光动嘴皮子的家伙们，如果你不是一名程序虽出身那你根本谈不上也不可能成为一名架构师。</p>
<p>那么架构师还有哪些是作为一名程序员来说不具备的呢？</p>
<p>其中有一项能力就叫做”文档写作能力“。</p>
<h1 id="-soft-skill-hard-skill"><a href=""></a>一、Soft Skill与Hard Skill</h1>
<p>作为一名架构师除了是一名资深的程序员外，它还必须具有相应的Soft Skill，其中有一名就叫做Documentation Skill。</p>
<h2 id="-1-hard-skill"><a href=""></a>1. 先来说一下Hard Skill</h2>
<p>代码与框架以及产品的灵活使用以及在相应的domain（如Insurance, Banking, CRM, DW。。。）上的经验我们把它称为Hard Skill，没有这些技巧你就成不了一名合格的程序员。</p>
<p>程序员和IT是有区别的，程序员是IT业内的主力军团，但是如果你是在一家网站或者是软件司作需求分析的，哪怕是一个秘书，那你也是一个IT人员，对吧？所以这些东西是一个成为架构师的“硬”条件。</p>
<h2 id="-2-soft-skill"><a href=""></a>2. 什么是Soft Skill</h2>
<p>Soft Skill即指Documentation Skill, Presentation Skill，Communication Skill, 相应的Language Skill（不包括日本语，BS小日本）, Management Skill, Leader Ship, 这些.</p>
<p>当然，还有更多，更多。。。</p>
<h2 id="-2-1-documentation-skill-presentation-skill"><a href=""></a>2.1 Documentation Skill与Presentation Skill</h2>
<p>今天主要讲述的是Documentation Skill与Presentation Skill。</p>
<p>勿要小看这两点，有人说他自己编程编得好，有人说自己的算法写了如何如何精深，那么。。。在现在这个团队合作至上以及处于目前这样的世界经济大环境以客户至上的背景下你所知道的的东西不能向其它人表达清楚，谁会理解你的想法，谁会接受你的理念，谁会选择你公司的产品呢？</p>
<p>举两个例子：</p>
<p>苏步青，他是大数学家，对吧，或许不少人不知道苏步青在文学上的造诣也是很深的。</p>
<p>苏步青曾说过：为什么我喜欢语文，语言，因为我的论文，我的教材需要用语言去表达的，如果不把语言，语文学好我根本无法更精准更明白的去表达我的算法。</p>
<p>著名计算机学者C语言教程的作者谭好强曾经说过：能够把复杂的问题用简单直白的语言和框图去表达出来，就是最好的论文。</p>
<p>再说个实际点的例子，你处于一个投标竞赛中，你的设计或许是很好，可是如何让客户能够理解和接受贵公司的设计方案呢？</p>
<p>那么你需要在平时有意识的去提高或者我们说修练一下你的documentation skill，documentation skill与presentation skill是联系在一起的.</p>
<h2 id="-2-2-"><a href=""></a>2.2 要善于懂得“包装”</h2>
<p>Presentation Skill即”宣传、演示、演讲、推销&quot;的一种技巧，很多人在面对你的同事或者朋友时可能会滔滔而谈，但是在面对你的上司或者是在客户面前，就成了“缩货”了。。。为什么？</p>
<p>其实很多时候在于你演讲的底稿我们一般用PPT或者是WORD准备的不足，呆板、凡味，还有时在于你的设计确实自己也拿捏不准。</p>
<p>因此Hard Skill是你的底气，有了足够硬的Hard Skill你有了50%的胆子再加上一篇好的Document（PPT一类）你的另50%胆子也有了，此时你的Presentation Skill就提升了.</p>
<p>所以很多时候你的Presentation Skill是等于Hard Skill+Documentation Skill的。</p>
<p>有一部片叫《幸德勒的名单》相信不少人看过吧？开头30分钟，靠着不足万元“老本”的幸德勒来到了犹太人聚集地，找到了犹太会计师-以撒.斯坦，他滔滔而谈自己成立公司的计划，如何可以挣钱。然后以撒.斯坦问了他一句：</p>
<p>请让我弄明白一件事，我出人，然后我找”金主“出钱，那你出什么。。。？</p>
<p>幸德勒吸了一口烟，双手合在一起后向外一推 ”presentation, 这是我最擅长的“，这边的presentation也可认为是一种包装.</p>
<p>同样一个中国生产的杯子和美国，如果性能、功能、使用寿命都一样，相信一定是美国货卖得贵，为什么？因为它在有了Hard Skill基础上再次进行了”包装“，这就是”好莱坞式&quot;的促销手法。</p>
<p><strong>要学会“包装”但不是扯蛋和吹牛</strong>，因为架构师拿出来的东西哪怕再漂亮，如果没有内含那也是“滥竽充数”，被人识破后就一钱不值了。但是我们在有好的质量好的技术的基础上善于去“包装”它，相信你会离成功更近一步。</p>
<h1 id="-documentation-skill"><a href=""></a>三、如何写好一篇文档和提高你的documentation skill</h1>
<p>我在前公司有一阵没空，一度让其它几个senior的Team Leader帮助我写文档，要求把设计按照需求能够写清即可。</p>
<p>送上来5篇文章，基本一篇都不能用.</p>
<p>第一次送上来，每篇都是讲一个功能点，要不是冗长的一段没意义的解释，要不就是从官网直接COPY一段话下来，甚至连1,2,3,4都没列出来，至少你要有个Advantage Points 或者说是Benefit和Disadvantage Points的对比吧.</p>
<p>第二次送上来，有了1，2，3，4，但是这下好了，全都标成1,2,3,4了。</p>
<p>要善于利用office编辑器中的“符号列表”，“4角星”代表亮点，“√&quot;代表优点，”小点点“放在段落前用来将功能点说明”分层“，使阅话者更清晰.</p>
<p>这样说吧，你把自己当成一个阅读者了吗？对吧？</p>
<h2 id="-3-1-"><a href=""></a>3.1 一图胜千言</h2>
<p>我们在描述一个审计日志功能模块时我们说用Spring做，如果能够附上下面这样的一张图是不是会更加生动呢？</p>
<p><img src="" alt=""></p>
<p>一个架构文档，从基本的来讲需要有：</p>
<ul>
<li>Logic View（逻辑视图）</li>
<li>Physical View（物理视图）</li>
<li>Network Structure（网络拓卜图）</li>
<li>Workflow/Process Flow（流程图）
你在描述你的流程时你怎么表达你的if else if else，对吧？有个流程图是不是会更好让人懂你所描述的这个流程是一个什么样子的呢？</li>
</ul>
<p>那我画个流程图去。。。画啊画，画完后拿过来一看：
黑线框、框内有几个字，几个带箭头的线连一下。。。不错。。。是画对了，可是你有没有想过，有些业务场景中流程图往往还要表达不同的”业务边界“啊。。。</p>
<p>拿下面的一个图来说，是不是这样的表达比只有黑框框+带箭头的线+几个文字更加易懂啊？
<img src="" alt=""></p>
<h2 id="-"><a href=""></a></h2>
<h2 id="-3-2-"><a href=""></a>3.2 画好你的图</h2>
<h3 id="-3-2-1-"><a href=""></a>3.2.1 架构图的配色与表达手法</h3>
<p>不要认为画图是”美工“的事，你是设计人员，你是架构师，画好一个应用图是你的本职工作，图中需要什么图标可以把你的需求告诉美工，美工再会去处理。</p>
<p>一般来说，我们为了表达一个系统的模块组成，我们通常会用：component view来表达如下面这样的图
这个被称为<strong>”自上而下“的一个平面图，</strong>用于表示”<strong>服务边界</strong>“</p>
<p><img src="" alt="">、</p>
<p>如果你考究的话还可以提供一个”<strong>剖视图</strong>“，如典型的用于表示详细业务组件的”<strong>侧面剖视图</strong>“：
<img src="" alt=""></p>
<p>这种Component View一般都是跟着你的总架构图和网络拓卜图的后面出现的，这三套图我称它为“<strong>炮鸣三声</strong>”（起兵啦。。。）。
<strong>因此这样的图往往会使用“暖色调”，以几何或者立体的色块来展现，带给观看者强烈的视觉冲击</strong>，架构师的功底基本可以集中体现在这三套图中，<strong>这三套图同时也起到了“先声夺人”吸引观众的眼球，注意力的作用</strong>（那边的女孩看过来看过来，我的钞票多。。。嘿嘿嘿）</p>
<p>如下面这样的一个总架构图的表现手法：
<img src="" alt=""></p>
<p>对吧，<strong>暖色调，以几何或者立体的色块来展现</strong></p>
<h3 id="-3-2-2-"><a href=""></a>3.2.2 以图绘意</h3>
<p>我这边提个问题：如何表达一个”<strong>业务规则</strong>“，如何去表达一个”<strong>工作流</strong>“，就是<strong>”业务规则“这四个字我用图怎么表达</strong>。。。<strong>工作流这三个字我用图怎么表达</strong>？大家想一下。</p>
<p>来，看看下面的图：
这个图一看就知道是在表达process或者说是工作流</p>
<p><img src="" alt=""></p>
<p>这个图代表”规则“，规则就是一组if else if if</p>
<p><img src="" alt=""></p>
<p>对吧。。。现在来个更难的，我的业务规则用的是规则引擎，且内核是jboss rulz，嘿嘿，怎么用图标达,来。。。下面给出我的答案：</p>
<p><img src="" alt=""></p>
<p>对吧。。。看到了吗。。。图用来绘意，但图不能乱用，就拿这个”<strong>系统中使用了JBOSS RULZ来作为规则引擎</strong>&quot;这个描述来说，你要画的图其实是建立在你的Hard Skill上的。</p>
<h3 id="-3-2-3-"><a href=""></a>3.2.3 依照“八股文”来绘制设计图</h3>
<p>八股文就是有条理有章矩，不管什么样的文章你按照八股文去写，写出来都是一样的层次，我们考四级英语的“写作”这一本时其实也是有“<strong>章法</strong>”可循的对吧？</p>
<p>那么这个设计图的画法也是有章可循的，也是有它的“<strong>八股文</strong>”样板的。</p>
<p>前面说了，<strong>上手三套图先声夺人，抢人二目，那么在架构设计文档中还会充质着种种模块，子模块，功能设计，功能点描述图。。。如果你也来个一概而论，那就不是先声夺人了，而是“喧宾夺主“了</strong>，呵呵呵。</p>
<p>这种子模块、功能设计或者是功能点描述往往往以点、线为主，以点、线来连成一个面，而面中”娄空“，如下面的样例:</p>
<p><img src="" alt=""></p>
<h1 id="-"><a href=""></a>四、如何画出准确且“漂亮”的设计图呢</h1>
<p>七叔：You are beautiful...啊...you are beautiful...You are so handsome...啊You are so handsome...</p>
<p>周星星：七叔，你不要这样好吧。。。七叔。。。来人啊。。。
我在前一天即第二十五天中用来描述DbUnit的优点时用到了一套图，它们是这样的，大家还记得吧？</p>
<p><img src="" alt="">
右边的文字，没什么稀罕的，都是配色而己，关键在于左边的这个图。。。hoho，很多人问我用的是什么工具画的？</p>
<p>我告诉你们，我不是美工，我其实是在“<strong>拼图</strong>”，如这幅图的制作：
<img src="" alt=""></p>
<p><strong>我是用了以下这5幅小图标，拼制而成的：</strong></p>
<hr>
<p><img src="" alt="">
不是这么简单的，随便画画就成了，都要花功夫的、花心思去制作的。</p>
<ul>
<li>平时自己看到好的可以表达某个意义的图片，存下来，分门别类</li>
<li>看到人家写的好的架构文档，存下来，看看人家是怎么去描述一个功能点的</li>
<li>多搜集一些IT上专用的图标，小图片，logo
IBM的文档是我看到过最恐怖的文档，基本上这里面的架构文档出来都一个腔调，没什么文字，都是图，<strong>连个“登录过程”都用图表达</strong>，<strong>连个“源码check in check out”的管理流程都用图表达</strong>。
保持你的图系一致及风格的一致，你可以用卡通系、商务系任何一个系的图来表达你的设计思想，但是当你的第一幅图用的就是哪个系时，你的文档中所有的图都请用这个系列，而不建议你混杂使用你的图系。</li>
</ul>
<h1 id="-"><a href=""></a>五、图文混杂的技巧</h1>
<p>什么都不多说，上截图，大家自己去感受一下吧<img src="" alt=""></p>
<p>今天就说这么多，希望对大家提高你的设计文档写作水平有所提高吧。</p>
<p>分享到： <a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a></p>
<ul>
<li>上一篇：<a href="http://blog.csdn.net/lifetragedy/article/details/8251056" target="_blank">通向架构师的道路（第二十五天）SSH的单元测试与dbunit的整合</a></li>
<li>下一篇：<a href="http://blog.csdn.net/lifetragedy/article/details/8286178" target="_blank">最近有一个人在CSDN博客上“炒袭“我的博文一事的说明</a></li>
</ul>
<p>顶 14 踩 1
查看评论<a href=""></a></p>
<p>17楼 <a href="http://blog.csdn.net/it_man" target="_blank">it_man</a> 2013-03-04 14:43发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/it_man" target="_blank"><img src="" alt=""></a>这篇对于架构师来说真的很好很强大. 谢谢,致敬.16楼 <a href="http://blog.csdn.net/lipslive" target="_blank">Slive</a> 2013-01-30 23:04发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/lipslive" target="_blank"><img src="" alt=""></a>从一开始看楼主的文章就知道楼主不见Hard Skill过硬，而且Soft Skill也是相当牛。但在这篇Blog中楼主说的大多是一些技巧点，所以有几点我想问一下楼主，望楼主能指点一下：
1、写文档时，思路总觉得不够清晰，如何理清思路？
2、针对不同对象，如直接领导，大领导，技术支持，客户等，文档展现方式有所不一样，如何把握呢？
3、Logic View（逻辑视图）Physical View（物理视图）Network Structure（网络拓卜图）Workflow/Process Flow（流程图）这几个图，在写文档的过程中，什么时候能套用的上（假设要求写的是设计文档）呢？Re: <a href="http://blog.csdn.net/lifetragedy" target="_blank">lifetragedy</a> 2013-01-31 14:19发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/lifetragedy" target="_blank"><img src="" alt=""></a>回复lipslive：1. 看TOGAF-9规范（国际架构师规范）</p>
<ol>
<li>多看PPT,看到好的，存下来，只有多看多写
我看了近300多篇还觉得不够。</li>
<li>这种文档都是有八股文的，你看到一段需求时可以想想有哪个以前看过的和你现在需要写的有点像，然后把以前看过的找出来，对着看一遍，自己动手再改一改，有时为了写一篇文档，会摘取10几篇，几十篇其它你手上文档的精粹，我这边的摘取不是抄，而是吸别人的风格Re: <a href="http://blog.csdn.net/lipslive" target="_blank">Slive</a> 2013-01-31 15:04发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/lipslive" target="_blank"><img src="" alt=""></a>回复lifetragedy：嗯，看来还是得多思考，多实践。15楼 <a href="http://blog.csdn.net/dangyifei" target="_blank">dangyifei</a> 2013-01-18 17:45发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/dangyifei" target="_blank"><img src="" alt=""></a>受益匪浅14楼 <a href="http://blog.csdn.net/AnBaoFeng1978" target="_blank">新无产阶级</a> 2013-01-06 13:38发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/AnBaoFeng1978" target="_blank"><img src="" alt=""></a>一直在关注楼主的每一期文章分享，受益匪浅。而且楼主的这种Open的心态很值得学习！
我们每一个人接触集群，性能优化之类项目中的核心精华内容的机会不多，有的人可能一辈子都遇不到这些机会，再次对楼主的Open精神表示钦佩！
看了楼主这么多期的文章，接下来，楼主可否就集群的日常维护（升级，单个机器或者Tomcat的性能监控、告警），以及作为一个架构师，在技术架构方面的对比和取舍这几个方面的经验分享一下。我个人对这些方面比较感兴趣，估计也是其他人很想了解的内容。13楼 <a href="http://blog.csdn.net/xiaoH1314" target="_blank">xiaoH1314</a> 2012-12-24 18:23发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/xiaoH1314" target="_blank"><img src="" alt=""></a>博主您好，我将您的”通往构架师的道路“整理了一份文档，由于偶缺积分所以想借您的文章赚点，希望您能理解。<a href="http://download.csdn.net/detail/xiaoh1314/4923727Re" target="_blank">http://download.csdn.net/detail/xiaoh1314/4923727Re</a>: <a href="http://blog.csdn.net/lifetragedy" target="_blank">lifetragedy</a> 2012-12-24 20:40发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/lifetragedy" target="_blank"><img src="" alt=""></a>回复xiaoH1314：不过没事，只要你不改动我文章里的任何字和句就没事Re: <a href="http://blog.csdn.net/lifetragedy" target="_blank">lifetragedy</a> 2012-12-24 20:40发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/lifetragedy" target="_blank"><img src="" alt=""></a>回复xiaoH1314：实际上我的资源里已经有相关的文档下载了。。。Re: <a href="http://blog.csdn.net/woyaowenzi" target="_blank">woyaowenzi</a> 2012-12-25 10:00发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/woyaowenzi" target="_blank"><img src="" alt=""></a>回复lifetragedy：在资源里面没有搜索到你的文章对应的PDF哎。能否给个链接？Re: <a href="http://blog.csdn.net/lifetragedy" target="_blank">lifetragedy</a> 2012-12-25 10:59发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/lifetragedy" target="_blank"><img src="" alt=""></a>回复woyaowenzi：我没有PDF，都是WORD文档，你标明转载和出处就OK了.Re: <a href="http://blog.csdn.net/xiaoH1314" target="_blank">xiaoH1314</a> 2012-12-25 09:04发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/xiaoH1314" target="_blank"><img src="" alt=""></a>回复lifetragedy：没有改过字句，就是您的那个图片太大了，我做了相应的调整。12楼 <a href="http://blog.csdn.net/l271640625" target="_blank">Cold的小小博客</a> 2012-12-20 16:18发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/l271640625" target="_blank"><img src="" alt=""></a>膜拜楼主，好久没更新了11楼 <a href="http://blog.csdn.net/zhimajiejie" target="_blank">宋杰</a> 2012-12-15 16:42发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/zhimajiejie" target="_blank"><img src="" alt=""></a>楼主好强大！！膜拜~~10楼 <a href="http://blog.csdn.net/bruclein1999" target="_blank">bruclein1999</a> 2012-12-12 19:03发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/bruclein1999" target="_blank"><img src="" alt=""></a>受益匪浅9楼 <a href="http://blog.csdn.net/xc222222" target="_blank">xc222222</a> 2012-12-11 13:08发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/xc222222" target="_blank"><img src="" alt=""></a>受益匪浅8楼 <a href="http://blog.csdn.net/ExceptionBaby" target="_blank">ExceptionBaby</a> 2012-12-11 10:47发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/ExceptionBaby" target="_blank"><img src="" alt=""></a>博主可以把你收集的资源分享一下么？Re: <a href="http://blog.csdn.net/lifetragedy" target="_blank">lifetragedy</a> 2012-12-11 11:02发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/lifetragedy" target="_blank"><img src="" alt=""></a>回复ExceptionBaby：那我明确的回答你，不可以。。。每个人资料积累的方式不同，我文中讲的是一些方法论，你可以照着自己去做就行了。
我给你一船鱼，不如给你一张渔网。7楼 <a href="http://blog.csdn.net/ExceptionBaby" target="_blank">ExceptionBaby</a> 2012-12-10 17:28发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/ExceptionBaby" target="_blank"><img src="" alt=""></a>这篇文章确实写的不错。6楼 <a href="http://blog.csdn.net/honsty2010" target="_blank">honsty2010</a> 2012-12-10 14:27发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/honsty2010" target="_blank"><img src="" alt=""></a>前几天做了个某个政府的售前，做技术方案、ppt、demo做了三个多星期。文档确实难写。楼主的根底很深厚。5楼 <a href="http://blog.csdn.net/honsty2010" target="_blank">honsty2010</a> 2012-12-10 14:25发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/honsty2010" target="_blank"><img src="" alt=""></a>谢谢楼主的辛苦写作。4楼 <a href="http://blog.csdn.net/leonzhouwei" target="_blank">leonzhouwei</a> 2012-12-09 23:28发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/leonzhouwei" target="_blank"><img src="" alt=""></a>有一个问题请教一下，对于“模块，子模块，功能设计，功能点描述”的详细设计的文档，博主一般用什么软件来编写呢？我一直是在用EXCEL，觉得很顺手，很好奇你用的是什么。另，一直在关注博主，受益很多，谢谢。Re: <a href="http://blog.csdn.net/lifetragedy" target="_blank">lifetragedy</a> 2012-12-10 00:43发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/lifetragedy" target="_blank"><img src="" alt=""></a>回复leonzhouwei：visio，90%情况下我都用VISIO画图，拿ps截个图镂个头下来而已只是。
有时为了追求书面表达的美观与效果甚至连表格都会用VISIO一线一线画出来。3楼 <a href="http://blog.csdn.net/guojunjian" target="_blank">guojunjian</a> 2012-12-06 20:59发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/guojunjian" target="_blank"><img src="" alt=""></a>确实对现阶段的我帮助很大。2楼 <a href="http://blog.csdn.net/lifetragedy" target="_blank">lifetragedy</a> 2012-12-06 19:33发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/lifetragedy" target="_blank"><img src="" alt=""></a>嘿嘿 Visio+ps1楼 <a href="http://blog.csdn.net/ljdbluesky" target="_blank">ljdbluesky</a> 2012-12-06 17:27发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/ljdbluesky" target="_blank"><img src="" alt=""></a>很不错，另外问您一下，那些图都用什么软件画的，好像visio画不出来吧Re: <a href="http://blog.csdn.net/lifetragedy" target="_blank">lifetragedy</a> 2012-12-06 19:49发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/lifetragedy" target="_blank"><img src="" alt=""></a>回复ljdbluesky：百分之九十情况下我都是只用visio,拿ps截个图镂个头下来而已只是Re: <a href="http://blog.csdn.net/lifetragedy" target="_blank">lifetragedy</a> 2012-12-06 19:33发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/lifetragedy" target="_blank"><img src="" alt=""></a>回复ljdbluesky：Visio+ps
您还没有登录,请<a href="">[登录]</a>或<a href="http://passport.csdn.net/account/register?from=http%3A%2F%2Fblog.csdn.net%2Flifetragedy%2Farticle%2Fdetails%2F8264797" target="_blank">[注册]</a></li>
</ol>
<p>/* 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场<a href=""></a><a href=""></a>
<a href="&quot;回到顶部&quot;"><img src="" alt="TOP"></a></p>
<p>个人资料</p>
<p><a href="http://my.csdn.net/lifetragedy" target="_blank"><img src="&quot;访问我的空间&quot;" alt=""></a>
<a href="http://my.csdn.net/lifetragedy" target="_blank">lifetragedy</a></p>
<p><a href="&quot;[加关注]&quot;"></a> <a href="&quot;[发私信]&quot;"></a>
<a href="http://medal.blog.csdn.net/allmedal.aspx" target="_blank"><img src="" alt=""></a><a href="http://medal.blog.csdn.net/allmedal.aspx" target="_blank"><img src="" alt=""></a></p>
<ul>
<li>访问：612767次</li>
<li>积分：5919分</li>
<li><p>排名：第728名</p>
</li>
<li><p>原创：56篇</p>
</li>
<li>转载：0篇</li>
<li>译文：0篇</li>
<li>评论：1258条</li>
</ul>
<p>文章搜索</p>
<p><a href=""></a></p>
<p>博客专栏</p>
<p><a href="http://blog.csdn.net/column/details/j2ee-guru.html" target="_blank"><img src="" alt=""></a> <a href="http://blog.csdn.net/column/details/j2ee-guru.html" target="_blank">架构师修练之道</a></p>
<p>文章：36篇</p>
<p>阅读：552037
文章分类</p>
<ul>
<li><a href="http://blog.csdn.net/lifetragedy/article/category/1175320" target="_blank">架构师之路</a>(27)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/category/1302654" target="_blank">随笔</a>(1)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/category/1544093" target="_blank">面经</a>(8)</li>
</ul>
<p>文章存档</p>
<ul>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2013/08" target="_blank">2013年08月</a>(8)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2013/01" target="_blank">2013年01月</a>(1)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2012/12" target="_blank">2012年12月</a>(3)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2012/11" target="_blank">2012年11月</a>(4)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2012/10" target="_blank">2012年10月</a>(3)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2012/08" target="_blank">2012年08月</a>(5)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2012/07" target="_blank">2012年07月</a>(10)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2012/06" target="_blank">2012年06月</a>(2)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2012/03" target="_blank">2012年03月</a>(1)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2012/01" target="_blank">2012年01月</a>(8)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2011/09" target="_blank">2011年09月</a>(2)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2011/04" target="_blank">2011年04月</a>(2)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2011/02" target="_blank">2011年02月</a>(3)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2007/09" target="_blank">2007年09月</a>(1)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2006/05" target="_blank">2006年05月</a>(1)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2005/01" target="_blank">2005年01月</a>(1)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/month/2003/12" target="_blank">2003年12月</a>(1)</li>
</ul>
<p>展开
阅读排行</p>
<ul>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7698555" title="通向架构师的道路（第一天）之Apache整合Tomcat" target="_blank">通向架构师的道路（第一天）之Apache整合Tomcat</a>(54603)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7708724" title="通向架构师的道路（第四天）之Tomcat性能调优-让小猫飞奔" target="_blank">通向架构师的道路（第四天）之Tomcat性能调优-让小猫飞奔</a>(33416)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7699236" title="通向架构师的道路（第二天）之apache tomcat https应用" target="_blank">通向架构师的道路（第二天）之apache tomcat https应用</a>(31585)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7712691" title="通向架构师的道路（第五天）之tomcat集群-群猫乱舞" target="_blank">通向架构师的道路（第五天）之tomcat集群-群猫乱舞</a>(31435)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7707455" title="通向架构师的道路（第三天）之apache性能调优" target="_blank">通向架构师的道路（第三天）之apache性能调优</a>(30852)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7734864" title="通向架构师的道路（第六天）之漫谈基于数据库的权限系统的设计" target="_blank">通向架构师的道路（第六天）之漫谈基于数据库的权限系统的设计</a>(26858)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7751059" title="通向架构师的道路（第七天）之漫谈使用ThreadLocal改进你的层次的划分" target="_blank">通向架构师的道路（第七天）之漫谈使用ThreadLocal改进你的层次的划分</a>(24005)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7776907" title="通向架构师的道路（第十天）之Axis2 Web Service(一)" target="_blank">通向架构师的道路（第十天）之Axis2 Web Service(一)</a>(21325)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7763582" title="通向架构师的道路（第八天）之weblogic与apache的整合与调优" target="_blank">通向架构师的道路（第八天）之weblogic与apache的整合与调优</a>(21227)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7205832" title="5天学会jaxws-webservice编程第一天" target="_blank">5天学会jaxws-webservice编程第一天</a>(20850)</li>
</ul>
<p>评论排行</p>
<ul>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7698555" title="通向架构师的道路（第一天）之Apache整合Tomcat" target="_blank">通向架构师的道路（第一天）之Apache整合Tomcat</a>(142)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/8096762" title="通向架构师的道路（第十八天）万能框架Spring(一）" target="_blank">通向架构师的道路（第十八天）万能框架Spring(一）</a>(84)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7751059" title="通向架构师的道路（第七天）之漫谈使用ThreadLocal改进你的层次的划分" target="_blank">通向架构师的道路（第七天）之漫谈使用ThreadLocal改进你的层次的划分</a>(84)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7699236" title="通向架构师的道路（第二天）之apache tomcat https应用" target="_blank">通向架构师的道路（第二天）之apache tomcat https应用</a>(56)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7712691" title="通向架构师的道路（第五天）之tomcat集群-群猫乱舞" target="_blank">通向架构师的道路（第五天）之tomcat集群-群猫乱舞</a>(53)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7205832" title="5天学会jaxws-webservice编程第一天" target="_blank">5天学会jaxws-webservice编程第一天</a>(51)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7776907" title="通向架构师的道路（第十天）之Axis2 Web Service(一)" target="_blank">通向架构师的道路（第十天）之Axis2 Web Service(一)</a>(47)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7844589" title="通向架构师的道路（第十四天）Axis2 Web Service安全之rampart" target="_blank">通向架构师的道路（第十四天）Axis2 Web Service安全之rampart</a>(44)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/7708724" title="通向架构师的道路（第四天）之Tomcat性能调优-让小猫飞奔" target="_blank">通向架构师的道路（第四天）之Tomcat性能调优-让小猫飞奔</a>(44)</li>
<li><a href="http://blog.csdn.net/lifetragedy/article/details/8507252" title="通向架构师的道路（第二十七天）IBM网格计算与企业批处理任务架构" target="_blank">通向架构师的道路（第二十七天）IBM网格计算与企业批处理任务架构</a>(41)
推荐文章</li>
</ul>
<p><a href="http://www.csdn.net/company/about.html" target="_blank">公司简介</a>|<a href="http://www.csdn.net/company/recruit.html" target="_blank">招贤纳士</a>|<a href="http://www.csdn.net/company/marketing.html" target="_blank">广告服务</a>|<a href="http://www.csdn.net/company/account.html" target="_blank">银行汇款帐号</a>|<a href="http://www.csdn.net/company/contact.html" target="_blank">联系方式</a>|<a href="http://www.csdn.net/company/statement.html" target="_blank">版权声明</a>|<a href="http://www.csdn.net/company/layer.html" target="_blank">法律顾问</a>|<a href="mailto:webmaster@csdn.net">问题报告</a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=2355263776&amp;site=qq&amp;menu=yes" target="_blank">QQ客服</a> <a href="http://e.weibo.com/csdnsupport/profile" target="_blank">微博客服</a> <a href="http://bbs.csdn.net/forums/Service" target="_blank">论坛反馈</a> <a href="mailto:webmaster@csdn.net">联系邮箱：webmaster@csdn.net</a> 服务热线：400-600-2320京 ICP 证 070598 号北京创新乐知信息技术有限公司 版权所有世纪乐知(北京)网络技术有限公司 提供技术支持江苏乐知网络技术有限公司 提供商务支持Copyright © 1999-2012, CSDN.NET, All Rights Reserved <a href="http://www.hd315.gov.cn/beian/view.asp?bianhao=010202001032100010" target="_blank"><img src="" alt="GongshangLogo"></a>
<img src="http://counter.csdn.net/pv.aspx?id=24" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/架构师/">架构师</a></li></span></span> | <span class="tags">Tagged <a href="/tags/架构师/" class="label label-primary">架构师</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:29"datetime="2014-03-07 09:54:29"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-架构师--通向架构师的道路（第二十六天）漫谈架构与设计文档的写作技巧/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-架构师--通向架构师的道路（第二十六天）漫谈架构与设计文档的写作技巧" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-架构师--大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？/">大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:29.000Z"> <a href="/2014/02/02/2014-02-02-架构师--大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-">大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？</h1>
<p><a href="http://www.zhihu.com/question/20091391" target="_blank">大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？</a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" target="_blank">天顺</a>，<strong>搞支付的，接受各类支付业务咨询</strong><a href="">收起</a></p>
<p><a href="http://www.zhihu.com/people/liao-yan-48" target="_blank">廖艳</a>、<a href="http://www.zhihu.com/people/morbred" target="_blank">张大维</a>、<a href="http://www.zhihu.com/people/ze-fang-tong-yun" title="泽芳铜芸" target="_blank">泽芳铜芸</a><a href="">等人赞同</a>
谢邀，不过我看到一楼答案50多票赞同后就不想写了。
提问是大型支付系统的风控和对账是如何实现的，答案却是从商户角度谈使用支付公司产品对账的体验。
不过，我今天看到@黄继新 也在其他问题中逆袭了一把，质疑了第一答案。所以我就先放在这里，如果赞同数超过35票，我就把我所做的支付结算系统相关业务经验分享给大家，否则就算啦~
另，暂时没有答案，欢迎折叠。
鉴于已经有30票了，看这样子超过35是没什么太大问题，由于内容众多，我先准备起来了
请大家稍安勿躁
------------------------------------------------------------扯淡的分割线----------------------------------------------------------
先扯淡一下对账，这坑有点大，容我慢慢填。刚刚打了半小时的草稿由于没保存，死机后被系统吃掉了……知乎貌似原来有自动保存功能的……去哪里了……
业务上，为何对账，对账的操作步骤等@詹世波已经说得很多了，我谈谈一些没涉及的。
为了可以更好地解释支付结算系统对账过程，我们先把业务从头到尾串起来描述一下场景，帮助大家理解：
一个可能得不能再可能的场景，请大家深刻理解里面每个角色做了什么，获取了哪些信息：
某日阳光灿烂，支付宝用户小明在淘宝上看中了暖脚器一只，价格100元。犹豫再三后小明使用支付宝网银完成了支付，支付宝显示支付成功，淘宝卖家通知他已发货，最近几日注意查收。
我们来看看这个过程中有几个相关方，分别做了什么。我语文不好，写得饶口，如果看不懂请多看几次：
<strong>小明：</strong>持卡人，消费者，淘宝和支付宝的注册会员，完成了支付动作，自己的银行账户资金减少，交易成功。
<strong>银行：</strong>收单银行，接受来自支付宝的名为“支付宝BBB”的100元订单，并引导持卡人小明支付成功，扣除小明银行卡账户余额后返回给支付宝成功通知，并告诉支付宝这笔交易在银行流水号为“银行CCC”
<strong>支付宝：</strong>支付公司，接收到淘宝发来的订单号为“淘宝AAA”的商户订单号，并形成支付系统唯一流水号：“支付宝BBB”发往银行系统。然后获得银行回复的支付成功信息，顺带银行流水号“银行CCC”
<strong>淘宝：</strong>我们支付公司称淘宝这类电商为商户，是支付系统的客户。淘宝向支付系统发送了一笔交易收单请求，金额为100，订单号为:“淘宝AAA”，支付系统最后反馈给淘宝这笔支付流水号为“支付BBB”
以上流程貌似大家都达到了预期效果，但实际上仍然还有一个问题：
对支付公司（支付宝）而言，虽然银行通知了它支付成功，但资金实际还要T+1后结算到它银行账户，所以目前只是一个信息流，资金流还没过来。
<strong>Tips:</strong>插一句话，对支付系统内部账务来说，由于资金没有能够实时到账，所以此时小明的这笔100元交易资金并没有直接记入到系统资产类科目下的“银行存款”科目中，而是挂在“应收账款”或者“待清算科目”中。大白话就是，这100元虽然答应给我了，我也记下来了，但还没收到，我挂在那里。
对商户（淘宝）而言，虽然支付公司通知了它支付成功，他也发货了，但资金按照合同也是T+1到账。如果不对账确认一下，恐怕也会不安。
倒是对消费者（小明）而言：反正钱付了，你们也显示成功了，等暖脚器呀等暖脚器~
基于支付公司和商户的困惑，我们的支付结算系统需要进行两件事情：一是资金渠道对账，通称对银行帐；二是商户对账，俗称对客户帐。对客户帐又分为对公客户和对私客户，通常对公客户会对对账文件格式、对账周期、系统对接方案有特殊需求，而对私客户也就是我们一般的消费者只需要可以后台查询交易记录和支付历史流水就可以了。
<strong>我们先聊银行资金渠道对账，由于支付公司的资金真正落地在商业银行，所以资金渠道的对账显得尤为重要。</strong>
在一个银行会计日结束后，银行系统会先进行自己内部扎帐，完成无误后进行数据的清分和资金的结算，将支付公司当日应入账的资金结算到支付公司账户中。于此同时，目前多数银行已经支持直接系统对接的方式发送对账文件。
于是，在某日临晨4点，支付宝系统收到来自银行发来的前一会计日对账文件。根据数据格式解析正确后和前日支付宝的所有交易数据进行匹配，理想情况是一一匹配成功无误，然后将这些交易的对账状态勾对为“已对账”。
<strong>Tips:</strong>此时，对账完成的交易，会将该笔资金从“应收账款”或者“待清算账款”科目中移动到“银行存款”科目中，以示该交易真正资金到账。
以上太理想了，都那么理想就不要对账了。所以通常都会出一些差错，那么我总结了一下常见的差错情况：
1.支付时提交到银行后没有反馈，但对账时该交易状态为支付成功
这种情况很正常，因为我们在信息传输过程中，难免会出现掉包和信息不通畅。消费者在银行端完成了支付行为，银行的通知信息却被堵塞了，如此支付公司也不知道结果，商户也不知道结果。如果信息一直没法通知到支付公司这边，那么这条支付结果就只能在日终对账文件中体现了。这时支付公司系统需要对这笔交易进行补单操作，将交易置为成功并完成记账规则，有必要还要通知到商户。
<strong>此时的小明：估计急的跳起来了……付了钱怎么不给说支付成功呢！坑爹！</strong>
<strong>TIPS：</strong>通常银行系统会开放一个支付结果查询接口。支付公司会对提交到银行但没有回复结果的交易进行间隔查询，以确保支付结果信息的实时传达。所以以上情况出现的概率已经很少了。
2.我方支付系统记录银行反馈支付成功，金额为100，银行对账金额不为100
这种情况已经不太常见了，差错不管是长款和短款都不是我们想要的结果。通常双方系统通讯都是可作为纠纷凭证的，如果银行在支付结果返回时确认是100元，对账时金额不一致，可以要求银行进行协调处理。而这笔账在支付系统中通常也会做对应的挂账处理，直到纠纷解决。
3.我方支付系统记录银行反馈支付成功，但对账文件中压根不存在
这种情况也经常见到，因为跨交易会计日的系统时间不同，所以会出现我们认为交易是23点59分完成的，银行认为是第二天凌晨0点1分完成。对于这种情况我们通常会继续挂账，直到再下一日的对账文件送达后进行对账匹配。
如果这笔交易一直没有找到，那么就和第二种情况一样，是一种短款，需要和银行追究。
以上情况针对的是一家银行资金渠道所作的流程，实际情况中，支付公司会在不同银行开立不同银行账户，用以收单结算（成本会降低），所以真实情况极有可能是：
临晨1点，工行对账文件丢过来（支行A）
临晨1点01分，工行又丢一个文件过来（支行B）
临晨1点15分，农行对账文件丢过来
。 。 。
临晨5点，兴业银行文件丢过来
。。。
不管什么时候，中国银行都必须通过我方业务员下载对账文件再上传的方式进行对账，所以系统接收到中行文件一般都是早上9点05分……
对系统来说，每天都要处理大量并发的对账数据，如果在交易高峰时段进行，会引起客户交互的延迟和交易的失败，这是万万行不得的
所以通常支付公司不会用那么傻的方式处理数据，而是在一个会计日结束后，通常也是临晨时段，将前一日交易增量备份到专用对账服务器中，在物理隔绝环境下进行统一的对账行为，杜绝硬件资源的抢占。
以上是银行资金渠道入款的对账，出款基本原理一致，不过出款渠道在实际业务过程中还有一些特别之处，由于大家不是要建设系统，我就不赘述了。
<strong>谈完了资金渠道的对账，我们再来看看对客户帐。</strong>
前面提到了，由于资金落在银行，所以对支付公司来说，对银行帐非常重要。那么同理，由于资金落在支付公司，所以对商户来说，对支付公司账也一样重要。能否提供高品质甚至定制化的服务，是目前支付公司走差异化路线的一个主要竞争点。
就流程而言@詹世波已经说的差不多了，我就不赘述了……
----------------------------------------------------------没经过排版的小知识点---------------------------------------------------
之前说过，银行与支付公司之间的通讯都是可以作为纠纷凭证的。原理是对支付报文的关键信息进行密钥加签+md5处理，以确保往来报文“<strong>不可篡改，不可抵赖</strong>”。
同理，支付公司和商户之间也会有类似机制保证报文的可追溯性，由此我们可以知道，一旦我方支付系统通知商户支付结果，那么我们就要为此承担责任。由此我们再推断一个结论：
<strong>即便某支付订单银行方面出错导致资金未能到账，一旦我们支付系统通知商户该笔交易成功，那么根据协议该结算的资金还是要结算给这个商户。自然，我们回去追究银行的问题，把账款追回。</strong>
----------------------------------------------------------没经过排版的小知识点---------------------------------------------------
一、对支付系统而言，最基本的对账功能是供商户在其后台查询下载某一时间段内的支付数据文件，以供商户自己进行对账。
这个功能应该是个支付公司就有，如果没有就别混了。
二、对大多数支付系统而言，目前已经可以做到对账文件的主动投送功能。
这个功能方便了商户系统和支付系统的对接，商户的结算人员无须登录支付平台后台下载文件进行对账，省去了人工操作的麻烦和风险。
对大型支付系统而言，商户如果跨时间区域很大，反复查询该区域内的数据并下载，会对服务器造成比较大的压力。各位看官别笑，觉得查个数据怎么就有压力了。实际上为了这个查询，我最早就职的一家支付公司重新优化了所有SQL语句，并且因为查询压力过大服务器瘫痪过好几次。
现在比较主流的做法是把商户短期内查询过、或者经常要查询的数据做缓存。实在不行就干脆实时备份，两分钟同步一次数据到专用数据库供商户查询，以避免硬件资源占用。甚至……大多数支付公司都会对查询范围跨度和历史事件进行限制，比如最多只能查一个月跨度内，不超过24个月前的数据……以避免服务嗝屁。
对账这块大致就这样了，再往细的说就说不完了，大家有什么想问的可以单M我或者回复答案。
稍后给大家讲一下风控。
-----------------------------------------------风控的分割线-------------------------------------------
风险控制，在各行各业都尤其重要。
金融即风险，控制好风险，才有利润。
虽然第三方支付严格意义上说并非属于金融行业，但由于涉及资金的清分和结算，业务主体又是资金的收付，所以风险控制一样非常重要。
对支付公司来说，风控主要分为合规政策风控以及交易风控两种。
前者主要针对特定业务开展，特定产品形态进行法规层面的风险规避，通常由公司法务和风控部门一起合作进行。例如，一家公司要开展第三方支付业务，现在要获得由人民银行颁发的“支付业务许可证”。遵守中国对于金融管制的所有条规，帮助人行监控洗钱行为……这些法规合规风险，虽然条条框框，甚至显得文绉绉，但如果没人解读没人公关，业务都会无法开展。
当然，这块也不是本题所关注的重点，提问者关注的，应当是业务进行过程中的交易风控环节。
现在随着各支付公司风险控制意识的加强，风控系统渐渐被重视起来。除了上述提到的合规风控相关功能，风控系统最讲技术含量，最讲业务水平，最考究数据分析的业务就是交易风控环节。
对一笔支付交易而言，在它发生之前、发生过程中及发生过程后，都会被风控系统严密监控，以确保支付及客户资产安全。而所有的所有秘密，都归结到一个词头上：规则。风控系统是一系列规则的集合，任何再智能的风控方案，都绕不开规则二字。
我们先看看，哪些情况是交易风控需要监控处理的：
1.钓鱼网站
什么是钓鱼呢？
用我的说法，就是利用技术手段蒙蔽消费者，当消费者想付款给A的时候，替换掉A的支付页面，将钱付给B，以达成非法占用资金的目的。
还有更低级的，直接就是发小广告，里面带一个类似<a href="http://tiaobao.com/" target="_blank"><a href="http://tiaobao.com">http://tiaobao.com</a></a>的网址，打开后和淘宝页面一摸一样，上当客户直接付款给假冒网站主。
第一种情况风控系统是可以通过规则进行简单判定的，虽然有误杀，但不会多。
通常使用的规则是判断提交订单的IP地址和银行实际支付完成的IP地址是否一致，如果不一致，则判断为钓鱼网站风险交易，进入待确认订单。
但第二种情况，亲爹亲娘了，支付公司真的没办法。当然遇到客户投诉后可能会事后补救，但交易是无法阻止了。
2.盗卡组织利用盗卡进行交易
大家都知道，信用卡信息是不能随便公布给别人的，国内大多信用卡虽然都设置了密码，但银行仍然会开放无磁无密支付接口给到商户进行快速支付之用。
所谓无磁无密，就是不需要磁道信息，不需要密码就可以进行支付的通道。只需要获取到客户的CVV，有效期，卡号三个核心信息，而这三个信息是在卡上直接有的，所以大家不要随便把卡交给别人哦~
碰到类似的这种交易，风控系统就不会像钓鱼网站这样简单判断了。
过去我们所有的历史交易，都会存库，不仅会存支付相关信息，更会利用网页上的控件（对，恶心的activex或者目前用的比较多的flash控件）抓取支付者的硬件信息，存储在数据库中。
当一笔交易信息带着能够搜集到的硬件信息一同提交给风控系统时，风控系统会进行多种规则判定。
例如：当天该卡是否交易超过3次
当天该IP是否交易超过3次
该主机CPU的序列号是否在黑名单之列
等等等等，一批规则跑完后，风控系统会给该交易进行加权评分，标示其风险系数，然后根据评分给出处理结果。
通过硬件信息采集以及历史交易记录回溯，我们可以建立很多交易风控规则来进行监控。所以规则样式的好坏，规则系数的调整，就是非常重要的用以区别风控系统档次高低的标准。
例如，我听说著名的风控厂商RED，有一个“神经网络”机制，灰常牛逼。
其中有一个规则我到现在还记忆犹新：
某人早上八点在加利福尼亚进行了信用卡支付，到了下午一点，他在东亚某小国家发起了信用卡支付申请。系统判断两者距离过长，不是短短5小时内能够到达的，故判定交易无效，支付请求拒绝。
规则非常重要，当然，数据也一样重要。我们不仅需要从自己的历史记录中整合数据，同时还要联合卡组织、银行、风控机构，购买他们的数据和风控服务用来增加自己的风控实力。
SO，风控是一个不断积累数据、分析数据、运营数据、积累数据的循环过程。
好的风控规则和参数，需要经过无数次的规则修改和调整，是一个漫长的过程。
不知道大家做互联网，有没有利用GA做过AB测试，同样的，风控系统也需要反复地做类似AB测试的实验，以保证理论和实际的匹配。
最后给大家说一个小小的概念：
所谓风控，是指风险控制，不是风险杜绝。
风控的目标一定不是把所有风险全部杜绝。
合理的风控，目标一定是：利润最大化，而不是风险最小化
过于严格的风控规则，反而会伤害公司利益（看看销售和风控经常打架就知道了）
不光是交易的风控，我们日常制定规则，法规，公司流程，也一定要秉着这个出发点进行规划。
以上，基本上差不多了，有问题大家随时留言评论我。
谢谢大家原谅我的傲娇，给我点了那么多票赞同，受之有愧。
最近（2013年7月）回头看了一下这个答案，感觉有一些描述不够精确，有一些语言不够精炼，思考着是不是重构一下这个答案……<a href=""></a></p>
<p><a href="http://www.zhihu.com/question/20091391/answer/15591658" target="_blank">2013-07-02</a><a href="">57 条评论</a><a href="">感谢</a><a href="">分享</a><a href="">收藏</a>•<a href="">没有帮助</a>•<a href="">举报</a></p>
<p><a href=""></a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/yangxi" title="杨希"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/yangxi" title="杨希" target="_blank">杨希</a></p>
<p>顺哥傲娇了……
2012-11-14<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/yangxi" title="杨希" target="_blank">杨希</a></p>
<p>啊，哈哈哈
2012-11-14<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/huwei-98" title="HuWei"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/huwei-98" title="HuWei" target="_blank">HuWei</a></p>
<p>所以，没有答案，哪来赞同，奇怪~
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/renxue" title="renxue"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/renxue" title="renxue" target="_blank">renxue</a></p>
<p>我也觉得傲娇了 你写答案是为了得到赞同吗？
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/du-bai-xing" title="度百行"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/du-bai-xing" title="度百行" target="_blank">度百行</a></p>
<p>赞成一下，期待更多专业的回答~
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/renxue" title="renxue" target="_blank">renxue</a></p>
<p>不喜勿入，根据知乎规定，目前这个答案可点“没有帮助”。
如果一个需要写好久的答案实际上没什么人关注，那我觉得没必要花那么多精力分享。我写答案不是为了赞同，但也不希望浪费时间。如果只有一两个人关心，我完全可以通过IM工具随时回答他们问题。
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>2</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/zhanshibo" title="詹世波"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/zhanshibo" title="詹世波" target="_blank">詹世波</a></p>
<p>哈哈，我也希望看到更切题的答案和回复，但一直没有出现，然后我就个人知道和了解的抛砖引玉了一把，希望引出更多的意见和答案，结果来了60多票.....
兄台莫恼哈，其实很多人都想了解支付结算系统相关业务，你就给大家科普一把嘛。
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/zhanshibo" title="詹世波"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/zhanshibo" title="詹世波" target="_blank">詹世波</a></p>
<p>看了下<a href="http://www.zhihu.com/people/tian-shun" target="_blank">@天顺</a> 的资料，原来是盛付通的啊，哈哈，真正的专业人士啊，欢迎科普
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/zhanshibo" title="詹世波" target="_blank">詹世波</a></p>
<p>哈哈，我不恼，分享原本应该就是快乐的，不过我性格如此，说话总是比较刺，您才不要见怪。
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><img src="&quot;知乎用户&quot;" alt=""></p>
<p>知乎用户</p>
<p>自动保存系统只有在草稿状态的时候才有用。所以在改答案的时候，要么就定期保存，要么就先在本地写好了…………【惨痛教训……
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/ban-ma" title="斑马"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/ban-ma" title="斑马" target="_blank">斑马</a></p>
<p><a href="http://www.zhihu.com/people/liu-chu-qiao" target="_blank">@刘楚桥</a>
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 知乎用户</p>
<p>相当惨痛……
2012-11-15<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/san-tian" title="三田"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/san-tian" title="三田" target="_blank">三田</a></p>
<p>想请教一下小明那个场景，如果小明用支付宝网银支付淘宝上的购物的话，我理解应该这样，
消费者：小明
收单机构：支付宝
商户：淘宝
发卡银行：网银银行
卡组织：银联
关于对账还真是门学问呢，看来要学的还真多。多谢。
2012-11-16<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/san-tian" title="三田" target="_blank">三田</a></p>
<p>这个过程就把卡组织剔除掉吧，便于沟通。实际上大多数支付公司网银也是直连银行，没有通过银联系统做资金清分。
2012-11-16<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/zhanshibo" title="詹世波"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/zhanshibo" title="詹世波" target="_blank">詹世波</a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" target="_blank">@天顺</a> 同学讲下Paypal或信用卡对账吧，我之前搞对账的时候最怕弄的就是这块，到现在都还有点搞不清楚
2012-11-16<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p><a href="http://www.zhihu.com/people/zhanshibo" target="_blank">@詹世波</a> 原本我的博客里把外卡相关的东西全给介绍了，无奈后来服务器没续费，报废了，又没保存……这些玩意写起来要命，关注的人又不多……所以我后来就越来越懒得写了，哈哈
2012-11-16<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/shi-wei-89-73" title="时伟"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/shi-wei-89-73" title="时伟" target="_blank">时伟</a></p>
<p>我怎么觉得，最后一句才是重点。。
2012-11-16<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/mi-su" title="米苏"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/mi-su" title="米苏" target="_blank">米苏</a></p>
<p>其实对账文件的收发，勾兑，差错处理基本上来说，已经可以实现系统自动化处理了。对于商户B2C平台、支付平台、自连银行之间由于扎差时间或系统时间不同产生的差异，才是对账处理最麻烦的地方
2012-11-16<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/iris-chen" title="Iris Chen"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/iris-chen" title="Iris Chen" target="_blank">Iris Chen</a></p>
<p>对账终于理顺了，等待风控的描述。
2012-11-17<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/he-jian-liang" title="何建亮"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/he-jian-liang" title="何建亮" target="_blank">何建亮</a></p>
<p>why 35?
2012-11-20<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/he-jian-liang" title="何建亮" target="_blank">何建亮</a></p>
<p>随便说个数字，哈哈~有点人数关注，写了才有意义呀
2012-11-21<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/lu-yao-21" title="璐瑶"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/lu-yao-21" title="璐瑶" target="_blank">璐瑶</a></p>
<p>“通常使用的规则是判断提交订单的IP地址和银行实际支付完成的IP地址是否一致，如果不一致，则判断为钓鱼网站风险交易，进入待确认订单。”
弱弱的问下，提交订单跟完成支付不都是用户行为么，为什么IP不一致会认定为钓鱼网站呢？
2012-11-28<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/lu-yao-21" title="璐瑶" target="_blank">璐瑶</a></p>
<p>完整支付行为的是用户，而发起订单的是钓鱼网站，两者IP不匹配。
2012-11-28<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/lu-yao-21" title="璐瑶"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/lu-yao-21" title="璐瑶" target="_blank">璐瑶</a>回复 <a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p>呵呵，了解了，非常感谢～
2012-11-30<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/jixin" title="黄继新"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/jixin" title="黄继新" target="_blank">黄继新</a></p>
<p>恭喜天顺逆袭成功！要相信知乎社区的力量〜
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/jixin" title="黄继新" target="_blank">黄继新</a></p>
<p>感谢继新赐予我力量！
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tujian" title="柏拉图"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tujian" title="柏拉图" target="_blank">柏拉图</a></p>
<p>辛苦了。码字哈多。<a href="http://www.zhihu.com/people/tian-shun" target="_blank">@天顺</a> 这个才是在支付公司应该学的东西。
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/tujian" title="柏拉图" target="_blank">柏拉图</a></p>
<p>这只是系统建设层面小小的经验，其实要做支付，还有很多很多……都不知从何说起。
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/jia-peng" title="贾鹏"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/jia-peng" title="贾鹏" target="_blank">贾鹏</a></p>
<p>天顺儿，这篇文章第一部分，有小明、银行、支付宝、淘宝的角色，在“银行”的角色里应该是“发卡行”而不是“收单行”吧，因为支付宝本身就处理收单工作了
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/jia-peng" title="贾鹏" target="_blank">贾鹏</a></p>
<p>线上网银渠道，发卡行就是收单行，不太会有银行作为收单行替其他行收单。外卡除外。
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/jia-peng" title="贾鹏"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/jia-peng" title="贾鹏" target="_blank">贾鹏</a>回复 <a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p>哈，在银联在线支付里，就有收单和发卡之分
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p>不太明白你所说的究竟为何……
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/etsir" title="徐梁君"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/etsir" title="徐梁君" target="_blank">徐梁君</a>回复 <a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p><a href="http://www.zhihu.com/people/jia-peng" target="_blank">@贾鹏</a> 第三方支付裏面，其實無所謂發卡、收單角色。如果一定要套用，的確銀行作爲發卡銀行來描述比較準確。<a href="http://www.zhihu.com/people/tian-shun" target="_blank">@天顺</a> 文中的描述有誤。
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/etsir" title="徐梁君" target="_blank">徐梁君</a></p>
<p>对第三方支付公司而言，所有收单银行渠道，即是他的收单行。
对收单行来说，第三方支付公司是收单商户。对第三方支付而言，收单银行即是收单行。
什么情况下需要区分发卡行和收单行？
也就是收单渠道不仅支持本行银行卡收单，同时支持他行卡收单时，会区分发卡行和收单行。
在互联网上，通常对第三方支付而言，无所谓区分发卡行和收单行，原因是事实上互联网支付基本都是本银行卡走本银行渠道，也就是线下POS所称的“本代本”。试问自己发的卡自己收单，又何必计较收单和发卡呢？
线下POS、外卡支付之所以要区分发卡行收单行，是因为其资金渠道特殊性所致。例如：通过银联清分网络，招行的POS机也可以刷工行的卡，然后通过银联进行数据清分，走跨行的资金清算轧张。
但互联网渠道，网银支付，99.99%的第三方支付渠道都是一家一家银行系统对接，对第三方支付的商户来说，第三方支付公司是收单机构；对持卡人来说，他所持信用卡的所在银行是发卡行；对第三方支付公司来说，前面是商户，后面是收单行，仅此而已。
当然，外卡的渠道和国内不同，将来可以单开一个专题去讨论。
2012-12-05<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/baiya" title="白鸦"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/baiya" title="白鸦" target="_blank">白鸦</a></p>
<p>画图吧。这事儿文字太难说清楚了
2012-12-06<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/jia-peng" title="贾鹏"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/jia-peng" title="贾鹏" target="_blank">贾鹏</a>回复 <a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p>你说的对
2012-12-06<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/etsir" title="徐梁君"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/etsir" title="徐梁君" target="_blank">徐梁君</a>回复 <a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p>你说的都对，我之前的表述也是同一个意思，但是有一点：第三方模式下，银行对持卡人来说是发卡行，对第三方来说才是收单行。所以要看文中描述时的主语是谁
2012-12-06<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/etsir" title="徐梁君" target="_blank">徐梁君</a></p>
<p>在网银支付过程中，持卡人无所谓发卡行和收单行概念，他只需要知道商户需要收钱，钱付给了支付宝即可。收单银行只对第三方支付机构有意义，何况从头至尾，基本都是站在第三方支付的角度看待问题，我觉得兄台无需在这个称呼上继续纠结了。
2012-12-06<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/wu-jing-qi" title="吴婧婍"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/wu-jing-qi" title="吴婧婍" target="_blank">吴婧婍</a></p>
<p>对于后来者，这个答案确实和日常工作非常接近，学习了！
2012-12-07<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tedeyang" title="宝术"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tedeyang" title="宝术" target="_blank">宝术</a></p>
<p>「银行丢个文件」银行确实只会丢文件
2012-12-27<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><img src="&quot;知乎用户&quot;" alt=""></p>
<p>知乎用户</p>
<p>那家风控企业应该是ReD（Retail Decisions），但是我看到首先想到的是Red Bend，好容易混淆。
2013-04-19<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/chen-song-53" title="陈嵩"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/chen-song-53" title="陈嵩" target="_blank">陈嵩</a></p>
<p>所以，广义范围内“出纳”
2013-06-22<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/eddy07" title="Eddy"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/eddy07" title="Eddy" target="_blank">Eddy</a></p>
<p>咨询个问题：刚看到一些关于三方那个支付机构的法规,三方支付机构必须将资金托管在一个银行，而你在这里写到三方支付公司基本上在每个银行都会有一个账户。那么这个银行账户和托管银行的资金交接是怎么一个过程呢？
2013-06-23<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/lukenothing" title="luke luke"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/lukenothing" title="luke luke" target="_blank">luke luke</a></p>
<p>请问，“支付BBB”与“支付宝BBB”是不是一样的？
2013-06-24<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/lukenothing" title="luke luke" target="_blank">luke luke</a></p>
<p>恩，一样的。
2013-06-24<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>1</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/eddy07" title="Eddy" target="_blank">Eddy</a></p>
<p>私信回了。
2013-06-24<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/roy-xie" title="Roy.Xie"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/roy-xie" title="Roy.Xie" target="_blank">Roy.Xie</a>回复 <a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）</p>
<p>天顺 老兄厉害，长知识了。听君一席话，胜读10年书。
2013-06-27<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/yituo-xiao-xin" title="一坨小欣"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/yituo-xiao-xin" title="一坨小欣" target="_blank">一坨小欣</a></p>
<p>举手提问：顺哥写的好清晰，但是还有几个小问题请教：
1.既然支付公司会在各家银行都开账户，那客户支付的款项不是可以立刻到账么?为什么是T+1日？（我知道这是个小问题，跟主题没啥子关系，囧。。。）
2.是否有人通过支付系统进行洗钱？现在有把反洗钱纳入风控范畴么？
3.风控预警的效率高不高?会不会有很多误判？（银行从业人员表示，我们的预警量实在是忒多了= =!）
2013-07-08<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/yituo-xiao-xin" title="一坨小欣" target="_blank">一坨小欣</a></p>
<p>一个一个回答哈。
1.T+1日只是普遍情况，大多数银行的网银收单产品的确就是规定的T+1保证到款。当然据我所知已经有部分银行支持即时到账了，这个问题应该问银行，而不是支付公司。
2.有通过支付公司洗钱的，目前仍然有，甚至不少支付公司（不点名了）很多产品就是明着往灰色地带走的。当然，人民银行要求配合的反洗钱措施都会做的，商户审核也会相对走过场，不会太过分。
3.会有误判，这个避免不了，所以风控才是一门学问啊。
2013-07-08<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/chen-han-66" title="沈晗"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/chen-han-66" title="沈晗" target="_blank">沈晗</a></p>
<p>哥们你现在不搞技术，专心忽悠了吧，这么罗里吧嗦的解释最终细节部分却少的可怜。
2013-07-08<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/chen-han-66" title="沈晗" target="_blank">沈晗</a></p>
<p>哥们，不知道你现在是搞什么的，相信大家都会鼓励你来一篇细节部分多得令人发指的答案出来，我第一时间帮你点赞！
2013-07-08<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/min-you" title="闵游"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/min-you" title="闵游" target="_blank">闵游</a></p>
<p>作者好用心，还很谦逊，好人一个
2013-07-08<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/su-chi-chi" title="苏迟迟"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/su-chi-chi" title="苏迟迟" target="_blank">苏迟迟</a></p>
<p>请问支付宝公司账户上客户的资金，会用于购买短期的定期理财产品么？还是说，只是和银行谈一个比较高的利率，吃利息？
2013-07-08<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/tian-shun" title="天顺"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/tian-shun" title="天顺" target="_blank">天顺</a>（作者）回复 <a href="http://www.zhihu.com/people/su-chi-chi" title="苏迟迟" target="_blank">苏迟迟</a></p>
<p>八仙过海各显神通，呵呵。你说的方式其实都是可以的，主要看合作的商业银行内部如何帮你包装这个事情，单纯吃活期利息岂不亏死了……
2013-07-09<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/zhang-hong-wei-95" title="张宏伟"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/zhang-hong-wei-95" title="张宏伟" target="_blank">张宏伟</a></p>
<p>很有帮助
2013-07-09<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a></p>
<p><a href=""></a><a href="http://www.zhihu.com/people/hai-li-35" title="hai li"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/hai-li-35" title="hai li" target="_blank">hai li</a></p>
<p>不错
2013-07-09<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
<a href=""></a><a href="http://www.zhihu.com/people/ziming-shen" title="ziming shen"><img src="" alt=""></a></p>
<p><a href="http://www.zhihu.com/people/ziming-shen" title="ziming shen" target="_blank">ziming shen</a></p>
<h2 id="-">合理的风控，目标一定是：利润最大化，而不是风险最小化</h2>
<p>多希望公司那个213的风控能看到。
2013-07-09<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">回复</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">赞</a><em>0</em> 赞<a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">举报</a>
写下你的评论…</p>
<p><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">评论</a><a href="http://www.zhihu.com/question/20091391/answer/15591658#" target="_blank">取消</a>
只有作者关注的人才能在这里评论
知乎是一个真实的问答社区，在这里分享知识、经验和见解，发现更大的世界。
<a href="">使用邮箱注册 »</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/架构师/">架构师</a></li></span></span> | <span class="tags">Tagged <a href="/tags/架构师/" class="label label-primary">架构师</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:29"datetime="2014-03-07 09:54:29"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-架构师--大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-架构师--大型的支付系统，如支付宝、财付通每天交易额都非常巨大，后系统是如何对账、风控的呢？" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/145/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/143/">143</a></li><li><a class="page-number" href="/page/144/">144</a></li><li><a class="page-number" href="/page/145/">145</a></li><li class="active"><li><span class="page-number current">146</span></li><li><a class="page-number" href="/page/147/">147</a></li><li><a class="page-number" href="/page/148/">148</a></li><li><a class="page-number" href="/page/149/">149</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/161/">161</a></li><li><a class="page-number" href="/page/162/">162</a></li><li><a class="extend next" href="/page/147/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Site powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a>  update time: <em>2014-04-07 19:25:40</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
