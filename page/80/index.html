
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 80 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-缓存-ehcache--用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？/">用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-缓存-ehcache--用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-ehcache-">用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？</h1>
<ul>
<li><a href="http://www.oschina.net/" target="_blank">首页</a></li>
<li><a href="http://www.oschina.net/project" target="_blank">开源软件</a></li>
<li><a href="http://www.oschina.net/question" target="_blank">讨论区</a></li>
<li><a href="http://www.oschina.net/code/list" target="_blank">代码分享</a></li>
<li><a href="http://www.oschina.net/news" target="_blank">资讯</a></li>
<li><a href="http://www.oschina.net/blog" target="_blank">博客</a></li>
<li><a href="http://www.oschina.net/android" target="_blank">Android</a></li>
<li><a href="http://www.oschina.net/job" target="_blank">招聘</a></li>
</ul>
<p>当前访客身份：游客 [ <a href="http://www.oschina.net/home/login" target="_blank">登录</a> | <a href="http://www.oschina.net/home/reg" target="_blank">加入开源中国</a> ]</p>
<p>当前位置：<a href="http://www.oschina.net/question" target="_blank">讨论区</a> » <a href="http://www.oschina.net/question?catalog=1" target="_blank">技术问答</a> » <a href="http://www.oschina.net/p/ehcache" target="_blank">EhCache</a></p>
<p>软件 代码 讨论区 新闻 博客
<a href="http://my.oschina.net/zwtlong" target="_blank"><img src="&quot;zwt&quot;" alt="zwt"></a></p>
<h1 id="-ehcache-"><a href="">用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？</a></h1>
<p><a href="http://my.oschina.net/zwtlong" target="_blank">zwt</a> 发表于 5-3 13:09 5个月前, <a href="http://www.oschina.net/question/146494_52050#answers" target="_blank">4</a>回/600阅, 最后回答: 1个月前
<strong><a href="http://www.oschina.net/question" target="_blank">讨论区</a> » <a href="http://www.oschina.net/question?catalog=1" target="_blank">技术问答</a></strong></p>
<p>【杭州】开源中国-源创会第十三期开始报名 <a href="http://www.oschina.net/question/28_72721" target="_blank">我要报名»</a>
在使用ehcache  如果碰到意外情况，断电或服务器挂掉，我希望重启后 ehcache 能自动加载之前的缓存，但一直试都不行，不知道要怎么配置；</p>
<p>目前在重启服务器的时候会提示：</p>
<p>警告: The index for data file stake.data is out of date, probably due to an unclean shutdown. Deleting index file stake.index</p>
<p>目前配置：
<a href="http://www.oschina.net/question/146494_52050#viewSource" title="view source" target="_blank">view source</a><a href="http://www.oschina.net/question/146494_52050#printSource" title="print" target="_blank">print</a><a href="http://www.oschina.net/question/146494_52050#about" title="?" target="_blank">?</a></p>
<p>01</p>
<p>&lt;</p>
<p>diskStore</p>
<p>path</p>
<p>=</p>
<p>&quot;java.io.tmpdir&quot;</p>
<p>/&gt;</p>
<p>02</p>
<p>03</p>
<p>&lt;</p>
<p>defaultCache</p>
<p>04</p>
<p>maxElementsInMemory</p>
<p>=</p>
<p>&quot;10000&quot;
05</p>
<p>eternal</p>
<p>=</p>
<p>&quot;false&quot;</p>
<p>06</p>
<p>timeToIdleSeconds</p>
<p>=</p>
<p>&quot;43200&quot;
07</p>
<p>timeToLiveSeconds</p>
<p>=</p>
<p>&quot;43200&quot;</p>
<p>08</p>
<p>overflowToDisk</p>
<p>=</p>
<p>&quot;true&quot;
09</p>
<p>diskPersistent</p>
<p>=</p>
<p>&quot;true&quot;</p>
<p>10</p>
<p>diskExpiryThreadIntervalSeconds</p>
<p>=</p>
<p>&quot;120&quot;
11</p>
<p>memoryStoreEvictionPolicy</p>
<p>=</p>
<p>&quot;LFU&quot;</p>
<p>12</p>
<p>/&gt;</p>
<p><strong>标签：</strong> <a href="http://www.oschina.net/question/tag/ehcache" title="Java缓存框架 EhCache" target="_blank">EhCache</a> <a href="http://www.oschina.net/question/tag/java" title="编程语言 Java" target="_blank">Java</a>
<a href="">我想问同样的问题</a>  共<em>1</em>个人想要问同样的问题 <a href="">补充话题说明»</a></p>
<p><strong>分享到</strong> <a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a>**</p>
<p><a href="&quot;收藏此话题&quot;">收藏</a>
**</p>
<p>6
**</p>
<p><a href="">举报</a>
**</p>
<p><a href="&quot;踩：这问题不知道在说什么，或者没什么用&quot;">踩</a> 0 | <a href="&quot;顶：这问题很有用或者很清晰明了&quot;">顶</a> 0
**</p>
<h2 id="-http-www-oschina-net-question-146494_52050-answers-http-www-oschina-net-question-146494_52050-sort-time-answers-http-www-oschina-net-question-146494_52050-top-4-http-www-oschina-net-question-146494_52050-answerform-"><a href="http://www.oschina.net/question/146494_52050#answers" target="_blank">按评价排序</a> | <a href="http://www.oschina.net/question/146494_52050?sort=time#answers" target="_blank">显示最新答案</a> | <a href="http://www.oschina.net/question/146494_52050#top" target="_blank">回页面顶部</a>  <a href=""></a>共有<em>4</em>个答案 <a href="http://www.oschina.net/question/146494_52050#answerform">我要回答»</a></h2>
<ul>
<li><a href="http://my.oschina.net/zwtlong" target="_blank"><img src="&quot;zwt&quot;" alt="zwt"></a></li>
</ul>
<p><a href="http://my.oschina.net/zwtlong" target="_blank">zwt</a> 回答于 2012-05-03 13:32</p>
<p><a href="">举报</a>
已经解决，在ehcache初始化之前</p>
<p>System.setProperty(&quot;net.sf.ehcache.enableShutdownHook&quot;,&quot;true&quot;);</p>
<p>请看 <a href="http://stackoverflow.com/questions/2373431/ehcache-disk-store-unclean-shutdown" target="_blank"><a href="http://stackoverflow.com/questions/2373431/ehcache-disk-store-unclean-shutdown">http://stackoverflow.com/questions/2373431/ehcache-disk-store-unclean-shutdown</a></a></p>
<p><a href="&quot;这是一个好答案，能解决问题&quot;">有帮助</a><em>(0)</em> | <a href="&quot;这答案无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> | <a href="">评论</a><em>(0)</em> | <a href="http://www.oschina.net/question/answer?question=52050&amp;answer=207929" target="_blank">引用此答案</a></p>
<ul>
<li><a href="http://my.oschina.net/u/558914" target="_blank"><img src="&quot;samsamsam&quot;" alt="samsamsam"></a></li>
</ul>
<p><a href="http://my.oschina.net/u/558914" target="_blank">samsamsam</a> 回答于 2012-05-14 16:29</p>
<p><a href="">举报</a>
我想请教，我按照</p>
<p>System.setProperty(&quot;net.sf.ehcache.enableShutdownHook&quot;,&quot;true&quot;);</p>
<p>这个方法试过还是The index for data file is out of date。。。。。
<strong>--- 共有 1 条评论 ---</strong></p>
<ul>
<li><a href="http://my.oschina.net/zwtlong" target="_blank"><img src="&quot;zwt&quot;" alt="zwt"></a>  你要在加载ehcache之前设置环境变量，设置成功后看会输出log (4个月前 by zwt) <a href="">回复</a></li>
</ul>
<p><a href="&quot;这是一个好答案，能解决问题&quot;">有帮助</a><em>(0)</em> | <a href="&quot;这答案无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> | <a href="">评论</a><em>(1)</em> | <a href="http://www.oschina.net/question/answer?question=52050&amp;answer=216080" target="_blank">引用此答案</a></p>
<ul>
<li><a href="http://my.oschina.net/u/732846" target="_blank"><img src="&quot;fbfan520&quot;" alt="fbfan520"></a></li>
</ul>
<p><a href="http://my.oschina.net/u/732846" target="_blank">fbfan520</a> 回答于 2012-09-05 14:00</p>
<p><a href="">举报</a>
 System.setProperty(&quot;net.sf.ehcache.enableShutdownHook&quot;,&quot;true&quot;);请问这句加在哪里
<strong>--- 共有 1 条评论 ---</strong></p>
<ul>
<li><a href="http://my.oschina.net/zwtlong" target="_blank"><img src="&quot;zwt&quot;" alt="zwt"></a>  在ehcache初始化之前 (1个月前 by zwt) <a href="">回复</a></li>
</ul>
<p><a href="&quot;这是一个好答案，能解决问题&quot;">有帮助</a><em>(0)</em> | <a href="&quot;这答案无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> | <a href="">评论</a><em>(1)</em> | <a href="http://www.oschina.net/question/answer?question=52050&amp;answer=297289" target="_blank">引用此答案</a></p>
<ul>
<li><a href="http://my.oschina.net/u/732846" target="_blank"><img src="&quot;fbfan520&quot;" alt="fbfan520"></a></li>
</ul>
<p><a href="http://my.oschina.net/u/732846" target="_blank">fbfan520</a> 回答于 2012-09-07 13:35</p>
<p><a href="">举报</a>
在ehcache初始化之前是什么意思？ public static CacheManager manager = CacheManager.create(&quot;D:\XML\ehcache.xml&quot;);
    public static Cache diskOnlyEternalCache = null;
    public static Cache diskEternalCache = null;
    public static Cache disk7DayCache = null;
    public static Cache diskSyn7DayCache = null;
    public static Cache disk1DayCache = null;</p>
<pre><code>private CacheManageService() {

}

public synchronized static Cache getDiskOnlyEternalCache() {

    if (diskOnlyEternalCache == null) {
        diskOnlyEternalCache = manager.getCache(&quot;diskOnlyEternalCache&quot;);
    }
    return diskOnlyEternalCache;
}
</code></pre><p>像这个程序我加在哪里？
<a href="&quot;这是一个好答案，能解决问题&quot;">有帮助</a><em>(0)</em> | <a href="&quot;这答案无法解决问题，或者模糊不清&quot;">没帮助</a><em>(0)</em> | <a href="">评论</a><em>(0)</em> | <a href="http://www.oschina.net/question/answer?question=52050&amp;answer=298897" target="_blank">引用此答案</a></p>
<p><a href="http://www.oschina.net/question/$link.user($g_user" target="_blank"><img src="&quot;非会员用户&quot;" alt="非会员用户"></a>)   <a href="&quot;粗体(Ctrl+B"></a>&quot;)<a href="&quot;斜体(Ctrl+I"></a>&quot;)<a href="&quot;下划线(Ctrl+U"></a>&quot;)<a href="&quot;删除线&quot;"></a><a href="&quot;删除格式&quot;"></a><a href="&quot;编号&quot;"></a><a href="&quot;项目符号&quot;"></a><a href="&quot;文字颜色&quot;"></a><a href="&quot;文字背景&quot;"></a><a href="&quot;字体&quot;"></a><a href="&quot;文字大小&quot;"></a><a href="&quot;超级链接&quot;"></a><a href="&quot;取消超级链接&quot;"></a><a href="&quot;插入表情&quot;"></a><a href="&quot;插入程序代码或脚本&quot;"></a><a href="&quot;图片&quot;"></a><a href="&quot;插入Flash&quot;"></a><a href="&quot;引用某段文字&quot;"></a><a href="&quot;全选&quot;"></a><a href="&quot;HTML代码&quot;"></a><a href="&quot;关于&quot;"></a>
<a href="http://www.oschina.net/question/146494_52050#answers" target="_blank">回答案顶部</a> | <a href="http://www.oschina.net/question/146494_52050#top" target="_blank">回页面顶部</a>
有什么技术问题吗？ <a href="http://www.oschina.net/question/ask" target="_blank">我要提问</a></p>
<p><strong><a href="http://my.oschina.net/zwtlong/?ft=bbs&amp;scope=2&amp;showme=1" target="_blank">全部(3)...</a><em>zwt</em>的其他问题</strong></p>
<ul>
<li><a href="http://www.oschina.net/question/146494_68822" title="oschina 评论盖楼是怎么实现的？" target="_blank">oschina 评论盖楼是怎么实现的？</a>(1回/97阅,1个月前)</li>
<li><p><a href="http://www.oschina.net/question/146494_49003" title="extremetable 页数过多的情况显示怎么处理" target="_blank">extremetable 页数过多的情况显示怎么处理</a>(0回/50阅,6个月前)
<strong>类似的话题</strong></p>
</li>
<li><p><a href="http://www.oschina.net/question/257044_65201" title="ehcache并发的问题。" target="_blank">ehcache并发的问题。</a>(2回/151阅,1个月前)</p>
</li>
<li><a href="http://www.oschina.net/question/584947_60156" title="EhCache cluster 不能复制" target="_blank">EhCache cluster 不能复制</a>(2回/121阅,3个月前)</li>
<li><a href="http://www.oschina.net/question/731217_67787" title="EHCache RMI同步" target="_blank">EHCache RMI同步</a>(2回/98阅,1个月前)</li>
<li><a href="http://www.oschina.net/question/1705_22910" title="ehcache缓存失效问题" target="_blank">ehcache缓存失效问题</a>(4回/539阅,1年前)</li>
<li><a href="http://www.oschina.net/question/911_51821" title="请教ehcache的notifyElementExpired的事件用法" target="_blank">请教ehcache的notifyElementExpired的事件用法</a>(7回/138阅,5个月前)</li>
<li><a href="http://www.oschina.net/question/113136_43994" title="EhCache 缓存嵌入对象问题" target="_blank">EhCache 缓存嵌入对象问题</a>(7回/317阅,7个月前)</li>
<li><a href="http://www.oschina.net/question/109139_16386" title="ehcache如何增量加入缓存" target="_blank">ehcache如何增量加入缓存</a>(1回/410阅,1年前)</li>
<li><a href="http://www.oschina.net/question/254302_44560" title="ehcache分布式同步问题" target="_blank">ehcache分布式同步问题</a>(3回/360阅,7个月前)</li>
<li><a href="http://www.oschina.net/question/102297_12816" title="ehcache如何设置输出打印日志" target="_blank">ehcache如何设置输出打印日志</a>(4回/574阅,1年前)</li>
<li><a href="http://www.oschina.net/question/138851_19238" title="Ehcache 2.4.1 Search 问题！！！！" target="_blank">Ehcache 2.4.1 Search 问题！！！！</a>(3回/251阅,1年前)</li>
<li><a href="http://www.oschina.net/question/35932_3865" title="Ehcache配置文件中各项参数" target="_blank">Ehcache配置文件中各项参数</a>(1回/722阅,2年前)</li>
<li><a href="http://www.oschina.net/question/575002_57827" title="在ehcache中如何配置多个diskStore" target="_blank">在ehcache中如何配置多个diskStore</a>(2回/81阅,3个月前)</li>
<li><a href="http://www.oschina.net/question/106591_47184" title="ehcache2.5缓存问题，求解？？？？？？" target="_blank">ehcache2.5缓存问题，求解？？？？？？</a>(5回/294阅,6个月前)</li>
<li><a href="http://www.oschina.net/question/112732_14500" title="跑EhCache 集群演示程序读cache的值为null" target="_blank">跑EhCache 集群演示程序读cache的值为null</a>(0回/166阅,1年前)</li>
<li><a href="http://www.oschina.net/question/203545_45215" title="用了红薯大哥的EhCache缓存代码，调试后出错，各位大侠能否给一个些建议？" target="_blank">用了红薯大哥的EhCache缓存代码，调试后出错，各位大侠能否给一个些建议？</a>(7回/425阅,6个月前)</li>
<li><a href="http://www.oschina.net/question/37023_40508" title="Ehcache gzipFilter" target="_blank">Ehcache gzipFilter</a>(3回/250阅,7个月前)</li>
</ul>
<p>© 开源中国社区(OsChina.NET) | <a href="http://www.oschina.net/home/about" target="_blank">关于我们</a> | <a href="mailto:oschina.net@gmail.com">广告联系</a> | <a href="http://weibo.com/oschina2010" target="_blank">@新浪微博</a> | <a href="http://m.oschina.net/" target="_blank">开源中国手机版</a> | 粤ICP备12009483号-3</p>
<p><a href=""></a><a href=""></a><a href=""></a>
<img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/缓存/">缓存</a></li></span><span class="breadcrumb"><li><a href="/categories/缓存/">缓存</a></li><li><a href="/categories/缓存/ehcache/">ehcache</a></li></span></span> | <span class="tags">Tagged <a href="/tags/ehcache/" class="label label-primary">ehcache</a><a href="/tags/缓存/" class="label label-success">缓存</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-缓存-ehcache--用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-缓存-ehcache--用ehcache做缓存，如果断电后要自动加载之前缓存，要怎么配置，一直不行啊？" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-缓存-memcached--应用memcached提升站点性能——减少读自数据库和数据源-简约设计の艺术-博客频道/">应用 memcached 提升站点性能——减少读自数据库和数据源 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-缓存-memcached--应用memcached提升站点性能——减少读自数据库和数据源-简约设计の艺术-博客频道/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-memcached-csdn-net">应用 memcached 提升站点性能——减少读自数据库和数据源 - 简约设计の艺术 - 博客频道 - CSDN.NET</h1>
<p>您还未登录！|<a href="https://passport.csdn.net/account/login" target="_blank">登录</a>|<a href="https://passport.csdn.net/account/register" target="_blank">注册</a>|<a href="https://passport.csdn.net/help/faq" target="_blank">帮助</a></p>
<ul>
<li><a href="http://www.csdn.net/" target="_blank">首页</a></li>
<li><a href="http://news.csdn.net/" target="_blank">业界</a></li>
<li><a href="http://mobile.csdn.net/" target="_blank">移动</a></li>
<li><a href="http://cloud.csdn.net/" target="_blank">云计算</a></li>
<li><a href="http://sd.csdn.net/" target="_blank">研发</a></li>
<li><a href="http://bbs.csdn.net/" target="_blank">论坛</a></li>
<li><a href="http://blog.csdn.net/" target="_blank">博客</a></li>
<li><a href="http://download.csdn.net/" target="_blank">下载</a></li>
<li><h2 id="-"><a href="">更多</a></h2>
</li>
</ul>
<h1 id="-http-blog-csdn-net-dl88250-"><a href="http://blog.csdn.net/DL88250" target="_blank">简约设计の艺术</a></h1>
<h2 id="-">一个自由程序员的琐碎</h2>
<ul>
<li><a href="http://blog.csdn.net/DL88250?viewmode=contents" target="_blank"><img src="" alt="">目录视图</a></li>
<li><a href="http://blog.csdn.net/DL88250?viewmode=list" target="_blank"><img src="" alt="">摘要视图</a></li>
<li><a href="http://blog.csdn.net/DL88250/rss/list" target="_blank"><img src="" alt="">订阅</a>
<a href="https://code.csdn.net/blog/12" target="_blank">公告：博客新增直接引用代码功能</a>        <a href="http://www.csdn.net/article/2013-07-24/2816320" target="_blank">专访谭海燕：移动互联网开发的那些事</a>      <a href="http://blog.csdn.net/csdnproduct/article/details/9226265" target="_blank">CSDN博客频道自定义摘要、图片水印、热门标签等功能上线啦</a>      <a href="http://blog.csdn.net/blogdevteam/article/details/9136613" target="_blank">CSDN博客第二期云计算最佳博主评选</a>      <a href=""></a></li>
</ul>
<h3 id="-memcached-"><a href="">应用 memcached 提升站点性能——减少读自数据库和数据源</a></h3>
<p>分类： <a href="http://blog.csdn.net/DL88250/article/category/768467" target="_blank">Cache</a> <a href="http://blog.csdn.net/DL88250/article/category/768466" target="_blank">Memcached</a> <a href="http://blog.csdn.net/DL88250/article/category/259943" target="_blank">Data-Structrue/Algorithms</a> <a href="http://blog.csdn.net/DL88250/article/category/296292" target="_blank">Open Source</a> <a href="http://blog.csdn.net/DL88250/article/category/362353" target="_blank">Architecture Design</a>  2010-12-21 09:14 4720人阅读 <a href="">评论</a>(4) <a href="&quot;收藏&quot;">收藏</a> <a href="&quot;举报&quot;">举报</a>
<a href="http://blog.csdn.net/tag/details.html?tag=memcached" target="_blank">memcached</a><a href="http://blog.csdn.net/tag/details.html?tag=%e6%95%b0%e6%8d%ae%e5%ba%93" target="_blank">数据库</a><a href="http://blog.csdn.net/tag/details.html?tag=%e5%ad%98%e5%82%a8" target="_blank">存储</a><a href="http://blog.csdn.net/tag/details.html?tag=%e6%9c%8d%e5%8a%a1%e5%99%a8" target="_blank">服务器</a><a href="http://blog.csdn.net/tag/details.html?tag=ibm" target="_blank">ibm</a><a href="http://blog.csdn.net/tag/details.html?tag=websphere" target="_blank">websphere</a></p>
<p>目录<a href="&quot;系统根据文章中H1到H6标签自动生成文章目录&quot;">(?)</a><a href="&quot;展开&quot;">[+]</a></p>
<ol>
<li><a href="">简介</a></li>
<li><a href="">基础知识</a></li>
<li><a href="">何时使用 memcached</a></li>
<li><a href="">键名称空间和值</a></li>
<li><a href="">填充并使用 memcached</a></li>
<li><a href=""></a></li>
<li><a href="">弹性和可用性</a></li>
<li><a href="">分配缓存</a></li>
<li><p><a href="">如何能不使用 memcached</a></p>
</li>
<li><p><a href="">memcached 不是一个数据库</a></p>
</li>
<li><a href="">不要缓存数据库行或文件</a></li>
<li><p><a href="">memcached 并不安全</a></p>
</li>
<li><p><a href="">不要限制自己</a></p>
</li>
<li><a href="">结束语</a></li>
<li><a href="">参考资料</a></li>
<li><a href="">关于作者</a>
<img src="" alt="Memcached Banner"></li>
</ol>
<p><a href="http://www.ibm.com/developerworks/cn/opensource/os-memcached/#author1" target="_blank">Martin Brown</a>, 自由撰稿人, Freelance Developer
Martin Brown 成为专业作家已有七年多的时间了。他是题材广泛的众多书籍和文章的作者。他的专业技术涉及各种开发语言和平台 —— Perl、Python、Java™、JavaScript、Basic、Pascal、Modula-2、C、C++、Rebol、Gawk、 Shellscript、Windows、Solaris、Linux®、BeOS、Mac OS/X 等等，还涉及 Web 编程、系统管理和集成。Martin 是 Microsoft® 的主题专家（SME），并且是 ServerWatch.com、LinuxToday.com 和 IBM developerWorks 的定期投稿人，他还是 Computerworld、The Apple Blog 和其他站点的正式博客。您可以通过他的 Web 站点 : <a href="http://www.mcslp.com/" target="_blank"><a href="http://www.mcslp.com">http://www.mcslp.com</a></a> 与他联系。</p>
<p><strong>简介：</strong> 开源 <em>memcached</em> 工具是一个用来存储常用信息的缓存，有了它，您便无需从缓慢的资源，比如磁盘或数据库，加载（并处理）信息了。该工具可部署在专用的情况下，也可作为用完 现有环境内的多余内存的一种方法。尽管 memcached 十分简便，但有时它仍被不当使用，或被用在错误的环境类型中。在本文中，了解使用 memcached 的最佳时机。</p>
<h2 id="-"><a href=""></a><a href="">简介</a></h2>
<p>memcached 常被用来加速应用程序的处理，在这里，我们将着重于介绍将它部署于应用程序和环境中的最佳实践。这包括应该存储或不应存储哪些、如何处理数据的灵活分布以 及如何调节用来更新 memcached 和所存储数据的方法。我们还将介绍对高可用性的解决方案的支持，比如 IBM WebSphere® eXtreme Scale。</p>
<p>所有的应用程序，特别是很多 web 应用程序都需要优化它们访问客户机和将信息返回至客户机的速度。可是，通常，返回的都是相同的信息。从数据源（数据库或文件系统）加载数据十分低效，若是每次想要访问该信息时都运行相同的查询，就尤显低效。</p>
<p>虽然很多 web 服务器都可被配置成使用缓存发回信息，但那与大多数应用程序的动态特性无法相适。而这正是 memcached 的用武之地。它提供了一个通用的内存存储器，可保存任何东西，包括本地语言的对象，这就让您可以存储各种各样的信息并可以从诸多的应用程序和环境访问这些信息。</p>
<h2 id="-"><a href=""></a><a href="">基础知识</a></h2>
<p>memcached 是一个开源项目，旨在利用多个服务器内的多余 RAM 来充当一个可存放经常被访问信息的内存缓存。这里的关键是使用了术语<em>缓存</em>：memcached 为加载自他处的信息提供的是内存中的暂时存储。</p>
<p>比如，考虑这样一个典型的基于 web 的应用程序。即便是一个动态网站可能也会有一些组件或信息常量是贯穿页面整个生命周期的。在一个博客站点内，针对单个 blog post 的类别列表不大可能在页面查看间经常性地变更。每次都通过一个对数据库的查询加载此信息相对比较昂贵，特别是在数据没有更改的情况下，就更是如此。从图 1 可以看到一个博客站点内可被缓存的页面分区。</p>
<p><a href=""><strong>图 1. 一个典型的博客页面内的可缓存元素</strong></a>
<img src="" alt="此图显示了可缓存的 blog 元素及其布局：顶部是 Page Header，左边是当前的 Current post lists，右边是 About、Post History、External Links 和 Category list"></p>
<p>将这种结构放在 blog 站点的其他元素，poster 信息、注释 — 设置 blog post 本身 — 进行推断，可以看出为了显示主页的内容很可能需要发生 10-20 次数据库查询和格式化。 每天对数百甚至数千的的页面查看重复此过程，那么您的服务器和应用程序执行的查询要远远多于为了显示页面内容所需执行的查询。</p>
<p>通过使用 memcached，可以将加载自数据库的格式化信息存储为一种可直接用在 Web 页面上的格式。并且由于信息是从 RAM 而不是通过数据库和其他处理从磁盘加载的，所以对信息的访问几乎是瞬时的。</p>
<p>再强调一下，memcached 是一个用来存储常用信息的缓存，有了它，您便无需从缓慢的资源，比如磁盘或数据库，加载并处理信息了。</p>
<p>对 memcached 的接口是通过网络连接提供的。这意味着您可以在多个客户机间共享单个的 memcached 服务器（或多个服务器，如本文稍后所示的）。这个网络接口非常迅速，并且为了改善性能，服务器会故意不支持身份验证或安全性通信。但这不应限制部署选项。 memcached 服务器应该存在于您网络的<em>内部</em>。网络接口的实用性以及可以部署多个 memcached 实例的简便性让您可以使用多个机器上的<em>多余</em> RAM 来提高您缓存的整体大小。</p>
<p>memcached 的存储方法是一个简单的键/值对，类似于很多语言内的散列或关联数组。通过提供键和值来将信息存储到 memcached 内，通过按特定的键请求信息来恢复信息。</p>
<p>信息会无限期地保留在缓存内，除非发生如下的情况：</p>
<ol>
<li><strong>为缓存分配的内存耗尽</strong> — 在这种情况下，memcached 使用 LRU（最近最少使用）方法从此缓存删除条目。最近未曾使用的条目会从此缓存中先删除，最旧的最先访问。</li>
<li><strong>条目被明确删除</strong> — 总是可以从此缓存内删除条目。</li>
<li><strong>条目过期失效</strong> — 各条目均有一个有效的期限以便针对此键存储的信息在过于陈旧时可从缓存中清除这些条目。</li>
</ol>
<p>上述这些情况可以与您应用程序的逻辑综合使用以便确保缓存内的信息是最新的。有了这些基础知识后，让我们来看看在应用程序内如何能最好地利用 memcached。</p>
<h2 id="-memcached-"><a href=""></a><a href="">何时使用 memcached</a></h2>
<p>在使用 memcached 改进应用程序性能时，可以对一些关键的过程和步骤进行修改。</p>
<p>在加载信息时，典型的场景如图 2 所示。</p>
<p><a href=""><strong>图 2. 加载要显示的信息的典型顺序</strong></a>
<img src="" alt="此图显示了从加载数据到处理/格式化数据再到发送数据至客户机的流程"></p>
<p>一般而言，这些步骤是：</p>
<ol>
<li>执行一个或多个查询来从数据库加载信息</li>
<li>格式化适合于显示（或进一步处理）的信息</li>
<li>使用或显示格式化了的数据</li>
</ol>
<p>在使用 memcached 时，为配合这个缓存，可对应用程序的逻辑进行稍许修改：</p>
<ul>
<li>尽量从缓存加载信息</li>
<li>如果存在，使用信息的被缓存版本</li>
<li>如果它不存在：</li>
</ul>
<ol>
<li>执行一个或多个查询来从数据库加载信息</li>
<li>格式化适合于显示或进一步处理的信息</li>
<li>将信息存储到缓存内</li>
<li>使用格式化了的数据</li>
</ol>
<p>图 3 是对这些步骤的总结。</p>
<p><a href=""><strong>图 3. 在使用 memcached 时加载适合于显示的信息</strong></a>
<img src="" alt="此图显示了如果所请求的数据位于缓存内，它就会跳过所有处理步骤，节省了时间"></p>
<p>数据加载成为了至多三个步骤的一个过程，从缓存加载数据或从数据库（视情况而定）加载数据并存储在缓存内。</p>
<p>当这个过程首次发生时，数据将正常地从数据库或其他数据源加载，然后再存储到 memcached 内。当下一次访问此信息时，它就会从 memcached 拉出，而不是从数据库加载，节省了时间和 CPU 循环。</p>
<p>问题的另一个方面是要确保如果更改了要存储在 memcached 内的信息，在更新后端信息的同时还要更新 memcached 的版本。这会让图 4 内所示的这个典型顺序发生稍许变化，如 <a href="http://www.ibm.com/developerworks/cn/opensource/os-memcached/#f5" target="_blank">图 5</a> 所示。</p>
<p><a href=""><strong>图 4. 在一个典型的应用程序内更新或存储数据</strong></a>
<img src="" alt="此图显示了从更新数据到处理/格式化数据再到发送更新了的数据至客户机的流程"></p>
<p>图 5 显示了使用 memcached 后发生了变化的流程。</p>
<p><a href=""><strong>图 5. 在使用 memcached 时更新或存储数据</strong></a>
<img src="" alt="此图显示了拓展了的流程：从更新数据到处理/格式化数据，再到将数据存储在 memcached 内，最后到发送更新了的数据至客户机"></p>
<p>比如，仍以博客站点为例，在博客系统更新数据库内的类别列表时，更新应该遵循如下顺序：</p>
<ol>
<li>更新数据库内的类别列表</li>
<li>格式化信息</li>
<li>将信息存储到 memcached 内</li>
<li>将信息返回至客户机</li>
</ol>
<p>memcached 内的存储操作是原子的，所以信息的更新不会让客户机只获得部分数据；它们获得的或者是老版本，或者是新版本。</p>
<p>对于大多数应用程序，这两个操作是您惟一需要注意的。在访问他人使用的数据时，它会自动被添加到这个缓存内，而且如果对该数据进行了更改，此缓存内也会自动进行更新。</p>
<h2 id="-"><a href=""></a><a href="">键、名称空间和值</a></h2>
<p>memcached 另一个需要重点考虑的因素是如何组织和命名存储在缓存内的这些数据。从之前博客站点的例子中，不难看出需要使用一种一致的命名结构以便您能加载博客类别、历史和其他信息，然后再在加载信息（并更新缓存）时或者在更新数据（同样也要更新缓存）时使用。</p>
<p>使用的何种具体的命名系统特定于应用程序，但通常可以使用一种与现有应用程序类似的结构，并且这种结构很可能基于某种惟一识别符。当从数据库拉出信息或在整理信息集时，就会发生这种情况。</p>
<p>以 blog post 为例，可以在一个具有键</p>
<p>category-list
的项中存储类别列表。与此 post ID 对应的单个 post，比如</p>
<p>blogpost-29
相关的值都可以使用，而该项的注释则可以存储在</p>
<p>blogcomments-29
内，其中 <em>29</em> 就是这个 blog post 的 ID。这样一来， 您就可以将各种各样的信息存储在缓存内，使用不同的前缀来标识这些信息。</p>
<p>memcached 键/值存储的简便性（以及安全性的缺乏）意味着如果您想要在使用同一个 memcached 服务器的同时支持多个应用程序，那么就可以考虑使用其他格式的量词来标识数据属于某种特定的应用程序。比如，可以添加像</p>
<p>blogapp:blogpost-29
这样的应用程序前缀。这些键是没有格式的，所以可以使用任何字符串作为键的名称。</p>
<p>在存储值的方面，应该确保存储在缓存内的信息适合于您的应用程序。比如，对于这个博客系统，您可能想要存储被博客应用程序使用的对象以便格式化博客信息，而不是原始的 HTML。如果同一个基础结构用在应用程序内的多个地方，这一点更具实用性。</p>
<p>大多数语言的接口，包括 Java™、Perl、PHP 等，都能串行化语言对象以便存储在 memcached 内。这就让您可以存储并随后从内存存储恢复全部对象，而不是在您的应用程序内手动重构它们。 很多对象，或它们使用的结构，都基于某种散列或数组结构。对于跨语言的环境，比如在 JSP 环境和 JavaScript 环境间共享相同信息，可以使用一种架构中立的格式，比如 JavaScript Object Notation (JSON) 甚或 XML。</p>
<h2 id="-memcached-"><a href=""></a><a href="">填充并使用 memcached</a></h2>
<p>作为一种开源产品以及一种最初开发用来工作于现有开源环境内的产品，memcached 受大量环境和平台支持。与 memcached 服务器通信的接口有很多，并常常具有针对所有语言的多个实现。参见 <a href="http://www.ibm.com/developerworks/cn/opensource/os-memcached/resources.html" target="_blank">参考资料</a> 以获得常用的库和工具箱。</p>
<p>要列出所有受支持的接口和环境不太可能，但它们均支持 memcached 协议提供的基础 API。这些描述已经被简化并应用在不同语言的上下文内，在这些语言中，使用不同的值可指示错误。主要的函数有：</p>
<ul>
<li>get(key)
— 从存储了特定键的 memcached 获得信息。 如果键不存在，就返回错误。</li>
<li>set(key, value [, expiry])
— 使用缓存内的标识符键存储这个特定的值。如果键已经存在，那么它就会被更新。期满时间的单位为秒，并且如果值小于 30 天 (30/<em>24/</em>60/*60)，那么就用作相对时间，如果值大于 30 天，那么就用作绝对时间 (epoch)。</li>
<li>add(key, value [, expiry])
— 如果键不存在就将这个键添加到缓存内，如果键已经存在就返回错误。如果您想要显式地添加一个新键而又不会因它已经存在而更新它，那么这个函数将十分有用。</li>
<li>replace(key, value [, expiry])
— 更新此特定键的值，如果键不存在就返回一个错误。</li>
<li>delete(key [, time])
— 从缓存中删除此键/值对。如果您提供一个时间，那么添加具有此键的一个新值就会被阻塞这个特定的时期。超时让您可以确保此值总是可以重新读取自您的数据中心。</li>
<li>incr(key [, value]
) — 为特定的键增 1 或特定的值。只适用于数值。</li>
<li>decr(key [, value])
— 为特定的键减 1 或特定的值，只适用于数值。</li>
<li>flush_all
— 让缓存内的所有当前条目无效（或到期失效）。</li>
</ul>
<p>比如，在 Perl 内，基本 set 操作可以如清单 1 所示的那样处理。</p>
<p><a href=""><strong>清单 1. Perl 内的基本 set 操作</strong></a>
use Cache::Memcached;
my $cache = new Cache::Memcached {
&#39;servers&#39; =&gt; [
&#39;localhost:11211&#39;,
],
};
$cache-&gt;set(&#39;mykey&#39;, &#39;myvalue&#39;);</p>
<p>Ruby 内的相同的基本操作如清单 2 所示。</p>
<p><a href=""><strong>清单 2. Ruby 内的基本 set 操作</strong></a>
require &#39;memcache&#39;
memc = MemCache::new &#39;192.168.0.100:11211&#39;
memc[&quot;mykey&quot;] = &quot;myvalue&quot;</p>
<p>在两个例子中可以看到相同的基本结构：设置 memcached 服务器，然后分配或设置值。其他的接口也可用，包括适合于 Java 技术的那些接口，让您可以在 WebSphere 应用程序内使用 memcached。memcached 接口类允许将 Java 对象直接序列化到 memcached 以便于存储和加载复杂的结构。当在像 WebSphere 这样的环境内进行部署时，有两个事情非常重要：服务的弹性（在 memcached 不可用时如何做）以及如何提高缓存存储量来改进在使用多个应用程序服务器或在使用像 WebSphere eXtreme Scale 这样的环境时的性能。我们接下来就来看看这两个问题。</p>
<h2 id="-"><a href=""></a></h2>
<h2 id="-"><a href=""></a><a href="">弹性和可用性</a></h2>
<p>有关 memcached 最常见的一个问题是：“若缓存不可用了，会发生什么情况呢？”正如之前章节中明示的，缓存内的信息不应该成为信息的的惟一资源。必须要能够从其他位置加载存储在缓存内的数据。</p>
<p>虽然，无法从缓存访问信息将会减缓应用程序的性能，但它不应该阻止应用程序的运转。可能会发生这样几个场景：</p>
<ol>
<li>如果 memcached 服务宕掉，应用程序应该回退到从原始数据源加载信息并对信息进行显示所需的格式化。此应用程序还应继续尝试在 memcached 内加载和存储信息。</li>
<li>一旦 memcached 服务器恢复可用，应用程序就应该自动尝试存储数据。没有必要强制重载已缓存了的数据，可以使用标准的访问来用信息加载和填充缓存。最终，缓存将会被最常用的数据重新填充。</li>
</ol>
<p>再次重申，memcached 是信息的缓存但并非惟一的数据源。memcached 服务器不可用不应该是应用程序的终结，虽然这意味着在 memcached 服务器恢复正常之前性能会有所降低。实际上，memcached 服务器相对简单，并且虽然不是绝对无故障的，但它的简单性的结果就是它很少会出错。</p>
<h2 id="-"><a href=""></a><a href="">分配缓存</a></h2>
<p>memcached 服务器只是网络上针对一些键存储值的一个缓存。如果有多台机器，那么很自然地会想要在所有多余机器上设置一个 memcached 的实例来提供一个超大的联网 RAM 缓存存储。</p>
<p>有了这个想法后，还有一种想当然是需要使用某种分配或复制机制来在机器之间复制键/值对。这种方式的问题是如果这么做反而会减少可用的 RAM 缓存，而不是增加。如图 6 所示，可以看出这里有三个应用程序服务器，每个服务器都可以访问一个 memcached 实例。</p>
<p><a href=""><strong>图 6. 多重 memcached 实例的不正确使用</strong></a>
<img src="" alt="此图显示了 memcached 的三个独立的 1-GB 实例，支持三个应用程序服务器，各产出 1 GB 的缓存空间"></p>
<p>尽管每个 memcached 实例都是 1 GB 的大小（产生 3 GB 的 RAM 缓存），但如果每个应用程序服务器只有其自己的缓存（或者在 memcached 之间存在着数据的复制），那么整个安装也仍只能有 1 GB 的缓存在每个实例间复制。</p>
<p>由于 memcached 通过一个网络接口提供信息，因此单个的客户机可以从它所能访问的任何一个 memcached 实例访问数据。如果数据没有跨每个实例被复制，那么最终在每个应用程序服务器上，就可以有 3 GB 的 RAM 缓存可用，如图 7 所示。</p>
<p><a href=""><strong>图 7. 多重 memcached 实例的正确使用</strong></a>
<img src="" alt="此图显示了三个交互的 1-GB memcached 实例，支持三个应用程序服务器，导致总体 3 GB 的共享缓存空间"></p>
<p>这个方法的问题是选择哪个服务器来储存键/值对，以及当想要重新获得一个值时，如何决定要与哪个 memcached 服务器对话。问题的解决方案就是忽略复杂的东西，比如查找表，或是寄望 memcached 服务器来为您处理这个过程。而 memcached 客户机则必须要力求简单。</p>
<p>memcached 客户机不必决定此信息，它只需对在存储信息时指定的键使用一个简单的散列算法。当想要从一列 memcached 服务器存储或获取信息时，memcached 客户机就会用一个一致的散列算法从这个键获取一个数值。举个例子，键</p>
<p>mykey
被转换成数值</p>
<p>23875
。是保存还是获取信息无关紧要，这个键将总是被用作惟一标识符来从 memcached 服务器加载，因此在本例中，“mykey” 散列转化后对应的值总是</p>
<p>23875
。</p>
<p>如果有两个服务器，那么 memcached 客户机将对这个数值进行一个简单的运算（例如，系数）来决定它应将此值存储在第一个还是第二个配置了的 memcached 实例上。</p>
<p>当存储一个值时，客户机会从这个键确定出散列值以及它原来存储在哪个服务器上。当获取一个值时，客户机会从这个键确定出相同的散列值并会选择相同的服务器来获取信息。</p>
<p>如果在每个应用程序服务器上使用的是相同的服务器列表（并且顺序相同），那么当需要保存或检索同一个键时，每个应用程序服务器都将选择同一个 服务器。现在，在这个例子中，有 3GB 的 memcached 空间可以共享，而不是同一个 1 GB 的空间的复制，这就带来了更多的可用缓存，并很有可能会提高有多个用户情况下的应用程序的性能。</p>
<p>这个过程也有其复杂性（比如当一个服务器不可用时会怎样），更多信息，请参见相关文档（参见 <a href="http://www.ibm.com/developerworks/cn/opensource/os-memcached/resources.html" target="_blank">参考资料</a>）。</p>
<h2 id="-memcached-"><a href=""></a><a href="">如何能不使用 memcached</a></h2>
<p>尽管 memcached 很简单，但 memcached 实例有时候还是会被不正确地使用。</p>
<h3 id="-memcached-"><a href=""></a><a href="">memcached 不是一个数据库</a></h3>
<p>最常见的 memcached 误用就是把它用作一个数据存储，而不是一个缓存。memcached 的首要目的就是加快数据的响应时间，否则数据从其他数据源构建或恢复需要很长时间。一个典型的例子就是从一个数据库中恢复信息，特别是在信息显示给用户前 需要对信息进行格式化或处理的时候。Memcached 被设计用来将信息存储在内存中以避免每次在数据需要恢复时重复执行相同的任务。</p>
<p>切不可将 memcached 用作运行应用程序所需信息的惟一信息源；数据应总是可以从其他信息源获取。此外，要记住 memcached 只是一个键/值的存储。不能在数据上执行查询，或者对内容进行迭代来提取信息。应该使用它来存储数据块或对象以备批量使用。</p>
<h3 id="-"><a href=""></a><a href="">不要缓存数据库行或文件</a></h3>
<p>虽然可以使用 memcached 存储加载自数据库的数据行，但这实际上是查询缓存，并且大多数数据库都提供各自的查询缓存的机制。其他的对象，比如文件系统的图像或文件的情况与此相同。很多应用程序和 web 服务器针对此类工作已经有了一些很好的解决方案。</p>
<p>如果在加载和格式化后，使用它来存储全部信息块，就可以从 memcached 获得更多的实用工具和性能上的改善。仍以我们的博客站点为例，存储信息的最佳点是在将博客类别格式化为对象，甚至是在格式化成 HTML 后。博客页面的构造可通过从 memcached 加载各个组件（比如 blog post、category list、post history 等）并将完成的 HTML 写回至客户机实现。</p>
<h3 id="-memcached-"><a href=""></a><a href="">memcached 并不安全</a></h3>
<p>为了确保最佳性能，memcached 并未提供任何形式的安全性，没有身份验证，也没有加密。这意味着对 memcached 服务器的访问应该这么处理：一是通过将它们放到应用程序部署环境相同的私有侧，二是如果安全性是必须的，那么就使用 UNIX® socket 并只允许当前主机上的应用程序访问此 memcached 服务器。</p>
<p>这多少牺牲了一些灵活性和弹性，以及跨网络上的多台机器共享 RAM 缓存的能力，但这是在目前的情况下确保 memcached 数据安全性的惟一一种解决方案。</p>
<h2 id="-"><a href=""></a><a href="">不要限制自己</a></h2>
<p>除了不应该使用 memcached 实例的情况外，memcached 的灵活性不应忽视。由于 memcached 与应用程序处于相同的架构水平，所以很容易集成并连接到它。并且更改应用程序以便利用 memcached 也并不复杂。此外，由于 memcached 只是一个缓存，所以在出现问题时它不会停止应用程序的执行。如果使用正确的话，它所做的是减轻其余服务器基础设施的负载（减少对数据库和数据源的读操 作），这意味着无需更多的硬件就可以支持更多的客户机。</p>
<p>但请记住，它仅仅是个缓存！</p>
<h2 id="-"><a href=""></a><a href="">结束语</a></h2>
<p>在本文中，我们了解了 memcached 以及如何最佳地使用它。我们看到了信息如何存储、如何选择合理的键以及如何选择要存储的信息。我们还讨论了所有 memcached 用户都要遇到的一些关键的部署问题，包括多服务器的使用、当 memcached 实例消亡时该怎么做，以及（也许最为重要的）在哪些情况下不能使用 memcached。</p>
<p>作为一种开源的应用程序并且是目的简单而直白的应用程序，memcached 的功能和实用性均来自于这种简单性。通过为信息提供巨大的 RAM 存储空间、让它在网络上可用，然后再让它可通过各种不同的接口和语言访问到，memcached 可被集成到多种多样的安装和环境中。</p>
<h2 id="-"><a href=""></a><a href="">参考资料</a></h2>
<p><strong>学习</strong></p>
<ul>
<li><a href="http://dev.mysql.com/doc/refman/5.1/en/ha-memcached.html" target="_blank">MySQL memcached 文档</a> 提供了很多有关如何在一个典型的数据库部署环境内使用 memcached 的信息。</li>
<li>通过体验 <a href="http://www.ibm.com/developerworks/cn/data/products/soliddb/" target="_blank">IBM solidDB 产品家族</a>，了解 IBM 的商业缓存解决方案 solidDB®。</li>
<li>随时关注 developerWorks <a href="http://www.ibm.com/developerworks/cn/offers/techbriefings/" target="_blank">技术活动</a>和<a href="http://www.ibm.com/developerworks/cn/swi/" target="_blank">网络广播</a>。</li>
<li>查阅最近将在全球举办的面向 IBM 开放源码开发人员的研讨会、交易展览、网络广播和其他 <a href="http://www.ibm.com/developerworks/views/opensource/events.jsp" target="_blank">活动</a>。</li>
<li>访问 developerWorks <a href="http://www.ibm.com/developerworks/cn/opensource/" target="_blank">Open source 专区</a>获得丰富的 how-to 信息、工具和项目更新以及<a href="http://www.ibm.com/developerworks/cn/opensource/best2009/index.html" target="_blank">最受欢迎的文章和教程</a>，帮助您用开放源码技术进行开发，并将它们与 IBM 产品结合使用。</li>
<li>查看免费的 <a href="http://www.ibm.com/developerworks/offers/lp/demos/" target="_blank">developerWorks On demand 演示</a>，观看并了解 IBM 及开源技术和产品功能。</li>
</ul>
<p><strong>获得产品和技术</strong></p>
<ul>
<li><a href="http://memcached.org/" target="_blank">memcached.org</a> 提供了有关 memcached 以及如何下载并安装它的信息。</li>
<li><a href="http://search.cpan.org/%7Ebradfitz/Cache-Memcached-1.28/" target="_blank">Cache::Memcached interface for Perl</a> 提供了一个广泛的接口。</li>
<li>对于 Java 技术，可使用 <a href="http://whalin.com/memcached/" target="_blank">com.danga.MemCached 类</a>，它会提供一些额外的故障转换及多实例扩展。</li>
<li>使用 <a href="http://www.ibm.com/developerworks/cn/downloads/" target="_blank">IBM 产品评估试用版软件</a> 改进您的下一个开发项目，这些软件可以通过下载获得。</li>
<li>下载 <a href="http://www.ibm.com/developerworks/cn/downloads/" target="_blank">IBM 产品评估试用版软件</a> 或 <a href="http://www.ibm.com/developerworks/cn/downloads/soasandbox/people/" target="_blank">IBM SOA Sandbox for People</a>，并开始使用来自 DB2®、Lotus®、Rational®、Tivoli® 和 WebSphere® 的应用程序开发工具和中间件产品。</li>
</ul>
<p><strong>讨论</strong></p>
<ul>
<li>参与 <a href="http://www.ibm.com/developerworks/blogs" target="_blank">developerWorks 博客</a> 加入 developerWorks 社区。</li>
<li>欢迎加入 <a href="http://www.ibm.com/developerworks/cn/mydeveloperworks/" target="_blank">My developerWorks 中文社区</a>。</li>
</ul>
<h2 id="-"><a href=""></a><a href="">关于作者</a></h2>
<p><a href=""></a>Martin Brown 成为专业作家已有七年多的时间了。他是题材广泛的众多书籍和文章的作者。他的专业技术涉及各种开发语言和平台 —— Perl、Python、Java™、JavaScript、Basic、Pascal、Modula-2、C、C++、Rebol、Gawk、 Shellscript、Windows、Solaris、Linux®、BeOS、Mac OS/X 等等，还涉及 Web 编程、系统管理和集成。Martin 是 Microsoft® 的主题专家（SME），并且是 ServerWatch.com、LinuxToday.com 和 IBM developerWorks 的定期投稿人，他还是 Computerworld、The Apple Blog 和其他站点的正式博客。您可以通过他的 Web 站点 : <a href="http://www.mcslp.com/"><a href="http://www.mcslp.com">http://www.mcslp.com</a></a> 与他联系。</p>
<p>转自：<a href="http://www.ibm.com/developerworks/cn/opensource/os-memcached" target="_blank">http://www.ibm.com/developerworks/cn/opensource/os-memcached</a>
本文是使用 <a href="http://b3log-solo.googlecode.com/" target="_blank">B3log Solo</a> 从 <a href="http://88250.b3log.org/" target="_blank">简约设计の艺术</a> 进行同步发布的</p>
<p>原文地址：<a href="http://88250.b3log.org/articles/2010/12/21/1292901251292.html" target="_blank"><a href="http://88250.b3log.org/articles/2010/12/21/1292901251292.html">http://88250.b3log.org/articles/2010/12/21/1292901251292.html</a></a></p>
<p>分享到： <a href="&quot;分享到新浪微博&quot;"></a><a href="&quot;分享到腾讯微博&quot;"></a></p>
<ul>
<li>上一篇：<a href="http://blog.csdn.net/dl88250/article/details/6081379" target="_blank">腾讯对外发布微博开放平台 API</a></li>
<li>下一篇：<a href="http://blog.csdn.net/dl88250/article/details/6091854" target="_blank">谁更胜一筹：技术解析 Google App Engine 和 Amazon EC2</a>
查看评论<a href=""></a></li>
</ul>
<p>4楼 <a href="http://blog.csdn.net/fang00y" target="_blank">fang00y</a> 2011-01-19 17:04发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/fang00y" target="_blank"><img src="" alt=""></a>[e03][e03][e03]3楼 <a href="http://blog.csdn.net/yuanyuan110_l" target="_blank">Rain</a> 2010-12-23 20:24发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/yuanyuan110_l" target="_blank"><img src="" alt=""></a>[e01]打算在现在的产品里用用2楼 <a href="http://blog.csdn.net/xjbx" target="_blank">xjbx</a> 2010-12-23 15:45发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/xjbx" target="_blank"><img src="" alt=""></a>[e03]1楼 <a href="http://blog.csdn.net/ajsfo" target="_blank">ajsfo</a> 2010-12-23 10:10发表 <a href="&quot;回复&quot;">[回复]</a>  <a href="&quot;引用&quot;">[引用]</a> <a href="&quot;举报&quot;">[举报]</a><a href="http://blog.csdn.net/ajsfo" target="_blank"><img src="" alt=""></a>[e01]楼主发现了绝好的东西。
您还没有登录,请<a href="">[登录]</a>或<a href="http://passport.csdn.net/account/register?from=http%3A%2F%2Fblog.csdn.net%2Fdl88250%2Farticle%2Fdetails%2F6088742" target="_blank">[注册]</a></p>
<p>/* 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场<a href=""></a><a href=""></a>
<a href="&quot;回到顶部&quot;"><img src="" alt="TOP"></a></p>
<p>个人资料</p>
<p><a href="http://my.csdn.net/DL88250" target="_blank"><img src="&quot;访问我的空间&quot;" alt=""></a>
<a href="http://my.csdn.net/DL88250" target="_blank">88250</a></p>
<p><a href="&quot;[加关注]&quot;"></a> <a href="&quot;[发私信]&quot;"></a></p>
<ul>
<li>访问：4219340次</li>
<li>积分：41528分</li>
<li><p>排名：第20名</p>
</li>
<li><p>原创：1195篇</p>
</li>
<li>转载：326篇</li>
<li>译文：42篇</li>
<li>评论：2834条</li>
</ul>
<p>文章搜索</p>
<p><a href=""></a></p>
<p>文章分类</p>
<ul>
<li><a href="http://blog.csdn.net/dl88250/article/category/359483" target="_blank">Adoration</a>(7)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/361991" target="_blank">Agile Develeopment</a>(25)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/817011" target="_blank">Alipay</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/785718" target="_blank">Android</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/735896" target="_blank">Apache</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/362353" target="_blank">Architecture Design</a>(18)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/727396" target="_blank">B3log</a>(31)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/772464" target="_blank">Beyond</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/466930" target="_blank">BeyondTrack</a>(8)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/792935" target="_blank">Book</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/531019" target="_blank">BPEL</a>(7)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/737397" target="_blank">Buzz</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/273193" target="_blank">C/# &amp; .Net</a>(36)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/259942" target="_blank">C/C++</a>(60)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/768467" target="_blank">Cache</a>(4)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/445355" target="_blank">CAS &amp; SAML &amp; SSO</a>(7)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/785583" target="_blank">Chinasb</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/830731" target="_blank">Chrome</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/279627" target="_blank">Code Name:l0y0l</a>(4)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/323229" target="_blank">Compile Principles</a>(8)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/259943" target="_blank">Data-Structrue/Algorithms</a>(41)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/307128" target="_blank">Database</a>(31)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/318447" target="_blank">Design Patterns</a>(22)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/688714" target="_blank">DHTML</a>(27)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/304165" target="_blank">Eclipse</a>(36)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/472355" target="_blank">EJB 3.x</a>(24)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/371604" target="_blank">English</a>(4)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/772184" target="_blank">EverBox</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/259944" target="_blank">Fiddlededee</a>(87)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/798286" target="_blank">FireFox</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/823430" target="_blank">FreeMarker</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/731730" target="_blank">GAE</a>(32)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/509270" target="_blank">Game</a>(4)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/794103" target="_blank">GFW</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/744371" target="_blank">Git</a>(5)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/790487" target="_blank">GlassFish</a>(5)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/755357" target="_blank">Go</a>(4)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/750293" target="_blank">Google</a>(19)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/801964" target="_blank">Guice</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/336870" target="_blank">Hibernate Framework</a>(30)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/763988" target="_blank">HTML5</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/735897" target="_blank">HttpClient</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/801962" target="_blank">IoC/DI</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/321666" target="_blank">J2EE/JavaEE</a>(123)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/273192" target="_blank">J2SE/JavaSE</a>(174)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/732513" target="_blank">Java</a>(63)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/362100" target="_blank">Java Persistence API</a>(25)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/359121" target="_blank">Java Server Faces</a>(40)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/742693" target="_blank">JavaEE</a>(14)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/461374" target="_blank">JavaEE Security</a>(3)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/363012" target="_blank">JavaFX</a>(25)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/570523" target="_blank">JavaScript</a>(7)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/450848" target="_blank">JBoss Seam</a>(26)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/531020" target="_blank">jBPM</a>(8)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/786045" target="_blank">JDK 7</a>(3)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/735349" target="_blank">Joke</a>(3)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/814017" target="_blank">JPA</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/782163" target="_blank">jQuery</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/758468" target="_blank">jsdoc</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/757521" target="_blank">jsoup</a>(3)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/510376" target="_blank">JSR-299</a>(21)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/801963" target="_blank">JSR-330</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/273771" target="_blank">Life in Programming</a>(153)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/298242" target="_blank">LivaPlayer</a>(14)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/365496" target="_blank">Mathematics</a>(9)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/735535" target="_blank">Maven</a>(8)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/461289" target="_blank">Maven 2</a>(18)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/768466" target="_blank">Memcached</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/295040" target="_blank">MultiMediia</a>(17)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/483612" target="_blank">Music</a>(16)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/278915" target="_blank">My Linux</a>(165)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/345108" target="_blank">NetBeans</a>(225)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/300046" target="_blank">Network Engineering</a>(63)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/836154" target="_blank">node.js</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/296292" target="_blank">Open Source</a>(261)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/821590" target="_blank">Optimization</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/786046" target="_blank">Oracle</a>(6)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/742694" target="_blank">ORM</a>(4)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/364737" target="_blank">OSGi</a>(18)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/743945" target="_blank">PHP</a>(9)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/445013" target="_blank">Portal &amp; Portlet</a>(8)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/833677" target="_blank">Python</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/755291" target="_blank">Quartz</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/302630" target="_blank">Regular Expression</a>(16)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/361363" target="_blank">Ruby &amp; Rails</a>(19)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/435004" target="_blank">SCA</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/310293" target="_blank">Shell Programming</a>(15)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/287867" target="_blank">Software Engineering</a>(42)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/481570" target="_blank">Software Quality Assurance</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/318452" target="_blank">Software Testing</a>(15)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/336869" target="_blank">Spring Framework</a>(25)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/363915" target="_blank">StoneAgeDict</a>(28)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/454387" target="_blank">Struts Framework</a>(3)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/469638" target="_blank">Subversion</a>(10)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/319645" target="_blank">SWT/JFace/RCP</a>(25)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/747162" target="_blank">SyntaxHighlighter</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/299913" target="_blank">System Analyst exam</a>(13)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/767001" target="_blank">Tencent</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/799655" target="_blank">TestNG</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/357256" target="_blank">TeX/LaTeX</a>(9)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/260439" target="_blank">Text Categorization</a>(9)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/742035" target="_blank">Ubuntu</a>(3)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/318451" target="_blank">UML Modeling</a>(12)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/832030" target="_blank">VI/VIM</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/794848" target="_blank">Web</a>(4)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/798287" target="_blank">Web Browser</a>(2)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/475410" target="_blank">Web Service</a>(5)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/324813" target="_blank">Web UI Design</a>(23)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/803421" target="_blank">Wicket</a>(5)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/267361" target="_blank">Windows</a>(54)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/753760" target="_blank">Wine</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/475341" target="_blank">Workflow &amp; BPM</a>(17)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/368591" target="_blank">にほんごのべんきょう</a>(4)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/848178" target="_blank">li</a>(0)</li>
<li><a href="http://blog.csdn.net/dl88250/article/category/911428" target="_blank">B3log Announcement</a>(3)</li>
<li><p><a href="http://blog.csdn.net/dl88250/article/category/1290033" target="_blank">B3log Solo</a>(1)
文章存档</p>
</li>
<li><p><a href="http://blog.csdn.net/dl88250/article/month/2013/05" target="_blank">2013年05月</a>(1)</p>
</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2012/11" target="_blank">2012年11月</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2012/08" target="_blank">2012年08月</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2012/02" target="_blank">2012年02月</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2011/10" target="_blank">2011年10月</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2011/08" target="_blank">2011年08月</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2011/07" target="_blank">2011年07月</a>(1)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2011/06" target="_blank">2011年06月</a>(7)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2011/05" target="_blank">2011年05月</a>(6)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2011/04" target="_blank">2011年04月</a>(9)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2011/03" target="_blank">2011年03月</a>(17)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2011/02" target="_blank">2011年02月</a>(27)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2011/01" target="_blank">2011年01月</a>(13)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2010/12" target="_blank">2010年12月</a>(16)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2010/11" target="_blank">2010年11月</a>(29)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2010/10" target="_blank">2010年10月</a>(16)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2010/09" target="_blank">2010年09月</a>(17)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2010/08" target="_blank">2010年08月</a>(10)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2010/07" target="_blank">2010年07月</a>(10)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2010/06" target="_blank">2010年06月</a>(13)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2010/05" target="_blank">2010年05月</a>(12)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2010/04" target="_blank">2010年04月</a>(25)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2010/03" target="_blank">2010年03月</a>(13)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2010/02" target="_blank">2010年02月</a>(10)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2010/01" target="_blank">2010年01月</a>(13)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2009/12" target="_blank">2009年12月</a>(17)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2009/11" target="_blank">2009年11月</a>(9)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2009/10" target="_blank">2009年10月</a>(13)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2009/09" target="_blank">2009年09月</a>(9)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2009/08" target="_blank">2009年08月</a>(13)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2009/07" target="_blank">2009年07月</a>(13)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2009/06" target="_blank">2009年06月</a>(27)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2009/05" target="_blank">2009年05月</a>(13)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2009/04" target="_blank">2009年04月</a>(18)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2009/03" target="_blank">2009年03月</a>(17)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2009/02" target="_blank">2009年02月</a>(15)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2009/01" target="_blank">2009年01月</a>(23)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2008/12" target="_blank">2008年12月</a>(19)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2008/11" target="_blank">2008年11月</a>(34)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2008/10" target="_blank">2008年10月</a>(27)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2008/09" target="_blank">2008年09月</a>(27)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2008/08" target="_blank">2008年08月</a>(19)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2008/07" target="_blank">2008年07月</a>(18)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2008/06" target="_blank">2008年06月</a>(10)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2008/05" target="_blank">2008年05月</a>(31)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2008/04" target="_blank">2008年04月</a>(23)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2008/03" target="_blank">2008年03月</a>(55)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2008/02" target="_blank">2008年02月</a>(78)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2008/01" target="_blank">2008年01月</a>(76)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2007/12" target="_blank">2007年12月</a>(13)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2007/11" target="_blank">2007年11月</a>(28)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2007/10" target="_blank">2007年10月</a>(33)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2007/09" target="_blank">2007年09月</a>(21)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2007/08" target="_blank">2007年08月</a>(68)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2007/07" target="_blank">2007年07月</a>(113)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2007/06" target="_blank">2007年06月</a>(65)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2007/05" target="_blank">2007年05月</a>(83)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2007/04" target="_blank">2007年04月</a>(43)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2007/03" target="_blank">2007年03月</a>(22)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2007/02" target="_blank">2007年02月</a>(74)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2007/01" target="_blank">2007年01月</a>(78)</li>
<li><a href="http://blog.csdn.net/dl88250/article/month/2006/12" target="_blank">2006年12月</a>(48)</li>
</ul>
<p>展开</p>
<p>阅读排行</p>
<ul>
<li><a href="http://blog.csdn.net/dl88250/article/details/3852624" title="当代 IT 大牛排行榜" target="_blank">当代 IT 大牛排行榜</a>(438472)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/3280698" title="NetBeans 时事通讯（刊号 # 34 - Nov 11, 2008）" target="_blank">NetBeans 时事通讯（刊号 /# 34 - Nov 11, 2008）</a>(294762)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/3604772" title="Seam 2.1.1.GA 发布！" target="_blank">Seam 2.1.1.GA 发布！</a>(240265)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/3765750" title="JBoss Seam 框架下的单元测试" target="_blank">JBoss Seam 框架下的单元测试</a>(220053)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/1636841" title="20个漂亮xp桌面主题" target="_blank">20个漂亮xp桌面主题</a>(72125)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/5191092" title="了解 NoSQL 的必读资料" target="_blank">了解 NoSQL 的必读资料</a>(65897)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/1826713" title="初学UML之-------用例图" target="_blank">初学UML之-------用例图</a>(64870)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/4027668" title="数学符号大全" target="_blank">数学符号大全</a>(38964)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/3753193" title="Web Beans (JSR-299): Q&amp;A with Specification Lead Gavin King " target="_blank">Web Beans (JSR-299): Q&amp;A with Specification Lead Gavin King</a>(30472)</li>
<li><p><a href="http://blog.csdn.net/dl88250/article/details/3862541" title="《星际争霸》成为大学课程之一" target="_blank">《星际争霸》成为大学课程之一</a>(26977)
评论排行</p>
</li>
<li><p><a href="http://blog.csdn.net/dl88250/article/details/5931333" title="十二个理由让你不得不期待 Ubuntu10.10" target="_blank">十二个理由让你不得不期待 Ubuntu10.10</a>(106)</p>
</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/5310751" title="2009 年个人回忆与总结" target="_blank">2009 年个人回忆与总结</a>(91)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/1587054" title="Linux下的千千静听——LivaPlayer" target="_blank">Linux下的千千静听——LivaPlayer</a>(69)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/1636841" title="20个漂亮xp桌面主题" target="_blank">20个漂亮xp桌面主题</a>(49)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/1826713" title="初学UML之-------用例图" target="_blank">初学UML之-------用例图</a>(48)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/4303524" title="书评：简洁代码──敏捷软件工艺指南 " target="_blank">书评：简洁代码──敏捷软件工艺指南</a>(44)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/5100894" title="程序员的幽默" target="_blank">程序员的幽默</a>(43)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/6386620" title="准备入职支付宝" target="_blank">准备入职支付宝</a>(39)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/5118301" title="HTML 5 WebSocket 示例" target="_blank">HTML 5 WebSocket 示例</a>(38)</li>
<li><a href="http://blog.csdn.net/dl88250/article/details/5518605" title="NetBeans IDE 6.9 Beta 发布" target="_blank">NetBeans IDE 6.9 Beta 发布</a>(38)</li>
</ul>
<p>推荐文章
最新评论</p>
<ul>
<li><a href="http://blog.csdn.net/DL88250/article/details/6174582#comments" target="_blank">GAE Java 应用性能优化</a></li>
</ul>
<p><a href="http://blog.csdn.net/wilder2000" target="_blank">wilder2000</a>: mark</p>
<ul>
<li><a href="http://blog.csdn.net/DL88250/article/details/2075637#comments" target="_blank">基于 JSF＋Spring + JPA 构建敏捷的Web应用[88250原创]</a></li>
</ul>
<p><a href="http://blog.csdn.net/az690236414" target="_blank">喝冰开水</a>: 把源码发给我还吗？690236414@qq.com谢谢了，最好是我能加你好友，好相互交流</p>
<ul>
<li><a href="http://blog.csdn.net/DL88250/article/details/4027668#comments" target="_blank">数学符号大全</a></li>
</ul>
<p><a href="http://blog.csdn.net/zinss26914" target="_blank">低调小一</a>: 多谢了，转载了，楼主辛苦</p>
<ul>
<li><a href="http://blog.csdn.net/DL88250/article/details/1843813#comments" target="_blank">java.util.logging日志功能使用快速入门</a></li>
</ul>
<p><a href="http://blog.csdn.net/ccssddnnbbookkee" target="_blank">ccssddnnbbookkee</a>: 很详细，谢谢</p>
<ul>
<li><a href="http://blog.csdn.net/DL88250/article/details/2799522#comments" target="_blank">使用 CAS 在 Tomcat 中实现单点登录</a></li>
</ul>
<p><a href="http://blog.csdn.net/hooqee" target="_blank">hooqee</a>: 不错！</p>
<ul>
<li><a href="http://blog.csdn.net/DL88250/article/details/6227988#comments" target="_blank">哪本书是对程序员最有影响、每个程序员都该阅读的书？</a></li>
</ul>
<p><a href="http://blog.csdn.net/yxm0603" target="_blank">起飞---为梦想而飞</a>: 我一本都没看过，需要好好看看</p>
<ul>
<li><a href="http://blog.csdn.net/DL88250/article/details/2794943#comments" target="_blank">Single SignOn - Integrating Liferay With CAS Server</a></li>
</ul>
<p><a href="http://blog.csdn.net/logoc" target="_blank">logoc</a>: 咱能，一天到晚不转来转去吗。还他妈的专家</p>
<ul>
<li><a href="http://blog.csdn.net/DL88250/article/details/6612090#comments" target="_blank">暂时告别 CSDN 博客，移居 GAE（<a href="http://88250.b3log.org）">http://88250.b3log.org）</a></a></li>
</ul>
<p><a href="http://blog.csdn.net/vbubble" target="_blank">bubble</a>: 顶b3blog 对搜索引擎优化方面做的如何</p>
<ul>
<li><a href="http://blog.csdn.net/DL88250/article/details/6208677#comments" target="_blank">加入中国 HTML5 研究小组</a></li>
</ul>
<p><a href="http://blog.csdn.net/vicns" target="_blank">簡約_Billy</a>: 想您致敬，</p>
<ul>
<li><a href="http://blog.csdn.net/DL88250/article/details/8227475#comments" target="_blank">Java 开源博客——B3log Solo 0.5.5 正式版发布了！</a></li>
</ul>
<p><a href="http://blog.csdn.net/vicns" target="_blank">簡約_Billy</a>:</p>
<p>Code snips</p>
<ul>
<li><a href="http://www.java2s.com/" target="_blank">Java Code examples</a></li>
<li><a href="http://www.blabla.cn/index.html" target="_blank">HTML代码示例</a></li>
<li><p><a href="http://www.java2s.com/Code/Cpp/CatalogCpp.htm" target="_blank">C 代码示例</a>
E-books</p>
</li>
<li><p><a href="http://www.chinaitlab.com/" target="_blank">中国 IT 实验室</a></p>
</li>
<li><a href="http://shop.apabi.com/index/index.aspx" target="_blank">中文电子书网</a></li>
<li><a href="http://book.httpcn.com/" target="_blank">网络中国 - E 书</a></li>
<li><a href="http://download.csdn.net/" target="_blank">CSDN 下载频道</a></li>
<li><a href="http://www.51leifeng.net/index.php" target="_blank">偶要雷锋 - 分享社区</a></li>
</ul>
<p>Linux/Ubuntu</p>
<ul>
<li><a href="http://www.gnome-look.org/" target="_blank">Gnome-Look</a></li>
<li><a href="http://forum.ubuntu.org.cn/" target="_blank">Ubuntu 中文官方论坛</a></li>
<li><a href="http://search.deviantart.com/" target="_blank">deviantART Search</a></li>
<li><a href="http://www.getdeb.net/" target="_blank">GetDeb</a></li>
<li><a href="http://www.kde-look.org/" target="_blank">KDE-Look</a></li>
<li><a href="http://linuxtoy.org/" target="_blank">LinuxToy</a></li>
<li><a href="http://www.compiz-themes.org/" target="_blank">Compiz Themes</a></li>
<li><a href="http://www.chinaunix.net/" target="_blank">ChinaUnix</a></li>
<li><p><a href="http://www.compiz-fusion.org/" target="_blank">Compiz-Fusion</a>
My friends</p>
</li>
<li><p><a href="http://yhuag.blogbus.com/" target="_blank">光光的Blog~</a></p>
</li>
<li><a href="http://hi.baidu.com/zy_tough" target="_blank">ZY Tough</a></li>
<li><a href="http://dorainm.cublog.cn/" target="_blank">师傅 dorainm</a></li>
<li><a href="http://blog.csdn.net/elevenxl" target="_blank">Eleven 的专栏</a></li>
<li><a href="http://blog.csdn.net/meteorlWJ" target="_blank">Meteor 的专栏</a></li>
<li><a href="http://blog.csdn.net/Vanessa219" target="_blank">Vanessa 的小窝</a></li>
<li><a href="http://blog.csdn.net/herian/" target="_blank">秋歌的专栏</a></li>
<li><a href="http://user.qzone.qq.com/769626482/" target="_blank">金秋风采</a></li>
<li><a href="http://www.eleven-china.com/" target="_blank">eleven-china</a></li>
<li><a href="http://blog.csdn.net/debug_today" target="_blank">野地的枯草</a></li>
<li><a href="http://hi.baidu.com/%C0%C7%C6%C6%C0%CB" target="_blank">狼猫窝</a></li>
<li><a href="http://www.co-soft.info/" target="_blank">云南科软</a></li>
<li><a href="http://88250.b3log.org/" target="_blank">88250 @ Solo</a> (<a href="http://88250.b3log.org/blog-articles-feed.do" target="_blank">RSS</a>)</li>
</ul>
<p>My projects</p>
<ul>
<li><a href="https://beyondtrack.dev.java.net/" target="_blank">BeyondTrack @ Java.net</a></li>
<li><a href="http://sourceforge.net/projects/livaplayer/" target="_blank">LivaPlayer</a></li>
<li><a href="http://kenai.com/projects/drop/" target="_blank">Drop</a></li>
<li><a href="http://b3log-solo.googlecode.com/" target="_blank">B3log Solo</a></li>
<li><p><a href="http://latke.googlecode.com/" target="_blank">B3log Latke</a>
Super stars :-)</p>
</li>
<li><p><a href="http://www-cs-staff.stanford.edu/~knuth/index.html" target="_blank">Don Knuth&#39;s Home Page</a></p>
</li>
<li><a href="http://www.martinfowler.com/" target="_blank">Martin Fowler</a></li>
<li><a href="http://www.turing.org.uk/turing/" target="_blank">Alan Turing</a></li>
<li><a href="http://blog.objectmentor.com/articles/category/uncle-bobs-blatherings" target="_blank">Uncle Bob (Robert C. Martin)</a></li>
<li><a href="http://www.research.att.com/~bs/" target="_blank">Bjarne Stroustrup&#39;s Homepage</a></li>
<li><a href="http://www.stallman.org/" target="_blank">Richard Stallman&#39;s Home Page</a></li>
</ul>
<p>Technologies</p>
<ul>
<li><a href="http://www-128.ibm.com/developerworks/cn/opensource/" target="_blank">IBM 软件技术</a></li>
<li><a href="http://www.csdn.net/" target="_blank">CSDN</a></li>
<li><a href="http://www.uml.org/" target="_blank">UML 官方</a></li>
<li><a href="http://www.eclipse.org/" target="_blank">Eclipse.org</a></li>
<li><a href="http://www.apache.org/" target="_blank">Apache Software</a></li>
<li><a href="http://dinosaur.compilertools.net/" target="_blank">LEX &amp; YACC Page</a></li>
<li><a href="http://www.open-open.com/" target="_blank">Java 开源大全</a></li>
<li><a href="http://labs.jboss.com/" target="_blank">JBoss.org</a></li>
<li><a href="http://www.php.net/" target="_blank">PHP 官方</a></li>
<li><a href="http://www.springframework.org/" target="_blank">Springframework.org</a></li>
<li><a href="http://www.netbeans.org/index_zh_CN.html" target="_blank">NetBeans 中文社区</a></li>
<li><a href="http://www.sourceforge.net/" target="_blank">SourceForge.net</a></li>
<li><a href="http://www.javaworld.com.tw/" target="_blank">JavaWorld@TW</a></li>
<li><a href="http://www.hibernate.org/" target="_blank">hibernate.org</a></li>
<li><a href="http://www.extremeprogramming.org/" target="_blank">Extreme Programming</a></li>
<li><a href="http://www.rubyonrails.org/" target="_blank">Ruby on Rails</a></li>
<li><a href="http://www.ruby-lang.org.cn/forums/" target="_blank">Ruby 中文社区论坛</a></li>
<li><a href="http://openjfx.java.sun.com/current-build/doc/" target="_blank">JavaFX Script Reference</a></li>
<li><a href="http://www.javafx.com/" target="_blank">JavaFX Home</a></li>
<li><a href="http://www.opensource.org/" target="_blank">Open Source Initiative</a></li>
<li><a href="https://facelets.dev.java.net/nonav/docs/dev/docbook.html" target="_blank">Facelets DevDoc</a></li>
<li><a href="http://www.testng.org/" target="_blank">Testng.org</a></li>
<li><a href="http://java-source.net/" target="_blank">java-source</a></li>
<li><a href="http://www.javaeye.com/" target="_blank">JavaEye</a></li>
<li><a href="http://wiki.netbeans.org/NetBeansDreamTeam" target="_blank">NetBeans Dream Team</a></li>
<li><a href="http://www.infoq.com/" target="_blank">InfoQ</a></li>
<li><a href="https://open-esb.dev.java.net/" target="_blank">OpenEBS</a></li>
<li><a href="http://www.seamframework.org/" target="_blank">JBoss Seam</a></li>
<li><a href="http://www.jdon.com/" target="_blank">J 道</a></li>
<li><a href="http://www.w3.org/TR/html4/" target="_blank">HTML 4.01 Spec</a></li>
<li><a href="http://xiexiejiao.cn/" target="_blank">歇歇脚</a></li>
<li><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html" target="_blank">HTTP 1.1 Status Code</a></li>
<li><a href="http://www.oschina.net/" target="_blank">开源中国社区</a></li>
<li><a href="http://www.mhtml5.com/" target="_blank">HTML5 研究小组</a></li>
</ul>
<p><a href="http://www.csdn.net/company/about.html" target="_blank">公司简介</a>|<a href="http://www.csdn.net/company/recruit.html" target="_blank">招贤纳士</a>|<a href="http://www.csdn.net/company/marketing.html" target="_blank">广告服务</a>|<a href="http://www.csdn.net/company/account.html" target="_blank">银行汇款帐号</a>|<a href="http://www.csdn.net/company/contact.html" target="_blank">联系方式</a>|<a href="http://www.csdn.net/company/statement.html" target="_blank">版权声明</a>|<a href="http://www.csdn.net/company/layer.html" target="_blank">法律顾问</a>|<a href="mailto:webmaster@csdn.net">问题报告</a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=2355263776&amp;site=qq&amp;menu=yes" target="_blank">QQ客服</a> <a href="http://e.weibo.com/csdnsupport/profile" target="_blank">微博客服</a> <a href="http://bbs.csdn.net/forums/Service" target="_blank">论坛反馈</a> <a href="mailto:webmaster@csdn.net">联系邮箱：webmaster@csdn.net</a> 服务热线：400-600-2320京 ICP 证 070598 号北京创新乐知信息技术有限公司 版权所有世纪乐知(北京)网络技术有限公司 提供技术支持江苏乐知网络技术有限公司 提供商务支持Copyright © 1999-2012, CSDN.NET, All Rights Reserved <a href="http://www.hd315.gov.cn/beian/view.asp?bianhao=010202001032100010" target="_blank"><img src="" alt="GongshangLogo"></a>
<img src="http://counter.csdn.net/pv.aspx?id=24" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/缓存/">缓存</a></li></span><span class="breadcrumb"><li><a href="/categories/缓存/">缓存</a></li><li><a href="/categories/缓存/memcached/">memcached</a></li></span></span> | <span class="tags">Tagged <a href="/tags/memcached/" class="label label-primary">memcached</a><a href="/tags/缓存/" class="label label-success">缓存</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-缓存-memcached--应用memcached提升站点性能——减少读自数据库和数据源-简约设计の艺术-博客频道/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-缓存-memcached--应用memcached提升站点性能——减少读自数据库和数据源-简约设计の艺术-博客频道" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-CAS--单点登录CASServer介绍-Java综合-Java-ITeye论坛/">单点登录CAS Server 介绍 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-CAS--单点登录CASServer介绍-Java综合-Java-ITeye论坛/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-cas-server-java-java-iteye-">单点登录CAS Server 介绍 - Java综合 - Java - ITeye论坛</h1>
<p><a href="http://www.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://www.iteye.com/login" target="_blank">登录</a> <a href="http://www.iteye.com/signup" target="_blank">注册</a></p>
<p><a href="http://www.iteye.com/" target="_blank"><img src="&quot;ITeye-最棒的软件开发交流社区&quot;" alt="ITeye-最棒的软件开发交流社区"></a></p>
<p><a href="http://www.iteye.com/forums" target="_blank">论坛首页</a> → <a href="http://www.iteye.com/forums/board/Java" target="_blank">Java企业应用论坛</a> →</p>
<h1 id="-cas-server-">单点登录CAS Server 介绍</h1>
<p><a href="http://www.iteye.com/forums/board/Java" target="_blank">全部</a> <a href="http://www.iteye.com/forums/tag/Hibernate" target="_blank">Hibernate</a> <a href="http://www.iteye.com/forums/tag/Spring" target="_blank">Spring</a> <a href="http://www.iteye.com/forums/tag/Struts" target="_blank">Struts</a> <a href="http://www.iteye.com/forums/tag/iBATIS" target="_blank">iBATIS</a> <a href="http://www.iteye.com/forums/tag/%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8" target="_blank">企业应用</a> <a href="http://www.iteye.com/forums/tag/Lucene" target="_blank">Lucene</a> <a href="http://www.iteye.com/forums/tag/SOA" target="_blank">SOA</a> <a href="http://www.iteye.com/forums/tag/Java%E7%BB%BC%E5%90%88" target="_blank">Java综合</a> <a href="http://www.iteye.com/forums/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank">设计模式</a> <a href="http://www.iteye.com/forums/tag/Tomcat" target="_blank">Tomcat</a> <a href="http://www.iteye.com/forums/tag/OO" target="_blank">OO</a> <a href="http://www.iteye.com/forums/tag/JBoss" target="_blank">JBoss</a>
浏览 3057 次 锁定老帖子 <a href="">主题：单点登录CAS Server 介绍</a></p>
<p>精华帖 (0) :: 良好帖 (0) :: 新手帖 (2) :: 隐藏帖 (0) 作者 正文 * boli.jiang</p>
<ul>
<li>等级: 初级会员</li>
<li><a href="http://bolijiang.iteye.com/" target="_blank"><img src="&quot;boli.jiang的博客: 天天向上&quot;" alt="boli.jiang的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 3</li>
<li>积分: 40</li>
<li>来自: 成都</li>
<li><img src="" alt="">
  发表时间：2010-04-22   最后修改：2010-04-23</li>
</ul>
<p><a href="http://www.iteye.com/topic/650595#" target="_blank">&lt;</a> <a href="http://www.iteye.com/topic/650595#" target="_blank">&gt;</a>  猎头职位: <a href="http://www.iteye.com/jobs/2245" target="_blank">上海:  【上海】外资企业高新诚聘web开发工程师</a></p>
<p>相关文章: <a href="http://www.iteye.com/topic/650595#" title="关闭" target="_blank"> </a></p>
<ul>
<li><a href="http://www.iteye.com/topic/257036" title="CAS与LDAP整合的实现" target="_blank">CAS与LDAP整合的实现</a></li>
<li><a href="http://www.iteye.com/topic/87654" title="扩展cas验证系统自己又一些小小的疑问请教大家!" target="_blank">扩展cas验证系统自己又一些小小的疑问请教大家!</a></li>
<li><a href="http://www.iteye.com/topic/544899" title="【原创】CAS调研总结" target="_blank">【原创】CAS调研总结</a>
推荐群组: <a href="http://liferay.group.iteye.com/" target="_blank">liferay</a>
<a href="http://www.iteye.com/wiki/topic/650595" target="_blank">更多相关推荐</a>
<a href="http://www.iteye.com/forums/tag/Java%E7%BB%BC%E5%90%88" target="_blank">Java综合</a></li>
</ul>
<p>下面的讲解基于CAS Server 3.3.5版本。</p>
<p>CAS Server 配置文件</p>
<p>login-webflow.xml：其中内容指定了当访问cas/login时的程序流程，初始“initialFlowSetup”</p>
<p>cas-servlet.xml：servlet与class对应关系</p>
<p>deployerConfigContext.xml：认证管理器相关</p>
<p>cas.properties：系统属性设置</p>
<p>applicationContext.xml：系统属性相关</p>
<p>argumentExtractorsConfiguration.xml：不是很了解它的用途</p>
<p>ticketExpirationPolicies.xml：ticket过期时间设置</p>
<p>ticketGrantingTicketCookieGenerator.xml：TGT cookie属性相关，是否支持http也在这儿修改</p>
<p>ticketRegistry.xml：保存ticket的类相关设置</p>
<p>uniqueIdGenerators.xml：ticket自动生成类设置</p>
<p>warnCookieGenerator.xml：同ticketGrantingTicketCookieGenerator.xml，生成的 cookie名为CASPRIVACY</p>
<p><strong>/login</strong> ：</p>
<p>当访问/login时，会调用login-webflow.xml中的流程图：</p>
<p><a href=""><img src="&quot;点击查看原始大小图片&quot;" alt="">
 </a></p>
<p><strong>/serviceValidate:</strong></p>
<p>对应的处理类是org.jasig.cas.web.ServiceValidateController，主要负责对service ticket的验证，失败返回casServiceValidationFailure.jsp，成功返回casServiceValidationSuccess.jsp</p>
<p>对service ticket的验证是通过client端向server端发送http（或https）实现的</p>
<p>逻辑：</p>
<p>1.通过由client端传来的ticket到DefaultTicketRegistry中获取缓存的ServiceTicketImpl对象，并判断其是否已经过期（ST过期时间默认是5分钟，TGT默认是2个小时，可以在ticketExpirationPolicies.xml中进行修改）以及与当前service的id是否相一，以上都满足则表示验证通过。</p>
<p>2.通过ServiceTicketImpl对象获取到登录之后的Authentication对象，借助于它生成ImmutableAssertionImpl对象并返回</p>
<p>3.成功返回</p>
<p><strong>CAS数据流程</strong></p>
<p>Credentials--&gt;Principal--&gt;Authentication</p>
<p><strong>定义自己的AuthenticationHandler</strong></p>
<p>在中心认证进行认证的过程中会调用deployerConfigContext.xml中设置的AuthenticationHandler来进行认证工作。
Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li><property name="authenticationHandlers">  </li>
<li><list>  </li>
<li>&lt;!--  </li>
<li></li>
<li>This is the authentication handler that authenticates services by means of callback via SSL, thereby validating  </li>
<li></li>
<li>a server side SSL certificate.  </li>
<li>--&gt;  </li>
<li>&lt;bean class=&quot;org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler&quot;  </li>
<li>p:httpClient-ref=&quot;httpClient&quot; /&gt;  </li>
<li>&lt;!--  </li>
<li>This is the authentication handler declaration that every CAS deployer will need to change before deploying CAS   </li>
<li>into production.  The default SimpleTestUsernamePasswordAuthenticationHandler authenticates UsernamePasswordCredentials  </li>
<li>where the username equals the password.  You will need to replace this with an AuthenticationHandler that implements your  </li>
<li>local authentication strategy.  You might accomplish this by coding a new such handler and declaring  </li>
<li>edu.someschool.its.cas.MySpecialHandler here, or you might use one of the handlers provided in the adaptors modules.  </li>
<li>--&gt;  </li>
<li>&lt;bean  </li>
<li>class=&quot;org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler&quot; /&gt;  </li>
<li><bean class="com.goldarmor.live800.cas.Live800CasAuthenticationHandler">  </li>
<li><property name="dataSource" ref="casDataSource" />  </li>
<li></bean>  </li>
<li>&lt;/list  </li>
<li><p></property>  </p>
<property name="authenticationHandlers"> <list>  <!-- This is the authentication handler that authenticates services by means of callback via SSL, thereby validating a server side SSL certificate. --> <bean class="org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler" p:httpClient-ref="httpClient" /> <!-- This is the authentication handler declaration that every CAS deployer will need to change before deploying CAS into production. The default SimpleTestUsernamePasswordAuthenticationHandler authenticates UsernamePasswordCredentials where the username equals the password. You will need to replace this with an AuthenticationHandler that implements your local authentication strategy. You might accomplish this by coding a new such handler and declaring edu.someschool.its.cas.MySpecialHandler here, or you might use one of the handlers provided in the adaptors modules. --> <bean class="org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler" /> <bean class="com.goldarmor.live800.cas.Live800CasAuthenticationHandler"> <property name="dataSource" ref="casDataSource" /> </bean> </list </property>

<p>如上，我们定义了3个AuthenticationHandler，这正是CAS的一个<img src="" alt=""> ，通过配置，我们可以实现针对不同的应用提供不同的认证方式，这样可以实现任意的中心认证。再来看看AuthenticationHandler的代码</p>
</li>
</ol>
<p>Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li>//<em>/</em> </li>
<li>/* Method to determine if the credentials supplied are valid. </li>
<li>/*  </li>
<li>/* @param credentials The credentials to validate. </li>
<li>/* @return true if valid, return false otherwise. </li>
<li>/* @throws AuthenticationException An AuthenticationException can contain </li>
<li>/* details about why a particular authentication request failed. </li>
<li>/*/  </li>
<li></li>
<li>boolean authenticate(Credentials credentials)  </li>
<li>throws AuthenticationException;  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* Method to check if the handler knows how to handle the credentials </li>
<li>/* provided. It may be a simple check of the Credentials class or something </li>
<li>/* more complicated such as scanning the information contained in the </li>
<li>/* Credentials object. </li>
<li>/*  </li>
<li>/* @param credentials The credentials to check. </li>
<li>/* @return true if the handler supports the Credentials, false othewrise. </li>
<li>/*/  </li>
<li><p>boolean supports(Credentials credentials);<br>//<em>/</em> /<em> Method to determine if the credentials supplied are valid. /</em> /<em> @param credentials The credentials to validate. /</em> @return true if valid, return false otherwise. /<em> @throws AuthenticationException An AuthenticationException can contain /</em> details about why a particular authentication request failed. /<em>/ boolean authenticate(Credentials credentials) throws AuthenticationException; //</em>/<em> /</em> Method to check if the handler knows how to handle the credentials /<em> provided. It may be a simple check of the Credentials class or something /</em> more complicated such as scanning the information contained in the /<em> Credentials object. /</em> /<em> @param credentials The credentials to check. /</em> @return true if the handler supports the Credentials, false othewrise. /*/ boolean supports(Credentials credentials);</p>
<p>我们要做的就是实现这俩个方法而已，特别提醒：可以在cas-servlet.xml中设置你所使用的Credentials，如下：（其中的p:formObjectClass值，如果不指定默认使用UsernamePasswordCredentials）</p>
</li>
</ol>
<p>Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li>&lt;bean id=&quot;authenticationViaFormAction&quot; class=&quot;org.jasig.cas.web.flow.AuthenticationViaFormAction&quot;  </li>
<li>p:formObjectClass=&quot;com.goldarmor.live800.cas.Live800CasCredentials&quot;  </li>
<li>p:centralAuthenticationService-ref=&quot;centralAuthenticationService&quot;  </li>
<li>p:warnCookieGenerator-ref=&quot;warnCookieGenerator&quot; /&gt;  <bean id="authenticationViaFormAction" class="org.jasig.cas.web.flow.AuthenticationViaFormAction" p:formObjectClass="com.goldarmor.live800.cas.Live800CasCredentials" p:centralAuthenticationService-ref="centralAuthenticationService" p:warnCookieGenerator-ref="warnCookieGenerator" />



</li>
</ol>
<p><strong>定义自己的credentialsToPrincipalResolvers</strong></p>
<p>通过AuthenticationHandler的认证后，会调用在deployerConfigContext.xml中配置的credentialsToPrincipalResolvers来处理Credentials，生成Principal对象：
Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li><property name="credentialsToPrincipalResolvers">  </li>
<li><list>  </li>
<li>&lt;!--  </li>
<li>UsernamePasswordCredentialsToPrincipalResolver supports the UsernamePasswordCredentials that we use for /login   </li>
<li>by default and produces SimplePrincipal instances conveying the username from the credentials.  </li>
<li>If you&#39;ve changed your LoginFormAction to use credentials other than UsernamePasswordCredentials then you will also  </li>
<li>need to change this bean declaration (or add additional declarations) to declare a CredentialsToPrincipalResolver that supports the  </li>
<li>Credentials you are using.  </li>
<li>--&gt;              &lt;bean  </li>
<li>class=&quot;org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver&quot; /&gt;  </li>
<li>&lt;!--  </li>
<li>HttpBasedServiceCredentialsToPrincipalResolver supports HttpBasedCredentials.  It supports the CAS 2.0 approach of  </li>
<li>authenticating services by SSL callback, extracting the callback URL from the Credentials and representing it as a  </li>
<li>SimpleService identified by that callback URL.  </li>
<li>If you are representing services by something more or other than an HTTPS URL whereat they are able to  </li>
<li>receive a proxy callback, you will need to change this bean declaration (or add additional declarations).  </li>
<li>--&gt;  </li>
<li>&lt;bean  </li>
<li>class=&quot;org.jasig.cas.authentication.principal.HttpBasedServiceCredentialsToPrincipalResolver&quot; /&gt;  </li>
<li><bean class="com.goldarmor.live800.cas.Live800CasCredentialsToPrincipalResolver"/>  </li>
<li></list>  </li>
<li><p></property>  </p>
<property name="credentialsToPrincipalResolvers"> <list> <!-- UsernamePasswordCredentialsToPrincipalResolver supports the UsernamePasswordCredentials that we use for /login by default and produces SimplePrincipal instances conveying the username from the credentials. If you've changed your LoginFormAction to use credentials other than UsernamePasswordCredentials then you will also need to change this bean declaration (or add additional declarations) to declare a CredentialsToPrincipalResolver that supports the Credentials you are using. --> <bean class="org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver" /> <!-- HttpBasedServiceCredentialsToPrincipalResolver supports HttpBasedCredentials. It supports the CAS 2.0 approach of authenticating services by SSL callback, extracting the callback URL from the Credentials and representing it as a SimpleService identified by that callback URL. If you are representing services by something more or other than an HTTPS URL whereat they are able to receive a proxy callback, you will need to change this bean declaration (or add additional declarations). --> <bean class="org.jasig.cas.authentication.principal.HttpBasedServiceCredentialsToPrincipalResolver" /> <bean class="com.goldarmor.live800.cas.Live800CasCredentialsToPrincipalResolver"/> </list> </property>

<p>如上：我们也可以像定义AuthenticationHandler一样，可以定义多个credentialsToPrincipalResolvers来处理Credentials，返回你所需要的Principal对象，下面来看看credentialsToPrincipalResolvers的方法：</p>
</li>
</ol>
<p>Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li>//<em>/</em> </li>
<li>/* Turn Credentials into a Principal object by analyzing the information </li>
<li>/* provided in the Credentials and constructing a Principal object based on </li>
<li>/* that information or information derived from the Credentials object. </li>
<li>/*  </li>
<li>/* @param credentials from which to resolve Principal </li>
<li>/* @return resolved Principal, or null if the principal could not be resolved. </li>
<li>/*/  </li>
<li>Principal resolvePrincipal(Credentials credentials);  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* Determine if a credentials type is supported by this resolver. This is </li>
<li>/* checked before calling resolve principal. </li>
<li>/*  </li>
<li>/* @param credentials The credentials to check if we support. </li>
<li>/* @return true if we support these credentials, false otherwise. </li>
<li>/*/  </li>
<li></li>
<li></li>
<li>boolean supports(Credentials credentials);<br>//<em>/</em> /<em> Turn Credentials into a Principal object by analyzing the information /</em> provided in the Credentials and constructing a Principal object based on /<em> that information or information derived from the Credentials object. /</em> /<em> @param credentials from which to resolve Principal /</em> @return resolved Principal, or null if the principal could not be resolved. /<em>/ Principal resolvePrincipal(Credentials credentials); //</em>/<em> /</em> Determine if a credentials type is supported by this resolver. This is /<em> checked before calling resolve principal. /</em> /<em> @param credentials The credentials to check if we support. /</em> @return true if we support these credentials, false otherwise. /*/ boolean supports(Credentials credentials);  </li>
</ol>
<p>在CAS验证的时候，通过访问/serviceValidate可知：验证成功之后返回的casServiceValidationSuccess.jsp中的数据来源于Assertion，下面来看看它的代码：</p>
<p>Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li>List<Authentication> getChainedAuthentications();  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* True if the validated ticket was granted in the same transaction as that </li>
<li>/* in which its grantor GrantingTicket was originally issued. </li>
<li>/*  </li>
<li>/* @return true if validated ticket was granted simultaneous with its </li>
<li>/* grantor&#39;s issuance </li>
<li>/*/  </li>
<li></li>
<li>boolean isFromNewLogin();  </li>
<li></li>
<li></li>
<li>//<em>/</em> </li>
<li>/* Method to obtain the service for which we are asserting this ticket is </li>
<li>/* valid for. </li>
<li>/*  </li>
<li>/* @return the service for which we are asserting this ticket is valid for. </li>
<li>/*/  </li>
<li></li>
<li><p>Service getService();<br>List<Authentication> getChainedAuthentications(); //<em>/</em> /<em> True if the validated ticket was granted in the same transaction as that /</em> in which its grantor GrantingTicket was originally issued. /<em> /</em> @return true if validated ticket was granted simultaneous with its /<em> grantor&#39;s issuance /</em>/ boolean isFromNewLogin(); //<em>/</em> /<em> Method to obtain the service for which we are asserting this ticket is /</em> valid for. /<em> /</em> @return the service for which we are asserting this ticket is valid for. /*/ Service getService();</p>
<p>通过getChainedAuthentications()方法，我们可以得到Authentication对象列表，再看看Authentication的代码：</p>
</li>
</ol>
<p>Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li>//<em>/</em> </li>
<li>/* Method to obtain the Principal. </li>
<li>/*  </li>
<li>/* @return a Principal implementation </li>
<li>/*/  </li>
<li></li>
<li>Principal getPrincipal();  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* Method to retrieve the timestamp of when this Authentication object was </li>
<li>/* created. </li>
<li>/*  </li>
<li>/* @return the date/time the authentication occurred. </li>
<li>/*/  </li>
<li></li>
<li>Date getAuthenticatedDate();  </li>
<li></li>
<li>//<em>/</em> </li>
<li>/* Attributes of the authentication (not the Principal). </li>
<li>/* @return the map of attributes. </li>
<li>/*/  </li>
<li><p>Map<String, Object> getAttributes();<br>//<em>/</em> /<em> Method to obtain the Principal. /</em> /<em> @return a Principal implementation /</em>/ Principal getPrincipal(); //<em>/</em> /<em> Method to retrieve the timestamp of when this Authentication object was /</em> created. /<em> /</em> @return the date/time the authentication occurred. /<em>/ Date getAuthenticatedDate(); //</em>/<em> /</em> Attributes of the authentication (not the Principal). /<em> @return the map of attributes. /</em>/ Map<String, Object> getAttributes();</p>
<p>而这其中的Principal就来源于上面提到的由credentialsToPrincipalResolvers处理得到的Principal对象，最后看一下Principal的代码，我们只要再做一个实现他的代码，整个CAS Server就可以信手拈来了，呵呵</p>
</li>
</ol>
<p>Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li>//<em>/</em> </li>
<li>/* Returns the unique id for the Principal </li>
<li>/* @return the unique id for the Principal. </li>
<li>/*/  </li>
<li></li>
<li>String getId();  </li>
<li></li>
<li></li>
<li>//<em>/</em> </li>
<li>/*  </li>
<li>/* @return </li>
<li>/*/  </li>
<li></li>
<li>Map<String, Object> getAttributes();<br>//<em>/</em> /<em> Returns the unique id for the Principal /</em> @return the unique id for the Principal. /<em>/ String getId(); //</em>/<em> /</em> /<em> @return /</em>/ Map<String, Object> getAttributes();</li>
</ol>
<p>我们还可以自定义自己的casServiceValidationSuccess.jsp和casLoginView.jsp页面等，具体的操作办法也是最简单的办法就是备份以前的页面之后修改成自己需要的页面。</p>
<ul>
<li><a href="http://dl.iteye.com/upload/attachment/0023/8503/ccbda995-b8f2-3cfa-9c4c-f7f841391045.jpg" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></li>
<li><p>大小: 150.5 KB</p>
</li>
<li><p><a href="http://www.iteye.com/topic/650595#" target="_blank">查看图片附件</a></p>
</li>
</ul>
<p>声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。
推荐链接</p>
<ul>
<li><a href="http://www.iteye.com/clicks/609"></a></li>
<li><a href="http://www.iteye.com/clicks/716" target="_blank">想进外企，出国，跳槽，找工作？英语不好,快来充电吧</a></li>
<li><a href="http://www.iteye.com/clicks/770" target="_blank">世界级研发人员汇聚深圳！</a> <a href="http://www.iteye.com/topic/650595#" target="_blank">返回顶楼</a> <a href="http://bolijiang.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://bolijiang.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=boli.jiang" title="发送站内短信" target="_blank"> </a> <a href="http://bolijiang.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=boli.jiang" title="关注作者" target="_blank"> </a></li>
</ul>
<p><a href="http://www.iteye.com/forums" target="_blank">论坛首页</a> → <a href="http://www.iteye.com/forums/board/Java" target="_blank">Java企业应用版</a>
跳转论坛:移动开发技术 Web前端技术 Java企业应用 编程语言技术 综合技术 入门技术 招聘求职 海阔天空</p>
<ul>
<li><a href="http://www.iteye.com/jobs/2344" title="上海:宝尊电商诚聘JAVA高级软件工程师" target="_blank">上海: 宝尊电商诚聘JAVA高级软件工程师</a></li>
<li><a href="http://www.iteye.com/jobs/2137" title="吉林:用友汽车软件诚聘高级Java工程师工作地点：长春、北京" target="_blank">吉林: 用友汽车软件诚聘高级Java工程师工作地点：长</a></li>
<li><a href="http://www.iteye.com/jobs/1628" title="浙江:阿里巴巴诚聘高级Java工程师" target="_blank">浙江: 阿里巴巴诚聘高级Java工程师</a></li>
<li><a href="http://www.iteye.com/jobs/2143" title="上海:用友汽车软件诚聘中级java程序员（工作地点：上海安亭）" target="_blank">上海: 用友汽车软件诚聘中级java程序员（工作地点：</a></li>
<li><a href="http://www.iteye.com/jobs/1849" title="浙江:阿里巴巴诚聘C++开发工程师(搜索引擎和广告引擎方向，偏底层)" target="_blank">浙江: 阿里巴巴诚聘C++开发工程师(搜索引擎和广告</a></li>
<li><a href="http://www.iteye.com/jobs/2321" title="云南:云南远信诚聘高级软件工程师(J2EE) " target="_blank">云南: 云南远信诚聘高级软件工程师(J2EE)</a></li>
<li><a href="http://www.iteye.com/jobs/2106" title="上海:爱可生技术诚聘高级JAVA工程师" target="_blank">上海: 爱可生技术诚聘高级JAVA工程师</a></li>
<li><a href="http://www.iteye.com/jobs/2136" title="吉林:用友汽车软件诚聘java开发工程师 工作地点：长春、北京" target="_blank">吉林: 用友汽车软件诚聘java开发工程师 工作地点：</a></li>
<li><a href="http://www.iteye.com/jobs/2140" title="上海:用友汽车软件诚聘高级java开发工程师（UAP平台）" target="_blank">上海: 用友汽车软件诚聘高级java开发工程师（UAP平</a></li>
<li><a href="http://www.iteye.com/jobs/2427" title="北京:都乐保诚聘Java开发工程师" target="_blank">北京: 都乐保诚聘Java开发工程师</a></li>
<li><a href="http://www.iteye.com/jobs/1144" title="陕西:ThoughtWorks诚聘西安Senior Java Application Developer" target="_blank">陕西: ThoughtWorks诚聘西安Senior Java Applicatio</a></li>
<li><a href="http://www.iteye.com/jobs/2144" title="广东:用友汽车软件诚聘中级JAVA工程师 工作地点：广州" target="_blank">广东: 用友汽车软件诚聘中级JAVA工程师 工作地点：</a></li>
<li><a href="http://www.iteye.com/jobs/2343" title="上海:宝尊电商诚聘JAVA中级软件工程师" target="_blank">上海: 宝尊电商诚聘JAVA中级软件工程师</a></li>
<li><a href="http://www.iteye.com/jobs/2437" title="广东:★路人甲★诚聘高级Java程序员 广州" target="_blank">广东: ★路人甲★诚聘高级Java程序员 广州</a></li>
<li><a href="http://www.iteye.com/jobs/2064" title="上海:用友汽车软件诚聘高级Java程序员" target="_blank">上海: 用友汽车软件诚聘高级Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/2358" title="浙江:全麦电子商务诚聘J2EE系统架构师" target="_blank">浙江: 全麦电子商务诚聘J2EE系统架构师</a></li>
<li><a href="http://www.iteye.com/jobs/2141" title="上海:用友汽车软件诚聘初级java开发工程师（UAP平台）" target="_blank">上海: 用友汽车软件诚聘初级java开发工程师（UAP平</a></li>
<li><a href="http://www.iteye.com/jobs/2078" title="上海:用友汽车软件诚聘项目经理" target="_blank">上海: 用友汽车软件诚聘项目经理</a></li>
<li><a href="http://www.iteye.com/jobs/2297" title="云南:云南远信诚聘软件工程师（Java）" target="_blank">云南: 云南远信诚聘软件工程师（Java）</a></li>
<li><p><a href="http://www.iteye.com/jobs/2426" title="北京:都乐保诚聘Java高级开发工程师" target="_blank">北京: 都乐保诚聘Java高级开发工程师</a></p>
</li>
<li><p><a href="http://www.iteye.com/" target="_blank">首页</a></p>
</li>
<li><a href="http://www.iteye.com/news" target="_blank">资讯</a></li>
<li><a href="http://www.iteye.com/magazines" target="_blank">精华</a></li>
<li><a href="http://www.iteye.com/forums" target="_blank">论坛</a></li>
<li><a href="http://www.iteye.com/ask" target="_blank">问答</a></li>
<li><a href="http://www.iteye.com/blogs" target="_blank">博客</a></li>
<li><a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a></li>
<li><a href="http://www.iteye.com/groups" target="_blank">群组</a></li>
<li><a href="http://www.iteye.com/job" target="_blank">招聘</a></li>
<li><a href="http://www.iteye.com/search" target="_blank">搜索</a></li>
<li><a href="http://www.iteye.com/index/service" target="_blank">广告服务</a></li>
<li><a href="http://webmaster.iteye.com/" target="_blank">ITeye黑板报</a></li>
<li><a href="http://www.iteye.com/index/contactus" target="_blank">联系我们</a></li>
<li><a href="http://www.iteye.com/index/friend_links" target="_blank">友情链接</a></li>
</ul>
<p>© 2003-2012 ITeye.com. [ <a href="http://www.miibeian.gov.cn/" target="_blank">京ICP证110151号</a> 京公网安备110105010620 ]
百联优力(北京)投资有限公司 版权所有 <img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/CAS/">CAS</a></li></span></span> | <span class="tags">Tagged <a href="/tags/CAS/" class="label label-primary">CAS</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-CAS--单点登录CASServer介绍-Java综合-Java-ITeye论坛/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-CAS--单点登录CASServer介绍-Java综合-Java-ITeye论坛" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-CAS--新浪微博如何实现SSO的分析-企业应用-Java-ITeye论坛/">新浪微博如何实现 SSO 的分析 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-CAS--新浪微博如何实现SSO的分析-企业应用-Java-ITeye论坛/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-sso-java-iteye-">新浪微博如何实现 SSO 的分析 - 企业应用 - Java - ITeye论坛</h1>
<p><a href="http://www.iteye.com/login" title="登录" target="_blank">您还未登录 !</a> <a href="http://www.iteye.com/login" target="_blank">登录</a> <a href="http://www.iteye.com/signup" target="_blank">注册</a></p>
<p><a href="http://www.iteye.com/" target="_blank"><img src="&quot;ITeye-最棒的软件开发交流社区&quot;" alt="ITeye-最棒的软件开发交流社区"></a></p>
<p><a href="http://www.iteye.com/forums" target="_blank">论坛首页</a> → <a href="http://www.iteye.com/forums/board/Java" target="_blank">Java企业应用论坛</a> →</p>
<h1 id="-sso-">新浪微博如何实现 SSO 的分析</h1>
<p><a href="http://www.iteye.com/forums/board/Java" target="_blank">全部</a> <a href="http://www.iteye.com/forums/tag/Hibernate" target="_blank">Hibernate</a> <a href="http://www.iteye.com/forums/tag/Spring" target="_blank">Spring</a> <a href="http://www.iteye.com/forums/tag/Struts" target="_blank">Struts</a> <a href="http://www.iteye.com/forums/tag/iBATIS" target="_blank">iBATIS</a> <a href="http://www.iteye.com/forums/tag/%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8" target="_blank">企业应用</a> <a href="http://www.iteye.com/forums/tag/Lucene" target="_blank">Lucene</a> <a href="http://www.iteye.com/forums/tag/SOA" target="_blank">SOA</a> <a href="http://www.iteye.com/forums/tag/Java%E7%BB%BC%E5%90%88" target="_blank">Java综合</a> <a href="http://www.iteye.com/forums/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank">设计模式</a> <a href="http://www.iteye.com/forums/tag/Tomcat" target="_blank">Tomcat</a> <a href="http://www.iteye.com/forums/tag/OO" target="_blank">OO</a> <a href="http://www.iteye.com/forums/tag/JBoss" target="_blank">JBoss</a>
« 上一页 1 <a href="http://www.iteye.com/topic/1039052?page=2" target="_blank">2</a> <a href="http://www.iteye.com/topic/1039052?page=3" target="_blank">3</a> <a href="http://www.iteye.com/topic/1039052?page=2" target="_blank">下一页 »</a></p>
<p>浏览 14772 次 锁定老帖子 <a href="">主题：新浪微博如何实现 SSO 的分析</a></p>
<p><strong>该帖已经被评为精华帖</strong> 作者 正文 * denger</p>
<ul>
<li>等级: <img src="&quot;四星会员&quot;" alt="四星会员"></li>
<li><a href="http://denger.iteye.com/" target="_blank"><img src="&quot;denger的博客: Coding for fun.      &quot;" alt="denger的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 176</li>
<li>积分: 400</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2011-05-10   最后修改：2011-06-25</li>
</ul>
<p><a href="http://www.iteye.com/topic/1039052#" target="_blank">&lt;</a> <a href="http://www.iteye.com/topic/1039052#" target="_blank">&gt;</a>  猎头职位: <a href="http://www.iteye.com/jobs/2245" target="_blank">上海:  【上海】外资企业高新诚聘web开发工程师</a></p>
<p>相关文章: <a href="http://www.iteye.com/topic/1039052#" title="关闭" target="_blank"> </a></p>
<ul>
<li><a href="http://www.iteye.com/topic/1111931" title="CAS 之 跨域 Ajax 登录实践" target="_blank">CAS 之 跨域 Ajax 登录实践</a></li>
<li><a href="http://www.iteye.com/topic/21770" title="跨域的单点登录" target="_blank">跨域的单点登录</a></li>
<li><p><a href="http://www.iteye.com/topic/544899" title="【原创】CAS调研总结" target="_blank">【原创】CAS调研总结</a>
推荐群组: <a href="http://liferay.group.iteye.com/" target="_blank">liferay</a>
<a href="http://www.iteye.com/wiki/topic/1039052" target="_blank">更多相关推荐</a>
<a href="http://www.iteye.com/forums/tag/%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8" target="_blank">企业应用</a>      最近在使用sina微博时，经常性交替使用　weibo.com 和 t.sina.cm.cn进入我的微博。发现当我在 t.sina.com.cn中登录之后，直接切换至weibo.com，这时候在 weibo.com是已经登录的，当我在 weibo.com进行注销之后，再切换至 t.sina.com.cn，这时候在 t.sina.com.cn也已经是注销的状态了。
   对于SSO的实现方案及其机制，早已经不是什么新鲜的技术了，从微软为.net提供的passport机制到java中开源的JBoss SSO、Oracle OpenSSO及经典的 Yale CAS等等之类的开源或一些商业SSO中间件都不失为作为单点登录实现的选择。当然一些企业也会选择自己实现一套适合自己轻量级方案，如采用SESSIONID转递或SESSION同步复制之类的。　可以看得出SSO的价值也是具大的，就拿sina来说吧，增加 weibo.com域名之后，对于用户来说来说没有任何影响，即使你在 t.sina.com.cn中进行登录，可以无缝在两域名之间随意切换，对于它推广weibo.com无非是大大的益处。
  由于近年来一直在使用 Yale的CAS作为SSO的方案，觉得 SINA的SSO与Yale-CAS有很多异曲同工之妙，于是便对SINA的SSO进行分析，其中的细节处理还是很值的学习的。当然，由于分析看到的SINA SSO处理都只是一些表现或表面上的东西，再加上其大部分关键的sso js都已经被压缩，及SERVER端的实现机制也只是靠自己的经验及结合CAS的的一些原理进行猜测。其实本文应该叫　<CAS SSO与SINA SSO的实现对比分析>更比较贴切。</p>
<p>  好吧，进入正题。</p>
</li>
<li><p>Sina SSO之分析篇
  首先是进入 t.sina.com.cn，提交用户名及密码进行登录，通过 Firebug可以看到它通过类似Aajx POST到了 <a href="http://login.sina.com.cn/sso/login.php?client=ssologin.js(v1.3.12)，如下图所示：" target="_blank">http://login.sina.com.cn/sso/login.php?client=ssologin.js(v1.3.12)，如下图所示：</a>
  <img src="" alt="">
  不难看出，其 <a href="http://login.sina.com.cn/sso/login.php" target="_blank">http://login.sina.com.cn/sso/login.php</a> 就是类似是 CAS 中的 Server，对sina的所有应用系统提供的统一登录入口。上面的参数中有一个service参数，了解 CAS的GG应该知道 cas 在登录的时候除了username 和 password同样也有一个 service 参数，其CAS该参数含义是子应用系统的服务名标识及登录成功之后所跳转的地址。当然，sina这里使用了 &quot;miniblog&quot;作为微博的服务名，估计他在sso-server端对 miniblog 与登录成功之后的地址进行映射，如 miniblog=<a href="http://t.sina.com.cn/，这样就避免了CAS-client中转入service=" target="_blank">http://t.sina.com.cn/，这样就避免了CAS-client中转入service=</a> decodeURIComponent(&#39;<a href="http://t.sina.com.cn&#39;)之类的做法了。" target="_blank">http://t.sina.com.cn&#39;)之类的做法了。</a>
  这里的登录与CAS做法一致，将登录验证提交至统一的认证中心进行验证处理，从而避免了跨子域和全域的问题。　验证成功之后路转的路径就是service所向的地址，验证失败之后则返回至当前登录页。下面就SSO中的一些登录方面的核心问题做一些分析，看看SINA和CAS分别是如何处理的：
   　<strong>1.如何授权某个子系统允许其在sso-server进行登录验证呢，类似cas-server中的login-ticket;</strong></p>
<pre><code>  对于cas来说，在首次进入  /cas/login页时， [会产生一个一次性的login-ticket](http://denger.iteye.com/blog/809170)，也就是说在提交登录验证前必须向服务器请求一个login-ticket，在登录提交时，需要将用户名及密码以及login-ticket进行提交至 cas-server端，cas-server端确定login-ticket有效后才会对用户名及密码进行认证。
  看看sina如何处理的吧，继续看firebug:
  ![]()       以上截图是当我首次进行 t.sina.com.cn时，通过 ajax/jsonp的方式发起的一个请求，可以看到返回的callback函数中的 json 串中包含了 nonce:&quot;SXK19N&quot;的属性，参数名的汉译是“一次”或“一次性”的意思，估计这里的 nonce就是login-ticket，为再一次确实，我再试着提交登录看看，看它是否将该参数POST过去：
 ![]()
 果然不出所料， nonce:&quot;SXK19N&quot;作为参数提交过去了，证明所猜测的应该是正确的。
</code></pre><p><strong>2.比如验证码跨域跨服务器导致从session无法获取的问题，我们曾经遇到过;</strong></p>
<pre><code>  貌似sina登录没有涉及到验证码之类的东西，当你多次登录失败之后，它采用的是“您的登录过于频繁，请稍后再试吧”，这种方案确实比验证码要好的多，而且还避免了上面的说的问题。
</code></pre><p>   <strong>3. 当我登录失败了，/sso/login.php 如何将登录的错误信息返回给 t.sina.com.cn并让它进行显示呢，如果我登录成功了/sso/login.php 通过什么方式通知t.sina.com.cn呢，因为它这里使用的是ajax方式登录？</strong></p>
<pre><code> 对于这方面，cas的处理是将错误信息以参数的方式返回给 client-login，如登录失败，重定向地址： http://cas-client.com?errocode=0，如果登录成功，则直接 重定向至 service 中的url，并生成ST给客户端，表示其已经在cas-server登录成功了。
 看看sina如何处理的吧，随便输入一个用户名密码，提交登录，继续通过firebug看看它的处理过程:
</code></pre><p><img src="&quot;点击查看原始大小图片&quot;" alt=""></p>
<pre><code>  再看看t.sina.com.cn 中的html内容的变化：
  ![]()
</code></pre><p>以上图1中发生了两次请求，第一次登录验证是访问 sso认证中心，它所返回response是一个html内容，第二次请求的地址：　<a href="http://t.sina.com.cn/ajaxlogin.php" target="_blank">http://t.sina.com.cn/ajaxlogin.php</a>　framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=4038&amp;reason=%B5%C7%C2）
再结合以上图2信息，看到 html 中发生了变化，创建了一个　id=ssoLoginFrame 的iframe，于是便可以得出，sina 的登录并非原生的ajax方式，而是通过创建iframe来模拟提交不刷新的登录。也就是说，当用户点击登录提交时，这时候它会通过js创建iframe，将登录提效至该iframe中。</p>
<pre><code>   既然已经知道它登录是提交到iframe中，而非ajax方式，那么对于以上截图1中两个请求为什么返回的都是HTML内容就很容易解释了。再回到上面的问题，/sso/login是如何通知t.sina.com.cn登录失败了呢? 首先在以上第一个截图中返回的 HTML包含了一段 javascript:
</code></pre></li>
</ul>
<p>Javascript代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li>location.replace(&quot;<a href="http://t.sina.com.cn/ajaxlogin.php?framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=4038&amp;reason=%B5%C7%C2%BC%B3%A%BC%B3%A2%CA%D4%B4%CE%CA%FD%B9%FD%D3%DA%C6%B5%B7%B1%A3%AC%C7%EB%C9%D4%BA%F3%D4%D9%B5%C7%C2%BC" target="_blank">http://t.sina.com.cn/ajaxlogin.php?framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=4038&amp;reason=%B5%C7%C2%BC%B3%A%BC%B3%A2%CA%D4%B4%CE%CA%FD%B9%FD%D3%DA%C6%B5%B7%B1%A3%AC%C7%EB%C9%D4%BA%F3%D4%D9%B5%C7%C2%BC</a>&quot;);<br>location.replace(&quot;<a href="http://t.sina.com.cn/ajaxlogin.php?framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=4038&amp;reason=%B5%C7%C2%BC%B3%A%BC%B3%A2%CA%D4%B4%CE%CA%FD%B9%FD%D3%DA%C6%B5%B7%B1%A3%AC%C7%EB%C9%D4%BA%F3%D4%D9%B5%C7%C2%BC" target="_blank">http://t.sina.com.cn/ajaxlogin.php?framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=4038&amp;reason=%B5%C7%C2%BC%B3%A%BC%B3%A2%CA%D4%B4%CE%CA%FD%B9%FD%D3%DA%C6%B5%B7%B1%A3%AC%C7%EB%C9%D4%BA%F3%D4%D9%B5%C7%C2%BC</a>&quot;);<pre><code>  location.replace的意思与location.href类似，同样都是改变当前的URL地址,具体区别及做法可以参考[这里](http://blog.csdn.net/fangxinggood/archive/2006/02/21/604916.aspx)及[这里](http://developer.apple.com/internet/webcontent/iframe.html)。需要注意的这里所说的通过location.replace改变当前的URL其它并非改变t.sina.com.cn的地址，而是第二个截图里iframe中src的地址，因为这段HTML是在iframe中输出的。
在  locaiton.replace 的地址中包含了一个 retcode 及 reason参数，估计这就是当前登录的错误信息。在上面第一个截图的第二个请求实际就是在iframe 中进行的 location.replace操作后的跳转地址。关键看它输出的html内容：
</code></pre></li>
</ol>
<p>Html代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li><html><head>  </li>
<li><script language='javascript'>  </li>
<li>parent.sinaSSOController.feedBackUrlCallBack({&quot;result&quot;:false,&quot;errno&quot;:&quot;4038&quot;,&quot;reason&quot;:&quot;\u767b\u5f55\u5c1d\u8bd5\u6b21\u6570\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u767b\u5f55&quot;});</script></head><body></body></html>null<br><html><head> <script language='javascript'> parent.sinaSSOController.feedBackUrlCallBack({&quot;result&quot;:false,&quot;errno&quot;:&quot;4038&quot;,&quot;reason&quot;:&quot;\u767b\u5f55\u5c1d\u8bd5\u6b21\u6570\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u7a0d\u540e\u518d\u767b\u5f55&quot;});</script></head><body></body></html>null
  这段js是在 iframe中执行的，所以可以通过 parent 进行访问 t.sina.com.cn中的js，可以肯定 parent.sinaSSOController.feedBackUrlCallBack 就是告诉 t.sina.com.cn 当前已经登录失败了，并且将错误信息传至该入该callback了。至此，已经完成了 /sso/login.php 对 t.sina.com.cn的信息传送。　新浪果然是有一手呀，在CAS中AJAX登录一直都是一个问题，而sina它巧妙的通过iframe+callback 进行实现了。
  接着，再看看它对于登录成功之后如何通知 t.sina.com.cn的吧，先看看登录成功之后 sina-sso-server 会做什么，看firebug截图：
   <img src="&quot;点击查看原始大小图片&quot;" alt="">
   重点在于 set-Cookie: tgc=TGT-MTc4NTc0NzM0Mw==-1305003116-ja-D51B2EB107B79FC50D8CA424BFE08907;  哈哈，熟悉CAS的应该会很熟悉这个，没想到SINA的TGT与CAS的TGT不但参数命名，居然连生成的规则也一模一样，估计sina肯定是参考了 cas 的实现机制。关于TGT是什么或其作用可以参考：<a href="http://zhenkm0507.iteye.com/blog/546805" target="_blank">CAS总结之Ticket篇</a>。另外还有一个就是当登录成功之后，sina-sso-server会将用户登陆名等等放在sina.com.cn根域的cookie中。
   然后再看看登录成功之后 sina-sso-server所返回的response内容：
   <img src="" alt="">
   以下是从以上摘取JS部分：</li>
</ol>
<p>Javascript代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li><script>  </li>
<li>try{sinaSSOController.setCrossDomainUrlList({&quot;retcode&quot;:0,&quot;arrURL&quot;:[&quot;http:\/\/weibo.com\/sso\/crosdom?action=login&amp;savestate=1305607916&quot;]});}catch(e){}try{sinaSSOController.crossDomainAction(&#39;login&#39;,function(){location.replace(&#39;<a href="http://t.sina.com.cn/ajaxlogin.php?framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=0&#39;);});}catch(e){}" target="_blank">http://t.sina.com.cn/ajaxlogin.php?framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=0&#39;);});}catch(e){}</a>  </li>
<li></script><br><script> try{sinaSSOController.setCrossDomainUrlList({&quot;retcode&quot;:0,&quot;arrURL&quot;:[&quot;http:\/\/weibo.com\/sso\/crosdom?action=login&amp;savestate=1305607916&quot;]});}catch(e){}try{sinaSSOController.crossDomainAction(&#39;login&#39;,function(){location.replace(&#39;<a href="http://t.sina.com.cn/ajaxlogin.php?framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=0&#39;);});}catch(e){}" target="_blank">http://t.sina.com.cn/ajaxlogin.php?framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=0&#39;);});}catch(e){}</a> </script>
   首先再次声明，以上firebug截图中的请求处理，并非 AJAX，而是在 t.sina.com.cn中放了一个iframe，输出的 reponse都会至iframe当中.<br>   以上的js主要重点在于:</li>
</ol>
<p>Javascript代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li>location.replace(&#39;<a href="http://t.sina.com.cn/ajaxlogin.php?framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=0" target="_blank">http://t.sina.com.cn/ajaxlogin.php?framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=0</a>&#39;)<br>location.replace(&#39;<a href="http://t.sina.com.cn/ajaxlogin.php?framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=0" target="_blank">http://t.sina.com.cn/ajaxlogin.php?framelogin=1&amp;callback=parent.sinaSSOController.feedBackUrlCallBack&amp;retcode=0</a>&#39;)
   还是通过设置当前iframe中src地址，再看看跳转至<a href="http://t.sina.com.cn/ajaxlogin.php后的response内容吧：" target="_blank">http://t.sina.com.cn/ajaxlogin.php后的response内容吧：</a>
   <img src="" alt="">
   返回用户信息(从cookie中获取的)，并且还是类似上面的做法，通过　parent.sinaSSOController.feedBackUrlCallBack回调t.sina.com.cn中的js，告诉它这个用户已经登录成功了。
   于是t.sina.com.cn便进行跳转至　t.sina.com.cn/dengers 中，从而实现登录。
   <img src="" alt="">
   整体的处理流程如下：
   <img src="" alt="">
   <strong>4. 当我在t.sina.com.cn中登录后，切换至weibo.com，weibo.com我应该也是已经登录的，如何做到呢？</strong><pre><code>对于这个问题，CAS中的处理就是，当我进入 weibo.com的时候，马上跳转至  /cas/login，然后在login中判断cookie是否存在TGT，如果存在，并确定其有效性后，则认为你已经登录，并为你生成一个ST，将ST作为ticket参数使其重定向至 weibo.com?ticket=TG-xxxx 并登录。
</code></pre>   看看sina怎么处理的吧，首先我直接在t.sina.com.cn登录成功。然后再新建一个选项卡，输入 weibo.com：
   <img src="&quot;点击查看原始大小图片&quot;" alt="">
   可以看得出，当我进入　weibo.com之后，sina并没有直接进入 weibo.com的主页，而是马上重定向至:  <a href="http://login.sina.com.cn/sso/login.php?url=http%3A%2F%2Fweibo.com%2F&amp;_rand=1305008634.5127&amp;gateway=1&amp;service=miniblog&amp;useticket=1&amp;returntype=META" target="_blank">http://login.sina.com.cn/sso/login.php?url=http%3A%2F%2Fweibo.com%2F&amp;_rand=1305008634.5127&amp;gateway=1&amp;service=miniblog&amp;useticket=1&amp;returntype=META</a> 　与cas的做法确实一致。　再看看该 login.php的Response 信息，主要是JS：</li>
</ol>
<p>Js代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
<ol>
<li><script type="text/javascript" language="javascript">  </li>
<li>location.replace(&quot;<a href="http://weibo.com/sso/login.php?url=http%3A%2F%2Fweibo.com%2F&amp;ticket=ST-MTc4NTc0NzM0Mw==-1305008634-ja-694BA43623A3F72999AE7129A0572048&amp;retcode=0" target="_blank">http://weibo.com/sso/login.php?url=http%3A%2F%2Fweibo.com%2F&amp;ticket=ST-MTc4NTc0NzM0Mw==-1305008634-ja-694BA43623A3F72999AE7129A0572048&amp;retcode=0</a>&quot;);  </li>
<li><p></script><br><script type="text/javascript" language="javascript"> location.replace(&quot;<a href="http://weibo.com/sso/login.php?url=http%3A%2F%2Fweibo.com%2F&amp;ticket=ST-MTc4NTc0NzM0Mw==-1305008634-ja-694BA43623A3F72999AE7129A0572048&amp;retcode=0" target="_blank">http://weibo.com/sso/login.php?url=http%3A%2F%2Fweibo.com%2F&amp;ticket=ST-MTc4NTc0NzM0Mw==-1305008634-ja-694BA43623A3F72999AE7129A0572048&amp;retcode=0</a>&quot;); </script>
   看到这里之后，不得不怀疑 SINA　的 SSO　是不是用的就是 CAS　啊！！不但连 TGT 参数名一样，连ST规则及参数名也一模一样，其处理机制也十分相似。
   到这里之后就与 CAS　的处理一样了，就不详细写了，可以参考 CAS相关文章。
──────────
PS:由于在分析过程中里面的很多SSO关键JS都压缩了，所以难免会存在误差。　不过SINA的SSO很多细节方面确实处理的很好，作为互联网应用的话，如果单纯的只是把 CAS　DOWNLOAD　下来，然后直接配配就用的话很多方面的处理还是很不到位的。　有时间我把我们CAS参考 SINA　调整一下。
  到这里，不得不说的一个事情就是，之前在<a href="http://www.iteye.com/topic/1000776" target="_blank">分析淘宝cookie如何跨域获取</a>时，大家都说出了一个taobao的jsonp实际存在一定的安全隐患。后面那个淘宝的GG看到之后加入Refer的判断。而现在，在分析的过程中发现新浪也有这样的问题，可以尝试一下，随便在本地建立一个html，引入jquery，然后使用下面的JS，就可以获取到sina中的登录邮箱名等信息，前提是你需要先在sina中登录：
Js代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"><img src="" alt=""></a></p>
</li>
<li><p>$.ajax({url: &#39;<a href="http://t.sina.com.cn/ajaxlogin.php?framelogin=0&amp;callback=?&amp;retcode=0" target="_blank">http://t.sina.com.cn/ajaxlogin.php?framelogin=0&amp;callback=?&amp;retcode=0</a>&#39;, dataType:&#39;jsonp&#39;,  </p>
</li>
<li>success:function(data){  </li>
<li>alert(data.userinfo.userid);  </li>
<li>}});<br>$.ajax({url: &#39;<a href="http://t.sina.com.cn/ajaxlogin.php?framelogin=0&amp;callback=?&amp;retcode=0" target="_blank">http://t.sina.com.cn/ajaxlogin.php?framelogin=0&amp;callback=?&amp;retcode=0</a>&#39;, dataType:&#39;jsonp&#39;, success:function(data){ alert(data.userinfo.userid); }});</li>
</ol>
<ul>
<li><a href="http://dl.iteye.com/upload/attachment/0047/8286/31cd9585-6269-3a37-b8f4-2b8d02e4729a.png" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></li>
<li><p>大小: 50.6 KB</p>
</li>
<li><p><a href="http://dl.iteye.com/upload/attachment/0047/8303/e1584505-a33b-31f0-bd37-45d01091e95e.png" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></p>
</li>
<li><p>大小: 26.4 KB</p>
</li>
<li><p><a href="http://dl.iteye.com/upload/attachment/0047/8305/d4482ff9-9dc3-3ac5-ad7d-c7f994f30ed3.png" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></p>
</li>
<li><p>大小: 37.5 KB</p>
</li>
<li><p><a href="http://dl.iteye.com/upload/attachment/0047/8580/77c647c4-5c36-3dcd-910f-c90a201cfe71.png" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></p>
</li>
<li><p>大小: 40 KB</p>
</li>
<li><p><a href="http://dl.iteye.com/upload/attachment/0047/8597/7f3a898c-6211-3cdd-acfe-f940615a73e8.png" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></p>
</li>
<li><p>大小: 134.6 KB</p>
</li>
<li><p><a href="http://dl.iteye.com/upload/attachment/0047/8602/966dd896-d63f-3622-b78c-ee23370baaed.png" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></p>
</li>
<li><p>大小: 56 KB</p>
</li>
<li><p><a href="http://dl.iteye.com/upload/attachment/0047/8608/30cd2444-e47c-3b5c-876f-e357a5a617f3.png" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></p>
</li>
<li><p>大小: 29 KB</p>
</li>
<li><p><a href="http://dl.iteye.com/upload/attachment/0047/8615/ddda1c2e-b441-3e66-930f-6c06a2d2bfa1.png" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></p>
</li>
<li><p>大小: 35.9 KB</p>
</li>
<li><p><a href="http://dl.iteye.com/upload/attachment/0047/8620/f660b8c0-67b0-31c0-ae8c-27fa88491198.png" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></p>
</li>
<li><p>大小: 103.5 KB</p>
</li>
<li><p><a href="http://dl.iteye.com/upload/attachment/0047/8636/77438b2b-c573-3bba-8853-682ecdd3380d.png" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></p>
</li>
<li><p>大小: 110.8 KB</p>
</li>
<li><p><a href="http://dl.iteye.com/upload/attachment/0047/9000/e43d4e20-665b-342e-a693-62bd388c9597.png" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></p>
</li>
<li><p>大小: 134.6 KB</p>
</li>
<li><p><a href="http://dl.iteye.com/upload/attachment/0047/9002/61d8dccb-90d7-3c8e-b9c0-d58bd48c902e.png" target="_blank"><img src="&quot;点击查看原始大小图片&quot;" alt=""></a></p>
</li>
<li><p>大小: 85.2 KB</p>
</li>
<li><p><a href="http://www.iteye.com/topic/1039052#" target="_blank">查看图片附件</a></p>
</li>
</ul>
<p>声明：ITeye文章版权属于作者，受法律保护。没有作者书面许可不得转载。
推荐链接</p>
<ul>
<li><a href="http://www.iteye.com/clicks/716" target="_blank">想进外企，出国，跳槽，找工作？英语不好,快来充电吧</a></li>
<li><a href="http://www.iteye.com/clicks/609"></a></li>
<li><a href="http://www.iteye.com/clicks/770" target="_blank">世界级研发人员汇聚深圳！</a> <a href="http://www.iteye.com/topic/1039052#" target="_blank">返回顶楼</a> <a href="http://denger.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://denger.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=denger" title="发送站内短信" target="_blank"> </a> <a href="http://denger.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=denger" title="关注作者" target="_blank"> </a>  * 苍山洱海</li>
<li>等级: 初级会员</li>
<li><a href="http://yangkun0318-126-com.iteye.com/" target="_blank"><img src="&quot;苍山洱海的博客: &quot;" alt="苍山洱海的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 95</li>
<li>积分: 0</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2011-05-10  </li>
</ul>
<p>好文章。分析的很详实。慢慢看。 <a href="http://www.iteye.com/topic/1039052#" target="_blank">返回顶楼</a> <a href="http://yangkun0318-126-com.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://yangkun0318-126-com.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=%E8%8B%8D%E5%B1%B1%E6%B4%B1%E6%B5%B7" title="发送站内短信" target="_blank"> </a> <a href="http://yangkun0318-126-com.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=%E8%8B%8D%E5%B1%B1%E6%B4%B1%E6%B5%B7" title="关注作者" target="_blank"> </a> <a href="http://www.iteye.com/topic/1039052#2095803" title="苍山洱海回帖:新浪微博如何实现 SSO 的分析" target="_blank">回帖地址</a></p>
<p><a href="http://www.iteye.com/topic/1039052#" title="好" target="_blank">0</a> <a href="http://www.iteye.com/topic/1039052#" title="差" target="_blank">0</a> 请登录后投票  * ln1058</p>
<ul>
<li>等级: 初级会员</li>
<li><a href="http://ln1058.iteye.com/" target="_blank"><img src="&quot;ln1058的博客: 这是一段很长很长的旅程,流尽所有的泪水永无止境,我奋力地穿越苦惘和迷墙,在我的路上寻找生命的意义... &quot;" alt="ln1058的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 43</li>
<li>积分: 40</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2011-05-11  </li>
</ul>
<p>我怎么觉得没必要这么麻烦呢。
如果是我来做，直接通过cookie来判断用户是否为登录状态，然后在进行相关的URL跳转。
这种网站对于用户的安全性都不高，真有必要这么麻烦吗？ <a href="http://www.iteye.com/topic/1039052#" target="_blank">返回顶楼</a> <a href="http://ln1058.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://ln1058.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=ln1058" title="发送站内短信" target="_blank"> </a> <a href="http://ln1058.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=ln1058" title="关注作者" target="_blank"> </a> <a href="http://www.iteye.com/topic/1039052#2096212" title="ln1058回帖:新浪微博如何实现 SSO 的分析" target="_blank">回帖地址</a></p>
<p><a href="http://www.iteye.com/topic/1039052#" title="好" target="_blank">0</a> <a href="http://www.iteye.com/topic/1039052#" title="差" target="_blank">0</a> 请登录后投票  * denger</p>
<ul>
<li>等级: <img src="&quot;四星会员&quot;" alt="四星会员"></li>
<li><a href="http://denger.iteye.com/" target="_blank"><img src="&quot;denger的博客: Coding for fun.      &quot;" alt="denger的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 176</li>
<li>积分: 400</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2011-05-11   最后修改：2011-05-11</li>
</ul>
<p>ln1058 写道</p>
<p>我怎么觉得没必要这么麻烦呢。
如果是我来做，直接通过cookie来判断用户是否为登录状态，然后在进行相关的URL跳转。
实际上说起来确实是这样，CAS和SINA也是这样的，直接从cookie判断用户是否已经登录，如果已经登录进行相关 URL的跳转。但是，cookie只会存储在一个域名下(login.sina.com.cn) ， sina很多方面都采用 AJAX/JSONP　或 iframe　的方式，因为基本上全部都是跨全域的&quot;AJAX&quot;方式登录的，所以很多地方处理起来并不是那么方便。
另外一个还要考虑的SSO的灵活和通用信，一个的系统或新的域名整合过来，增加或修改达到最少，这些在设计SSO中都是需要考虑、封装的，而sina这方面确实封装的还可以，整个SSO的处理逻辑也很清楚。他参考了CAS的设计方案或者说直接使用的就是CAS然后进行二次开发的。
引用</p>
<p>这种网站对于用户的安全性都不高，真有必要这么麻烦吗？
新浪有着上亿的微博用户噢....　就你一句话说他安全性不高，他就不高了？ <a href="http://www.iteye.com/topic/1039052#" target="_blank">返回顶楼</a> <a href="http://denger.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://denger.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=denger" title="发送站内短信" target="_blank"> </a> <a href="http://denger.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=denger" title="关注作者" target="_blank"> </a> <a href="http://www.iteye.com/topic/1039052#2096237" title="denger回帖:新浪微博如何实现 SSO 的分析" target="_blank">回帖地址</a></p>
<p><a href="http://www.iteye.com/topic/1039052#" title="好" target="_blank">0</a> <a href="http://www.iteye.com/topic/1039052#" title="差" target="_blank">0</a> 请登录后投票  * fangin</p>
<ul>
<li>等级: 初级会员</li>
<li><a href="http://fangin.iteye.com/" target="_blank"><img src="&quot;fangin的博客: &quot;" alt="fangin的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 52</li>
<li>积分: 30</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2011-05-11  </li>
</ul>
<p>ln1058 写道</p>
<p>我怎么觉得没必要这么麻烦呢。
如果是我来做，直接通过cookie来判断用户是否为登录状态，然后在进行相关的URL跳转。
这种网站对于用户的安全性都不高，真有必要这么麻烦吗？
你不能因为用户禁用cookie就登陆不上去啊 <a href="http://www.iteye.com/topic/1039052#" target="_blank">返回顶楼</a> <a href="http://fangin.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://fangin.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=fangin" title="发送站内短信" target="_blank"> </a> <a href="http://fangin.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=fangin" title="关注作者" target="_blank"> </a> <a href="http://www.iteye.com/topic/1039052#2096261" title="fangin回帖:新浪微博如何实现 SSO 的分析" target="_blank">回帖地址</a></p>
<p><a href="http://www.iteye.com/topic/1039052#" title="好" target="_blank">0</a> <a href="http://www.iteye.com/topic/1039052#" title="差" target="_blank">0</a> 请登录后投票  * denger</p>
<ul>
<li>等级: <img src="&quot;四星会员&quot;" alt="四星会员"></li>
<li><a href="http://denger.iteye.com/" target="_blank"><img src="&quot;denger的博客: Coding for fun.      &quot;" alt="denger的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 176</li>
<li>积分: 400</li>
<li>来自: 北京</li>
<li><img src="" alt="">
  发表时间：2011-05-11   最后修改：2011-05-11</li>
</ul>
<p>fangin 写道</p>
<p>ln1058 写道</p>
<p>我怎么觉得没必要这么麻烦呢。
如果是我来做，直接通过cookie来判断用户是否为登录状态，然后在进行相关的URL跳转。
这种网站对于用户的安全性都不高，真有必要这么麻烦吗？
你不能因为用户禁用cookie就登陆不上去啊
你说的没错，不过遗憾的是 sina当你禁用了cookie你确实登录不上去。貌似连iteye也是这样。 <a href="http://www.iteye.com/topic/1039052#" target="_blank">返回顶楼</a> <a href="http://denger.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://denger.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=denger" title="发送站内短信" target="_blank"> </a> <a href="http://denger.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=denger" title="关注作者" target="_blank"> </a> <a href="http://www.iteye.com/topic/1039052#2096274" title="denger回帖:新浪微博如何实现 SSO 的分析" target="_blank">回帖地址</a></p>
<p><a href="http://www.iteye.com/topic/1039052#" title="好" target="_blank">0</a> <a href="http://www.iteye.com/topic/1039052#" title="差" target="_blank">0</a> 请登录后投票  * aweber</p>
<ul>
<li>等级: 初级会员</li>
<li><a href="http://aweber.iteye.com/" target="_blank"><img src="&quot;aweber的博客: &quot;" alt="aweber的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 3</li>
<li>积分: 30</li>
<li>来自: 福建</li>
<li><img src="" alt="">
  发表时间：2011-05-11  </li>
</ul>
<p>亮点是 iframe调用父窗口js函数的解决方法。居然在当前域名下整了一个跳转页面，在跳转页面里面调用父窗口地址。NB。
我之前都是 在子iframe里面再包含一个iframe，简称孙iframe，孙iframe和父窗口同域名，也就是跳转页面，在孙iframe里面调用父窗口的函数 <a href="http://www.iteye.com/topic/1039052#" target="_blank">返回顶楼</a> <a href="http://aweber.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://aweber.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=aweber" title="发送站内短信" target="_blank"> </a> <a href="http://aweber.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=aweber" title="关注作者" target="_blank"> </a> <a href="http://www.iteye.com/topic/1039052#2096367" title="aweber回帖:新浪微博如何实现 SSO 的分析" target="_blank">回帖地址</a></p>
<p><a href="http://www.iteye.com/topic/1039052#" title="好" target="_blank">0</a> <a href="http://www.iteye.com/topic/1039052#" title="差" target="_blank">0</a> 请登录后投票  * xiang37</p>
<ul>
<li>等级: 初级会员</li>
<li><a href="http://xiva.iteye.com/" target="_blank"><img src="&quot;xiang37的博客: 一步既出，无需罣碍，前行便是&quot;" alt="xiang37的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 22</li>
<li>积分: 40</li>
<li>来自: 南京</li>
<li><img src="" alt="">
  发表时间：2011-05-11  </li>
</ul>
<p>支持一个，最近在研究sso，现在想先做个cas的实例出来。 <a href="http://www.iteye.com/topic/1039052#" target="_blank">返回顶楼</a> <a href="http://xiva.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://xiva.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=xiang37" title="发送站内短信" target="_blank"> </a> <a href="http://xiva.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=xiang37" title="关注作者" target="_blank"> </a> <a href="http://www.iteye.com/topic/1039052#2096404" title="xiang37回帖:新浪微博如何实现 SSO 的分析" target="_blank">回帖地址</a></p>
<p><a href="http://www.iteye.com/topic/1039052#" title="好" target="_blank">0</a> <a href="http://www.iteye.com/topic/1039052#" title="差" target="_blank">0</a> 请登录后投票  * tengfei3003</p>
<ul>
<li>等级: 初级会员</li>
<li><a href="http://tengfei3003.iteye.com/" target="_blank"><img src="&quot;tengfei3003的博客: tengfei3003&quot;" alt="tengfei3003的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 9</li>
<li>积分: 40</li>
<li>来自: 南京</li>
<li><img src="" alt="">
  发表时间：2011-05-11  </li>
</ul>
<p>分析透彻，好好研究研究 <a href="http://www.iteye.com/topic/1039052#" target="_blank">返回顶楼</a> <a href="http://tengfei3003.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://tengfei3003.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=tengfei3003" title="发送站内短信" target="_blank"> </a> <a href="http://tengfei3003.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=tengfei3003" title="关注作者" target="_blank"> </a> <a href="http://www.iteye.com/topic/1039052#2096616" title="tengfei3003回帖:新浪微博如何实现 SSO 的分析" target="_blank">回帖地址</a></p>
<p><a href="http://www.iteye.com/topic/1039052#" title="好" target="_blank">0</a> <a href="http://www.iteye.com/topic/1039052#" title="差" target="_blank">0</a> 请登录后投票  * jeho0815</p>
<ul>
<li>等级: 初级会员</li>
<li><a href="http://jeho0815.iteye.com/" target="_blank"><img src="&quot;jeho0815的博客: &quot;" alt="jeho0815的博客"></a></li>
<li>性别: <img src="&quot;男&quot;" alt=""></li>
<li>文章: 21</li>
<li>积分: 30</li>
<li>来自: 深圳</li>
<li><img src="" alt="">
  发表时间：2011-05-11  </li>
</ul>
<p>看的有点困难啊，实力太差了！ <a href="http://www.iteye.com/topic/1039052#" target="_blank">返回顶楼</a> <a href="http://jeho0815.iteye.com/" title="浏览作者的博客" target="_blank"> </a> <a href="http://jeho0815.iteye.com/blog/profile" title="浏览作者资料" target="_blank"> </a> <a href="http://my.iteye.com/messages/new?message%5Breceiver_name%5D=jeho0815" title="发送站内短信" target="_blank"> </a> <a href="http://jeho0815.iteye.com/blog/guest_book" title="给作者留言" target="_blank"> </a> <a href="http://my.iteye.com/feed?subscription%5Bsubscribed_user_name%5D=jeho0815" title="关注作者" target="_blank"> </a> <a href="http://www.iteye.com/topic/1039052#2097028" title="jeho0815回帖:新浪微博如何实现 SSO 的分析" target="_blank">回帖地址</a></p>
<p><a href="http://www.iteye.com/topic/1039052#" title="好" target="_blank">0</a> <a href="http://www.iteye.com/topic/1039052#" title="差" target="_blank">0</a> 请登录后投票</p>
<p>« 上一页 1 <a href="http://www.iteye.com/topic/1039052?page=2" target="_blank">2</a> <a href="http://www.iteye.com/topic/1039052?page=3" target="_blank">3</a> <a href="http://www.iteye.com/topic/1039052?page=2" target="_blank">下一页 »</a>
<a href="http://www.iteye.com/forums" target="_blank">论坛首页</a> → <a href="http://www.iteye.com/forums/board/Java" target="_blank">Java企业应用版</a>
跳转论坛:移动开发技术 Web前端技术 Java企业应用 编程语言技术 综合技术 入门技术 招聘求职 海阔天空</p>
<ul>
<li><a href="http://www.iteye.com/jobs/2137" title="吉林:用友汽车软件诚聘高级Java工程师工作地点：长春、北京" target="_blank">吉林: 用友汽车软件诚聘高级Java工程师工作地点：长</a></li>
<li><a href="http://www.iteye.com/jobs/2144" title="广东:用友汽车软件诚聘中级JAVA工程师 工作地点：广州" target="_blank">广东: 用友汽车软件诚聘中级JAVA工程师 工作地点：</a></li>
<li><a href="http://www.iteye.com/jobs/2343" title="上海:宝尊电商诚聘JAVA中级软件工程师" target="_blank">上海: 宝尊电商诚聘JAVA中级软件工程师</a></li>
<li><a href="http://www.iteye.com/jobs/2426" title="北京:都乐保诚聘Java高级开发工程师" target="_blank">北京: 都乐保诚聘Java高级开发工程师</a></li>
<li><a href="http://www.iteye.com/jobs/1144" title="陕西:ThoughtWorks诚聘西安Senior Java Application Developer" target="_blank">陕西: ThoughtWorks诚聘西安Senior Java Applicatio</a></li>
<li><a href="http://www.iteye.com/jobs/2078" title="上海:用友汽车软件诚聘项目经理" target="_blank">上海: 用友汽车软件诚聘项目经理</a></li>
<li><a href="http://www.iteye.com/jobs/2106" title="上海:爱可生技术诚聘高级JAVA工程师" target="_blank">上海: 爱可生技术诚聘高级JAVA工程师</a></li>
<li><a href="http://www.iteye.com/jobs/2141" title="上海:用友汽车软件诚聘初级java开发工程师（UAP平台）" target="_blank">上海: 用友汽车软件诚聘初级java开发工程师（UAP平</a></li>
<li><a href="http://www.iteye.com/jobs/2344" title="上海:宝尊电商诚聘JAVA高级软件工程师" target="_blank">上海: 宝尊电商诚聘JAVA高级软件工程师</a></li>
<li><a href="http://www.iteye.com/jobs/1628" title="浙江:阿里巴巴诚聘高级Java工程师" target="_blank">浙江: 阿里巴巴诚聘高级Java工程师</a></li>
<li><a href="http://www.iteye.com/jobs/1849" title="浙江:阿里巴巴诚聘C++开发工程师(搜索引擎和广告引擎方向，偏底层)" target="_blank">浙江: 阿里巴巴诚聘C++开发工程师(搜索引擎和广告</a></li>
<li><a href="http://www.iteye.com/jobs/2136" title="吉林:用友汽车软件诚聘java开发工程师 工作地点：长春、北京" target="_blank">吉林: 用友汽车软件诚聘java开发工程师 工作地点：</a></li>
<li><a href="http://www.iteye.com/jobs/2143" title="上海:用友汽车软件诚聘中级java程序员（工作地点：上海安亭）" target="_blank">上海: 用友汽车软件诚聘中级java程序员（工作地点：</a></li>
<li><a href="http://www.iteye.com/jobs/2064" title="上海:用友汽车软件诚聘高级Java程序员" target="_blank">上海: 用友汽车软件诚聘高级Java程序员</a></li>
<li><a href="http://www.iteye.com/jobs/2427" title="北京:都乐保诚聘Java开发工程师" target="_blank">北京: 都乐保诚聘Java开发工程师</a></li>
<li><a href="http://www.iteye.com/jobs/2321" title="云南:云南远信诚聘高级软件工程师(J2EE) " target="_blank">云南: 云南远信诚聘高级软件工程师(J2EE)</a></li>
<li><a href="http://www.iteye.com/jobs/2140" title="上海:用友汽车软件诚聘高级java开发工程师（UAP平台）" target="_blank">上海: 用友汽车软件诚聘高级java开发工程师（UAP平</a></li>
<li><a href="http://www.iteye.com/jobs/2437" title="广东:★路人甲★诚聘高级Java程序员 广州" target="_blank">广东: ★路人甲★诚聘高级Java程序员 广州</a></li>
<li><a href="http://www.iteye.com/jobs/2297" title="云南:云南远信诚聘软件工程师（Java）" target="_blank">云南: 云南远信诚聘软件工程师（Java）</a></li>
<li><p><a href="http://www.iteye.com/jobs/2358" title="浙江:全麦电子商务诚聘J2EE系统架构师" target="_blank">浙江: 全麦电子商务诚聘J2EE系统架构师</a></p>
</li>
<li><p><a href="http://www.iteye.com/" target="_blank">首页</a></p>
</li>
<li><a href="http://www.iteye.com/news" target="_blank">资讯</a></li>
<li><a href="http://www.iteye.com/magazines" target="_blank">精华</a></li>
<li><a href="http://www.iteye.com/forums" target="_blank">论坛</a></li>
<li><a href="http://www.iteye.com/ask" target="_blank">问答</a></li>
<li><a href="http://www.iteye.com/blogs" target="_blank">博客</a></li>
<li><a href="http://www.iteye.com/blogs/subjects" target="_blank">专栏</a></li>
<li><a href="http://www.iteye.com/groups" target="_blank">群组</a></li>
<li><a href="http://www.iteye.com/job" target="_blank">招聘</a></li>
<li><a href="http://www.iteye.com/search" target="_blank">搜索</a></li>
<li><a href="http://www.iteye.com/index/service" target="_blank">广告服务</a></li>
<li><a href="http://webmaster.iteye.com/" target="_blank">ITeye黑板报</a></li>
<li><a href="http://www.iteye.com/index/contactus" target="_blank">联系我们</a></li>
<li><a href="http://www.iteye.com/index/friend_links" target="_blank">友情链接</a></li>
</ul>
<p>© 2003-2012 ITeye.com. [ <a href="http://www.miibeian.gov.cn/" target="_blank">京ICP证110151号</a> 京公网安备110105010620 ]
百联优力(北京)投资有限公司 版权所有 <img src="" alt=""></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/CAS/">CAS</a></li></span></span> | <span class="tags">Tagged <a href="/tags/CAS/" class="label label-primary">CAS</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-CAS--新浪微博如何实现SSO的分析-企业应用-Java-ITeye论坛/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-CAS--新浪微博如何实现SSO的分析-企业应用-Java-ITeye论坛" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全-无线--浅析无线网络数据窥探技术-FreebuFCOM/">浅析无线网络数据窥探技术</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-安全-无线--浅析无线网络数据窥探技术-FreebuFCOM/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-freebuf-com">浅析无线网络数据窥探技术- FreebuF.COM</h1>
<ul>
<li><a href="http://www.freebuf.com/" target="_blank">首页</a></li>
<li><a href="http://www.freebuf.com/category/news" target="_blank">资讯</a></li>
<li><a href="http://www.freebuf.com/category/tools" target="_blank">工具</a></li>
<li><p><a href="http://www.freebuf.com/category/articles" target="_blank">文章</a></p>
</li>
<li><p><a href="http://www.freebuf.com/category/articles/web" target="_blank">WEB安全</a></p>
</li>
<li><a href="http://www.freebuf.com/category/articles/wireless" target="_blank">无线安全</a></li>
<li><a href="http://www.freebuf.com/category/articles/system" target="_blank">系统安全</a></li>
<li><a href="http://www.freebuf.com/category/articles/database" target="_blank">数据库安全</a></li>
<li><a href="http://www.freebuf.com/category/articles/terminal" target="_blank">终端安全</a></li>
<li><a href="http://www.freebuf.com/category/articles/others-articles" target="_blank">其他</a></li>
<li><a href="http://www.freebuf.com/category/vuls" target="_blank">漏洞</a></li>
<li><a href="http://www.freebuf.com/category/jobs" target="_blank">招聘</a></li>
<li><a href="http://www.freebuf.com/category/others" target="_blank">周边</a></li>
<li><a href="http://plant.freebuf.com/" target="_blank">聚合</a></li>
<li><a href="http://club.freebuf.com/" target="_blank">社区</a></li>
<li><img src="" alt=""><a href="http://www.freebuf.com/newsend" target="_blank">投稿</a></li>
</ul>
<p><a href="http://www.freebuf.com/wp-login.php?redirect_to=http%3A%2F%2Fwww.freebuf.com%2Farticles%2Fwireless%2F5351.html" title="登陆" target="_blank">登陆</a><a href="http://www.freebuf.com/wp-login.php?action=register" target="_blank">注册</a></p>
<p><a href="http://www.freebuf.com/" target="_blank"><img src="" alt="freebuf"></a></p>
<p><a href="http://www.weibo.com/freebuf" title="收听新浪微博" target="_blank">新浪微博</a> <a href="http://t.qq.com/freebuf" title="收听腾讯微博" target="_blank">腾讯微博</a><a href="http://www.freebuf.com/feed" title="订阅我们" target="_blank">订阅我们</a></p>
<p>关于本文作者</p>
<p><img src="" alt=""></p>
<p><a href="http://www.freebuf.com/author/crow" title="由 Crow 发布" target="_blank">Crow</a> <img src="&quot;核心成员&quot;" alt=""> </p>
<p>这家伙很懒，还未填写个人简介</p>
<h3 id="-">浅析无线网络数据窥探技术 <img src="&quot;原创精品&quot;" alt=""></h3>
<p><a href="http://www.freebuf.com/articles/wireless/5351.html#" target="_blank"></a><a href="http://www.freebuf.com/author/crow" title="由 Crow 发布">Crow</a> @ <a href="http://www.freebuf.com/category/articles/wireless" title="查看 无线安全 中的全部文章" target="_blank">无线安全</a> 2012-08-14 共 <strong>976</strong> 人围观 </p>
<p><strong><strong>Author:Crow<em>**</em></strong></strong>Site:<a href="http://www.freebuf.com" target="_blank">http://www.freebuf.com</a> <strong>
</strong></p>
<p><strong>记得几年前,蓝牙一时兴起,当时在十几米的范围内,就可覆盖了很多个蓝牙接入点,那个时候还在上学,上课时无聊,就会找一些蓝牙接入点来恶作剧,后来蓝牙这个东西慢慢的在人们的眼中变得不重要,取而代之的是覆盖到各处的wi-fi网络,各处餐厅,地铁,公司,大街小巷随处可以搜索到不知道从何而来的wi-fi信号,而hacking wifi技术也犹然而生。</strong></p>
<p>这部分的技术大多来自国外翻译文章，技术出处大致相同，但是关于原理问题有些人并不了解，今天就和大家一起分享下hacking wi-fi技术。</p>
<p>Let’s go!!</p>
<p>无线网络可分为<strong>广义无线网络</strong>和<strong>狭义无线网络</strong></p>
<p>广义无线网络包含了大家所熟知的wlan，wpan，wwan</p>
<p>wlan
无线局域网络(Wireless Local Area Networks；WLAN)是相当便利的数据传输系统，它利用射频(Radio Frequency；RF)的技术，取代旧式碍手碍脚的双绞铜线(Coaxial)所构成的局域网络，使得无线局域网络能利用简单的存取架构让用户透过它，达到「信息随身化、便利走天下」的理想境界。</p>
<p>wpan</p>
<p>无线个人局域网通讯技术（WPAN：Wireless Personal Area Network Communication Technologies）其中最典型且被大家熟知的技术包括:Bluetooth(蓝牙)，IrDa(红外)另外还包括ZigBee，UWB，HomeRF等，基于IEEE 802.15.(1-4)。</p>
<p>狭义无线网络既大家常用的IEEE 802.11标准的无线网络，关于802.11的标准及发展，大家可以再百度百科中查询。</p>
<p><strong>无线网络的工作原理</strong></p>
<p>无线网络至少要有一个无线接入点，即AP（Access Point）和一个client（无线客户端）组成，其中AP会将SSID由beacons(信号台)封装并广播，1Mbit/s的速率为1次/100ms。而无线clinet即为可接收这个SSID广播封包的设备，此处可由无线client来决定是否要与此AP发出的信号连接，所以可以选择任意的SSID进行连接。</p>
<p>记得上次，写了一个有关企业内网的文章，其中技术细节并不是很明确，所以今天可以给大家提供一个无线方面的思路，示意图如下：</p>
<p><a href="&quot;FreebuF.COM&quot;"><img src="&quot;20120813011346_15444&quot;" alt="20120813011346_15444"></a></p>
<p>图画的不算太好，大家凑合着看吧</p>
<p>无线安全对于企业安全来说也是尤为重要的一处，现在大多数企业都会采用笔记本作为工作电脑，便携而且对于网络上的分配极为方便。</p>
<p><strong>利用</strong></p>
<p>对于无线上的入侵推荐使用BT5，或者自己使用ubuntu集成aircreak也好。
此处演示基于虚拟机BT5，及USB外置网卡
WEP方式加密现在已经很少了，就此略过，WPA的演示，可参见<a href="http://www.freebuf.com/articles/5012.html" target="_blank"><a href="http://www.freebuf.com/articles/5012.html">http://www.freebuf.com/articles/5012.html</a></a></p>
<p>首先我们先来看下BT5下集成的无线工具，输入air，TAB键</p>
<p><img src="" alt=""></p>
<p>可见aircreak系列的软件已经集成很多，这些足够我们在日常破解使用
Aircreak-ng既集成了破解功能，另外大家还可以使用cowpatty</p>
<p><img src="&quot;3333&quot;" alt=""></p>
<p>OK，现在我们载入无线网卡，iwconfig</p>
<p><img src="&quot;4444&quot;" alt=""></p>
<p>由于网卡类型及驱动的原因，外置载入网卡不一定就是wlan0，当然名字也可以自定义配置。
在使用之前，建议大家先update一下</p>
<p>Airodump-ng-oui-update</p>
<p><img src="" alt=""></p>
<p>下面启动无线网卡</p>
<p>ifconfig ra0 up</p>
<p>激活无线网卡至monitor</p>
<p>airmon-ng start ra0</p>
<p>然后开始一系列的密码破解，由于之前thanks写过此类文章（<a href="http://www.freebuf.com/articles/5012.html" target="_blank">《Wifi Hacking</a><a href="http://www.freebuf.com/articles/5012.html" target="_blank">》</a>），所以这里就不在写了</p>
<p>那么我们要做什么呢？</p>
<p>刚在前面的图中画了了一下AP欺骗的问题
那么下面我们就来抓取数据包，并加以分析</p>
<p>Airodump-ng –c 6 –w crowlog mon0</p>
<p>这里-c是选择接收频道，-w是保存截获数据包名称，后面是网卡</p>
<p>我们也可以对airodump-ng中所示的ssid进行抓包，我这里由于链接无线网的人很少，已经半夜了，所以就不演示了
等抓取了足够的无线网络数据后，就可以Ctrl+C停止了。接下来我们可以使用Cain或者Wireshark来查看数据包了</p>
<p>打开Cain，选择Creaker，点击左侧分类栏的802.11Captures。</p>
<p><img src="&quot;22222&quot;" alt="22222"></p>
<p>右键空白处，Add to list</p>
<p><img src="" alt=""></p>
<p>然后Decode开始解密</p>
<p><img src="" alt=""></p>
<p>此处需要强调一下，破解数据包是需要在破解了无线密码的前提下才可以的</p>
<p><img src="" alt=""></p>
<p><strong>下面输入无线密码即可开始破解</strong></p>
<p>解密完成后，会出现同文件名+dec.cap的文件，将此文件放入wireshark中打开，</p>
<p>然后我们就可以开始分析不过的无线数据破解后的报文啦！</p>
<p>由于我这边抓取来的数据只有几十K，半夜1点钟了，所以就不截图抓取的数据了，感兴趣的朋友可以自己试试。</p>
<p>其中的QQ,MSN,email，登陆用的账号密码都可以看到，这块就要看大家是否细心了。多看看数据包，里面或许有很多有用的东西，如杀毒软件版本，输入法版本等。</p>
<p>这里凡是公开了密码的免费上网区，都是很容易下手的，比如在某咖啡厅，或者某机场，看到有漂亮MM在用笔记本上QQ或者MSN，这个密码基本上都是可知的，不需要费力去破解，然而当知道了密码后，所有弥漫在空中的，看不见的无线信号，便都在自己的掌控之下。抓取他们，得到他们以后。所有的数据便都是自己的了。在或者在公司，密码可知，权限开放，那么无线网段的数据便全部在自己的掌控之中。然而，捕获无线数据的方法有很多种。如固定mac地址捕获数据</p>
<p>aireplay-ng -0 3 –a ap的mac地址–c client的mac地址ra0</p>
<p>deauth攻击模式，来将现有的（指定mac）的无线客户端强制断开，这样客户端就需要重新连接网络，这样我们就会抓到完整的wpa-psk握手验证的数据包了。</p>
<p>Aircrack-ng –w dic cap文件</p>
<p>可以用来破解抓取到的wpa-psk数据报文。</p>
<p>入侵是可以多种多样的，不必拘于一个教程，或者一个工具。</p>
<p>最后，无线网络正大面积覆盖着全世界，并走向各家各户，小到自建的无线基站，大到移动联通的CMCC和WLAN，使越来越多的人处于同一个局域网，而与大家同在一个局域网内的黑客们，便成为了隐秘在无线网络中窥探所有人的幽灵。</p>
<p>(YY一下，刚看完幽灵那个电视剧，穿帮镜头挺多的，引用下这两个字儿吧)</p>
<h3 id="-freebuf-com-http-www-freebuf-com-"><img src="" alt=""> <strong>版权声明：转载请注明出自:</strong> <a href="http://www.freebuf.com/" target="_blank">FreebuF.COM</a></h3>
<ul>
<li><a href="">赞: 3</a></li>
<li><p><a href="">踩: 0</a>
您已评价！</p>
<p>分享到： <a href="http://v.t.sina.com.cn/share/share.php?url=http://www.freebuf.com/articles/wireless/5351.html&amp;title=%E6%B5%85%E6%9E%90%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E7%AA%A5%E6%8E%A2%E6%8A%80%E6%9C%AF" title="分享到新浪微博" target="_blank">新浪微博</a> <a href="http://v.t.qq.com/share/share.php?url=http://www.freebuf.com/articles/wireless/5351.html&amp;title=%E6%B5%85%E6%9E%90%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E7%AA%A5%E6%8E%A2%E6%8A%80%E6%9C%AF" title="分享到腾讯微博" target="_blank">腾讯微博</a> <a href="&quot;分享到豆瓣&quot;">豆瓣</a> <a href="http://share.renren.com/share/buttonshare.do?link=http://www.freebuf.com/articles/wireless/5351.html&amp;title=%E6%B5%85%E6%9E%90%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E7%AA%A5%E6%8E%A2%E6%8A%80%E6%9C%AF" title="分享到人人网" target="_blank">人人网</a> <a href="http://www.kaixin001.com/repaste/share.php?rtitle=%E6%B5%85%E6%9E%90%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E7%AA%A5%E6%8E%A2%E6%8A%80%E6%9C%AF&amp;rurl=http://www.freebuf.com/articles/wireless/5351.html%20title=" target="_blank">开心网</a> <a href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://www.freebuf.com/articles/wireless/5351.html&amp;title=%E6%B5%85%E6%9E%90%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E7%AA%A5%E6%8E%A2%E6%8A%80%E6%9C%AF" title="分享到QQ空间" target="_blank">QZone</a> <a href="http://facebook.com/share.php?u=http://www.freebuf.com/articles/wireless/5351.html&amp;title=%E6%B5%85%E6%9E%90%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E7%AA%A5%E6%8E%A2%E6%8A%80%E6%9C%AF" title="分享到facebook" target="_blank">facebook</a> <a href="http://twitter.com/share?url==http://www.freebuf.com/articles/wireless/5351.html&amp;title=%E6%B5%85%E6%9E%90%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E6%95%B0%E6%8D%AE%E7%AA%A5%E6%8E%A2%E6%8A%80%E6%9C%AF" title="分享到twitter" target="_blank">twitter</a></p>
<h3 id="-">相关文章</h3>
</li>
<li><p><a href="">浅析无线网络数据窥探技术</a></p>
</li>
</ul>
<p><strong>9</strong>条评论 <strong>978</strong>人已围观</p>
<ul>
<li><a href="http://www.freebuf.com/tools/5335.html" target="_blank">渗透测试系统 – NETSECLOS V4.0发布</a></li>
</ul>
<p><strong>8</strong>条评论 <strong>1608</strong>人已围观</p>
<ul>
<li><a href="http://www.freebuf.com/articles/system/5265.html" target="_blank">中间人攻击-DNS欺骗</a></li>
</ul>
<p><strong>4</strong>条评论 <strong>1821</strong>人已围观</p>
<ul>
<li><a href="http://www.freebuf.com/articles/5108.html" target="_blank">攻击SharePoint</a></li>
</ul>
<p><strong>5</strong>条评论 <strong>1198</strong>人已围观</p>
<ul>
<li><a href="http://www.freebuf.com/news/5002.html" target="_blank">Skype源代码泄露（附下载地址）</a></li>
</ul>
<p><strong>16</strong>条评论 <strong>12707</strong>人已围观
 ﻿</p>
<h2 id="9-comments-http-www-freebuf-com-articles-wireless-5351-html-respond-">9 Comments <a href="http://www.freebuf.com/articles/wireless/5351.html#respond" target="_blank">发表评论</a></h2>
<ol>
<li><a href="http://www.freebuf.com/?author=4" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/?author=4" target="_blank">thanks </a><img src="&quot;核心成员&quot;" alt=""> (6级) 手提酱油瓶从天而降 <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1916"></a> 2012-08-14</li>
</ol>
<p>nice！
<a href="">支持</a>(2)<a href="">反对</a> (0)
<a href="http://www.freebuf.com/articles/wireless/5351.html?replytocom=1916#respond" target="_blank">回复</a></p>
<ol>
<li><a href="http://www.freebuf.com/?author=252" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/?author=252" target="_blank">Tobe </a> (2级)  <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1917"></a> 2012-08-14</li>
</ol>
<p>请问一下，BT5我之前遇到的问题就是驱动，似乎虚拟机里很多时候会由于HOST主机的网卡驱动问题，导致无法抓到无线包，有实验过在PC/ Mac上安装虚拟机么？
<a href="">支持</a>(0)<a href="">反对</a> (0)
<a href="http://www.freebuf.com/articles/wireless/5351.html?replytocom=1917#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> Coda <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1919"></a> 2012-08-14</li>
</ul>
<p><a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1917" target="_blank">@Tobe </a>pc/mac上虚拟机里装更麻烦了，需要外置无线网卡。
<a href="">支持</a>(1)<a href="">反对</a> (0)
<a href="http://www.freebuf.com/articles/wireless/5351.html?replytocom=1919#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=252" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/?author=252" target="_blank">Tobe </a> (2级)  <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1922"></a> 2012-08-14</li>
</ul>
<p><a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1919" target="_blank">@Coda</a> 比如什么类型的外置网卡，有推荐么？
<a href="">支持</a>(0)<a href="">反对</a> (0)</p>
<ul>
<li><img src="" alt=""> sunshineg <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1925"></a> 2012-08-14</li>
</ul>
<p><a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1919" target="_blank">@Tobe</a> 跑Pin还是8187L的卡。稳定连接用3070的卡。建议上无线城的卡，做工和质量绝非杂牌山寨可比拟。地址如下：
<a href="http://www.wifly-city.com.tw/" target="_blank"><a href="http://www.wifly-city.com.tw/">http://www.wifly-city.com.tw/</a></a></p>
<p><a href="">支持</a>(1)<a href="">反对</a> (0)</p>
<ul>
<li><a href="http://www.freebuf.com/?author=131" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/?author=131" target="_blank">Crow </a><img src="&quot;核心成员&quot;" alt=""> (5级)  <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1930"></a> 2012-08-14</li>
</ul>
<p><a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1919" target="_blank">@Coda</a>@sunshineg 正解
一般都是用外置的usb无线网卡，我是双无线在做，一个8187，一个rt3072，可以说下，双网卡无线网卡的好处，当你在无线局域网内进行D.O.S攻击后，把另一张网卡加入白名单，然后做无线AP，名字与链接的网络名一样，被攻击人链接不上原有网络，就会来链接伪造的AP，这样的话所有数据都是通过自己的机器走的，想干什么，自己说了算。
<a href="">支持</a>(3)<a href="">反对</a> (0)</p>
<ul>
<li><a href="http://www.freebuf.com/?author=48" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/?author=48" target="_blank">zeracker </a> (1级)  <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1918"></a> 2012-08-14</li>
</ul>
<p>够淫荡，期待超哥的户外渗透 <img src="" alt=":mrgreen:">
<a href="">支持</a>(1)<a href="">反对</a> (0)
<a href="http://www.freebuf.com/articles/wireless/5351.html?replytocom=1918#respond" target="_blank">回复</a></p>
<ul>
<li><img src="" alt=""> aaa <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1928"></a> 2012-08-14</li>
</ul>
<p>又是破解无线。。。。
<a href="">支持</a>(0)<a href="">反对</a> (0)
<a href="http://www.freebuf.com/articles/wireless/5351.html?replytocom=1928#respond" target="_blank">回复</a></p>
<ul>
<li><a href="http://www.freebuf.com/?author=131" target="_blank"><img src="" alt=""></a> <a href="http://www.freebuf.com/?author=131" target="_blank">Crow </a><img src="&quot;核心成员&quot;" alt=""> (5级)  <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1929"></a> 2012-08-14</li>
</ul>
<p><a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1928" target="_blank">@aaa</a>破解无线中的加密数据
<a href="">支持</a>(3)<a href="">反对</a> (0)
<a href="http://www.freebuf.com/articles/wireless/5351.html?replytocom=1929#respond" target="_blank">回复</a>
昵称
(必须)您当前尚未登录。<a href="http://www.freebuf.com/wp-login.php?redirect_to=http%3A%2F%2Fwww.freebuf.com%2Farticles%2Fwireless%2F5351.html" title="登陆" target="_blank">登陆</a>？注册</p>
<p>邮箱
必须(保密)
网址</p>
<p>发表言论前，请滑动滚动条解锁
<a href="">表情</a><a href="">插代码</a><a href="">粗体</a><a href="">斜体</a><a href="">删除线</a><a href="">下划线</a><a href="">引用</a><a href="">链接</a><a href="">插图</a></p>
<p><a href="&quot;mrgreen&quot;"><img src="" alt=""></a><a href="&quot;razz&quot;"><img src="" alt=""></a><a href="&quot;sad&quot;"><img src="" alt=""></a><a href="&quot;smile&quot;"><img src="" alt=""></a><a href="&quot;oops&quot;"><img src="" alt=""></a><a href="&quot;grin&quot;"><img src="" alt=""></a><a href="&quot;eek&quot;"><img src="" alt=""></a><a href="&quot;???&quot;"><img src="" alt=""></a><a href="&quot;cool&quot;"><img src="" alt=""></a><a href="&quot;lol&quot;"><img src="" alt=""></a><a href="&quot;mad&quot;"><img src="" alt=""></a><a href="&quot;twisted&quot;"><img src="" alt=""></a><a href="&quot;roll&quot;"><img src="" alt=""></a><a href="&quot;wink&quot;"><img src="" alt=""></a><a href="&quot;idea&quot;"><img src="" alt=""></a><a href="&quot;arrow&quot;"><img src="" alt=""></a><a href="&quot;neutral&quot;"><img src="" alt=""></a><a href="&quot;cry&quot;"><img src="" alt=""></a><a href="&quot;?&quot;"><img src="" alt=""></a><a href="&quot;evil&quot;"><img src="" alt=""></a><a href="&quot;shock&quot;"><img src="" alt=""></a><a href="&quot;!&quot;"><img src="" alt=""></a>
正在提交, 请稍候...</p>
<p>/#</p>
<p><a href="">取消</a>   有人回复时邮件通知我</p>
<h3 id="-hot-comments-"><strong>热门评论**</strong>Hot Comments**</h3>
<p><a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1929" target="_blank">Crow</a> @ 2012-08-14 11:05:37</p>
<p><a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1928" target="_blank">@aaa</a>破解无线中的加密数据
<a href="">支持</a> (3) <a href="">反对</a> (0) <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1930" target="_blank">Crow</a> @ 2012-08-14 11:09:36</p>
<p><a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1919" target="_blank">@Coda</a>@sunshineg 正解 一般都是用外置的usb无线网卡，我是双无线在做，一个8187，一个rt3072，可以说下，双网卡无线网卡的好处，当你在无线局域网内进行D.O.S攻击后，把另一张网卡加入白名单，然后做无线AP，名字与链接的网络名一样，被攻击人链接不上原有网络，就会来链接伪造的AP，这样的话所有数据都是通过自己的机器走的，想干什么，自己说了算。
<a href="">支持</a> (3) <a href="">反对</a> (0) <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1916" target="_blank">thanks</a> @ 2012-08-14 09:44:29</p>
<p>nice！
<a href="">支持</a> (2) <a href="">反对</a> (0) <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1918" target="_blank">zeracker</a> @ 2012-08-14 10:16:50</p>
<p>够淫荡，期待超哥的户外渗透 <img src="" alt=":mrgreen:">
<a href="">支持</a> (1) <a href="">反对</a> (0) <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1919" target="_blank">Coda</a> @ 2012-08-14 10:20:24</p>
<p><a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1917" target="_blank">@Tobe </a>pc/mac上虚拟机里装更麻烦了，需要外置无线网卡。
<a href="">支持</a> (1) <a href="">反对</a> (0) <a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1925" target="_blank">sunshineg</a> @ 2012-08-14 10:43:02</p>
<p><a href="http://www.freebuf.com/articles/wireless/5351.html#comment-1919" target="_blank">@Tobe</a> 跑Pin还是8187L的卡。稳定连接用3070的卡。建议上无线城的卡，做工和质量绝非杂牌山寨可比拟。地址如下： <a href="http://www.wifly-city.com.tw/" target="_blank">http://www.wifly-city.com.tw/</a>
<a href="">支持</a> (1) <a href="">反对</a> (0)</p>
<h3 id="-new-posts-"><strong>最新发布**</strong>New Posts**</h3>
<ul>
<li><a href="http://www.freebuf.com/news/5378.html" title="卡巴斯基寻民间牛人帮助破解高斯(Gauss)神秘Payload" target="_blank">卡巴斯基寻民间牛人帮助破解高斯(Gauss)神秘Payload</a></li>
<li><a href="http://www.freebuf.com/tools/5369.html" title="盲注（Blind SQL Injection）工具—BBQSQL v1.0.0" target="_blank">盲注（Blind SQL Injection）工具—BBQSQL v1.0.0</a></li>
<li><a href="http://www.freebuf.com/news/5364.html" title="计算机内存在关机后仍会泄露信息" target="_blank">计算机内存在关机后仍会泄露信息</a></li>
<li><a href="http://www.freebuf.com/tools/5361.html" title="34款Firefox渗透测试插件" target="_blank">34款Firefox渗透测试插件</a></li>
<li><a href="http://www.freebuf.com/tools/5363.html" title="BackTrack5 R3发布" target="_blank">BackTrack5 R3发布</a></li>
<li><a href="&quot;浅析无线网络数据窥探技术&quot;">浅析无线网络数据窥探技术</a></li>
<li><a href="http://www.freebuf.com/news/5358.html" title="性骚扰是黑客文化的一部分？" target="_blank">性骚扰是黑客文化的一部分？</a></li>
<li><a href="http://www.freebuf.com/others/5357.html" title="freebuf安全周刊8月6日-8月12日" target="_blank">freebuf安全周刊8月6日-8月12日</a></li>
<li><a href="http://www.freebuf.com/tools/5352.html" title="一个“神奇”的工具：把 JavaScript 代码转为 ()[]{}!+ 字符" target="_blank">一个“神奇”的工具：把 JavaScript 代码转为 ()[]{}!+ 字符</a></li>
<li><a href="http://www.freebuf.com/articles/web/5349.html" title="POST/GET参数名称注射" target="_blank">POST/GET参数名称注射</a>
All of the material and the informations available on freebuf. com is for informative purpose. freebuf.com declines all responsibilities from the damage that may be done of it, consequently it does not encourage who might use it for illegal purposes.</li>
</ul>
<h3 id="freebuf-com">FREEBUF.COM</h3>
<p><a href="http://www.freebuf.com/dis" target="_blank">免责声明</a> <a href="http://www.freebuf.com/others/864.html" target="_blank">关于我们</a> <a href="mailto:freebuf@gmail.com">建议反馈</a> <a href="http://www.freebuf.com/contact" target="_blank">联系我们</a> <a href="http://www.freebuf.com/newsend" target="_blank">我要投稿</a></p>
<p>Copyright @ 2012 WWW.FREEBUF.COM All Rights Reserved <a href=""></a></p>
<p>FreebuF.COM</p>
<p>用户名</p>
<p>密码</p>
<p>Remember Me</p>
<p><a href="http://www.freebuf.com/wp-login.php?action=register" target="_blank">Register</a> | <a href="http://www.freebuf.com/wp-login.php?action=lostpassword" title="Password Lost and Found" target="_blank">Lost your password?</a>
Register</p>
<p>用户名</p>
<p>邮箱</p>
<p>密码(至少6位)</p>
<p>验证码:
看不清？<a href="">点击更换</a></p>
<p><img src="&quot;看不清?点击更换&quot;" alt="看不清?点击更换"></p>
<p><a href="http://www.freebuf.com/wp-login.php" target="_blank">登陆</a> | <a href="http://www.freebuf.com/wp-login.php?action=lostpassword" title="Password Lost and Found" target="_blank">忘记密码？</a>
Reset Password</p>
<p>Username or E-mail:</p>
<p><a href="http://www.freebuf.com/wp-login.php" target="_blank">登陆</a>| <a href="http://www.freebuf.com/wp-login.php?action=register" target="_blank">注册</a>
<a href="http://www.freebuf.com/articles/wireless/5351.html#prev" title="previous" target="_blank"></a><a href="http://www.freebuf.com/articles/wireless/5351.html#next" title="next"></a></p>
<p>prev
next</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span><span class="breadcrumb"><li><a href="/categories/安全/">安全</a></li><li><a href="/categories/安全/无线/">无线</a></li></span></span> | <span class="tags">Tagged <a href="/tags/安全/" class="label label-primary">安全</a><a href="/tags/无线/" class="label label-success">无线</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全-无线--浅析无线网络数据窥探技术-FreebuFCOM/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全-无线--浅析无线网络数据窥探技术-FreebuFCOM" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/79/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/77/">77</a></li><li><a class="page-number" href="/page/78/">78</a></li><li><a class="page-number" href="/page/79/">79</a></li><li class="active"><li><span class="page-number current">80</span></li><li><a class="page-number" href="/page/81/">81</a></li><li><a class="page-number" href="/page/82/">82</a></li><li><a class="page-number" href="/page/83/">83</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/81/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 16:55:36</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
