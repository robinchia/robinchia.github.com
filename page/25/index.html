
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 25 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--KnapsackProblem/">KnapsackProblem</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--KnapsackProblem/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="knapsackproblem">KnapsackProblem</h1>
<h1 id="-algorithm-gossip-knapsack-problem-">[Algorithm Gossip: 背包问题（Knapsack Problem）]</h1>
<h2 id="-">说明</h2>
<p>假设有一个背包的负重最多可达8公斤，而希望在背包中装入负重范围内可得之总价物品，假设是水果好了，水果的编号、单价与重量如下所示：
0 李子 4KG NT$4500 1 苹果 5KG NT$5700 2 橘子 2KG NT$2250 3 草莓 1KG NT$1100 4 甜瓜 6KG NT$6700</p>
<h2 id="-">解法</h2>
<p>背包问题是关于最佳化的问题，要解最佳化问题可以使用“动态规划”（Dynamic programming），从空集合开始，每增加一个元素就先求出该阶段的最佳解，直到所有的元素加入至集合中，最后得到的就是最佳解。
以背包问题为例，我们使用两个阵列value与item，value表示目前的最佳解所得之总价，item表示最后一个放至背包的水果，假设有负重量 1～8的背包8个，并对每个背包求其最佳解。
逐步将水果放入背包中，并求该阶段的最佳解：</p>
<ul>
<li><p>放入李子
背包负重 1 2 3 4 5 6 7 8 value ０ ０ ０ 4500 4500 4500 4500 9000 item － － － ０ ０ ０ ０ ０</p>
</li>
<li><p>放入苹果
背包负重 1 2 3 4 5 6 7 8 value ０ ０ ０ 4500 5700 5700 5700 9000 item － － － ０ 1 1 1 ０</p>
</li>
<li><p>放入橘子
背包负重 1 2 3 4 5 6 7 8 value ０ 2250 2250 4500 5700 6750 7950 9000 item － 2 2 ０ 1 2 2 ０</p>
</li>
<li><p>放入草莓
背包负重 1 2 3 4 5 6 7 8 value 1100 2250 3350 4500 5700 6800 7950 9050 item 3 2 3 ０ 1 3 2 3</p>
</li>
<li><p>放入甜瓜
背包负重 1 2 3 4 5 6 7 8 value 1100 2250 3350 4500 5700 6800 7950 9050 item 3 2 3 ０ 1 3 2 3
由最后一个表格，可以得知在背包负重8公斤时，最多可以装入9050元的水果，而最后一个装入的 水果是3号，也就是草莓，装入了草莓，背包只能再放入7公斤（8-1）的水果，所以必须看背包负重7公斤时的最佳解，最后一个放入的是2号，也就 是橘子，现在背包剩下负重量5公斤（7-2），所以看负重5公斤的最佳解，最后放入的是1号，也就是苹果，此时背包负重量剩下0公斤（5-5），无法 再放入水果，所以求出最佳解为放入草莓、橘子与苹果，而总价为9050元。</p>
</li>
</ul>
<h2 id="-">实作</h2>
<ul>
<li>Java
class Fruit {
private String name;
private int size;
private int price;
public Fruit(String name, int size, int price) {
this.name = name;
this.size = size;
this.price = price;
}
public String getName() {
return name;
}
public int getPrice() {
return price;
}
public int getSize() {
return size;
}
}
public class Knapsack {
public static void main(String[] args) {
final int MAX = 8;
final int MIN = 1;
int[] item = new int[MAX+1];
int[] value = new int[MAX+1];
Fruit fruits[] = {
new Fruit(&quot;李子&quot;, 4, 4500),
new Fruit(&quot;苹果&quot;, 5, 5700),
new Fruit(&quot;橘子&quot;, 2, 2250),
new Fruit(&quot;草莓&quot;, 1, 1100),
new Fruit(&quot;甜瓜&quot;, 6, 6700)};
for(int i = 0; i &lt; fruits.length; i++) {
for(int s = fruits[i].getSize(); s &lt;= MAX; s++) {
int p = s - fruits[i].getSize();
int newvalue = value[p] +
fruits[i].getPrice();
if(newvalue &gt; value[s]) {// 找到阶段最佳解
value[s] = newvalue;
item[s] = i;
}
}
}
System.out.println(&quot;物品\t价格&quot;);
for(int i = MAX;
i &gt;= MIN;
i = i - fruits[item[i]].getSize()) {
System.out.println(fruits[item[i]].getName()+
&quot;\t&quot; + fruits[item[i]].getPrice());
}
System.out.println(&quot;合计\t&quot; + value[MAX]);
}
}</li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/AlgorithmGossip/">AlgorithmGossip</a></li></span></span> | <span class="tags">Tagged <a href="/tags/AlgorithmGossip/" class="label label-primary">AlgorithmGossip</a></span> | <span class="time">recent updated:<time title="2014-03-07 10:38:41"datetime="2014-03-07 10:38:41"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--KnapsackProblem/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-AlgorithmGossip-AlgorithmGossip--KnapsackProblem" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--HeapSort/">HeapSort</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--HeapSort/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="heapsort">HeapSort</h1>
<h1 id="-algorithm-gossip-heap-"><a href="">Algorithm Gossip: Heap 排序法 - 改良的选择排序</a></h1>
<h2 id="-">说明</h2>
<p>选择排序法的概念简单，每次从未排序部份选一最小值，插入已排序部份的后端，其时间主要花费于在整个未排序部份寻找最小值，如果能让搜寻最小值的方式加 快，选择排序法的速率也就可以加快，Heap排序法让搜寻的路径由树根至最后一个树叶，而不是整个未排序部份，因而称之为改良的选择排序法。</p>
<h2 id="-">解法</h2>
<p>Heap排序法使用Heap Tree（堆积树），树是一种资料结构，而堆积树是一个二元树，也就是每一个父节点最多只有两个子节点（关于树的详细定义还请见资料结构书籍），堆积树的 父节点若小于子节点，则称之为最小堆积（Min Heap），父节点若大于子节点，则称之为最大堆积（Max Heap），而同一层的子节点则无需理会其大小关系，例如下面就是一个堆积树：
<img src="&quot;Heap 排序&quot;" alt="Heap 排序">
可以使用一维阵列来储存堆积树的所有元素与其顺序，为了计算方便，使用的起始索引是1而不是0，索引1是树根位置，如果左子节点储存在阵列中的索引为s，则其父节点的索引为s/2，而右子节点为s+1，就如上图所示，将上图的堆积树转换为一维阵列之后如下所示：
<img src="&quot;Heap 排序&quot;" alt="Heap 排序">
首先必须知道如何建立堆积树，加至堆积树的元素会先放置在最后一个树叶节点位置，然后检查父节点是否小于子节点（最小堆积），将小的元素不断与父节点交换，直到满足堆积树的条件为止，例如在上图的堆积加入一个元素12，则堆积树的调整方式如下所示：
<img src="&quot;Heap 排序&quot;" alt="Heap 排序">
建立好堆积树之后，树根一定是所有元素的最小值，您的目的就是：</p>
<ol>
<li>将最小值取出</li>
<li>然后调整树为堆积树
不断重复以上的步骤，就可以达到排序的效果，最小值的取出方式是将树根与最后一个树叶节点交换，然后切下树叶节点，重新调整树为堆积树，如下所示：
<img src="&quot;Heap 排序&quot;" alt="Heap 排序">
调整完毕后，树根节点又是最小值了，于是我们可以重覆这个步骤，再取出最小值，并调整树为堆积树，如下所示：
<img src="&quot;Heap 排序&quot;" alt="Heap 排序">
如此重覆步骤之后，由于使用一维阵列来储存堆积树，每一次将树叶与树根交换的动作就是将最小值放至后端的阵列，所以最后阵列就是变为已排序的状态。
其实堆积在调整的过程中，就是一个选择的行为，每次将最小值选至树根，而选择的路径并不是所有的元素，而是由树根至树叶的路径，因而可以加快选择的过程， 所以Heap排序法才会被称之为改良的选择排序法。</li>
</ol>
<h2 id="-">实作</h2>
<ul>
<li><p>C
/#include <stdio.h>
/#include <stdlib.h>
/#include <time.h>
/#define MAX 10
/#define SWAP(x,y) {int t; t = x; x = y; y = t;}
void createheap(int[]);
void heapsort(int[]);
int main(void) {
int number[MAX+1] = {-1};
int i, num;
srand(time(NULL));
printf(&quot;排序前：&quot;);
for(i = 1; i &lt;= MAX; i++) {
number[i] = rand() % 100;
printf(&quot;%d &quot;, number[i]);
}
printf(&quot;\n建立堆积树：&quot;);
createheap(number);
for(i = 1; i &lt;= MAX; i++)
printf(&quot;%d &quot;, number[i]);
printf(&quot;\n&quot;);
heapsort(number);
printf(&quot;\n&quot;);
return 0;
}
void createheap(int number[]) {
int i, s, p;
int heap[MAX+1] = {-1};
for(i = 1; i &lt;= MAX; i++) {
heap[i] = number[i];
s = i;
p = i / 2;
while(s &gt;= 2 &amp;&amp; heap[p] &gt; heap[s]) {
SWAP(heap[p], heap[s]);
s = p;
p = s / 2;
}
}
for(i = 1; i &lt;= MAX; i++)
number[i] = heap[i];
}
void heapsort(int number[]) {
int i, m, p, s;
m = MAX;
while(m &gt; 1) {
SWAP(number[1], number[m]);
m--;
p = 1;
s = 2 /<em> p;
while(s &lt;= m) {
if(s &lt; m &amp;&amp; number[s+1] &lt; number[s])
s++;
if(number[p] &lt;= number[s])
break;
SWAP(number[p], number[s]);
p = s;
s = 2 /</em> p;
}
printf(&quot;\n排序中：&quot;);
for(i = MAX; i &gt; 0; i--)
printf(&quot;%d &quot;, number[i]);
}
}</p>
</li>
<li><p>Java
public class HeapSort {
public static void sort(int[] number) {
int[] tmp = new int[number.length + 1];
// 配合说明，使用一个有遍移的暂存阵列
for(int i = 1; i &lt; tmp.length; i++) {
tmp[i] = number[i-1];
}
createHeap(tmp);
int m = number.length;
while(m &gt; 1) {
swap(tmp, 1, m);
m--;
int p = 1;
int s = 2 /<em> p;
while(s &lt;= m) {
if(s &lt; m &amp;&amp; tmp[s+1] &lt; tmp[s])
s++;
if(tmp[p] &lt;= tmp[s])
break;
swap(tmp, p, s);
p = s;
s = 2 /</em> p;
}
}
// 这边将排序好的暂存阵列设定回原阵列
for(int i = 0; i &lt; number.length; i++) {
number[i] = tmp[i+1];
}
}
private static void createHeap(int[] tmp) {
int[] heap = new int[tmp.length];
for(int i = 0; i &lt; heap.length; i++)
heap[i] = -1;
for(int i = 1; i &lt; heap.length; i++) {
heap[i] = tmp[i];
int s = i;
int p = i / 2;
while(s &gt;= 2 &amp;&amp; heap[p] &gt; heap[s]) {
swap(heap, p, s);
s = p;
p = s / 2;
}
}
for(int i = 1; i &lt; tmp.length; i++)
tmp[i] = heap[i];
}
private static void swap(int[] number, int i, int j) {
int t;
t = number[i];
number[i] = number[j];
number[j] = t;
}
}</p>
</li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/AlgorithmGossip/">AlgorithmGossip</a></li></span></span> | <span class="tags">Tagged <a href="/tags/AlgorithmGossip/" class="label label-primary">AlgorithmGossip</a></span> | <span class="time">recent updated:<time title="2014-03-07 10:37:38"datetime="2014-03-07 10:37:38"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--HeapSort/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-AlgorithmGossip-AlgorithmGossip--HeapSort" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-xml-xstream--XStream使用方法总结附实例代码_JSP编程_脚本之家/">XStream使用方法总结附实例代码_JSP编程_脚本之家</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-xml-xstream--XStream使用方法总结附实例代码_JSP编程_脚本之家/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="xstream-_jsp-_-">XStream使用方法总结附实例代码<em>JSP编程</em>脚本之家</h1>
<p>页面导航： <a href="http://www.jb51.net/index.htm" target="_blank">首页</a> → <a href="http://www.jb51.net/list/index_1.htm" title="网络编程" target="_blank">网络编程</a> → <a href="http://www.jb51.net/list/list_83_1.htm" title="JSP编程" target="_blank">JSP编程</a> → 正文内容 XStream 实例 </p>
<h1 id="xstream-">XStream使用方法总结附实例代码</h1>
<p>发布：dxy 字体：[<a href="">增加</a> <a href="">减小</a>] 类型：转载 </p>
<p>XStream是一个Java对象和XML相互转换的工具，很好很强大。提供了所有的基础类型、数组、集合等类型直接转换的支持。因此XML常用于数据交换、对象序列化（这种序列化和Java对象的序列化技术有着本质的区别）。
XStream中的核心类就是XStream类，一般来说，熟悉这个类基本就够用了，如果你用的更多，估计是你设计有问题，否则不需要。 
XStream对象相当Java对象和XML之间的转换器，转换过程是双向的。创建XSteam对象的方式很简单，只需要new XStream()即可。 
Java到xml，用toXML()方法。 
Xml到Java，用fromXML()方法。 
在没有任何设置默认情况下，java到xml的映射，是java成员名对应xml的元素名，java类的全名对应xml根元素的名字。而实际中，往往是xml和java类都有了，要完成相互转换，必须进行别名映射。 
别名配置包含三种情况： 
1、类别名，用alias(String name, Class type)。 
2、类成员别名，用aliasField(String alias, Class definedIn, String fieldName) 
3、类成员作为属性别名，用 aliasAttribute(Class definedIn, String attributeName, String alias)，单独命名没有意义，还要通过useAttributeFor(Class definedIn, String fieldName) 应用到某个类上。 
别名的配置是非常重要的，但是其中有些细节问题很重要，在例子中会专门做详细说明。 
另外还有不太常用的方法： 
addImplicitCollection(Class ownerType, String fieldName)，去掉集合类型生成xml的父节点。 
registerConverter(Converter converter) ，注册一个转换器。 
如果你的xml很大，或者为了安全性，以流的方式传输，那么XStream也提供丰富的API， 
使用起来也非常简便。目前还用不到，暂不考虑。 
如果这些基本的操作还不能满足你应用的需求，XStream提供丰富的扩展点。你可以实现自己的转换器。还可以利用XStream完成更负责的功能，比如输出其他非xml格式的数据，还可以输出html，还支持XML Dom类型数据，这些应用起来稍微复杂些。当然这些不是XStream应用的重点，也不用理会，真正需要的时候再查看API和源码研究研究。 
XStream的优点很多，但是也有一些小bug，比如在定义别名中的下划线“<em>”转换为xml后会变成“_</em>”这个符号，很变态。因此，尽量避免在别名中实用任何符号，却是需要下划线的时候，可以考虑实用连接符“-”，这个没有问题。 
另外，我们的Java Bean中，常常有一些常量，在转换过程，XStream也会将这些常量转换过去，形成常量的xml节点，这显然不是想要的结果，对于常量字段，就不做转换了。 
下面给出一个非常典型的而且实用的例子，作为对总结的补充： 
package test; 
import java.util.List; 
//<em>/</em> 
/<em> Created by IntelliJ IDEA.<br> 
/</em> <b>User</b>: leizhimin<br> 
/<em> <b>Date</b>: 2008-5-22 21:10:13<br> 
/</em> <b>Note</b>: Please add comment here! 
/<em>/ 
public class Person { 
private String name; 
private String age; 
private Profile profile; 
private List<Address> addlist; 
public Person(String name, String age, Profile profile, List<Address> addlist) { 
this.name = name; 
this.age = age; 
this.profile = profile; 
this.addlist = addlist; 
} 
public String toString() { 
return &quot;Person{&quot; + 
&quot;name=&#39;&quot; + name + &#39;\&#39;&#39; + 
&quot;, age=&#39;&quot; + age + &#39;\&#39;&#39; + 
&quot;, profile=&quot; + profile + 
&quot;, addlist=&quot; + addlist + 
&#39;}&#39;; 
} 
} 
package test; 
import java.sql.Date; 
//</em>/<em> 
/</em> Created by IntelliJ IDEA.<br> 
/<em> <b>User</b>: leizhimin<br> 
/</em> <b>Date</b>: 2008-5-22 21:10:32<br> 
/<em> <b>Note</b>: Please add comment here! 
/</em>/ 
public class Profile { 
private String job; 
private String tel; 
private String remark; 
public Profile(String job, String tel, String remark) { 
this.job = job; 
this.tel = tel; 
this.remark = remark; 
} 
public String toString() { 
return &quot;Profile{&quot; + 
&quot;job=&#39;&quot; + job + &#39;\&#39;&#39; + 
&quot;, tel=&#39;&quot; + tel + &#39;\&#39;&#39; + 
&quot;, remark=&#39;&quot; + remark + &#39;\&#39;&#39; + 
&#39;}&#39;; 
} 
} 
package test; 
//<em>/</em> 
/<em> Created by IntelliJ IDEA.<br> 
/</em> <b>User</b>: leizhimin<br> 
/<em> <b>Date</b>: 2008-5-22 21:10:22<br> 
/</em> <b>Note</b>: Please add comment here! 
/<em>/ 
public class Address { 
private String add; 
private String zipcode; 
public Address(String add, String zipcode) { 
this.add = add; 
this.zipcode = zipcode; 
} 
public String toString() { 
return &quot;Address{&quot; + 
&quot;add=&#39;&quot; + add + &#39;\&#39;&#39; + 
&quot;, zipcode=&#39;&quot; + zipcode + &#39;\&#39;&#39; + 
&#39;}&#39;; 
} 
} 
package test; 
import com.thoughtworks.xstream.XStream; 
import java.util.List; 
import java.util.ArrayList; 
//</em>/<em> 
/</em> Created by IntelliJ IDEA.<br> 
/<em> <b>User</b>: leizhimin<br> 
/</em> <b>Date</b>: 2008-5-22 21:10:47<br> 
/<em> <b>Note</b>: XStream学习[<a href="http://lavasoft.blog.51cto.com" target="_blank">http://lavasoft.blog.51cto.com</a>] 
/</em>/ 
public class TestXStream { 
public static void main(String args[]) { 
test(); 
} 
public static void test() { 
System.out.println(&quot;----------XStream学习:<a href="http://lavasoft.blog.51cto.com----------" target="_blank">http://lavasoft.blog.51cto.com----------</a>&quot;); 
//目标对象 
Address address1 = new Address(&quot;郑州市经三路&quot;, &quot;450001&quot;); 
Address address2 = new Address(&quot;西安市雁塔路&quot;, &quot;710002&quot;); 
List<Address> addList = new ArrayList<Address>(); 
addList.add(address1); 
addList.add(address2); 
Profile profile = new Profile(&quot;软件工程师&quot;, &quot;13512129933&quot;, &quot;备注说明&quot;); 
Person person = new Person(&quot;熔岩&quot;, &quot;27&quot;, profile, addList); 
//转换装配 
XStream xStream = new XStream(); 
//<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em> 设置类别名 /<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/ 
xStream.alias(&quot;PERSON&quot;, test.Person.class); 
xStream.alias(&quot;PROFILE&quot;, test.Profile.class); 
xStream.alias(&quot;ADDRESS&quot;, test.Address.class); 
output(1, xStream, person); 
//<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em> 设置类成员的别名 /</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/ 
//设置Person类的name成员别名Name 
xStream.aliasField(&quot;Name&quot;, Person.class, &quot;name&quot;); 
//<em>[注意] 设置Person类的profile成员别名PROFILE,这个别名和Profile类的别名一致, 
/</em> 这样可以保持XStream对象可以从profile成员生成的xml片段直接转换为Profile成员, 
/<em> 如果成员profile的别名和Profile的别名不一致,则profile成员生成的xml片段不可 
/</em> 直接转换为Profile对象,需要重新创建XStream对象,这岂不给自己找麻烦? /<em>/ 
xStream.aliasField(&quot;PROFILE&quot;, test.Person.class, &quot;profile&quot;); 
xStream.aliasField(&quot;ADDLIST&quot;, test.Person.class, &quot;addlist&quot;); 
xStream.aliasField(&quot;Add&quot;, test.Address.class, &quot;add&quot;); 
xStream.aliasField(&quot;Job&quot;, test.Profile.class, &quot;job&quot;); 
output(2, xStream, person); 
//</em>/<em>/</em>/<em>/</em>/<em>/</em> 设置类成员为xml一个元素上的属性 /<em>/</em>/<em>/</em>/<em>/</em>/<em>/ 
xStream.useAttributeFor(Address.class, &quot;zipcode&quot;); 
//</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em> 设置属性的别名 /<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/ 
xStream.aliasAttribute(test.Address.class, &quot;zipcode&quot;, &quot;Zipcode&quot;); 
output(3, xStream, person); 
//</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em> 将xml转为java对象 /<em>/</em>/<em>/</em>/<em>/</em>×/<em>/</em>/<em>/</em>/ 
String person_xml = &quot;<PERSON>\n&quot; + 
&quot; <Name>熔岩</Name>\n&quot; + 
&quot; <age>27</age>\n&quot; + 
&quot; <PROFILE>\n&quot; + 
&quot; <Job>软件工程师</Job>\n&quot; + 
&quot; <tel>13512129933</tel>\n&quot; + 
&quot; <remark>备注说明</remark>\n&quot; + 
&quot; </PROFILE>\n&quot; + 
&quot; <ADDLIST>\n&quot; + 
&quot; <ADDRESS Zipcode=\"450001\">\n&quot; + 
&quot; <Add>郑州市经三路</Add>\n&quot; + 
&quot; </ADDRESS>\n&quot; + 
&quot; <ADDRESS Zipcode=\"710002\">\n&quot; + 
&quot; <Add>西安市雁塔路</Add>\n&quot; + 
&quot; </ADDRESS>\n&quot; + 
&quot; </ADDLIST>\n&quot; + 
&quot;</PERSON>&quot;; 
String profile_xml = &quot; <PROFILE>\n&quot; + 
&quot; <Job>软件工程师</Job>\n&quot; + 
&quot; <tel>13512129933</tel>\n&quot; + 
&quot; <remark>备注说明</remark>\n&quot; + 
&quot; </PROFILE>&quot;; 
String address_xml = &quot; <ADDRESS Zipcode=\"710002\">\n&quot; + 
&quot; <Add>西安市雁塔路</Add>\n&quot; + 
&quot; </ADDRESS>&quot;; 
//同样实用上面的XStream对象xStream 
System.out.println(xStream.fromXML(person_xml).toString()); 
System.out.println(xStream.fromXML(profile_xml).toString()); 
System.out.println(xStream.fromXML(address_xml).toString()); 
} 
public static void output(int i, XStream xStream, Object obj) { 
String xml = xStream.toXML(obj); 
System.out.println(&quot;&gt;&gt;&gt;第[ &quot; + i + &quot;]次输出\n&quot;); 
System.out.println(xml + &quot;\n&quot;); 
} 
} 
----------XStream学习:<a href="http://lavasoft.blog.51cto.com----------" target="_blank">http://lavasoft.blog.51cto.com----------</a> </p>
<blockquote>
<blockquote>
<blockquote>
<p>第[ 1]次输出 </p>
<p><PERSON> </p>
<p><name>熔岩</name> </p>
<p><age>27</age> </p>
<p><profile> </p>
<p><job>软件工程师</job> </p>
<p><tel>13512129933</tel> </p>
<p><remark>备注说明</remark> 
</profile> </p>
<p><addlist> </p>
<p><ADDRESS> </p>
<p><add>郑州市经三路</add> </p>
<p><zipcode>450001</zipcode> 
</ADDRESS> </p>
<p><ADDRESS> </p>
<p><add>西安市雁塔路</add> </p>
<p><zipcode>710002</zipcode> 
</ADDRESS> 
</addlist> 
</PERSON> 
第[ 2]次输出 </p>
<p><PERSON> </p>
<p><Name>熔岩</Name> </p>
<p><age>27</age> </p>
<p><PROFILE> </p>
<p><Job>软件工程师</Job> </p>
<p><tel>13512129933</tel> </p>
<p><remark>备注说明</remark> 
</PROFILE> </p>
<p><ADDLIST> </p>
<p><ADDRESS> </p>
<p><Add>郑州市经三路</Add> </p>
<p><zipcode>450001</zipcode> 
</ADDRESS> </p>
<p><ADDRESS> </p>
<p><Add>西安市雁塔路</Add> </p>
<p><zipcode>710002</zipcode> 
</ADDRESS> 
</ADDLIST> 
</PERSON> 
第[ 3]次输出 </p>
<p><PERSON> </p>
<p><Name>熔岩</Name> </p>
<p><age>27</age> </p>
<p><PROFILE> </p>
<p><Job>软件工程师</Job> </p>
<p><tel>13512129933</tel> </p>
<p><remark>备注说明</remark> 
</PROFILE> </p>
<p><ADDLIST> </p>
<p><ADDRESS Zipcode="450001"> </p>
<p><Add>郑州市经三路</Add> 
</ADDRESS> </p>
<p><ADDRESS Zipcode="710002"> </p>
<p><Add>西安市雁塔路</Add> 
</ADDRESS> 
</ADDLIST> 
</PERSON> 
Person{name=&#39;熔岩&#39;, age=&#39;27&#39;, profile=Profile{job=&#39;软件工程师&#39;, tel=&#39;13512129933&#39;, remark=&#39;备注说明&#39;}, addlist=[Address{add=&#39;郑州市经三路&#39;, zipcode=&#39;450001&#39;}, Address{add=&#39;西安市雁塔路&#39;, zipcode=&#39;710002&#39;}]} 
Profile{job=&#39;软件工程师&#39;, tel=&#39;13512129933&#39;, remark=&#39;备注说明&#39;} 
Address{add=&#39;西安市雁塔路&#39;, zipcode=&#39;710002&#39;} 
Process finished with exit code 0 
在实际中，类的属性很多，嵌套层次也很复杂，如果仅仅使用XStream原生API来硬编码设置别名等属性，显得太生硬也难以维护。完全可以考虑通过一个xml配置文件来定义所有用到的类的别名定义（包括其成员），然后，通过读取配置构建一个XStream的工厂，在用到时候直接去取，而不是让实用者组装。我目前的一个项目中，就是这么实现的，效果非常的好。 
下面我给出针对上面提出的问题一个解决方案： 
思想：考虑做一个过滤器，在xml转java之前，在Java转xml之后，应用这个过滤器。这个过滤器提供将xml中的“<strong>”替换为“-”，并且将xml中的不需要的节点剔除。 
在过滤之前，我实现了个转换器装配，这一步通过xml来配置，并在java中获取。 
代码就省略了，这一步很灵活，关键看你的应用了。 
为了能过滤xml，我们需要用Dom4j递归遍历xml文档。下面一些算法代码： 
//递归算法：遍历配置文件，找出所有有效的xpath 
private static void recursiveElement(Element element) { 
List<Element> elements = element.elements(); 
validXPathList.add(element.getPath()); 
if (elements.size() == 0) { 
//没有子元素 
} else { 
//有子元素 
for (Iterator<Element> it = elements.iterator(); it.hasNext();) { 
//递归遍历 
recursiveElement(it.next()); 
} 
} 
} 
//递归算法：遍历xml，标识无效的元素节点 
private static void recursiveFixElement(Element element) { 
List<Element> elements = element.elements(); 
if (!validXPathList.contains(element.getPath())) { 
element.addAttribute(&quot;delete&quot;, &quot;true&quot;); 
} 
if (elements.size() == 0) { 
//没有子元素 
} else { 
//有子元素 
for (Iterator<Element> it = elements.iterator(); it.hasNext();) { 
Element e = it.next(); 
if (!validXPathList.contains(e.getPath())) { 
e.addAttribute(&quot;delete&quot;, &quot;true&quot;); 
} 
//递归遍历 
recursiveFixElement(e); 
} 
} 
} 
//<em>/</em> 
/<em> 过滤器接口方法，转换不规范字符，剔除无效节点 
/</em> 
/<em> @param xmlStr 要过滤的xml 
/</em> @return 符合转换器要求的xml 
/*/ 
public static String filter(String xmlStr) { 
Document document = null; 
try { 
document = DocumentHelper.parseText(xmlStr.replaceAll(&quot;</strong>&quot;, &quot;_&quot;)); 
//递归的调用：标记要剔除的xml元素 
recursiveFixElement(document.getRootElement()); 
List<Node> nodeList = document.selectNodes(&quot;//@delete&quot;); 
for (Node node : nodeList) { 
node.getParent().detach(); //剔除xml元素 
} 
} catch (DocumentException e) { 
System.out.println(e.getMessage()); 
e.printStackTrace(); 
} 
return document.asXML(); 
} </p>
</blockquote>
</blockquote>
</blockquote>
<p>-</p>
<p><strong>Tags：</strong><a href="http://img.jb51.net/tag/XStream/1.htm" title="搜索关于XStream的文章" target="_blank">XStream</a> <a href="http://img.jb51.net/tag/%CA%B5%C0%FD/1.htm" title="搜索关于实例的文章" target="_blank">实例</a>
<a href="&quot;复制本文链接发给你QQ/MSN上的好友&quot;">复制链接</a><a href="">收藏本文</a><a href="">打印本文</a><a href="">关闭本文</a><a href="http://www.jb51.net/index.htm" target="_blank">返回首页</a> </p>
<p>上一篇：<a href="http://www.jb51.net/article/13684.htm" title="下载完成后页面不自动关闭的方法" target="_blank">下载完成后页面不自动关闭的方法</a></p>
<p>下一篇：<a href="http://www.jb51.net/article/27084.htm" target="_blank">java+sql2005 随机抽取试题的代码</a>
<a href="http://s.jb51.net/"></a></p>
<h2 id="-">相关文章</h2>
<ul>
<li><a href="http://www.jb51.net/article/16686.htm" title="java struts常见错误以及原因分析" target="_blank">java struts常见错误以及原因分析</a></li>
<li><a href="http://www.jb51.net/article/2657.htm" title="指南：想成为一个JSP网站程序员吗？" target="_blank">指南：想成为一个JSP网站程序员吗？</a></li>
<li><a href="http://www.jb51.net/article/2544.htm" title="实例讲解JSP Model2体系结构（上）" target="_blank">实例讲解JSP Model2体系结构（上）</a></li>
<li><a href="http://www.jb51.net/article/16653.htm" title="jsp JFreeChart使用心得与例子" target="_blank">jsp JFreeChart使用心得与例子</a></li>
<li><a href="http://www.jb51.net/article/2665.htm" title="JSP的内部对象" target="_blank">JSP的内部对象</a></li>
<li><a href="http://www.jb51.net/article/16478.htm" title="jsp Hibernate入门教程" target="_blank">jsp Hibernate入门教程</a></li>
<li><a href="http://www.jb51.net/article/2572.htm" title="使用JavaBean创建您的网上日历本(2)" target="_blank">使用JavaBean创建您的网上日历本(2)</a></li>
<li><a href="http://www.jb51.net/article/13160.htm" title="jsp中文乱码 jsp mysql 乱码的解决方法" target="_blank">jsp中文乱码 jsp mysql 乱码的解决方法</a>
<strong>友情提醒</strong>：本站文件的解压密码：<a href="http://www.jb51.net" target="_blank">www.jb51.net</a> (请使用最新的winrar)<a href="http://www.tuidc.com/" title="腾佑科技"></a></li>
</ul>
<h2 id="-">文章评论</h2>
<p>共有 <strong>0 </strong> 位脚本之家网友发表了评论<a href="http://img.jb51.net/comment.asp?id=14542" target="_blank">我来说两句</a></p>
<p><a href="http://idc567.com/" target="_blank"></a>  <a href="http://www.geisnic.com/"></a></p>
<h3 id="-">最 近 更 新</h3>
<ul>
<li><a href="http://www.jb51.net/article/2800.htm" title="为Java应用程序添加退出事件响应" target="_blank">为Java应用程序添加退出事件响应</a></li>
<li><a href="http://www.jb51.net/article/2531.htm" title="我认为JSP有问题(下)" target="_blank">我认为JSP有问题(下)</a></li>
<li><a href="http://www.jb51.net/article/17863.htm" title="jsp 页面上图片分行输出小技巧" target="_blank">jsp 页面上图片分行输出小技巧</a></li>
<li><a href="http://www.jb51.net/article/2527.htm" title="JSP教程(五)-JSP Actions的使用下" target="_blank">JSP教程(五)-JSP Actions的使用下</a></li>
<li><a href="http://www.jb51.net/article/2618.htm" title="也谈用JSP实现新郎、sohu新闻系统的技术。" target="_blank">也谈用JSP实现新郎、sohu新闻系统的技术。</a></li>
<li><a href="http://www.jb51.net/article/2770.htm" title="Java开源项目Hibernate" target="_blank">Java开源项目Hibernate</a></li>
<li><a href="http://www.jb51.net/article/2470.htm" title="一个可以防止刷新的JSP计数器" target="_blank">一个可以防止刷新的JSP计数器</a></li>
<li><a href="http://www.jb51.net/article/2712.htm" title="面向对象编程,我的思想(5)" target="_blank">面向对象编程,我的思想(5)</a></li>
<li><a href="http://www.jb51.net/article/2510.htm" title="JAVA/JSP学习系列之二(Tomcat安装)" target="_blank">JAVA/JSP学习系列之二(Tomcat安装)</a></li>
<li><a href="http://www.jb51.net/article/5296.htm" title="JDBC板块精华整理20051226" target="_blank">JDBC板块精华整理20051226</a></li>
</ul>
<h3 id="-">热 点 排 行</h3>
<ul>
<li><a href="http://www.jb51.net/article/15792.htm" title="FCKeditor使用方法(FCKeditor_2.6.3)详细使用说明" target="_blank">FCKeditor使用方法(FCKeditor_2.</a></li>
<li><a href="http://www.jb51.net/article/15976.htm" title="struts2+spring+hibernate分页代码[比较多]" target="_blank">struts2+spring+hibernate分页代</a></li>
<li><a href="http://www.jb51.net/article/16653.htm" title="jsp JFreeChart使用心得与例子" target="_blank">jsp JFreeChart使用心得与例子</a></li>
<li><a href="http://www.jb51.net/article/21204.htm" title="搭建EXTJS和STRUTS2框架(ext和struts2简单实例)" target="_blank">搭建EXTJS和STRUTS2框架(ext和st</a></li>
<li><a href="http://www.jb51.net/article/6740.htm" title="jsp生成静态页面的方法" target="_blank">jsp生成静态页面的方法</a></li>
<li><a href="http://www.jb51.net/article/13388.htm" title="Jsp页面实现文件上传下载类代码" target="_blank">Jsp页面实现文件上传下载类代码</a></li>
<li><a href="http://www.jb51.net/article/15974.htm" title="一个实用的JSP分页代码" target="_blank">一个实用的JSP分页代码</a></li>
<li><a href="http://www.jb51.net/article/6742.htm" title="JSP连接Access数据库" target="_blank">JSP连接Access数据库</a></li>
<li><a href="&quot;XStream使用方法总结附实例代码&quot;">XStream使用方法总结附实例代码</a></li>
<li><a href="http://www.jb51.net/article/16437.htm" title="response.setHeader参数、用法的介绍" target="_blank">response.setHeader参数、用法的</a></li>
</ul>
<h3 id="js-css-">Js与CSS工具</h3>
<ul>
<li><a href="http://www.jb51.net/tools/cssyasuo.shtml" target="_blank">CSS在线压缩格式化(中文)</a></li>
<li><a href="http://www.codebeautifier.com/" target="_blank">css 格式化整理工具(英文)</a></li>
<li><a href="http://www.jb51.net/csstidy/css_optimiser.php?lang=zh" target="_blank">CSS整形格式化</a></li>
<li><a href="http://tools.jb51.net/tools/js_geshihua.asp" target="_blank">JavaScript 格式化整理工具</a></li>
<li><a href="http://jsbeautifier.org/" target="_blank">jsbeautifier Js格式化整理工具(英文)</a></li>
<li><a href="http://www.phpformatter.com/" target="_blank">php 格式化整理工具(英文)</a></li>
<li><a href="http://www.jb51.net/tools/html-js.htm" target="_blank">HTML/JS互相转换工具</a></li>
<li><a href="http://www.jb51.net/tools/packer.htm" target="_blank">javascript pack加密压缩工具</a></li>
<li><a href="http://www.jb51.net/tools/jsmin/index.htm" target="_blank">JS Minifier压缩</a></li>
<li><a href="http://www.jb51.net/tools/JShunxiao.htm" target="_blank">JS混淆工具</a></li>
<li><a href="http://www.jb51.net/tools/js_Debug.htm" target="_blank">在线JS脚本校验器错误</a></li>
<li><p><a href="http://tools.jb51.net/tools/regex.asp" target="_blank">JavaScript 正则表达式在线测试工具</a></p>
<h3 id="-">代码转换工具</h3>
</li>
<li><p><a href="http://www.jb51.net/tools/base64.htm" target="_blank">Base64编码加密</a></p>
</li>
<li><a href="http://tools.jb51.net//tools/Escape.asp" target="_blank">Escape加解密</a></li>
<li><a href="http://tools.jb51.net/html_ubb.asp" target="_blank">HTML/UBB代码转换</a></li>
<li><a href="http://www.jb51.net/tools/fanjianzhi.htm" target="_blank">GB2312/BIG5繁简字转换</a></li>
<li><a href="http://www.jb51.net/tools/jingdian.shtml" target="_blank">经典小工具集 数字转换</a></li>
<li><a href="http://www.jb51.net/tools/htmlto.htm" target="_blank">HTML多功能代码转换器</a></li>
<li><a href="http://www.jb51.net/tools/xunleijm.htm" target="_blank">迅雷快车加/解密</a></li>
<li><a href="http://tools.jb51.net/tools/pinyin.asp" target="_blank">汉字转换拼音</a>
<a href="http://www.enkj.com/" target="_blank"></a> <a href="http://www.tuidc.com/"></a></li>
</ul>
<p><a href="http://www.xunbiz.com/click/click.asp?str=44717c87b8d8fc3a3e18797345b90434"></a></p>
<p>-</p>
<ul>
<li><a href="http://www.jb51.net/tools/cssyasuo.shtml" target="_blank">CSS在线压缩格式化(中文)</a></li>
<li><a href="http://www.codebeautifier.com" target="_blank">css 格式化整理工具(英文)</a></li>
<li><a href="http://www.jb51.net/csstidy/css_optimiser.php?lang=zh" target="_blank">CSS整形格式化</a></li>
<li><a href="http://tools.jb51.net/tools/js_geshihua.asp" target="_blank">JavaScript 格式化整理工具</a></li>
<li><a href="http://jsbeautifier.org" target="_blank">jsbeautifier Js格式化整理工具(英文)</a></li>
<li><a href="http://www.phpformatter.com" target="_blank">php 格式化整理工具(英文)</a></li>
<li><a href="http://www.jb51.net/tools/html-js.htm" target="_blank">HTML/JS互相转换工具</a></li>
<li><a href="http://www.jb51.net/tools/packer.htm" target="_blank">javascript pack加密压缩工具</a></li>
<li><a href="http://www.jb51.net/tools/jsmin/index.htm" target="_blank">JS Minifier压缩</a></li>
<li><a href="http://www.jb51.net/tools/JShunxiao.htm" target="_blank">JS混淆工具</a></li>
<li><a href="http://www.jb51.net/tools/js_Debug.htm" target="_blank">在线JS脚本校验器错误</a></li>
<li><p><a href="http://tools.jb51.net/tools/regex.asp" target="_blank">JavaScript 正则表达式在线测试工具</a></p>
</li>
<li><p><a href="http://www.jb51.net/tools/base64.htm" target="_blank">Base64编码加密</a></p>
</li>
<li><a href="http://tools.jb51.net//tools/Escape.asp" target="_blank">Escape加解密</a></li>
<li><a href="http://tools.jb51.net/html_ubb.asp" target="_blank">HTML/UBB代码转换</a></li>
<li><a href="http://www.jb51.net/tools/fanjianzhi.htm" target="_blank">GB2312/BIG5繁简字转换</a></li>
<li><a href="http://www.jb51.net/tools/jingdian.shtml" target="_blank">经典小工具集 数字转换</a></li>
<li><a href="http://www.jb51.net/tools/htmlto.htm" target="_blank">HTML多功能代码转换器</a></li>
<li><a href="http://www.jb51.net/tools/xunleijm.htm" target="_blank">迅雷快车加/解密</a></li>
<li><a href="http://tools.jb51.net/tools/pinyin.asp" target="_blank">汉字转换拼音</a></li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/xml/">xml</a></li></span><span class="breadcrumb"><li><a href="/categories/xml/">xml</a></li><li><a href="/categories/xml/xstream/">xstream</a></li></span></span> | <span class="tags">Tagged <a href="/tags/xml/" class="label label-primary">xml</a><a href="/tags/xstream/" class="label label-success">xstream</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-xml-xstream--XStream使用方法总结附实例代码_JSP编程_脚本之家/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-xml-xstream--XStream使用方法总结附实例代码_JSP编程_脚本之家" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--InFixPostfix/">InFixPostfix</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--InFixPostfix/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="infixpostfix">InFixPostfix</h1>
<h1 id="-algorithm-gossip-"><a href="">Algorithm Gossip: 中序式转后序式（前序式）</a></h1>
<h2 id="-">说明</h2>
<p>平常所使用的运算式，主要是将运算元放在运算子的两旁，例如a+b/d这样的式子，这称之为中序（Infix）表示式，对于人类来说，这样的式子很容易理 解，但由于电脑执行指令时是有顺序的，遇到中序表示式时，无法直接进行运算，而必须进一步判断运算的先后顺序，所以必须将中序表示式转换为另一种表示方 法。
可以将中序表示式转换为后序（Postfix）表示式，后序表示式又称之为逆向波兰表示式（Reverse polish notation），它是由波兰的数学家卢卡谢维奇提出，例如(a+b)/<em>(c+d)这个式子，表示为后序表示式时是ab+cd+/</em>。</p>
<h2 id="-">解法</h2>
<p>用手算的方式来计算后序式相当的简单，将运算子两旁的运算元依先后顺序全括号起来，然后将所有的右括号取代为左边最接近的运算子（从最内层括号开始），最后去掉所有的左括号就可以完成后序表示式，例如：
a+b/<em>d+c/d   =&gt;    ((a+(b/</em>d))+(c/d)) -&gt; bd/*+cd/+
如果要用程式来进行中序转后序，则必须使用堆叠，演算法很简单，直接叙述的话就是使用回圈，取出中序式的字元，遇运算元直接输出，堆叠运算子与左括号， ISP&gt;ICP的话直接输出堆叠中的运算子，遇右括号输出堆叠中的运算子至左括号。</p>
<h2 id="-">演算法</h2>
<p>以下是虚拟码的运算法，\0表示中序式读取完毕：
Procedure Postfix(infix) [
Loop [
op = infix(i)
case [
:x = &#39;\0&#39;:
while (stack not empty)
// output all elements in stack
end
return
:x = &#39;(&#39;:
// put it into stack
:x is operator:
while (priority(stack[top]) &gt;=
priority(op)) [
// out a element from stack
]
// save op into stack
:x = &#39;)&#39;:
while ( stack(top) != &#39;(&#39; ) [
// out a element from stack
]
top = top - 1 // not out &#39;(
:else:
// output current op
]
i++;
]
]
例如(a+b)/<em>(c+d)这个式子，依演算法的输出过程如下： OP STACK OUTPUT ( ( - a ( a + (+ a b (+ ab ) - ab+ /</em> /<em> ab+ ( /</em>( ab+ c /<em>( ab+c + /</em>(+ ab+c d /<em>(+ ab+cd ) /</em> ab+cd+ - - ab+cd+/*
如果要将中序式转为前序式，则在读取中序式时是由后往前读取，而左右括号的处理方式相反，其余不变，但输出之前必须先置入堆叠，待转换完成后再将堆叠中的 值由上往下读出，如此就是前序表示式。</p>
<h2 id="-">实作</h2>
<ul>
<li><p>C
/#include <stdio.h>
/#include <stdlib.h>
int postfix(char/<em>); // 中序转后序
int priority(char); // 决定运算子优先顺序
int main(void) {
char input[80];
printf(&quot;输入中序运算式：&quot;);
scanf(&quot;%s&quot;, input);
postfix(input);
return 0;
}
int postfix(char/</em> infix) {
int i = 0, top = 0;
char stack[80] = {&#39;\0&#39;};
char op;
while(1) {
op = infix[i];
switch(op) {
case &#39;\0&#39;:
while(top &gt; 0) {
printf(&quot;%c&quot;, stack[top]);
top--;
}
printf(&quot;\n&quot;);
return 0;
// 运算子堆叠
case &#39;(&#39;:
if(top &lt; (sizeof(stack) / sizeof(char))) {
top++;
stack[top] = op;
}
break;
case &#39;+&#39;: case &#39;-&#39;: case &#39;/<em>&#39;: case &#39;/&#39;:
while(priority(stack[top]) &gt;= priority(op)) {
printf(&quot;%c&quot;, stack[top]);
top--;
}
// 存入堆叠
if(top &lt; (sizeof(stack) / sizeof(char))) {
top++;
stack[top] = op;
}
break;
// 遇 ) 输出至 (
case &#39;)&#39;:
while(stack[top] != &#39;(&#39;) {
printf(&quot;%c&quot;, stack[top]);
top--;
}
top--; // 不输出(
break;
// 运算元直接输出
default:
printf(&quot;%c&quot;, op);
break;
}
i++;
}
}
int priority(char op) {
int p;
switch(op) {
case &#39;+&#39;: case &#39;-&#39;:
p = 1;
break;
case &#39;/</em>&#39;: case &#39;/&#39;:
p = 2;
break;
default:
p = 0;
break;
}
return p;
}</p>
</li>
<li><p>Java
public class InFix {
private static int priority(char op) {
switch(op) {
case &#39;+&#39;: case &#39;-&#39;:
return 1;
case &#39;/<em>&#39;: case &#39;/&#39;:
return 2;
default:
return 0;
}
}
public static char[] toPosfix(char[] infix) {
char[] stack = new char[infix.length];
char[] postfix = new char[infix.length];
char op;
StringBuffer buffer = new StringBuffer();
int top = 0;
for(int i = 0; i &lt; infix.length; i++) {
op = infix[i];
switch(op) {
// 运算子堆叠
case &#39;(&#39;:
if(top &lt; stack.length) {
top++;
stack[top] = op;
}
break;
case &#39;+&#39;: case &#39;-&#39;: case &#39;/</em>&#39;: case &#39;/&#39;:
while(priority(stack[top]) &gt;=
priority(op)) {
buffer.append(stack[top]);
top--;
}
// 存入堆叠
if(top &lt; stack.length) {
top++;
stack[top] = op;
}
break;
// 遇 ) 输出至 (
case &#39;)&#39;:
while(stack[top] != &#39;(&#39;) {
buffer.append(stack[top]);
top--;
}
top--; // 不输出(
break;
// 运算元直接输出
default:
buffer.append(op);
break;
}
}
while(top &gt; 0) {
buffer.append(stack[top]);
top--;
}
return buffer.toString().toCharArray();
}
public static char[] toPrefix(char[] infix) {
char[] stack = new char[infix.length];
char op;
StringBuffer buffer = new StringBuffer();
int top = 0;
for(int i = infix.length - 1; i &gt;= 0; i--) {
op = infix[i];
switch(op) {
// 运算子堆叠
case &#39;)&#39;:
if(top &lt; stack.length) {
top++;
stack[top] = op;
}
break;
case &#39;+&#39;: case &#39;-&#39;: case &#39;/<em>&#39;: case &#39;/&#39;:
while(priority(stack[top]) &gt;=
priority(op)) {
buffer.append(stack[top]);
top--;
}
// 存入堆叠
if(top &lt; stack.length) {
top++;
stack[top] = op;
}
break;
// 遇 ( 输出至 )
case &#39;(&#39;:
while(stack[top] != &#39;)&#39;) {
buffer.append(stack[top]);
top--;
}
top--; // 不输出)
break;
// 运算元直接输出
default:
buffer.append(op);
break;
}
}
while(top &gt; 0) {
buffer.append(stack[top]);
top--;
}
return buffer.reverse().toString().toCharArray();
}
public static void main(String[] args) {
String infix = &quot;(a+b)/</em>(c+d)&quot;;
System.out.println(
InFix.toPosfix(infix.toCharArray()));
System.out.println(
InFix.toPrefix(infix.toCharArray()));
}
}</p>
</li>
</ul>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/AlgorithmGossip/">AlgorithmGossip</a></li></span></span> | <span class="tags">Tagged <a href="/tags/AlgorithmGossip/" class="label label-primary">AlgorithmGossip</a></span> | <span class="time">recent updated:<time title="2014-03-07 10:37:34"datetime="2014-03-07 10:37:34"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-AlgorithmGossip-AlgorithmGossip--InFixPostfix/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-AlgorithmGossip-AlgorithmGossip--InFixPostfix" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-Nutz--Nutz的数据库事务/">Nutz的 数据库事务</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:44.000Z"> <a href="/2014/02/02/2014-02-02-Nutz--Nutz的数据库事务/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="nutz-">Nutz的 数据库事务</h1>
<p>1.数据库事务
 数据库的事务是作为单个逻辑工作单元执行的一系列操作。一个逻辑工作单元必须有四个属性，称为原子性、一致性、隔离性和持久性 (ACID) 属性，只有这样才能成为一个事务。一般来讲，隔离性是通过锁机制来实现，而其他三个特性通过日志机制实现。
 当一个数据库的某些数据由多个客户端并发访问操作的时候，可能会出现一系列的问题：(1)脏读(dirty read),(2)不可重复读(unrepeatable read),(3)幻象读(phantom read),(4)丢失更新</p>
<p>2.使用Nutz来处理事务
 在nutz中使用一个类org.nutz.trans.Trans来处理事务，使用方式如下：
Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"></a></p>
<ol>
<li>//TODO 选择事务级别   </li>
<li>int level=Connection.TRANSACTION_SERIALIZABLE;  </li>
<li>Trans.exec(level, new Atom(){  </li>
<li>@Override  </li>
<li>public void run() {  </li>
<li>//TODO 事务内的操作逻辑  </li>
<li>}     </li>
<li>});  </li>
</ol>
<p>  当然你也可是使用如下默认方式：</p>
<p>Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"></a></p>
<ol>
<li>Trans.exec(new Atom(){  </li>
<li>@Override  </li>
<li>public void run() {  </li>
<li>//TODO   </li>
<li>}  </li>
<li><p>});  </p>
<p>在这种情况下，level默认是Connection.TRANSACTION_READ_COMMITTED
注：如果你使用jdbc来直接操作事务，当然你可以在某一个位置设置保存点，如果事务失败，可以回滚到那个点，在nutz中整个事务要么成功，要么失败，全部回滚。如果你希望使用savepoint改怎么办呢，你可以这么用：</p>
</li>
</ol>
<p>Java代码  <a href="&quot;收藏这段代码&quot;"><img src="" alt="收藏代码"></a></p>
<ol>
<li>Dao dao=null;  </li>
<li>dao.run(new ConnCallback(){  </li>
<li>@Override  </li>
<li>public void invoke(Connection conn) throws Exception {  </li>
<li>// TODO 在这里面使用Connection来操作     </li>
<li>}     </li>
<li>});  </li>
</ol>
<p>3.ThreadLocal
 Nutz在实现Trans这个类的时候用到了ThreadLcoal（方便了使用者存储变量到当前线程。）,用来存储用户的每一次事务动作。具体实现请参见源代码类org.nutz.trans.Trans。 </p>
<p>来源： <a href="[http://amosleaf.iteye.com/blog/548337](http://amosleaf.iteye.com/blog/548337)">[http://amosleaf.iteye.com/blog/548337](http://amosleaf.iteye.com/blog/548337)</a></p>
<p>4、事务的嵌套</p>
<h2 id="-">设置事务的级别</h2>
<p>在 JDBC 的 java.sql.Connection 接口中定义的 setTransactionIsolation 函数可以设置事务的级别Nutz.Dao 也提供另外一个静态函数，允许你设置事务的级别:</p>
<p><strong>Trans.exec 的函数声明</strong>
public static void exec(int level, Atom... atoms);</p>
<p>这里的第一个参数 level 和 java.sql.Connection 接口中的 setTransactionIsolation 规定的 level 是一样的。下面是在 java.sql.Connection 里面关于 level 参数的 JDoc 说明：</p>
<p>它可以是下列常量中的任意一个值：</p>
<ul>
<li>Connection.TRANSACTION_READ_UNCOMMITTED</li>
<li>Connection.TRANSACTION_READ_COMMITTED</li>
<li>Connection.TRANSACTION_REPEATABLE_READ</li>
<li>Connection.TRANSACTION_SERIALIZABLE</li>
</ul>
<p><strong>注意： </strong>不能使用常量 Connection.TRANSACTION_NONE，因为它的意思是“不支持事务”</p>
<p>关于 level 参数的更多说明，请参看<a href="http://java.sun.com/javase/6/docs/api/java/sql/Connection.html#setTransactionIsolation(int" target="_blank">java.sql.Connection 的文档</a>)</p>
<p>不同的数据库，对于 JDBC 事务级别的规范，支持的力度不同。请参看相应数据库的文档，已 确定你设置的数据库事务级别是否被支持。</p>
<p><a href="http://code.google.com/p/nutz/wiki/dao_transaction#Top" target="_blank">/#Top</a></p>
<h2 id="-"><a href=""></a>事务的嵌套</h2>
<p>Nutz 的事务模板可以嵌套吗？ 答案是肯定的。事实上，Nutz 支持事务模板的无限层级嵌套。</p>
<p>这里，如果每一层嵌套，指定的事务级别有所不同，不同的数据库，可能引发不可预知的错误。所以，嵌套的事务模板的事务，将以最顶层的事务为级别为标准。就是说，如果最顶层的事务级别为 &#39;TRANSACTION_READ_COMMITTED&#39;，那么下面所包含的所有事务，无论你指定什么样的事务级别，都是 &#39;TRANSACTION_READ_COMMITTED&#39;， 这一点，由抽象类 Transaction 来保证。其 setLevel 当被设置了一个大于 0 的整数以后，将不再 接受任何其他的值。</p>
<p>你可以通过继承 Transaction 来修改这个默认的行为，当然，这个行为修改一般是没有必要的。</p>
<p>另外，你还可能需要知道，通过 Trans.setup 方法，能让整个虚拟机的 Nutz 事务操作都使用你的 Transaction 实现</p>
<p>下面我给出两个例子:</p>
<p><strong>最外层模板决定了整个事务的级别:</strong>
Trans.exec(Connection.TRANSACTION_READ_COMMITTED, new Atom(){
        public void run(){
                dao.update(xxx);
                dao.update(bbb);
                // 在下层模板，虽然你指定了新的事务级别，但是这里的事务级别还是
                // &#39;TRANSACTION_READ_COMMITTED&#39;。在一个事务中，级别一旦设定就不可更改
                Trans.exec(Connection.TRANSACTION_SERIALIZABLE, new Atom(){
                        public void run(){
                                dao.update(CCC);
                                dao.update(EEE);
                        }
                });
        }
});</p>
<p><strong>让整个函数都是事务的:</strong></p>
<p>public void updatePet(final Pet pet){
        Trans.exec(new Atom(){
                public void run(){
                        dao.update(pet);
                        dao.update(pet.getMaster());
                }
        });
}
// 在另外一个函数里，可以这么使用
public void updateDogAndCat(final Pet dog, final Pet cat){
        Trans.exec(new Atom(){
                public void run(){
                        updatePet(dog);
                        updatePet(cat);
                }
        });
}</p>
<p>来源： <a href="[http://code.google.com/p/nutz/wiki/dao_transaction](http://code.google.com/p/nutz/wiki/dao_transaction)">[http://code.google.com/p/nutz/wiki/dao_transaction](http://code.google.com/p/nutz/wiki/dao_transaction)</a>
以上需要注意的几个细节,文档还没提及: <strong>1. 数据库连接池的AutoCommit属性</strong> 对于我见到的大部分连接池和数据库驱动,默认情况下AutoCommit=true,应该是为了性能 这就导致如果用户不自行设置的话,Trans的大部分操作都是不可回滚的.故,如果使用Trans,那么务必设置AutoCommit</p>
<p><strong>2. 多个数据源的事务</strong> 大部分情况下,用户都不是使用XA驱动,故,多数据源的事务提交,在最后的提交阶段出错的话,已经执行commit操作的数据源,是不可能回滚的</p>
<p><strong>3. 子线程的事务</strong> 考虑下面的代码:
Trans.exec(new Atom(){   public void run() {       dao.insert(pet);       new MySuperPowerThread().start();       dao.count(Pet.class);   }});</p>
<p>那么MySuperPowerThread的代码并不是在事务模板中执行的,因为这里的事务不会被子线程继承</p>
<p><strong>4. 返回值问题(更新了)</strong> 使用Molecule
Molecule<object> mc = new Molecule<object>() {    public void run() {        dao.insert(pet);        setObj(dao.count(Pet.class));    }};Trans.exec(mc);System.out.println(mc.getObj());</p>
<p>来源： <a href="[http://wendal.net/324.html](http://wendal.net/324.html)">[http://wendal.net/324.html](http://wendal.net/324.html)</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/Nutz/">Nutz</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Nutz/" class="label label-primary">Nutz</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:44"datetime="2014-03-07 09:54:44"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-Nutz--Nutz的数据库事务/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-Nutz--Nutz的数据库事务" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/24/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/22/">22</a></li><li><a class="page-number" href="/page/23/">23</a></li><li><a class="page-number" href="/page/24/">24</a></li><li class="active"><li><span class="page-number current">25</span></li><li><a class="page-number" href="/page/26/">26</a></li><li><a class="page-number" href="/page/27/">27</a></li><li><a class="page-number" href="/page/28/">28</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/164/">164</a></li><li><a class="page-number" href="/page/165/">165</a></li><li><a class="extend next" href="/page/26/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Blog powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a> Theme <strong><a href='https://github.com/chenall/hexo-theme-chenall'>chenall</a></strong>(Some change in it)<span class="pull-right"> 更新时间: <em>2014-03-15 17:28:49</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
