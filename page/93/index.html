
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 93 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>æç¤º:</strong>æ‚¨çš„æµè§ˆå™¨ç‰ˆæœ¬å¤ªä½äº†,å»ºè®®å‡çº§åˆ° <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> ä»¥ä¸Š,æœ¬ç«™ä½¿ç”¨<a href="https://www.google.com/intl/zh-CN/chrome/">Chromeæµè§ˆå™¨</a>å¯ä»¥è·å¾—æœ€å¥½çš„æ˜¾ç¤ºæ•ˆæœ.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-å®‰å…¨-PHP-WordPress--WordPress-361PHPå¯¹è±¡æ³¨å…¥æ¼æ´-WooYunçŸ¥è¯†åº“/">WordPress </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:38.000Z"> <a href="/2014/02/02/2014-02-02-å®‰å…¨-PHP-WordPress--WordPress-361PHPå¯¹è±¡æ³¨å…¥æ¼æ´-WooYunçŸ¥è¯†åº“/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h2 id="-wordpress-3-6-1-php-http-drops-wooyun-org-papers-596-"><a href="http://drops.wooyun.org/papers/596" target="_blank">WordPress &lt; 3.6.1 PHP å¯¹è±¡æ³¨å…¥æ¼æ´</a></h2>
<p>2013/09/13 11:36  | <a href="http://drops.wooyun.org/author/äº”é“å£æ€æ°”" title="ç”± äº”é“å£æ€æ°” å‘å¸ƒ" target="_blank">äº”é“å£æ€æ°”</a>  </p>
<p>From:<a href="http://vagosec.org/2013/09/wordpress-php-object-injection/" target="_blank">WordPress &lt; 3.6.1 PHP Object Injection</a></p>
<h2 id="0x00-">0x00 èƒŒæ™¯</h2>
<p>å½“æˆ‘è¯»åˆ°ä¸€ç¯‡å…³äºJoomlaçš„â€œPHPå¯¹è±¡æ³¨å°„â€çš„æ¼æ´blogåï¼Œæˆ‘æŒ–æ·±äº†ä¸€ç‚¹å°±å‘ç°Stefan Esserå¤§ç¥åœ¨2010å¹´é»‘å¸½å¤§ä¼šçš„æ–‡ç« ï¼š</p>
<p><a href="http://media.blackhat.com/bh-us-10/presentations/Esser/BlackHat-USA-2010-Esser-Utilizing-Code-Reuse-Or-Return-Oriented-Programming-In-PHP-Application-Exploits-slides.pdf" target="_blank"><a href="http://media.blackhat.com/bh-us-10/presentations/Esser/BlackHat-USA-2010-Esser-Utilizing-Code-Reuse-Or-Return-Oriented-Programming-In-PHP-Application-Exploits-slides.pdf">http://media.blackhat.com/bh-us-10/presentations/Esser/BlackHat-USA-2010-Esser-Utilizing-Code-Reuse-Or-Return-Oriented-Programming-In-PHP-Application-Exploits-slides.pdf</a></a></p>
<p>è¿™ç¯‡æ–‡ç« æåˆ°äº†PHPä¸­çš„unserializeå‡½æ•°å½“æ“ä½œç”¨æˆ·ç”Ÿæˆçš„æ•°æ®çš„æ—¶å€™ä¼šäº§ç”Ÿå®‰å…¨æ¼æ´ã€‚</p>
<p>æ‰€ä»¥å‘¢ï¼ŒåŸºæœ¬æ¥è¯´ï¼Œunserializeå‡½æ•°æ‹¿åˆ°è¡¨ç°ä¸ºåºåˆ—åŒ–çš„æ•°æ®ï¼Œç„¶åå°±è§£åºåˆ—åŒ–å®ƒï¼ˆunserializeå˜›ï¼Œå½“ç„¶å°±å¹²è¿™ä¸ªå•Š~ï¼‰ä¸ºphpçš„å€¼ã€‚è¿™ä¸ªå€¼å®ƒå¯ä»¥æ˜¯resourceä¹‹å¤–çš„ä»»ä½•ç±»å‹ï¼Œå¯ä¸ºï¼ˆinteger, double, string, array, boolean, object, NULLï¼‰ï¼Œå½“è¿™ä¸ªå‡½æ•°æ“ä½œä¸€ä¸ªç”¨æˆ·ç”Ÿæˆçš„å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œåœ¨ä½ç‰ˆæœ¬çš„PHPä¸­å¯èƒ½ä¼šäº§ç”Ÿå†…å­˜æ³„éœ²çš„æ¼æ´ï¼Œå½“ç„¶è¿™ä¹Ÿä¸æ˜¯è¿™ç¯‡blogè¦å…³æ³¨çš„é—®é¢˜ã€‚å¦‚æœä½ å¯¹è¿™ä¸ªé—®é¢˜æ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥å†å»çœ‹çœ‹æˆ‘ä¸Šé¢è¯´çš„å¤§ç¥çš„æ–‡ç« ã€‚</p>
<p>å¦å¤–ä¸€ç§æ”»å‡»æ–¹å¼å‘ç”Ÿåœ¨å½“æ”»å‡»è€…çš„è¾“å…¥è¢«unserializeå‡½æ•°æ“ä½œçš„æ—¶å€™ï¼Œè¿™ç§å°±æ˜¯æˆ‘è¯´åˆ°çš„â€œPHPå¯¹è±¡æ³¨å…¥â€ã€‚åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œå¯¹è±¡ç±»å‹çš„è¢«unserializeçš„è¯ï¼Œå…è®¸æ”»å‡»è€…è®¾ç½®ä»–é€‰æ‹©å¯¹è±¡çš„å±æ€§ã€‚å½“è¿™äº›å¯¹è±¡ä¸­çš„æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šå‡ºç°ä¸€äº›æ•ˆæœï¼ˆä¾‹å¦‚ï¼šåˆ é™¤ä¸€äº›æ–‡ä»¶ï¼‰ï¼Œå½“æ”»å‡»è€…å¯ä»¥å»é€‰æ‹©å¯¹è±¡é‡Œçš„ä¸€äº›å±æ€§çš„æ—¶å€™ï¼Œä»–å°±èƒ½å¤Ÿåˆ é™¤ä¸€ä¸ªä»–æ‰€æäº¤çš„æ–‡ä»¶ã€‚</p>
<p>è®©æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­å§ï¼Œæƒ³è±¡ä»¥ä¸‹çš„ä»£ç ä¸­çš„classæ˜¯ç”¨æˆ·è‡ªå·±ç”Ÿæˆçš„å†…å®¹è¢«unserializeæ—¶è½½å…¥çš„ï¼š</p>
<p>ï¼ˆps:è€å¤–è´´å‡ºçš„ä»£ç è¯­æ³•æœ‰é—®é¢˜ï¼Œæ”¹äº†ä¸€ä¸‹æµ‹è¯•æˆåŠŸâ€¦â€¦ï¼‰
&lt;?php</p>
<p>class</p>
<p>Foo {</p>
<p>private</p>
<p>$bar</p>
<p>;</p>
<p>public</p>
<p>$file</p>
<p>;</p>
<p>public</p>
<p>function</p>
<p>__construct(</p>
<p>$fileName</p>
<p>) {</p>
<p>$this</p>
<p>-&gt;bar =</p>
<p>&#39;foobar&#39;</p>
<p>;</p>
<p>$this</p>
<p>-&gt;file =</p>
<p>$fileName</p>
<p>;</p>
<p>}</p>
<p>// ä¸€äº›å…¶ä»–çš„ä»£ç â€¦â€¦</p>
<p>public</p>
<p>function</p>
<p>__toString() {</p>
<p>return</p>
<p>file_get_contents</p>
<p>(</p>
<p>$this</p>
<p>-&gt;file);</p>
<p>}</p>
<p>}
?&gt;</p>
<p>å¦‚æœå—å®³çš„ç¼ºé™·ä»£ç åŒæ—¶è¿˜å­˜åœ¨ä»¥ä¸‹çš„ä»£ç ï¼š</p>
<p>1echo</p>
<p>unserialize(</p>
<p>$_GET</p>
<p>[</p>
<p>&#39;in&#39;</p>
<p>]);</p>
<p>è¿™æ”»å‡»è€…å°±å¯ä»¥è¯»å–ä»»æ„æ–‡ä»¶ï¼Œæ”»å‡»è€…å¯ä»¥å¦‚ä¸‹å»æ„é€ å®ƒçš„å¯¹è±¡ã€‚</p>
<p>1</p>
<p>2
3</p>
<p>4
5</p>
<p>6
7</p>
<p>8
&lt;?php</p>
<p>class</p>
<p>Foo {</p>
<p>public</p>
<p>$file</p>
<p>;</p>
<p>}
$foo</p>
<p>=</p>
<p>new</p>
<p>Foo();</p>
<p>$foo</p>
<p>-&gt;file =</p>
<p>&#39;/etc/passwd&#39;</p>
<p>;
echo</p>
<p>serialize(</p>
<p>$foo</p>
<p>);</p>
<p>?&gt;</p>
<p>ä¸Šé¢è¿™æ®µä»£ç çš„ç»“æœæ˜¯ï¼šO:3:&quot;Foo&quot;:1:{s:4:&quot;file&quot;;s:11:&quot;/etc/passwd&quot;;} ï¼Œæ”»å‡»è€…ç°åœ¨è¦åšçš„äº‹æƒ…å°±äº‹é€šè¿‡æäº¤getè¯·æ±‚åˆ°å­˜åœ¨æ¼æ´çš„é¡µé¢è§¦å‘ä»–çš„æ”»å‡»ä»£ç ã€‚è¿™ä¸ªé¡µé¢ä¼šåå‡º/etc/passwdçš„å†…å®¹æ¥ã€‚èƒ½è¯»åˆ°è¿™äº›æ–‡ä»¶çš„å†…å®¹æ€ä¹ˆçœ‹éƒ½ä¸æ˜¯ä¸€ä¸ªå¥½äº‹æƒ…ï¼Œä½ å°±æƒ³è±¡ä¸€ä¸‹ï¼Œä¸‡ä¸€ç¼ºé™·ä»£ç ä¸­çš„å‡½æ•°ä¸æ˜¯file_get_contentsè€Œæ˜¯evalå‘¢ï¼Ÿ</p>
<p>æˆ‘ç›¸ä¿¡ä¸Šé¢è¿™éƒ¨åˆ†å·²ç»èƒ½è®©äººæ˜ç™½å…è®¸ç”¨æˆ·è¾“å…¥è¿›å…¥unserializeè¿™ä¸ªå‡½æ•°å±å®³æœ‰å¤šå¤§äº†ã€‚å°±è¿PHPæ‰‹å†Œé‡Œä¹Ÿè¯´äº†ä¸è¦æŠŠç”¨æˆ·ç”Ÿæˆçš„å†…å®¹äº¤ç»™unserializeå‡½æ•°ã€‚</p>
<h3 id="-">è­¦å‘Šï¼š</h3>
<p>ä¸è¦æŠŠä¸å¯ä¿¡çš„ç”¨æˆ·è¾“å…¥äº¤ç»™unserializeï¼Œä½¿ç”¨è¯¥å‡½æ•°è§£åºåˆ—åŒ–å†…å®¹èƒ½å¯¼è‡´è®¿é—®ä¸”è‡ªåŠ¨è½½å…¥å¯¹è±¡ï¼Œæ¶æ„ç”¨æˆ·å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œä»å®‰å…¨çš„è§’åº¦ï¼Œå¦‚æœä½ æƒ³è®©ç”¨æˆ·å¯ä»¥æ ‡å‡†çš„ä¼ é€’æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨json ï¼ˆjson_encode json_decodeï¼‰ã€‚</p>
<p>å¥½ï¼Œè®©æˆ‘ä»¬ç»§ç»­è¯´è¿™äº›é—®é¢˜æ€ä¹ˆå½±å“åˆ°Wordpressã€‚</p>
<h2 id="0x01-wordpress-">0x01 wordpressçš„å®‰å…¨é—®é¢˜</h2>
<p>Stefan Esser&#39;sçš„é»‘å¸½æ¼”è®²ä¸­ï¼Œä»–æåˆ°Wordpressæ˜¯ä¸€æ¬¾ä½¿ç”¨äº†serializeå’Œunserializeå‡½æ•°çš„çŸ¥ååº”ç”¨ã€‚åœ¨ä»–çš„å¹»ç¯ç‰‡ä¸­ï¼Œunserializeç”¨æ¥æ¥æ”¶æ¥è‡ªWordpressç«™ç‚¹ä¸Šçš„æ•°æ®ã€‚æ‰€ä»¥æ”»å‡»è€…å¯ä»¥åœ¨å—å®³ç«™ç‚¹ä¸Šå‘èµ·ä¸€æ¬¡ä¸­é—´äººæ”»å‡»ã€‚ä»–å¯ä»¥ä¿®æ”¹æ¥è‡ªWordpressç«™ç‚¹çš„è¿”å›æ•°æ®ï¼ŒæŠŠä»–çš„ä»£ç åŠ è¿›å»ã€‚æœ‰è¶£çš„æ˜¯å°±åœ¨æˆ‘ç¼–å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼ŒWordpressæœ€æ–°çš„ç‰ˆæœ¬ä¹ŸåŒ…å«è¿™ä¸ªé—®é¢˜ï¼ˆè·ç¦»é‚£æ¼”è®²ä¼¼ä¹è¿‡å»ä¸‰å¹´äº†ï¼‰ï¼Œæƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæœ‰é»‘å®¢å¯ä»¥åŠ«æŒWordPress.orgçš„DNSä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…å§ã€‚</p>
<p>ç„¶è€Œï¼Œè¿™ä¹Ÿä¸æ˜¯Wordpressä½¿ç”¨è¿™ä¸ªunserializeçš„å”¯ä¸€åœ°æ–¹ï¼Œå®ƒè¿˜ç”¨äºç”¨äºåœ¨æ•°æ®åº“ä¸­æ•°æ®ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œç”¨æˆ·çš„metadataå°±è¢«åºåˆ—åŒ–åå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œmetadataçš„å–å›æ–¹å¼åœ¨wp-includes/meta.phpçš„272è¡Œçš„get_metadata()ï¼Œæˆ‘åœ¨è¿™é‡Œå¼•ç”¨ä¸€ä¸‹è¯¥å‡½æ•°çš„éƒ¨åˆ†ä»£ç ï¼ˆ292-297è¡Œï¼‰</p>
<p>if</p>
<p>( isset(</p>
<p>$meta_cache</p>
<p>[</p>
<p>$meta_key</p>
<p>]) ) {</p>
<p>if</p>
<p>(</p>
<p>$single</p>
<p>)</p>
<p>return</p>
<p>maybe_unserialize(</p>
<p>$meta_cache</p>
<p>[</p>
<p>$meta_key</p>
<p>][0] );</p>
<p>else</p>
<p>return</p>
<p>array_map</p>
<p>(</p>
<p>&#39;maybe_unserialize&#39;</p>
<p>,</p>
<p>$meta_cache</p>
<p>[</p>
<p>$meta_key</p>
<p>]);</p>
<p>}</p>
<p>åŸºæœ¬ä¸Šï¼Œè¿™ä¸ªå‡½æ•°æ‰€å¹²çš„äº‹æƒ…å°±æ˜¯å–å›æ•°æ®åº“é‡Œçš„metadataï¼ˆå®ƒæ¥è‡ªæ¯ç¯‡æ–‡ç« æˆ–ç”¨æˆ·è¾“å…¥ï¼‰ï¼Œæ•°æ®åœ¨æ•°æ®åº“ä¸­çš„wp_postmetaå’Œwp_usermetaè¡¨ä¸­ï¼Œæœ‰äº›æ•°æ®æ˜¯è¢«åºåˆ—åŒ–çš„è€Œæœ‰äº›æ²¡æœ‰è¢«åºåˆ—åŒ–ï¼Œæ‰€ä»¥maybe_unserialize()å‡½æ•°æ›¿ä»£äº†unserialize()åœ¨è¿™é‡Œæ“ä½œï¼Œè¿™ä¸ªå‡½æ•°åœ¨wp-includes/functions.phpçš„230åˆ°234è¡Œä¹‹é—´è¢«å®šä¹‰ã€‚</p>
<p>1</p>
<p>2
3</p>
<p>4
5function</p>
<p>maybe_unserialize(</p>
<p>$original</p>
<p>) {</p>
<p>if</p>
<p>( is_serialized(</p>
<p>$original</p>
<p>) )</p>
<p>//åºåˆ—åŒ–çš„æ•°æ®æ‰ä¼šèµ°åˆ°è¿™é‡Œé¢</p>
<p>return</p>
<p>@unserialize(</p>
<p>$original</p>
<p>);</p>
<p>return</p>
<p>$original</p>
<p>;
}</p>
<p>æ‰€ä»¥ï¼Œè¿™ä¸ªå‡½æ•°å¹²çš„äº‹æƒ…æ˜¯æ£€æŸ¥ç»™äºˆå®ƒçš„å€¼æ˜¯ä¸æ˜¯ä¸€ä¸ªåºåˆ—åŒ–çš„æ•°æ®ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå°±è§£åºåˆ—åŒ–ã€‚è¿™é‡Œç”¨æ¥åˆ¤æ–­æ˜¯å¦æ˜¯åºåˆ—åŒ–æ‰€ä½¿ç”¨çš„å‡½æ•°æ˜¯is_serialized()ï¼Œå®ƒçš„å®šä¹‰åœ¨åŒæ–‡ä»¶çš„247åˆ°276è¡Œä¹‹é—´ã€‚</p>
<p>function</p>
<p>is_serialized(</p>
<p>$data</p>
<p>) {</p>
<p>// å¦‚æœè¿å­—ç¬¦ä¸²éƒ½ä¸æ˜¯ï¼Œé‚£å°±ä¸æ˜¯åºåˆ—åŒ–çš„æ•°æ®äº†</p>
<p>if</p>
<p>( !</p>
<p>is_string</p>
<p>(</p>
<p>$data</p>
<p>) )</p>
<p>return</p>
<p>false;</p>
<p>$data</p>
<p>= trim(</p>
<p>$data</p>
<p>);</p>
<p>if</p>
<p>(</p>
<p>&#39;N;&#39;</p>
<p>==</p>
<p>$data</p>
<p>)</p>
<p>return</p>
<p>true;</p>
<p>$length</p>
<p>=</p>
<p>strlen</p>
<p>(</p>
<p>$data</p>
<p>);</p>
<p>if</p>
<p>(</p>
<p>$length</p>
<p>&lt; 4 )</p>
<p>return</p>
<p>false;</p>
<p>if</p>
<p>(</p>
<p>&#39;:&#39;</p>
<p>!==</p>
<p>$data</p>
<p>[1] )</p>
<p>return</p>
<p>false;</p>
<p>$lastc</p>
<p>=</p>
<p>$data</p>
<p>[</p>
<p>$length</p>
<p>-1];</p>
<p>if</p>
<p>(</p>
<p>&#39;;&#39;</p>
<p>!==</p>
<p>$lastc</p>
<p>&amp;&amp;</p>
<p>&#39;}&#39;</p>
<p>!==</p>
<p>$lastc</p>
<p>)</p>
<p>return</p>
<p>false;</p>
<p>$token</p>
<p>=</p>
<p>$data</p>
<p>[0];</p>
<p>switch</p>
<p>(</p>
<p>$token</p>
<p>) {</p>
<p>case</p>
<p>&#39;s&#39;</p>
<p>:</p>
<p>if</p>
<p>(</p>
<p>&#39;&quot;&#39;</p>
<p>!==</p>
<p>$data</p>
<p>[</p>
<p>$length</p>
<p>-2] )</p>
<p>return</p>
<p>false;</p>
<p>case</p>
<p>&#39;a&#39;</p>
<p>:</p>
<p>case</p>
<p>&#39;O&#39;</p>
<p>:</p>
<p>return</p>
<p>(bool) preg_match(</p>
<p>&quot;/^{$token}:[0-9]+:/s&quot;</p>
<p>,</p>
<p>$data</p>
<p>);</p>
<p>case</p>
<p>&#39;b&#39;</p>
<p>:</p>
<p>case</p>
<p>&#39;i&#39;</p>
<p>:</p>
<p>case</p>
<p>&#39;d&#39;</p>
<p>:</p>
<p>return</p>
<p>(bool) preg_match(</p>
<p>&quot;/^{$token}:[0-9.E-]+;\$/&quot;</p>
<p>,</p>
<p>$data</p>
<p>);</p>
<p>}</p>
<p>return</p>
<p>false;</p>
<p>}</p>
<p>WordPressæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯åºåˆ—åŒ–çš„å­—ç¬¦ä¸²ä¸ºä»€ä¹ˆé‚£ä¹ˆé‡è¦çš„åŸå› é©¬ä¸Šè¦å˜å¾—æ¸…æ™°äº†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸€ä¸ªæ”»å‡»è€…å¦‚ä½•æŠŠä»–çš„å†…å®¹æœ€ç»ˆåŠ å…¥åˆ°metadataè¡¨ä¸­çš„ã€‚æ¯ä¸ªç”¨æˆ·çš„å§“åï¼Œé›…è™IMéƒ½å­˜å‚¨åœ¨wp_usermetaè¡¨é‡Œã€‚æ‰€ä»¥æˆ‘ä»¬æŠŠè‡ªå·±çš„æ¶æ„ä»£ç åŠ åœ¨é‚£æˆ‘ä»¬å°±å¯ä»¥ææ‚æ‰WordPressï¼Œå¯¹ä¸å¯¹ï¼Ÿä½ å¯ä»¥è¯•è¯•åœ¨ä½ è¯¥å†™åå­—çš„åœ°æ–¹å†™ä¸ªi:1è¯•è¯•ï¼Œå¦‚æœè¿™ä¸ªæ²¡æœ‰è¢«è§£åºåˆ—åŒ–é‚£è¿™é‡Œåªä¼šè¿”å›ä¸€ä¸ªæˆ‘ä»¬è¾“å…¥çš„i:1ã€‚</p>
<p>éº»ç—¹çš„ï¼Œçœ‹æ¥è¦å‘å‡ ä¸ªå¤§æ‹›æ‰å¯ä»¥ææ‚WordPresså•Šã€‚è®©æˆ‘ä»¬æŒ–å¾—å†æ·±ä¸€ç‚¹ï¼Œçœ‹çœ‹ä¸ºä»€ä¹ˆè¿™ä¸ªä¸œè¥¿å°±æ²¡æœ‰ç»™è§£åºåˆ—åŒ–ã€‚åœ¨ wp-includes/meta.php ä¸­ï¼Œè¿™ä¸ªupdate_metadata() å‡½æ•°å®šä¹‰åœ¨101-164è¡Œï¼Œè¿™é‡Œæœ‰è¿™ä¸ªå‡½æ•°çš„éƒ¨åˆ†ä»£ç ã€‚</p>
<p>// â€¦</p>
<p>$meta_value</p>
<p>= wp_unslash(</p>
<p>$meta_value</p>
<p>);</p>
<p>$meta_value</p>
<p>= sanitize_meta(</p>
<p>$meta_key</p>
<p>,</p>
<p>$meta_value</p>
<p>,</p>
<p>$meta_type</p>
<p>);</p>
<p>// â€¦</p>
<p>$meta_value</p>
<p>= maybe_serialize(</p>
<p>$meta_value</p>
<p>);</p>
<p>$data</p>
<p>= compact(</p>
<p>&#39;meta_value&#39;</p>
<p>);</p>
<p>// â€¦</p>
<p>$wpdb</p>
<p>-&gt;update(</p>
<p>$table</p>
<p>,</p>
<p>$data</p>
<p>,</p>
<p>$where</p>
<p>);</p>
<p>// â€¦</p>
<p>è¿™é‡Œmaybe_serializeå‡½æ•°å¯èƒ½èƒ½è§£é‡Šä¸ºä»€ä¹ˆæˆ‘ä»¬åˆšæ‰çš„æ“ä½œæ²¡æˆåŠŸï¼Œæˆ‘ä»¬å†è·Ÿè¿›å»çœ‹çœ‹è¿™ä¸ªå‡½æ•°ï¼Œå®ƒå®šä¹‰åœ¨wp-includes/functions.phpçš„314-324è¡Œã€‚</p>
<p>function</p>
<p>maybe_serialize(</p>
<p>$data</p>
<p>) {</p>
<p>if</p>
<p>(</p>
<p>is_array</p>
<p>(</p>
<p>$data</p>
<p>) ||</p>
<p>is_object</p>
<p>(</p>
<p>$data</p>
<p>) )</p>
<p>return</p>
<p>serialize(</p>
<p>$data</p>
<p>);</p>
<p>// äºŒæ¬¡åºåˆ—åŒ–æ˜¯ä¸ºäº†å‘ä¸‹æ”¯æŒ</p>
<p>// è¯¦è§ <a href="http://core.trac.wordpress.org/ticket/12930" target="_blank">http://core.trac.wordpress.org/ticket/12930</a></p>
<p>if</p>
<p>( is_serialized(</p>
<p>$data</p>
<p>) )</p>
<p>return</p>
<p>serialize(</p>
<p>$data</p>
<p>);</p>
<p>return</p>
<p>$data</p>
<p>;</p>
<p>}</p>
<p>æ‰€ä»¥å½“æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªåºåˆ—åŒ–çš„å€¼çš„è¯ï¼Œå®ƒå°±ä¼šå†åºåˆ—åŒ–ä¸€ä¸‹ï¼Œè¿™å°±æ˜¯ç°åœ¨å‘ç”Ÿçš„æƒ…å†µï¼Œä½ çœ‹ï¼Œæ•°æ®åº“é‡Œçš„ä¸œè¥¿ä¸æ˜¯i:1;è€Œæ˜¯s:4:&quot;i:1;&quot;;ï¼Œå½“è§£åºåˆ—åŒ–çš„æ—¶å€™å®ƒå°±æ˜¾ç¤ºä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ç°åœ¨è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>ä½ æ‡‚çš„ï¼Œè¿™å¸–å­çš„å†…å®¹ä¹Ÿå­˜åœ¨æ•°æ®åº“é‡Œï¼Œä¸Šé¢è¿™å°±è¯´æ˜äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬å¤±è´¥äº†ã€‚å¦‚æœæˆ‘ä»¬ç°åœ¨æƒ³å¾€æ•°æ®åº“æ’ä¸€ä¸ªåºåˆ—åŒ–åçš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨æˆ‘ä»¬æ’å…¥æ•°æ®çš„æ—¶å€™è®©is_serialized()è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªfalseï¼Œè€Œå½“æˆ‘ä»¬å†ä»æ•°æ®é‡Œå–å®ƒçš„æ—¶å€™ï¼Œå®ƒå°±åº”è¯¥è¿”å›ä¸ªtrueäº†ã€‚</p>
<p>ä½ æ‡‚çš„ï¼ŒMysqlæ•°æ®åº“ï¼Œè¡¨å’Œå­—æ®µéƒ½æœ‰ä»–ä»¬è‡ªå·±çš„charsetå’Œcollation(å­—ç¬¦é›†å’Œå®šåºï¼‰ã€‚WordPresså‘¢ï¼Œé»˜è®¤çš„å­—ç¬¦é›†æ˜¯UTF-8ã€‚ä»è¿™ä¸ªåå­—å°±çœ‹çš„å‡ºæ¥ï¼Œè¿™ä¸ªå­—ç¬¦é›†å®ƒä¸æ”¯æŒå…¨éƒ¨çš„Unicodeå­—ç¬¦ï¼Œä½ è¦æ˜¯å¯¹è¿™ä¸ªæ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥çœ‹çœ‹Mathias Bynensçš„è¿™ç¯‡æ–‡ç« ï¼š<a href="http://mathiasbynens.be/notes/mysql-utf8mb4ï¼Œè¿™æ–‡ç« æ•™äº†æˆ‘UTF-8çš„è¡¨å‚¨å­˜ä¸äº†Unicodeç¼–ç åŒºé—´æ˜¯U+010000åˆ°U+10FFFFçš„å­—ç¬¦ã€‚æ‰€ä»¥å½“æˆ‘ä»¬åœ¨è¿™ä¸ªæƒ…å†µä¸‹å°è¯•ä¿å­˜è¿™äº›å­—ç¬¦å‘¢ï¼Ÿæ˜¾è€Œæ˜“è§ï¼ŒåŒ…æ‹¬è¿™ä¸ªå­—ç¬¦å’Œè¿™ä¸ªå­—ç¬¦ä¹‹åçš„å†…å®¹éƒ½ä¼šè¢«å¿½ç•¥æ‰ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬å°è¯•æ’å…¥" target="_blank">http://mathiasbynens.be/notes/mysql-utf8mb4ï¼Œè¿™æ–‡ç« æ•™äº†æˆ‘UTF-8çš„è¡¨å‚¨å­˜ä¸äº†Unicodeç¼–ç åŒºé—´æ˜¯U+010000åˆ°U+10FFFFçš„å­—ç¬¦ã€‚æ‰€ä»¥å½“æˆ‘ä»¬åœ¨è¿™ä¸ªæƒ…å†µä¸‹å°è¯•ä¿å­˜è¿™äº›å­—ç¬¦å‘¢ï¼Ÿæ˜¾è€Œæ˜“è§ï¼ŒåŒ…æ‹¬è¿™ä¸ªå­—ç¬¦å’Œè¿™ä¸ªå­—ç¬¦ä¹‹åçš„å†…å®¹éƒ½ä¼šè¢«å¿½ç•¥æ‰ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬å°è¯•æ’å…¥</a></p>
<p>fooğŒ†bar
çš„æ—¶å€™ï¼ŒMysqlä¼šå¿½ç•¥</p>
<p>ğŒ†bar
è€Œä¿å­˜ä¸ºfooã€‚</p>
<p>è¿™ä¸ªè¿·é¢˜çš„æœ€åä¸€éƒ¨åˆ†å°±æ˜¯æˆ‘ä»¬éœ€è¦æ’å…¥ä¸€ä¸ªç”¨ä»¥ä¸€ä¼šå„¿è§£åºåˆ—åŒ–çš„å†…å®¹ï¼Œä¸ºäº†æµ‹è¯•è¿™ä¸ªï¼Œä½ å¯ä»¥æ’å…¥</p>
<p>1:iğŒ†
ä¸ºä½ çš„åå­—ã€‚æ­£å¦‚æ‰€è§åˆ°çš„ï¼Œç»“æœæ˜¯1ï¼Œæ„å‘³ç€ä½ çš„è¾“å…¥è¢«è§£åºåˆ—åŒ–äº†ï¼Œå¦‚æœä½ è¿˜ä¸ç›¸ä¿¡æˆ‘ï¼Œä½ è¯•ç€è¾“å…¥ä¸€ä¸ªç©ºæ•°ç»„çš„åºåˆ—åŒ–å¹¶ä¸”ä»¥è¯¥å­—ç¬¦ç»“å°¾ï¼š</p>
<p>a:0:{}ğŒ†
ã€‚è¿™ä¸ªç»“æœæ˜¯Arrayã€‚</p>
<p>è®©æˆ‘ä»¬ç»§ç»­</p>
<p>maybe_serialized(&#39;i:1;ğŒ†&#39;)
æ’å…¥äº†æ•°æ®åº“ã€‚WordPressä¸è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå·²åºåˆ—åŒ–çš„æ•°æ®ï¼Œå› ä¸ºå®ƒä¸æ˜¯;æˆ–è€…}ç»“å°¾çš„ã€‚å®ƒä¼šè¿”å›</p>
<p>i:1;ğŒ†
ï¼Œå½“æ’å…¥æ•°æ®åº“çš„æ—¶å€™ï¼Œå®ƒçš„å€¼æ˜¯i:1ï¼Œå½“å®ƒä»æ•°æ®åº“å–å›çš„æ—¶å€™ï¼Œå®ƒæœ‰äº†;æœ€ä¸ºæœ€åä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥å®ƒå¯ä»¥è§£åºåˆ—åŒ–æˆåŠŸã€‚ç¢‰å ¡äº†ã€‚æ¼æ´ã€‚</p>
<h2 id="0x02-wordpress-">0x02 WordPress åˆ©ç”¨</h2>
<p>ç°åœ¨æˆ‘ä»¬å±•ç¤ºäº†WordPresså­˜åœ¨PHPå¯¹è±¡æ³¨å…¥æ¼æ´ã€‚è®©æˆ‘ä»¬å°è¯•åˆ©ç”¨å®ƒã€‚æ‰€ä»¥ä¸ºäº†åˆ©ç”¨è¯¥æ¼æ´ï¼ˆé€šè¿‡æ³¨å…¥å¯¹è±¡çš„æ–¹æ³•ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ªç¬¦åˆä»¥ä¸‹æ¡ä»¶çš„classï¼š</p>
<p>1ï¼Œå†…æœ‰â€œæœ‰ç”¨â€çš„æ–¹æ³•å¯è¢«è°ƒç”¨ã€‚
2ï¼Œå­˜åœ¨è¯¥å¯¹è±¡çš„ç±»å·²ç»è¢«åŒ…å«äº†ã€‚</p>
<p>å½“ä¸€ä¸ªå¯¹è±¡è¢«è§£åºåˆ—åŒ–çš„æ—¶å€™ï¼Œ__wakeupå‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œè¿™è¢«ç§°ä½œPHPçš„é­”æœ¯æ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç¡®å®šä¼šè¢«è°ƒç”¨çš„æ–¹æ³•ï¼Œå®é™…ä¸Šè¿™äº›å‡½æ•°ä¼šæ›´å¤šå†™äº›ï¼Œæˆ‘å†™äº†ä¸€ä¸ªä»¥ä¸‹çš„classæ¥è·å–è¢«è°ƒç”¨çš„classåˆ°/tmp/fumc.logã€‚
&lt;?php</p>
<p>class</p>
<p>Foo {</p>
<p>public</p>
<p>static</p>
<p>function</p>
<p>logFuncCall(</p>
<p>$funcName</p>
<p>) {</p>
<p>$fh</p>
<p>=</p>
<p>fopen</p>
<p>(</p>
<p>&#39;/tmp/func.log&#39;</p>
<p>,</p>
<p>&#39;a&#39;</p>
<p>);</p>
<p>fwrite(</p>
<p>$fh</p>
<p>,</p>
<p>$funcName</p>
<p>.</p>
<p>&quot;\n&quot;</p>
<p>);</p>
<p>fclose(</p>
<p>$fh</p>
<p>);</p>
<p>}</p>
<p>public</p>
<p>function</p>
<p>__construct() { Foo::logFuncCall(</p>
<p>&#39;__construct(&#39;</p>
<p>.json_encode(func_get_args()).</p>
<p>&#39;)&#39;</p>
<p>);}</p>
<p>public</p>
<p>function</p>
<p>__destruct() { Foo::logFuncCall(</p>
<p>&#39;__destruct()&#39;</p>
<p>);}</p>
<p>public</p>
<p>function</p>
<p>__get(</p>
<p>$name</p>
<p>) { Foo::logFuncCall(</p>
<p>&quot;__get($name)&quot;</p>
<p>);</p>
<p>return</p>
<p>&quot;Foo&quot;</p>
<p>;}</p>
<p>public</p>
<p>function</p>
<p>__set(</p>
<p>$name</p>
<p>,</p>
<p>$value</p>
<p>) { Foo::logFuncCall(</p>
<p>&quot;__set($name, value)&quot;</p>
<p>);}</p>
<p>public</p>
<p>function</p>
<p>__isset(</p>
<p>$name</p>
<p>) { Foo::logFuncCall(</p>
<p>&quot;__isset($name)&quot;</p>
<p>);</p>
<p>return</p>
<p>true;}</p>
<p>public</p>
<p>function</p>
<p>__unset(</p>
<p>$name</p>
<p>) { Foo::logFuncCall(</p>
<p>&quot;__unset($name)&quot;</p>
<p>);}</p>
<p>public</p>
<p>function</p>
<p>__sleep() { Foo::logFuncCall(</p>
<p>&quot;__sleep()&quot;</p>
<p>);</p>
<p>return</p>
<p>array</p>
<p>();}</p>
<p>public</p>
<p>function</p>
<p>__wakeup() { Foo::logFuncCall(</p>
<p>&quot;__wakeup()&quot;</p>
<p>);}</p>
<p>public</p>
<p>function</p>
<p>__toString() { Foo::logFuncCall(</p>
<p>&quot;__toString()&quot;</p>
<p>);</p>
<p>return</p>
<p>&quot;Foo&quot;</p>
<p>;}</p>
<p>public</p>
<p>function</p>
<p>__invoke(</p>
<p>$a</p>
<p>) { Foo::logFuncCall(</p>
<p>&quot;__invoke(&quot;</p>
<p>. json_encode(func_get_args()).</p>
<p>&quot;)&quot;</p>
<p>);}</p>
<p>public</p>
<p>function</p>
<p>__call(</p>
<p>$a</p>
<p>,</p>
<p>$b</p>
<p>) { Foo::logFuncCall(</p>
<p>&quot;__call(&quot;</p>
<p>. json_encode(func_get_args()).</p>
<p>&quot;)&quot;</p>
<p>);}</p>
<p>public</p>
<p>static</p>
<p>function</p>
<p>__callStatic(</p>
<p>$a</p>
<p>,</p>
<p>$b</p>
<p>) { Foo::logFuncCall(</p>
<p>&quot;__callStatic(&quot;</p>
<p>. json_encode(func_get_args()).</p>
<p>&quot;)&quot;</p>
<p>);}</p>
<p>public</p>
<p>static</p>
<p>function</p>
<p>__set_state(</p>
<p>$a</p>
<p>) { Foo::logFuncCall(</p>
<p>&quot;__set_state(&quot;</p>
<p>. json_encode(func_get_args()).</p>
<p>&quot;)&quot;</p>
<p>);</p>
<p>return</p>
<p>null;}</p>
<p>public</p>
<p>function</p>
<p>__clone() { Foo::logFuncCall(</p>
<p>&quot;__clone()&quot;</p>
<p>);}</p>
<p>}
?&gt;</p>
<p>ä¸ºäº†åˆ—å‡ºè¿™äº›è¢«è°ƒç”¨çš„å‡½æ•°ï¼Œé¦–å…ˆè¦ç¡®è®¤è¿™ä¸ªå‡½æ•°åœ¨è§£åºåˆ—åŒ–å‘ç”Ÿçš„æ—¶å€™æ˜¯è¢«å¼•å…¥è¢«åŒ…å«è¿‡çš„ï¼ˆphpä¸­çš„include requireç­‰ï¼‰ã€‚ä½ å¯ä»¥æŠŠrequire_once(&#39;foo.php&#39;)åŠ åˆ°functions.phpçš„é¡¶ç«¯ã€‚æ¥ä¸‹æ¥ï¼ŒæŠŠåå­—æ”¹ä¸ºO:3:&quot;Foo&quot;:0:{}ğŒ†æ¥å°è¯•åˆ©ç”¨è¿™ä¸ªPHPå¯¹è±¡æ³¨å…¥æ¼æ´ï¼Œå½“åˆ·æ–°é¡µé¢åï¼Œä½ å›çœ‹åˆ°ä½ çš„åå­—å˜æˆäº†Fooï¼Œè¿™ä¹Ÿå°±æ˜¯æ„å‘³ç€è¿™æ˜¯ä¸Šé¢é‚£classä¸­__toString()å‡½æ•°çš„è¿”å›ï¼Œç„¶åè®©æˆ‘ä»¬çœ‹çœ‹éƒ½æœ‰å“ªäº›å‡½æ•°è¢«è°ƒç”¨äº†ã€‚</p>
<p>$ sort -u /tmp/func.log <strong>destruct() </strong>toString() __wakeup()</p>
<p>ç»™å‡ºäº†æˆ‘ä»¬ä¸‰ä¸ªå‡½æ•°ï¼š<strong>wakeup(), </strong>destruct() å’Œ __toString()</p>
<p>å¾ˆä¸å¹¸çš„æ˜¯æˆ‘ä¸èƒ½å†WordPressä¸­æ‰¾åˆ°ä¸€ä¸ªè½½å…¥äº†å¹¶ä¸”è§£åºåˆ—åŒ–æ—¶èƒ½è¢«åˆ©ç”¨é€ æˆå½±å“çš„ç±»ã€‚æ‰€ä»¥ä¸æ˜¯ä¸€ä¸ªWordPressçš„å®‰å…¨é—®é¢˜ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯èƒ½åˆ©ç”¨çš„åœ°æ–¹ã€‚</p>
<p>æ‰€ä»¥æ˜¯ä¸æ˜¯WordPressæ˜¯æœ‰å®‰å…¨éšæ‚£çš„ï¼Œä½†æ˜¯æ— æ³•è¢«åˆ©ç”¨ï¼Ÿä¸ä¸€å®šï¼Œå¦‚æœä½ ç†Ÿæ‚‰WordPressï¼Œä½ å¯èƒ½ä¼šè§‰å¯Ÿåˆ°å¯èƒ½æœ‰ä¸€å †æ’ä»¶å­˜åœ¨æ¼æ´ã€‚è¿™äº›æ’ä»¶æœ‰ä»–ä»¬è‡ªå·±çš„ç±»å¹¶ä¸”å¯èƒ½æš´éœ²å‡ºå¯è¢«åˆ©ç”¨çš„å®‰å…¨æ¼æ´ã€‚æˆ‘æƒ³åˆ°è¿™ä¸ªåï¼Œå·²ç»å‘ç°äº†ä¸€æ¬¾è‘—åçš„æ’ä»¶å­˜åœ¨æ¼æ´å¹¶ä¸”å¯ä»¥å¯¼è‡´è¿œç¨‹ä»»æ„ä»£ç æ‰§è¡Œã€‚</p>
<p>ç”±äºé“å¾·è€ƒè™‘ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä¸ä¼šå‘å¸ƒPoCçš„ï¼Œæœ‰å¤ªå¤šå­˜åœ¨å®‰å…¨æ¼æ´çš„WordPressäº†ã€‚</p>
<h2 id="0x03-wordpress">0x03 ä¿®å¤WordPress</h2>
<p>è¿™ä¸ªä¿®å¤æ–¹å¼æ˜¯ä¿®æ”¹is_serializedå‡½æ•°ï¼Œæˆ‘ç®€å•çš„è¯´è¯´ï¼š
function</p>
<p>is_serialized(</p>
<p>$data</p>
<p>,</p>
<p>$strict</p>
<p>= true ) {</p>
<p>// å¦‚æœä¸æ˜¯å­—ç¬¦ä¸²å°±ä¸ä¼šæ˜¯åºåˆ—åŒ–åçš„æ•°æ®</p>
<p>if</p>
<p>( !</p>
<p>is_string</p>
<p>(</p>
<p>$data</p>
<p>) )</p>
<p>return</p>
<p>false;</p>
<p>if</p>
<p>(</p>
<p>&#39;:&#39;</p>
<p>!==</p>
<p>$data</p>
<p>[1] )</p>
<p>return</p>
<p>false;</p>
<p>if</p>
<p>(</p>
<p>$strict</p>
<p>) {</p>
<p>$lastc</p>
<p>=</p>
<p>$data</p>
<p>[</p>
<p>$length</p>
<ul>
<li>1 ];</li>
</ul>
<p>if</p>
<p>(</p>
<p>&#39;;&#39;</p>
<p>!==</p>
<p>$lastc</p>
<p>&amp;&amp;</p>
<p>&#39;}&#39;</p>
<p>!==</p>
<p>$lastc</p>
<p>)</p>
<p>return</p>
<p>false;</p>
<p>}</p>
<p>else</p>
<p>{</p>
<p>//ç¡®è®¤å­˜åœ¨;æˆ–}ä½†ä¸æ˜¯åœ¨ç¬¬ä¸€ä¸ªå­—ç¬¦</p>
<p>if</p>
<p>(</p>
<p>strpos</p>
<p>(</p>
<p>$data</p>
<p>,</p>
<p>&#39;;&#39;</p>
<p>) &lt; 3 &amp;&amp;</p>
<p>strpos</p>
<p>(</p>
<p>$data</p>
<p>,</p>
<p>&#39;}&#39;</p>
<p>) &lt; 4 )</p>
<p>return</p>
<p>false;</p>
<p>}</p>
<p>$token</p>
<p>=</p>
<p>$data</p>
<p>[0];</p>
<p>switch</p>
<p>(</p>
<p>$token</p>
<p>) {</p>
<p>case</p>
<p>&#39;s&#39;</p>
<p>:</p>
<p>if</p>
<p>(</p>
<p>$strict</p>
<p>) {</p>
<p>if</p>
<p>(</p>
<p>&#39;&quot;&#39;</p>
<p>!==</p>
<p>$data</p>
<p>[</p>
<p>$length</p>
<ul>
<li>2 ] )</li>
</ul>
<p>return</p>
<p>false;</p>
<p>}</p>
<p>elseif</p>
<p>( false ===</p>
<p>strpos</p>
<p>(</p>
<p>$data</p>
<p>,</p>
<p>&#39;&quot;&#39;</p>
<p>) ) {</p>
<p>return</p>
<p>false;</p>
<p>}</p>
<p>case</p>
<p>&#39;a&#39;</p>
<p>:</p>
<p>case</p>
<p>&#39;O&#39;</p>
<p>:</p>
<p>return</p>
<p>(bool) preg_match(</p>
<p>&quot;/^{$token}:[0-9]+:/s&quot;</p>
<p>,</p>
<p>$data</p>
<p>);</p>
<p>case</p>
<p>&#39;b&#39;</p>
<p>:</p>
<p>case</p>
<p>&#39;i&#39;</p>
<p>:</p>
<p>case</p>
<p>&#39;d&#39;</p>
<p>:</p>
<p>$end</p>
<p>=</p>
<p>$strict</p>
<p>?</p>
<p>&#39;$&#39;</p>
<p>:</p>
<p>&#39;&#39;</p>
<p>;</p>
<p>return</p>
<p>(bool) preg_match(</p>
<p>&quot;/^{$token}:[0-9.E-]+;$end/&quot;</p>
<p>,</p>
<p>$data</p>
<p>);</p>
<p>}</p>
<p>return</p>
<p>false;</p>
<p>}</p>
<p>è¿™ä¸»è¦çš„åŒºåˆ«æ˜¯å½“$strictå‚æ•°è®¾ç½®ä¸ºfalseçš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€äº›å¼ºåˆ¶æ“ä½œå¯¼è‡´ä¸€ä¸ªå­—ç¬¦ä¸²è¢«æ ‡è®°ä¸ºå·²åºåˆ—åŒ–ã€‚ä¸¾ä¾‹è¯´æ˜ï¼Œæœ€åä¸€ä¸ªå­—ç¬¦ä¸éœ€è¦å¿…é¡»æ˜¯;æˆ–è€…{ï¼ˆè¯‘è€…æ³¨ï¼šä½œè€…æ­¤å¤„åº”è¯¥ç¬”è¯¯äº†ï¼Œåº”è¯¥æ˜¯;æˆ–è€…}),ä¿®å¤äº†æˆ‘æ‰€æäº¤çš„æ¼æ´ã€‚ç°åœ¨å¤§å®¶æœ‰æ²¡æœ‰ç›¸ä¼¼çš„å†…å®¹å¯ä»¥æ‹¿å‡ºæ¥åšä¸ªè®¨è®ºçš„ï¼Ÿ</p>
<p>WordPressä¾æ—§ä½¿ç”¨ç€ä¸å®‰å…¨çš„unserialize()è€Œéå®‰å…¨çš„json_decodeã€‚å®ƒçš„å®‰å…¨æ€§å…¨åœ¨åˆ¤æ–­è§„åˆ™æˆ–è€…Mysqlçš„è§„åˆ™å®ç°ä¸Šã€‚æˆ‘åœ¨ä¸Šé¢æ­éœ²çš„æ¼æ´å®é™…ä¸Šæ˜¯ä½¿ç”¨Mysqlçš„è§„åˆ™å»æ‰æˆ‘è·Ÿåœ¨ç‰¹æ®Šç¬¦å·åçš„æ‰€æœ‰å­—ç¬¦ã€‚</p>
<p>æœ‰ä¸€ä¸ªå¾ˆç®€æ´çš„ä¿®å¤æ–¹æ¡ˆï¼Œä¿®æ”¹ä¸€ä¸‹æ•°æ®åº“ç¼–ç ä¸è¢«æˆªæ–­å°±å¥½ï¼š
ALTER TABLE wp_commentmeta CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; ALTER TABLE wp_postmeta CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; ALTER TABLE wp_usermeta CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/å®‰å…¨/">å®‰å…¨</a></li></span><span class="breadcrumb"><li><a href="/categories/å®‰å…¨/">å®‰å…¨</a></li><li><a href="/categories/å®‰å…¨/PHP-WordPress/">PHP-WordPress</a></li></span></span> | <span class="tags">Tagged <a href="/tags/PHP-WordPress/" class="label label-primary">PHP-WordPress</a><a href="/tags/å®‰å…¨/" class="label label-success">å®‰å…¨</a></span> | <span class="time">recent updated:<time title="2014-03-29 22:51:25"datetime="2014-03-29 22:51:25"> mar. 29 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-å®‰å…¨-PHP-WordPress--WordPress-361PHPå¯¹è±¡æ³¨å…¥æ¼æ´-WooYunçŸ¥è¯†åº“/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-å®‰å…¨-PHP-WordPress--WordPress-361PHPå¯¹è±¡æ³¨å…¥æ¼æ´-WooYunçŸ¥è¯†åº“" data-count-type="comments">æš‚æ— è¯„è®º</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-å®‰å…¨-Java--æ”»å‡»JavaWebåº”ç”¨7-Serverç¯‡1/">æ”»å‡»JavaWebåº”ç”¨[7]</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:38.000Z"> <a href="/2014/02/02/2014-02-02-å®‰å…¨-Java--æ”»å‡»JavaWebåº”ç”¨7-Serverç¯‡1/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h2 id="-javaweb-7-server-1-http-drops-wooyun-org-tips-604-"><a href="http://drops.wooyun.org/tips/604" target="_blank">æ”»å‡»JavaWebåº”ç”¨[7]-Serverç¯‡[1]</a></h2>
<p>2013/09/22 15:39  | <a href="http://drops.wooyun.org/author/å›­é•¿" title="ç”± å›­é•¿ å‘å¸ƒ" target="_blank">å›­é•¿</a>  </p>
<h2 id="java-">javaåº”ç”¨æœåŠ¡å™¨</h2>
<p>Javaåº”ç”¨æœåŠ¡å™¨ä¸»è¦ä¸ºåº”ç”¨ç¨‹åºæä¾›è¿è¡Œç¯å¢ƒï¼Œä¸ºç»„ä»¶æä¾›æœåŠ¡ã€‚Java çš„åº”ç”¨æœåŠ¡å™¨å¾ˆå¤šï¼Œä»åŠŸèƒ½ä¸Šåˆ†ä¸ºä¸¤ç±»ï¼šJSP æœåŠ¡å™¨å’Œ Java EE æœåŠ¡å™¨ã€‚</p>
<h3 id="-server-">å¸¸è§çš„Serveræ¦‚è¿°</h3>
<p>å¸¸è§çš„JavaæœåŠ¡å™¨:Tomcatã€Weblogicã€JBossã€GlassFishã€Jettyã€Resinã€IBM Websphereã€Bejy Tigerã€Geronimoã€Jonasã€Jrunã€Orionã€TongWebã€BES Application Serverã€ColdFusionã€Apusic Application Serverã€Sun Application Server ã€Oracle9i/ASã€Sun Java System Application Serverã€‚</p>
<p>Myeclipseæ¯”è¾ƒæ–¹ä¾¿çš„é…ç½®å„å¼å„æ ·çš„Serverï¼Œä¸€èˆ¬åªè¦ç®€å•çš„é€‰æ‹©ä¸‹Serverçš„ç›®å½•å°±è¡Œäº†ã€‚ ï¿¼ <img src="http://static.wooyun.org/20130922/2013092207564531718.png" alt="enter image description here"></p>
<p>éƒ¨ç½²å®Œæˆåå¯åŠ¨è¿›å…¥å„ä¸ªServerçš„åå°ï¼š</p>
<p><img src="http://static.wooyun.org/20130922/2013092207564620473.png" alt="enter image description here"> ï¿¼</p>
<h3 id="-webshell-war-">æ„å»ºWebShell waræ–‡ä»¶</h3>
<p>1ã€æ‰“å¼€Myeclipseæ–°å»ºWebé¡¹ç›® 2ã€æŠŠjspæ”¾åˆ°WebRootç›®å½•ä¸‹ 3ã€å¯¼å‡ºé¡¹ç›®ä¸ºwaræ–‡ä»¶</p>
<p><img src="http://static.wooyun.org/20130922/2013092207564836817.png" alt="enter image description here"> ï¿¼</p>
<h2 id="tomcat">Tomcat</h2>
<p>Tomcat æœåŠ¡å™¨æ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æ”¾æºä»£ç çš„Web åº”ç”¨æœåŠ¡å™¨ï¼Œå±äºè½»é‡çº§åº”ç”¨æœåŠ¡å™¨ï¼Œåœ¨ä¸­å°å‹ç³»ç»Ÿå’Œå¹¶å‘è®¿é—®ç”¨æˆ·ä¸æ˜¯å¾ˆå¤šçš„åœºåˆä¸‹è¢«æ™®éä½¿ç”¨ï¼Œæ˜¯å¼€å‘å’Œè°ƒè¯•JSP ç¨‹åºçš„é¦–é€‰ã€‚</p>
<h3 id="tomcat-">Tomcatç‰ˆæœ¬</h3>
<p>Tomcatä¸»æµç‰ˆæœ¬:5-6-7ï¼Œæœ€æ–°ç‰ˆTomcat8åˆšå‘å¸ƒä¸ä¹…ã€‚Tomcat5è¾ƒä¹‹6-7åœ¨æ–‡ä»¶ç»“æ„ä¸Šæœ‰ç»†å¾®çš„å·®å¼‚ï¼Œ6-7-8æ²¡æœ‰å¤§çš„å·®å¼‚ã€‚æœ€æ–°ç‰ˆçš„Tomcat8ä¸»è¦æ–°å¢äº†ï¼šServlet 3.1, JSP 2.3, EL 3.0 and Web Socket 1.0æ”¯æŒã€‚</p>
<p>ç‰ˆæœ¬è¯¦æƒ…è¯´æ˜ï¼š<a href="http://tomcat.apache.org/whichversion.html" target="_blank"><a href="http://tomcat.apache.org/whichversion.html">http://tomcat.apache.org/whichversion.html</a></a></p>
<p>ç»“æ„ç›®å½•ï¼š</p>
<p>Tomcat5ï¼š
Binã€commonã€confã€LICENSEã€logsã€NOTICEã€RELEASE-NOTESã€RUNNING.txtã€Serverã€sharedã€Tempã€webappsã€work</p>
<p>Tomcat6-8ï¼š</p>
<p>Binã€confã€libã€LICENSEã€logsã€NOTICEã€RELEASE-NOTESã€RUNNING.txtã€tempã€webappsã€work</p>
<p>å…³æ³¨confå’Œwebappsç›®å½•å³å¯ã€‚confç›®å½•ä¸éå¸¸é‡è¦çš„tomcaté…ç½®æ–‡ä»¶æ¯”å¦‚ç™»å½•å¸å·æ‰€åœ¨çš„tomcat-users.xmlï¼›åŸŸåç»‘å®šç›®å½•ã€ç«¯å£ã€æ•°æ®æº(éƒ¨åˆ†æƒ…å†µ)ã€SSLæ‰€åœ¨çš„server.xmlï¼›æ•°æ®æºé…ç½®æ‰€åœ¨çš„context.xmlæ–‡ä»¶ï¼Œä»¥åŠå®¹å™¨åˆå§‹åŒ–è°ƒç”¨çš„web.xmlã€‚</p>
<p>æºç ä¸‹è½½ï¼š</p>
<p>Tomcat6ï¼š<a href="http://svn.apache.org/repos/asf/tomcat/tc6.0.x/tags/TOMCAT_6_0_18/" target="_blank"><a href="http://svn.apache.org/repos/asf/tomcat/tc6.0.x/tags/TOMCAT_6_0_18/">http://svn.apache.org/repos/asf/tomcat/tc6.0.x/tags/TOMCAT_6_0_18/</a></a></p>
<p>Tomcat7ï¼š<a href="http://svn.apache.org/repos/asf/tomcat/tc7.0.x/trunk/" target="_blank"><a href="http://svn.apache.org/repos/asf/tomcat/tc7.0.x/trunk/">http://svn.apache.org/repos/asf/tomcat/tc7.0.x/trunk/</a></a></p>
<h3 id="tomcat-">Tomcaté»˜è®¤é…ç½®</h3>
<h3 id="1-tomcat-users-xml">1ã€tomcat-users.xml</h3>
<p>Tomcat5é»˜è®¤é…ç½®äº†ä¸¤ä¸ªè§’è‰²ï¼štomcatã€role1ã€‚å…¶ä¸­å¸å·ä¸ºbothã€tomcatã€role1çš„é»˜è®¤å¯†ç éƒ½æ˜¯tomcatã€‚ä¸è¿‡éƒ½ä¸å…·å¤‡ç›´æ¥éƒ¨ç½²åº”ç”¨çš„æƒé™ï¼Œé»˜è®¤éœ€è¦æœ‰manageræƒé™æ‰èƒ½å¤Ÿç›´æ¥éƒ¨ç½²waråŒ…ï¼ŒTomcat5é»˜è®¤éœ€è¦å®‰è£…Administration Web Applicationã€‚Tomcat6é»˜è®¤æ²¡æœ‰é…ç½®ä»»ä½•ç”¨æˆ·ä»¥åŠè§’è‰²ï¼Œæ²¡åŠæ³•ç”¨é»˜è®¤å¸å·ç™»å½•ã€‚</p>
<p>é…ç½®è¯¦è§£ï¼š<a href="http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html/#Introduction" target="_blank">http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html/#Introduction</a></p>
<h3 id="2-context-xml">2ã€context.xml</h3>
<p>Tomcatçš„ä¸Šä¸‹æ–‡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¦‚æœç”¨Tomcatçš„è‡ªèº«çš„æ•°æ®æºå¤šåœ¨è¿™é‡Œé…ç½®ã€‚æ‰¾åˆ°æ•°æ®æºå³å¯ç”¨å¯¹åº”çš„å¸å·å¯†ç å»è¿æ¥æ•°æ®åº“ã€‚</p>
<Context>     <WatchedResource>WEB-INF/web.xml</WatchedResource>     <Resource name="jdbc/u3" auth="Container" type="javax.sql.DataSource"               maxActive="100" maxIdle="30" maxWait="10000"               username="xxxxx" password="xxxx" driverClassName="com.mysql.jdbc.Driver"               url="jdbc:mysql://192.168.0.xxx:3306/xxx?autoReconnect=true"/> </Context>

<h3 id="3-server-xml">3ã€server.xml</h3>
<p>Serverè¿™ä¸ªé…ç½®æ–‡ä»¶ä»·å€¼éå¸¸é«˜ï¼Œé€šå¸¸çš„è®¿é—®ç«¯å£ã€åŸŸåç»‘å®šå’Œæ•°æ®æºå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼Œå¦‚æœæƒ³çŸ¥é“æ‰¾åˆ°åŸŸåå¯¹åº”çš„ç›®å½•å¯ä»¥è¯»å–è¿™ä¸ªé…ç½®æ–‡ä»¶ã€‚å¦‚æœæœ‰ç”¨Httpsï¼Œå…¶é…ç½®ä¹Ÿåœ¨è¿™é‡Œé¢èƒ½å¤Ÿæ‰¾åˆ°ã€‚</p>
<h3 id="4-web-xml">4ã€web.xml</h3>
<p>web.xmlä¹‹å‰è®²MVCçš„æ—¶å€™æœ‰æåˆ°è¿‡ï¼Œé¡¹ç›®åˆå§‹åŒ–çš„æ—¶å€™ä¼šå»è°ƒç”¨è¿™ä¸ªé…ç½®æ–‡ä»¶è¿™ä¸ªæ–‡ä»¶ä¸€èˆ¬å¾ˆå°‘æœ‰äººåŠ¨ä½†æ˜¯ä¸è¦å¿½ç•¥å…¶é‡è¦æ€§ï¼Œä¿®æ”¹web.xmlå¯ä»¥åšæŸäº›YD+BTçš„äº‹æƒ…ã€‚</p>
<h3 id="tomcat-webshell">Tomcatè·å–WebShell</h3>
<h3 id="tomcat-war-webshell">Tomcatåå°éƒ¨ç½²warè·å–WebShell</h3>
<p>ç™»å½•tomcatåå°ï¼š<a href="http://xxx.com/manager/htmlï¼Œä¸€èˆ¬ç”¨" target="_blank">http://xxx.com/manager/htmlï¼Œä¸€èˆ¬ç”¨</a></p>
<p>WAR file to deploy
å°±è¡Œäº†ï¼Œ</p>
<p>Deploy directory or WAR file located on server
è¿™ç§å¾ˆå°‘ç”¨ã€‚</p>
<p>1&gt;Deploy directory or WAR file located on server</p>
<p>Webåº”ç”¨çš„URLå…¥å£ã€XMLé…ç½®æ–‡ä»¶å¯¹åº”è·¯å¾„ã€WARæ–‡ä»¶æˆ–è€…è¯¥Webåº”ç”¨ç›¸å¯¹äº/webappsç›®å½•çš„æ–‡ä»¶è·¯å¾„ï¼Œç„¶åå•å‡» æŒ‰é’®ï¼Œå³å¯å‘å¸ƒè¯¥Webåº”ç”¨ï¼Œå‘å¸ƒååœ¨Applicationåˆ—è¡¨ä¸­å³å¯çœ‹åˆ°è¯¥Webåº”ç”¨çš„ä¿¡æ¯ã€‚è¿™ç§æ–¹å¼åªèƒ½å‘å¸ƒä½äº/webappsç›®å½•ä¸‹çš„Webåº”ç”¨ã€‚</p>
<p>2&gt;WAR file to deploy</p>
<p>é€‰æ‹©éœ€è¦å‘å¸ƒçš„WARæ–‡ä»¶ï¼Œç„¶åå•å‡»Deployï¼Œå³å¯å‘å¸ƒè¯¥Webåº”ç”¨ï¼Œå‘å¸ƒååœ¨Applicationåˆ—è¡¨ä¸­å³å¯çœ‹åˆ°è¯¥Webåº”ç”¨çš„ä¿¡æ¯ã€‚è¿™ç§æ–¹å¼å¯ä»¥å‘å¸ƒä½äºä»»æ„ç›®å½•ä¸‹çš„Webåº”ç”¨ã€‚</p>
<p>å…¶ä¸­ï¼Œç¬¬äºŒç§æ–¹å¼å®é™…ä¸Šæ˜¯æŠŠéœ€è¦å‘å¸ƒçš„WARæ–‡ä»¶è‡ªåŠ¨å¤åˆ¶åˆ°/webappsç›®å½•ä¸‹ï¼Œæ‰€ä»¥ä¸Šè¿°ä¸¤ç§æ–¹å¼å‘å¸ƒçš„Webåº”ç”¨éƒ½å¯ä»¥é€šè¿‡åœ¨æµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥<a href="http://localhost:8080/Webè¿›è¡Œè®¿é—®ã€‚" target="_blank">http://localhost:8080/Webè¿›è¡Œè®¿é—®ã€‚</a></p>
<p>ï¿¼ <img src="http://static.wooyun.org/20130922/2013092207564999165.png" alt="enter image description here">
Tips: å½“è®¿é—®xxxx.comæ‰¾ä¸åˆ°é»˜è®¤ç®¡ç†åœ°å€æ€ä¹ˆåŠ? 1:<a href="http://xxxx.com/manager/html" target="_blank">http://xxxx.com/manager/html</a> æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ 2:ping xxxx.com è·å–å…¶IPåœ°å€ï¼Œåœ¨è®¿é—®ï¼š<a href="http://111.111.111.111/manager/html" target="_blank">http://111.111.111.111/manager/html</a> 3:éå†server.xmlé…ç½®è¯»å–é…ç½®</p>
<h3 id="tomcat-">Tomcatå£ä»¤çˆ†ç ´</h3>
<p>Tomcatç™»å½•æ¯”è¾ƒå®¹æ˜“çˆ†ç ´ï¼Œä½†æ˜¯ä¹‹å‰è¯´è¿‡é»˜è®¤ä¸å¯¹å…¶åšä»»ä½•é…ç½®çš„æ—¶å€™çˆ†ç ´æ˜¯æ— æ•ˆçš„ã€‚</p>
<p>Tomcatçš„è®¤è¯æ¯”è¾ƒå¼±ï¼ŒBase64(ç”¨æˆ·å:å¯†ç )ç¼–ç ï¼Œè¯·æ±‚ï¼šâ€ /manager/html/â€å¦‚æœå“åº”ç ä¸æ˜¯401ï¼ˆæœªç»æˆæƒï¼šè®¿é—®ç”±äºå‡­æ®æ— æ•ˆè¢«æ‹’ç»ã€‚ï¼‰å³ç™»å½•æˆåŠŸã€‚
conn.setRequestProperty(&quot;Authorization&quot;, &quot;Basic &quot; + new BASE64Encoder().encode((user + &quot;:&quot; + pass).getBytes()));</p>
<h3 id="tomcat-">Tomcatæ¼æ´</h3>
<p>Tomcat5-6-7å®‰å…¨æ€§å¹¶ä¸å®Œç¾ï¼Œæ€»æ˜¯è¢«æŒ–å‡ºå„ç§ç¨€å¥‡å¤æ€ªçš„å®‰å…¨æ¼æ´ã€‚åœ¨CVEå’ŒTomcatå®˜ç½‘ä¹Ÿæœ‰ç›¸åº”çš„æ¼æ´ä¿¡æ¯è¯¦æƒ…ã€‚</p>
<h3 id="-tomcat-">æ€æ ·æ‰¾åˆ°Tomcatçš„å†å²ç‰ˆæœ¬:</h3>
<p><a href="http://archive.apache.org/dist/tomcat/" target="_blank"><a href="http://archive.apache.org/dist/tomcat/">http://archive.apache.org/dist/tomcat/</a></a></p>
<h3 id="tomcat-">Tomcatå†å²ç‰ˆæœ¬æ¼æ´?</h3>
<p>Tomcatå®˜ç½‘å®‰å…¨æ¼æ´å…¬å¸ƒï¼š</p>
<p>Apache Tomcat - Apache Tomcat 5 æ¼æ´ï¼š <a href="http://tomcat.apache.org/security-5.html" target="_blank"><a href="http://tomcat.apache.org/security-5.html">http://tomcat.apache.org/security-5.html</a></a></p>
<p>Apache Tomcat - Apache Tomcat 6 æ¼æ´ï¼š <a href="http://tomcat.apache.org/security-6.html" target="_blank"><a href="http://tomcat.apache.org/security-6.html">http://tomcat.apache.org/security-6.html</a></a></p>
<p>Apache Tomcat - Apache Tomcat7 æ¼æ´ï¼š <a href="http://tomcat.apache.org/security-7.html" target="_blank"><a href="http://tomcat.apache.org/security-7.html">http://tomcat.apache.org/security-7.html</a></a></p>
<p>CVE é€šç”¨æ¼æ´ä¸æŠ«éœ²: <a href="http://cve.scap.org.cn/cve_list.php?keyword=tomcat&amp;action=search&amp;p=1" target="_blank"><a href="http://cve.scap.org.cn/cve_list.php?keyword=tomcat&amp;action=search&amp;p=1">http://cve.scap.org.cn/cve_list.php?keyword=tomcat&amp;action=search&amp;p=1</a></a></p>
<p>Cvedetails ï¼š <a href="http://www.cvedetails.com/product/887/Apache-Tomcat.html?vendor_id=45" target="_blank"><a href="http://www.cvedetails.com/product/887/Apache-Tomcat.html?vendor_id=45">http://www.cvedetails.com/product/887/Apache-Tomcat.html?vendor_id=45</a></a> <a href="http://www.cvedetails.com/vulnerability-list/vendor_id-45/product_id-887/Apache-Tomcat.html" target="_blank"><a href="http://www.cvedetails.com/vulnerability-list/vendor_id-45/product_id-887/Apache-Tomcat.html">http://www.cvedetails.com/vulnerability-list/vendor_id-45/product_id-887/Apache-Tomcat.html</a></a></p>
<p>Sebug: <a href="http://sebug.net/appdir/Apache+Tomcat" target="_blank"><a href="http://sebug.net/appdir/Apache+Tomcat">http://sebug.net/appdir/Apache+Tomcat</a></a></p>
<h3 id="-tomcat-">æ€æ ·å‘ç°Tomcatæœ‰é‚£äº›æ¼æ´?</h3>
<p>1ã€é€šè¿‡é»˜è®¤çš„æŠ¥é”™é¡µé¢ï¼ˆ404ã€500ç­‰ï¼‰å¯ä»¥è·å–åˆ°Tomcatçš„å…·ä½“ç‰ˆæœ¬ï¼Œå¯¹ç…§Tomcatæ¼æ´ã€‚</p>
<p>2ã€åˆ©ç”¨WVSä¹‹ç±»çš„æ‰«æå·¥å…·å¯ä»¥è‡ªåŠ¨æ¢æµ‹å‡ºå¯¹åº”çš„ç‰ˆæœ¬åŠæ¼æ´ã€‚</p>
<h3 id="-tomcat-">æ€æ ·å¿«é€Ÿç¡®å®šæ˜¯ä¸æ˜¯Tomcat?</h3>
<p>è¯·æ±‚å“åº”ä¸º:Server:Apache-Coyote/1.1 å°±æ˜¯tomcatäº†ã€‚</p>
<h3 id="tomcat-">Tomcatç¨€å¥‡å¤æ€ªçš„æ¼æ´ï¼š</h3>
<p>Tomcatçš„å®‰å…¨é—®é¢˜è¢«çˆ†è¿‡éå¸¸å¤šï¼Œæ¼æ´ç»Ÿè®¡å›¾ï¼š</p>
<p><img src="http://static.wooyun.org/20130922/2013092207565085066.png" alt="enter image description here"></p>
<p>æœ‰ä¸€äº›æœ‰æ„æ€çš„æ¼æ´ï¼Œæ¯”å¦‚ï¼šInsecure default password CVE-2009-3548(å½±å“ç‰ˆæœ¬: 6.0.0-6.0.20)</p>
<p>The Windows installer defaults to a blank password for the administrative user. If this is not changed during the install process, then by default a user is created with the name admin, roles admin and manager and a blank password.åœ¨windowså®‰è£…ç‰ˆadminé»˜è®¤ç©ºå¯†ç æ¼æ´ï¼Œå…¶å®æ˜¯ç”¨æˆ·å®‰è£…å¯èƒ½å·æ‡’ï¼Œæ²¡æœ‰è®¾ç½®å¯†ç â€¦</p>
<p><img src="http://static.wooyun.org/20130922/2013092207565336054.png" alt="enter image description here"></p>
<p>è¿™æ ·çš„é—®é¢˜åœ¨tar.gzå’ŒzipåŒ…é‡Œé¢æ ¹æœ¬å°±ä¸ä¼šå­˜åœ¨ã€‚æœ‰äº›æ¼æ´çœ‹ä¼¼æ¥åŠ¿æ±¹æ±¹å…¶å®é¸¡è‚‹å¾—ä¸è¡Œå¦‚ï¼šUnexpected file deletion in work directory CVE-2009-2902 éƒ½å·²ç»æœ‰deployæƒé™äº†ï¼Œé—¹ä¸ªå•¥ã€‚</p>
<p>Tomcatéå¸¸ä¸¥é‡çš„æ¼æ´ï¼ˆæ‰“å¼€Tomcat security-5ã€6ã€7.htmlæ‰¾ï¼‰ï¼š
Important: Session fixation CVE-2013-2067 (6.0.21-6.0.36) Important: Denial of service CVE-2012-3544 (6.0.0-6.0.36) Important: Denial of service CVE-2012-2733 (6.0.0-6.0.35) Important: Bypass of security constraints CVE-2012-3546 (6.0.0-6.0.35) Important: Bypass of CSRF prevention filter CVE-2012-4431 (6.0.30-6.0.35) Important: Denial of service CVE-2012-4534 (6.0.0-6.0.35) Important: Information disclosure CVE-2011-3375 (6.0.30-6.0.33) Important: Authentication bypass and information disclosure CVE-2011-3190 (6.0.0-6.0.33) (â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦.) Important: Directory traversal CVE-2008-2938 (6.0.18) Important: Directory traversal CVE-2007-0450 (6.0.0-6.0.9)</p>
<p>å¦‚æœè‹±æ–‡äºšå†å±±å¤§çš„åŒå­¦ï¼Œå¯¹åº”çš„æ¼æ´ä¿¡æ¯ä¸€èˆ¬éƒ½èƒ½å¤Ÿåœ¨ä¸­æ–‡çš„sebugæ‰¾åˆ°ã€‚</p>
<p>Sebugï¼š</p>
<p><img src="http://static.wooyun.org/20130922/2013092207565448247.png" alt="enter image description here"></p>
<p>CVE é€šç”¨æ¼æ´ä¸æŠ«éœ²ï¼š</p>
<p><img src="http://static.wooyun.org/20130922/2013092207565511192.png" alt="enter image description here"></p>
<h2 id="resin">Resin</h2>
<p>Resinæ˜¯CAUCHOå…¬å¸çš„äº§å“ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„application serverï¼Œå¯¹servletå’ŒJSPæä¾›äº†è‰¯å¥½çš„æ”¯æŒï¼Œæ€§èƒ½ä¹Ÿæ¯”è¾ƒä¼˜è‰¯ï¼Œresinè‡ªèº«é‡‡ç”¨JAVAè¯­è¨€å¼€å‘ã€‚</p>
<p>Resinæ¯”è¾ƒæœ‰è¶£çš„æ˜¯é»˜è®¤æ”¯æŒPHP! Resiné»˜è®¤é€šè¿‡Quercus åŠ¨æ€çš„å»è§£æPHPæ–‡ä»¶è¯·æ±‚ã€‚ï¼ˆResin3ä¹Ÿæ”¯æŒï¼Œè¯¦æƒ…ï¼š<a href="http://zone.wooyun.org/content/2467" target="_blank"><a href="http://zone.wooyun.org/content/2467">http://zone.wooyun.org/content/2467</a></a>ï¼‰</p>
<h3 id="resin-">Resinç‰ˆæœ¬</h3>
<p>Resinä¸»æµçš„ç‰ˆæœ¬æ˜¯Resin3å’ŒResin4ï¼Œåœ¨æ–‡ä»¶ç»“æ„ä¸Šå¹¶æ²¡æœ‰å¤šå¤§çš„å˜åŒ–ã€‚Resinçš„é€Ÿåº¦å’Œæ•ˆç‡éå¸¸é«˜ï¼Œä½†æ˜¯ä¸çŸ¥æ€ä¹ˆResinä¼¼ä¹å¯¹Quercus æ›´æ–°ç‰¹åˆ«å¤šã€‚</p>
<p>4.0.xç‰ˆæœ¬æ›´æ–°è¯¦æƒ…ï¼š<a href="http://www.caucho.com/resin-4.0/changes/changes.xtp" target="_blank"><a href="http://www.caucho.com/resin-4.0/changes/changes.xtp">http://www.caucho.com/resin-4.0/changes/changes.xtp</a></a></p>
<p>3.1.xç‰ˆæœ¬æ›´æ–°è¯¦æƒ…ï¼š<a href="http://www.caucho.com/resin-3.1/changes/changes.xtp" target="_blank"><a href="http://www.caucho.com/resin-3.1/changes/changes.xtp">http://www.caucho.com/resin-3.1/changes/changes.xtp</a></a></p>
<h3 id="resin-">Resiné»˜è®¤é…ç½®</h3>
<h3 id="1-resin-conf-resin-xml">1ã€resin.confå’Œresin.xml</h3>
<p>Tomcatå’ŒRsinçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶éƒ½åœ¨confç›®å½•ä¸‹ï¼ŒResin3.1.x é»˜è®¤æ˜¯resin.confè€Œ4.0.xé»˜è®¤æ˜¯resin.xmlã€‚resin.conf/resin.xmlæ˜¯Resinæœ€ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œç±»ä¼¼Tomcatçš„server.xmlã€‚</p>
<h3 id="1-">1&gt;æ•°æ®æº:</h3>
<p>ç¬¬ä¸€èŠ‚çš„æ—¶å€™æœ‰è°ˆåˆ°resinæ•°æ®æºå°±æ˜¯ä½äºè¿™ä¸ªæ–‡ä»¶ï¼Œæœç´¢databaseï¼ˆä½äºserveræ ‡ç­¾å†…ï¼‰å³å¯å®šä½åˆ°å…·ä½“çš„é…ç½®ä¿¡æ¯ã€‚</p>
<h3 id="2-">2&gt;åŸŸåç»‘å®š</h3>
<p>æœç´¢hostå³å¯å®šä½åˆ°å…·ä½“çš„åŸŸåé…ç½®ï¼Œå…¶ä¸­çš„root-directoryæ˜¯åŸŸåç»‘å®šçš„å¯¹åº”è·¯å¾„ã€‚å¾ˆå®¹æ˜“å°±èƒ½å¤Ÿæ‰¾åˆ°åŸŸåç»‘å®šçš„ç›®å½•äº†ã€‚</p>
<host id="javaweb.org" root-directory=".">       <host-alias-regexp>^([^/]/*).javaweb.org</host-alias-regexp>       <web-app id="/" root-directory="D:/web/xxxx/xxxx"/> </host>

<h3 id="resin-">Resiné»˜è®¤å®‰å…¨ç­–ç•¥</h3>
<h3 id="1-">1&gt;ç®¡ç†åå°è®¿é—®æƒé™</h3>
<p>Resinæ¯”è¾ƒBTçš„æ˜¯é»˜è®¤ä»…å…è®¸æœ¬æœºè®¿é—®ç®¡ç†åå°ï¼Œè¿™æ˜¯å› ä¸ºåœ¨resin.confå½“ä¸­é»˜è®¤é…ç½®ç¦æ­¢äº†å¤–éƒ¨IPè¯·æ±‚åå°ã€‚</p>
<resin:set var="resin_admin_external" value="false"/>

<p>ä¿®æ”¹ä¸ºtrueå¤–éƒ¨æ‰èƒ½å¤Ÿè®¿é—®ã€‚</p>
<h3 id="2-resin-">2&gt;Resinåå°ç®¡ç†å¯†ç </h3>
<p>Resinçš„ç®¡ç†å‘˜å¯†ç éœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œåœ¨resin.conf/resin.xmlå½“ä¸­æœç´¢managementã€‚å³å¯æ‰¾åˆ°ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯Resinçš„å¯†ç é»˜è®¤æ˜¯åŠ å¯†çš„ï¼Œå¯†æ–‡æ˜¯åœ¨ç™»å½•é¡µè‡ªè¡Œç”Ÿæˆã€‚æ¯”å¦‚adminåŠ å¯†åçš„å¯†æ–‡å¤§æ¦‚ä¼šæ˜¯ï¼šyCGkvrQHY7K8qtlHsgJ6zg== çœ‹èµ·æ¥ä»…æ˜¯base64ç¼–ç ä¸è¿‡ä¸åªæ˜¯adminé»˜è®¤çš„Base64ç¼–ç æ˜¯ï¼šYWRtaW4= Resin,ç¿»äº†åŠå¤©Resinç»ˆäºåœ¨æ–‡æ¡£é‡Œé¢æ‰¾åˆ°äº†ï¼š<a href="http://www.caucho.com/resin-3.1/doc/resin-security.xtp" target="_blank"><a href="http://www.caucho.com/resin-3.1/doc/resin-security.xtp">http://www.caucho.com/resin-3.1/doc/resin-security.xtp</a></a></p>
<p>ï¿¼<img src="http://static.wooyun.org/20130922/2013092207565538887.png" alt="enter image description here"></p>
<p>è™½è¯´æ˜¯MD5+Base64åŠ å¯†ä½†æ˜¯æ€ä¹ˆçœ‹éƒ½æœ‰ç‚¹ä¸å¯¹ï¼Œä¸‹è½½Resinæºç æ‰¾åˆ°åŠ å¯†ç®—æ³•ï¼š
package com.caucho.server.security.PasswordDigest</p>
<p><img src="http://static.wooyun.org/20130922/2013092207565634855.png" alt="enter image description here"></p>
<p>è¿™åŠ å¯†å·²ç»æ²¡æ³•åè§£äº†ï¼Œæ‰€ä»¥å°±ç®—æ‰¾åˆ°Resinçš„å¯†ç é…ç½®æ–‡ä»¶åº”è¯¥ä¹Ÿæ²¡æ³•ç ´è§£ç™»å½•å¯†ç ã€‚äº‹å®ä¸ŠResin3çš„ç®¡ç†åå°å¹¶æ²¡æœ‰å…¶ä»–Serverï¼ˆç›¸å¯¹JBOSSå’ŒWeblogicï¼‰é‚£ä¹ˆä¸°å¯Œã€‚è€ŒResin4çš„ç®¡ç†åå°çœ‹ä¸Šå»æ›´åŠ æœ‰è¶£ã€‚</p>
<p>Resin4çš„åŠ å¯†æ–¹å¼å’ŒResin3è¿˜ä¸ä¸€æ ·æ”¹æˆäº†SSHAï¼š
admin_user : admin admin_password : {SSHA}XwNZqf8vxNt5BJKIGyKT6WMBGxV5OeIi</p>
<p>è¯¦æƒ…ï¼š<a href="http://www.caucho.com/resin-4.0/admin/security.xtp" target="_blank"><a href="http://www.caucho.com/resin-4.0/admin/security.xtp">http://www.caucho.com/resin-4.0/admin/security.xtp</a></a></p>
<p>Resin3ï¼š</p>
<p><img src="http://static.wooyun.org/20130922/2013092207565648659.png" alt="enter image description here"></p>
<p>Resin4ï¼š</p>
<p><img src="http://static.wooyun.org/20130922/2013092207565652431.png" alt="enter image description here"></p>
<h3 id="resin-webshell">Resinè·å–WebShell</h3>
<p>As of Resin 4.0.0, it is now possible to deploy web applications remotely to a shared repository that is distributed across the cluster. This feature allows you to deploy once to any triad server and have the application be updated automatically across the entire cluster. When a new dynamic server joins the cluster, the triad will populate it with these applications as well.</p>
<p>Web Deploy waræ–‡ä»¶å¤§æ¦‚æ˜¯ä»4.0.0å¼€å§‹æ”¯æŒçš„ï¼Œä¸è¿‡æƒ³è¦åœ¨Web deployä¸€ä¸ªåº”ç”¨ä¹Ÿä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ï¼Œé¦–å…ˆå¾—å…ˆè¿›å…¥åå°ã€‚ç„¶åè¿˜å¾—ä»¥Httpsæ–¹å¼è®¿é—®ã€‚ä¸è¿‡å‘½ä»¤è¡Œä¸‹éƒ¨ç½²å°±æ²¡é‚£æ²¡æ³•éº»çƒ¦ã€‚Resin3å¾—æ‰‹åŠ¨é…ç½®web-app-deployã€‚ æœ€ç®€å•çš„ä½†åˆä¸çˆ½åŠæ³•å°±æ˜¯æƒ³åŠæ³•æŠŠwaræ–‡ä»¶ä¸Šä¼ åˆ°resin-pro-3.1.13webappsç›®å½•ä¸‹ï¼Œä¼šè‡ªåŠ¨éƒ¨ç½²ï¼ˆå°±ç®—Resinå·²å¯åŠ¨ä¹Ÿä¼šè‡ªåŠ¨éƒ¨ç½²ï¼Œä¸å½±å“å·²éƒ¨ç½²çš„åº”ç”¨ï¼‰ã€‚</p>
<p>Resin3éƒ¨ç½²è¯¦æƒ…ï¼š<a href="http://www.caucho.com/resin-3.1/doc/webapp-deploy.xtp" target="_blank"><a href="http://www.caucho.com/resin-3.1/doc/webapp-deploy.xtp">http://www.caucho.com/resin-3.1/doc/webapp-deploy.xtp</a></a></p>
<p>Resin4éƒ¨ç½²Waræ–‡ä»¶è¯¦æƒ…ï¼š<a href="http://www.caucho.com/resin-4.0/admin/deploy.xtp" target="_blank"><a href="http://www.caucho.com/resin-4.0/admin/deploy.xtp">http://www.caucho.com/resin-4.0/admin/deploy.xtp</a></a></p>
<p>Resin4è¿›å…¥åå°åé€‰æ‹©Deploy,ä¸è¿‡è¿˜å¾—ç”¨SSLæ–¹å¼è¯·æ±‚ã€‚Resinè¦èµ°ä¸€ä¸ªâ€éåŠ å¯†é€šé“â€ã€‚</p>
<p>To deploy an application remotely: log into the resin-admin console on any triad server. Make sure you are connecting over SSL, as this feature is not available over a non-encrypted channel. Browse to the &quot;webapp&quot; tab of the resin-admin server and at the bottom of the page, enter the virtual host, URL, and local .war file specifying the web application, then press &quot;Deploy&quot;. The application should now be deployed on the server. In a few moments, all the servers in the cluster will have the webapp.</p>
<p>ï¿¼<img src="http://static.wooyun.org/20130922/2013092207565886704.png" alt="enter image description here"></p>
<p>Resin4æ•¢ä¸æ•¢å†æ²¡èŠ‚æ“ç‚¹ï¼Ÿé»˜è®¤HTTPSæ˜¯æ²¡æœ‰å¼€çš„ã€‚éœ€è¦æ‰‹åŠ¨å»æ‰“å¼€:
conf</p>
<p>esin.properties</p>
<p>/# https : 8443</p>
<p>é»˜è®¤8443ç«¯å£æ˜¯å…³é—­çš„ï¼Œå–æ¶ˆè¿™ä¸€è¡Œçš„æ³¨é‡Šæ‰èƒ½å¤Ÿä½¿ç”¨HTTPSæ–¹å¼è®¿é—®åå°æ‰èƒ½å¤ŸWeb Deploy warã€‚</p>
<p><img src="http://static.wooyun.org/20130922/2013092207565974737.png" alt="enter image description here"></p>
<p>éƒ¨ç½²æˆåŠŸè®¿é—®: <a href="http://localhost:8080/GetShell/Customize.jsp" target="_blank"><a href="http://localhost:8080/GetShell/Customize.jsp">http://localhost:8080/GetShell/Customize.jsp</a></a> å³å¯è·å–WebShellã€‚</p>
<h3 id="resin-">Resinæ¼æ´</h3>
<p>Resinç›¸å¯¹Tomcatçš„å®‰å…¨é—®é¢˜æ¥è¯´å°‘äº†å¾ˆå¤šï¼ŒCvedetailsä¸Šçš„Resinçš„æ¼æ´ç»Ÿè®¡å›¾ï¼š</p>
<p><img src="http://static.wooyun.org/20130922/2013092207570077272.png" alt="enter image description here"></p>
<p>Cvedetailsç»Ÿè®¡è¯¦æƒ…ï¼š <a href="http://www.cvedetails.com/product/993/Caucho-Technology-Resin.html?vendor_id=576" target="_blank"><a href="http://www.cvedetails.com/product/993/Caucho-Technology-Resin.html?vendor_id=576">http://www.cvedetails.com/product/993/Caucho-Technology-Resin.html?vendor_id=576</a></a></p>
<p>Cvedetailsæ¼æ´è¯¦æƒ…ï¼š <a href="http://www.cvedetails.com/vulnerability-list/vendor_id-576/product_id-993/Caucho-Technology-Resin.html" target="_blank"><a href="http://www.cvedetails.com/vulnerability-list/vendor_id-576/product_id-993/Caucho-Technology-Resin.html">http://www.cvedetails.com/vulnerability-list/vendor_id-576/product_id-993/Caucho-Technology-Resin.html</a></a></p>
<p>CVE é€šç”¨æ¼æ´ä¸æŠ«éœ²ï¼š <a href="http://cve.scap.org.cn/cve_list.php?keyword=resin&amp;action=search&amp;p=1" target="_blank"><a href="http://cve.scap.org.cn/cve_list.php?keyword=resin&amp;action=search&amp;p=1">http://cve.scap.org.cn/cve_list.php?keyword=resin&amp;action=search&amp;p=1</a></a></p>
<p>Resin3.1.3:</p>
<p><img src="http://static.wooyun.org/20130922/2013092207570023914.png" alt="enter image description here"></p>
<p>Fixed BugList: <a href="http://bugs.caucho.com/changelog_page.php" target="_blank"><a href="http://bugs.caucho.com/changelog_page.php">http://bugs.caucho.com/changelog_page.php</a></a></p>
<h2 id="weblogic">Weblogic</h2>
<p>WebLogicæ˜¯ç¾å›½beaå…¬å¸å‡ºå“çš„ä¸€ä¸ªapplication serverç¡®åˆ‡çš„è¯´æ˜¯ä¸€ä¸ªåŸºäºJavaeeæ¶æ„çš„ä¸­é—´ä»¶ï¼ŒBEA WebLogicæ˜¯ç”¨äºå¼€å‘ã€é›†æˆã€éƒ¨ç½²å’Œç®¡ç†å¤§å‹åˆ†å¸ƒå¼Webåº”ç”¨ã€ç½‘ç»œåº”ç”¨å’Œæ•°æ®åº“åº”ç”¨çš„Javaåº”ç”¨æœåŠ¡å™¨ã€‚å°†Javaçš„åŠ¨æ€åŠŸèƒ½å’ŒJava Enterpriseæ ‡å‡†çš„å®‰å…¨æ€§å¼•å…¥å¤§å‹ç½‘ç»œåº”ç”¨çš„å¼€å‘ã€é›†æˆã€éƒ¨ç½²å’Œç®¡ç†ä¹‹ä¸­ã€‚</p>
<h3 id="weblogic-">Weblogicç‰ˆæœ¬</h3>
<p>Oracleç®€ç›´å°±æ˜¯ä¼ä¸šåº”ç”¨è½¯ä»¶ç»ˆç»“è€…ï¼Œæ”¶è´­äº†Suné‚£ä¸ªåœŸé³–ã€Mysqlã€BAE Weblogicç­‰ã€‚BAEåœ¨2008åˆè¢«æ”¶è´­åæŠŠBAEç»ˆç»“åœ¨Weblogic 10ã€‚æ˜æ˜¾çš„å·®å¼‚åº”è¯¥æ˜¯ä»10.xå¼€å§‹åˆ°æœ€æ–°çš„12cã€‚è¿™é‡Œä¸»è¦ä»¥Weblogic9.2å’Œæœ€æ–°çš„Weblogic 12cä¸ºä¾‹ã€‚</p>
<h3 id="weblogic-">Weblogicé»˜è®¤é…ç½®</h3>
<p>Weblogicé»˜è®¤ç«¯å£æ˜¯7001ï¼ŒWeblogic10g-12cé»˜è®¤çš„ç®¡ç†åå°æ˜¯ï¼š<a href="http://localhost:7001/console" target="_blank">http://localhost:7001/console</a></p>
<p>Weblogic10 ä»¥ä¸‹é»˜è®¤åå°åœ°å€æ˜¯ï¼š<a href="http://192.168.80.1:7001/console/login/LoginForm.jsp" target="_blank">http://192.168.80.1:7001/console/login/LoginForm.jsp</a></p>
<p>ç®¡ç†å¸å·æ˜¯åœ¨å»ºç«‹WeblogicåŸŸçš„æ—¶å€™è®¾ç½®çš„ã€‚</p>
<p><img src="http://static.wooyun.org/20130922/2013092207570148196.png" alt="enter image description here"></p>
<p>Weblogicæ§åˆ¶å°ï¼š</p>
<p><a href="http://wydrops-wordpress.stor.sinaapp.com/uploads/2013/09/java7-18.png" target="_blank">enter link description here</a></p>
<p>Weblogic10ä»¥ä¸‹é»˜è®¤ç®¡ç†å¸å·:weblogicå¯†ç ï¼šweblogicã€‚å…³äºWeblogic10++çš„æ•…äº‹è¿˜å¾—ä»å»ºåŸŸå¼€å§‹ï¼Œé»˜è®¤å®‰è£…å®ŒWeblogicåéœ€è¦å»ºç«‹ä¸€ä¸ªåŸŸã€‚</p>
<h3 id="weblogic-">WebLogicä¸­çš„&quot;åŸŸ&quot;?</h3>
<p>åŸŸç¯å¢ƒä¸‹å¯ä»¥å¤šä¸ª WebLogic Serveræˆ–è€…WebLogic Server ç¾¤é›†ã€‚åŸŸæ˜¯ç”±å•ä¸ªç®¡ç†æœåŠ¡å™¨ç®¡ç†çš„ WebLogic Serverå®ä¾‹çš„é›†åˆã€‚ Weblogic10++åŸŸé»˜è®¤æ˜¯å®‰è£…å®Œæˆåç”±ç”¨æˆ·åˆ›å»ºã€‚å¸å·å¯†ç ä¹Ÿåœ¨åˆ›å»ºåŸŸçš„æ—¶å€™è®¾ç½®ï¼Œæ‰€ä»¥è¿™é‡Œå¹¶ä¸å­˜åœ¨é»˜è®¤å¯†ç ã€‚å½“ä¸€ä¸ªåŸŸåˆ›å»ºå®Œæˆåé…ç½®æ–‡ä»¶å’ŒWebåº”ç”¨åœ¨ï¼šWeblogic12user_projectsdomainsâ€åŸŸåâ€ã€‚</p>
<h3 id="weblogic-">Weblogic é»˜è®¤å®‰å…¨ç­–ç•¥</h3>
<h3 id="1-weblogic-">1ã€Weblogicé»˜è®¤å¯†ç æ–‡ä»¶:</h3>
<p>Weblogic 9é‡‡ç”¨çš„3DESï¼ˆä¸‰é‡æ•°æ®åŠ å¯†ç®—æ³•ï¼‰åŠ å¯†æ–¹å¼ï¼ŒWeblogic 9é»˜è®¤çš„ç®¡ç†å¯†ç é…ç½®æ–‡ä»¶ä½äºï¼š
weblogic_9weblogic92samplesdomainswl_serverserversexamplesServersecurityoot.properties</p>
<h3 id="boot-properties-">boot.propertiesï¼š</h3>
<p>/# Generated by Configuration Wizard on Sun Sep 08 15:43:13 GMT 2013 username={3DES}fy709SQ4pCHAFk+lIxiWfw== password={3DES}fy709SQ4pCHAFk+lIxiWfw==</p>
<p>Weblogic 12cé‡‡ç”¨äº†AESå¯¹ç§°åŠ å¯†æ–¹å¼ï¼Œä½†æ˜¯AESçš„keyå¹¶ä¸åœ¨è¿™æ–‡ä»¶é‡Œé¢ã€‚é»˜è®¤çš„ç®¡ç†å¯†ç æ–‡ä»¶å­˜æ”¾äºï¼š</p>
<p>Weblogic12user_projectsdomainsase_domainserversAdminServersecurityoot.properties</p>
<p>(base_domainæ˜¯é»˜è®¤çš„â€åŸŸåâ€)ã€‚</p>
<h3 id="boot-properties-">boot.propertiesï¼š</h3>
<p>boot.propertiesï¼š /# Generated by Configuration Wizard on Tue Jul 23 00:07:09 CST 2013 username={AES}PsGXATVgbLsBrCA8hbaKjjA91yNDCK78Z84fGA/pTJE= password={AES}Z44CPAl39VlytFk1I5HUCEFyFZ1LlmwqAePuJCwrwjI=</p>
<p>æ€æ ·è§£å¯†Weblogicå¯†ç ?</p>
<p>Weblogic 12cï¼š
Weblogic12user_projectsdomainsase_domainsecuritySerializedSystemIni.dat</p>
<p>Weblogic 9ï¼š</p>
<p>weblogic_9weblogic92samplesdomainswl_serversecuritySerializedSystemIni.dat</p>
<p>è§£å¯†è¯¦æƒ…ï¼š<a href="http://drops.wooyun.org/tips/349" target="_blank"><a href="http://drops.wooyun.org/tips/349">http://drops.wooyun.org/tips/349</a></a> ã€<a href="http://www.blogjava.net/midea0978/archive/2006/09/07/68223.html" target="_blank"><a href="http://www.blogjava.net/midea0978/archive/2006/09/07/68223.html">http://www.blogjava.net/midea0978/archive/2006/09/07/68223.html</a></a></p>
<h3 id="2-weblogic-jndi-">2ã€Weblogicæ•°æ®æº(JNDI)</h3>
<p>Weblogicå¦‚æœæœ‰é…ç½®æ•°æ®æºï¼Œé‚£ä¹ˆé»˜è®¤æ•°æ®æºé…ç½®æ–‡ä»¶åº”è¯¥åœ¨ï¼š
Weblogic12user_projectsdomainsase_domainconfigconfig.xml</p>
<p><img src="http://static.wooyun.org/20130922/2013092207570229732.png" alt="enter image description here"></p>
<h3 id="weblogic-webshell-">Weblogicè·å–Webshell ï¿¼</h3>
<p><img src="http://static.wooyun.org/20130922/2013092207570425118.png" alt="enter image description here"></p>
<p>Weblogic 9 GetShellï¼š <a href="http://drops.wooyun.org/tips/402" target="_blank"><a href="http://drops.wooyun.org/tips/402">http://drops.wooyun.org/tips/402</a></a></p>
<h2 id="websphere">Websphere</h2>
<p>WebSphere æ˜¯ IBM çš„è½¯ä»¶å¹³å°ã€‚å®ƒåŒ…å«äº†ç¼–å†™ã€è¿è¡Œå’Œç›‘è§†å…¨å¤©å€™çš„å·¥ä¸šå¼ºåº¦çš„éšéœ€åº”å˜ Web åº”ç”¨ç¨‹åºå’Œè·¨å¹³å°ã€è·¨äº§å“è§£å†³æ–¹æ¡ˆæ‰€éœ€è¦çš„æ•´ä¸ªä¸­é—´ä»¶åŸºç¡€è®¾æ–½ï¼Œå¦‚æœåŠ¡å™¨ã€æœåŠ¡å’Œå·¥å…·ã€‚</p>
<h3 id="websphere-">Websphereç‰ˆæœ¬</h3>
<p>Websphereç°åœ¨ä¸»æµçš„ç‰ˆæœ¬æ˜¯6-7-8ï¼Œè€ç‰ˆæœ¬çš„5.xéƒ¨åˆ†è€é¡¹ç›®è¿˜åœ¨ç”¨ã€‚GetShellå¤§è‡´å·®ä¸å¤šã€‚6ã€7æµ‹è¯•éƒ½æœ‰â€œé»˜è®¤ç”¨æˆ·æ ‡è¯†adminç™»å½•â€ï¼ŒWebsphereå®‰è£…éå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥æ²¡æœ‰åƒä¹‹å‰æµ‹è¯•Resinã€Tomcaté‚£ä¹ˆç»†æµ‹ã€‚</p>
<h3 id="websphere-">Websphereé»˜è®¤é…ç½®</h3>
<p>é»˜è®¤çš„ç®¡ç†åå°åœ°å€ï¼ˆæ³¨æ„æ˜¯HTTPSï¼‰ï¼š <a href="https://localhost:9043/ibm/console/logon.jsp" target="_blank"><a href="https://localhost:9043/ibm/console/logon.jsp">https://localhost:9043/ibm/console/logon.jsp</a></a></p>
<p>é»˜è®¤ç®¡ç†å¯†ç ï¼š
1ã€admin (æµ‹è¯•websphere6-7é»˜è®¤å¯ä»¥ç›´æ¥ç”¨adminä½œä¸ºç”¨æˆ·æ ‡è¯†ç™»å½•ï¼Œæ— éœ€å¯†ç ) 2ã€websphere/ websphere 3ã€system/ manager</p>
<p>é»˜è®¤ç«¯å£ï¼š</p>
<p>ç®¡ç†æ§åˆ¶å°ç«¯å£ 9060 ç®¡ç†æ§åˆ¶å°å®‰å…¨ç«¯å£ 9043 HTTPä¼ è¾“ç«¯å£ 9080 HTTPSä¼ è¾“ç«¯å£ 9443 å¼•å¯¼ç¨‹åºç«¯å£ 2809 SIPç«¯å£ 5060 SIPå®‰å…¨ç«¯å£ 5061 SOAPè¿æ¥å™¨ç«¯å£ 8880 SAS SSL ServerAuthç«¯å£ 9401 CSIV2 ServerAuth ä¾¦å¬å™¨ç«¯å£ 9403 CSIV2 MultiAuth ä¾¦å¬å™¨ç«¯å£ 9402 ORBä¾¦å¬å™¨ç«¯å£ 9100 é«˜å¯ç”¨æ€§ç®¡ç†é€šè®¯ç«¯å£(DCS) 9353 æœåŠ¡é›†æˆç«¯å£ 7276 æœåŠ¡é›†æˆå®‰å…¨ç«¯å£ 7286 æœåŠ¡é›†æˆå™¨MQäº’æ“ä½œæ€§ç«¯å£ 5558 æœåŠ¡é›†æˆå™¨MQäº’æ“ä½œæ€§å®‰å…¨ç«¯å£ 5578</p>
<p>8.5å®‰è£…çš„æ—¶å€™åˆ›å»ºå¯†ç ï¼š ï¿¼</p>
<p><a href="http://wydrops-wordpress.stor.sinaapp.com/uploads/2013/09/java7-21.png" target="_blank">enter link description here</a></p>
<p>Websphere8.5å¯åŠ¨ä¿¡æ¯ï¼š</p>
<p><img src="http://static.wooyun.org/20130922/2013092207570520692.png" alt="enter image description here"></p>
<p>Websphere8.5ç™»å½•é¡µé¢ï¼š <a href="https://localhost:9043/ibm/console/logon.jsp" target="_blank">https://localhost:9043/ibm/console/logon.jsp</a></p>
<p><a href="http://wydrops-wordpress.stor.sinaapp.com/uploads/2013/09/java7-23.png" target="_blank">enter link description here</a></p>
<p>Websphere8.5 WEBæ§åˆ¶å°ï¼š</p>
<p><img src="http://static.wooyun.org/20130922/2013092207570682427.png" alt="enter image description here"></p>
<p>Websphere6-7é»˜è®¤æ§åˆ¶å°åœ°å€ä¹Ÿæ˜¯ï¼š <a href="http://localhost:9043/ibm/consoleï¼Œæ­¤å¤„ç”¨adminç™»å½•å³å¯ã€‚" target="_blank">http://localhost:9043/ibm/consoleï¼Œæ­¤å¤„ç”¨adminç™»å½•å³å¯ã€‚</a></p>
<p><img src="http://static.wooyun.org/20130922/2013092207570786132.jpeg" alt="enter image description here"></p>
<h3 id="websphere-getshell">Websphere GetShell</h3>
<p>æœ¬åœ°åªå®‰è£…äº†8.5æµ‹è¯•ï¼ŒWebsphereå®‰è£…çš„ç¡®éå¸¸å‘éå¸¸éº»çƒ¦ã€‚ä¸è¿‡Google HACKåˆ°äº†å…¶ä½™ä¸¤ä¸ªç‰ˆæœ¬Websphere6å’ŒWebsphere7ã€‚æµ‹è¯•å‘ç°Websphere GetShellä¸€æ ·å¾ˆç®€å•ï¼Œåªæ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œä¸€èˆ¬æƒ…å†µç›´æ¥é»˜è®¤é…ç½®Nextå°±è¡Œäº†ã€‚Websphere7å’ŒWebsphere8 GetShellåŸºæœ¬ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<h3 id="websphere6-getshell">Websphere6 GetShell</h3>
<p>éœ€è¦æ³¨æ„çš„æ˜¯Websphere6é»˜è®¤æ”¯æŒçš„Webåº”ç”¨æ˜¯2.3(web.xmlé…ç½®çš„web-app_2_3.dtd)ç›´æ¥ä¸Š2.5æ˜¯ä¸è¡Œçš„ï¼Œè¯·å‹¿éœ¸ç‹ç¡¬ä¸Šå¼“ã€‚å…¶æ¬¡æ˜¯åœ¨å®Œæˆéƒ¨ç½²åè®°å¾—ä¿å­˜å•Šäº²ï¼Œä¸ç„¶æ— æ³•ç”Ÿæ•ˆã€‚</p>
<p><img src="http://static.wooyun.org/20130922/2013092207570894698.png" alt="enter image description here"></p>
<h3 id="websphere8-5-getshell">Websphere8.5 GetShell</h3>
<p>éƒ¨ç½²çš„æ—¶å€™è®°å¾—å†™ä¸Šä¸‹æ–‡åç§°å“¦ï¼Œä¸è®©æ— æ³•è¯·æ±‚åˆ°Shellã€‚</p>
<p><img src="http://static.wooyun.org/20130922/2013092207571078345.png" alt="enter image description here"></p>
<p>æ³¨æ„ï¼š</p>
<p>å¦‚æœåœ¨Deployä½ç‰ˆæœ¬çš„Websphereçš„æ—¶å€™å¯èƒ½ä¼šæç¤ºweb.xmlé”™è¯¯ï¼Œè¿™é‡Œå…¶å®æ˜¯å› ä¸ºæ”¯æŒçš„JavaEEç‰ˆæœ¬é™åˆ¶ï¼ŒæŠŠwaråŒ…é‡Œé¢çš„web.xmlæ”¹æˆä½ç‰ˆæœ¬å°±è¡Œäº†ï¼Œå¦‚æŠŠapp2.5æ”¹æˆ2.3ã€‚
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;!DOCTYPE web-app PUBLIC &quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot; &quot;<a href="http://java.sun.com/dtd/web-app_2_3.dtd&quot;&gt;" target="_blank">http://java.sun.com/dtd/web-app_2_3.dtd&quot;&gt;</a> <web-app>     <welcome-file-list>         <welcome-file>index.jsp</welcome-file>     </welcome-file-list> </web-app></p>
<h2 id="glassfish">GlassFish</h2>
<p>GlassFishæ˜¯SUNçš„äº§å“ï¼Œä½†æ˜¯ä½œä¸ºä¸€åªä¼˜ç§€çš„åœŸé³–SUNå·²ç»è¢«Oracleæ”¶è´­äº†ï¼ŒGlassFishçš„æ€§èƒ½ä¼˜è¶Šå¯¹JavaEEçš„æ”¯æŒè‡ªç„¶æœ€å¥½ï¼Œæœ€æ–°çš„Servlet3.1ä»…GlassFishæ”¯æŒã€‚</p>
<h3 id="glassfish-">GlassFishç‰ˆæœ¬</h3>
<p>GlassFishç‰ˆæœ¬æ¯”è¾ƒä½è°ƒï¼Œæœ€é«˜ç‰ˆæœ¬GlassFish4å¯åœ¨å®˜ç½‘ä¸‹è½½ï¼š <a href="http://glassfish.java.net/" target="_blank">http://glassfish.java.net/</a> ã€‚æœ€æ–°4.xç‰ˆåˆšå‘å¸ƒä¸ä¹…ã€‚æ‰€ä»¥ä¸»æµç‰ˆæœ¬åº”å½“è¿˜æ˜¯v2-3,3åº”è¯¥æ›´å¤šã€‚æ”¯æŒphp(v3åŸºäºQuercus),jRuby on Rails å’Œ Phobosç­‰å¤šç§è¯­è¨€ã€‚</p>
<h3 id="glassfish-">GlassFish é»˜è®¤é…ç½®</h3>
<p>é»˜è®¤Webæ§åˆ¶åå°ï¼š <a href="http://localhost:4848" target="_blank">http://localhost:4848</a></p>
<p>é»˜è®¤ç®¡ç†å¯†ç ï¼š GlassFish2é»˜è®¤å¸å·adminå¯†ç adminadmin ã€‚</p>
<p>GlassFish3ã€4 å¦‚æœç®¡ç†å‘˜ä¸è®¾ç½®å¸å·æœ¬åœ°ä¼šè‡ªåŠ¨ç™»å½•ï¼Œä½†æ˜¯è¿œç¨‹è®¿é—®ä¼šæç¤ºé…ç½®é”™è¯¯ã€‚
Configuration Error Secure Admin must be enabled to access the DAS remotely.</p>
<p>é»˜è®¤ç«¯å£ï¼š</p>
<p>ä½¿ç”¨Adminçš„ç«¯å£ 4848ã€‚ ä½¿ç”¨HTTP Instanceçš„ç«¯å£ 8080ã€‚ ä½¿ç”¨JMSçš„ç«¯å£ 7676ã€‚ ä½¿ç”¨IIOPçš„ç«¯å£ 3700ã€‚ ä½¿ç”¨HTTP_SSLçš„ç«¯å£ 8181ã€‚ ä½¿ç”¨IIOP_SSLçš„ç«¯å£ 3820ã€‚ ä½¿ç”¨IIOP_MUTUALAUTHçš„ç«¯å£ 3920ã€‚ ä½¿ç”¨JMX_ADMINçš„ç«¯å£ 8686ã€‚ ä½¿ç”¨OSGI_SHELLçš„é»˜è®¤ç«¯å£ 6666ã€‚ ä½¿ç”¨JAVA_DEBUGGERçš„é»˜è®¤ç«¯å£ 9009ã€‚</p>
<p>é»˜è®¤æ•°æ®æºï¼š</p>
<p><img src="http://static.wooyun.org/20130922/2013092207571075980.png" alt="enter image description here"></p>
<h3 id="glassfish-getshell-">GlassFish GetShell ï¿¼</h3>
<p><img src="http://static.wooyun.org/20130922/2013092207571142727.png" alt="enter image description here"></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/å®‰å…¨/">å®‰å…¨</a></li></span><span class="breadcrumb"><li><a href="/categories/å®‰å…¨/">å®‰å…¨</a></li><li><a href="/categories/å®‰å…¨/Java/">Java</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java/" class="label label-primary">Java</a><a href="/tags/å®‰å…¨/" class="label label-success">å®‰å…¨</a></span> | <span class="time">recent updated:<time title="2014-03-29 22:24:15"datetime="2014-03-29 22:24:15"> mar. 29 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-å®‰å…¨-Java--æ”»å‡»JavaWebåº”ç”¨7-Serverç¯‡1/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-å®‰å…¨-Java--æ”»å‡»JavaWebåº”ç”¨7-Serverç¯‡1" data-count-type="comments">æš‚æ— è¯„è®º</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-å®‰å…¨-Java--Struts2æ¡†æ¶å®‰å…¨ç¼ºé™·/">Struts2æ¡†æ¶å®‰å…¨ç¼ºé™·</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:38.000Z"> <a href="/2014/02/02/2014-02-02-å®‰å…¨-Java--Struts2æ¡†æ¶å®‰å…¨ç¼ºé™·/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h3 id="struts2-">Struts2æ¡†æ¶å®‰å…¨ç¼ºé™·</h3>
<p>By kxlzx</p>
<h3 id="-">æ‘˜è¦</h3>
<p>æœ¬æ–‡ä»‹ç»äº†javaå¼€å‘æµè¡Œæ¡†æ¶struts2ä»¥åŠwebworkçš„ä¸€äº›å®‰å…¨ç¼ºé™·ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜æ¡†æ¶æœ¬èº«ä»¥åŠå¼€å‘äººå‘˜ä½¿ç”¨ æ¡†æ¶æ—¶ï¼Œæ‰€äº§ç”Ÿçš„ç§ç§å®‰å…¨é—®é¢˜ï¼Œä»¥åŠä½œè€…æŒ–æ˜æ¡†æ¶å®‰å…¨æ¼æ´çš„ä¸€äº›å¿ƒå¾—ä½“ä¼šã€‚</p>
<h3 id="-">æ¨èä»¥ä¸‹äººç¾¤é˜…è¯»</h3>
<p>äº†è§£javaå¼€å‘ äº†è§£æ¡†æ¶å¼€å‘ äº†è§£web applicationå®‰å…¨ â€œç½‘ç»œå®‰å…¨çˆ±å¥½è€…â€</p>
<h3 id="-">æ­£æ–‡</h3>
<p>å½“å‰javaå¼€å‘ç½‘ç«™ï¼Œé€šå¸¸ä¸ä¼šæ˜¯çº¯JSPçš„ï¼Œå¤§éƒ½ä½¿ç”¨äº†java frameworkã€‚ æœ‰äº†è¿™äº›frameworkï¼Œè®©å¼€å‘äººå‘˜æ›´åŠ å¿«é€Ÿçš„å¼€å‘å‡ºä»£ç ï¼Œä¹Ÿè®©ä»£ç éå¸¸å…·æœ‰å¯æ‰©å±•æ€§ï¼Œé‚£äº›åˆ†å±‚æ¶æ„çš„æ€æƒ³ï¼Œ æ›´æ˜¯æ·±å…¥äººå¿ƒã€‚è¿™äº›ä¹Ÿå¤§å¤§å½±å“äº†å®‰å…¨ä»£ç å®¡æ ¸ï¼Œæ›¾æå‡ºâ€œåˆ†å±‚å®¡æ ¸ä»£ç â€çš„æ€æƒ³ï¼Œæ¯”å¦‚åœ¨DAOå±‚ä¸“é—¨æ£€æŸ¥ sqlæ³¨å…¥ï¼Œåœ¨viewå±‚æ£€æŸ¥xssç­‰ã€‚è¿™äº›æ¡†æ¶éƒ½æœ‰è‡ªå·±çš„å±‚çº§ï¼Œæœ¬æ¬¡æ–‡ç« ä¸»è¦è®²çš„æ˜¯strutsè¿™ä¸ªæ¡†æ¶çš„ç›¸å…³ å®‰å…¨é—®é¢˜ï¼Œä¹Ÿä¼šæœ‰å°éƒ¨åˆ†æ¶‰åŠåˆ°strutsåé¢çš„DAOå±‚ã€‚ è€Œstrutsè¿™ä¸ªæ¡†æ¶æ›´æ–°å æœ‰å¸‚åœºä»½é¢æå¤§çš„ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒåœ¨å„ä¸ªå±‚çº§ä¸­ï¼Œä½äºå¦‚å›¾æ‰€ç¤ºä½ç½®ï¼š <img src="" alt=""> å¯ä»¥çœ‹åˆ°strutsåœ¨webåº”ç”¨ä¸­ï¼Œè´Ÿè´£å¤„ç†æ¥æ”¶ç”¨æˆ·æ•°æ®ï¼Œè°ƒç”¨ä¸šåŠ¡å¤„ç†ï¼Œä»¥åŠå±•ç¤ºæ•°æ®çš„å·¥ä½œã€‚æ‰€ä»¥æœ¬æ–‡æŠŠ strutsçš„åŠŸèƒ½åˆ†ä¸ºcontrollerå±‚å’Œviewå±‚ï¼Œcontrollerå±‚æ¥å®Œæˆæ¥æ”¶ç”¨æˆ·æ•°æ®ï¼Œåˆ†å‘ç”¨æˆ·è¯·æ±‚ï¼Œè€Œviewä¸“é—¨ ç”¨äºå±•ç¤ºæ•°æ®ã€‚ ä¸€ä¸ªå•ç‹¬çš„strutsï¼Œæ˜¯ä¸åˆé€»è¾‘çš„ï¼Œå› ä¸ºæ¶æ„å¸ˆé€šå¸¸å–œæ¬¢å¤šç§æ¡†æ¶é›†åˆï¼Œè®©å®ƒä»¬å„è‡ªè´Ÿè´£æŸä¸€å±‚çš„å¤„ç†ã€‚ ç ”ç©¶ä¸€ä¸ªæ¡†æ¶çš„å®‰å…¨é—®é¢˜ï¼Œä¸èƒ½ä»…ä»…ç«™åœ¨æ¡†æ¶çš„è§’åº¦ï¼Œè¿˜åº”è¯¥å……åˆ†è€ƒè™‘åˆ°å¼€å‘äººå‘˜æ˜¯å¦‚ä½•ä½¿ç”¨è¿™äº›æ¡†æ¶çš„ï¼Œ ä»–ä»¬æœ€å–œæ¬¢å†™ä»€ä¹ˆæ ·çš„ä»£ç ï¼Œè¿™æ ·æ‰èƒ½è¿˜åŸä¸€ä¸ªæ­£å¸¸çš„ã€å®Œæ•´çš„webåº”ç”¨åœºæ™¯ã€‚ ä»æœç´¢ç»“æœçœ‹ï¼Œäº’è”ç½‘ä¸­ï¼Œç»å¤§å¤šæ•°æ•™ç¨‹æ¨èstruts+hibernate+springè¿™æ ·çš„é»„é‡‘ç»„åˆï¼Œé‚£ä¹ˆï¼Œæˆ‘å‡è®¾æœ‰ ä¸€ä¸ªåº”ç”¨ä½¿ç”¨äº†è¿™ä¸ªç»„åˆï¼Œä»¥strutsä¸ºé‡ç‚¹ï¼Œç«™åœ¨æ”»å‡»è€…çš„è§’åº¦ï¼Œå±‚å±‚åˆ†æstrutsçš„è®¾è®¡ç¼ºé™·ã€‚</p>
<h3 id="struts2-">Struts2å¼€å‘å›é¡¾ä¸ç®€å•å­¦ä¹ </h3>
<p>ä¸ºäº†è®©å¤§å®¶å›é¡¾æˆ–è€…å­¦ä¹ ä¸€ä¸‹struts2ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥å»ºç«‹ä¸€ä¸ªactionã€jspé¡µé¢ï¼Œåšä¸€ä¸ªæ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼Œä¹‹å å¤„ç†ä¸€ä¸‹ï¼Œå†å±•ç¤ºå‡ºæ¥ç»™ç”¨æˆ·çš„è¿‡ç¨‹ï¼Œç²¾é€šstruts2çš„åŒå­¦å¯ä»¥è·³è¿‡æ­¤æ­¥ã€‚ -------------------------------------strutså›é¡¾start é¦–å…ˆå»ºç«‹actionï¼Œå«åšAaaaActionï¼š public class AaaaAction extends ActionSupport{ private String name; public String getName() { return name; } public void setName(String name) { this.name = name; } public String execute(){ System.out.println(&quot;exe&quot;); return SUCCESS; } public String bbb(){ System.out.println(&quot;bbbbb&quot;); return SUCCESS; } } è¯·æ³¨æ„executeè¿™ä¸ªæ–¹æ³•ï¼Œè®©ç”¨æˆ·è¾“å…¥actionçš„åœ°å€åï¼Œé»˜è®¤ä¼šè®¿é—®è¿™ä¸ªæ–¹æ³•ã€‚ ä¹‹åé…ç½®struts.xmlæ–‡ä»¶ <action name="aaaaaaa" class="net.inbreak.AaaaAction"> <result name="success">user/aaa.jsp</result> </action> é…ç½®è¿™ä¸ªæ–‡ä»¶åï¼Œå½“ç”¨æˆ·è¾“å…¥ <a href="http://www.inbreak.net/app/aaaaaaa.action">http://www.inbreak.net/app/aaaaaaa.action</a> çš„æ—¶å€™ï¼Œstrutsä¼šè´Ÿè´£è®©AaaaActionä¸­çš„executeæ–¹æ³•å¤„ç†ç”¨æˆ·è¯·æ±‚ã€‚ å¤„ç†ä¹‹åï¼Œè¯¥æ–¹æ³•è¿”å›â€œreturn SUCCESS;â€ï¼Œstrutsåˆè´Ÿè´£æ‰¾åˆ°resultçš„nameæ˜¯seccuessæ‰€æŒ‡å‘çš„jspé¡µé¢ã€‚ æŠŠè¯¥é¡µé¢è§£æåï¼Œè¿”å›ç»™ç”¨æˆ·ã€‚ è€Œç”¨æˆ·çœ‹åˆ°çš„å°±æ˜¯aaa.jspé¡µé¢çš„htmlä»£ç ã€‚ struts2ç»§æ‰¿äº†webworkçš„æ‰€æœ‰ä¼˜ç‚¹ï¼Œå…¶å®ç­‰äºæ˜¯webworkçš„å‡çº§ï¼Œå¦‚æœå¼€å‘äººå‘˜æƒ³è®©ç”¨æˆ·ç›´æ¥è®¿é—®actionä¸­çš„ æŸæ–¹æ³•ï¼Œè€Œä¸æ˜¯è®¿é—®é»˜è®¤çš„executeæ–¹æ³•ï¼Œåªè¦å®šä¹‰ä¸€ä¸ªæ–¹æ³•å«åšbbbï¼Œå¹¶ä¸”æ˜¯publicçš„ï¼Œç”¨æˆ·å°±å¯ä»¥ç›´æ¥è¾“å…¥ <a href="http://www.inbreak.net/app/aaaaaaa!bbb.action" target="_blank">http://www.inbreak.net/app/aaaaaaa!bbb.action</a> ç›´æ¥è®¿é—®äº†bbbæ–¹æ³•ã€‚ é‚£requestä¸­çš„å‚æ•°å¦‚æœæ¥æ”¶å‘¢ï¼Ÿstruts2ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«åŒ…è£…äº†èµ·æ¥ï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ï¼Œåªè¦åœ¨actionä¸­å®šä¹‰ ä¸€ä¸ªå±æ€§ï¼Œå«åšpublic String nameï¼›ã€‚ç„¶ååŠ å…¥getNameå’ŒsetNameæ–¹æ³•ï¼Œå°±å¯ä»¥åƒæ­£å¸¸ä½¿ç”¨å±æ€§ä¸€æ ·ï¼Œæ¥æ”¶åˆ° ç”¨æˆ·ä¼ é€’è¿‡æ¥çš„å˜é‡ã€‚æ— è®ºæ˜¯getè¯·æ±‚è¿˜æ˜¯postè¯·æ±‚ï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼æ¥æ”¶ç”¨æˆ·è¾“å…¥ã€‚ æ•´ä¸ªè¿‡ç¨‹å°±å¦‚æ­¤ç®€å•ï¼Œç°åœ¨å¤§å®¶å¯¹æµç¨‹æœ‰äº†äº†è§£ï¼Œæˆ‘ä»¬å°±å¼€å§‹è®¨è®ºæ­£æ–‡ï¼Œå¦‚æœè¿˜æ˜¯æƒ³äº†è§£æ›´å¤šï¼Œè¯·è‡ªè¡Œgoogleã€‚ ----------------------------------strutså›é¡¾end</p>
<h3 id="struts2-">Struts2å®‰å…¨ç¼ºé™·</h3>
<p>å¯ä»¥çœ‹åˆ°struts2åœ¨æ•°æ®æµå‘æ–¹é¢ï¼Œæœ‰ä¸¤ä¸ªé‡ç‚¹ï¼Œä¸€ä¸ªæ˜¯è¿›å…¥ï¼ˆinï¼‰ï¼Œä¸€ä¸ªæ˜¯è¾“å‡ºï¼ˆoutï¼‰ã€‚è€Œæˆ‘åœ¨åšæ¼æ´ æŒ–æ˜çš„æ€è·¯ï¼Œä¹Ÿæ˜¯è·Ÿç€è¿™ä¸ªæ•°æ®çš„æµç¨‹ï¼Œå¼€å§‹åˆ†æçš„ï¼Œä¸‹é¢æˆ‘ä»¬å°±å¼€å§‹è®©æ•°æ®è¿›å…¥ã€‚ Actionå±æ€§é»˜è®¤å€¼å¯ä»¥è¢«è¦†ç›–ç¼ºé™·ï¼š åœ¨æ—¥å¸¸çš„javaé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¿å­˜ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ˆæ¯”å¦‚æ³¨å†Œä¸€ä¸ªç”¨æˆ·ï¼‰ï¼Œç„¶åç»™è¿™ä¸ªå¯¹è±¡èµ‹äºˆä¸€äº› ç”¨æˆ·æäº¤ä¸Šæ¥çš„å±æ€§å€¼ï¼Œåœ¨è¿™é‡Œï¼Œåªéœ€è¦å®šä¹‰ä¸€ä¸ªå¯¹è±¡ç±»ï¼š public class User { private Long id=0l; private String name; private String pass; private Integer type=1; ã€‚ã€‚ã€‚ä¸‹é¢çš„getå’Œsetæ–¹æ³•ä»£ç ç•¥ } å®šä¹‰åï¼Œåœ¨actionä¸­ï¼Œæ·»åŠ ä¸€ä¸ªå±æ€§ User reguser; ç”¨æˆ·æ³¨å†Œçš„é¡µé¢ä»£ç å¦‚ä¸‹ï¼š <form XXXXXXX> <input name="reguser.name"> å½“ç”¨æˆ·æäº¤è¿™ä¸ªformåˆ°actionä¸­åï¼Œstruts2ä¼šè´Ÿè´£è‡ªåŠ¨æ˜ å°„reguser.nameçš„å€¼åˆ°reguserçš„ç›¸å…³å±æ€§ï¼ˆnameï¼‰ ä¸­ï¼Œæ‰€ä»¥åœ¨executeè¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå°±å¯ä»¥ä½¿ç”¨reguser.getName()æ‹¿åˆ°ç”¨æˆ·æäº¤çš„reguser.nameçš„å€¼ã€‚æ‰€ä»¥æˆ‘ä»¬ ä¸‹é¢çš„ä»£ç å°±å¾ˆç®€å•äº†ï¼š public String execute(){ add(user); addæ–¹æ³•ï¼Œæ›´ç®€å•äº†ï¼Œå› ä¸ºæˆ‘ä»¬é¡¹ç›®ä¸­é›†æˆäº†hibernateï¼Œè¿™ä¸ªæ¡†æ¶è‡ªåŠ¨æ˜ å°„userç±»ä¸­çš„å„ä¸ªå±æ€§ï¼Œè‡ªåŠ¨ç»„æˆ insertè¯­å¥ã€‚æˆ‘ä»¬åªè¦åœ¨addä¸­è°ƒç”¨session.save(user);å°±å¯ä»¥ä¿å­˜ç”¨æˆ·åˆ°æ•°æ®åº“ä¸­ã€‚ å‰æ–‡æåˆ°é‚£ä¹ˆå¤šâ€œç®€å•â€ä¸¤ä¸ªå­—ï¼Œéš¾é“è¿™äº›è¿‡ç¨‹éƒ½æ˜¯å®‰å…¨çš„è€Œä»–ç»™æˆ‘ä»¬ä»…ä»…å¸¦æ¥äº†æ–¹ä¾¿ä¹ˆï¼Ÿ struts2åªè´Ÿè´£æ˜ å°„æ‰€æœ‰å¯¹è±¡ï¼Œä»–æä¾›äº†forméªŒè¯ï¼Œä¹Ÿåªèƒ½éªŒè¯formä¸­å±æ€§å€¼çš„å†…å®¹ï¼Œæ¯”å¦‚emailæ ¼å¼ç­‰ï¼Œ å¹¶ä¸èƒ½çº¦æŸç”¨æˆ·æäº¤å…¶ä»–å±æ€§ä¸Šæ¥ï¼Œäºæ˜¯è¿™å°±å˜æˆäº†ååˆ†å±é™©çš„åŠŸèƒ½ã€‚ å½“Userä¸­æœ‰ä¸ªå±æ€§typeï¼Œä»£è¡¨Useræ˜¯å¦ç®¡ç†å‘˜æ—¶ï¼ˆ1ä¸ºæ™®é€šç”¨æˆ·ï¼Œ2ä¸ºç®¡ç†å‘˜ï¼‰ï¼Œéº»çƒ¦æ¥äº†ï¼Œæ”»å‡»è€…åœ¨åŸæ¥çš„ æ³¨å†Œè¡¨å•ä¸­ï¼Œæ–°åŠ å…¥ä¸€ä¸ªinputï¼Œå«åš <input name="reguser.type"> ç„¶åè¾“å…¥å€¼æ˜¯2ï¼ŒæŠŠè¿™ä¸ªå€¼ä¸€èµ·äº¤ç»™actionã€‚åœ¨è¿™ä¸ªæµç¨‹ä¸­ï¼Œè¿™ä¸ªå€¼ï¼Œå½“ç„¶ä¹Ÿä¼šè¢«è‡ªåŠ¨å¸¦åˆ°æ•°æ®åº“ä¸­ï¼Œå‘ä¸‹ å¤„ç†çš„é€»è¾‘ä¸­ï¼Œè¿™ä¸ªç”¨æˆ·ï¼Œå°±å·²ç»å˜æˆç®¡ç†å‘˜äº†ã€‚ å½“ä½ çœ‹åˆ°äº†ä¸€ä¸ªstruts2æˆ–è€…webworkçš„åº”ç”¨ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨å±æ€§æ”»å‡»ï¼Œä¿®æ”¹å½“å‰è¡¨å•ï¼Œé‡Œé¢æœ‰æ‰€æœ‰ä½ çŒœæµ‹åˆ° çš„å±æ€§ï¼Œä¸€å¹¶æäº¤ä¸Šæ¥ï¼Œå°±å¯èƒ½ä¼šå½±å“æ•´ä¸ªé€»è¾‘ï¼Œè¾¾åˆ°æ”»å‡»ç›®çš„ã€‚æ–‡ä¸­ä»…ä»…æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œäº‹å®ä¸Šï¼Œåœ¨æ•°æ®ä¼ é€’ çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä»»æ„è¦†ç›–æ•°æ®çš„é»˜è®¤å€¼ï¼Œæœ¬æ¥å°±æ˜¯ä¸€ä¸ªå±é™©çš„ç¼ºé™·ï¼Œè€Œstruts2å’Œwebworkè¿™ä¸¤ä¸ªæ¡†æ¶ä»…ä»…çœ‹åˆ° äº†å®ƒå¸¦æ¥çš„å¥½å¤„ï¼Œå¿½ç•¥äº†è¿™æ–¹é¢åŸºäºå®‰å…¨æ€§çš„è€ƒè™‘ï¼Œä»…ä»…å…³æ³¨äº†ç”¨æˆ·æäº¤æ•°æ®çš„æ­£ç¡®æ€§ã€‚å¯¹æ¯”åœ¨æ²¡æœ‰struts2 è¿™ä¸ªåŠŸèƒ½çš„æ—¶å€™ï¼Œæˆ‘ä»¬å´éœ€è¦åœ¨actionä¸­ä¸€ä¸ªä¸€ä¸ªçš„æŠŠéœ€è¦çš„å˜é‡ï¼Œä»ç”¨æˆ·æäº¤çš„requestä¸­è§£å‡ºæ¥ï¼Œä¸€ä¸ªä¸€ä¸ª å¤„ç†ï¼Œä¸å¯èƒ½å‡ºç°è¿™ç§å®‰å…¨é—®é¢˜ã€‚ç°åœ¨å®ƒåŒ…è£…äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œè‡ªä»¥ä¸ºå¾ˆæ–¹é¢ï¼Œå´å‡ºäº†ä¸¥é‡é—®é¢˜ã€‚</p>
<h3 id="action-">Actionä¸­çš„æ–¹æ³•è¢«æš´åŠ›çŒœè§£ç¼ºé™·</h3>
<p>å‰æ–‡æåˆ°ï¼Œæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥è®©ç”¨æˆ·è®¿é—®actionæ—¶ï¼Œä¸è®¿é—®é»˜è®¤çš„executeæ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥è®¿é—®å…¶ä»–actionä¸­ çš„æ–¹æ³•ï¼Œæ¡ä»¶æ˜¯åœ¨actionä¸­ï¼Œå†™ä¸€ä¸ªpublicçš„æ–¹æ³•ã€‚å¼€å‘äººå‘˜å¦‚æœéœ€è¦åšä¸€ä¸ªç™»é™†åï¼Œå±•ç¤ºæ‰€æœ‰ç”¨æˆ·åˆ—è¡¨çš„ åŠŸèƒ½ï¼Œè€Œä»–çš„ä¸€ä¸ªâ€œè§£è€¦åˆâ€çš„å¼€å‘ä¹ æƒ¯ï¼Œå°†åœ¨è¿™é‡Œå¯¼è‡´å®‰å…¨ç¼ºé™·ã€‚ å®šä¹‰ä¸€ä¸ªå¦‚ä¸‹çš„action public class Userlogin extends ActionSupport{ private String uname=&quot;&quot;; private String upwd; private List list; //getter and setter æ–¹æ³•ç•¥ public String login(){ if(uname!=null&amp;&amp;upwd!=null&amp;&amp;uname.equals(&quot;kxlzx&quot;)&amp;&amp;upwd.equals(&quot;pass&quot;)) {//if login success return list(); } return false; } public String list(){ list.add(&quot;kxlzx&quot;);list.add(&quot;kxlzx1&quot;);list.add(&quot;kxlzx2&quot;);list.add(&quot;kxlzx3&quot;); return &quot;list&quot;; } } Userloginä¸­ï¼Œå› ä¸ºlistè¿™ä¸ªåŠŸèƒ½ï¼ˆæ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·åˆ—è¡¨ï¼‰ï¼Œå…¶å®æ˜¯ä¸€ä¸ªé€šç”¨çš„åŠŸèƒ½ï¼Œå¾ˆå®¹æ˜“è¢«å…¶ä»–åœ°æ–¹è°ƒç”¨ï¼Œ æ‰€ä»¥å¼€å‘äººå‘˜æŠŠå®ƒå•ç‹¬å†™æˆäº†ä¸€ä¸ªæ–¹æ³•ã€‚ å½“ç”¨æˆ·ç™»é™†çš„æ—¶å€™ï¼Œæ‰“å¼€ <a href="http://www.inbreak.net/app/userlogin!login.action" target="_blank">http://www.inbreak.net/app/userlogin!login.action</a> æ¥åˆ°äº†ç”¨æˆ·çš„ç™»é™†é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰ç”¨æˆ·è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œæ‰èƒ½æœ€ç»ˆè°ƒç”¨list()æ–¹æ³•ï¼Œæ˜¾ç¤ºç»“æœã€‚ <img src="" alt=""> ä½†æ˜¯struts2æŠŠæ‰€æœ‰publicçš„æ–¹æ³•éƒ½æš´éœ²äº†å‡ºå»ï¼Œå¯¼è‡´ç°åœ¨ç”¨æˆ·è¾“å…¥äº† <a href="http://www.inbreak.net/app/userlogin!list.action" target="_blank">http://www.inbreak.net/app/userlogin!list.action</a> ç”¨æˆ·è®¿é—®è¿™ä¸ªé“¾æ¥åï¼Œstruts2è°ƒç”¨listæ–¹æ³•ï¼Œç„¶åè¿”å›ç»“æœç»™ç”¨æˆ·ï¼Œæ‰€ä»¥æ²¡æœ‰ç™»é™†ï¼Œå°±æ˜¾ç¤ºäº†æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼Œ ç›´æ¥ç»•è¿‡äº†loginä¸­çš„ç™»é™†éªŒè¯ã€‚ <img src="" alt=""> åœ¨æ²¡æœ‰struts2çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦åœ¨servletçš„dogetæˆ–è€…dopostæ–¹æ³•ä¸­ï¼Œå†™ifåˆ¤æ–­ç­‰ä»£ç ï¼Œæ‰èƒ½è®©ç”¨æˆ·è°ƒç”¨å…¶ä»– servletä¸­çš„æ–¹æ³•ï¼Œç°åœ¨çœ‹æ¥å…¶å®è¿™ä¹Ÿæ˜¯ä¸€ç§ä¿æŠ¤æªæ–½ã€‚è€Œç°åœ¨struts2ä¸ºäº†æ–¹ä¾¿å¼€å‘ï¼ŒæŠŠæ‰€æœ‰çš„publicæ–¹æ³• ç»Ÿä¸€æ˜ å°„äº†å‡ºå»ï¼Œå¯¼è‡´å¼€å‘æŠŠä¸€ä¸ªç»å¸¸ä½¿ç”¨çš„åŠŸèƒ½ï¼Œä¹ æƒ¯å†™æˆä¸€ä¸ªpublicçš„æ–¹æ³•ï¼Œç°åœ¨å±…ç„¶æˆäº†ä¸¥é‡æ¼æ´ã€‚</p>
<h3 id="struts2-action-">struts2çš„actionå±æ€§è®¾è®¡ç¼ºé™·</h3>
<p>å†å›å¤´çœ‹çœ‹æˆ‘ä»¬åœ¨actionä¸­çš„å±æ€§å®šä¹‰ï¼Œä½ ä¼šå‘ç°ï¼Œç°åœ¨ä»–ä»¬éƒ½æˆäº†æ¼æ´ï¼Œå› ä¸ºstruts2è§„å®šå±æ€§çš„getå’Œ setæ–¹æ³•ï¼Œéƒ½å¿…é¡»æ˜¯publicçš„ã€‚ é‚£ä¹ˆæˆ‘ä»¬å®šä¹‰äº† private String name; public String getName() { return name; } public void setName(String name) { this.name = name; } è¿™æ®µä»£ç çš„æ—¶å€™ï¼Œå®é™…ä¸Šï¼Œæ˜¯å†™äº†ä¸¤ä¸ªpublicçš„æ–¹æ³•ã€‚ é‚£è¿™ä¸¤ä¸ªè¡¨é¢ä¸Šæ²¡æœ‰ä»»ä½•å®è´¨å«ä¹‰çš„æ–¹æ³•ï¼Œä¼šæœ‰ä»€ä¹ˆå®‰å…¨éšæ‚£å‘¢ï¼Ÿ è¿™éœ€è¦å’Œå‰æ–‡è”ç³»èµ·æ¥ï¼Œå‰æ–‡æåˆ°ï¼Œæˆ‘ä»¬åœ¨struts.xmlæ–‡ä»¶ä¸­ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š <action name="user" class="net.inbreak.UserAction"> <result name="success">user/userlist.jsp</result> <result name="addUser">user/addUser.jsp</result> <result name="added">user/added.jsp</result> <result name="false">user/false.jsp</result> </action> è¿™æ®µä»£ç å«ä¹‰æ˜¯ï¼ŒUserActionä¸­ï¼Œä»»ä½•ä¸€ä¸ªæ–¹æ³•æ‰§è¡Œåï¼Œå¦‚æœè¿”å›çš„æ˜¯successè¿™ä¸ªå­—ç¬¦ä¸²ï¼Œ å°±ä¼šæŠŠ user/userlist.jspè¿”å›ç»™ç”¨æˆ·ã€‚ å¦‚æœè¿”å›æ˜¯addUserï¼Œå°±ä¼šæŠŠuser/addUser.jspè¿”å›ç»™ç”¨æˆ·ã€‚ ç°åœ¨UserActionæ˜¯ç®¡ç†ç”¨æˆ·çš„é¡µé¢ï¼Œåœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œæœ‰æ™®é€šç®¡ç†å‘˜å’Œè¶…çº§ç®¡ç†å‘˜ï¼Œä»–ä»¬çš„åŒºåˆ«æ˜¯æ™®é€šç®¡ç†å‘˜ å¯ä»¥æŸ¥çœ‹ç”¨æˆ·ï¼Œä½†æ˜¯ä¸èƒ½æ·»åŠ ä¸€ä¸ªç”¨æˆ·ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨UserActionä¸­ï¼Œå†™äº† public String addUser(){ if(true){ //äº‹å®ä¸Šè¿™é‡Œæ˜¯ä¸ªè¶…çº§ç®¡ç†å‘˜çš„åˆ¤æ–­ï¼Œæˆ‘å·æ‡’äº†ã€‚ return &quot;false&quot;; } return &quot;addUser&quot;; } è¿™ä¸ªæ–¹æ³•çš„ä»£ç åˆ¤æ–­äº†ä¸å…è®¸æ™®é€šç®¡ç†å‘˜è®¿é—®ï¼Œä½†æ˜¯user/addUser.jspè¿™ä¸ªjspé¡µé¢ä¸­å¹¶æ²¡æœ‰è¿™ä¸ªåˆ¤æ–­é€»è¾‘ã€‚ å› ä¸ºå¼€å‘è®¤ä¸ºåªæœ‰è¿”å›addUserçš„æ—¶å€™ï¼Œæ‰ä¼šæ¥åˆ°è¿™ä¸ªé¡µé¢ï¼Œè€Œè¦è¿”å›addUserï¼Œåˆ™å¿…é¡»é€šè¿‡è¶…çº§ç®¡ç†å‘˜çš„éªŒè¯ã€‚ é‚£æˆ‘ä»¬èƒ½è®©ä¸€ä¸ªæ–¹æ³•è¿”å›addUserä¹ˆï¼Ÿå½“ç„¶å¯ä»¥ï¼ <a href="http://www.inbreak.net/app/user!getUsername.action?username=addUser">http://www.inbreak.net/app/user!getUsername.action?username=addUser</a> è¿™ä¸ªé“¾æ¥ï¼Œstruts2ä¼šæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ ä»–ä¼šæ‰¾struts.xmlä¸­ï¼Œå¯¹åº”æ®µè·¯å¾„userï¼Œäºæ˜¯æ‰¾åˆ°äº†å¯¹åº”çš„å¤„ç†Actionï¼ˆnet.inbreak.UserActionï¼‰ï¼Œ ç”±äºè·¯å¾„ä¸­æœ‰äº†â€œ!getUsernameâ€ï¼Œäºæ˜¯å°±å»æ‰¾è¿™ä¸ªActionä¸­çš„getUsernameè¿™ä¸ªæ–¹æ³•ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ªæ–¹æ³•å…¶å® æ˜¯usernameè¿™ä¸ªå±æ€§çš„getæ–¹æ³•ï¼Œå¦‚æœä½ è¦è®©Actionæ¥æ”¶ç”¨æˆ·æäº¤çš„usernameï¼Œä½ å°±å¿…é¡»è¦å®šä¹‰è¿™ä¸ªæ–¹æ³•ã€‚ é‚£è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä»€ä¹ˆå‘¢ï¼Ÿä¼šè¿”å›actionçš„å­—æ®µusernameçš„å€¼ï¼å“ˆå“ˆï¼usernameç”¨æˆ·å·²ç»æäº¤ç»™actionäº†ï¼Œ é“¾æ¥åé¢å†™ç€â€œ?username=addUserâ€ï¼Œstruts2æŠŠè¿™ä¸ªå€¼èµ‹äºˆäº†actionä¸­çš„usernameå±æ€§ã€‚é‚£è¿™é‡Œè¿”å›çš„å½“ç„¶ å°±æ˜¯â€œaddUserâ€ï¼ <img src="" alt=""> ä¸€ç³»åˆ—å·§åˆåï¼Œå¯¼è‡´ç°åœ¨ç»™ç”¨æˆ·è¿”å›äº†user/addUser.jspé¡µé¢ï¼Œè¿™æ˜¯ä¸€ä¸ªæ·»åŠ ç”¨æˆ·çš„è¡¨å•é¡µé¢ï¼Œå¹¶ä¸”ç”¨æˆ·æ²¡ æœ‰å»èµ°éªŒè¯æ˜¯å¦ä¸ºè¶…çº§ç®¡ç†å‘˜è¿™ä¸€æ­¥ã€‚ ç°åœ¨ç”¨æˆ·çœ‹åˆ°äº†ä¸€ä¸ªæ·»åŠ ç”¨æˆ·çš„é¡µé¢ï¼Œä»–æœ‰ä¸¤ç§æ”»å‡»æ€è·¯ï¼š 1ï¼Œç›´æ¥æäº¤ï¼Œå¦‚æœå¤„ç†ç”¨æˆ·æäº¤çš„é‚£ä¸ªactionæ²¡æœ‰å†æ¬¡åˆ¤æ–­ç”¨æˆ·èº«ä»½ï¼Œé‚£å°±æäº¤æˆåŠŸäº†ã€‚ 2ï¼Œå¦‚æœä»–åˆ¤æ–­äº†ç”¨æˆ·èº«ä»½ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥csrfä»–ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“äº†è¿™ä¸ªactionçš„åœ°å€ï¼Œå’Œå®ƒéœ€è¦çš„å‚æ•°ï¼ ç”±äºstruts2çš„actionå’Œjspæ–‡ä»¶åˆ†ç¦»ï¼Œå¯¼è‡´å¼€å‘äººå‘˜å¾€å¾€ä¼šåœ¨actionçš„æ–¹æ³•ä¸­ï¼Œæ‰§è¡Œæƒé™åˆ¤æ–­ï¼Œè€Œjspé¡µé¢ä¸­ å¹¶æ²¡æœ‰å†æ¬¡æ‰§è¡Œè¿™ä¸ªåˆ¤æ–­ï¼Œä»–ä»¥ä¸ºactionåˆ¤æ–­å°±å¤Ÿäº†ã€‚è€Œååactionçš„å±æ€§ï¼Œç»™æˆ‘ä»¬å¸¦æ¥äº†ä¸€ä¸ªå¯è‡ªå®šä¹‰è¿”å› resultçš„æ–¹æ³•ï¼Œå¯¼è‡´æˆ‘ä»¬å¯ä»¥ç»•è¿‡actionè®¿é—®jspé¡µé¢ã€‚</p>
<h3 id="struts2-result-redirect-">Struts2çš„é‚£äº›resultç±»å‹ç¼ºé™·ï¼ˆredirectï¼‰</h3>
<p>åˆšæ‰æˆ‘ä»¬é¢†æ•™äº†struts2ç»™æˆ‘ä»¬å¸¦æ¥é‚£äº›å±æ€§çš„å¥½å¤„ï¼Œç°åœ¨æˆ‘ä»¬å†å¾€åèµ°ä¸€æ­¥ï¼Œç ”ç©¶Actionæ–¹æ³•çš„è¿”å›ç»“æœã€‚ å…¶å®å¹¶ä¸æ˜¯åªç”±Stringç±»å‹çš„è¿”å›ç»“æœï¼Œstruts2è¿˜æœ‰å…¶ä»–ç±»å‹çš„è¿”å›ï¼Œæ¯”å¦‚â€œredirectâ€ç±»å‹ã€‚ <action name="test" class="net.inbreak.TestAction"> <result name="false">user/false.jsp</result> <result name="redir" type="redirect">${redirecturl}</result> </action> è¿™æ®µä»£ç ï¼Œå¤§å®¶å”¯ä¸€å¯èƒ½çœ‹ä¸æ‡‚çš„ï¼Œå°±æ˜¯type=&quot;redirect&quot;äº†ã€‚ è¿™æ˜¯ä¸€ä¸ªurl redirectçš„æ–¹å¼ï¼Œstruts2ä¸ºäº†æ–¹ä¾¿å¤§å®¶å¼€å‘ï¼ŒæŠŠâ€œè‡ªå®šä¹‰302è·³è½¬åˆ°å…¶ä»–urlâ€è¿™ç§æ–¹å¼ç»™åŒ…è£…äº† èµ·æ¥ã€‚åªè¦å¦‚ä¸Šå®šä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨actionä¸­å†™æ–¹æ³•ï¼š public String redirect() { return &quot;redir&quot;; } ç„¶åå®šä¹‰å±æ€§ private String redirecturl; å½“ç”¨æˆ·æ‰“å¼€ <a href="http://www.inbreak.net/app/test!redirect.action?redirecturl=/a.jsp">http://www.inbreak.net/app/test!redirect.action?redirecturl=/a.jsp</a> çš„æ—¶å€™ï¼Œå°±ä¼š302è·³è½¬åˆ° <a href="http://www.inbreak.net/app/a.jsp" target="_blank">http://www.inbreak.net/app/a.jsp</a> è¿™æ˜¯å¾ˆå¸¸è§çš„urlè·³è½¬åº”ç”¨ï¼Œåœ¨struts2ä¸­ï¼Œå¦‚ä¸Šé…ç½®ä¸€ä¸‹ï¼Œå°±å¯ä»¥å®ç°ã€‚ ç›¸ä¿¡æ˜çœ¼äººéƒ½çœ‹å‡ºæ¥äº†ï¼Œå¾ˆæ˜æ˜¾è¿™é‡Œå­˜åœ¨urlè·³è½¬æ¼æ´ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥äº† <a href="http://www.inbreak.net/app/test!redirect.action?redirecturl=http://www.ph4nt0m.org" target="_blank">http://www.inbreak.net/app/test!redirect.action?redirecturl=http://www.ph4nt0m.org</a> å°±ä¼šè·³è½¬åˆ°<a href="http://www.ph4nt0m.orgè¿™ä¸ªé’“é±¼ç½‘ç«™(-_-!)ã€‚é‚£ä¹ˆå¦‚ä½•é˜²å¾¡å‘¢ï¼Ÿ" target="_blank">http://www.ph4nt0m.orgè¿™ä¸ªé’“é±¼ç½‘ç«™(-_-!)ã€‚é‚£ä¹ˆå¦‚ä½•é˜²å¾¡å‘¢ï¼Ÿ</a> è¦é˜²å¾¡urlè·³è½¬åˆ°é’“é±¼ç½‘ç«™ï¼Œæˆ‘ä»¬è‚¯å®šéœ€è¦ä¸€ä¸ªç™½åå•æœºåˆ¶ï¼Œæˆ–è€…æ ¹æœ¬å°±è®©ä»–è·³è½¬åˆ°æœ¬ç«™ä¸‹ã€‚äºæ˜¯æœ‰äº†å¦‚ä¸‹åˆ¤æ–­ï¼š public String redirect() { if(redirecturl.startsWith(&quot;/&quot;)) { return &quot;redir&quot;; } return &quot;false&quot;; } å¯èƒ½ä½ çœ‹å‡ºæ¥äº†ï¼Œä»…ä»…åˆ¤æ–­&quot;/&quot;å¼€å¤´ï¼Œå…¶å®æ˜¯ä¸èƒ½æœç»urlè·³è½¬æ¼æ´çš„ï¼Œå› ä¸º <a href="http://www.inbreak.net/app/test!redirect.action?redirecturl=//www.ph4nt0m.org" target="_blank">http://www.inbreak.net/app/test!redirect.action?redirecturl=//www.ph4nt0m.org</a> ä¸€æ ·ä¼šè·³è½¬ã€‚è€Œåœ¨è¿™é‡Œå´è¶³å¤Ÿäº†ï¼Œå› ä¸ºstruts2å·²ç»æ¥ç®¡äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œåªè¦ä»¥â€œ/â€å¼€å¤´ï¼Œç»Ÿç»Ÿå…ˆç»™ä½ è‡ªåŠ¨åŠ ä¸Š æœ¬åœ°åŸŸåï¼ŒæŠ“åŒ…åï¼Œä½ ä¼šçœ‹åˆ° location: <a href="http://www.inbreak.net/app//www.ph4nt0m.org" target="_blank">http://www.inbreak.net/app//www.ph4nt0m.org</a> å®é™…ä¸Šæ˜¯ä¸ä¼šæœ‰é—®é¢˜çš„ã€‚ struts2ä¹Ÿè®¤ä¸ºè¿™æ ·åˆ¤æ–­ä¸ä¼šæœ‰é—®é¢˜äº†ï¼Œç„¶è€Œç”¨æˆ·è¾“å…¥ <a href="http://www.inbreak.net/app/test!getStr.action?str=redir&amp;redirecturl=http://www.ph4nt0m.org" target="_blank">http://www.inbreak.net/app/test!getStr.action?str=redir&amp;redirecturl=http://www.ph4nt0m.org</a> <img src="" alt=""> å…¶å®å‰ç¯‡å·²ç»åˆ†æè¿‡äº†ï¼Œè¿™æ ·å°±åˆ©ç”¨actionä¸­çš„strå±æ€§ï¼Œç»•è¿‡äº†å¿…é¡»ä»¥â€œ/â€å¼€å¤´çš„åˆ¤æ–­ï¼Œç›´æ¥è·³è½¬äº†ã€‚ testé‡Œæœ‰ä¸ªstrå±æ€§ï¼Œå¯è‡ªå®šä¹‰è¿”å›ï¼Œè¿™é‡Œè‡ªå®šä¹‰äº†â€œredirâ€ï¼Œæ‰€ä»¥æ¥åˆ°äº† <result name="redir" type="redirect">${redirecturl}</result> è€Œredirecturlçš„å€¼ï¼Œä¹Ÿæäº¤ç»™äº†actionï¼Œæ‰€ä»¥è·³è½¬äº†ã€‚</p>
<h3 id="struts2-result-ajax-">Struts2çš„é‚£äº›resultç±»å‹ç¼ºé™·ï¼ˆAjaxï¼‰</h3>
<p>åœ¨struts2ä¸­ä½¿ç”¨ajaxï¼Œä¹Ÿæ˜¯è¢«struts2æ”¯æŒçš„ï¼Œå®ƒæä¾›äº†ä¸€ç§è¿”å›ç±»å‹ï¼Œå«åšâ€œstreamâ€ã€‚åœ¨ç ”ç©¶è¿™ä¸ª resultçš„ä½¿ç”¨æ—¶ï¼Œä½œè€…çœ‹åˆ°ä¸€æœ¬ä¹¦ï¼Œå«åšã€Š Struts 2æƒå¨æŒ‡å—ï¼šåŸºäºWebWorkæ ¸å¿ƒçš„MVCå¼€å‘ ã€‹ã€‚è¿™æœ¬ä¹¦éå¸¸ å‡ºåï¼Œå‡ ä¹æ‰€æœ‰çš„struts2ä½¿ç”¨è€…éƒ½æ¨èä½¿ç”¨ã€‚ <a href="http://book.csdn.net/bookfiles/479/index.html" target="_blank">http://book.csdn.net/bookfiles/479/index.html</a> ä¹¦ä¸Šä»‹ç»ajaxå¯ä»¥è¿™ä¹ˆä½¿ç”¨ï¼š é…ç½®struts.xml <action name="ajaxtest" class="net.inbreak.ajax.TestajaxAction"> <result type="stream"> <param name="contentType">text/html</param> <param name="inputName">input</param> </result> </action> ä¹‹åå†™TestajaxActionï¼š public InputStream input; public String execute() throws Exception{ input = new StringBufferInputStream(&quot;aaaa<td><script>alert(&quot;kxlzx&quot;)</script>aa&quot;); return SUCCESS; } å…¶å®å¤§å®¶éƒ½çœ‹å‡ºæ¥æˆ‘çš„æ„æ€äº†ï¼Œè¿”å›äº†contentTypeä¸ºâ€œtext/htmlâ€çš„é¡µé¢ï¼Œå†…å®¹ä¸º aaaa<td><script>alert(&#39;kxlzx&#39;)</script>aa ç»“æœæµè§ˆå™¨è§£æçš„æ—¶å€™ï¼Œå‡ºç°äº†XSSæ¼æ´ã€‚ æœ¬æ¥é»˜è®¤çš„contentTypeæ˜¯text/plainï¼Œä¸éœ€è¦é…ç½®ï¼Œå¦‚æœç”¨æˆ·ç›´æ¥æ‰“å¼€ï¼Œåªä¼šçœ‹åˆ°ä¸€ä¸ªStreamï¼Œä¸ä¼šè§£æ å…¶ä¸­çš„htmlå’Œjsã€‚ç°åœ¨ä¹¦ä¸Šä»‹ç»è¯´è¦å†™æˆè¿™æ ·ï¼Œä¸çŸ¥é“ä½œè€…æ˜¯å¦çŸ¥é“è¿™ä¸ªæ•™ç¨‹å¯¹å¤§å®¶çš„å½±å“ï¼Œç»“æœå·²ç»è¯¯å¯¼äº† å¤§æ‰¹çš„å¼€å‘äººå‘˜ã€‚ äº‹å®ä¸Šï¼Œè¿™ä¸æ˜¯strutsçš„é—®é¢˜ï¼Œæ˜¯strutsâ€œæƒå¨â€æ•™ç¨‹çš„é—®é¢˜ã€‚æƒå¨çš„æ•™ç¨‹ï¼Œä¸€æ—¦å‡ºç°å®‰å…¨æ¼æ´ï¼Œå¾€å¾€ä¼š è¯¯å¯¼å¤§æ‰¹çš„å¼€å‘äººå‘˜ï¼Œä¸çŸ¥é“å¤§å®¶åœ¨æŒ–æ¼æ´çš„æ—¶å€™ï¼Œæ˜¯å¦æ³¨æ„åˆ°äº†è¿™ç‚¹ï¼Œç‰¹åˆ«æ˜¯å½“å®˜æ–¹çš„DEMOå‡ºç°æ¼æ´ï¼Œ é‚£ç»å¯¹æ˜¯æƒŠå¤©åœ°æ³£é¬¼ç¥çš„æ‚²å‰§ã€‚</p>
<h3 id="struts2-result-">Struts2çš„é‚£äº›resultç±»å‹ç¼ºé™·ï¼ˆè‡ªå®šçš„é¡µé¢ï¼‰</h3>
<p>æœ‰æ—¶å€™ï¼Œå¼€å‘äººå‘˜ä¸ºäº†æ–¹ä¾¿ï¼Œå–œæ¬¢é…ç½®struts.xmlå¦‚ä¸‹ï¼š <action name="test" class="net.inbreak.TestAction"> <result name="success">user/test.jsp</result> <result name="testpro">user/testproperty.jsp</result> <result name="redir" type="redirect">${redir}</result> <result name="testloadfilepath">${testloadfilepath}</result> <result name="false">user/redirfalse.jsp</result> <result name="input">user/input.jsp</result> </action> è¯·æ³¨æ„ï¼Œå…¶ä¸­ä¸€æ¡resultï¼Œåç§°æ˜¯â€testloadfilepathâ€ï¼Œ ${testloadfilepath}çš„ä½œç”¨æ˜¯è‡ªå®šä¹‰çš„jspé¡µé¢ åœ°å€ï¼Œæ¥æ”¶sessionæˆ–requestä¸­ä¼ è¿‡æ¥çš„è¿™ä¸ªå˜é‡çš„å€¼ã€‚é‚£ä¹ˆç”¨æˆ·æäº¤ <a href="http://www.inbreak.net/app/test.action?testloadfilepath=user/test.jsp">http://www.inbreak.net/app/test.action?testloadfilepath=user/test.jsp</a> å½“ç„¶å°±ä¼šè¿”å›user/test.jspé¡µé¢ï¼Œéå¸¸çš„çµæ´»ã€‚è™½ç„¶å¹¶ä¸æ˜¯æ‰€æœ‰çš„å¼€å‘éƒ½ä¼šè¿™ä¹ˆåšï¼Œä½†æ˜¯ä¸€æ—¦å‡ºç°è¿™ç§æƒ…å†µï¼Œ ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ <a href="http://www.inbreak.net/app/test!getRedir.action?redir=testloadfilepath&amp;testloadfilepath=WEB-INF/classes/hibernate.cfg.xml" target="_blank">http://www.inbreak.net/app/test!getRedir.action?redir=testloadfilepath&amp;testloadfilepath=WEB-INF/classes/hibernate.cfg.xml</a> ä¸çŸ¥é“å¤§å®¶çœ‹æ‡‚è¿™æ®µurlçš„å«ä¹‰æ²¡æœ‰ï¼Œå…ˆè°ƒç”¨getRedirï¼Œå¯ä»¥è‡ªå®šä¹‰è¿”å›åˆ°testloadfilepathï¼Œè€Œtestloadfilepath å·²ç»æŒ‡å®šäº†WEB-INF/classes/hibernate.cfg.xmlã€‚WEB-INFç›®å½•ä¸‹ï¼Œéƒ½æ˜¯å—webå®¹å™¨ä¿æŠ¤çš„ä¸œè¥¿ï¼Œé»˜è®¤ä¸å…è®¸ ç›´æ¥requestç›¸å¯¹åœ°å€æ¥è®¿é—®ã€‚è¯¥ç›®å½•é‡Œé¢æœ‰ç¨‹åºç¼–è¯‘åçš„classæ–‡ä»¶ï¼ˆå¯ä»¥è¢«ç›´æ¥åç¼–è¯‘ä¸ºjavaæºç ï¼‰ï¼Œ æœ‰æ•°æ®åº“é…ç½®æ–‡ä»¶ç­‰æ•æ„Ÿæ–‡ä»¶ï¼Œç°åœ¨æ‰“å¼€å¦‚ä¸Šurlï¼Œç›´æ¥è¢«ä¸‹è½½äº†hibernate.cfg.xmlï¼Œè¿™é‡Œæ”¾ç€æ•°æ®åº“ç”¨æˆ·å å’Œå¯†ç ã€‚ <img src="" alt=""> è¿™æ ·ï¼Œæ”»å‡»è€…å°±å¯ä»¥ä¸‹è½½ä½ çš„æ‰€æœ‰æºä»£ç ï¼Œæ‰€æœ‰æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ã€‚strutsåœ¨æä¾›ç»™æˆ‘ä»¬è¿™ç§æ–¹å¼çš„æ—¶å€™ï¼Œ å¹¶æ²¡æœ‰ä»»ä½•å®˜æ–¹è¯´æ˜è¿™é‡Œæœ‰å±é™©ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªä¸å®šæ—¶ç‚¸å¼¹ã€‚</p>
<h3 id="struts2-taglib-">Struts2çš„taglibè®¾è®¡ç¼ºé™·</h3>
<p>ç»è¿‡å‡ ä¸ªä¾‹å­ä¸‹æ¥ï¼Œä¸çŸ¥é“å¤§å®¶æ³¨æ„åˆ°æ²¡æœ‰ï¼Œä»ç”¨æˆ·è¾“å…¥èµ°åˆ°è¿™é‡Œï¼Œå·²ç»èµ°åˆ°äº†è¾“å‡ºè¿™ä¸€æ­¥äº†ã€‚struts2çš„ é‚£äº›resultçš„typeï¼Œå…¶å®å°±æ˜¯å‡ ç§è¾“å‡ºæ–¹å¼ï¼Œæœ‰jspã€ajaxã€redirectï¼Œç»è¿‡jsonpluginç­‰æ’ä»¶é…ç½®ï¼Œè¿˜å¯ä»¥ æ”¯æŒå…¶ä»–è¾“å‡ºæ–¹å¼ã€‚ç”šè‡³æ”¯æŒä¸€äº›æ ‡ç­¾åº“ï¼Œæ¯”å¦‚freemarkerç­‰æ ‡ç­¾åº“ã€‚ä¸è¿‡æˆ‘ä»¬åªè°ˆstruts2è‡ªå¸¦çš„æ ‡ç­¾åº“ï¼Œ åœ¨ä¸€ä¸ªjspé¡µé¢çš„æœ€ä¸Šæ–¹ï¼Œå†™ä¸Šä¸€æ®µä»£ç ï¼Œå°±å¯ä»¥ä½¿ç”¨struts2æä¾›çš„æ•°æ®è¾“å‡ºå’Œé¡µé¢æ•°æ®æ“ä½œçš„æ ‡ç­¾äº†ã€‚ æ¯”ä»¥å¾€æˆ‘ä»¬åœ¨jspè¾“å‡ºâ€œ&lt;%=name%&gt;â€è¦æ–¹ä¾¿çš„å¤šï¼Œä¸‹é¢ç»™ä¸ªä¾‹å­ï¼š test.jspä»£ç  &lt;%@ taglib prefix=&quot;s&quot; uri=&quot;/struts-tags&quot; %&gt; <s:property value="username"/> ç¬¬ä¸€è¡Œæ˜¯å‘Šè¯‰strutsè¿™é‡Œè¦ä½¿ç”¨strutsçš„æ ‡ç­¾åº“ï¼Œç¬¬äºŒè¡Œå°±æ˜¯ä¸€ä¸ªæ ‡ç­¾çš„ä½¿ç”¨ï¼Œå«ä¹‰æ˜¯è¾“å‡ºusernameçš„å€¼ï¼Œ usernameä¼šä»sessionã€requestã€pageç­‰åœ°æ–¹å–ï¼Œè¿™é‡Œä¸å…³æ³¨å–æ•°æ®çš„æ¬¡åºã€‚</p>
<h3 id="struts2-taglib-struts2-0-escapejavascript-">struts2çš„taglibè®¾è®¡ç¼ºé™·ï¼ˆstruts2.0ä¸æ”¯æŒescapeJavaScriptï¼‰</h3>
<p>è¯´åˆ°è¾“å‡ºï¼Œå¤§å®¶éƒ½èƒ½æƒ³åˆ°XSSæ¼æ´ï¼Œé‚£ä¹ˆä½œä¸ºä¸€ä¸ªæµè¡Œæ¡†æ¶ï¼Œstruts2åœ¨è¿™é‡Œåšäº†ä»€ä¹ˆæ§åˆ¶å‘¢ï¼Ÿ struts2.0å¯¹éƒ¨åˆ†æ ‡ç­¾åšäº†é»˜è®¤çš„htmlescapeï¼š åˆšæ‰é‚£ä¸ªæ ‡ç­¾å®é™…ä¸Šæ•ˆæœç­‰äº <s:property value="username" escape="true"/> åˆ«ä»¥ä¸ºåšäº†htmlescapeå°±å¤Ÿäº†ï¼Œè¾“å‡ºåœ¨javascriptä¸­çš„æ—¶å€™ï¼Œè¿˜ä¼šå‡ºç°xssæ¼æ´ã€‚æ‰€ä»¥strutsåœ¨2.1.6è¿™ä¸ªç‰ˆæœ¬ ä¹Ÿæ”¯æŒäº†javascriptescapeï¼š struts2.1.6ï¼š <s:property value="pass" escape="true" escapeJavaScript="false"/> é»˜è®¤å¼€å¯å¦‚ä¸Šæ‰€ç¤ºï¼Œå½“ä½ è¦è¾“å‡ºåˆ°jsä¸­çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨escapeJavaScriptè¿›è¡Œè½¬ä¹‰ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ä½ ç¡®å®šè¿™ä¸ªstrutsæ˜¯2.0çš„ï¼Œåªè¦å¼€å‘äººå‘˜æŠŠå˜é‡è¾“å‡ºåˆ°jsä¸­ï¼Œåæœ‰å…«ä¹ä¼šå‡ºxssé—®é¢˜ã€‚</p>
<h3 id="struts2-taglib-">struts2çš„taglibè®¾è®¡ç¼ºé™·ï¼ˆæ²¡æœ‰å¯Œæ–‡æœ¬å®‰å…¨è¾“å‡ºæ ‡ç­¾ï¼‰</h3>
<p>è€ŒåŒ…æ‹¬æœ€é«˜ç‰ˆæœ¬2.1.8åœ¨å†…ï¼Œä»ç„¶æ²¡æœ‰æ”¯æŒå¯Œæ–‡æœ¬å®‰å…¨è¾“å‡ºï¼Œè¿™æ˜¯ä¸€ä»¶æ‚²å‰§çš„äº‹æƒ…ï¼Œå¦‚æœç”¨strutså¼€å‘ä¸€ä¸ª å¤§ä¼—blogçš„åº”ç”¨ï¼Œåˆæ”¯æŒå¯Œæ–‡æœ¬çš„æ–‡ç« ï¼Œå¼€å‘äººå‘˜åªèƒ½æŠŠhtmlescapeå’Œjsescapeéƒ½å»æ‰ï¼Œæ‰èƒ½ä¿è¯ä¸šåŠ¡æ­£å¸¸ è¿è¡Œï¼Œæ‰€ä»¥å¯¼è‡´äº†XSSæ¼æ´ã€‚</p>
<h3 id="struts2-taglib-htmlescape-">struts2çš„taglibè®¾è®¡ç¼ºé™·ï¼ˆå¹¶ä¸æ˜¯æ‰€æœ‰è¾“å‡ºæ ‡ç­¾éƒ½åšäº†é»˜è®¤çš„htmlescapeï¼‰</h3>
<p>æœ‰å‡ ä¸ªæ ‡ç­¾æ˜¯ä¸åšhtmlescapeçš„ï¼Œæ¯”å¦‚ <s:a> <s:text> <s:url> è¿™å…¶å®æ˜¯ä¸€ä¸ªä¸¥é‡é™·é˜±ï¼Œå› ä¸ºåªè¦æåˆ°struts2ï¼Œå‰è¾ˆä»¬éƒ½ä¼šå‘Šè¯‰ä½ ï¼Œæ”¾å¿ƒä½¿ç”¨ï¼Œå®ƒé»˜è®¤åšäº†htmlescapeã€‚ é‚£æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´ä¸€äº›æ ‡ç­¾æ²¡æœ‰åšé»˜è®¤çš„escapeå‘¢ï¼Ÿä½œè€…ç¿»äº†ä¸‹æºç ï¼Œä¹Ÿæ²¡æœ‰æ‰¾å‡ºå…·ä½“åŸå› ï¼Œä¸çŸ¥é“é‚£äº›äºº æ˜¯æ€ä¹ˆæƒ³çš„ã€‚ å¹¶ä¸”ï¼Œç»è¿‡ç®€å•çš„fuzzï¼Œå‘ç°åœ¨ç‰¹å®šç¯å¢ƒä¸‹ï¼Œé‚£äº›åšäº†è¾“å‡ºè½¬ä¹‰çš„æ ‡ç­¾ä¹Ÿä¼šå‡ºç°é—®é¢˜ã€‚ æˆ‘ä»¬çŸ¥é“é»˜è®¤çš„htmlescapeæ˜¯ä¸è½¬ä¹‰å•å¼•å·çš„ï¼Œæ‰€ä»¥ï¼Œå½“strutsæ ‡ç­¾åº“çš„æºç ä¸­ï¼Œå‡ºç°ä¸€äº›æ ‡ç­¾å±æ€§çš„è¾“å‡º æ—¶ï¼Œå¦‚æœæ ‡ç­¾å±æ€§çš„å‘¨å›´ä½¿ç”¨çš„æ˜¯å•å¼•å·ï¼Œè€Œæ”»å‡»è€…åˆèƒ½æ§åˆ¶æ ‡ç­¾å±æ€§å†…å®¹çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°xssæ¼æ´ã€‚å¦‚ä¸‹ï¼š <input name="username" onclick='xss'> å½“è¿™ä¸ªxssçš„å†…å®¹å¯ä»¥ç”±æ”»å‡»è€…æ§åˆ¶ï¼Œå³ä½¿å¯¹xssçš„å†…å®¹ä½œäº†htmlescapeï¼Œä¾ç„¶å¯ä»¥è¢«æ”»å‡»è€…bypassã€‚ åŸºäºè¿™ä¸ªåŸç†ï¼Œä½œè€…æœç´¢äº†strutsæ ‡ç­¾åº“æºç ï¼Œé‚£äº›â€œXXX.ftlâ€æ–‡ä»¶ä¸­æœç´¢â€œ}&#39;â€ç¬¦å·ï¼Œæ‰¾åˆ°Nå¤šï¼Œæµ‹è¯• å…¶ä¸­ä¸€ä¸ªå¦‚ä¸‹ï¼š ------------- <s:textfield >æ ‡ç­¾ï¼Œåœ¨æ­£å¸¸ä½¿ç”¨çš„æ—¶å€™ï¼Œä»–ä¼šæ”¾åˆ°ä¸€ä¸ª<s:form>æ ‡ç­¾å†…ï¼Œæœ€ç»ˆè¾“å‡ºhtmlåï¼Œä¼šå˜æˆä¸€ä¸ªè¾“å…¥æ¡†ã€‚ å®ƒæœ‰ä¸ªå±æ€§å«â€œtooltipâ€ï¼Œå¦‚æœè¿™ä¸ªæ ‡ç­¾ä¸ºç”¨æˆ·å¯æ§åˆ¶ï¼Œæ¯”å¦‚ä»æ•°æ®åº“ä¸­è¯»å–ç”¨æˆ·è¾“å…¥ï¼Œè€Œè¿™ä¸ªæ ‡ç­¾æ‰€åœ¨çš„ <s:form>å¼€å¯äº†ï¼š <s:form tooltipConfig="/#{'jsTooltipEnabled':'true'}"> çš„æ—¶å€™ï¼Œç”¨æˆ·è¾“å…¥çš„tooltipçš„å€¼ï¼Œä¼šå‡ºç°ä»¥ä¸‹æƒ…å†µï¼š struts2.0 --&gt; <span dojoType="tooltip" ... caption="kxlzx<script></script>"> captionå†…å®¹å°±æ˜¯tooltipçš„å€¼ï¼Œä»æ•°æ®åº“æŸ¥å‡º struts2.1.6&amp;struts2.1.8 --&gt; <img onmouseover="domTT_activate(this, â€¦'StrutsTTClassic');alert('xss');a('','styleClassâ€™â€¦" /> onmouseoverç”Ÿæˆä¸€ä¸ªdomTT_activateå‡½æ•°è°ƒç”¨ï¼Œå‚æ•°ä¸­å…¶ä¸­ä¸€ä¸ªå€¼ï¼Œæ˜¯tooltipçš„å†…å®¹ã€‚è¿™é‡Œè¢«bypassäº†ã€‚ ------------ è¿™äº›æœå‡ºçš„å‡ ä¸ªä¸ªåœ°æ–¹å®é™…ä¸Šæ ¹æœ¬æ²¡æœ‰åšä»»ä½•escapeï¼Œå°±ç›´æ¥è¾“å‡ºäº†æ•°æ®ã€‚ä¸‹é¢é‚£ä¸ªå³ä½¿åšäº†é»˜è®¤çš„ htmlescapeï¼Œè¿˜æ˜¯ä¼šå‡ºé—®é¢˜ï¼Œé™¤éå®ƒé»˜è®¤åšäº†javascriptEscapeã€‚struts2é»˜è®¤æœ‰åœ°æ–¹åšjavascriptEscapeä¹ˆï¼Ÿ ç­”æ¡ˆæ˜¯â€œæ²¡æœ‰â€ã€‚æ‰€ä»¥ï¼Œå®ƒä»¬å…¨éƒ½èƒ½è¢«XSSï¼ <img src="" alt=""> struts2çš„è¿™äº›escapeï¼Œå…¶å®æ˜¯ä¸€ä¸ªå¾ˆå¤ªç›‘çš„å®‰å…¨æ–¹æ¡ˆï¼Œå®‰å…¨å·¥ç¨‹å¸ˆæœ€æ¨çš„å°±æ˜¯è¿™ç§æ–¹æ¡ˆï¼Œåšäº†å®‰å…¨æ–¹æ¡ˆï¼Œ è¿˜ä¸åšå®Œå…¨ï¼Œç•™ä¸‹ä¸€å †é—®é¢˜ã€‚</p>
<h3 id="struts2-http-parameter-pollution-">struts2çš„HTTP Parameter Pollutionå¤„ç†ç¼ºé™·</h3>
<p>webworkå’Œstruts2éƒ½æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå½“ç”¨æˆ·ç»™webåº”ç”¨æäº¤: <a href="http://www.inbreak.net/app/test!redirect.action?redir=kxlzx&amp;redir=aaad61" target="_blank">http://www.inbreak.net/app/test!redirect.action?redir=kxlzx&amp;redir=aaad61</a> æ—¶ï¼Œå¦‚æœæˆ‘ä»¬åœ¨actionä¸­å®šä¹‰äº† private String redir; public String getRedir() { return redir; } public void setRedir(String redir) { this.redir = redir; } Actionå°±ä¼šå–åˆ°redirçš„å€¼ä¸ºâ€œkxlzx, aaad61â€æ³¨æ„ä¸­é—´æ˜¯æœ‰ç©ºæ ¼çš„ã€‚ è¿™ç§æ•°æ®æ˜¯ç”±webworkï¼ˆstruts2ï¼‰æŠŠä¸¤ä¸ªå‚æ•°åˆå¹¶è€Œæˆçš„ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬request.getParameter(&quot;redir&quot;); æ‹¿åˆ°çš„å€¼ï¼Œå´åªæ˜¯ç¬¬ä¸€ä¸ªï¼ˆå€¼ä¸ºkxlzxï¼‰ã€‚ æˆ‘ä»¬çŸ¥é“struts2æå€¡ä½¿ç”¨æ‹¦æˆªå™¨åšä¸€äº›äº‹æƒ…ï¼Œä»–å¯ä»¥åœ¨actionçš„executeæ–¹æ³•æ‰§è¡Œä¹‹å‰å’Œä¹‹ååšä¸€äº›æ“ä½œã€‚ é‚£å°±æœ‰ä¸€äº›å¼€å‘ï¼Œæƒ³å½“ç„¶çš„åœ¨è¿™é‡Œé˜²å¾¡ä¸€ä¸‹urlè·³è½¬ã€SQLæ³¨å…¥ã€XSSç­‰æ”»å‡»ã€‚æˆ‘ä»¬çœ‹çœ‹ä»–ä»¬ä¼šæ€ä¹ˆåšï¼š @Override public String intercept(ActionInvocation arg0) throws Exception { â€¦â€¦ String name = request.getParameter(&quot;name&quot;); if(name!=null&amp;&amp;name.indexOf(&quot;&#39;&quot;)&gt;-1){ System.out.println(&quot;find sql injection&quot;); request.getSession().setAttribute(&quot;msg&quot;, &quot;find sql injection&quot;); return &quot;falseuser&quot;; } String redir = request.getParameter(&quot;redir&quot;); if(redir!=null&amp;&amp;!redir.equals(&quot;<a href="http://www.b.com&quot;)){" target="_blank">http://www.b.com&quot;)){</a> System.out.println(&quot;find url redirect&quot;); request.getSession().setAttribute(&quot;msg&quot;, &quot;find url redirect&quot;); return &quot;falseuser&quot;; } return arg0.invoke(); } åœ¨è¿™æ®µä»£ç ä¸­ï¼Œä½œè€…ä»…ä»…ç¤ºä¾‹äº†åœ¨æ‹¦æˆªå™¨ä¸­é˜²å¾¡sqlæ³¨å…¥å’Œurlè·³è½¬æ¼æ´ï¼Œsqlæ³¨å…¥çš„é˜²å¾¡è§„åˆ™æ˜¯æ£€æŸ¥ â€œâ€™â€å•å¼•å·ï¼Œè€Œurlè·³è½¬æ¼æ´è§„åˆ™æ˜¯æ£€æŸ¥å¿…é¡»è·³è½¬åˆ°â€<a href="http://www.b.comâ€å»ã€‚ä½œè€…çŸ¥é“æ²¡æœ‰å®Œå…¨é˜²å¾¡ï¼Œ" target="_blank">http://www.b.comâ€å»ã€‚ä½œè€…çŸ¥é“æ²¡æœ‰å®Œå…¨é˜²å¾¡ï¼Œ</a> æ‰€ä»¥å¤§å®¶å…ˆä¸è¦åœ¨è¿™é‡Œè¿½ç©¶é˜²å¾¡æ–¹æ¡ˆï¼Œä»…ä»…æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚ è€Œå¼€å‘äººå‘˜åœ¨ä¸šåŠ¡ä»£ç å¦‚ä¸‹ï¼š String sql = &quot;select book_name,book_content from books&quot;; if (name != null) { sql += &quot; where book_name like &#39;%&quot; + name + &quot;%&#39;&quot;; } å¾ˆæ˜æ˜¾èƒ½æ³¨å…¥ã€‚ public String redirect() { return &quot;redir&quot;; } ä¹Ÿæ˜æ˜¾å­˜åœ¨urlè·³è½¬æ¼æ´ã€‚ ä½†æ˜¯ç”±äºæ‹¦æˆªå™¨åœ¨actionä¹‹å‰æ‰§è¡Œï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬è¾“å…¥äº† <a href="http://www.inbreak.net/app/test!findUserByName.action?name=a" target="_blank">http://www.inbreak.net/app/test!findUserByName.action?name=a</a>&#39; æ‹¦æˆªå™¨å½“ç„¶å°±ä¼šè¿”å›é”™è¯¯â€œfind sql injectionâ€ï¼› <img src="" alt=""> å› ä¸ºæ‰§è¡Œåˆ°äº† String name = request.getParameter(&quot;name&quot;); if(name!=null&amp;&amp;name.indexOf(&quot;&#39;&quot;)&gt;-1){ å‘ç°nameçš„å€¼ç¡®å®æœ‰å•å¼•å·ã€‚ ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¾“å…¥äº† <a href="http://www.inbreak.net/app/test!findUserByName.action" target="_blank">http://www.inbreak.net/app/test!findUserByName.action</a> ?name=aaaaa&amp;name=a&#39; union select name,pass from user where &#39;&#39;&lt;&gt;&#39; <img src="" alt=""> å°±ç›´æ¥ç»•è¿‡äº†æ‹¦æˆªå™¨çš„åˆ¤æ–­ã€‚å› ä¸ºæ‹¦æˆªå™¨è·å–çš„request.getParameter(&quot;name&quot;)ï¼Œæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼aaaaaï¼Œ æŠ›å¼ƒäº†ç¬¬äºŒä¸ªå‚æ•°çš„å€¼ï¼Œä½†æ˜¯actionä¸­çš„nameçš„å€¼ï¼Œå´æ˜¯ â€œaaaaa, a&#39; union select name,pass from user where &#39;&#39;&lt;&gt;&#39; â€æ‰€ä»¥è¢«æ³¨å…¥äº† å¤§å¤šæ•°æ‹¦æˆªå™¨éƒ½æ˜¯è¿™æ ·åšçš„é˜²å¾¡ï¼ŒåŒ…æ‹¬ä¸€äº›filterç­‰ã€‚ è¿™ä»¶äº‹æƒ…å‘ç”Ÿåœ¨urlè·³è½¬æ¼æ´æ—¶ï¼Œå´ä¸æ˜æ˜¾ï¼Œå› ä¸ºæ”»å‡»è€…é¡¶å¤šæ„é€ ä¸€ä¸ªï¼š <a href="http://www.inbreak.net/app/test!redirect.action?redir=http://www.b.com&amp;redir=www.inbreak.net" target="_blank">http://www.inbreak.net/app/test!redirect.action?redir=http://www.b.com&amp;redir=www.inbreak.net</a> æŠ“åŒ…çœ‹çœ‹ <img src="" alt=""> å®ƒè·³åˆ°äº†<a href="http://www.b.com" target="_blank">http://www.b.com</a>, www.inbreak.netå»äº†ã€‚æ‰€ä»¥IEç›´æ¥æŠ¥é”™ï¼Œè¯´æ‰“ä¸å¼€è¿™ä¸ªåœ°å€ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜æœ‰åˆ«çš„ æµè§ˆå™¨ï¼Œæ€»æ˜¯å–œæ¬¢ç»™å¤§å®¶å‹å¥½ä¿¡æ¯çš„æµè§ˆå™¨ï¼Œçœ‹çœ‹chromeç»™ç”¨æˆ·ä»€ä¹ˆæç¤ºï¼š <img src="" alt=""> Chromeä¹Ÿè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªé”™è¯¯çš„é“¾æ¥ï¼Œæ‰€ä»¥ç»™å‡ºäº†â€œæ­£ç¡®â€çš„é“¾æ¥åœ°å€ã€‚è¿™ä¸æ˜¯åˆšå¥½è¢«é’“é±¼ç½‘ç«™åˆ©ç”¨ä¹ˆï¼Ÿ struts2çš„å®˜æ–¹æ¼æ´å…¬å‘Šå’Œä¿®è¡¥åå¼•å‘çš„å®‰å…¨ç¼ºé™· ä»æœ‰struts2ï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œå®˜æ–¹ä¸€å…±å‘å¸ƒäº†4ä¸ªæ¼æ´ï¼Œåœ¨ <a href="http://struts.apache.org/2.x/docs/security-bulletins.html" target="_blank">http://struts.apache.org/2.x/docs/security-bulletins.html</a> /<em> S2-001 â€” Remote code exploit on form validation error /</em> S2-002 â€” Cross site scripting (XSS) vulnerability on <s:url> and <s:a> tags /<em> S2-003 â€” XWork ParameterInterceptors bypass allows OGNL statement execution /</em> S2-004 â€” Directory traversal vulnerability while serving static content ä»åå­—ä¸Šï¼Œå¯ä»¥çœ‹å‡ºæ¼æ´çš„å†…å®¹ï¼Œä½œè€…ä»…ä»…å¯¹å…¶ä¸­ä¸¤ä¸ªåšäº†æºç çº§åˆ«çš„æ¼æ´ä¿®è¡¥è¯„ä¼°ï¼Œå‘ç°äº†å¾ˆå¤šæ‚²å‰§çš„äº‹æƒ…ã€‚ åŒå­¦ä»¬æœ‰å…´è¶£å¯ä»¥å»ç ”ç©¶å‰©ä¸‹ä¸¤ä¸ªæ¼æ´ã€‚</p>
<h3 id="struts2-s2-002-">struts2çš„å®˜æ–¹æ¼æ´å…¬å‘Šå’Œä¿®è¡¥åå¼•å‘çš„å®‰å…¨ç¼ºé™·ï¼ˆS2-002ï¼‰</h3>
<p>å…ˆçœ‹çœ‹â€œS2-002 â€” Cross site scripting (XSS) vulnerability on <s:url> and tagsâ€è¿™ä¸ªæ¼æ´ã€‚ é¡¾åæ€ä¹‰æ˜¯å¯¹<s:url>å’Œ<s:url>çš„xssæ¼æ´ä¿®è¡¥ï¼Œä½†æ˜¯å‰æ–‡æåˆ°ï¼Œè¿™é‡Œæœ‰XSSæ¼æ´ï¼Œéš¾é“æ˜¯åœ¨å¿½æ‚ å¤§å®¶ï¼Ÿæˆ‘ä»¬ çœ‹çœ‹è¿™å¸®å·¥ç¨‹å¸ˆæ˜¯æ€ä¹ˆä¿®è¡¥çš„ï¼Œæ¥åˆ°è¿™ä¸ªsvnåœ°å€ï¼š <a href="http://svn.apache.org/viewvc/struts/struts2/trunk/core/src/main/java/org/apache/struts2/views/util/UrlHelper.java?r1=614814&amp;r2=615103&amp;diff_format=h" target="_blank">http://svn.apache.org/viewvc/struts/struts2/trunk/core/src/main/java/org/apache/struts2/views/util/UrlHelper.java?r1=614814&amp;r2=615103&amp;diff_format=h</a> æ³¨æ„è¿™ä¸¤è¡Œï¼š <img src="" alt=""> çœ‹åˆ°è¿™ä¸¤è¡Œä»£ç çš„æ—¶å€™ï¼Œä½œè€…ç¬‘äº†ï¼Œå› ä¸ºä½œè€…ä»¿ä½›çœ‹åˆ°äº†è‡³å°‘ä¸¤ä»¶æ‚²å‰§çš„äº‹æƒ…ï¼Œç°åœ¨æŠŠå®ƒä»¬å†™æˆæ•…äº‹ï¼š ç¬¬1ä»¶æ‚²å‰§çš„äº‹æƒ…ï¼ŒæŸå¹´æŸæœˆæŸæ—¥ï¼Œä¸€ä¸ªè„šæœ¬å°å­ç»™å®˜æ–¹æŠ¥å‘Šæ¼æ´ï¼Œè¯´åœ¨ä½¿ç”¨<s:url>æ ‡ç­¾çš„æ—¶å€™ï¼Œä»£ç ä¸ºï¼š <s:url action="%{/#parameters.url}"></s:url> ä¹‹åä»–è¾“å…¥äº† <a href="http://www.inbreak.net/app/test!testpro.action?url=" target="_blank">http://www.inbreak.net/app/test!testpro.action?url=</a><script>alert(&#39;hacked by kxlzx&#39;)</script> å¹¶å‘Šè¯‰å®˜æ–¹è¿™é‡Œæ˜¯ä¸€ä¸ªXSSæ¼æ´ï¼Œå¸Œæœ›å®˜æ–¹ä¿®è¡¥æ‰ã€‚ å®˜æ–¹å¾ˆé‡è§†ï¼Œä¸€ä¸ªå¼€å‘å°±å»ä¿®è¡¥ï¼Œæ·»åŠ å¦‚ä¸‹åˆ¤æ–­ï¼š if (result.indexOf(&quot;<script>&quot;) &gt;= 0){ result = result.replaceAll(&quot;<script>&quot;, &quot;script&quot;); å¹¶è¿›è¡Œäº†å†’çƒŸæµ‹è¯•ã€åŠŸèƒ½æµ‹è¯•ã€é»‘ç›’æµ‹è¯•ã€ç™½ç›’æµ‹è¯•ã€‚è®¤ä¸ºæ²¡æœ‰é—®é¢˜äº†ï¼Œå› ä¸ºæäº¤æ”»å‡»è€…ç»™çš„æ¶æ„urlåï¼Œè¾“å‡ºäº† scriptalert(&#39;hacked by kxlzx&#39;)</script> ç»“æœå¹¶æ²¡æœ‰åœ¨é¡µé¢æ‰§è¡Œxssè„šæœ¬ã€‚åæ¥é‚£è„šæœ¬å°å­ä¹Ÿæµ‹è¯•äº†ä¸€ä¸‹ï¼Œå‘ç°æ²¡é—®é¢˜ï¼Œè¿™äº‹æƒ…å°±è¿‡å»äº†ï¼Œç’ç€äººæ°‘ å¤§ä¼—ï¼Œæ‚„æ‚„çš„ä¿®è¡¥äº†ã€‚ ç¬¬2ä»¶æ‚²å‰§çš„äº‹æƒ…ï¼Œåˆè¿‡äº†æŸäººæŸæœˆæŸæ—¥ï¼ŒæŸå¦ä¸€ä¸ªè„šæœ¬å°å­åˆå‘äº†æ¼æ´ï¼Œè¿˜æ˜¯é‚£æ®µä»£ç ï¼Œä½†æ˜¯urlæ”¹æˆäº†ï¼š <a href="http://www.inbreak.net/app/test!testpro.action?url=" target="_blank">http://www.inbreak.net/app/test!testpro.action?url=</a>&lt;<script>&gt;alert(&#39;hacked by kxlzx&#39;)</script> æ³¨æ„ï¼Œè¿™é‡Œæ˜¯&lt;<script>&gt;ï¼Œç»è¿‡äº†replaceAllå‡½æ•°åï¼Œåˆšå¥½å˜æˆäº†<script>ï¼Œé‡æ–°ç»„æˆäº†XSSæ¼æ´ã€‚ å®˜æ–¹è¿™æ¬¡ä¸å¾—ä¸é‡æ–°é‡è§†èµ·æ¥ï¼Œå†³å®šæŠŠifåˆ¤æ–­ï¼Œå˜æˆäº†whileï¼Œä¸ç®¡ä½ æœ‰å¤šå°‘&lt;&lt;&lt;&lt;&lt;&lt;<script>&gt;&gt;&gt;&gt;&gt;&gt;ï¼Œéƒ½ç»™ä½ å˜æˆ scriptalert(&#39;hacked by kxlzx&#39;)</script> å¹¶è¿›è¡Œäº†å†’çƒŸæµ‹è¯•ã€åŠŸèƒ½æµ‹è¯•ã€é»‘ç›’æµ‹è¯•ã€ç™½ç›’æµ‹è¯•ã€‚è¿™æ¬¡è¿˜å‘äº†å…¬å‘Šå‡ºæ¥ï¼Œè¯´è¿™é‡Œæ²¡é—®é¢˜äº†ï¼Œæˆ‘ä»¬å¾ˆé‡è§† å®‰å…¨æ¼æ´ï¼Œå·²ç»ä¿®è¡¥äº†ã€‚ ä½œè€…çœ‹åˆ°è¿™é‡Œï¼Œæµ‹è¯•æ–°çš„bypasså®˜æ–¹ä¿®è¡¥ä»£ç çš„urlä¸ºï¼š <a href="http://www.inbreak.net/app/test!testpro.action?url=" target="_blank">http://www.inbreak.net/app/test!testpro.action?url=</a><script kxlzx=kxlzx>alert(&#39;hacked by kxlzx&#39;)</script> äºæ˜¯XSSè„šæœ¬åˆè¢«æ‰§è¡Œäº†ï¼Œå› ä¸ºè¿™é‡Œæ˜¯<script kxlzx=kxlzx>ï¼Œä¸æ˜¯<script>ï¼Œæ‰€ä»¥ä¸ç¬¦åˆåˆ¤æ–­æ¡ä»¶ï¼Œæ²¡æœ‰è¢« replaceAllï¼Œå†æ¬¡bypasäº†æ¼æ´ä¿®è¡¥ã€‚ã€‚ã€‚</p>
<h3 id="struts2-s2-004-">struts2çš„å®˜æ–¹æ¼æ´å…¬å‘Šå’Œä¿®è¡¥åå¼•å‘çš„å®‰å…¨ç¼ºé™·ï¼ˆS2-004ï¼‰</h3>
<p>è¿™ä¸ªæ¼æ´çš„ä¿®è¡¥ï¼Œæ¯”ä¸Šä¸€ä¸ªæ›´åŠ ä»¤äººæ— å¥ˆï¼Œè¿™æ˜¯ä¸€ä¸ª/../è·å–èµ„æºæ–‡ä»¶çš„æ¼æ´ S2-004 â€” Directory traversal vulnerability while serving static content è¦äº†è§£è¿™ä¸ªæ¼æ´çš„æˆå› ï¼Œå¤§å®¶éœ€è¦å…ˆäº†è§£ä¸€ä¸ªçŸ¥è¯†ç‚¹ã€‚ å½“strutsçš„FilterDispatcheræ”¶åˆ°urlè¯·æ±‚å¦‚ä¸‹ä¸¤ä¸ªè·¯å¾„ä¸‹çš„æ–‡ä»¶æ—¶ï¼š <a href="http://www.inbreak.net/app/struts/" target="_blank">http://www.inbreak.net/app/struts/</a> æˆ– <a href="http://www.inbreak.net/app/static/" target="_blank">http://www.inbreak.net/app/static/</a> ä¼šå»å–strutsæ ¸å¿ƒåŒ…çš„core.src.main.resources.org.apache.struts2ä¸‹é¢çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œè¿™äº›èµ„æºæ–‡ä»¶ å…¶å®æ˜¯ä¸€äº›jsè„šæœ¬å’Œä¸€äº›cssæ–‡ä»¶ã€‚å‰æ–‡æåˆ° <img onmouseover="domTT_activate(this, â€¦'StrutsTTClassic');alert('xss');a('','styleClassâ€™â€¦" /> ä»£ç ä¸­çš„domTT_activateï¼Œå…¶å®å°±æ˜¯ <a href="http://www.inbreak.net/app/struts/domTT.js" target="_blank">http://www.inbreak.net/app/struts/domTT.js</a> æ–‡ä»¶ä¸­çš„ä¸€ä¸ªå‡½æ•°ã€‚ åœ¨struts2.0çš„æ—¶å€™ï¼Œåªè¦ä½ æ•¢ä¸ŠæŸå‡ ä¸ªç‰ˆæœ¬çš„struts2ï¼Œæ”»å‡»è€…å°±å¯ä»¥é€šè¿‡ <a href="http://www.inbreak.net/app/struts/..%252f" target="_blank">http://www.inbreak.net/app/struts/..%252f</a> <a href="http://www.inbreak.net/app/struts/..%252f..%252f..%252fWEB-INF/classess/example/Login.class/" target="_blank">http://www.inbreak.net/app/struts/..%252f..%252f..%252fWEB-INF/classess/example/Login.class/</a> æµè§ˆä½ çš„webç›®å½•ï¼Œä¸‹è½½webç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚ å…ˆä¸è¯´æ¼æ´ä¿®è¡¥ï¼Œè¯·è¯»è€…èµ¶ç´§æƒ³æƒ³ï¼Œä½ å…¬å¸çš„å¼€å‘äººå‘˜ï¼Œæ˜¯å¦ä½¿ç”¨äº†struts2ï¼Œå¹¶ä¸”æŠŠ â€œStruts 2.0.0 - Struts 2.0.11.2 â€ä¹‹é—´çš„å‡ ä¸ªç‰ˆæœ¬åŒ…è£…äº†æˆ–è€…æ ¹æœ¬æ²¡æœ‰åŒ…è£…ï¼Œç›´æ¥ä¸Šäº†webåº”ç”¨ã€‚ å¦‚æœæœ‰è¿™ç§æƒ…å†µï¼Œå°±å¯ä»¥ç›´æ¥ç”¨ä»¥ä¸Šæ–¹å¼æ”»å‡»ï¼Œè¿™å‡ å¤©ä½œè€…æ‰¾äº†å‡ ä¸ªå¤§å‹é—¨æˆ·ç½‘ç«™çš„æ¼æ´ï¼Œå‘ç°ä»–ä»¬éƒ½å­˜åœ¨ è¿™ä¸ªæ¼æ´ï¼Œé¡ºä¾¿ä¸‹è½½äº†ä»–ä»¬çš„æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼ŒåŒæ—¶æŠ¥å‘Šäº†æ¼æ´ã€‚ <img src="" alt=""> Strutså®˜æ–¹å¯èƒ½ä¹Ÿå—åˆ°äº†æ”»å‡»ï¼Œäºæ˜¯ä¿®è¡¥äº†ä»£ç ã€‚ ä½œè€…åŒæ ·æŸ¥çœ‹äº†svnä¿®è¡¥è®°å½•ï¼š <a href="http://svn.apache.org/viewvc/struts/struts2/trunk/core/src/main/java/org/apache/struts2/dispatcher/DefaultStaticContentLoader.java?r1=674498&amp;r2=687425&amp;pathrev=687425&amp;diff_format=h" target="_blank">http://svn.apache.org/viewvc/struts/struts2/trunk/core/src/main/java/org/apache/struts2/dispatcher/DefaultStaticContentLoader.java?r1=674498&amp;r2=687425&amp;pathrev=687425&amp;diff_format=h</a> <img src="" alt=""> å¯ä»¥çœ‹åˆ°â€œ if (!name.endsWith(&quot;.class&quot;)) {â€è¿™è¡Œä»£ç åœ¨ä¿®è¡¥æ¼æ´æ—¶ï¼Œè¢«åˆ é™¤äº†ã€‚ ä¿®è¡¥å‰çš„ä»£ç ä¸­ï¼Œä¸ºä»€ä¹ˆä»¥å‰è¦è¿‡æ»¤.classæ–‡ä»¶å‘¢ï¼Ÿæ˜¯å› ä¸ºstrutsæä¾›äº†ä¸€ä¸ªåŠŸèƒ½ï¼š å¦‚æœå¼€å‘äººå‘˜æƒ³è‡ªå·±ä½¿ç”¨è¿™ä¸ªé™æ€æ–‡ä»¶æ˜ å°„çš„åŠŸèƒ½ï¼Œå¯ä»¥é…ç½®web.xml <filter> <filter-name>struts</filter-name> <filter-class> org.apache.struts2.dispatcher.FilterDispatcher </filter-class> <init-param> <param-name>packages</param-name> <param-value>net.inbreak.action</param-value> </init-param> </filter> å¦‚ä¸Šé…ç½®åï¼Œå½“ç”¨æˆ·è¾“å…¥ <a href="http://www.inbreak.net/app/struts/domTT.js" target="_blank">http://www.inbreak.net/app/struts/domTT.js</a> çš„æ—¶å€™ï¼Œå®é™…ä¸Šstrutsä¼šå»æ‰¾net.inbreak.actionè¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„domTT.jsæ–‡ä»¶å‘ç»™ç”¨æˆ·ï¼Œè€Œä¸å†å¯»æ‰¾æ ¸å¿ƒåŒ… çš„é‚£ä¸ªæ–‡ä»¶å¤¹äº†ã€‚è¿™ä¸ªåŠŸèƒ½å¼€æ”¾åï¼Œå®˜æ–¹ä¸ºäº†é˜²æ­¢å¯¹åº”åŒ…ä¸‹çš„classæ–‡ä»¶è¢«ä¸‹è½½ååç¼–è¯‘æˆæºç ï¼Œæ‰€ä»¥å†™äº†è¡Œ ä»£ç ï¼Œè¿‡æ»¤.classæ–‡ä»¶ã€‚ å°±å› ä¸ºè¿™è¡Œä»£ç çš„å­˜åœ¨ï¼Œä¸€æ—¶é—´ï¼Œåˆšå·§åˆæ­£æ˜¯struts2æµè¡Œçš„æ—¶ä»£ã€‚äº’è”ç½‘å¤§æ‰¹çš„æ–‡ç« ä»‹ç»struts2æ ¸å¿ƒæºç ï¼Œ åœ¨ä»‹ç»åˆ°FilterDispatcherçš„æ—¶å€™ï¼Œå¿…ç„¶ä¼šæåˆ°ï¼Œè¿™é‡Œä¼šè¿‡æ»¤.classæ–‡ä»¶ï¼Œå¦‚æœå¼€å‘äººå‘˜ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œ å¯ä»¥æ”¾å¿ƒï¼Œè‡ªå·±çš„classæ–‡ä»¶ä¸ä¼šè¢«äººä¸‹è½½ã€‚ åæ¥å‡ºäº†æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥ç”¨ <a href="http://www.inbreak.net/app/struts/..%252f..%252f..%252fWEB-INF/classess/example/Login.class/" target="_blank">http://www.inbreak.net/app/struts/..%252f..%252f..%252fWEB-INF/classess/example/Login.class/</a> ç»•è¿‡å®˜æ–¹é™åˆ¶ï¼Œä¸‹è½½classæ–‡ä»¶ã€‚æœ€ç»ˆçš„ç¡®ä¿®è¡¥äº†è¿™ä¸ª/../çš„æ¼æ´ã€‚ç„¶è€Œæ‚²å‰§çš„æ˜¯ï¼Œå› ä¸ºclassæ–‡ä»¶å®é™…ä¸Š è¿˜æ˜¯å¯ä»¥è¢«ä¸‹è½½ï¼Œæ‰€ä»¥å®˜æ–¹ä¿®è¡¥çš„åŒæ—¶ï¼Œå»æ‰äº†â€œif (!name.endsWith(&quot;.class&quot;)) { â€è¿™ä¸€è¡Œä»£ç ï¼Œå¯èƒ½æ˜¯ è§‰å¾—è¿™ä¸€è¡Œä»£ç å¤ªä¸¢äººã€‚ æ›¾ç»çš„æ•™ç¨‹ï¼Œè¿˜åœ¨äº’è”ç½‘ä¸Šï¼Œå‘Šè¯‰å¤§å®¶classæ–‡ä»¶ä¸ä¼šè¢«ä¸‹è½½ï¼Œå®˜æ–¹ä¹Ÿå‘è¡¨å£°æ˜ä¿®è¡¥äº†/../æ¼æ´ã€‚ä½†æ˜¯çœ‹åˆ° æ•™ç¨‹çš„å¼€å‘ä»¬ï¼Œå´æ—©å·²æŠŠç›®å½•æ˜ å°„äº†é™æ€æ–‡ä»¶ï¼š <param-name>packages</param-name> <param-value>net.inbreak.action</param-value> å¦‚æœè¿™ä¸ªå¼€å‘çš„net.inbreak.actionåŒ…ä¸‹æœ‰ä¸ªUserLogin.classæ–‡ä»¶ï¼Œåœ¨struts2æœ‰æ¼æ´çš„ç‰ˆæœ¬ï¼Œä¼šé¢ä¸´ æœåŠ¡å™¨ä¸Šæ‰€æœ‰æ–‡ä»¶è¢«ä¸‹è½½çš„å‘½è¿ã€‚å³ä½¿å¼€å‘å‡çº§äº†strutsï¼Œå› ä¸ºæ ¸å¿ƒä»£ç ä¸­çš„classæ–‡ä»¶çš„åˆ¤æ–­å»æ‰äº†ï¼Œ å¯¼è‡´è¿™ä¸ªæ–‡ä»¶è¿˜æ˜¯å¯ä»¥è¢« <a href="http://www.inbreak.net/app/struts/UserLogin.class" target="_blank">http://www.inbreak.net/app/struts/UserLogin.class</a> å®˜æ–¹åœ¨æ²¡æœ‰ä»»ä½•é€šçŸ¥çš„å‰æä¸‹ï¼Œåœ¨æ•™ç¨‹æ»¡å¤©é£å‘Šè¯‰å¤§å®¶classæ–‡ä»¶ä¸ä¼šè¢«ä¸‹è½½çš„å‰æä¸‹ï¼Œä¸ºäº†é¢å­æ‚„æ‚„çš„ å–æ‰äº†è¿™ä¸ªåˆ¤æ–­ã€‚è¿™å›å¥½äº†ï¼Œæ— è®ºå‡çº§å¦ï¼Œéƒ½ä¸è®©äººæ¶ˆåœï¼Œä¸‡ä¸€å¼€å‘äººå‘˜å¤´è„‘å‘çƒ­ï¼Œé…ç½®å¦‚ä¸‹ï¼š <param-name>packages</param-name> <param-value>/</param-value> å°±å‡ºå¤§äº‹äº†ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½èµ„æºç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ã€‚ <a href="http://www.inbreak.net/app/struts/hibernate.cfg.xml" target="_blank">http://www.inbreak.net/app/struts/hibernate.cfg.xml</a> <img src="" alt=""></p>
<h3 id="-">æ€»ç»“</h3>
<p>ä½œè€…æŒ–äº†struts2çš„ä¸€äº›æ¼æ´ï¼Œä¹ŸæŒ–äº†ä¸€äº›webå…¶ä»–æ¡†æ¶çš„æ¼æ´ï¼ˆä¸åœ¨æœ¬æ–‡èŒƒå›´ï¼‰ï¼Œæ€»ç»“ä¸‹æŒ–å–è¿™äº›æ¡†æ¶æ¼æ´ çš„æ–¹å¼ã€‚ é¦–å…ˆï¼Œæ˜¯ä¸Šä¸ä¸Šæ¡†æ¶çš„é—®é¢˜ã€‚ä¸€æ—¦å¼€å‘ç”¨äº†è¿™äº›æ¡†æ¶ï¼Œwebåº”ç”¨ä¼šç›´æ¥é¢ä¸´ä¸€äº›æ¼æ´ï¼š</p>
<h3 id="1-">1ï¼Œå¼€æ”¾äº†æŸåŠŸèƒ½ï¼Œå¯¼è‡´é‡‡ç”¨æ¡†æ¶çš„åº”ç”¨é»˜è®¤æ¼æ´</h3>
<p>å› ä¸ºè¿™ä¸ªæ¡†æ¶åœ¨æœªç»å…è®¸çš„æƒ…å†µä¸‹ï¼Œæ‚„æ‚„çš„æ‰“å¼€äº†æŸäº›åŠŸèƒ½ï¼Œå¯èƒ½æ˜¯ä¸ºäº†æ–¹ä¾¿å¼€å‘ç­‰ä½œç”¨ï¼Œç»“æœå¯¼è‡´äº†æ¼æ´ çš„äº§ç”Ÿã€‚ ä¸¾ä¸ªä¾‹ï¼š æ¯”å¦‚DWRè¿™ä¸ªAJAXæ¡†æ¶ä¸€æ—¦ä½¿ç”¨ï¼Œåœ¨æŸäº›ç‰ˆæœ¬é‡Œï¼Œè¾“å…¥ <a href="http://www.inbreak.net/app/dwr/" target="_blank">http://www.inbreak.net/app/dwr/</a> å°±èƒ½çœ‹åˆ°ä¸€ä¸ªé¡µé¢ï¼Œé‡Œé¢æ˜¯æ‰€æœ‰ajaxæ–¹æ³•çš„æ˜ å°„ï¼Œç”šè‡³ä¸€äº›serviceæ–¹æ³•æ²¡æœ‰é…ç½®ï¼Œè‡ªåŠ¨æ˜ å°„äº†å‡ºæ¥ã€‚ ä½ å¯ä»¥åœ¨è¿™ä¸ªé¡µé¢ç»™é‚£äº›æ˜ å°„å‡ºæ¥çš„æ–¹æ³•æäº¤å‚æ•°ï¼Œè°ƒç”¨æ–¹æ³•ã€‚æ¯”å¦‚æœ‰ä¸ªgetUserpasswdByidçš„æ–¹æ³•ï¼Œçœ‹åç§° å°±çŸ¥é“ï¼Œä¼ é€’ç”¨æˆ·idï¼Œè¿”å›å¯†ç ã€‚ <img src="" alt=""> å†ä¸¾ä¾‹å°±æ˜¯æœ¬æ–‡ä¸­çš„struts2çš„../../æ¼æ´ã€‚ å¦‚æœè¦æŒ–è¿™ç§æ¼æ´ï¼Œç»å¯¹æ˜¯0dayçº§åˆ«çš„æ¼æ´ï¼Œæ‰€ä»¥å¤§å®¶æœ‰å¿…è¦æ€€ç–‘æ¯ä¸€ä¸ªå®ç°æ­¥éª¤ï¼Œè¿™ç§æ¼æ´å…¶å®å¤§éƒ¨åˆ†å°± å‡ºç°åœ¨å¼€å‘ç¯å¢ƒå’Œæ­£å¼ç¯å¢ƒçš„å·®å¼‚ï¼Œä»¥åŠä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„åŠŸèƒ½ç‚¹ä¸Šã€‚</p>
<h3 id="2-">2ï¼Œæ‰©å±•äº†æŸåŠŸèƒ½ï¼Œå¯¼è‡´å®‰å…¨é—®é¢˜</h3>
<p>æˆ‘ä»¬çš„webåº”ç”¨ï¼Œæœ¬æ¥æ˜¯å¯ä»¥è‡ªå·±å†™ä»£ç å®ç°ä¸€äº›åŠŸèƒ½çš„ï¼Œä½†æ˜¯è¿™ä¸ªæ¡†æ¶ä¸ºäº†æ–¹ä¾¿å¼€å‘å’Œç®¡ç†ï¼ŒæŠŠå¼€å‘äººå‘˜ è¦å†™çš„ä»£ç åŒ…è£…äº†ä¸‹ï¼Œåªè¦ç®€å•çš„å‡ è¡Œå°±èƒ½å®ç°åŸæœ¬å¤§æ‰¹ä»£ç æ‰èƒ½åšåˆ°çš„åŠŸèƒ½ã€‚è€Œè¿™äº›ä¾¿åˆ©ï¼Œå´å¸¦æ¥äº†å¾ˆå¤š å®‰å…¨é—®é¢˜ã€‚æŒ–æ¼æ´çš„åŒæ—¶ï¼Œåº”è¯¥ç‰¹åˆ«æ³¨æ„å“ªäº›åœ°æ–¹æ¯”åŸæ¥æ–¹ä¾¿äº†å¾ˆå¤šï¼Œæ‰©å±•äº†å¾ˆå¤šï¼Œè¿™äº›æ‰©å±•å’Œæ–¹ä¾¿ï¼Œæ˜¯å¦ è€ƒè™‘åˆ°äº†å®‰å…¨å› ç´ ã€‚ æ¯”å¦‚æœ¬æ–‡ä»‹ç»çš„strutsçš„resultï¼ˆurlredirectï¼‰ç›¸å…³æ¼æ´ã€‚</p>
<h3 id="3-demo-">3ï¼ŒDEMOæˆ–æ•™ç¨‹æˆ–ç”¨æˆ·æŒ‡å—è¯¯å¯¼</h3>
<p>è‡ªä»æ¡†æ¶å‡ºç°åï¼Œä¸ºäº†è®©äººä»¬æœ€å¿«çš„äº†è§£å’Œä½¿ç”¨æ¡†æ¶ï¼Œå®˜æ–¹å‡ºäº†å¾ˆå¯¹ç”¨æˆ·æ‰‹å†Œï¼Œdemoç­‰åŠŸèƒ½ã€‚è€Œå¾ˆå¤šå¤§ç‰›ä»¬ï¼Œ ä¹Ÿç›¸åº”çš„å‡ºäº†æ•™ç¨‹æˆ–è€…ä¹¦ç±ï¼Œä½†æ˜¯è¿™äº›æ•™ç¨‹ï¼ŒDEMOï¼Œä¹¦ç±ä¸Šçš„ä¾‹å­ï¼Œæ°æ°äº§ç”Ÿäº†å¾ˆå¤šæ¼æ´ã€‚ç”šè‡³å¼€å‘æœ¬æ¥ ä¸æŒ‰ç…§æ•™ç¨‹èµ°ï¼Œä¸ä¼šæœ‰æ¼æ´ï¼Œå´è¢«æ•™ç¨‹è¯¯å¯¼äº†ã€‚å¦‚æœé»‘å®¢çœ‹åˆ°è¿™äº›ä¹¦ç±ï¼Œè¯·ç«‹åˆ»æŠŠä»–åˆ—åˆ°ä½ çš„æ‰«æå™¨ä¸­ï¼Œ ç»å¯¹æœ‰ä¸å°‘å¼€å‘ä¼šæŒ‰ç…§æ•™ç¨‹ä¸Šå»åšã€‚ ä¾‹å¦‚æœ¬æ–‡æåˆ°çš„é‚£ä¸ªä¹¦ç±ä»‹ç»æˆ‘ä»¬ä½¿ç”¨ajaxçš„äº‹æƒ…ã€‚</p>
<h3 id="4-">4ï¼ŒåŸæœ¬æœ‰å®‰å…¨æ–¹æ¡ˆï¼Œä½†æ˜¯è¢«æŸåŠŸèƒ½ä»£ç è¦†ç›–</h3>
<p>è¿™å…¶å®æ˜¯ä¸€ä»¶æ‚²å‰§çš„äº‹æƒ…ï¼Œå‘Šè¯‰æˆ‘ä»¬è¦æ³¨æ„åœ¨æ—¥å¸¸å¼€å‘ä¸­å’Œæ¼æ´ä¿®è¡¥ä¸­ï¼Œæ˜¯å¦æœ‰ä¸æ˜çœŸç›¸çš„å¼€å‘äººå‘˜ï¼Œ ä¸ºäº†å®ç°æŸä¸ªåŠŸèƒ½ï¼Œæ‚„æ‚„çš„æŠŠåŸæœ¬çš„å®‰å…¨æ–¹æ¡ˆæ–­ç« å–ä¹‰çš„è¦†ç›–æ‰äº†ã€‚æŒ–æ¼æ´çš„æ—¶å€™ï¼Œè¦ç‰¹åˆ«æ³¨æ„å®‰å…¨æ–¹æ¡ˆé™„ä»¶ çš„ä»£ç å˜åŠ¨ï¼Œå¾ˆå¯èƒ½å‘ç°éå¸¸å¼±æ™ºçš„é€»è¾‘é—®é¢˜ã€‚ ä¾‹å¦‚æœ¬æ–‡æäº¤çš„classæ–‡ä»¶çš„åˆ¤æ–­ã€‚</p>
<h3 id="5-">5ï¼Œä¸å®Œå–„çš„å®‰å…¨</h3>
<p>ä¸€ä¸ªå®‰å…¨æ–¹æ¡ˆçš„å®æ–½ï¼Œåº”è¯¥æ˜¯å½»å¤´å½»å°¾çš„ï¼Œè¦æ³¨æ„æ–¹æ¡ˆçš„å®Œæ•´æ€§ï¼Œä¸èƒ½æœ‰äº›åœ°æ–¹æ–¹æ¡ˆOKï¼Œæœ‰äº›åœ°æ–¹ä¸èƒ½å®æ–½ã€‚ åœ¨æŒ–æ¼æ´çš„æ—¶å€™ï¼Œä¹Ÿä¸è¦è¢«å®‰å…¨æ–¹æ¡ˆå“ä½ï¼Œå¹¶ä¸æ˜¯æœ‰äº†æ–¹æ¡ˆï¼Œå¬èµ·æ¥ç‰›Xï¼Œå°±ç»å¯¹ä¸ä¼šæœ‰æ¼æ´çš„ï¼Œæœ€èµ·ç åº”è¯¥ ç»è¿‡å…¨é¢fuzzã€‚ ä¾‹å¦‚æœ¬æ–‡æåˆ°çš„XSSé—æ¼ç‚¹ï¼Œä»¥åŠå¯Œæ–‡æœ¬çš„é—æ¼ã€‚</p>
<h3 id="6-">6ï¼Œç‰ˆæœ¬å‡çº§åï¼Œæ²¡æœ‰é†’ç›®å®‰å…¨å…¬å‘Š</h3>
<p>æˆ‘ä»¬çŸ¥é“æ‰€æœ‰çš„æ¶æ„å¸ˆéƒ½ä¸æ„¿æ„æœ‰äº‹æ²¡äº‹å‡çº§æ¡†æ¶ï¼Œç‰¹åˆ«æ˜¯ä¸ç¨³å®šçš„æ¡†æ¶ç‰ˆæœ¬ï¼Œå› ä¸ºè¿™ä¸ªå‡çº§å¯èƒ½å¸¦æ¥å¾ˆå¤š ä¸å¯é¢„æ–™çš„é—®é¢˜ï¼Œæ‰€ä»¥å¯èƒ½å³ä½¿çœ‹åˆ°äº†å®‰å…¨å…¬å‘Šï¼Œä¹Ÿæ²¡æœ‰å»å‡çº§ã€‚å¦‚æœä¸æ‡‚å®‰å…¨ï¼Œæ›´ä¸æ„¿æ„å‡çº§æ¡†æ¶äº†ã€‚ æ‰€ä»¥å®˜æ–¹å¿…é¡»åšåˆ°ä¸€ä¸ªæ¼æ´çš„ä¿®è¡¥ï¼Œä¸€ä¸ªå…¬å‘Šçš„å‘å¸ƒï¼Œå¿…é¡»å¸¦æœ‰ç›¸å…³çš„ä»£ç logã€‚å‘Šè¯‰å¤§å®¶å…·ä½“å“ªé‡Œåšäº†æ”¹åŠ¨ã€‚ è€ŒæŒ–æ¼æ´çš„åŒå­¦æ›´åº”è¯¥ç›¯ç´§è¿™äº›åœ°æ–¹ï¼Œç™¾èˆ¬æ¨æ•²å’Œæµ‹è¯•ä¿®æ”¹çš„éƒ¨åˆ†ï¼Œä¸è¦è¢«ä¸€æ¬¡å…¬ç”¨çš„æµ‹è¯•ç»“æœå“åˆ°ï¼Œæ¨¡ç³Šçš„ è®¤ä¸ºæ¼æ´å·²ç»ä¿®è¡¥äº†ã€‚</p>
<h3 id="7-">7ï¼Œæ‚²å‰§çš„æ–¹æ¡ˆ</h3>
<p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å®˜æ–¹ä¿®è¡¥æ¼æ´ï¼Œæˆ–è€…ä¸€äº›å®‰å…¨æ–¹æ¡ˆçš„å®æ–½ç»“æœã€‚é‚£æ˜¯ä¸æ˜¯çœŸçš„éƒ½èƒ½è¾¾åˆ°ä¿®è¡¥æ¼æ´çš„ æ•ˆæœå‘¢ï¼Ÿ ä¾‹å¦‚æœ¬æ–‡çš„<s:url>æ ‡ç­¾çš„xssæ¼æ´ï¼Œå®˜æ–¹éƒ½è¿™ä¸ªæ¼æ´çš„ä¿®è¡¥ï¼ŒçœŸæ˜¯ç»å°½è„‘æ±ï¼Œæœ€ç»ˆè¿˜æ˜¯æ‚²å‰§äº†ã€‚</p>
<h3 id="8-">8ï¼Œä¼˜ç§€çš„æ–¹æ¡ˆï¼Œæ‚²å‰§çš„æ‰§è¡Œ</h3>
<p>RTï¼Œä¸å†è¯´æ˜ã€‚</p>
<h3 id="9-web-">9ï¼ŒæŒ‘æˆ˜webæœåŠ¡å™¨é…ç½®</h3>
<p>è¿™ä¸ªé—®é¢˜æœ‰å¿…è¦è¯´ä¸€è¯´ï¼Œstrutsæœ‰äº‹æ²¡äº‹åšä¸ªé™æ€æ˜ å°„åšä»€ä¹ˆï¼Ÿå…¶å®æ˜¯ç›®çš„å°±æ˜¯ä¸ºäº†æ¡†æ¶å’Œåº”ç”¨åˆ†ç¦»ï¼Œå¾ˆ æ˜æ˜¾é‚£äº›jsæ–‡ä»¶åº”è¯¥æ”¾åœ¨é¡¹ç›®ä¸­çš„webç›®å½•ä¸‹ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¦åšå‘¢ï¼Ÿè¿˜ä¸æ˜¯å› ä¸ºstrutsåŒ…å‘å¸ƒçš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰ é¡¹ç›®ï¼Œåªæœ‰æ¡†æ¶ã€‚ å®ƒä¸ºäº†è¾¾åˆ°å³ä½¿ä¸Šäº†ä»»ä½•é¡¹ç›®ï¼Œä¹Ÿèƒ½æœ‰åŠæ³•è®¿é—®åˆ°å®ƒæä¾›çš„é‚£äº›jsçš„ç›®çš„ï¼Œåªå¥½è¢«é€¼æ— å¥ˆåšäº†è¿™ä¸ªåŠŸèƒ½ï¼Œé™æ€ ç›®å½•æ˜ å°„ã€‚æ— è®ºä»»ä½•é¡¹ç›®ï¼Œéƒ¨ç½²åï¼Œåªè¦urlåé¢æ ¹ç›®å½•åŠ ä¸Š/strutsï¼Œæˆ–è€…/staticå°±å¯ä»¥è®¿é—®jsã€‚åæ¥åšäº† è¿™ä¸ªåŠŸèƒ½æ„Ÿè§‰è‰¯å¥½è¿˜ä¸ç®—ï¼Œå±…ç„¶æŠŠåŠŸèƒ½æä¾›å‡ºæ¥ï¼Œç»™æ¨èç»™å¼€å‘äººå‘˜ä½¿ç”¨ã€‚å½’æ ¹ç»“åº•æ˜¯å› ä¸ºstrutsæŒ‘æˆ˜äº† webæœåŠ¡å™¨çš„é…ç½®ï¼Œéè¦è‡ªå·±åšé™æ€æ˜ å°„ã€‚è¦çŸ¥é“äººå®¶webæœåŠ¡å™¨åšçš„æ˜ å°„ï¼Œæ˜¯ç»è¿‡å¤šå°‘å¹´é»‘å®¢å…¥ä¾µæ‰“ç£¨å‡ºæ¥çš„ï¼Œ strutsæœ‰å—ï¼Ÿ è¿™ç§æƒ…å†µçªå‡ºåœ¨å•ç‹¬æ˜ å°„æŸç›®å½•ï¼Œå•ç‹¬å¯¹æŸç›®å½•åšæƒé™ï¼ŒåšDIRåˆ—è¡¨ç­‰åŠŸèƒ½ï¼Œå¦‚æœä½ çœ‹åˆ°ä¸€ä¸ªæ¡†æ¶ä¹Ÿåšäº†è¿™ç§ åŠŸèƒ½ï¼Œæ­å–œä½ ï¼èµ¶å¿«å»æŒ–ï¼Œåæœ‰å…«ä¹å­˜åœ¨æ¼æ´ï¼</p>
<h3 id="10-">10ï¼Œæ²¡æœ‰å®‰å…¨æ–¹æ¡ˆï¼Œä¹Ÿæ²¡æœ‰æé†’</h3>
<p>æœ¬æ–‡å…¶å®æ²¡æœ‰æåˆ°ä¸€äº›webæ¼æ´ï¼Œæ¯”å¦‚csrfï¼Œæ¯”å¦‚session fixï¼Œæ¯”å¦‚ä¼ è¾“åŠ å¯†ç­‰ï¼Œå¾ˆæ˜æ˜¾strutsæ˜¯å­˜åœ¨æ¼æ´ çš„ï¼Œåªæ˜¯ä½œè€…è§‰å¾—è¿™äº›ä¸œè¥¿æ²¡å¿…è¦è¿™é‡Œè¯´ï¼Œå¤§å®¶éƒ½æ˜¯æ˜çœ¼äººï¼Œçœ‹åˆ°formé‡Œæ²¡æœ‰tokenï¼Œç™¾åˆ†ç™¾csrfå˜›ï¼ æƒ³æƒ³å®˜æ–¹ï¼Œå®˜æ–¹ä¹Ÿæ˜æ˜çŸ¥é“ä¸Šäº†è‡ªå·±çš„æ¡†æ¶åï¼Œä¼šå­˜åœ¨è¿™äº›æ¼æ´ï¼Œä¸ºä»€ä¹ˆè¿ä¸ªæé†’éƒ½æ²¡æœ‰å‘¢ï¼Ÿæœ¬æ¥å¼€å‘å°± ä¸çŸ¥é“ï¼Œä½ åˆè—ç€æ–ç€ã€‚å¦‚æœæ¡†æ¶è´Ÿè´£ä»»ï¼Œå‘ä¸ªå…¬å‘Šï¼Œè¯´å¦‚æœä½ ç”¨äº†æˆ‘çš„æ¡†æ¶ï¼Œå®é™…ä¸Šè¦å°å¿ƒä»€ä¹ˆä»€ä¹ˆæ”»å‡»ã€‚ã€‚ã€‚ å‘ƒã€‚ã€‚ã€‚æˆ‘æ˜ç™½å®˜æ–¹ä¸ºä»€ä¹ˆä¸æ•¢è¯´äº†ã€‚-_-! è¿™äº›æ¡†æ¶é™¤äº†é‚£äº›â€œåªè¦ä½ ç”¨ï¼Œå¿…ç„¶æœ‰æ¼æ´â€çš„å®‰å…¨ç¼ºé™·å¤–ï¼Œè¿˜æœ‰ä¸å°‘é—®é¢˜ï¼Œä¼šå‡ºç°åœ¨å¼€å‘äººå‘˜ä½¿ç”¨æ¡†æ¶çš„ è¿‡ç¨‹ä¸­ï¼š 1ï¼Œä¸¤ä¸ªæ¡†æ¶éƒ½æ–¹ä¾¿ï¼Œç»“åˆèµ·æ¥æœ‰æ¼æ´ æœ‰ä¸ªæ¡†æ¶å«åšSpring securityï¼Œæ˜¯åŸºäºurlçš„è®¿é—®æƒé™æ§åˆ¶ï¼Œåšçš„å¾ˆå¥½ã€‚å¦‚æœä½ ä¸æ˜¯ç®¡ç†å‘˜ï¼Œç»å¯¹ä¸èƒ½ è®¿é—®adminç›®å½•ã€‚ä½†æ˜¯æœ‰å¾ˆå¤šwebæ¡†æ¶ï¼Œè®¿é—®ä¸€ä¸ªactionæˆ–è€…è®¿é—®ä¸€ä¸ªcontrollerï¼Œä¸æ­¢ä¸€ä¸ªurlå¯ä»¥è®¿é—®ï¼Œ åœ¨è¿™é‡Œåšäº†å…¼å®¹æ€§å¤„ç†ï¼Œå¤šä¸ªurlæŒ‡å‘åŒä¸€ä¸ªåº”ç”¨ï¼Œå¯¼è‡´Spring securityè¿™ç§åŸºäºurlçš„è®¿é—®æ§åˆ¶ï¼Œåå­˜å®äº¡ã€‚ 2ï¼Œå¼€å‘äººå‘˜â€œæ­£å¸¸â€ä½¿ç”¨æ¡†æ¶åï¼Œå¯èƒ½äº§ç”Ÿæ¼æ´ è¿™æ˜¯æœ€æœ€æƒ¨çš„äº‹æƒ…ï¼Œæ¡†æ¶ç»å¯¹ä¸ä¼šè®¤é¢†è¿™ç§ç±»å‹çš„æ¼æ´çš„ï¼Œä»–ä¼šè®¤ä¸ºè¿™æ˜¯å¼€å‘çš„é—®é¢˜ã€‚ç„¶è€Œæœ¬æ–‡çš„ â€œactionæ–¹æ³•æš´åŠ›ç ´è§£ã€url redirectæ‰©å¤§åŒ–â€è¿™ä¸¤ä¸ªå®‰å…¨ç¼ºé™·ï¼Œå®é™…ä¸Šä¹Ÿæ˜¯æ¡†æ¶å­˜åœ¨çš„æ„ä¹‰ï¼ˆæ–¹ä¾¿å¼€å‘ï¼‰ å¸¦æ¥çš„åæœã€‚å®˜æ–¹ä¼šä¿®è¡¥ä¹ˆï¼Ÿæˆ‘æƒ³å®ƒé¡¶å¤šä¼šè¯´ï¼Œå¤§å®¶ä¸è¦è¿™æ ·é‚£æ ·è€Œå·²ï¼Œç»å¯¹ä¸ä¼šåšä»€ä¹ˆå®‰å…¨æ–¹æ¡ˆçš„ã€‚ è¦çŸ¥é“è¿™äº›æ¼æ´æ˜¯å…·æœ‰strutsæˆ–è€…webworkç‰¹è‰²çš„ï¼Œåªæœ‰ä½¿ç”¨äº†è¿™äº›æ¡†æ¶æ‰ä¼šæœ‰çš„ã€‚ 3ï¼Œå±é™©åŠŸèƒ½ç‚¹ æ¡†æ¶å¸¦æ¥äº†ä¸€äº›åŠŸèƒ½ç‚¹ï¼Œæ¯”å¦‚Tag libçš„ä¸€äº›XSSï¼Œåªè¦ä½¿ç”¨ï¼Œå¿…å®šæœ‰æ¼æ´ã€‚ 4ï¼Œæ¡†æ¶ç»™å¼€å‘æŒ–å‘ è¿™æ ¹æœ¬å°±æ˜¯é™·é˜±ï¼Œè¿˜æ˜¯è¦è¯´/staticã€/strutsï¼Œå¦‚æœå¼€å‘ä¸é…ç½®ï¼Œé¡¶å¤šä¸‹è½½ä¸ªjsï¼Œå½±å“ä¸å¤§ï¼Œä¸‡ä¸€å¼€å‘ä½¿ç”¨ äº†è¿™ä¸ªåŠŸèƒ½ï¼Œæ˜ å°„äº†æŸä¸ªç›®å½•ï¼Œé‚£å°±æ‰è¿›å‘é‡Œå»äº†ã€‚ 5ï¼Œä¸€ä¸ªæ¡†æ¶å¸¦æ¥çš„æ¼æ´è¢«å¦ä¸€ä¸ªæ¡†æ¶æœ€å¤§åŒ– æœ¬æ–‡æåˆ°äº†å˜é‡é»˜è®¤å€¼è¢«è¦†ç›–åï¼Œåˆå› ä¸ºhibernateä¸éœ€è¦å†™sqlè¯­å¥ï¼Œè€Œæœ€ç»ˆè¢«å­˜å‚¨è¿›äº†æ•°æ®åº“ä¸­ã€‚ å›æƒ³ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœè®©æˆ‘ä»¬è‡ªå·±å†™sqlè¯­å¥å®ç°ï¼Œéš¾é“åœ¨æ·»åŠ æ™®é€šç”¨æˆ·çš„æ—¶å€™ï¼Œä¼šçœŸçš„ä¸“é—¨å†™ä¸ªå˜é‡ï¼Œ æ¥æ”¶ç”¨æˆ·ä¼ è¿›æ¥æ³¨å†Œç®¡ç†å‘˜çš„å­—æ®µä¹ˆï¼Ÿ ä½†æ˜¯è¿™æ˜¯hibernateå¾—é—®é¢˜ä¹ˆï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œåªæ˜¯å› ä¸ºæœ‰äº†å®ƒï¼Œå¯¼è‡´æ¼æ´æ›´åŠ ä¸¥é‡è€Œå·²ã€‚</p>
<h3 id="-">è¡¥å……</h3>
<p>æœ¬æ–‡å¯¹struts2çš„ç§ç§å®‰å…¨ç¼ºé™·ï¼Œå°±æåˆ°è¿™é‡Œã€‚ä¸ªäººè§‰å¾—è¿™æ˜¯ä¸€ä¸ªæŒ–æ¼æ´çš„æ–¹å‘ï¼Œå¯¹frameworkæ¼æ´çš„æŒ–æ˜ã€‚ å¯èƒ½å¤§å®¶éƒ½ä¸“æ³¨äºä»£ç å®‰å…¨ï¼Œæ²¡æœ‰å¤ªå¤šçš„å»çœ‹æ¡†æ¶æœ¬èº«æ˜¯å¦å®‰å…¨ï¼Œä»¥åŠä½¿ç”¨äº†æ¡†æ¶åï¼Œæ˜¯å¦çœŸçš„å®‰å…¨ã€‚ æ‰€ä»¥å¾ˆå¤šäººå¿½ç•¥è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ç›¸ä¿¡è¿™ä¸æ˜¯ä¸€ä¸ªæ–°çš„å¼€å§‹ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªç»“æŸï¼Œåªæ˜¯è®©å¤§å®¶å¼€å§‹æ›´åŠ é‡è§†æ¡†æ¶å®‰å…¨ã€‚ ä½œè€…ä¹Ÿä»…ä»…åœ¨æœ¬æ–‡æåˆ°äº†strutsï¼Œwebworkè¿™ä¸¤ä¸ªæ¡†æ¶ï¼Œäº‹å®ä¸Šæ¡†æ¶å¾ˆå¤šï¼Œä»–ä»¬çœŸçš„å®‰å…¨ä¹ˆï¼Ÿæœ‰å¾…è€ƒè¯ï¼ æœ€åå†™ç»™é‚£äº›çœŸæ­£æ‰“ç®—æŠŠæŠ€æœ¯åº”ç”¨äºå®è·µçš„åŒå­¦ä»¬ï¼Œæ¡†æ¶æ¼æ´æ‰«æå™¨ï¼Œæ˜¯å¯ä»¥åšå‡ºæ¥çš„ï¼Œå¯¹äºéš¾ä»¥è§£å†³çš„çŒœè§£ é—®é¢˜ï¼Œå¯ä»¥å¯¹ç½‘ç«™èœ˜è››ä¸€ä¸‹ï¼Œç„¶åä¿å­˜é‚£äº›å¼€å‘äººå‘˜å–œæ¬¢ä½¿ç”¨çš„å­—æ®µåç§°ï¼Œå…³æ³¨å„ä¸ªinputçš„åå­—ï¼Œactionçš„ åå­—ï¼Œç›®å½•åå­—ç­‰ï¼Œç”ŸæˆçŒœè§£ä¸€ä¸ªåˆ—è¡¨ã€‚è€Œåˆ¤æ–­æ˜¯å¦ç”¨äº†strutsæ›´åŠ ç®€å•ï¼š ç‰¹å¾1ï¼šXXX.action å¯èƒ½æ˜¯strutsæˆ–webwork ç‰¹å¾2ï¼šXXX.do å¯èƒ½æ˜¯strutsæˆ–webwork ç‰¹å¾3ï¼šXXX!bbb.action å¯èƒ½æ˜¯strutsæˆ–webwork ç‰¹å¾4ï¼šXXX/struts/..%252f å¿…ç„¶æ˜¯struts2 å…¶ä»–ç»†èŠ‚å¤„ï¼Œä¸å†ä¸€ä¸€ç»™å‡ºï¼Œæœ‰å¾…å¤§å®¶å‘æ˜ã€‚ ç›¸å…³çš„æ¼æ´ä¿®è¡¥æ–¹å¼ï¼Œä½œè€…ä¸åœ¨æ­¤å¤„çŒ®ä¸‘ï¼Œè¯·å¤§å®¶æ ¹æ®æ¼æ´åŸç†è‡ªè¡Œå¤„ç†ã€‚</p>
<h3 id="-">æ„Ÿè°¢</h3>
<p>---------------------------------------- æ„Ÿè°¢axis ï¼ˆ<a href="http://hi.baidu.com/aullik5ï¼‰å¯¹æœ¬æ–‡æå‡ºçš„å»ºè®®ã€‚" target="_blank">http://hi.baidu.com/aullik5ï¼‰å¯¹æœ¬æ–‡æå‡ºçš„å»ºè®®ã€‚</a> æ„Ÿè°¢å¹»å½±webzine <a href="http://webzine.ph4nt0m.org/" target="_blank">http://webzine.ph4nt0m.org/</a> æ„Ÿè°¢strutsæ‰€æœ‰å¼€å‘äººå‘˜ç§ç§æœ‰è¶£çš„ä»£ç ã€‚ ä½œè€…DEMOä¸­æœ‰æ•æ„Ÿæ•°æ®ï¼Œæ•ä¸èƒ½æä¾›ï¼Œè¯·å¤§å®¶è‡ªè¡Œæœç´¢strutsdemoæ­å»ºç¯å¢ƒæµ‹è¯•ã€‚ Struts2ï¼š<a href="http://struts.apache.org/2.x/" target="_blank">http://struts.apache.org/2.x/</a> Struts2 svnï¼š<a href="http://svn.apache.org/viewvc/struts/struts2/trunk/" target="_blank">http://svn.apache.org/viewvc/struts/struts2/trunk/</a>
Powered by: <a href="http://www.ph4nt0m.org/" target="_blank">Ph4nt0m Security</a> Â© 2009 <a href="http://www.ph4nt0m.org/" target="_blank">Ph4nt0m Security Team</a>.</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/å®‰å…¨/">å®‰å…¨</a></li></span><span class="breadcrumb"><li><a href="/categories/å®‰å…¨/">å®‰å…¨</a></li><li><a href="/categories/å®‰å…¨/Java/">Java</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java/" class="label label-primary">Java</a><a href="/tags/å®‰å…¨/" class="label label-success">å®‰å…¨</a></span> | <span class="time">recent updated:<time title="2014-03-29 22:34:04"datetime="2014-03-29 22:34:04"> mar. 29 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-å®‰å…¨-Java--Struts2æ¡†æ¶å®‰å…¨ç¼ºé™·/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-å®‰å…¨-Java--Struts2æ¡†æ¶å®‰å…¨ç¼ºé™·" data-count-type="comments">æš‚æ— è¯„è®º</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-å®‰å…¨-Java--Javaå®‰å…¨æ¨¡å‹ä»‹ç»-/">Java å®‰å…¨æ¨¡å‹ä»‹ç» </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:38.000Z"> <a href="/2014/02/02/2014-02-02-å®‰å…¨-Java--Javaå®‰å…¨æ¨¡å‹ä»‹ç»-/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h2 id="java-">Java å®‰å…¨æ¨¡å‹ä»‹ç»</h2>
<p>2013/01/06 16:20  | <a href="http://drops.wooyun.org/author/GaRY" title="ç”± GaRY å‘å¸ƒ" target="_blank">GaRY</a>  </p>
<p>æ¥æºï¼š<a href="http://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/" target="_blank"><a href="http://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/">http://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/</a></a></p>
<p>ä½œä¸ºä¸€ç§è¯ç”Ÿäºäº’è”ç½‘å…´èµ·æ—¶ä»£çš„è¯­è¨€ï¼ŒJava ä»ä¸€å¼€å§‹å°±å¸¦æœ‰å®‰å…¨ä¸Šçš„è€ƒè™‘ï¼Œå¦‚ä½•ä¿è¯é€šè¿‡äº’è”ç½‘ä¸‹è½½åˆ°æœ¬åœ°çš„ Java ç¨‹åºæ˜¯å®‰å…¨çš„ï¼Œå¦‚ä½•å¯¹ Java ç¨‹åºè®¿é—®æœ¬åœ°èµ„æºæƒé™è¿›è¡Œæœ‰é™æˆæƒï¼Œè¿™äº›å®‰å…¨è§’åº¦çš„è€ƒè™‘ä¸€å¼€å§‹å°±å½±å“åˆ° Java è¯­è¨€çš„è®¾è®¡ä¸å®ç°ã€‚å¯ä»¥è¯´ Java åœ¨è¿™äº›æ–¹é¢çš„æ¢ç´¢ä¸ç»éªŒï¼Œå¯¹åæ¥çš„ä¸€äº›è¯­è¨€ä¸äº§å“éƒ½å¸¦æ¥äº†ç§¯æå½±å“ã€‚</p>
<p>æœ¬ç¯‡æ–‡ç« ä¸­å°†ä»‹ç» Java ä¸­å®‰å…¨æ¨¡å‹ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨å®‰å…¨è®¿é—®æ§åˆ¶æœºåˆ¶æ¥å®ç°ä¸€äº›ç‰¹å®šç›®çš„ã€‚</p>
<p><strong>Java ä¸­çš„å®‰å…¨æ¨¡å‹</strong></p>
<p>åœ¨ Java ä¸­å°†æ‰§è¡Œç¨‹åºåˆ†æˆæœ¬åœ°å’Œè¿œç¨‹ä¸¤ç§ï¼Œæœ¬åœ°ä»£ç é»˜è®¤è§†ä¸ºå¯ä¿¡ä»»çš„ï¼Œè€Œè¿œç¨‹ä»£ç åˆ™è¢«çœ‹ä½œæ˜¯ä¸å—ä¿¡çš„ã€‚å¯¹äºæˆä¿¡çš„æœ¬åœ°ä»£ç ï¼Œå¯ä»¥è®¿é—®ä¸€åˆ‡æœ¬åœ°èµ„æºã€‚è€Œå¯¹äºéæˆä¿¡çš„è¿œç¨‹ä»£ç åœ¨æ—©æœŸçš„ Java å®ç°ä¸­ï¼Œå®‰å…¨ä¾èµ–äºæ²™ç®± (Sandbox) æœºåˆ¶ã€‚æ²™ç®±æœºåˆ¶å°±æ˜¯å°† Java ä»£ç é™å®šåœ¨è™šæ‹Ÿæœº (JVM) ç‰¹å®šçš„è¿è¡ŒèŒƒå›´ä¸­ï¼Œå¹¶ä¸”ä¸¥æ ¼é™åˆ¶ä»£ç å¯¹æœ¬åœ°ç³»ç»Ÿçš„èµ„æºè®¿é—®ï¼Œé€šè¿‡è¿™æ ·çš„æªæ–½æ¥ä¿è¯å¯¹è¿œç¨‹ä»£ç çš„æœ‰æ•ˆéš”ç¦»ï¼Œé˜²æ­¢å¯¹æœ¬åœ°ç³»ç»Ÿé€ æˆç ´åã€‚å¦‚å›¾ 1 æ‰€ç¤ºï¼Œ</p>
<p>å›¾ 1.JDK1.0 å®‰å…¨æ¨¡å‹</p>
<p><img src="http://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/image003.gif" alt="JDK1.0 å®‰å…¨æ¨¡å‹"></p>
<p>ä½†å¦‚æ­¤ä¸¥æ ¼çš„å®‰å…¨æœºåˆ¶ä¹Ÿç»™ç¨‹åºçš„åŠŸèƒ½æ‰©å±•å¸¦æ¥éšœç¢ï¼Œæ¯”å¦‚å½“ç”¨æˆ·å¸Œæœ›è¿œç¨‹ä»£ç è®¿é—®æœ¬åœ°ç³»ç»Ÿçš„æ–‡ä»¶æ—¶å€™ï¼Œå°±æ— æ³•å®ç°ã€‚å› æ­¤åœ¨åç»­çš„ Java1.1 ç‰ˆæœ¬ä¸­ï¼Œé’ˆå¯¹å®‰å…¨æœºåˆ¶åšäº†æ”¹è¿›ï¼Œå¢åŠ äº†å®‰å…¨ç­–ç•¥ï¼Œå…è®¸ç”¨æˆ·æŒ‡å®šä»£ç å¯¹æœ¬åœ°èµ„æºçš„è®¿é—®æƒé™ã€‚å¦‚å›¾ 2 æ‰€ç¤ºï¼Œ</p>
<p>å›¾ 2.JDK1.1 å®‰å…¨æ¨¡å‹</p>
<p><img src="http://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/image005.gif" alt="å®‰å…¨æ¨¡å‹"> </p>
<p>åœ¨ Java1.2 ç‰ˆæœ¬ä¸­ï¼Œå†æ¬¡æ”¹è¿›äº†å®‰å…¨æœºåˆ¶ï¼Œå¢åŠ äº†ä»£ç ç­¾åã€‚ä¸è®ºæœ¬åœ°ä»£ç æˆ–æ˜¯è¿œç¨‹ä»£ç ï¼Œéƒ½ä¼šæŒ‰ç…§ç”¨æˆ·çš„å®‰å…¨ç­–ç•¥è®¾å®šï¼Œç”±ç±»åŠ è½½å™¨åŠ è½½åˆ°è™šæ‹Ÿæœºä¸­æƒé™ä¸åŒçš„è¿è¡Œç©ºé—´ï¼Œæ¥å®ç°å·®å¼‚åŒ–çš„ä»£ç æ‰§è¡Œæƒé™æ§åˆ¶ã€‚å¦‚å›¾ 3 æ‰€ç¤ºï¼Œ</p>
<p>å›¾ 3.JDK1.2 å®‰å…¨æ¨¡å‹</p>
<p><img src="http://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/image007.gif" alt="JDK1.2 å®‰å…¨æ¨¡å‹"></p>
<p>å½“å‰æœ€æ–°çš„å®‰å…¨æœºåˆ¶å®ç°ï¼Œåˆ™å¼•å…¥äº†åŸŸ (Domain) çš„æ¦‚å¿µã€‚è™šæ‹Ÿæœºä¼šæŠŠæ‰€æœ‰ä»£ç åŠ è½½åˆ°ä¸åŒçš„ç³»ç»ŸåŸŸå’Œåº”ç”¨åŸŸï¼Œç³»ç»ŸåŸŸéƒ¨åˆ†ä¸“é—¨è´Ÿè´£ä¸å…³é”®èµ„æºè¿›è¡Œäº¤äº’ï¼Œè€Œå„ä¸ªåº”ç”¨åŸŸéƒ¨åˆ†åˆ™é€šè¿‡ç³»ç»ŸåŸŸçš„éƒ¨åˆ†ä»£ç†æ¥å¯¹å„ç§éœ€è¦çš„èµ„æºè¿›è¡Œè®¿é—®ã€‚è™šæ‹Ÿæœºä¸­ä¸åŒçš„å—ä¿æŠ¤åŸŸ (Protected Domain)ï¼Œå¯¹åº”ä¸ä¸€æ ·çš„æƒé™ (Permission)ã€‚å­˜åœ¨äºä¸åŒåŸŸä¸­çš„ç±»æ–‡ä»¶å°±å…·æœ‰äº†å½“å‰åŸŸçš„å…¨éƒ¨æƒé™ï¼Œå¦‚å›¾ 4 æ‰€ç¤ºï¼š</p>
<p>å›¾ 4. æœ€æ–°å®‰å…¨æ¨¡å‹</p>
<p><img src="http://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/image009.gif" alt="æœ€æ–°å®‰å…¨æ¨¡å‹"> </p>
<p>ä»¥ä¸Šæåˆ°çš„éƒ½æ˜¯åŸºæœ¬çš„ Java å®‰å…¨æ¨¡å‹æ¦‚å¿µï¼Œåœ¨åº”ç”¨å¼€å‘ä¸­è¿˜æœ‰ä¸€äº›å…³äºå®‰å…¨çš„å¤æ‚ç”¨æ³•ï¼Œå…¶ä¸­æœ€å¸¸ç”¨åˆ°çš„ API å°±æ˜¯ doPrivilegedã€‚doPrivileged æ–¹æ³•èƒ½å¤Ÿä½¿ä¸€æ®µå—ä¿¡ä»»ä»£ç è·å¾—æ›´å¤§çš„æƒé™ï¼Œç”šè‡³æ¯”è°ƒç”¨å®ƒçš„åº”ç”¨ç¨‹åºè¿˜è¦å¤šï¼Œå¯åšåˆ°ä¸´æ—¶è®¿é—®æ›´å¤šçš„èµ„æºã€‚æœ‰æ—¶å€™è¿™æ˜¯éå¸¸å¿…è¦çš„ï¼Œå¯ä»¥åº”ä»˜ä¸€äº›ç‰¹æ®Šçš„åº”ç”¨åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½æ— æ³•ç›´æ¥è®¿é—®æŸäº›ç³»ç»Ÿèµ„æºï¼Œä½†è¿™æ ·çš„åº”ç”¨ç¨‹åºå¿…é¡»å¾—åˆ°è¿™äº›èµ„æºæ‰èƒ½å¤Ÿå®ŒæˆåŠŸèƒ½ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒJava SDK ç»™åŸŸæä¾›äº† doPrivileged æ–¹æ³•ï¼Œè®©ç¨‹åºçªç ´å½“å‰åŸŸæƒé™é™åˆ¶ï¼Œä¸´æ—¶æ‰©å¤§è®¿é—®æƒé™ã€‚ä¸‹é¢å†…å®¹ä¼šè¯¦ç»†è®²è§£ä¸€ä¸‹å®‰å…¨ç›¸å…³çš„æ–¹æ³•ä½¿ç”¨ã€‚</p>
<p><strong>Java å®‰å…¨æ§åˆ¶å®ç°</strong></p>
<p>Java SDK ä¸­ä¸å®‰å…¨ç›¸å…³çš„ç±»å’Œæ¥å£éƒ½æ”¾åœ¨ java.security åŒ…ä¸­ï¼Œå…¶ä¸­æ—¢åŒ…æ‹¬è®¿é—®æ§åˆ¶é…ç½®åŠç»†ç²’åº¦è®¿é—®æ§åˆ¶æ¡†æ¶çš„å®ç°ï¼Œè¿˜åŒ…æ‹¬ç­¾åå’ŒåŠ è§£å¯†çš„å®ç°ã€‚æœ¬æ–‡ä¸­æ¶‰åŠåˆ°çš„å®‰å…¨è®¿é—®æ§åˆ¶ä¸»è¦ä¸å®‰å…¨åŒ…ä¸­è®¿é—®æ§åˆ¶æ¡†æ¶ç›¸å…³ï¼Œè¿™é‡Œé¢æœ€å¸¸ç”¨çš„å°±æ˜¯ AccessContorller ç±»ã€‚é€šè¿‡ä¸‹å›¾çš„æè¿°ï¼Œæ‚¨å¯ä»¥äº†è§£ ACC(Access Contorller) æœºåˆ¶æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚</p>
<p>åœ¨æŸä¸€ä¸ªçº¿ç¨‹çš„è°ƒç”¨æ ˆä¸­ï¼Œå½“ AccessController çš„ checkPermission æ–¹æ³•è¢«æœ€è¿‘çš„è°ƒç”¨ç¨‹åºï¼ˆä¾‹å¦‚ A ç±»ä¸­çš„æ–¹æ³•ï¼‰è°ƒç”¨æ—¶ï¼Œå¯¹äºç¨‹åºè¦æ±‚çš„æ‰€æœ‰è®¿é—®æƒé™ï¼ŒACC å†³å®šæ˜¯å¦æˆæƒçš„åŸºæœ¬ç®—æ³•å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¦‚æœè°ƒç”¨é“¾ä¸­çš„æŸä¸ªè°ƒç”¨ç¨‹åºæ²¡æœ‰æ‰€éœ€çš„æƒé™ï¼Œå°†æŠ›å‡º AccessControlExceptionï¼›</li>
<li>è‹¥æ˜¯æ»¡è¶³ä»¥ä¸‹æƒ…å†µå³è¢«æˆäºˆæƒé™ï¼ša. è°ƒç”¨ç¨‹åºè®¿é—®å¦ä¸€ä¸ªæœ‰è¯¥æƒé™åŸŸé‡Œç¨‹åºçš„æ–¹æ³•ï¼Œå¹¶ä¸”æ­¤æ–¹æ³•æ ‡è®°ä¸ºæœ‰è®¿é—®â€œç‰¹æƒâ€ï¼› b.</li>
</ol>
<p>è°ƒç”¨ç¨‹åºæ‰€è°ƒç”¨ï¼ˆç›´æ¥æˆ–é—´æ¥ï¼‰çš„åç»­å¯¹è±¡éƒ½æœ‰ä¸Šè¿°æƒé™ã€‚</p>
<p>åœ¨ä¸Šé¢ä¾‹å­çš„è°ƒç”¨é“¾ä¸­ï¼Œå‡å®š E åŸŸå’Œ F åŸŸä¸å…·å¤‡ X æƒé™ (permission)ï¼Œè€Œåœ¨ C.class å¯¹åº”çš„ G åŸŸå…·æœ‰ X æƒé™ï¼ŒåŒæ—¶ C ä½¿ç”¨ X æƒé™çš„å¯¹å¤–æ¥å£ Y æ–¹æ³•æ˜¯é€šè¿‡ doPrivilege æ–¹å¼å®ç°ã€‚é‚£ä¹ˆï¼ŒB.class A.class è°ƒç”¨ Y æ–¹æ³•å°±éƒ½å…·å¤‡ X æƒé™ã€‚å¦‚æœ Y æ–¹æ³•æ²¡æœ‰æ ‡æ³¨ doPrivilegeï¼Œé‚£ä¹ˆå¯¹ Y æ–¹æ³•çš„è°ƒç”¨å°±ä¸å…·å¤‡ X æƒé™ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„æƒ…å†µï¼Œå°±æ˜¯è®¿é—®æ§åˆ¶ä¸Šä¸‹æ–‡çš„ç»§æ‰¿é—®é¢˜ã€‚å½“ä¸€ä¸ªçº¿ç¨‹åˆ›å»ºå¦ä¸€ä¸ªæ–°çº¿ç¨‹æ—¶ï¼Œä¼šåŒæ—¶åˆ›å»ºæ–°çš„å †æ ˆã€‚å¦‚æœåˆ›å»ºæ–°çº¿ç¨‹æ—¶æ²¡æœ‰ä¿ç•™å½“å‰çš„å®‰å…¨ä¸Šä¸‹æ–‡ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹ç›¸å…³çš„å®‰å…¨ä¿¡æ¯ï¼Œåˆ™æ–°çº¿ç¨‹è°ƒç”¨ AccessController.checkPermission æ£€éªŒæƒé™æ—¶ï¼Œå®‰å…¨è®¿é—®æ§åˆ¶æœºåˆ¶åªä¼šæ ¹æ®æ–°çº¿ç¨‹çš„ä¸Šä¸‹æ–‡æ¥å†³å®šå®‰å…¨æ€§é—®é¢˜ï¼Œè€Œä¸ä¼šè€ƒè™‘å…¶çˆ¶çº¿ç¨‹çš„ç›¸åº”æƒé™ã€‚è¿™ä¸ªæ¸…é™¤å †æ ˆçš„åšæ³•æœ¬èº«å¹¶ä¸ä¼šç»™ç³»ç»Ÿå¸¦æ¥å®‰å…¨éšæ‚£ï¼Œä½†å®ƒä¼šä½¿æºä»£ç ï¼Œå°¤å…¶æ˜¯ç³»ç»Ÿä»£ç çš„ç¼–å†™å®¹æ˜“å‡ºç°é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œå¯¹å®‰å…¨æ¡†æ¶å®ç°ä¸ç†Ÿæ‚‰ç¼–ç¨‹äººå‘˜å¯èƒ½ä¼šå¾ˆè‡ªç„¶åœ°è®¤ä¸ºï¼Œå­çº¿ç¨‹æ‰§è¡Œçš„ä¿¡ä»»ä»£ç ç»§æ‰¿äº†çˆ¶çº¿ç¨‹æ‰§è¡Œçš„ä¸å¯ä¿¡ä»»ä»£ç çš„å®‰å…¨é™åˆ¶ç‰¹æ€§ã€‚å½“ä»å­çº¿ç¨‹å†…è®¿é—®å—æ§åˆ¶çš„èµ„æºæ—¶ï¼Œå¦‚æœçˆ¶çº¿ç¨‹çš„å®‰å…¨ä¸Šä¸‹æ–‡ä¿¡æ¯å¹¶æœªä¿å­˜ï¼Œå°±ä¼šå¯¼è‡´æ„å¤–çš„å®‰å…¨æ¼æ´ã€‚å› ä¸ºä¸¢å¤±çš„çˆ¶çº¿ç¨‹ä¸­å®‰å…¨é™åˆ¶æ•°æ®ä¼šä½¿å­çº¿ç¨‹å°†èµ„æºä¼ é€’ç»™ä¸€äº›ä¸å¯ä¿¡ä»»çš„ä»£ç ã€‚å› æ­¤ï¼Œåœ¨åˆ›å»ºæ–°çº¿ç¨‹æ—¶ï¼Œå¿…é¡»ç¡®ä¿åˆ©ç”¨çˆ¶çº¿ç¨‹åˆ›å»ºï¼Œæˆ–åˆ©ç”¨å…¶ä»–å½¢å¼åˆ›å»ºä»£ç ã€‚æ€»ä¹‹ï¼Œè¦ä¿è¯è®©å­çº¿ç¨‹è‡ªåŠ¨ç»§æ‰¿çˆ¶çº¿ç¨‹çš„å®‰å…¨æ€§ä¸Šä¸‹æ–‡ï¼Œè¿™æ ·å­çº¿ç¨‹ä¸­çš„åç»­ AccessController.checkPermission è°ƒç”¨å°±ä¼šè€ƒè™‘æ‰€ç»§æ‰¿çš„çˆ¶çº¿ç¨‹çš„å®‰å…¨ç‰¹æ€§ã€‚</p>
<p>éœ€è¦æ³¨æ„æ˜¯ AccessController ç±»çš„ checkPermission æ–¹æ³•å°†åœ¨å½“å‰æ‰§è¡Œçº¿ç¨‹çš„ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬ç»§æ‰¿çš„ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œå®‰å…¨æ£€æŸ¥ã€‚å½“è¿™ç§å®‰å…¨æ£€æŸ¥åªèƒ½åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œæ—¶å°±ä¼šå‡ºç°é—®é¢˜ã€‚æ„å³ï¼Œæœ¬åº”åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šä¸‹æ–‡å†…éƒ¨è¿›è¡Œçš„å®‰å…¨æ£€æŸ¥ï¼Œæœ‰æ—¶å´éœ€è¦åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­è¿›è¡Œã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å°†æŸä¸ªäº‹ä»¶ä¼ ç»™å¦ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå¦‚æœæ‰€è¯·æ±‚çš„äº‹ä»¶æœåŠ¡è¦æ±‚è®¿é—®æŸç§å®‰å…¨å—æ§èµ„æºï¼Œåˆ™ä¸ºå…¶è¯·æ±‚äº‹ä»¶æœåŠ¡çš„ç¬¬äºŒä¸ªçº¿ç¨‹å°†æ²¡æœ‰äº‹ä»¶äº§ç”Ÿæºçº¿ç¨‹ç›¸åº”çš„ä¸Šä¸‹æ–‡æ¥å®Œæˆæ‰€éœ€çš„è®¿é—®æ§åˆ¶å†³ç­–ã€‚ä¸ºè§£å†³è¿™æ ·çš„é—®é¢˜ï¼ŒJava åœ¨ AccessController ç±»ä¸­æä¾›äº† getContext æ–¹æ³•å’Œ AccessControlContext å¯¹è±¡ã€‚é€šè¿‡ getContext æ–¹æ³•å¯è·å–å½“å‰è°ƒç”¨ä¸Šä¸‹æ–‡çš„â€œå¿«ç…§ (snapshot)â€ï¼Œç„¶åå°†å…¶å­˜æ”¾åˆ°è¿”å›çš„ AccessControlContext å¯¹è±¡ä¸­ã€‚è°ƒç”¨çš„æ ·ä¾‹ç¨‹åºå¦‚ä¸‹æ‰€ç¤ºï¼šAccessControlContext acc = AccessController.getContext();</p>
<p>getContext æ–¹æ³•å°†å½“å‰ä¸Šä¸‹æ–‡çš„å¿«ç…§ä¿¡æ¯æ•è·ï¼Œç„¶åæ‰§è¡Œç¨‹åºå°±å¯ä»¥é€šè¿‡æ£€æŸ¥å‰åä¸åŒä¸Šä¸‹æ–‡ä¸­çš„ä¿¡æ¯ï¼Œå³æ¯”è¾ƒå¿«ç…§ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸æœ¬ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œç„¶åæ¥åšå‡ºå¯¹å—æ§èµ„æºè®¿é—®æ§åˆ¶çš„å†³ç­–ã€‚ä¸Šé¢é—®é¢˜å°±å¯ä»¥å¦‚ä¸‹æ–¹å¼æ¥è§£å†³ï¼Œå½“å‰ä¸€ä¸ªçº¿ç¨‹æŠŠæŸä¸ªè¯·æ±‚äº‹ä»¶ä¼ ç»™ç¬¬äºŒä¸ªçº¿ç¨‹æ—¶ï¼ŒåŒæ—¶æ•è·å…¶ä¸Šä¸‹æ–‡ä¿¡æ¯å¹¶å°†è¿™äº›ä¿¡æ¯æä¾›ç»™åä¸€ä¸ªçº¿ç¨‹ã€‚ç•¥æœ‰ä¸åŒçš„æ˜¯ï¼ŒAccessControlContext ç±»æœ¬èº«çš„ checkPermission æ–¹æ³•å¯æ ¹æ®å®ƒè‡ªèº«æºå¸¦çš„ä¸Šä¸‹æ–‡ä¿¡æ¯æ¥å†³å®šè®¿é—®æ§åˆ¶ï¼Œè€Œä¸æ˜¯æ ¹æ®å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¸Šä¸‹æ–‡ã€‚å› æ­¤å¿…è¦æ—¶ï¼Œåä¸€ä¸ªçº¿ç¨‹å¯ç›´æ¥é€šè¿‡è°ƒç”¨å‰ä¸€ä¸ªçº¿ç¨‹ä¸Šä¸‹æ–‡å¿«ç…§æœ¬èº«çš„æƒé™æ£€æŸ¥æ–¹æ³•æ¥æ‰§è¡Œç›¸åº”çš„å®‰å…¨æ£€æŸ¥ã€‚å¦‚ä¸‹ï¼Œacc.checkPermission(permission)ï¼Œä¸Šè¿°æ–¹æ³•è°ƒç”¨ç­‰åŒäºåœ¨å‰ä¸€ä¸ªçº¿ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œç›¸åŒçš„å®‰å…¨æ£€æŸ¥ï¼Œå°½ç®¡è®¿é—®æ§åˆ¶æ£€æŸ¥å®é™…ä¸Šæ˜¯åœ¨åä¸€ä¸ªçº¿ç¨‹ä¸­å®Œæˆçš„ã€‚</p>
<p><strong>å®‰å…¨æ§åˆ¶ä½¿ç”¨çš„ä»£ç å®ä¾‹</strong></p>
<p>ä¸Šé¢å…³äºå®‰å…¨æ§åˆ¶ä½¿ç”¨çš„æè¿°è¿˜æ˜¯æ¯”è¾ƒæ™¦æ¶©ï¼Œä¸‹é¢å°†é€šè¿‡ä¸€ä¸ªä»£ç ç¤ºä¾‹è¿›è¡Œè¯´æ˜ã€‚</p>
<p>åœ¨ Eclipse å¼€å‘ç¯å¢ƒä¸­å»ºç«‹ä¸¤ä¸ªä¸åŒå·¥ç¨‹ï¼šprojectX å’Œ projectYã€‚æˆ‘ä»¬ä¼šç»™ projectX å·¥ç¨‹ä¸­çš„ bin ç›®å½•èµ‹äºˆå†™æ–‡ä»¶çš„æƒé™ï¼Œæ¢å¥è¯è¯´å°±æ˜¯å…è®¸æ‰€æœ‰å­˜åœ¨äºæ­¤ç›®å½•ä¸­çš„ class æ–‡ä»¶å¯ä»¥è‡ªç”±çš„åœ¨ bin ç›®å½•ä¸­è¿›è¡Œæ–‡ä»¶å†™æ“ä½œã€‚ç„¶åï¼Œæˆ‘ä»¬ä¼šåœ¨ projectY å·¥ç¨‹ä¸­è°ƒç”¨ projectX å·¥ç¨‹ä¸­çš„ä¸€ä¸ªæ–‡ä»¶æ“ä½œå·¥å…·ç±»ã€‚è¿™ä¸ªå·¥å…·ç±»æä¾›ä¸¤ç§ç±»å‹æ¥å£ï¼Œä¸€ç§æ˜¯ç‰¹æƒè®¿é—®æ–¹å¼ï¼Œå¦å¤–ä¸€ç§æ˜¯æ™®é€šè®¿é—®æ–¹å¼ã€‚ç”±äºåœ¨ projectY å·¥ç¨‹ä¸­çš„æ–‡ä»¶æ˜¯ä¸å…·å¤‡åœ¨ projectX å·¥ç¨‹ä¸­ bin ç›®å½•çš„ä»»ä½•å†™æƒé™ï¼Œæ‰€ä»¥é€šè¿‡ä¸‰ç§ä¸åŒè®¿é—®æ–¹å¼çš„è°ƒç”¨ç»“æœï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆæ¸…æ¥šåœ°äº†è§£åˆ° Java ä¸­å®‰å…¨æ§åˆ¶è¯¥å¦‚ä½•ä½¿ç”¨ã€‚</p>
<p>å‡å®š ProjectX çš„é¡¹ç›®è·¯å¾„ä¸º D:workspaceprojectX
package learn.java.security; import java.io.File;   import java.io.IOException;   import java.security.AccessControlException;   import java.security.AccessController;   import java.security.PrivilegedAction; public class FileUtil {   // å·¥ç¨‹ A æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„   private final static String FOLDER_PATH = &quot;D:workspaceprojectXin&quot;;     public static void makeFile(String fileName) {         try {             // å°è¯•åœ¨å·¥ç¨‹ A æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶             File fs = new File(FOLDER_PATH + &quot;&quot; + fileName);             fs.createNewFile();         } catch (AccessControlException e) {             e.printStackTrace();         } catch (IOException e) {             e.printStackTrace();         }     }     public static void doPrivilegedAction(final String fileName) {         // ç”¨ç‰¹æƒè®¿é—®æ–¹å¼åˆ›å»ºæ–‡ä»¶         AccessController.doPrivileged(new PrivilegedAction&lt;String&gt;() {             @Override             public String run() {                 makeFile(fileName);                 return null;             }         });     } }</p>
<p>å‡å®š ProjectY çš„é¡¹ç›®è·¯å¾„ä¸º D:workspaceprojectY</p>
<p>package demo.security; import java.io.File;   import java.io.IOException;   import java.security.AccessControlException; import learn.java.security.FileUtil; public class DemoDoPrivilege {     public static void main(String[] args) {         System.out.println(&quot;/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>&quot;);         System.out.println(&quot;I will show AccessControl functionality...&quot;);         System.out.println(&quot;Preparation step : turn on system permission check...&quot;);         // æ‰“å¼€ç³»ç»Ÿå®‰å…¨æƒé™æ£€æŸ¥å¼€å…³         System.setSecurityManager(new SecurityManager());         System.out.println();         System.out.println(&quot;<del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del>~&quot;);         System.out.println(&quot;         Create a new file named temp1.txt via privileged action ...&quot;);         // ç”¨ç‰¹æƒè®¿é—®æ–¹å¼åœ¨å·¥ç¨‹ A æ‰§è¡Œæ–‡ä»¶è·¯å¾„ä¸­åˆ›å»º temp1.txt æ–‡ä»¶         FileUtil.doPrivilegedAction(&quot;temp1.txt&quot;);         System.out.println(&quot;<del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del>~&quot;);         System.out.println();         System.out.println(&quot;/////////////////////////////////////////&quot;);         System.out.println(&quot;Create a new file named temp2.txt via File ...&quot;);         try {             // ç”¨æ™®é€šæ–‡ä»¶æ“ä½œæ–¹å¼åœ¨å·¥ç¨‹ A æ‰§è¡Œæ–‡ä»¶è·¯å¾„ä¸­åˆ›å»º temp2.txt æ–‡ä»¶             File fs = new File(                     &quot;D:workspaceprojectXin emp2.txt&quot;);             fs.createNewFile();         } catch (IOException e) {             e.printStackTrace();         } catch (AccessControlException e1) {             e1.printStackTrace();         }         System.out.println(&quot;/////////////////////////////////////////&quot;);         System.out.println();         System.out.println(&quot;-----------------------------------------&quot;);         System.out.println(&quot;create a new file named temp3.txt via FileUtil ...&quot;);         // ç›´æ¥è°ƒç”¨æ™®é€šæ¥å£æ–¹å¼åœ¨å·¥ç¨‹ A æ‰§è¡Œæ–‡ä»¶è·¯å¾„ä¸­åˆ›å»º temp3.txt æ–‡ä»¶         FileUtil.makeFile(&quot;temp3.txt&quot;);         System.out.println(&quot;-----------------------------------------&quot;);         System.out.println();         System.out.println(&quot;/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>/<em>/</em>&quot;);     } }</p>
<p>åº”ç”¨çš„å®‰å…¨è®¿é—®æ§åˆ¶ç­–ç•¥æ–‡ä»¶ (MyPolicy.txt) å¦‚ä¸‹ , å‡å®šå®‰å…¨ç­–ç•¥æ–‡ä»¶æ”¾äº projectY å·¥ç¨‹çš„æ ¹ç›®å½•ä¸‹ï¼š</p>
<p>// æˆæƒå·¥ç¨‹ A æ‰§è¡Œæ–‡ä»¶è·¯å¾„ä¸­æ–‡ä»¶åœ¨æœ¬ç›®å½•ä¸­çš„å†™æ–‡ä»¶æƒé™   grant codebase &quot;file:/D:/workspace/projectX/bin&quot;   {   permission java.io.FilePermission   &quot;D:workspaceprojectXin/*&quot;, &quot;write&quot;;   };</p>
<p>ä¸‹é¢å°±å¯ä»¥è¿è¡Œç¨‹åºäº†ï¼Œæ‚¨å¯ä»¥é€‰æ‹©åœ¨ Eclipse å¼€å‘ç¯å¢ƒä¸­ç›´æ¥è¿è¡Œï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¥æ‰§è¡Œã€‚å‘½ä»¤è¡Œæ‰§è¡Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå‡å®šå½“å‰æ‰§è¡Œç›®å½•å°±æ˜¯ projectY çš„æ ¹ç›®å½•ã€‚</p>
<p>java -Djava.security.policy=.MyPolicy.txt -classpath   D:workspaceprojectYin;D:workspaceprojectXin demo.security.DemoDoPrivilege</p>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p>/<em> /</em> /<em> I will show AccessControl functionality...   Preparation step : turn on system permission check... <del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del>   Create a new file named temp1.txt via privileged action ...   <del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del><del>~</del> ////////////////////////////////////////   Create a new file named temp2.txt via File ...   java.security.AccessControlException: Access denied (java.io.FilePermission   D:workspaceprojectXin  emp2.txt write)   at java.security.AccessController.checkPermission(AccessController.java:108)   at java.lang.SecurityManager.checkPermission(SecurityManager.java:533)   at java.lang.SecurityManager.checkWrite(SecurityManager.java:963)   at java.io.File.createNewFile(File.java:882)   at demo.security.DemoDoPrivilege.main(DemoDoPrivilege.java:32)   //////////////////////////////////////// /</em> /<em> /</em> create a new file named temp3.txt via FileUtil ...   java.security.AccessControlException: Access denied (java.io.FilePermission   D:workspaceprojectXin  emp3.txt write)   at java.security.AccessController.checkPermission(AccessController.java:108)   at java.lang.SecurityManager.checkPermission(SecurityManager.java:533)   at java.lang.SecurityManager.checkWrite(SecurityManager.java:963)   at java.io.File.createNewFile(File.java:882)   at learn.java.security.FileUtil.makeFile(FileUtil.java:16)   at demo.security.DemoDoPrivilege.main(DemoDoPrivilege.java:43) /<em> /</em> /<em> /</em> /<em> /</em></p>
<p>é€šè¿‡ç¨‹åºæ‰“å°ç»“æœæ¥çœ‹ï¼Œå½“å¾€ projectX å·¥ç¨‹ä¸­ bin ç›®å½•åˆ›å»º temp1.txtï¼Œtemp2.txtï¼Œtemp3.txt æ–‡ä»¶æ—¶å€™ï¼Œé™¤äº†é€šè¿‡ç‰¹æƒè®¿é—®æ–¹å¼å¯ä»¥åˆ›å»ºæˆåŠŸå¤–ï¼Œé€šè¿‡æ™®é€šæ¥å£è®¿é—®æˆ–è€…ç›´æ¥æ–‡ä»¶æ“ä½œæ–¹å¼éƒ½ä¼šå¤±è´¥ï¼Œå¤±è´¥çš„åŸå› éƒ½æ˜¯æ²¡æœ‰é€šè¿‡æƒé™æ£€æŸ¥ã€‚å¯¹ç…§å‰æ–‡æ‰€æè¿°çš„æƒé™æ£€æŸ¥è§„åˆ™ï¼Œç”¨ä¸€å¥è¯æ€»ç»“å°±æ˜¯æƒ³è®¿é—®å®‰å…¨èµ„æºï¼Œè¦ä¹ˆè°ƒç”¨é“¾ä¸Šæƒé™é½å…¨ï¼Œè¦ä¹ˆå°±è¦ç”¨ç‰¹æƒã€‚ç‰¹æƒè®¿é—®æœºåˆ¶å®é™…ä¸Šå°±æ˜¯ç»™åº”ç”¨å¼€åé—¨çš„ä½¿ç”¨ä¸Šéœ€è¦å°å¿ƒï¼Œæ‰€ä»¥è¿™ä¹Ÿç»™ä»£ç å®ç°å¸¦æ¥æ–°çš„è€ƒè™‘ï¼Œå¼€æ”¾èŒƒå›´ä¸€å®šè¦é™å®šå¥½ï¼Œå¦åˆ™å¯èƒ½ç•™ä¸‹å®‰å…¨éšæ‚£ã€‚</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/å®‰å…¨/">å®‰å…¨</a></li></span><span class="breadcrumb"><li><a href="/categories/å®‰å…¨/">å®‰å…¨</a></li><li><a href="/categories/å®‰å…¨/Java/">Java</a></li></span></span> | <span class="tags">Tagged <a href="/tags/Java/" class="label label-primary">Java</a><a href="/tags/å®‰å…¨/" class="label label-success">å®‰å…¨</a></span> | <span class="time">recent updated:<time title="2014-03-29 22:28:34"datetime="2014-03-29 22:28:34"> mar. 29 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-å®‰å…¨-Java--Javaå®‰å…¨æ¨¡å‹ä»‹ç»-/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-å®‰å…¨-Java--Javaå®‰å…¨æ¨¡å‹ä»‹ç»-" data-count-type="comments">æš‚æ— è¯„è®º</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-zhiya-aboutpay--ruhejiaxinè®¨è®ºç¬¬2é¡µ-èŒåœºè¯é¢˜/">ruhejiaxinè®¨è®ºç¬¬2é¡µ </a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:37.000Z"> <a href="/2014/02/02/2014-02-02-zhiya-aboutpay--ruhejiaxinè®¨è®ºç¬¬2é¡µ-èŒåœºè¯é¢˜/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="ruhejiaxin-2-">ruhejiaxinè®¨è®ºç¬¬2é¡µ - èŒåœºè¯é¢˜</h1>
<p><a href="http://www.javaeye.com/login" title="ç™»å½•" target="_blank">æ‚¨è¿˜æœªç™»å½• !</a> <a href="http://www.javaeye.com/all" target="_blank">æˆ‘çš„åº”ç”¨</a> <a href="http://www.javaeye.com/login" target="_blank">ç™»å½•</a> <a href="http://www.javaeye.com/signup" target="_blank">æ³¨å†Œ</a></p>
<p><a href="http://www.javaeye.com/" target="_blank"><img src="&quot;JavaEye-æœ€æ£’çš„è½¯ä»¶å¼€å‘äº¤æµç¤¾åŒº&quot;" alt="JavaEye-æœ€æ£’çš„è½¯ä»¶å¼€å‘äº¤æµç¤¾åŒº"></a></p>
<p><a href="http://www.javaeye.com/clicks/294" target="_blank"><img src="" alt=""></a></p>
<p><a href="http://www.javaeye.com/forums" target="_blank">è®ºå›é¦–é¡µ</a> â†’ <a href="http://www.javaeye.com/forums/board/Job" target="_blank">æ‹›è˜æ±‚èŒç‰ˆ</a> â†’ <a href="http://www.javaeye.com/forums/tag/career" target="_blank">èŒåœºè¯é¢˜</a> â†’</p>
<h1 id="-offer-hr-">æƒ³æ”¾å¼ƒä¸€ä¸ªoffer,æ˜¯å¦éœ€è¦ç»™HRæ‰“ä¸ªç”µè¯è¯´æ˜ä¸€ä¸‹ï¼Ÿæ€ä¹ˆè¯´å‘¢ï¼Ÿ</h1>
<p><a href="http://www.javaeye.com/forums/board/Job" target="_blank">å…¨éƒ¨</a> <a href="http://www.javaeye.com/forums/tag/company" target="_blank">ä¼ä¸šç‚¹è¯„</a> <a href="http://www.javaeye.com/forums/tag/career" target="_blank">èŒåœºè¯é¢˜</a> <a href="http://www.javaeye.com/forums/tag/findjob" target="_blank">æ±‚èŒç»éªŒ</a> <a href="http://www.javaeye.com/forums/tag/interview" target="_blank">é¢è¯•ç§˜ç±</a> <a href="http://www.javaeye.com/forums/tag/list_jobs" target="_blank">æ‹›è˜èŒä½</a>
<a href="http://www.javaeye.com/forums/44/topics/662546/posts/new" title="å‘è¡¨å›å¤"></a></p>
<p><a href="http://www.javaeye.com/clicks/324" target="_blank">myAppså¿«é€Ÿå¼€å‘å¹³å°ï¼Œé…ç½®å³å¼€å‘ã€æ‰€è§å³æ‰€å¾—ï¼ŒèŠ‚çº¦85%å·¥ä½œé‡</a></p>
<p><a href="http://www.javaeye.com/topic/662546?page=1" target="_blank">Â« ä¸Šä¸€é¡µ</a> <a href="http://www.javaeye.com/topic/662546?page=1" target="_blank">1</a> 2 <a href="http://www.javaeye.com/topic/662546?page=3" target="_blank">3</a> <a href="http://www.javaeye.com/topic/662546?page=3" target="_blank">ä¸‹ä¸€é¡µ Â»</a>
æµè§ˆ 1494 æ¬¡
 <a href="http://www.javaeye.com/topic/662546" target="_blank">ä¸»é¢˜ï¼šæƒ³æ”¾å¼ƒä¸€ä¸ªoffer,æ˜¯å¦éœ€è¦ç»™HRæ‰“ä¸ªç”µè¯è¯´æ˜ä¸€ä¸‹ï¼Ÿæ€ä¹ˆè¯´å‘¢ï¼Ÿ</a></p>
<p>ç²¾åå¸– (0) :: è‰¯å¥½å¸– (0) :: éšè—å¸– (0) ä½œè€… æ­£æ–‡ * wellsiteds</p>
<ul>
<li>ç­‰çº§: åˆçº§ä¼šå‘˜</li>
<li><a href="http://wellsiteds.javaeye.com/" target="_blank"><img src="&quot;wellsitedsçš„åšå®¢: &quot;" alt="wellsitedsçš„åšå®¢"></a></li>
<li>æ–‡ç« : 1</li>
<li>ç§¯åˆ†: 30</li>
<li>æ¥è‡ª: åŒ—äº¬</li>
<li><img src="" alt="">
  å‘è¡¨æ—¶é—´ï¼š3 å°æ—¶å‰  </li>
</ul>
<p><a href="http://www.javaeye.com/topic/662546?page=2#" target="_blank">&lt;</a> <a href="http://www.javaeye.com/topic/662546?page=2#" target="_blank">&gt;</a> çŒå¤´èŒä½:å¦‚æœä½ æœ‰åŠ è–ªçš„æƒ³æ³• é‚£ä¹ˆä½ åº”è¯¥è§‰å¾—è‡ªå·±å·¥ä½œè¡¨ç°è¿˜ä¸é”™ã€‚
ä½ å¯ä»¥æ‰¾ä½ çš„ç›´æ¥ä¸Šå¸èŠä¸€èŠï¼Œè®©ä»–å¯¹ä½ çš„å·¥ä½œä»¥åŠè¡¨ç°æç‚¹å»ºè®®æˆ–è€…æ„è§ä»€ä¹ˆçš„ï¼ŒåŒæ—¶å¾ˆéšæ„çš„è°ˆä¸€ä¸‹ä½ è‡ªå·±çš„æŠ€æœ¯å‘å±•æ–¹å‘/èŒä¸šå‘å±•æ–¹å‘ã€‚
å¦‚æœä½ çš„ä¸Šå¸å¯¹ä½ çš„è¡¨ç°è¡¨ç¤ºäº†è‚¯å®šä»¥åŠèµèµï¼Œä½ å°±å¯ä»¥è¿›å…¥ä¸»é¢˜ï¼Œæå‡ºæ¥æ˜¯å¦å¯ä»¥åœ¨è–ªæ°´ä¸Šæœ‰æ‰€è°ƒæ•´ï¼Œå¹¶ä¸”ç»™ç½—åˆ—ä¸€äº›ä½ è§‰å¾—è–ªæ°´åº”è¯¥è°ƒæ•´çš„ç†ç”±ã€‚
æœ‰æ¡ç†çš„æ•´ç†ä¸€äº›å……åˆ†çš„ç†ç”±ï¼Œä¾‹å¦‚ï¼š1.è¡¨ç°è¿˜ä¸é”™ï¼Œå·¥ä½œæ€åº¦å¾ˆå¥½ä¹‹ç±»çš„ï¼Œå¹¶ä¸”è¿˜æ˜¯å¸Œæœ›é•¿æœŸåœ¨å…¬å¸å‘å±•ä¸€æ®µæ—¶é—´ï¼›2.ä¸Šæ¬¡è°ƒè–ªæ—¶é—´ åº”è¯¥æ˜¯æ—¶å€™æœ‰æ‰€å˜åŠ¨ï¼›3.å¦‚æœä½ è§‰å¾—ä½ å¯ä»¥èƒœä»»æ›´å¤šçš„å·¥ä½œä»»åŠ¡ï¼Œå¯ä»¥æå‡ºæ‰¿æ‹…ä¸€äº›æ›´å¤šçš„è´£ä»»ï¼›4.ä¸ªäººè´¢åŠ¡çŠ¶å†µï¼Œå¯ä»¥è¯´è‡ªå·±å¯¹è‡ªå·±çš„æ”¶å…¥/å­˜æ¬¾æœ‰ä¸ªè§„åˆ’ï¼Œå¹¶ä¸”å¸Œæœ›èƒ½å¤ŸæŒ‰è®¡åˆ’å®ç°...
è¿™äº›ä¸œè¥¿éƒ½æ˜¯å› äººè€Œå¼‚çš„ï¼Œå¦‚æœä½ çš„ç†ç”±å¤Ÿå……åˆ† å¦‚æœä½ çš„å¤´æ˜¯ä¸€ä¸ªå¥½ä¸Šå¸ï¼Œå¹¶ä¸”ä½ çš„è¡¨ç°å¾—åˆ°äº†å¤§å®¶çš„è®¤å¯çš„è¯ï¼ŒåŠ è–ªåº”è¯¥æ²¡æœ‰é—®é¢˜ã€‚ <a href="http://www.javaeye.com/topic/662546?page=2#" target="_blank">è¿”å›é¡¶æ¥¼</a> <a href="http://wellsiteds.javaeye.com/" title="æµè§ˆä½œè€…çš„åšå®¢" target="_blank"> </a> <a href="http://wellsiteds.javaeye.com/blog/profile" title="æµè§ˆä½œè€…èµ„æ–™" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=wellsiteds" title="å‘é€ç«™å†…çŸ­ä¿¡" target="_blank"> </a> <a href="http://wellsiteds.javaeye.com/blog/guest_book" title="ç»™ä½œè€…ç•™è¨€" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=wellsiteds" title="å…³æ³¨ä½œè€…" target="_blank"> </a> <a href="http://www.javaeye.com/topic/662546?page=2#1488135" title="wellsitedså›å¸–:æƒ³æ”¾å¼ƒä¸€ä¸ªoffer,æ˜¯å¦éœ€è¦ç»™HRæ‰“ä¸ªç”µè¯è¯´æ˜ä¸€ä¸‹ï¼Ÿæ€ä¹ˆè¯´å‘¢ï¼Ÿ" target="_blank">å›å¸–åœ°å€</a></p>
<p><a href="http://www.javaeye.com/topic/662546?page=2#" title="å¥½" target="_blank">0</a> <a href="http://www.javaeye.com/topic/662546?page=2#" title="å·®" target="_blank">0</a> è¯·ç™»å½•åæŠ•ç¥¨  * logicgate</p>
<ul>
<li>ç­‰çº§: <img src="&quot;ä¸‰æ˜Ÿä¼šå‘˜&quot;" alt="ä¸‰æ˜Ÿä¼šå‘˜"></li>
<li><a href="http://logicgate.javaeye.com/" target="_blank"><img src="&quot;logicgateçš„åšå®¢: å”¯åæ‰§ç‹‚æ‰èƒ½ç”Ÿå­˜&quot;" alt="logicgateçš„åšå®¢"></a></li>
<li>æ–‡ç« : 1233</li>
<li>ç§¯åˆ†: 312</li>
<li>æ¥è‡ª: äº²åŠ›åœŸ</li>
<li><img src="" alt="">
  å‘è¡¨æ—¶é—´ï¼š3 å°æ—¶å‰  </li>
</ul>
<p>æåŠ è–ªé—®é¢˜å¯ä»¥ç›´æ¥çº¦è€æ¿è°ˆè°ˆï¼Œå¼€é—¨è§å±±çš„æå‡ºæ¥å°±å¥½äº†ï¼Œä¸éœ€è¦æ‹å¼¯æŠ¹è§’ã€‚æ€åº¦è¦è¯šæ³ï¼Œä¸å¯ä»¥è¡¨ç°å‡ºä»»ä½•çš„è¦æŒŸï¼ˆå³ä½¿ä½ æœ‰è¿™ä¸ªèµ„æœ¬ï¼‰ï¼Œä½†å¯ä»¥ä¸¾èº«è¾¹åŒäº‹ï¼Œæœ‹å‹çš„ä¾‹å­ï¼Œè¯´æ˜è‡ªå·±åŠ è–ªçš„è¦æ±‚éå¸¸åˆç†ã€‚
è‡³äºèƒ½ä¸èƒ½æˆåŠŸï¼Œå¤§éƒ¨åˆ†è¿˜æ˜¯å–å†³äºä½ å¹³æ—¶çš„èƒ½åŠ›ã€‚å»ºè®®çº¦è°ˆè€æ¿å‰å…ˆæ‹œæ‹œæå˜‰æ¬£ã€‚ <a href="http://www.javaeye.com/topic/662546?page=2#" target="_blank">è¿”å›é¡¶æ¥¼</a> <a href="http://logicgate.javaeye.com/" title="æµè§ˆä½œè€…çš„åšå®¢" target="_blank"> </a> <a href="http://logicgate.javaeye.com/blog/profile" title="æµè§ˆä½œè€…èµ„æ–™" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=logicgate" title="å‘é€ç«™å†…çŸ­ä¿¡" target="_blank"> </a> <a href="http://logicgate.javaeye.com/blog/guest_book" title="ç»™ä½œè€…ç•™è¨€" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=logicgate" title="å…³æ³¨ä½œè€…" target="_blank"> </a> <a href="http://www.javaeye.com/topic/662546?page=2#1488146" title="logicgateå›å¸–:æƒ³æ”¾å¼ƒä¸€ä¸ªoffer,æ˜¯å¦éœ€è¦ç»™HRæ‰“ä¸ªç”µè¯è¯´æ˜ä¸€ä¸‹ï¼Ÿæ€ä¹ˆè¯´å‘¢ï¼Ÿ" target="_blank">å›å¸–åœ°å€</a></p>
<p><a href="http://www.javaeye.com/topic/662546?page=2#" title="å¥½" target="_blank">0</a> <a href="http://www.javaeye.com/topic/662546?page=2#" title="å·®" target="_blank">0</a> è¯·ç™»å½•åæŠ•ç¥¨  * chenlb</p>
<ul>
<li>ç­‰çº§: <img src="&quot;ä¸€æ˜Ÿä¼šå‘˜&quot;" alt="ä¸€æ˜Ÿä¼šå‘˜"></li>
<li><a href="http://chenlb.javaeye.com/" target="_blank"><img src="&quot;chenlbçš„åšå®¢: chenlb çš„å­¦ä¹ ç¬”è¿¹&quot;" alt="chenlbçš„åšå®¢"></a></li>
<li>æ–‡ç« : 130</li>
<li>ç§¯åˆ†: 143</li>
<li>æ¥è‡ª: å¹¿å·</li>
<li><img src="" alt="">
  å‘è¡¨æ—¶é—´ï¼š3 å°æ—¶å‰   æœ€åä¿®æ”¹ï¼š3 å°æ—¶å‰</li>
</ul>
<p>å¦‚æœ offer é‡Œæœ‰è¯´åˆ°, ç¡®è®¤åä¸èƒ½æŒ‰æ—¶æŠ¥åˆ°, å…¬å¸æœ‰æƒç´¢èµ” 1-2 ä¸ªæœˆçš„è–ªæ°´?
è¿™æ ·è¦èµ”å—? <a href="http://www.javaeye.com/topic/662546?page=2#" target="_blank">è¿”å›é¡¶æ¥¼</a> <a href="http://chenlb.javaeye.com/" title="æµè§ˆä½œè€…çš„åšå®¢" target="_blank"> </a> <a href="http://chenlb.javaeye.com/blog/profile" title="æµè§ˆä½œè€…èµ„æ–™" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=chenlb" title="å‘é€ç«™å†…çŸ­ä¿¡" target="_blank"> </a> <a href="http://chenlb.javaeye.com/blog/guest_book" title="ç»™ä½œè€…ç•™è¨€" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=chenlb" title="å…³æ³¨ä½œè€…" target="_blank"> </a> <a href="http://www.javaeye.com/topic/662546?page=2#1488167" title="chenlbå›å¸–:æƒ³æ”¾å¼ƒä¸€ä¸ªoffer,æ˜¯å¦éœ€è¦ç»™HRæ‰“ä¸ªç”µè¯è¯´æ˜ä¸€ä¸‹ï¼Ÿæ€ä¹ˆè¯´å‘¢ï¼Ÿ" target="_blank">å›å¸–åœ°å€</a></p>
<p><a href="http://www.javaeye.com/topic/662546?page=2#" title="å¥½" target="_blank">0</a> <a href="http://www.javaeye.com/topic/662546?page=2#" title="å·®" target="_blank">0</a> è¯·ç™»å½•åæŠ•ç¥¨  * åˆƒä¹‹èˆ</p>
<ul>
<li>ç­‰çº§: åˆçº§ä¼šå‘˜</li>
<li><a href="http://didiao.javaeye.com/" target="_blank"><img src="&quot;åˆƒä¹‹èˆçš„åšå®¢: ä½è°ƒåšäº‹ï¼Œé«˜è°ƒåšäºº&quot;" alt="åˆƒä¹‹èˆçš„åšå®¢"></a></li>
<li>æ–‡ç« : 263</li>
<li>ç§¯åˆ†: 30</li>
<li>æ¥è‡ª: æ¸”æ‘</li>
<li><img src="" alt="">
  å‘è¡¨æ—¶é—´ï¼š3 å°æ—¶å‰  </li>
</ul>
<p>chenlb å†™é“</p>
<p>å¦‚æœ offer é‡Œæœ‰è¯´åˆ°, ç¡®è®¤åä¸èƒ½æŒ‰æ—¶æŠ¥åˆ°, å…¬å¸æœ‰æƒç´¢èµ” 1-2 ä¸ªæœˆçš„è–ªæ°´?
è¿™æ ·è¦èµ”å—?
è¿™ä¸ªæ¡çº¦å‹æ ¹å°±æ˜¯ä¸ªè¿æ³•çš„ï¼Œä¸ç”¨ç†ä¼šï¼Œé™¤éé‚£ä¸ªå…¬å¸å…ˆé¢„ä»˜ä½ é’±äº†ã€‚ <a href="http://www.javaeye.com/topic/662546?page=2#" target="_blank">è¿”å›é¡¶æ¥¼</a> <a href="http://didiao.javaeye.com/" title="æµè§ˆä½œè€…çš„åšå®¢" target="_blank"> </a> <a href="http://didiao.javaeye.com/blog/profile" title="æµè§ˆä½œè€…èµ„æ–™" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=%E5%88%83%E4%B9%8B%E8%88%9E" title="å‘é€ç«™å†…çŸ­ä¿¡" target="_blank"> </a> <a href="http://didiao.javaeye.com/blog/guest_book" title="ç»™ä½œè€…ç•™è¨€" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=%E5%88%83%E4%B9%8B%E8%88%9E" title="å…³æ³¨ä½œè€…" target="_blank"> </a> <a href="http://www.javaeye.com/topic/662546?page=2#1488200" title="åˆƒä¹‹èˆå›å¸–:æƒ³æ”¾å¼ƒä¸€ä¸ªoffer,æ˜¯å¦éœ€è¦ç»™HRæ‰“ä¸ªç”µè¯è¯´æ˜ä¸€ä¸‹ï¼Ÿæ€ä¹ˆè¯´å‘¢ï¼Ÿ" target="_blank">å›å¸–åœ°å€</a></p>
<p><a href="http://www.javaeye.com/topic/662546?page=2#" title="å¥½" target="_blank">0</a> <a href="http://www.javaeye.com/topic/662546?page=2#" title="å·®" target="_blank">0</a> è¯·ç™»å½•åæŠ•ç¥¨  * chanball</p>
<ul>
<li>ç­‰çº§: <img src="&quot;ä¸€æ˜Ÿä¼šå‘˜&quot;" alt="ä¸€æ˜Ÿä¼šå‘˜"></li>
<li><a href="http://javaextjs.javaeye.com/" target="_blank"><img src="&quot;chanballçš„åšå®¢: æ˜Ÿç©ºåŸå ¡&quot;" alt="chanballçš„åšå®¢"></a></li>
<li>æ–‡ç« : 112</li>
<li>ç§¯åˆ†: 170</li>
<li>æ¥è‡ª: å¹¿å·</li>
<li><img src="" alt="">
  å‘è¡¨æ—¶é—´ï¼š3 å°æ—¶å‰  </li>
</ul>
<p>è¿˜æ˜¯é‚£å¥è€è¯ï¼šhrä¸æ‹›ä½ çš„è¯ä¼šç»™ä½ ç”µè¯è¯´å¥¹ä»¬ä¸è¦ä½ äº†å—ï¼Ÿä¸ä¼šã€‚æ‰€ä»¥ä½ æ‰“ä¸æ‰“å…¶å®ä¹Ÿæ— æ‰€è°“ã€‚å½“ç„¶ï¼Œä½ å…¶å®å¿ƒç†å¾ˆä¸æƒ³æ‰“ä½†æ˜¯åˆè¦è¡¨ç°å¾—ä½ äººå“å¤šä¹ˆæœ‰é—®é¢˜ï¼Œé‚£ä½ å°±æ‰“å§ï¼ <a href="http://www.javaeye.com/topic/662546?page=2#" target="_blank">è¿”å›é¡¶æ¥¼</a> <a href="http://javaextjs.javaeye.com/" title="æµè§ˆä½œè€…çš„åšå®¢" target="_blank"> </a> <a href="http://javaextjs.javaeye.com/blog/profile" title="æµè§ˆä½œè€…èµ„æ–™" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=chanball" title="å‘é€ç«™å†…çŸ­ä¿¡" target="_blank"> </a> <a href="http://javaextjs.javaeye.com/blog/guest_book" title="ç»™ä½œè€…ç•™è¨€" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=chanball" title="å…³æ³¨ä½œè€…" target="_blank"> </a> <a href="http://www.javaeye.com/topic/662546?page=2#1488206" title="chanballå›å¸–:æƒ³æ”¾å¼ƒä¸€ä¸ªoffer,æ˜¯å¦éœ€è¦ç»™HRæ‰“ä¸ªç”µè¯è¯´æ˜ä¸€ä¸‹ï¼Ÿæ€ä¹ˆè¯´å‘¢ï¼Ÿ" target="_blank">å›å¸–åœ°å€</a></p>
<p><a href="http://www.javaeye.com/topic/662546?page=2#" title="å¥½" target="_blank">0</a> <a href="http://www.javaeye.com/topic/662546?page=2#" title="å·®" target="_blank">0</a> è¯·ç™»å½•åæŠ•ç¥¨  * logicgate</p>
<ul>
<li>ç­‰çº§: <img src="&quot;ä¸‰æ˜Ÿä¼šå‘˜&quot;" alt="ä¸‰æ˜Ÿä¼šå‘˜"></li>
<li><a href="http://logicgate.javaeye.com/" target="_blank"><img src="&quot;logicgateçš„åšå®¢: å”¯åæ‰§ç‹‚æ‰èƒ½ç”Ÿå­˜&quot;" alt="logicgateçš„åšå®¢"></a></li>
<li>æ–‡ç« : 1233</li>
<li>ç§¯åˆ†: 312</li>
<li>æ¥è‡ª: äº²åŠ›åœŸ</li>
<li><img src="" alt="">
  å‘è¡¨æ—¶é—´ï¼š3 å°æ—¶å‰  </li>
</ul>
<p>chanball å†™é“</p>
<p>è¿˜æ˜¯é‚£å¥è€è¯ï¼šhrä¸æ‹›ä½ çš„è¯ä¼šç»™ä½ ç”µè¯è¯´å¥¹ä»¬ä¸è¦ä½ äº†å—ï¼Ÿä¸ä¼šã€‚æ‰€ä»¥ä½ æ‰“ä¸æ‰“å…¶å®ä¹Ÿæ— æ‰€è°“ã€‚å½“ç„¶ï¼Œä½ å…¶å®å¿ƒç†å¾ˆä¸æƒ³æ‰“ä½†æ˜¯åˆè¦è¡¨ç°å¾—ä½ äººå“å¤šä¹ˆæœ‰é—®é¢˜ï¼Œé‚£ä½ å°±æ‰“å§ï¼
ä¸æ˜¯è¿™ä¹ˆè¯´çš„ã€‚é¢è¯•å¹¶ä¸ç®—æ˜¯ä¸€ç§å¥‘çº¦ï¼Œé¢è¯•è¿‡åä¸è¦ä½ ï¼Œå½“ç„¶ä¸éœ€è¦æ‰“ã€‚
ä½†å¦‚æœç»™äº†ä½ offerï¼Œä½ å½“æ—¶ä¹ŸåŒæ„äº†ï¼Œå°±ç®—æ˜¯ä¸€ç§å¥‘çº¦æˆ–è€…æ‰¿è¯ºã€‚æ‰€ä»¥ä»»ä½•ä¸€æ–¹æƒ³å•æ–¹é¢å–æ¶ˆçš„è¯ï¼Œè¿˜æ˜¯åº”è¯¥é€šçŸ¥å¯¹æ–¹ã€‚
è‡ªå·±ä¸¾æ‰‹ä¹‹åŠ³ï¼Œæ–¹ä¾¿äº†å¯¹æ–¹ï¼Œä¹Ÿç»™è‡ªå·±ç•™äº†åè·¯ï¼ˆæˆ‘æ›¾ç»æ‹’è¿‡ä¸€ä¸ªå…¬å¸ä½†ä¸¤å¹´ååˆå»é‚£ä¸ªå…¬å¸é¢è¯•ï¼‰ã€‚ <a href="http://www.javaeye.com/topic/662546?page=2#" target="_blank">è¿”å›é¡¶æ¥¼</a> <a href="http://logicgate.javaeye.com/" title="æµè§ˆä½œè€…çš„åšå®¢" target="_blank"> </a> <a href="http://logicgate.javaeye.com/blog/profile" title="æµè§ˆä½œè€…èµ„æ–™" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=logicgate" title="å‘é€ç«™å†…çŸ­ä¿¡" target="_blank"> </a> <a href="http://logicgate.javaeye.com/blog/guest_book" title="ç»™ä½œè€…ç•™è¨€" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=logicgate" title="å…³æ³¨ä½œè€…" target="_blank"> </a> <a href="http://www.javaeye.com/topic/662546?page=2#1488227" title="logicgateå›å¸–:æƒ³æ”¾å¼ƒä¸€ä¸ªoffer,æ˜¯å¦éœ€è¦ç»™HRæ‰“ä¸ªç”µè¯è¯´æ˜ä¸€ä¸‹ï¼Ÿæ€ä¹ˆè¯´å‘¢ï¼Ÿ" target="_blank">å›å¸–åœ°å€</a></p>
<p><a href="http://www.javaeye.com/topic/662546?page=2#" title="å¥½" target="_blank">0</a> <a href="http://www.javaeye.com/topic/662546?page=2#" title="å·®" target="_blank">0</a> è¯·ç™»å½•åæŠ•ç¥¨  * surpass_li</p>
<ul>
<li>ç­‰çº§: åˆçº§ä¼šå‘˜</li>
<li><a href="http://surpass-li.javaeye.com/" target="_blank"><img src="&quot;surpass_liçš„åšå®¢: surpass_li&quot;" alt="surpass_liçš„åšå®¢"></a></li>
<li>æ–‡ç« : 15</li>
<li>ç§¯åˆ†: 10</li>
<li>æ¥è‡ª: æ²ˆé˜³</li>
<li><img src="" alt="">
  å‘è¡¨æ—¶é—´ï¼š3 å°æ—¶å‰  </li>
</ul>
<p>å›å¤ä¸€ä¸‹å§ <a href="http://www.javaeye.com/topic/662546?page=2#" target="_blank">è¿”å›é¡¶æ¥¼</a> <a href="http://surpass-li.javaeye.com/" title="æµè§ˆä½œè€…çš„åšå®¢" target="_blank"> </a> <a href="http://surpass-li.javaeye.com/blog/profile" title="æµè§ˆä½œè€…èµ„æ–™" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=surpass_li" title="å‘é€ç«™å†…çŸ­ä¿¡" target="_blank"> </a> <a href="http://surpass-li.javaeye.com/blog/guest_book" title="ç»™ä½œè€…ç•™è¨€" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=surpass_li" title="å…³æ³¨ä½œè€…" target="_blank"> </a> <a href="http://www.javaeye.com/topic/662546?page=2#1488233" title="surpass_liå›å¸–:æƒ³æ”¾å¼ƒä¸€ä¸ªoffer,æ˜¯å¦éœ€è¦ç»™HRæ‰“ä¸ªç”µè¯è¯´æ˜ä¸€ä¸‹ï¼Ÿæ€ä¹ˆè¯´å‘¢ï¼Ÿ" target="_blank">å›å¸–åœ°å€</a></p>
<p><a href="http://www.javaeye.com/topic/662546?page=2#" title="å¥½" target="_blank">0</a> <a href="http://www.javaeye.com/topic/662546?page=2#" title="å·®" target="_blank">0</a> è¯·ç™»å½•åæŠ•ç¥¨  * aws</p>
<ul>
<li>ç­‰çº§: åˆçº§ä¼šå‘˜</li>
<li><a href="http://aws.javaeye.com/" target="_blank"><img src="&quot;awsçš„åšå®¢: aws&quot;" alt="awsçš„åšå®¢"></a></li>
<li>æ–‡ç« : 243</li>
<li>ç§¯åˆ†: 30</li>
<li>æ¥è‡ª: ä¸Šæµ·</li>
<li><a href="http://www.javaeye.com/topic/617563" title="æˆ‘æ­£åœ¨çœ‹ã€Šå¤§è±¡çš„æ•…äº‹ã€‹" target="_blank"><img src="" alt=""></a>
  å‘è¡¨æ—¶é—´ï¼š3 å°æ—¶å‰  </li>
</ul>
<p>æœ‰ä¹¦é¢offerä¹ˆï¼Ÿå†è¯´ä¹¦é¢offerä½ ç­¾å­—ç­”åº”äº†ä¹ˆï¼Ÿ
å£å¤´çš„ç®—å•¥ï¼Ÿç”µè¯å½•éŸ³ï¼Ÿ <a href="http://www.javaeye.com/topic/662546?page=2#" target="_blank">è¿”å›é¡¶æ¥¼</a> <a href="http://aws.javaeye.com/" title="æµè§ˆä½œè€…çš„åšå®¢" target="_blank"> </a> <a href="http://aws.javaeye.com/blog/profile" title="æµè§ˆä½œè€…èµ„æ–™" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=aws" title="å‘é€ç«™å†…çŸ­ä¿¡" target="_blank"> </a> <a href="http://aws.javaeye.com/blog/guest_book" title="ç»™ä½œè€…ç•™è¨€" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=aws" title="å…³æ³¨ä½œè€…" target="_blank"> </a> <a href="http://www.javaeye.com/topic/662546?page=2#1488238" title="awså›å¸–:æƒ³æ”¾å¼ƒä¸€ä¸ªoffer,æ˜¯å¦éœ€è¦ç»™HRæ‰“ä¸ªç”µè¯è¯´æ˜ä¸€ä¸‹ï¼Ÿæ€ä¹ˆè¯´å‘¢ï¼Ÿ" target="_blank">å›å¸–åœ°å€</a></p>
<p><a href="http://www.javaeye.com/topic/662546?page=2#" title="å¥½" target="_blank">0</a> <a href="http://www.javaeye.com/topic/662546?page=2#" title="å·®" target="_blank">0</a> è¯·ç™»å½•åæŠ•ç¥¨  * mathfox</p>
<ul>
<li>ç­‰çº§: åˆçº§ä¼šå‘˜</li>
<li><a href="http://mathfox.javaeye.com/" target="_blank"><img src="&quot;mathfoxçš„åšå®¢: mathfox&quot;" alt="mathfoxçš„åšå®¢"></a></li>
<li>æ–‡ç« : 67</li>
<li>ç§¯åˆ†: 40</li>
<li>æ¥è‡ª: åŒ—äº¬</li>
<li><img src="" alt="">
  å‘è¡¨æ—¶é—´ï¼š2 å°æ—¶å‰  </li>
</ul>
<p>logicgate å†™é“</p>
<p>æåŠ è–ªé—®é¢˜å¯ä»¥ç›´æ¥çº¦è€æ¿è°ˆè°ˆï¼Œå¼€é—¨è§å±±çš„æå‡ºæ¥å°±å¥½äº†ï¼Œä¸éœ€è¦æ‹å¼¯æŠ¹è§’ã€‚æ€åº¦è¦è¯šæ³ï¼Œä¸å¯ä»¥è¡¨ç°å‡ºä»»ä½•çš„è¦æŒŸï¼ˆå³ä½¿ä½ æœ‰è¿™ä¸ªèµ„æœ¬ï¼‰ï¼Œä½†å¯ä»¥ä¸¾èº«è¾¹åŒäº‹ï¼Œæœ‹å‹çš„ä¾‹å­ï¼Œè¯´æ˜è‡ªå·±åŠ è–ªçš„è¦æ±‚éå¸¸åˆç†ã€‚
è‡³äºèƒ½ä¸èƒ½æˆåŠŸï¼Œå¤§éƒ¨åˆ†è¿˜æ˜¯å–å†³äºä½ å¹³æ—¶çš„èƒ½åŠ›ã€‚å»ºè®®çº¦è°ˆè€æ¿å‰å…ˆæ‹œæ‹œæå˜‰æ¬£ã€‚</p>
<p>è¿™æ˜¯ä»€ä¹ˆæ„æ€å•Šï¼Ÿ</p>
<p>  <a href="http://www.javaeye.com/topic/662546?page=2#" target="_blank">è¿”å›é¡¶æ¥¼</a> <a href="http://mathfox.javaeye.com/" title="æµè§ˆä½œè€…çš„åšå®¢" target="_blank"> </a> <a href="http://mathfox.javaeye.com/blog/profile" title="æµè§ˆä½œè€…èµ„æ–™" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=mathfox" title="å‘é€ç«™å†…çŸ­ä¿¡" target="_blank"> </a> <a href="http://mathfox.javaeye.com/blog/guest_book" title="ç»™ä½œè€…ç•™è¨€" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=mathfox" title="å…³æ³¨ä½œè€…" target="_blank"> </a> <a href="http://www.javaeye.com/topic/662546?page=2#1488260" title="mathfoxå›å¸–:æƒ³æ”¾å¼ƒä¸€ä¸ªoffer,æ˜¯å¦éœ€è¦ç»™HRæ‰“ä¸ªç”µè¯è¯´æ˜ä¸€ä¸‹ï¼Ÿæ€ä¹ˆè¯´å‘¢ï¼Ÿ" target="_blank">å›å¸–åœ°å€</a></p>
<p><a href="http://www.javaeye.com/topic/662546?page=2#" title="å¥½" target="_blank">0</a> <a href="http://www.javaeye.com/topic/662546?page=2#" title="å·®" target="_blank">0</a> è¯·ç™»å½•åæŠ•ç¥¨  * logicgate</p>
<ul>
<li>ç­‰çº§: <img src="&quot;ä¸‰æ˜Ÿä¼šå‘˜&quot;" alt="ä¸‰æ˜Ÿä¼šå‘˜"></li>
<li><a href="http://logicgate.javaeye.com/" target="_blank"><img src="&quot;logicgateçš„åšå®¢: å”¯åæ‰§ç‹‚æ‰èƒ½ç”Ÿå­˜&quot;" alt="logicgateçš„åšå®¢"></a></li>
<li>æ–‡ç« : 1233</li>
<li>ç§¯åˆ†: 312</li>
<li>æ¥è‡ª: äº²åŠ›åœŸ</li>
<li><img src="" alt="">
  å‘è¡¨æ—¶é—´ï¼š2 å°æ—¶å‰  </li>
</ul>
<p>mathfox å†™é“</p>
<p>logicgate å†™é“</p>
<p>æåŠ è–ªé—®é¢˜å¯ä»¥ç›´æ¥çº¦è€æ¿è°ˆè°ˆï¼Œå¼€é—¨è§å±±çš„æå‡ºæ¥å°±å¥½äº†ï¼Œä¸éœ€è¦æ‹å¼¯æŠ¹è§’ã€‚æ€åº¦è¦è¯šæ³ï¼Œä¸å¯ä»¥è¡¨ç°å‡ºä»»ä½•çš„è¦æŒŸï¼ˆå³ä½¿ä½ æœ‰è¿™ä¸ªèµ„æœ¬ï¼‰ï¼Œä½†å¯ä»¥ä¸¾èº«è¾¹åŒäº‹ï¼Œæœ‹å‹çš„ä¾‹å­ï¼Œè¯´æ˜è‡ªå·±åŠ è–ªçš„è¦æ±‚éå¸¸åˆç†ã€‚
è‡³äºèƒ½ä¸èƒ½æˆåŠŸï¼Œå¤§éƒ¨åˆ†è¿˜æ˜¯å–å†³äºä½ å¹³æ—¶çš„èƒ½åŠ›ã€‚å»ºè®®çº¦è°ˆè€æ¿å‰å…ˆæ‹œæ‹œæå˜‰æ¬£ã€‚</p>
<p>è¿™æ˜¯ä»€ä¹ˆæ„æ€å•Šï¼Ÿ</p>
<p>æå˜‰æ¬£=ä½ åŠ è–ªè¿™ä¸ªéƒ½ä¸æ‡‚ï¼Ÿ <a href="http://www.javaeye.com/topic/662546?page=2#" target="_blank">è¿”å›é¡¶æ¥¼</a> <a href="http://logicgate.javaeye.com/" title="æµè§ˆä½œè€…çš„åšå®¢" target="_blank"> </a> <a href="http://logicgate.javaeye.com/blog/profile" title="æµè§ˆä½œè€…èµ„æ–™" target="_blank"> </a> <a href="http://app.javaeye.com/messages/new?message%5Breceiver_name%5D=logicgate" title="å‘é€ç«™å†…çŸ­ä¿¡" target="_blank"> </a> <a href="http://logicgate.javaeye.com/blog/guest_book" title="ç»™ä½œè€…ç•™è¨€" target="_blank"> </a> <a href="http://app.javaeye.com/feed?subscription%5Bsubscribed_user_name%5D=logicgate" title="å…³æ³¨ä½œè€…" target="_blank"> </a> <a href="http://www.javaeye.com/topic/662546?page=2#1488278" title="logicgateå›å¸–:æƒ³æ”¾å¼ƒä¸€ä¸ªoffer,æ˜¯å¦éœ€è¦ç»™HRæ‰“ä¸ªç”µè¯è¯´æ˜ä¸€ä¸‹ï¼Ÿæ€ä¹ˆè¯´å‘¢ï¼Ÿ" target="_blank">å›å¸–åœ°å€</a></p>
<p><a href="http://www.javaeye.com/topic/662546?page=2#" title="å¥½" target="_blank">0</a> <a href="http://www.javaeye.com/topic/662546?page=2#" title="å·®" target="_blank">0</a> è¯·ç™»å½•åæŠ•ç¥¨</p>
<p><a href="http://www.javaeye.com/forums/44/topics/662546/posts/new" title="å‘è¡¨å›å¤"></a></p>
<p><a href="http://www.javaeye.com/topic/662546?page=1" target="_blank">Â« ä¸Šä¸€é¡µ</a> <a href="http://www.javaeye.com/topic/662546?page=1" target="_blank">1</a> 2 <a href="http://www.javaeye.com/topic/662546?page=3" target="_blank">3</a> <a href="http://www.javaeye.com/topic/662546?page=3" target="_blank">ä¸‹ä¸€é¡µ Â»</a>
<a href="http://www.javaeye.com/forums" target="_blank">è®ºå›é¦–é¡µ</a> â†’ <a href="http://www.javaeye.com/forums/board/Job" target="_blank">æ‹›è˜æ±‚èŒç‰ˆ</a> â†’ <a href="http://www.javaeye.com/forums/tag/career" target="_blank">èŒåœºè¯é¢˜</a>
è·³è½¬è®ºå›:Javaç¼–ç¨‹å’ŒJavaä¼ä¸šåº”ç”¨ Webå‰ç«¯æŠ€æœ¯ ç§»åŠ¨ç¼–ç¨‹å’Œæ‰‹æœºåº”ç”¨å¼€å‘ C/C++ç¼–ç¨‹ Rubyç¼–ç¨‹ Pythonç¼–ç¨‹ PHPç¼–ç¨‹ Flashç¼–ç¨‹å’ŒRIA Microsoft .Net ç»¼åˆæŠ€æœ¯ è½¯ä»¶å¼€å‘å’Œé¡¹ç›®ç®¡ç† è¡Œä¸šåº”ç”¨ å…¥é—¨è®¨è®º æ‹›è˜æ±‚èŒ æµ·é˜”å¤©ç©º</p>
<ul>
<li><a href="http://www.javaeye.com/jobs/667" title="å¹¿ä¸œ:è´¢è¿é€šç§‘æŠ€æœ‰é™å…¬å¸è¯šè˜é«˜çº§Javaç¨‹åºå‘˜" target="_blank">å¹¿ä¸œ: è´¢è¿é€šç§‘æŠ€æœ‰é™å…¬å¸è¯šè˜é«˜çº§Javaç¨‹åºå‘˜</a></li>
<li><a href="http://www.javaeye.com/jobs/630" title="ä¸Šæµ·:é‘«éŸµç½‘ç»œè¯šè˜JAVAæœåŠ¡å™¨ç«¯å¼€å‘å·¥ç¨‹å¸ˆ" target="_blank">ä¸Šæµ·: é‘«éŸµç½‘ç»œè¯šè˜JAVAæœåŠ¡å™¨ç«¯å¼€å‘å·¥ç¨‹å¸ˆ</a></li>
<li><p><a href="http://www.javaeye.com/jobs/661" title="ä¸Šæµ·:æºè‹±ç½‘ç»œè¯šè˜QAè´¨é‡æ§åˆ¶ï¼ˆWEBæµ‹è¯•ã€æµç¨‹å»ºè®¾ã€é…ç½®ç®¡ç†ï¼‰ " target="_blank">ä¸Šæµ·: æºè‹±ç½‘ç»œè¯šè˜QAè´¨é‡æ§åˆ¶ï¼ˆWEBæµ‹è¯•ã€æµç¨‹å»ºè®¾</a></p>
</li>
<li><p><a href="http://www.javaeye.com/" target="_blank">é¦–é¡µ</a></p>
</li>
<li><a href="http://www.javaeye.com/news" target="_blank">æ–°é—»</a></li>
<li><a href="http://www.javaeye.com/forums" target="_blank">è®ºå›</a></li>
<li><a href="http://www.javaeye.com/ask" target="_blank">é—®ç­”</a></li>
<li><a href="http://www.javaeye.com/wiki" target="_blank">ä¸“æ </a></li>
<li><a href="http://www.javaeye.com/blogs" target="_blank">åšå®¢</a></li>
<li><a href="http://www.javaeye.com/articles" target="_blank">æ–‡æ‘˜</a></li>
<li><a href="http://www.javaeye.com/groups" target="_blank">åœˆå­</a></li>
<li><a href="http://www.javaeye.com/job" target="_blank">æ‹›è˜</a></li>
<li><a href="http://www.javaeye.com/index/service" target="_blank">æœåŠ¡</a></li>
<li><a href="http://www.javaeye.com/google_search" target="_blank">æœç´¢</a></li>
<li><a href="http://java.javaeye.com/" target="_blank">Java</a></li>
<li><a href="http://webapp.javaeye.com/" target="_blank">Web</a></li>
<li><a href="http://ruby.javaeye.com/" target="_blank">Ruby</a></li>
<li><a href="http://python.javaeye.com/" target="_blank">Python</a></li>
<li><a href="http://agile.javaeye.com/" target="_blank">æ•æ·</a></li>
<li><a href="http://mysql.javaeye.com/" target="_blank">MySQL</a></li>
<li><a href="http://runqian.javaeye.com/" target="_blank">æ¶¦äºæŠ¥è¡¨</a></li>
<li><a href="http://book.javaeye.com/" target="_blank">å›¾ä¹¦</a></li>
<li><a href="http://www.javaeye.com/index/service" target="_blank">å¹¿å‘ŠæœåŠ¡</a></li>
<li><a href="http://webmaster.javaeye.com/" target="_blank">JavaEyeé»‘æ¿æŠ¥</a></li>
<li><a href="http://www.javaeye.com/index/aboutus" target="_blank">å…³äºæˆ‘ä»¬</a></li>
<li><a href="http://www.javaeye.com/index/contactus" target="_blank">è”ç³»æˆ‘ä»¬</a></li>
<li><a href="http://www.javaeye.com/index/friend_links" target="_blank">å‹æƒ…é“¾æ¥</a></li>
</ul>
<p>Â© 2003-2010 JavaEye.com. ä¸Šæµ·ç‚¯è€è®¡ç®—æœºè½¯ä»¶æœ‰é™å…¬å¸ç‰ˆæƒæ‰€æœ‰ [ <a href="http://www.miibeian.gov.cn/" target="_blank">æ²ªICPå¤‡05023328å·</a> ]</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/zhiya/">zhiya</a></li></span><span class="breadcrumb"><li><a href="/categories/èŒæ¶¯/">èŒæ¶¯</a></li><li><a href="/categories/èŒæ¶¯/aboutpay/">aboutpay</a></li></span></span> | <span class="tags">Tagged <a href="/tags/aboutpay/" class="label label-primary">aboutpay</a><a href="/tags/zhiya/" class="label label-success">zhiya</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:37"datetime="2014-03-07 09:54:37"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-zhiya-aboutpay--ruhejiaxinè®¨è®ºç¬¬2é¡µ-èŒåœºè¯é¢˜/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-zhiya-aboutpay--ruhejiaxinè®¨è®ºç¬¬2é¡µ-èŒåœºè¯é¢˜" data-count-type="comments">æš‚æ— è¯„è®º</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/92/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/90/">90</a></li><li><a class="page-number" href="/page/91/">91</a></li><li><a class="page-number" href="/page/92/">92</a></li><li class="active"><li><span class="page-number current">93</span></li><li><a class="page-number" href="/page/94/">94</a></li><li><a class="page-number" href="/page/95/">95</a></li><li><a class="page-number" href="/page/96/">96</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/161/">161</a></li><li><a class="page-number" href="/page/162/">162</a></li><li><a class="extend next" href="/page/94/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>æ­£åœ¨åŠ è½½...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>æ­£åœ¨åŠ è½½...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>æ­£åœ¨åŠ è½½...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">æœ€è¿‘æ›´æ–°</div>  <div data-src='latest_update_posts' class='ajax_widgets'>æ­£åœ¨åŠ è½½...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Site powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a>  update time: <em>2014-04-07 18:24:57</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
