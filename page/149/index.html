
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>The 149 Page | It so life</title>
<meta name="author" content="RobinChia">

<meta name="description" content="It so life">


<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta property="og:site_name" content="It so life"/>

<!--[if IE]><style>.testIE.IE{display:inline;}</style><![endif]-->
<!--[if lte IE 7]><link rel="stylesheet" href="/css/ie7.css" type="text/css"><![endif]-->
<!--[if (lt IE 9)&(gt IE 7)]><style>.testIE.IE8{display:inline;}</style><![endif]-->
<!--[if gt IE 8]><style>.testIE.IE9{display:inline;}</style><![endif]-->

<link href="/favicon.png" rel="icon">
<link rel="alternate" href="/atom.xml" title="It so life Feed" type="application/atom+xml">

<link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/prettify/r298/prettify.min.css" type="text/css">
<link rel="stylesheet" href="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
<!--[if lt IE 9]>
   <style>article,aside,dialog,footer,header,section,footer,nav,figure,menu{display:block}</style>
   <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
   <script src="http://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<link href="http://cdn.staticfile.org/respond.js/1.4.2/respond-proxy.html" id="respond-proxy" rel="respond-proxy" />
<link href="/js/respond.proxy.gif" id="respond-redirect" rel="respond-redirect" />
<script src="/js/respond.proxy.js"></script>
   <script src="http://cdn.bootcss.com/selectivizr/1.0.2/selectivizr-min.js"></script>
<![endif]-->
<script type="text/javascript">
function loadjs(c,d){var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.src=c;a.charset=d||"gbk";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)};
var _protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
var _js2load = [];
</script>

</head>
<body>
      <header id="header" class="container"><nav id="main-nav" class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="/">It so life</a>
    </div>
    <div  class="collapse navbar-collapse">
      <ul  class="nav navbar-nav">
  
        <li><a href="/" title="Home">Home</a></li>      
        <li><a href="/about/" title="About">About</a></li>      
        <li><a href="/archives/" title="Archives">Archives</a></li>      
      <li class='dropdown'>
        <a class='dropdown-toggle' data-toggle='dropdown' href='#'>website<b class='caret'></b></a>
        <ul class='dropdown-menu pure-menu-selected'>
    
          <li><a href="//groups.google.com/forum/#!forum/pongba" title="TopLanguage">TopLanguage</a></li>    
          <li><a href="//itpub.net/" title="ITPub">ITPub</a></li>    
          <li><a href="//blog.jobbole.com/" title="Bole">Bole</a></li>    
          <li><a href="//nosql-database.org/" title="nosql">nosql</a></li>    
          <li><a href="//gitimmersion.googol.im/" title="Git">Git</a></li>    
        </ul>
      </li>
    
      </ul>
      <ul class="nav navbar-nav navbar-right">
      
        <li><a href="/atom.xml">RSS</a></li>
      
      
        <li><a href="https://twitter.com/robinchia">twitter</a></li>
      
      
      
      
        <li><a href="https://github.com/robinchia">github</a></li>
      
      </ul>
    </div>
  </div>
</nav>
<div class="clearfix"></div>
</header>
  <div id='content' class="container">
     <div class="page-header-wrapper">
      <!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]-->
      <div class="page-header"><h1 align="center"><big>It so life</big> </h1>
        <h5 align="center"><big>love as life</big></h5>
      </div>
     </div>
     <div class="row">
       <div id="main-col" class="alignleft col-sx-12 col-sm-8 col-md-9 col-lg-9">
      <section id='header_widget'></section>
          <div id="wrapper"><article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-lucene--Lucene学习总结之二：Lucene的总体架构/">Lucene学习总结之二：Lucene的总体架构</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:28.000Z"> <a href="/2014/02/02/2014-02-02-lucene--Lucene学习总结之二：Lucene的总体架构/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="lucene-lucene-">Lucene学习总结之二：Lucene的总体架构</h1>
<p><a href=""></a></p>
<h1 id="-http-www-cnblogs-com-forfuture1978-"><a href="http://www.cnblogs.com/forfuture1978/" target="_blank">觉先</a></h1>
<p>  <a href="http://www.cnblogs.com/" target="_blank">博客园</a> :: <a href="http://www.cnblogs.com/forfuture1978/" target="_blank">首页</a> :: <a href="http://q.cnblogs.com/" target="_blank">博问</a> :: <a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a> :: <a href="http://www.cnblogs.com/forfuture1978/admin/EditPosts.aspx?opt=1" target="_blank">新随笔</a> :: <a href="http://space.cnblogs.com/msg/send/%e8%a7%89%e5%85%88" target="_blank">联系</a> :: <a href="http://www.cnblogs.com/forfuture1978/rss" target="_blank">订阅</a> <a href="http://www.cnblogs.com/forfuture1978/rss" target="_blank"><img src="" alt="订阅"></a> :: <a href="http://www.cnblogs.com/forfuture1978/admin/EditPosts.aspx" target="_blank">管理</a> :: <img src="" alt="">   130 随笔 :: 0 文章 :: 544 评论 :: 0 引用
<a href="">&lt;</a>2009年12月<a href="">&gt;</a>日一二三四五六293012345678910111213<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14.html" target="_blank">14</a>151617<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/18.html" target="_blank">18</a>1920<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/21.html" target="_blank">21</a>22232425262728293031123456789</p>
<h3 id="-">公告</h3>
<p>昵称：<a href="http://home.cnblogs.com/u/forfuture1978/" target="_blank">觉先</a>
园龄：<a href="http://home.cnblogs.com/u/forfuture1978/" title="入园时间：2009-12-10" target="_blank">3年7个月</a>
荣誉：<a href="http://www.cnblogs.com/expert/" target="_blank">推荐博客</a>
粉丝：<a href="http://home.cnblogs.com/u/forfuture1978/followers/" target="_blank">560</a>
关注：<a href="http://home.cnblogs.com/u/forfuture1978/followees/" target="_blank">3</a></p>
<p><a href="">+加关注</a></p>
<h3 id="-">搜索</h3>
<h3 id="-">常用链接</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/MyPosts.html" target="_blank">我的随笔</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/MyComments.html" target="_blank">我的评论</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/OtherPosts.html" title="我发表过评论的随笔" target="_blank">我的参与</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/RecentComments.html" target="_blank">最新评论</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/tag/" target="_blank">我的标签</a></li>
</ul>
<h3 id="-">随笔分类</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/category/300670.html" target="_blank">Hadoop原理与代码分析(7)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/300669.html" target="_blank">IT外企那点儿事(12)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/345798.html" target="_blank">Java(2)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/345797.html" target="_blank">Linux(14)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/300665.html" target="_blank">Lucene原理与代码分析(38)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/300666.html" target="_blank">长尾理论(16)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/345794.html" target="_blank">管理学(10)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/345800.html" target="_blank">经济学(4)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/345796.html" target="_blank">算法(1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/345795.html" target="_blank">闲话IT业(3)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/300667.html" target="_blank">心理学与管理学效应(9)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/category/300668.html" target="_blank">组织行为学(15)</a></li>
</ul>
<h3 id="-">随笔档案</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/11.html" target="_blank">2012年11月 (3)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/01.html" target="_blank">2012年1月 (5)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2011/12.html" target="_blank">2011年12月 (6)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2011/10.html" target="_blank">2011年10月 (3)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2011/09.html" target="_blank">2011年9月 (1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/11.html" target="_blank">2010年11月 (8)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/10.html" target="_blank">2010年10月 (1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/09.html" target="_blank">2010年9月 (1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/08.html" target="_blank">2010年8月 (1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/07.html" target="_blank">2010年7月 (1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/06.html" target="_blank">2010年6月 (6)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/05.html" target="_blank">2010年5月 (22)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/04.html" target="_blank">2010年4月 (18)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/03.html" target="_blank">2010年3月 (8)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/02.html" target="_blank">2010年2月 (39)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/01.html" target="_blank">2010年1月 (1)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2009/12.html" target="_blank">2009年12月 (6)</a></li>
</ul>
<h3 id="-">相册</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/gallery/247104.html" target="_blank">IT外企那点儿事</a></li>
</ul>
<h3 id="-">最新评论</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/11/26/2788610.html#2727561" target="_blank">1. Re:IT外企那点儿事(12)：也说跳槽</a></li>
<li>楼主怎么之后没有更新hadoop的相关信息了呢？是没有再研究了吗？</li>
<li>--lyeoswu</li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/06/13/1757479.html#2713121" target="_blank">2. Re:Lucene 原理与代码分析完整版</a></li>
<li>提个建议，你生成的pdf中没有目录，影响阅读，用office转制的过程中其实设置一下即可，方便大众嘛~，还望能发我一份，谢谢！
sendreams@hotmail.com</li>
<li>--sendreams</li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/11/26/2788610.html#2712415" target="_blank">3. Re:IT外企那点儿事(12)：也说跳槽</a></li>
<li><a href="&quot;查看所回复的评论&quot;">@</a>mojunbin
现在这公司，本来做的Siverlight，我进去后没多久就转JAVA了，最近在公司折腾JAVA的一些东西，业余时间玩玩游戏，看看CLR、并折腾linux。现在观点有所转变，觉得学技术更多的是为了扩宽思维、提高眼界</li>
<li>--峰顶飞龙</li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/11/26/2788610.html#2711923" target="_blank">4. Re:IT外企那点儿事(12)：也说跳槽</a></li>
<li><a href="&quot;查看所回复的评论&quot;">@</a>峰顶飞龙
您的经历和我差不多，呵呵。不晓得现在兄弟在搞C/C++呢？</li>
<li>--mojunbin</li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/11/23/1884967.html#2708814" target="_blank">5. Re:Hadoop学习总结之五：Hadoop的运行痕迹</a></li>
<li>楼主你好，在远程调试MapReduce时，本地代码进入不了自定义的job类，而是进入到Credentials class中，此类在hadoop-core-1.0.4.jar中，请问楼主在调试过程可否遇到此问题？</li>
<li>--彭莉珊</li>
</ul>
<h3 id="-">阅读排行榜</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/08/04/1791660.html" target="_blank">1. IT外企那点儿事(8)：又是一年加薪时(26798)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/06/13/1757479.html" target="_blank">2. Lucene 原理与代码分析完整版(25615)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/02/23/1671909.html" target="_blank">3. 从技术生命周期看IT历史(20877)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/21/1628546.html" target="_blank">4. 101个著名的管理学及心理学效应(20826)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/11/14/1877086.html" target="_blank">5. Hadoop学习总结之三：Map-Reduce入门(18674)</a></li>
</ul>
<h3 id="-">评论排行榜</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/06/13/1757479.html" target="_blank">1. Lucene 原理与代码分析完整版(68)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/05/05/1727644.html" target="_blank">2. IT外企那点儿事(4)：激动人心的入职演讲(39)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/05/13/1734162.html" target="_blank">3. IT外企那点儿事(6)：管理路线和技术路线(37)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/08/04/1791660.html" target="_blank">4. IT外企那点儿事(8)：又是一年加薪时(35)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/11/26/2788610.html" target="_blank">5. IT外企那点儿事(12)：也说跳槽(33)</a></li>
</ul>
<h3 id="-">推荐排行榜</h3>
<ul>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/06/13/1757479.html" target="_blank">1. Lucene 原理与代码分析完整版(55)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/05/03/1726200.html" target="_blank">2. IT外企那点儿事(3)：奇怪的面试(39)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/08/04/1791660.html" target="_blank">3. IT外企那点儿事(8)：又是一年加薪时(36)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2012/11/26/2788610.html" target="_blank">4. IT外企那点儿事(12)：也说跳槽(34)</a></li>
<li><a href="http://www.cnblogs.com/forfuture1978/archive/2010/05/13/1734162.html" target="_blank">5. IT外企那点儿事(6)：管理路线和技术路线(27)</a></li>
</ul>
<p><a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623596.html" target="_blank">Lucene学习总结之二：Lucene的总体架构</a></p>
<p>Lucene总的来说是：</p>
<ul>
<li>一个高效的，可扩展的，全文检索库。</li>
<li>全部用Java实现，无须配置。</li>
<li>仅支持纯文本文件的索引(Indexing)和搜索(Search)。</li>
<li>不负责由其他格式的文件抽取纯文本文件，或从网络中抓取文件的过程。</li>
</ul>
<p>在Lucene in action中，Lucene 的构架和过程如下图，</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/LuceneLucene_FCFA/image_2.png" target="_blank"><img src="&quot;image&quot;" alt="image"></a></p>
<p><strong>说明Lucene**</strong>是有索引和搜索的两个过程，包含索引创建，索引，搜索三个要点。**</p>
<p>让我们更细一些看Lucene的各组件：</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/LuceneLucene_FCFA/lucene  zong ti jia gou_2.jpg" target="_blank"><img src="&quot;lucene  zong ti jia gou&quot;" alt="lucene  zong ti jia gou"></a></p>
<ul>
<li><strong>被索引的文档用Document对象**</strong>表示。**</li>
<li><strong>IndexWriter**</strong>通过函数addDocument<strong>**将文档添加到索引中，实现创建索引的过程。</strong></li>
<li><strong>Lucene**</strong>的索引是应用反向索引。**</li>
<li><strong>当用户有请求时，Query**</strong>代表用户的查询语句。**</li>
<li><strong>IndexSearcher**</strong>通过函数search<strong><strong>搜索Lucene Index</strong></strong>。**</li>
<li><strong>IndexSearcher**</strong>计算term weight<strong><strong>和score</strong></strong>并且将结果返回给用户。**</li>
<li><strong>返回给用户的文档集合用TopDocsCollector**</strong>表示。**</li>
</ul>
<p>那么如何应用这些组件呢？</p>
<p>让我们再详细到对Lucene API 的调用实现索引和搜索过程。</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/LuceneLucene_FCFA/using lucene_2.jpg" target="_blank"><img src="&quot;using lucene&quot;" alt="using lucene"></a></p>
<ul>
<li><p><strong>索引过程如下：</strong></p>
</li>
<li><p><strong>创建一个IndexWriter**</strong>用来写索引文件，它有几个参数，INDEX_DIR<strong><strong>就是索引文件所存放的位置，Analyzer</strong></strong>便是用来对文档进行词法分析和语言处理的。**</p>
</li>
<li><strong>创建一个Document**</strong>代表我们要索引的文档。**</li>
<li><strong>将不同的Field**</strong>加入到文档中。我们知道，一篇文档有多种信息，如题目，作者，修改时间，内容等。不同类型的信息用不同的Field<strong><strong>来表示，在本例子中，一共有两类信息进行了索引，一个是文件路径，一个是文件内容。其中FileReader</strong></strong>的SRC_FILE<strong>**就表示要索引的源文件。</strong></li>
<li><strong>IndexWriter**</strong>调用函数addDocument<strong>**将索引写到索引文件夹中。</strong></li>
<li><p><strong>搜索过程如下：</strong></p>
</li>
<li><p><strong>IndexReader**</strong>将磁盘上的索引信息读入到内存，INDEX_DIR<strong>**就是索引文件存放的位置。</strong></p>
</li>
<li><strong>创建IndexSearcher**</strong>准备进行搜索。**</li>
<li><strong>创建Analyer**</strong>用来对查询语句进行词法分析和语言处理。**</li>
<li><strong>创建QueryParser**</strong>用来对查询语句进行语法分析。**</li>
<li><strong>QueryParser**</strong>调用parser<strong><strong>进行语法分析，形成查询语法树，放到Query</strong></strong>中。**</li>
<li><strong>IndexSearcher**</strong>调用search<strong><strong>对查询语法树Query</strong></strong>进行搜索，得到结果TopScoreDocCollector<strong>**。</strong></li>
</ul>
<p>以上便是Lucene API函数的简单调用。</p>
<p>然而当进入Lucene的源代码后，发现Lucene有很多包，关系错综复杂。</p>
<p>然而通过下图，我们不难发现，Lucene的各源码模块，都是对普通索引和搜索过程的一种实现。</p>
<p>此图是上一节介绍的全文检索的流程对应的Lucene实现的包结构。(参照<a href="http://www.lucene.com.cn/about.htm" target="_blank"><a href="http://www.lucene.com.cn/about.htm">http://www.lucene.com.cn/about.htm</a></a>中文章《开放源代码的全文检索引擎Lucene》)</p>
<p><a href="http://images.cnblogs.com/cnblogs_com/forfuture1978/WindowsLiveWriter/LuceneLucene_FCFA/clip_image008_2.jpg" target="_blank"><img src="&quot;clip_image008&quot;" alt="clip_image008"></a></p>
<ul>
<li><strong>Lucene**</strong>的analysis<strong><strong>模块主要负责词法分析及语言处理而形成Term</strong></strong>。**</li>
<li><strong>Lucene**</strong>的index<strong><strong>模块主要负责索引的创建，里面有IndexWriter</strong></strong>。**</li>
<li><strong>Lucene**</strong>的store<strong>**模块主要负责索引的读写。</strong></li>
<li><strong>Lucene**</strong>的QueryParser<strong>**主要负责语法分析。</strong></li>
<li><strong>Lucene**</strong>的search<strong>**模块主要负责对索引的搜索。</strong></li>
<li><strong>Lucene**</strong>的similarity<strong>**模块主要负责对相关性打分的实现。</strong></li>
</ul>
<p>了解了Lucene的整个结构，我们便可以开始Lucene的源码之旅了。</p>
<p>另：</p>
<p>CSDN此文章链接为：<a href="http://blog.csdn.net/forfuture1978/archive/2009/10/30/4745802.aspx" target="_blank"><a href="http://blog.csdn.net/forfuture1978/archive/2009/10/30/4745802.aspx">http://blog.csdn.net/forfuture1978/archive/2009/10/30/4745802.aspx</a></a></p>
<p>Javaeye此文章链接为：<a href="http://forfuture1978.javaeye.com/blog/546808" target="_blank"><a href="http://forfuture1978.javaeye.com/blog/546808">http://forfuture1978.javaeye.com/blog/546808</a></a> </p>
<p>分类: <a href="http://www.cnblogs.com/forfuture1978/category/300665.html" target="_blank">Lucene原理与代码分析</a></p>
<p>绿色通道： <a href="">好文要顶</a> <a href="">关注我</a> <a href="">收藏该文</a><a href="http://space.cnblogs.com/msg/send/%e8%a7%89%e5%85%88" target="_blank">与我联系</a> <a href="&quot;分享至新浪微博&quot;"><img src="" alt=""></a>
<a href="http://home.cnblogs.com/u/forfuture1978/" target="_blank"><img src="" alt=""></a></p>
<p><a href="http://home.cnblogs.com/u/forfuture1978/" target="_blank">觉先</a>
<a href="http://home.cnblogs.com/u/forfuture1978/followees" target="_blank">关注 - 3</a>
<a href="http://home.cnblogs.com/u/forfuture1978/followers" target="_blank">粉丝 - 560</a></p>
<p>荣誉：<a href="http://www.cnblogs.com/expert/" target="_blank">推荐博客</a>
<a href="">+加关注</a></p>
<p>3</p>
<p>0
(请您对文章做出评价)</p>
<p><a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html" target="_blank">«</a> 上一篇：<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623594.html" title="发布于2009-12-14 12:31" target="_blank">Lucene学习总结之一：全文检索的基本原理</a>
<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623597.html" target="_blank">»</a> 下一篇：<a href="http://www.cnblogs.com/forfuture1978/archive/2009/12/14/1623597.html" title="发布于2009-12-14 12:34" target="_blank">Lucene学习总结之三：Lucene的索引文件格式(1)</a>
posted on 2009-12-14 12:32 <a href="http://www.cnblogs.com/forfuture1978/" target="_blank">觉先</a> 阅读(7647) 评论(2) <a href="http://www.cnblogs.com/forfuture1978/admin/EditPosts.aspx?postid=1623596" target="_blank">编辑</a> <a href="">收藏</a></p>
<p><a href=""></a></p>
<h3 id="-">评论</h3>
<p><a href="">/#1楼</a><a href=""></a>  2010-02-23 10:33  <a href="http://www.cnblogs.com/xuanfeng/">xuanfeng</a> <a href="http://space.cnblogs.com/msg/send/xuanfeng" title="发送站内短消息" target="_blank"> </a></p>
<p>朋友,可不可以了解一下你是用什么工具画的图啊?</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a></p>
<p><a href="">/#2楼</a><a href=""></a>[楼主]17671232010/2/23 10:57:04  2010-02-23 10:57  <a href="http://www.cnblogs.com/forfuture1978/">觉先</a> <a href="http://space.cnblogs.com/msg/send/%e8%a7%89%e5%85%88" title="发送站内短消息" target="_blank"> </a></p>
<p><a href="&quot;查看所回复的评论&quot;">@</a>xuanfeng
比较复杂的图用visio，
简单的图可以用ppt，然后另存为jpg</p>
<p><a href="">支持(0)</a><a href="">反对(0)</a>
<a href="http://pic.cnitblog.com/face/u103165.jpg" target="_blank">http://pic.cnitblog.com/face/u103165.jpg</a></p>
<p><a href="">刷新评论</a><a href="">刷新页面</a><a href="">返回顶部</a></p>
<p>注册用户登录后才能发表评论，请 <a href="">登录</a> 或 <a href="">注册</a>，<a href="http://www.cnblogs.com/" target="_blank">访问</a>网站首页。
<a href="http://www.cnblogs.com/" title="程序员的网上家园" target="_blank">博客园首页</a><a href="http://q.cnblogs.com/" title="程序员问答社区" target="_blank">博问</a><a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">新闻</a><a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a><a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a><a href="http://kb.cnblogs.com/" target="_blank">知识库</a></p>
<p><strong>最新IT新闻</strong>:
· <a href="http://news.cnblogs.com/n/182453/" target="_blank">这四年 Google中国落寂了 刘允尽力了</a>
· <a href="http://news.cnblogs.com/n/182452/" target="_blank">在线课程“慕课”来袭 专家称大学应主动参与</a>
· <a href="http://news.cnblogs.com/n/182446/" target="_blank">告别编程课，MIT 展示自然语言编程</a>
· <a href="http://news.cnblogs.com/n/182445/" target="_blank">什么样的工程师才可能真正推动创新？</a>
· <a href="http://news.cnblogs.com/n/182444/" target="_blank">在线教育“钱途”光明？</a>
» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></p>
<p><strong>最新知识库文章</strong>:
· <a href="http://kb.cnblogs.com/page/141892/" target="_blank">阿里巴巴集团去IOE运动的思考与总结</a>
· <a href="http://kb.cnblogs.com/page/182265/" target="_blank">硅谷归来7点分享：创业者，做你自己</a>
· <a href="http://kb.cnblogs.com/page/182200/" target="_blank">我为什么不能坚持？</a>
· <a href="http://kb.cnblogs.com/page/168725/" target="_blank">成为高效程序员的7个重要习惯</a>
· <a href="http://kb.cnblogs.com/page/182047/" target="_blank">谈谈对BPM的理解</a>
» <a href="http://kb.cnblogs.com/" target="_blank">更多知识库文章...</a>
Powered by:
<a href="http://www.cnblogs.com/" target="_blank">博客园</a>
Copyright © 觉先</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/lucene/">lucene</a></li></span></span> | <span class="tags">Tagged <a href="/tags/lucene/" class="label label-primary">lucene</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:28"datetime="2014-03-07 09:54:28"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-lucene--Lucene学习总结之二：Lucene的总体架构/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-lucene--Lucene学习总结之二：Lucene的总体架构" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-JS用法-Jquery--JQuery学习总结及实例/">JQuery 学习总结及实例</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:28.000Z"> <a href="/2014/02/02/2014-02-02-JS用法-Jquery--JQuery学习总结及实例/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="jquery-">JQuery 学习总结及实例</h1>
<h1 id="-jquery-http-www-cnblogs-com-daomul-archive-2013-04-26-3037737-html-"><a href="http://www.cnblogs.com/daomul/archive/2013/04/26/3037737.html" target="_blank">JQuery 学习总结及实例</a></h1>
<p>1、JQuery简介
      普通JavaScript的缺点：每种控件的操作方式不统一，不同浏览器下有区别，要编写跨浏览器的程序非常麻烦。因此出现了很多对JavaScript的封装库，比如Prototype、Dojo、ExtJS、JQuery等，这些库对JavaScript进行了封装，简化了开发。这些库是对JavaScript的封装，也就是咱们调用JQuery的一句函数，JQuery内部这句函数帮我们调用JavaScript中的代码几十句，因为JQuery就是JavaScript语法写的一些函数类，内部仍然是调用JavaScript实现的，所以并不是代替JavaScript的。使用JQuery的代码、编写JQuery的扩展插件等仍然需要JavaScript的技术，Jquery本身就是一堆JavaScript函数。</p>
<pre><code>       （1、Jquery是最火的JavaScript库，已集成到VS2010，MS的Ajax toolkit和JQuery结合也是最方便，JQuery的扩展插件也是非常多。

       （2、JQuery的优点：尺寸小、使用简单方便（Write Less, Do More，吃得少干得多。

                 链式编程（$(&quot;/#div1&quot;).draggble().show().hide().fly()）、
                 隐式迭代  （自动对于多个元素进行迭代方法调用））、

                屏蔽浏览器差异跨浏览器兼容性好（IE 6.0+, FF 2+, Safari 3.0+, Opera 9.0+, Chrome）、插件丰富、 开源、免费。
       （3、VS中JavaScript、JQuery的自动完成功能：在VS2010中直接有，VS008需要安装VisualStudio 和VS90SP1-KB958502-x86补丁会更强更好用, 下

               载地址见备注。然后引用jquery-1.4.1.js，jquery-1.4.1-vsdoc.js放到同目录下，不需要在页面引用。
       （4、vsdoc是vs2008sp1以后增加的一个技术，将js文件对应的vsdoc（相当于js库提供的方法的说明库）放到和js一起，就有会第三方js的自动提示的功能
</code></pre><p>2、简单的JQuery之Ready</p>
<pre><code> （1、注册事件的函数，和普通的dom不一样，不需要在元素上标记on/*/*这样的事件。
</code></pre><p>$(document).ready(function(){</p>
<pre><code>       alert(&quot;加载完毕！&quot;);
   });
</code></pre><p>（2、当页面Dom元素加载完毕时执行代码，可以简写为：
        $(function(){</p>
<pre><code>       alert(&quot;加载完毕！&quot;);
  });

  （3、和onload类似，但是onload只能注册一次（没有C/#中的+=机制），后注册的取代先注册的，而ready则可以多次注册都会被执行。
                window.onload=function(){alert(&quot;1&quot;)};window.onload=function(){alert(&quot;2&quot;)};//结果只弹出2

  （4、JQuery的ready和Dom的onload的区别(/*)：onload是所有Dom元素创建完毕、图片、Css等都加载完毕后才被触发，而ready则是Dom元素创建完毕后就被触发，这样可以提高网页的响应速度。在jQuery中也可以用$(window).load()来实现onload那种事件调用的时机。
       $(function(){alert(&quot;1111&quot;);});//简写方式
</code></pre><p>3、JQuery的函数</p>
<pre><code>$.map(array,fu) 得到函数的返回值和$.each(array,fn)调用函数处理没有返回值
</code></pre><p><img src="" alt=""><img src="" alt="">map函数和each函数</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 6 <script type="text/javascript"> 7 //<em>$.map(array,fu) 8         var arr1 = [1, 2, 3]; 9         var arrOne = $.map(arr1, function (item) { return item /</em> 2; });10         alert(arrOne);/<em>/11 12 //</em>$.each(array,fn)/*/13 var arr2 = [1, 2, 3];14 //$.each(arr2, function (key, item) { alert(key+&quot; and &quot;+item); });//两个参数返回的是key+值15 //$.each(arr2, function (item) { alert(item); });//一个参数返回的是key16         $.each(arr2, function () { alert(this); });//没有参数自觉返回值17 </script>18 </head>19 <body>20 21 </body>22 </html></p>
<p>4、JQuery对象和Dom对象
         （1、$(&#39;/#div1&#39;)得到的就是jQuery对象，jQuery对象只能调用jQuery对象封装的方法，不能调用Dom对象的方法，Dom对象也不能调用jQuery对象的方法，所</p>
<pre><code>             以 alert($(&#39;/#div1&#39;).innerHTML是错的，因为innerHTML是DOM对象的属性。
     （2、Array是JS语言本身的对象，不是Dom对象，因此不需要转换为Jquery对象才能用

     （3、将Dom对象转换为JQuery对象的方法，$(dom对象)；当调用jQuery没有封装的方法的时候必须用Dom对象，转换方法：vardomobj = jqobj[0]或者
              vardomobj=jqobj.get(0)

     （4、在引用外部js的Script标签内不能再写js代码，引用外部js的Script标签也不能用简写方法闭合。
</code></pre><p><img src="" alt=""><img src="" alt="">JQuery对象和Dom对象</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 6 <script type="text/javascript"> 7 //<em>JQuery 对象/</em>/ 8 //$(function () { alert($(&#39;/#div1&#39;).html()); }); 9 10 //<em>Dom对象转化为JQuery对象/</em>/11 //$(function () { var dom1 = document.getElementById(&quot;div1&quot;); $(dom1).html(&quot;<font color='black'>测试black</font>&quot;); });12 13 //<em>JQuery对象转化为Dom对象 +一个[0]/</em>/14 //$(function () { var jquery1 = $(div1)[0]; alert(jquery1.innerHTML); });15 16 //<em>JQuery 修改样式css 还有val/</em>/17 //$(function () { $(&#39;/#div1&#39;).css(&quot;background&quot;, &quot;gray&quot;); });//css两个参数是设置值18 //$(function () { alert($(&#39;/#div1&#39;).css(&quot;background&quot;)); }); //css一个参数是取值19 //$(function () { $(&#39;/#myInput&#39;).val(new Date()); }); //val一个参数是设置值20 //$(function () { alert($(&#39;/#myInput&#39;).val()); }); //val没有参数是取值21 22 </script>23 </head>24 <body>25 <div id="div1">26 <font color="red">测试red</font>27 <input type="text" name="name" value="kong" id="myInput" />28 </div>29 </body>30 </html></p>
<p>5、JQuery 选择器</p>
<pre><code>（1、$(“/#div1”).html();

（2、$(&quot;TagName&quot;)来获取所有指定标签名的jQuery对象，相当于getElementsByTagName：

           例如获得所有的P：$(&quot;p&quot;).html(&quot;我们都是P&quot;);

 （3、标签选择器，拥有样式的标签选择器
         ☆ 多条件选择器：$(&quot;p,div,span.menuitem&quot;)，同时选择p标签、div标签和拥有menuitem样式的span标签元素（类似于CSS选择器）

         ☆ 注意选择器表达式中的空格不能多不能少。易错！
         ☆ 层次选择器：
</code></pre><p>☆☆$(&quot;div li&quot;)获取div下的所有li元素（后代，子、子的子……）
☆☆$(&quot;div &gt; li&quot;)获取div下的直接li子元素</p>
<p>☆☆$(&quot;.menuitem +div&quot;)获取样式名为menuitem之后的第一个div元素（不常用）
☆☆$(&quot;.menuitem ~div&quot;)获取样式名为menuitem之后所有的div元素（不常用）</p>
<p> 案例1：</p>
<p><img src="" alt=""><img src="" alt="">JQuery选择器1</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 6 7 <script type="text/javascript"> 8         $(function () { 9             $(&#39;.test&#39;).click(10 function () {11                     alert($(this).text());12                 }13              ); 14         });15 </script>16 <style type="text/css"> 17          .test{ background-color:Red} 18 </style>19 </head>20 <body>21 <div id="div1">22 <p class="test">23             test1</p>24 <p class="test">25             test2</p>26 <p class="test">27             test3</p>28 </div>29 </body>30 </html></p>
<p>6、JQuery的迭代
      如何判断对象是否存在，jQuery选择器返回的是一个对象数组(数组中的每个对象还是Dom对象)，调用text()、html()、click()之类方法的时候其实是对数组中每个元素迭代调用每个方法，因此即使通过id选择的元素不存在也不会报错，如果需要判断指定的id是否存在，应该写：</p>
<p>if($(&quot;/#btn1&quot;).length &lt;= 0) {</p>
<pre><code>            alert(&quot;id为btn1的元素不存在！&quot;);
</code></pre><p>}
 7、节点遍历</p>
<pre><code>    （1、  next() 方法用于获取节点之后的挨着的第一个同辈元素， 
    （2、$(&quot;.menuitem&quot;).next(&quot;div&quot;) 、 nextAll() 方法用于获取节点之后的所  有同辈元素， $(&quot;.menuitem&quot;).nextAll(&quot;div&quot;)  prev 、 prevAll 之前的元素   
    （3、siblings() 方法用于获取所有同辈元素，$(&quot;.menuitem&quot;).siblings(&quot;li&quot;)   siblings 、next 等所有能传递选择器的地方能够使用的语法都和 $() 语法一样。
</code></pre><p><img src="" alt=""><img src="" alt="">节点遍历</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 6 <script type="text/javascript"> 7 //<em>next() 和nextAll()的用法 8         $(function () { 9             $(&quot;div&quot;).click(function () {10             //alert($(this).next().text());11             //alert($(this).next(&quot;p&quot;).text());12             //alert($(this).nextAll().text());13             //alert($(this).nextAll(&quot;div&quot;).text());14         });15         });/</em>/16 //<em>高亮显示所以next/</em>/17 //$(function () { $(&quot;div&quot;).click(function () { $(this).nextAll(&quot;div&quot;).css(&quot;background&quot;,&quot;red&quot;); }); });18 //<em>高亮显示自己而已/</em>/19 //$(function () { $(&quot;div&quot;).click(function () { $(this).css(&quot;background&quot;, &quot;red&quot;); $(this).siblings().css(&quot;background&quot;,&quot;white&quot;); }); });20         $(function () { $(&quot;div&quot;).click(function () { $(this).css(&quot;background&quot;, &quot;red&quot;).siblings().css(&quot;background&quot;, &quot;white&quot;); }); });21 22 23 </script>24 </head>25 <body>26 <div>27         aa</div>28 <div>29         bb</div>30 <div>31         cc</div>32 <p>33         p1</p>34 <p>35         p2</p>36 <div>37         dd</div>38 <div>39         ee</div>40 </body>41 </html></p>
<p>8、链式编程</p>
<pre><code>  链式编程就是对象一棒棒向下传，能不能正确传下来要看返回值，html()不能传，prevAll().nextAll()也传错。

           $(&quot;/#tableRating td&quot;).click(function() {$(this).prevAll().next().html(&quot;a&quot;); });//经典！
</code></pre><p>案例1：样式的增删：addClass和removeClass
<img src="" alt=""><img src="" alt="">添加样式和移除样式</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <style type="text/css"> 6          .menuitem{background-color:Yellow; } 7          .highlight { background-color: Red;} 8 </style> 9 <script src="js/jquery-1.4.2.js" type="text/javascript"></script>10 <script type="text/javascript">11         $(function () { $(&quot;.menuitem&quot;).click(function () { $(this).addClass(&quot;highlight&quot;).siblings().removeClass(&quot;highlight&quot;); }); });12 13 </script>14 </head>15 <body>16 <p class="menuitem">111111</p><br /> 17 <p class="menuitem">111111</p><br /> 18 <p class="menuitem">111111</p><br />19 </body>20 </html></p>
<p>案例2：五角星评分</p>
<p><img src="" alt=""><img src="" alt="">五角星评分</p>
<p>1 //<em> 2             $(function() { 3             $(&quot;/#ratings td&quot;).html(&quot;<img src='images/star_off.gif' />&quot;) 4             .mouseover(function() { $(&quot;/#ratings td&quot;).html(&quot;<img src='images/star_on.gif' />&quot;); $(this).nextAll().html(&quot;<img src='images/star_off.gif' />&quot;); }); 5 6             }); 7             /</em>/ 8 9             $(function() { 10             $(&quot;/#ratings td&quot;).html(&quot;<img src='images/star_off.gif' />&quot;) 11                 .mouseover(function() { $(&quot;/#ratings td&quot;).html(&quot;<img src='images/star_on.gif' />&quot;) 12                 .siblings().html(&quot;<img src='images/star_on.gif' />&quot;); 13                 $(this).nextAll().html(&quot;<img src='images/star_off.gif' />&quot;); 14             }); 15 16             }); 17 18 19 <table id=ratings> 20 <tr><td></td><td></td><td></td><td></td><td></td></tr> 21 </table></p>
<p> 9、基本过滤选择器 
           （1、:first  选取第一个元素。 $(&quot;div:first&quot;) 选取第一个 <div> 
           （2、:last  选取最后一个元素。 $(&quot;div:last&quot;) 选取最后一个 <div> 
           （3、:not( 选择器 )  选取不满足 &quot; 选择器 &quot; 条件的元素， 
                      $(&quot;input:not(.myClass)&quot;) 选取样式名不是 myClass 的 <input> 
           （4、:even 、 :odd ，选取索引是奇数、偶数的元素： $(&quot;input:even&quot;) 选 
                      取索引是奇数的 <input> 
           （5、:eq( 索引序号 ) 、 :gt( 索引序号 ) 、 :lt( 索引序号 )  选取索引等于、大于、小于索引序号的元素，比如 $(&quot;input:lt(5)&quot;) 选取索引小于 5 的 <input>         </p>
<pre><code>       （6、$(&quot;:header&quot;) 选取所有的 h1 …… h6 元素（ /* ） 
              $(&quot;div:animated&quot;) 选取正在执行动画的 &lt;div&gt; 元素。   （ /* ）
</code></pre><p>案例1：</p>
<pre><code>    $(&quot;/#table1 tr:last&quot;).css(&quot;color&quot;, &quot;red&quot;);
    $(&quot;/#table1 tr:gt(0):lt(3)&quot;).css(&quot;color&quot;, &quot;red&quot;);//lt(3)是从gt(0)后得到的新序列中的序号，不要写成lt(4);
    $(&quot;/#table1 tr:gt(0):even&quot;).css(&quot;background&quot;, &quot;red&quot;); //表头不参与&quot;正文表格的奇数行是红色背景&quot;,所以gt(0)去掉表头
</code></pre><p>10、相对选择器</p>
<pre><code>   不仅可以使用选择器进行进行绝对定位，还可以进行相对定位， （双重选择）

   只要在 $() 指定第二个参数，第二个参数为相对的元素 .  $(&quot;ul&quot;, $(this)).css(&quot;background&quot;, &quot;red&quot;);  //ul下面的+包含本身=ul下面的本身
</code></pre><p><img src="" alt=""><img src="" alt="">View Code</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 6 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 7 <script type="text/javascript"> 8         $(function () { 9             $(&quot;/#t1 tr&quot;).click(function () {10                 $(&quot;td&quot;, $(this)).css(&quot;background&quot;, &quot;Yellow&quot;);11             });12         });13 </script>14 </head>15 <body>16 <table id="t1"> 17 <tr><td>姓名</td><td>成绩</td></tr> 18 <tr><td>tom</td><td>100</td></tr> 19 <tr><td>lucy</td><td>99</td></tr> 20 <tr><td>jim</td><td>95</td></tr> 21 <tr><td>david</td><td>85</td></tr> 22 <tr><td>candy</td><td>84</td></tr> 23 <tr><td>平均分</td><td>90</td></tr> 24 </table> 25 </body>26 </html></p>
<p>11、属性过滤选择器： 
        （1、$(&quot;div[id]&quot;) 选取有 id 属性的 <div> 
        （2、 $(&quot;div[title=test]&quot;) 选取 title 属性为 &quot; test &quot; 的 <div> ， JQuery 中没有对getElementsByName 进行封装，用 $(&quot;input[name=abc]&quot;)<br>        （3、$(&quot;div[title!=test]&quot;) 选取 title 属性不为 &quot; test &quot; 的 <div> 
               还可以选择开头、结束、包含等，条件还可以复合。（ /* ）</p>
<p><img src="" alt=""><img src="" alt="">属性过滤</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 6 <script type="text/javascript"> 7         $(function () { 8             $(&quot;input[value=显示选中项]&quot;).click(function () { 9                 alert($(&quot;input:checked&quot;).val());10             });11             $(&quot;input[type=checkbox]&quot;).click(function () {12                 $(&quot;input:checked&quot;).css(&quot;background-color&quot;, &quot;Red&quot;); 13                 alert($(&quot;input:checked&quot;).css(&quot;background-color&quot;));14             });15 16         });17 18 </script>19 </head>20 <body>21 <input type="checkbox" value="北京" />北京<br />22 <input type="checkbox" value="南京" />南京<br />23 <input type="checkbox" value="东京" />东京<br />24 <input type="checkbox" value="西安" />西安<br />25 <input type="checkbox" value="开封" />开封<br />26 <input type="button" value="显示选中项" /><br />27 </body>28 </html></p>
<p> 12、表单对象选择器</p>
<pre><code>    $(&quot;/#form1:enabled&quot;) 选取 id 为 form1 的表单内所有启用的元素 
 $(&quot;/#form1:disabled&quot;) 选取 id 为 form1 的表单内所有禁用的元素 
 $(&quot;input:checked&quot;) 选取所有选中的元素（ Radio 、 CheckBox ） 
 $(&quot;select:selected&quot;) 选取所有选中的选项元素（下拉列表）
</code></pre><p><img src="" alt=""><img src="" alt="">表单对象</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 6 <script type="text/javascript"> 7         $(function () { 8             $(&quot;input[name=names]&quot;).click(function () { 9 var names = $(&quot;input[name=names]:checked&quot;);10 var msg = $(&quot;/#msgNames&quot;);//ID记得加/#11 var array = new Array();12 13 //$(value)是将Dom对象转化为JQuery对象,即将元素的value值更新到key上 14                 names.each(function (key, values) {15                     array[key] = $(values).val();16                 });17 18                 msg.text(&quot;共选中&quot; + names.length + &quot;个,他们是：&quot; + array.join(&quot;,&quot;));19             });20         });21 </script>22 </head>23 <body>24 <input type="checkbox" name="names" value="tom" />tom25 <input type="checkbox" name="names" value="jim" />jim26 <input type="checkbox" name="names" value="lily" />lily27 <p id="msgNames">28 </p>29 </body>30 </html></p>
<p> 13、JQuery的Dom操作</p>
<p>   （1 、使用 html() 方法读取或者设置元素的 innerHTML ：
                  alert($(&quot;a:first&quot;).html());
                  $(&quot;a:first&quot;).html(&quot;hello&quot;); 
      （2 、使用 text() 方法读取或者设置元素的 innerText ：
                  alert($(&quot;a:first&quot;).text());
                  $(&quot;a:first&quot;).text(&quot;hello&quot;);
      （3 、 使用 attr() 方法读取或者设置元素的属性，对于JQuery没有封装的属性（所有浏览器没有差异的属性）用 attr 进行操作。
                  alert($(&quot;a:first&quot;).attr(&quot;href&quot;));
                  $(&quot;a:first&quot;).attr(&quot;href&quot;, &quot;<a href="http://www.rupeng.com/" target="_blank"><a href="http://www.rupeng.com">http://www.rupeng.com</a></a>&quot;);<br>      （4 、使用 removeAttr 删除属性。删除的属性在源代码中看不到，这是和清空属性的区别 </p>
<p> 14、动态创建Dom节点</p>
<pre><code>   （1、使用 $(html 字符串) 来创建 Dom 节点，并且返回一个 jQuery 对象，然后调用 append 等方法将新创建的节点添加到 Dom 中：
      例子：var link = $(&quot;&lt;a href=&#39;http://www.baidu.com&#39;&gt; 百度 &lt;/a&gt;&quot;);
           $(&quot;div:first&quot;).append(link);
（2、$() 创建的就是一个 jQuery 对象，可以完全进行操作
         var link = $(&quot;&lt;a href=&#39;http://www.baidu.com&#39;&gt; 百度 &lt;/a&gt;&quot;);
          link.text(&quot;百度&quot;);
          $(&quot;div:first&quot;).append(link); 
</code></pre><p><img src="" alt=""><img src="" alt="">动态添加Dom对象</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 6 <script type="text/javascript"> 7 //<em>$(function () { 8             var link = &quot;<a href='http://www.cnblogs.com/daomul' >myBlog</a>&quot;; 9             $(&quot;/#myTable&quot;).append(link);10         });/</em>/11 12         $(function () {13 var data = { &quot;daomul&quot;: &quot;<a href="http://www.cnblogs.com/daomul" target="_blank">http://www.cnblogs.com/daomul</a>&quot;, &quot;bokeyuan&quot;: &quot;<a href="http://www.cnblogs.com" target="_blank">http://www.cnblogs.com</a>&quot; };14             $.each(data, function (key, value) {15 var tr = &quot;<tr><td>&quot; + key + &quot;</td><td><a href=" + value + ">&quot;+key+&quot;</a></td></tr>&quot;;16                 $(&quot;/#myTable&quot;).append(tr);17             });18         });19 </script>20 </head>21 <body>22 <table border="0" cellpadding="0" cellspacing="0" id="myTable">23 <tr>24 <td>25 </td>26 </tr>27 </table>28 </body>29 </html></p>
<pre><code>（3、append 方法用来在元素的末尾追加元素。

     //$(&quot;/#select1 option:selected&quot;).remove().appendTo($(&quot;/#select2&quot;)) ;
        $(&quot;/#select1 option:selected&quot;).appendTo($(&quot;/#select2&quot;)) ;
     prepend ，在元素的开始添加元素。
     after ，在元素之后添加元素（添加兄弟）
     before ：在元素之前添加元素（添加兄弟）
</code></pre><p>15、删除节点
     （1、remove() 删除选择的节点
               案例：清空 ul 中的项， $(&quot;ul li.testitem&quot;).remove();  删除 ul 下 li 中有 testitem 样式的元素。<br>           remove 方法的返回值是被删除的节点对象，还可以继续使用被删除的节点。比如重新添加到其他节点下 
                  var lis = $(&quot;/#ulSite li&quot;).remove(); 
                  $(&quot;/#ulSite2&quot;).append(lis);<br>     （2、remove掉后再重新移动： var items = $(&quot;/#select1 option:selected&quot;).remove();  $(&quot;/#select2&quot;).append(items); 
                           更狠的： $(&quot;/#select1 option:selected&quot;).appendTo($(&quot;/#select2&quot;)) 
<img src="" alt=""><img src="" alt="">权限管理</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 6 <script type="text/javascript"> 7         $(function () { 8             $(&quot;/#moveToRight&quot;).click(function () { 9 var item = $(&quot;/#select1 option:selected&quot;).remove();10                 item.attr(&quot;selected&quot;, false);11                 $(&quot;/#select2&quot;).append(item);12             });13             $(&quot;/#moveToLeft&quot;).click(function () {14 var item = $(&quot;/#select2 option:selected&quot;).remove();15                 item.attr(&quot;selected&quot;, false);16                 $(&quot;/#select1&quot;).append(item);17             });18             $(&quot;/#AllToRight&quot;).click(function () {19 var item = $(&quot;/#select1 option&quot;).remove();20                 $(&quot;/#select2&quot;).append(item);21             });22             $(&quot;/#AllToLeft&quot;).click(function () {23 var item = $(&quot;/#select2 option&quot;).remove();24                 $(&quot;/#select1&quot;).append(item);25             });26 27         });28 </script>29 </head>30 <body>31 <select style="float: left; width: 15%; height: 100px" id="select1" multiple="multiple">32 <option>添加</option>33 <option>删除</option>34 <option>修改</option>35 <option>查询</option>36 <option>打印</option>37 </select>38 <div style="float: left; width: 15%">39 <input style="float: left; width: 100%;" type="button" id="moveToRight" value=">" />40 <input style="float: left; width: 100%;" type="button" id="moveToLeft" value="<" />41 <input style="float: left; width: 100%;" type="button" id="AllToRight" value=">>" />42 <input style="float: left; width: 100%;" type="button" id="AllToLeft" value="<<" />43 </div>44 <select style="float: left; width: 15%; height: 100px" id="select2" multiple="multiple">45 </select>46 </body>47 </html></p>
<pre><code> （3、empty() 是将节点清空，不像 remove 那样还可以添加到其他元素中。 
</code></pre><p> 16、Dom实例改编</p>
<p>案例1：加法计算器
<img src="" alt=""><img src="" alt="">加法计算器</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 6 <script type="text/javascript"> 7         $(function () { 8             $(&quot;/#eq&quot;).click(function () { 9 var text1 = $(&quot;/#txt1&quot;).val();//有参数则说明是设置值10 var text2 = $(&quot;/#txt2&quot;).val();11 var txt3 = parseInt(text1, 10) + parseInt(text2, 10);12                 $(&quot;/#txt3&quot;).val(txt3);13             });14         });15 </script>16 </head>17 <body>18 <input type="text" id="txt1" />+ 19 <input type="text" id="txt2" /> 20 <input type="button" id="eq" value="=" /> 21 <input type="text" id="txt3" />22 </body>23 </html></p>
<p>案例2：全选全部选按钮</p>
<p><img src="" alt=""><img src="" alt="">全选全不选按钮</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 6 <script type="text/javascript"> 7         $(function () { 8             $(&quot;/#selAll&quot;).click(function () { 9                 $(&quot;/#playlist input&quot;).attr(&quot;checked&quot;, true);10             });11             $(&quot;/#unselAll&quot;).click(function () {12                 $(&quot;/#playlist input&quot;).attr(&quot;checked&quot;, false);13             });14             $(&quot;/#reverse&quot;).click(function () {15                 $(&quot;/#playlist input&quot;).each(function () {16 //关键语句！！！17                     $(this).attr(&quot;checked&quot;, !$(this).attr(&quot;checked&quot;));18                 });19             });20         });21 </script>22 </head>23 <body>24 <div id="playlist"> 25 <input type="checkbox" />1111111111<br /> 26 <input type="checkbox" />22222222222<br /> 27 <input type="checkbox" />33333333333<br /> 28 <input type="checkbox" />4444444444<br /> 29 <input type="checkbox" />444<br /> 30 </div> 31 <input type="button" value="全选" id="selAll" /> 32 <input type="button" value="全不选" id="unselAll" /> 33 <input type="button" value="反选" id="reverse" /> 34 35 </body>36 </html></p>
<p>案例3：倒计时注册页面</p>
<p><img src="" alt=""><img src="" alt="">倒计时注册页面</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 6 <script type="text/javascript"> 7 var InteruptID; 8 var stopSecond=10; 9         $(function () {10             $(&quot;/#btnReg&quot;).attr(&quot;disabled&quot;, true);11             InteruptID = setInterval(&quot;stopTimeRole()&quot;,1000);12         });13 14 function stopTimeRole() {15 if (stopSecond &lt;= 0) {16                 $(&quot;/#btnReg&quot;).attr(&quot;disabled&quot;, false);17                 $(&quot;/#btnReg&quot;).val(&quot;同意&quot;);18                 clearInterval(InteruptID);19 return;20             }21             stopSecond--;22             $(&quot;/#btnReg&quot;).val(&quot;同意，还剩下&quot;+stopSecond+&quot;秒，请阅读注册事项&quot;);23         }24 </script>25 </head>26 <body>27 <input type="button" id="btnReg" value="同意" />28 </body>29 </html></p>
<p>案例4：球队选择</p>
<p><img src="" alt=""><img src="" alt="">球队选择</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 6 <script type="text/javascript"> 7         $(function () { 8             $(&quot;/#myUL li&quot;).css(&quot;cursor&quot;, &quot;pointer&quot;).mousemove(function () { 9                 $(this).css(&quot;background&quot;, &quot;red&quot;).siblings().css(&quot;background&quot;, &quot;white&quot;);10             }).click(function () {11                 $(this).css(&quot;background&quot;,&quot;white&quot;).appendTo(&quot;/#newUL&quot;);12             });13         });14 </script>15 </head>16 <body>17 <ul id="myUL">18 <li>中国</li>19 <li>美国</li>20 <li>日本</li>21 <li>新加坡</li>22 <li>意大利</li>23 <li>法国</li>24 <li>德国</li>25 </ul>26 <ul id="newUL">27 </ul>28 </body>29 </html></p>
<p>17、节点操作</p>
<pre><code>    （1、替换节点： $(&quot;br&quot;).replaceWith(&quot;&lt;hr/&gt;&quot;);
         例子：将 &lt;br/&gt; 替换为 &lt;hr/&gt; ：$(&quot;br&quot;).replaceWith(&quot;&lt;hr/&gt;&quot;);
    （2、包裹节点 ：wrap() 方法用来将所有元素逐个用指定标签包裹：
            $(&quot;b&quot;).wrap(&quot;&lt;font color=&#39;red&#39;&gt;&lt;/font&gt;&quot;)  将所有粗体字红色显示  
</code></pre><p>18、样式操作</p>
<pre><code>（1、获取样式   attr(&quot;class&quot;) ，设置样式 attr(&quot;class&quot;,&quot;myclass myclass2 myclass3&quot;) ，追加样式 addClass(&quot;myclass&quot;)( 不影响其他样式 ) ，
       移除样式 removeClass(&quot;myclass&quot;) ，切换样式（如果存在样式则去掉样式，如果没有样式则添加样式） toggleClass(&quot;myclass&quot;) ，
       判断是否存在样式： hasClass(&quot;myclass&quot;)

  例子：开关灯：$(document.body).toggleClass(”night“); 
</code></pre><p>19、练习</p>
<p>练习1：黑白切换，设置body中的颜色切换Filter</p>
<p><img src="" alt=""><img src="" alt="">黑白切换</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title>黑白切换</title> 5 <style type="text/css"> 6         .blackwhite{filter:Gray;} 7 </style> 8 9 <script src="js/jquery-1.4.2.js" type="text/javascript"></script>10 <script type="text/javascript">11         $(function () {12             $(&quot;/#btn&quot;).click(function () {13                 $(document.body).toggleClass(&quot;blackwhite&quot;);14             });15         });16 </script>17 </head>18 <body>19 <input type="button" value="切换" id="btn" /><br />20 <img src="images/DSCF3362.JPG" alt=""/>21 </body>22 </html></p>
<p>练习2：聚集控件高亮：$(&quot;body  /<em>&quot;) ，选择器 /</em> 表示所有类型的控件
<img src="" alt=""><img src="" alt="">聚集控件高亮</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <!-- 5    练习：聚焦控件的高亮显示。 颜色定义为 class 样式。  $("body  /* ") ，选择器 /* 表示 所有类型的控件。 6 --> 7 8 <title>聚集控件高亮</title> 9 <style type="text/css"> 10         .highlight{background-color:Gray;} 11 </style> 12 13 <script src="js/jquery-1.4.2.js" type="text/javascript"></script>14 <script type="text/javascript">15         $(function () {16             $(&quot;body /* &quot;).click(function () {17                 $(this).addClass(&quot;highlight&quot;).siblings().removeClass(&quot;highlight&quot;);18             });19         });20 </script>21 </head>22 <body>23 <input type="text" /> 24 <div> 25         daomul 26 </div> 27 <p> 28         <a href="http://www.cnblogs.com/daomul/29" target="_blank">http://www.cnblogs.com/daomul/29</a> </p> 30 31 </body>32 </html></p>
<p>练习3：搜索框</p>
<p><img src="" alt=""><img src="" alt="">搜索框效果</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <!-- 5    练习：聚焦控件的高亮显示。 颜色定义为 class 样式。  $("body  /* ") ，选择器 /* 表示 所有类型的控件。 6 --> 7 8 <title>搜索框效果</title> 9 10 <!--练习：搜索框效果。焦点放入控件，如果文本框中的值是 " 请输入关键词 " ，那么 11         将文本清空，并且颜色设置为黑色。如果焦点离开控件，如果文本框中是空值， 12         那么将文本框填充为 " 请输入关键词 " ，颜色设置为灰色（ Gray ）。 颜色定义为 13         class 样式。-->14 15 <style type="text/css"> 16         .Graycolor{background-color:Gray;} 17 </style> 18 19 <script src="js/jquery-1.4.2.js" type="text/javascript"></script>20 <script type="text/javascript">21         $(function () {22             $(&quot;/#myInput&quot;).addClass(&quot;Graycolor&quot;)23             .focus(function () {24 if ($(this).val() == &quot;请输入关键词&quot;) {25                     $(this).val(&quot;&quot;).removeClass(&quot;Graycolor&quot;);26                 }27             })28             .blur(function () {29 if ($(this).val() == &quot;&quot;) {30                     $(this).val(&quot;请输入关键词&quot;).addClass(&quot;Graycolor&quot;);31                 }32             });33         });34 </script>35 </head>36 <body>37 <input type="text" value="请输入关键词" id="myInput"/> 38 39 </body>40 </html></p>
<p>20、RadioButton的操作</p>
<pre><code>  （1、取得 RadioButton 的选中值 ：$(&quot;input[name=gender]:checked&quot;).val()
      &lt;input id=&quot;Radio2&quot; checked=&quot;checked&quot; name=&quot;gender&quot;  type=&quot;radio&quot; value=&quot; 男 &quot; /&gt; 男
      &lt;input  id=&quot;Radio1&quot; checked=&quot;checked&quot; name=&quot;gender&quot;  type=&quot;radio&quot; value=&quot; 女 &quot; /&gt; 女 
      &lt;input id=&quot;Radio3&quot; checked=&quot;checked&quot; name=&quot;gender&quot; type=&quot;radio&quot;  value=&quot; 未知 &quot; /&gt; 未知 &lt;/p&gt; 
 （2、设置 RadioButton 的选中值： $(&quot;input[name=gender]&quot;).val([&quot; 女 &quot;]);
                                          或者 $(&quot;:radio[name=gender]&quot;).val([&quot; 女 &quot;]); 
        注意 val 中参数的 [] 不能省略
</code></pre><p><img src="" alt=""><img src="" alt="">RadioButton</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <!-- 5    练习：聚焦控件的高亮显示。 颜色定义为 class 样式。  $("body  /* ") ，选择器 /* 表示 所有类型的控件。 6 --> 7 <title>RadioButton</title> 8 9 <style type="text/css">10 11 </style>12 <script src="js/jquery-1.4.2.js" type="text/javascript"></script>13 <script type="text/javascript">14         $(function () {15             $(&quot;/#getValue&quot;).click(function () {16                 alert($(&quot;input[name=gender]:checked&quot;).val());17             });18             $(&quot;/#setValue&quot;).click(function () {19                 $(&quot;input[name=gender]&quot;).val([&quot;女&quot;]);20                 $(&quot;:checkbox&quot;).val([&quot;篮球&quot;, &quot;冰球&quot;]);21                 $(&quot;:checkbox[value=羽毛球]&quot;).attr(&quot;checked&quot;, true); 22             });23         });24 </script>25 </head>26 <body>27 <input name="gender" type="radio" value="男" />男<br />28 <input name="gender" type="radio" value="女" />女<br />29 <input name="gender" type="radio" value="保密" />保密<br />30 <input type="checkbox" value="篮球" />篮球<br /> 31 <input type="checkbox" value="足球" />足球<br /> 32 <input type="checkbox" value="羽毛球" />羽毛球<br /> 33 <input type="checkbox" value="冰球" />冰球<br />34 <input type="button" value="设值" id="setValue" />35 <input type="button" value="取值" id="getValue" />36 </body>37 </html></p>
<pre><code>  （3、对 RadioButton 的选择技巧对于 CheckBox 和 Select 列表框也适用。除了可以使用 val 批量设置 RadioButton 、 CheckBox 等的选中以
         外，还可以设定 checked 属性来单独设置控件的选中状态  
                            $(&quot;/#btn1&quot;).attr(&quot;checked&quot;,true)
</code></pre><p> 21、JQuery事件</p>
<pre><code>   （1、事件绑定： $(&quot;/#btn&quot;).bind(&quot;click&quot;,function(){}) ，每次都这么调用太麻烦，所以 jQuery 可以用 $(&quot;/#btn&quot;).click(function(){}) 来进行简化 
   （2、合成事件 hover ， hover(enterfn,leavefn) ，当鼠标放在元素上时调用enterfn 方法，当鼠标离开元素的时候调用 leavefn 方法
</code></pre><p><img src="" alt=""><img src="" alt="">合成事件hover</p>
<p>1 <head> 2 <title>合成事件_hover</title> 3 4 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 5 <script type="text/javascript"> 6         $(function() { 7 //<em> 8             $(&quot;p&quot;).mouseenter(function() { 9                 $(this).text(&quot;客官来了！&quot;); 10             }) 11             .mouseleave(function() { 12                 $(this).text(&quot;大爷慢走！&quot;); 13             }); 14 /</em>/ 15             $(&quot;p&quot;).hover(function() { $(this).text(&quot;来了&quot;) }, function() { $(this).text(&quot;慢走&quot;)}); 16         }); 17 </script> 18 </head> 19 <body> 20 <p>你好！</p> 21 </body></p>
<pre><code>  （3、事件冒泡： JQuery 中也像 JavaScript 一样是事件冒泡。如果想获得事件相关的信息，只要给响应的匿名函数增加一个参数： e ，   
                         e 就是调用事件对象的 stopPropagation() 方法终止冒泡。 e. stopPropagation();
              $(&quot;tr&quot;).click(function(e) { alert(&quot;tr 被点击 &quot;); e.stopPropagation(); });// 注意函数的参数是 e 
  （4、阻止默认行为：有的元素有默认行为，比如超链接点击后会转向新链接、提交按钮默认会提交表单，
                             如果想阻止默认行为只要调用事件对象的preventDefault() 方法和 window.event.returnValue=false 效果一样。
              $(&quot;a&quot;).click(function(e) { alert(&quot; 所有超链接暂时全部禁止点击 &quot;); 
                                                 e.preventDefault(); });
</code></pre><p><img src="" alt=""><img src="" alt="">事件绑定</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <!-- 5    练习：聚焦控件的高亮显示。 颜色定义为 class 样式。  $("body  /* ") ，选择器 /* 表示 所有类型的控件。 6 --> 7 <title>RadioButton</title> 8 9 <style type="text/css">10 11 </style>12 <script src="js/jquery-1.4.2.js" type="text/javascript"></script>13 <script type="text/javascript">14         $(function () {15 //$(&quot;/#p1&quot;).click(function (e) { alert(e.pageX + &quot;:&quot; + e.pageY); });16 //$(&quot;/#tr1&quot;).click(function (e) { });17 18             $(&quot;/#p1&quot;).click(function (e) { alert(&quot;下面是p的：&quot;); alert($(this).html()); alert($(e.target).html()); });19             $(&quot;/#tr1&quot;).click(function (e) { alert(&quot;下面是tr的：&quot;); alert($(this).html()); alert($(e.target).html()); });20         }); 21 22 </script>23 </head>24 <body>25 <table id="t1"> 26 <tr id="tr1"> 27 <td id="td1"> 28 <p id="p1">nihao</p> 29 </td> 30 </tr> 31 </table> 32 </body>33 </html></p>
<p> 22、事件其他（ /* ）
      （1、属性： pageX 、 pageY 、 target获得触发事件的元素 ( 冒泡的起始，和this不一样) which如果是鼠标事件获得按键（1左键，2中键，3右键）。 
             altKey 、 shiftKey 、 ctrlKey 获得 alt 、shift、ctrl 是否按下，为bool值。 keyCode 、 charCode 属性发生事件时的keyCode （键盘码，小
            盘的1和主键盘的 keyCode 不一样）、charCode （ ASC 码）。<br>      （2、移除事件绑定： bind() 方法即可移除元素上所有绑定的事件，如果 unbind(&quot;click&quot;) 则只移除 click 事件的绑定。 bind:+= ； unbind:-=<br>      （3、一次性事件：如果绑定的事件只想执行一次随后立即 unbind 可以使用 one() 方法进行事件绑定： 
                       $(&quot;:button&quot;).one(&quot;click&quot;, function() { alert(&quot;点了&quot;); }); 
 23、鼠标</p>
<pre><code>（1、获得发生事件时鼠标的位置
            $(document).mousemove(function(e) {
                   document.title = e.pageX + &quot;,&quot; + e.pageY;
             });
（2、在 mousemove 、 click 等事件的匿名响应函数中如果指定一个参数 e ，那么就可以从 e 读取发生事件时的一些信息，比如对mousemove 等鼠标事件   来
       说，就可以读取 e.pageX 、 e.pageY 来获得发生事件时鼠标在页面的坐标。 
</code></pre><p> 案例1：跟着鼠标飞</p>
<p><img src="" alt=""><img src="" alt="">跟着鼠标飞</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 6 <style type="text/css"> 7 8 </style> 9 <script src="js/jquery-1.4.2.js" type="text/javascript"></script>10 <script type="text/javascript">11         $(function () {12             $(document).mousemove(function (e) {13                 $(&quot;/#fly&quot;).css(&quot;left&quot;, e.pageX).css(&quot;top&quot;,e.pageY);14             });15         });16 17 </script>18 </head>19 <body>20 <div id="fly" style="position:absolute"> 21 <img src="images/DSCF3362.JPG" style="width:100px;height:100px;" alt=""/> 22 </div> 23 </body>24 </html></p>
<p>案例2：点击小图显示详情</p>
<p><img src="" alt=""><img src="" alt="">点击小图显示详情</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <style type="text/css"> 6 7 </style> 8 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 9 <script type="text/javascript">10 var data = { &quot;images/1小.bmp&quot;: [&quot;images/1.JPG&quot;, &quot;zzz&quot;, &quot;21&quot;],11 &quot;images/2小.bmp&quot;: [&quot;images/2.jpg&quot;, &quot;yyy&quot;, &quot;22&quot;],12 &quot;images/3小.bmp&quot;: [&quot;images/3.JPG&quot;, &quot;xxx&quot;, &quot;23&quot;]13         };14         $(function () {15             $.each(data, function (key, value) {16 var smallPic = $(&quot;<img src='" + key + "' style='width:100px;height:100px;'></img>&quot;);17 //给小图加上三个额外的属性18                 smallPic.attr(&quot;bigPci&quot;, value[0]);19                 smallPic.attr(&quot;Name&quot;, value[1]);20                 smallPic.attr(&quot;Height&quot;, value[2]);21                 smallPic.mouseover(function (e) {22                     $(&quot;/#ditailImg&quot;).attr(&quot;src&quot;, $(this).attr(&quot;bigPci&quot;));23                     $(&quot;/#detailName&quot;).text(&quot;Name:&quot;+$(this).attr(&quot;Name&quot;));24                     $(&quot;/#detailHeight&quot;).text(&quot;Height:&quot;+$(this).attr(&quot;Height&quot;));25                     $(&quot;/#details&quot;).css(&quot;left&quot;, e.pageX).css(&quot;top&quot;, e.pageY).css(&quot;display&quot;, &quot;&quot;);26                 });27                 $(&quot;body&quot;).append(smallPic);28             });29             $(&quot;/#closeDetails&quot;).click(function () {30                 $(&quot;/#details&quot;).css(&quot;display&quot;,&quot;none&quot;);31             });32         });33 34 </script>35 </head>36 <body>37 <div style="display: none; position: absolute;" id="details">38 <img id="ditailImg" src="" style="width:200px;height:200px;"/>39 <p id="detailName">40 </p>41 <p id="detailHeight">42 </p>43 <p><input id="closeDetails" type="button" value="关闭" /></p>44 </div>45 </body>46 </html></p>
<p>24、动画及QQ风格控件
     （1、show() 、 hide() 方法会显示、隐藏元素。用 toggle() 方法在显示、隐藏之间切换 
                     $(&quot;:button[value=show]&quot;).click(function() { $(&quot;div&quot;).show(); });
                     $(&quot;:button[value=hide]&quot;).click(function() { $(&quot;div&quot;).hide(); });
    （2、 如果 show 、 hide 方法不带参数则是立即显示、立即隐藏，如果指定速度参数则会用指定时间进行动态显示、隐藏，单位为毫秒 ，也可以使用三个内置的速</p>
<pre><code>        度： fast （200 毫秒）、 normal （400 毫秒）、 slow （600 毫秒）， jQuery 动画函数中需要速度的地方一般也可以使用这个三个值。
</code></pre><p><img src="" alt=""><img src="" alt="">模拟QQTab效果</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <style type="text/css"> 6         ul{list-style-type:none;} 7         .header{background-color:Green;} 8         .body{border-color:Blue;border-style:solid;border-width:5px;} 9 </style>10 <script src="js/jquery-1.4.2.js" type="text/javascript"></script>11 <script type="text/javascript">12 //有body样式的li13         $(function () {14             $(&quot;/#qq li:odd&quot;).addClass(&quot;body&quot;); //偶数行15             $(&quot;/#qq li:even&quot;).addClass(&quot;header&quot;).click(function () {//奇数行16                 $(this).next(&quot;li.body&quot;).show(&quot;fast&quot;).siblings(&quot;li.body&quot;).hide(&quot;fast&quot;);17             });18 //初始打开第一个表头19             $(&quot;/#qq li:first&quot;).click();20         });21 </script>22 </head>23 <body>24 <h1 style="margin-left:50px">QQTab效果</h1> 25 <ul id="qq" style="width:30%"> 26 <li>我的好友</li> 27 <li>mm<br />baba<br />mama<br /></li> 28 <li>我的女友<br /></li> 29 <li>gemen<br /></li> 30 <li>陌生人</li> 31 <li>meinv<br />shuaige<br /></li> 32 </ul> 33 34 </body>35 </html></p>
<p> 25、JQuery Cookie 使用 
      （1、使用方法， Cookie 保存的是键值对
           /<em>1 、添加对 jquery.cookie.js
           /</em>2 、设置值， $.cookie(&#39; 名字 &#39;, &#39; 值 &#39;) 。 cookie 中保存的值都是文本。
           /*3 、读取值， var v=$.cookie(&#39; 名字 &#39;)
                      alert($.cookie(&quot; 用户名 &quot;));
                      $.cookie(&quot; 用户名 &quot;,&quot;tom&quot;); 在同域名的另外一个页面中也能读取到。 
      （2、设置值的时候还可以指定第三个参数， $.cookie(&#39; 名字 &#39;, &#39; 值 &#39;, { expires: 7, path: &#39;/&#39;,domain: &#39;itcast.cn&#39;, secure: true }) ，<br>              expires 表示要求浏览器保留 Cookie 几天，这个值只是给浏览器的建议，可能没到时间就已经被清除了。可以实现 &quot; 勾选 【 记录我的用户
              名 10 天 】 &quot; 的功能。如果不设定 expires 在浏览器关闭以后就清除， options 参数用哪个设置哪个<br> 案例：记住背景色</p>
<p><img src="" alt=""><img src="" alt="">记住背景色</p>
<p>1 &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<a href="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;" target="_blank">http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</a> 2 <html xmlns="http://www.w3.org/1999/xhtml"> 3 <head> 4 <title></title> 5 <style type="text/css"> 6 </style> 7 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 8 <script src="js/jquery.cookie.js" type="text/javascript"></script> 9 <script type="text/javascript">10 if ($.cookie(&quot;UserName&quot;)) { //读取上次记录的用户名 11             $(&quot;username&quot;).val($.cookie(&quot;UserName&quot;));12         }13         $(&quot;/#btnLogin&quot;).click(function () {14             $.cookie(&quot;UserName&quot;, $(&quot;/#username&quot;).val())//用户填写的用户名保存到Cookie中 15         });16 17         $(function () {18             $(&quot;/#tableColor td&quot;).click(function () {19 var bgColor = $(this).css(&quot;background-color&quot;);20                 $(document.body).css(&quot;background-color&quot;, bgColor);21                 $.cookie(&quot;backcolor&quot;, bgColor, {expires:2});22             });23 24 if ($.cookie(&quot;backcolor&quot;)) {25                 $(document.body).css(&quot;background-color&quot;, $.cookie(&quot;backcolor&quot;));26             }27         });28 29 </script>30 </head>31 <body>32 <table id="tableColor">33 <tr>34 <td style="background-color: Red">35                 红色36 </td>37 <td style="background-color: Green">38                 绿色39 </td>40 <td style="background-color: Yellow">41                 黄色42 </td>43 </tr>44 </table>45 <input type="text" id="username" />46 <input type="button" value="登录" id="btnLogin" />47 </body>48 </html></p>
<p>26、JQueryUI</p>
<p> 下载地址：<a href="http://jqueryui.com/" target="_blank"><a href="http://jqueryui.com/">http://jqueryui.com/</a></a>下发包
<img src="" alt=""><img src="" alt="">View Code</p>
<p>1 <head> 2 <title>JQueryUI的使用</title> 3 <script src="js/jquery-1.4.2.js" type="text/javascript"></script> 4 <link href="css/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet" type="text/css" /> 5 <script src="js/jquery-ui-1.8.16.custom.min.js" type="text/javascript"></script> 6 7 <script type="text/javascript"> 8         $(function() { 9             $(&quot;/#mydialog&quot;).dialog(); 10             $(&quot;/#testtab&quot;).tabs(); 11         }); 12 </script> 13 </head> 14 <body> 15 <div id="mydialog">你好，我是对话框</div> 16 <div id="testtab"> 17 <ul> 18 <li><a href="/#tabBasic">基本设置</a></li> 19 <li><a href="/#tabAdv">高级设置</a></li> 20 </ul> 21 <div id="tabBasic">用户名：<input type="text"/></div> 22 <div id="tabAdv">刷新频率：<input type="text" /></div> 23 </div> 24 </body></p>
<p>分类: <a href="http://www.cnblogs.com/daomul/category/419511.html" target="_blank">jQuery</a></p>
<p>绿色通道： <a href="">好文要顶</a> <a href="">关注我</a> <a href="">收藏该文</a><a href="http://space.cnblogs.com/msg/send/daomul" target="_blank">与我联系</a> <a href="&quot;分享至新浪微博&quot;"><img src="" alt=""></a>
<a href="http://home.cnblogs.com/u/daomul/" target="_blank">daomul</a>
<a href="http://home.cnblogs.com/u/daomul/followees" target="_blank">关注 - 1</a>
<a href="http://home.cnblogs.com/u/daomul/followers" target="_blank">粉丝 - 43</a></p>
<p><a href="">+加关注</a></p>
<p>32</p>
<p>0
(请您对文章做出评价)</p>
<p><a href="http://www.cnblogs.com/daomul/archive/2013/04/23/3029203.html" target="_blank">«</a>上一篇：<a href="http://www.cnblogs.com/daomul/archive/2013/04/23/3029203.html" title="发布于2013-04-23 00:36" target="_blank">Dom 学习总结及其实例</a>
<a href="http://www.cnblogs.com/daomul/archive/2013/04/29/3046449.html" target="_blank">»</a>下一篇：<a href="http://www.cnblogs.com/daomul/archive/2013/04/29/3046449.html" title="发布于2013-04-29 18:32" target="_blank">.NET运用AJAX 总结及其实例</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/JS用法/">JS用法</a></li></span><span class="breadcrumb"><li><a href="/categories/JS用法/">JS用法</a></li><li><a href="/categories/JS用法/Jquery/">Jquery</a></li></span></span> | <span class="tags">Tagged <a href="/tags/JS用法/" class="label label-primary">JS用法</a><a href="/tags/Jquery/" class="label label-success">Jquery</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:28"datetime="2014-03-07 09:54:28"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-JS用法-Jquery--JQuery学习总结及实例/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-JS用法-Jquery--JQuery学习总结及实例" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-架构师--InfoQ企业架构师应担任什么角色/">InfoQ 企业架构师应担任什么角色</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:28.000Z"> <a href="/2014/02/02/2014-02-02-架构师--InfoQ企业架构师应担任什么角色/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="infoq-">InfoQ 企业架构师应担任什么角色</h1>
<p><a href="">关闭</a></p>
<h2 id="-">现有用户：</h2>
<p>Email:</p>
<p>密码：</p>
<h2 id="-">新用户：</h2>
<h1 id="-infoq-http-www-infoq-com-cn-news-2010-08-enterprisearchitect-"><a href="http://www.infoq.com/cn/news/2010/08/EnterpriseArchitect#" target="_blank">InfoQ</a></h1>
<p><a href="http://www.infoq.com/cn/news/2010/08/EnterpriseArchitect#content" target="_blank">直接转至内容</a>
时刻关注企业软件开发领域的变化与创新</p>
<p><a href="http://www.infoq.com/" target="_blank">En</a> | 中文 | <a href="http://www.infoq.com/jp/" target="_blank">日本語</a> | <a href="http://www.infoq.com/br/" target="_blank">Br</a></p>
<ul>
<li><a href="mailto:news-cn@infoq.com?Subject=[NEWS]&amp;Body=Thanks for your interest in submitting news to InfoQ.com. Please provide as much detail about your news suggestion in this email as possible.  Your suggestion will be considered and if selected an InfoQ editor will write an editted version and publish it. An automated version of this form will be coming sometime in the next few weeks. :">提供新闻</a> Thanks - InfoQ team.)</li>
<li><a href="">打印</a></li>
</ul>
<h2 id="-">新闻</h2>
<h1 id="-http-www-infoq-com-cn-news-2010-08-enterprisearchitect-"><a href="http://www.infoq.com/cn/news/2010/08/EnterpriseArchitect" target="_blank">企业架构师应担任什么角色</a></h1>
<p>作者 <strong><a href="http://www.infoq.com/cn/bycategory.action?authorName=Boris-Lublinsky" target="_blank">Boris Lublinsky</a></strong>译者 <strong><a href="http://www.infoq.com/cn/bycategory.action?authorName=%E4%BE%AF%E4%BC%AF%E8%96%87" target="_blank">侯伯薇</a></strong>发布于 2010年8月1日 上午4时8分
社区<a href="http://www.infoq.com/cn/architecture" target="_blank">架构</a>主题<a href="http://www.infoq.com/cn/careers" target="_blank">职业生涯</a> ,<a href="http://www.infoq.com/cn/enterprise-architecture" target="_blank">企业架构</a></p>
<p><a href="http://www.addthis.com/bookmark.php?v=250&amp;username=infoq" target="_blank">分享 <img src="" alt="Share"></a>| <a href=""></a><a href=""></a><a href=""></a><a href=""></a><a href=""></a><a href=""></a><a href=""></a><a href=""></a></p>
<p>此次<a href="http://soa.sys-con.com/node/1475433" target="_blank">圆桌会议</a>由Interarbor Solutions的首席分析师Dana Gardner主持，他首先做了开场致辞：
现在对企业架构师的需求看起来比以前更紧迫了，但是让企业架构师职业并不一定会提升它的可信度和可采纳程度，至少现在还不行。</p>
<p>参与此次圆桌会议的有：MIT信息系统研究中心的主管和首席研究科学家Jeanne Ross，Integritas Solutions的架构实践主管和开源组织的架构论坛主席Dave Hornford，以及开源组织的技能和能力小组的副主席Len Fehskens，他们对以下问题做出了更详细的叙述：</p>
<p>……IT从神秘的艺术向工程化科学的转变，企业架构师如何把握唯一机会，在业务架构和越来越高的业务敏捷性概念下起引导作用。</p>
<p>根据Fehsken的观点，企业架构师当前的职业状况，就像医生或者律师这些成熟的职业在两三百年前的状况一样。不仅没有任何认证，而且企业架构师的知识本身也因人而异：</p>
<p>我们当前的状态与律师类似，律师正是试图基于他们才拥有的秘密过程来兜售自己，那会让你在法官面前得到公平的对待。或者与医生类似，他们会说：“到我们的医院来吧，因为我们是唯一知道如何治疗这种特殊疾病的人。”</p>
<p>Ross和Hornford都认为当前的风险非常高。在数字化经济中，IT变得越来越重要，而合适的架构能够轻易地改变公司的地位。Ross还说：</p>
<p>架构师的角色就是要确保有一种先见之明…… 因此有大量的争论和预想，这已经成为架构师角色的一部分，高于技术并超出技术的范围……有一种艺术能够预想到组织的长期愿景……我们觉得这些都应该是革新……</p>
<p>Harnford对其进行了详细说明，他指出成功的架构应该专注于业务价值。根据他的观点，不同的组织可以用不同的方式来定义价值：</p>
<p>... 但是对其进行全面的支持是业务想要达到的目的吗？他们的愿景是什么？目标又是什么？从业者需要对以下问题非常明确：最终的状态会是什么样的，业务转化如何，以及公司的数字资产即IT资产如何推动公司的发展，从而他们可以将其目标转移到比他们的竞争者更有效的领域。</p>
<p>依他所见，成为成功的企业架构师的最基本的要求就是要具备领导能力，而不真正拥有所有知识：</p>
<p>如果你没有好的领导的技能，那么其他的能力都无关紧要了…… 如果你不从事领导工作并且不去承担领导的责任，那么永远不会成为架构师。当前职业的障碍之一就是很多架构师都没有做好承担领导职责风险的准备。</p>
<p>接下来的主题是架构师的价值所在，Fehskens 主张：</p>
<p>架构师的权威最终来自于他能够在总体上清晰表述架构价值的能力，这针对特定的架构，并且是在特定的情况下的…… 这恰恰是一位从技术人员转过来的架构师所存在的最大问题。他们会告诉你特性和功能如何，但是永远不会谈论到它能够带来的利益。</p>
<p>架构师面临的挑战包括：</p>
<p>……确保他们所架构的与目的相符…… 架构师用来处理架构方面问题的方法意味着敏捷和缩减成本不再是短期的关注点。这两点都是我们要创建架构的首要原因。</p>
<p>Ross警告说，引人注目的业务价值很少能够立即体现，但是通常会一直提升：</p>
<p>重要的是要一步一个脚印，向公司展示IT能够帮他们做什么，然后，随着时间的推移，就会发生质的飞跃。事实上，我猜很多公司会说：“看，我们比以前更敏捷了。” 这并不是因为他们说将会变得敏捷，而是因为他们说每天都会把事情做得更好一点儿。</p>
<p>Gardner对讨论做出总结，他说：</p>
<p>如果我们回到核心问题，也就是架构师应该实现什么，那么就可以理解什么是业务价值以及我们向客户交付的价值在何处？</p>
<p>企业架构师的角色会随着时间的改变而不断改变。二十年之前很少有人知道什么是架构师，而当前很多公司都认为企业架构师是他们的机能的基础所在。他们的职责也发生了戏剧性的变化，从技术职责（超级开发者）变为业务架构师和领导。这个职业一直在变化，暂时还不清楚最终会选择哪个方向。</p>
<p><strong>查看英文原文：</strong><a href="http://www.infoq.com/news/2010/07/EnterpriseArchitect" target="_blank">The Role of the Enterprise Architect</a></p>
<h3 id="-">相关厂商内容</h3>
<p><a href="http://www.infoq.com/cn/vendorcontent/show.action?vcr=1054" target="_blank">百度技术沙龙第4期（7月24日）演讲资料下载</a></p>
<p><a href="http://www.infoq.com/cn/vendorcontent/show.action?vcr=664" target="_blank">Adobe Flash Builder 4简体中文正式版高速下载</a></p>
<p><a href="http://www.infoq.com/infoq/url.action?i=1326&amp;t=f" target="_blank">Intel研发中心架构师张银奎：Design For Debug！</a></p>
<p><a href="http://www.infoq.com/infoq/url.action?i=1327&amp;t=f" target="_blank">Excel项目主管：产品规划阶段的项目管理</a></p>
<p><a href="http://www.infoq.com/infoq/url.action?i=1328&amp;t=f" target="_blank">惠普研发实验室创始人：跨国公司产品创新之路</a></p>
<h3 id="-">相关赞助商</h3>
<p><a href="http://www.infoq.com/infoq/url.action?i=1278&amp;t=f" target="_blank"><img src="" alt=""></a></p>
<p>由InfoQ和MSUP战略合作举办的亚太软件研发团队管理年会珠海站(9.18-19)，<a href="http://www.infoq.com/cn/vendorcontent/show.action?vcr=999" target="_blank">欲报从速</a>！</p>
<h3 id="3-">3 条回复</h3>
<p><a href="">关注此讨论</a><a href="">回复</a></p>
<p><a href="">架构师越来越像将军了</a>发表人 翌翔 高 发表于 2010年8月1日 下午8时27分
<a href="">Re: 架构师越来越像将军了</a>发表人 Slivermedol Rin 发表于 2010年8月1日 下午9时25分</p>
<p><a href="">Re: 那IT行业中的军师又该是什么样的角色呢？</a>发表人 翌翔 高 发表于 2010年8月1日 下午10时0分
<a href="">按日期倒序排列</a></p>
<ol>
<li><a href=""></a></li>
</ol>
<p><a href="http://www.infoq.com/cn/news/2010/08/EnterpriseArchitect#" target="_blank">返回顶部</a></p>
<h3 id="-http-www-infoq-com-cn-news-2010-08-enterprisearchitect-view_59071-"><a href="http://www.infoq.com/cn/news/2010/08/EnterpriseArchitect#view_59071" target="_blank">架构师越来越像将军了</a></h3>
<p>2010年8月1日 下午8时27分 发表人 <strong>翌翔 高</strong>
之前觉得架构师很像军师，为了解决各种难题而筹谋划策。
看罢各位大师的总结，觉得架构师更像为了夺下城池（业务价值）而率兵打仗的大将军！
或许这个隐喻并不恰当，但我觉得这要比与建筑业相类比更加贴切、并富于激情！</p>
<p><a href="">回复</a></p>
<ol>
<li><a href=""></a></li>
</ol>
<p><a href="http://www.infoq.com/cn/news/2010/08/EnterpriseArchitect#" target="_blank">返回顶部</a></p>
<h3 id="-re-http-www-infoq-com-cn-news-2010-08-enterprisearchitect-view_59074-"><a href="http://www.infoq.com/cn/news/2010/08/EnterpriseArchitect#view_59074" target="_blank">Re: 架构师越来越像将军了</a></h3>
<p>2010年8月1日 下午9时25分 发表人 <strong>Slivermedol Rin</strong>
那IT行业中的军师又该是什么样的角色呢？</p>
<p><a href="">回复</a></p>
<ol>
<li><a href=""></a></li>
</ol>
<p><a href="http://www.infoq.com/cn/news/2010/08/EnterpriseArchitect#" target="_blank">返回顶部</a></p>
<h3 id="-re-it-http-www-infoq-com-cn-news-2010-08-enterprisearchitect-view_59075-"><a href="http://www.infoq.com/cn/news/2010/08/EnterpriseArchitect#view_59075" target="_blank">Re: 那IT行业中的军师又该是什么样的角色呢？</a></h3>
<p>2010年8月1日 下午10时0分 发表人 <strong>翌翔 高</strong>
蒜泥狠，刨根问底，呵呵
感觉 IT 行业中的军师有时是由架构师本人来兼职的（将军兼军师），
根据面对的情况不同而在两种角色间相互切换！
具体说来，军师的职责是出谋划策，正如文中 Fehskens 所说：
架构师的权威最终来自于他能够在总体上清晰表述架构价值的能力，这针对特定的架构，并且是在特定的情况下的…… <strong>这恰恰是一位从技术人员转过来的架构师所存在的最大问题</strong>。他们会告诉你特性和功能如何，但是永远不会谈论到它能够带来的利益。
对于将军而言，这确实是个大问题，或许这本来就不是应该由将军来做的事，哪由谁来做呢？
答案是：军师。军师根据特定环境和个人经验，给出可行的解决方案。
最终由将军做出决断！
如 Fehskens 所说，“从技术人员转过来的架构师”所扮演的常常是军师的角色，而非称职的将军！
军师的职责是给出给出可行的解决方案，而将军必须对利益的得失做出明确的判断！</p>
<p><a href="">回复</a></p>
<p><a href="http://www.infoq.com/cn/" target="_blank"><img src="" alt="InfoQ"></a>
7月89,346名独立访问用户</p>
<ul>
<li><a href="http://www.infoq.com/cn/reginit.action" target="_blank">注册</a></li>
<li><a href="">登录</a></li>
<li><a href="http://www.infoq.com/cn/about" target="_blank">关于我们</a></li>
<li><a href="http://www.infoq.com/cn/partners.jsp" target="_blank">合作伙伴</a></li>
<li><a href="http://www.infoq.com/cn/rss/rss.action?token=UeytPQHWy7lOqouaeOL5pz2SUiYm2Owe" target="_blank">个性化RSS<img src="" alt="RSS Feed"></a></li>
<li><p><a href="http://www.infoq.com/cn/qcon" target="_blank">QCon</a></p>
<h2 id="-">您的社区</h2>
</li>
<li><p><a href="http://www.infoq.com/cn/java/" target="_blank">Java</a></p>
</li>
<li><a href="http://www.infoq.com/cn/dotnet/" target="_blank">.NET</a></li>
<li><a href="http://www.infoq.com/cn/ruby/" target="_blank">Ruby</a></li>
<li><a href="http://www.infoq.com/cn/soa/" target="_blank">SOA</a></li>
<li><a href="http://www.infoq.com/cn/agile/" target="_blank">敏捷</a></li>
<li><a href="http://www.infoq.com/cn/architecture/" target="_blank">架构</a></li>
<li><a href="http://www.infoq.com/cn/operations/" target="_blank">运维</a></li>
</ul>
<p><a href="http://www.infoq.com/cn/news/2010/08/EnterpriseArchitect#" target="_blank"><img src="" alt="Search"></a></p>
<h2 id="-">特别专题</h2>
<ul>
<li><a href="http://www.infoq.com/cn/management/" target="_blank">软件研发团队管理</a>
*</li>
<li><a href="http://www.infoq.com/cn/zones/flash/" target="_blank">Flash Platform</a>
*</li>
<li><a href="http://www.infoq.com/cn/zones/visualstudio2010/" target="_blank">Visual Studio 2010</a>
*</li>
<li><a href="http://www.infoq.com/cn/zones/primeton/" target="_blank">SOA应用集成方案</a>
*</li>
<li><a href="http://www.infoq.com/cn/scrum/" target="_blank">Scrum开发</a>
*</li>
<li><a href="http://www.infoq.com/cn/architect/" target="_blank">月刊：《架构师》</a>
*</li>
<li><a href="http://www.infoq.com/cn/qclub/" target="_blank">线下活动：QClub</a></li>
</ul>
<h3 id="-">赞助商链接</h3>
<p><a href="http://www.infoq.com/ads/textLinkUrlAction.action?i=192&amp;url=http%3A%2F%2Fwww.infoq.com%2Fcn%2Fzones%2Fmpday%2Findex.html" target="_blank">MPDay珠海站</a>
9月18日-9月19日
亚太软件研发团队
管理年会登陆珠海
五大专题名师荟萃
深入交流强调分享
欲报从速团购更惠</p>
<h2 id="-">深度内容</h2>
<ul>
<li><a href="">全部</a></li>
<li><a href="">文章</a></li>
<li><a href="">技术演讲</a></li>
<li><a href="">技术访谈</a></li>
<li><a href="">迷你书</a><h1 id="-scala-spring-"><a href="">Scala与Spring：强强联合</a></h1>
</li>
</ul>
<p><a href=""><img src="" alt=""></a></p>
<p>Scala与Spring是个非常有前途的搭配。本文将通过具体的实例阐述如何将强大的Scala与久经考验、富有成效的Spring框架整合起来以发挥二者的优势。</p>
<ul>
<li><a href="">Java</a>,</li>
<li><strong><a href="">Urs Peter</a></strong> 2010年8月2日</li>
</ul>
<h1 id="-sdl-"><a href="">在互联网公司推行SDL的一些经验和教训</a></h1>
<p><a href=""><img src="" alt=""></a></p>
<p>本视频将从传统软件行业推行SDL（Security Development Lifecycle）和在互联网公司的区别入手，阐 述在互联网公司推行SDL所面临的挑战，分享我们在推行SDL过程中积累的一些经验教训。</p>
<ul>
<li><a href="">运维</a>,</li>
<li><strong><a href="">张玉东</a></strong> 2010年7月30日
advertisement</li>
</ul>
<h1 id="-soa-"><a href="">SOA十诫</a></h1>
<p><a href=""><img src="" alt=""></a></p>
<p>使用面向服务的架构（SOA）可 能会降低信息系统的成本。笔者探索了各种方法，通过遵守十大基本戒律以实现SOA最初期望达到的潜在价值。</p>
<ul>
<li><a href="">SOA</a>,</li>
<li><strong><a href="">Hans Wierenga</a></strong> 2010年7月29日<h1 id="-"><a href="">陈怡斐谈敏捷中的领导力</a></h1>
</li>
</ul>
<p><a href=""><img src="" alt=""></a></p>
<p>传统开发和敏捷开发中的领导力差别显著。陈怡斐作为经历过传统开发和敏捷开发的管理实践者，告诉我们领导力在两种模式中转变，以及组织为了支持这个转变需要做好的准备。</p>
<ul>
<li><a href="">敏捷</a>,</li>
<li><strong><a href="">陈怡斐</a></strong> 2010年7月29日 ,</li>
<li><a href="">  7</a></li>
</ul>
<h1 id="-deploying-html5-"><a href="">书摘和采访：Deploying HTML5</a></h1>
<p><a href=""><img src="" alt=""></a></p>
<p>Deploying HTML5一书的作者Aditya Yada曾是ThoughtWorks的高级构架师，如今是一家咨询公司的CTO。在这本书中，他详细介绍了HTML 5的标准组件，解释了各主流浏览器实现这些组件的方式，并通过示例代码讲解了各组件的用法。</p>
<ul>
<li><a href="">架构</a>, <a href="">Java</a>, <a href="">.NET</a>, <a href="">Ruby</a>,</li>
<li><strong><a href="">Abel Avram</a></strong> 2010年7月28日<h1 id="-visual-studio-2010-scrum-"><a href="">基于Visual Studio 2010 进行敏捷/Scrum模式开发</a></h1>
</li>
</ul>
<p><a href=""><img src="" alt=""></a></p>
<p>本文主要介绍了如何基于Visual Studio 2010进行敏捷Scrum模式开发，包括基于VS 2010进行Scrum团队组织，对需求记录和跟踪的支持，对Scrum流程中重要事件的支持，以及VS 2010对产品质量的保证等。</p>
<ul>
<li><a href="">.NET</a>, <a href="">Java</a>, <a href="">敏捷</a>,</li>
<li><strong><a href="">徐磊</a></strong> 2010年7月28日</li>
</ul>
<h1 id="-spring-mvc-jax-rs-"><a href="">Spring MVC与JAX-RS比较与分析</a></h1>
<p><a href=""><img src="" alt=""></a></p>
<p>近日，来自SpringSource的Rossen Stoyanchev对Spring 3中的Spring MVC REST特性与JAX-RS进行了一番比较。</p>
<ul>
<li><a href="">Java</a>,</li>
<li><strong><a href="">Rossen Stoyanchev</a></strong> 2010年7月27日 ,</li>
<li><a href="">  3</a><h1 id="-web-"><a href="">互联网公司web安全挑战与防护</a></h1>
</li>
</ul>
<p><a href=""><img src="" alt=""></a></p>
<p>互联网公司大量web业务的发展带来了新的挑战与防护，传统的针对单一服务单一应用的安全防护已经无法满足安全需求，本演讲将以黑客的角度来描述如何应对这一挑战的一些思路，以及百度在这一思路下所做的一些应用实践。</p>
<ul>
<li><a href="">运维</a>,</li>
<li><p><strong><a href="">方小顿</a></strong> 2010年7月26日</p>
</li>
<li><p><a href="">更早的 &gt;</a></p>
</li>
</ul>
<p>联系我们 <a href="mailto:feedback@infoq.com">反馈</a>
feedback@infoq.com <a href="mailto:bugs@infoq.com">Bugs</a>
bugs@infoq.com <a href="mailto:sales@cn.infoq.com">广告</a>
sales@cn.infoq.com <a href="mailto:editors@cn.infoq.com">编辑</a>
editors@cn.infoq.com <a href="http://twitter.com/infoqchina" target="_blank">Twitter</a>
<a href="http://twitter.com/infoqchina" target="_blank">http://twitter.com/infoqchina</a> <a href="http://groups.google.com/group/infoqchina" target="_blank">InfoQ讨论组</a>
<a href="http://groups.google.com/group/infoqchina" target="_blank">http://groups.google.com/group/infoqchina</a></p>
<p>InfoQ.com 及其所有内容，版权所有© 2006-2010 C4Media Inc. InfoQ.com 服务器由 <a href="http://www.contegix.com/" target="_blank">Contegix</a> 提供，我们最信赖的 ISP 合作伙伴。 <a href="">隐私政策</a></p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/架构师/">架构师</a></li></span></span> | <span class="tags">Tagged <a href="/tags/架构师/" class="label label-primary">架构师</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:28"datetime="2014-03-07 09:54:28"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-架构师--InfoQ企业架构师应担任什么角色/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-架构师--InfoQ企业架构师应担任什么角色" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-架构师--MemcacheDB-TokyoTyrant-Redisperformancetest–/">MemcacheDB</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:28.000Z"> <a href="/2014/02/02/2014-02-02-架构师--MemcacheDB-TokyoTyrant-Redisperformancetest–/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="memcachedb-tokyo-tyrant-redis-performance-test-tim-">MemcacheDB, Tokyo Tyrant, Redis performance test – Tim[后端技术]</h1>
<h1 id="-tim-http-timyang-net-home-"><a href="http://timyang.net/" title="Home" target="_blank">Tim[后端技术]</a></h1>
<p>Tim&#39;s blog, 关于后端架构、互联网技术、分布式、大型网络应用、NoSQL、技术感悟等</p>
<p><a href="http://timyang.net/" target="_blank">Home</a> | <a href="http://timyang.net/about/" target="_blank">About</a> | <a href="http://timyang.net/tag/English/" target="_blank">English version</a> | <a href="http://timyang.net/about/#comment" target="_blank">留言(Guestbook)</a> | <a href="http://timyang.net/feed/" target="_blank"><img src="" alt=""></a><a href="http://timyang.net/feed/" target="_blank">订阅RSS</a> <a href="http://fusion.google.com/add?source=atgs&amp;feedurl=http%3A//timyang.net/feed/" target="_blank"><img src="" alt="Add to Google"></a></p>
<ul>
<li></li>
<li><p>Email: <img src="" alt=""></p>
</li>
<li><h3 id="similar-posts">Similar Posts</h3>
</li>
<li><p><a href="http://timyang.net/programming/thrift-protocol-buffers-performance-2/" title="April 17, 2009" target="_blank">Thrift and Protocol Buffers performance in Java Round 2</a></p>
</li>
<li><a href="http://timyang.net/programming/thrift-protocol-buffers-performance-java/" title="April 2, 2009" target="_blank">Thrift and Protocol Buffers performance in Java</a></li>
<li><a href="http://timyang.net/programming/c-erlang-java-performance/" title="November 11, 2009" target="_blank">C, Erlang, Java and Go Web Server performance test</a></li>
<li><a href="http://timyang.net/architecture/friendfeed-like-aggregator/" title="April 3, 2009" target="_blank">Ideas for creating a friendfeed like feed aggregator system</a></li>
<li><p><a href="http://timyang.net/python/python-thread-socket-server/" title="March 8, 2009" target="_blank">Python thread socket server</a></p>
</li>
<li><h3 id="most-commented">Most Commented</h3>
</li>
<li><p><a href="http://timyang.net/data/mcdb-tt-redis/" title="MemcacheDB, Tokyo Tyrant, Redis performance test" target="_blank">MemcacheDB, Tokyo Tyrant, Redis performance test</a> (101)</p>
</li>
<li><a href="http://timyang.net/programming/c-erlang-java-performance/" title="C, Erlang, Java and Go Web Server performance test" target="_blank">C, Erlang, Java and Go Web Server performance test</a> (85)</li>
<li><a href="http://timyang.net/about/" title="About Tim Yang" target="_blank">About Tim Yang</a> (83)</li>
<li><a href="http://timyang.net/data/redis-misunderstanding/" title="Redis几个认识误区" target="_blank">Redis几个认识误区</a> (62)</li>
<li><a href="http://timyang.net/programming/memcache-mutex/" title="Memcache mutex设计模式" target="_blank">Memcache mutex设计模式</a> (47)</li>
<li><a href="http://timyang.net/architecture/microblog-design-qcon-beijing/" title="构建可扩展的微博架构(qcon beijing 2010演讲)" target="_blank">构建可扩展的微博架构(qcon beijing 2010演讲)</a> (39)</li>
<li><a href="http://timyang.net/architecture/consistent-hashing-practice/" title="某分布式应用实践一致性哈希的一些问题" target="_blank">某分布式应用实践一致性哈希的一些问题</a> (38)</li>
<li><a href="http://timyang.net/google/open-source/" title="为什么优秀开发者进入Google后就不参与开源了" target="_blank">为什么优秀开发者进入Google后就不参与开源了</a> (33)</li>
<li><a href="http://timyang.net/misc/macbook-air-productive/" title="MacBook Air与工作效率" target="_blank">MacBook Air与工作效率</a> (32)</li>
<li><p><a href="http://timyang.net/data/memcached-lru-evictions/" title="Memcached数据被踢(evictions&gt;0)现象分析" target="_blank">Memcached数据被踢(evictions&gt;0)现象分析</a> (30)</p>
</li>
<li><h3 id="recent-posts">Recent Posts</h3>
</li>
<li><p><a href="http://timyang.net/tao/speech-practice/" title="演讲小组的第一次活动" target="_blank">演讲小组的第一次活动</a></p>
</li>
<li><a href="http://timyang.net/tao/connect-the-dots/" title="“connect the dots” 随想" target="_blank">“connect the dots” 随想</a></li>
<li><a href="http://timyang.net/tao/talents/" title="跨领域人才" target="_blank">跨领域人才</a></li>
<li><a href="http://timyang.net/product/discontinued-servic/" title="产品下线杂谈" target="_blank">产品下线杂谈</a></li>
<li><a href="http://timyang.net/misc/speech/" title="当我谈演讲时候，我谈些什么" target="_blank">当我谈演讲时候，我谈些什么</a></li>
<li><a href="http://timyang.net/architecture/k/" title="案例与故障的知识库" target="_blank">案例与故障的知识库</a></li>
<li><a href="http://timyang.net/management/learning-tao/" title="团队中的为师之道" target="_blank">团队中的为师之道</a></li>
<li><a href="http://timyang.net/google/hybrid-research/" title="有感Google的混合研究方法" target="_blank">有感Google的混合研究方法</a></li>
<li><a href="http://timyang.net/management/probation/" title="谈技术人员“转正”" target="_blank">谈技术人员“转正”</a></li>
<li><a href="http://timyang.net/architecture/notes-weixin/" title="微信架构的启示" target="_blank">微信架构的启示</a></li>
<li><a href="http://timyang.net/misc/macbook-air-productive/" title="MacBook Air与工作效率" target="_blank">MacBook Air与工作效率</a></li>
<li><a href="http://timyang.net/architecture/notes-timelines-twitter/" title="Notes about Timelines @ Twitter" target="_blank">Notes about Timelines @ Twitter</a></li>
<li><a href="http://timyang.net/management/engineer-performance/" title="技术工程师的能力与目标" target="_blank">技术工程师的能力与目标</a></li>
<li><a href="http://timyang.net/management/design-review/" title="技术方案评审" target="_blank">技术方案评审</a></li>
<li><p><a href="http://timyang.net/management/planning/" title="谈技术团队目标" target="_blank">谈技术团队目标</a></p>
</li>
<li><h3 id="recent-comments">Recent Comments</h3>
</li>
<li><p><a href="http://emake.info/the-redis-several-misunderstandings.html" target="_blank">Redis几个认识误区 | 创造</a> on <a href="http://timyang.net/data/redis-misunderstanding/comment-page-2/#comment-224409" target="_blank">Redis几个认识误区</a></p>
</li>
<li><a href="http://emake.info/the-redis-several-misunderstandings.html" target="_blank">Redis几个认识误区 | 创造</a> on <a href="http://timyang.net/data/mcdb-tt-redis/comment-page-3/#comment-224408" target="_blank">MemcacheDB, Tokyo Tyrant, Redis performance test</a></li>
<li><a href="http://outofmemory.cn/" target="_blank">甄码农</a> on <a href="http://timyang.net/management/learning-tao/comment-page-1/#comment-224161" target="_blank">团队中的为师之道</a></li>
<li><a href="http://outofmemory.cn/" target="_blank">甄码农</a> on <a href="http://timyang.net/tao/talents/comment-page-1/#comment-224158" target="_blank">跨领域人才</a></li>
<li><p>阿秀 on <a href="http://timyang.net/about/comment-page-2/#comment-223584" target="_blank">About Tim Yang</a></p>
</li>
<li><h3 id="categories">Categories</h3>
</li>
<li><p><a href="http://timyang.net/category/data/" title="View all posts filed under data" target="_blank">data</a></p>
</li>
<li><a href="http://timyang.net/category/erlang/" title="Erlang语言" target="_blank">Erlang</a></li>
<li><a href="http://timyang.net/category/google/" title="View all posts filed under Google" target="_blank">Google</a></li>
<li><a href="http://timyang.net/category/java/" title="View all posts filed under Java" target="_blank">Java</a></li>
<li><a href="http://timyang.net/category/linux/" title="View all posts filed under Linux" target="_blank">Linux</a></li>
<li><a href="http://timyang.net/category/lua/" title="View all posts filed under Lua" target="_blank">Lua</a></li>
<li><a href="http://timyang.net/category/python/" title="View all posts filed under Python" target="_blank">Python</a></li>
<li><a href="http://timyang.net/category/sns/" title="View all posts filed under SNS" target="_blank">SNS</a></li>
<li><a href="http://timyang.net/category/tech/" title="View all posts filed under tech" target="_blank">tech</a></li>
<li><a href="http://timyang.net/category/web/" title="View all posts filed under Web" target="_blank">Web</a></li>
<li><a href="http://timyang.net/category/product/" title="View all posts filed under 产品" target="_blank">产品</a></li>
<li><a href="http://timyang.net/category/distributed/" title="分布式算法及思想" target="_blank">分布式</a></li>
<li><a href="http://timyang.net/category/management/" title="View all posts filed under 技术管理" target="_blank">技术管理</a></li>
<li><a href="http://timyang.net/category/architecture/" title="后端架构" target="_blank">架构</a></li>
<li><a href="http://timyang.net/category/programming/" title="View all posts filed under 编程" target="_blank">编程</a></li>
<li><a href="http://timyang.net/category/tao/" title="View all posts filed under 随想" target="_blank">随想</a></li>
<li><p><a href="http://timyang.net/category/misc/" title="非技术话题" target="_blank">非技术</a></p>
</li>
<li><h3 id="archives">Archives</h3>
</li>
<li><p><a href="http://timyang.net/2012/10/" title="October 2012" target="_blank">October 2012</a> (5)</p>
</li>
<li><a href="http://timyang.net/2012/09/" title="September 2012" target="_blank">September 2012</a> (4)</li>
<li><a href="http://timyang.net/2012/05/" title="May 2012" target="_blank">May 2012</a> (3)</li>
<li><a href="http://timyang.net/2012/02/" title="February 2012" target="_blank">February 2012</a> (3)</li>
<li><a href="http://timyang.net/2012/01/" title="January 2012" target="_blank">January 2012</a> (2)</li>
<li><a href="http://timyang.net/2011/12/" title="December 2011" target="_blank">December 2011</a> (1)</li>
<li><a href="http://timyang.net/2011/08/" title="August 2011" target="_blank">August 2011</a> (1)</li>
<li><a href="http://timyang.net/2011/07/" title="July 2011" target="_blank">July 2011</a> (1)</li>
<li><a href="http://timyang.net/2011/04/" title="April 2011" target="_blank">April 2011</a> (2)</li>
<li><a href="http://timyang.net/2011/02/" title="February 2011" target="_blank">February 2011</a> (1)</li>
<li><a href="http://timyang.net/2011/01/" title="January 2011" target="_blank">January 2011</a> (2)</li>
<li><a href="http://timyang.net/2010/12/" title="December 2010" target="_blank">December 2010</a> (2)</li>
<li><a href="http://timyang.net/2010/11/" title="November 2010" target="_blank">November 2010</a> (2)</li>
<li><a href="http://timyang.net/2010/09/" title="September 2010" target="_blank">September 2010</a> (1)</li>
<li><a href="http://timyang.net/2010/08/" title="August 2010" target="_blank">August 2010</a> (1)</li>
<li><a href="http://timyang.net/2010/07/" title="July 2010" target="_blank">July 2010</a> (3)</li>
<li><a href="http://timyang.net/2010/06/" title="June 2010" target="_blank">June 2010</a> (2)</li>
<li><a href="http://timyang.net/2010/05/" title="May 2010" target="_blank">May 2010</a> (2)</li>
<li><a href="http://timyang.net/2010/04/" title="April 2010" target="_blank">April 2010</a> (1)</li>
<li><a href="http://timyang.net/2010/03/" title="March 2010" target="_blank">March 2010</a> (4)</li>
<li><a href="http://timyang.net/2010/02/" title="February 2010" target="_blank">February 2010</a> (1)</li>
<li><a href="http://timyang.net/2010/01/" title="January 2010" target="_blank">January 2010</a> (1)</li>
<li><a href="http://timyang.net/2009/12/" title="December 2009" target="_blank">December 2009</a> (3)</li>
<li><a href="http://timyang.net/2009/11/" title="November 2009" target="_blank">November 2009</a> (3)</li>
<li><a href="http://timyang.net/2009/10/" title="October 2009" target="_blank">October 2009</a> (3)</li>
<li><a href="http://timyang.net/2009/09/" title="September 2009" target="_blank">September 2009</a> (4)</li>
<li><a href="http://timyang.net/2009/08/" title="August 2009" target="_blank">August 2009</a> (5)</li>
<li><a href="http://timyang.net/2009/07/" title="July 2009" target="_blank">July 2009</a> (6)</li>
<li><a href="http://timyang.net/2009/06/" title="June 2009" target="_blank">June 2009</a> (5)</li>
<li><a href="http://timyang.net/2009/05/" title="May 2009" target="_blank">May 2009</a> (11)</li>
<li><a href="http://timyang.net/2009/04/" title="April 2009" target="_blank">April 2009</a> (7)</li>
<li><a href="http://timyang.net/2009/03/" title="March 2009" target="_blank">March 2009</a> (3)</li>
<li><a href="http://timyang.net/2009/02/" title="February 2009" target="_blank">February 2009</a> (2)</li>
<li><a href="http://timyang.net/2009/01/" title="January 2009" target="_blank">January 2009</a> (2)</li>
<li><a href="http://timyang.net/2008/12/" title="December 2008" target="_blank">December 2008</a> (2)</li>
<li><h3 id="feeds">Feeds</h3>
</li>
<li><p><a href="http://timyang.net/feed/" target="_blank">Entries (RSS)</a></p>
</li>
<li><a href="http://timyang.net/comments/feed/" target="_blank">Comments (RSS)</a>
*</li>
</ul>
<h2 id="-memcachedb-tokyo-tyrant-redis-performance-test-http-timyang-net-data-mcdb-tt-redis-permanent-link-to-memcachedb-tokyo-tyrant-redis-performance-test-"><a href="http://timyang.net/data/mcdb-tt-redis/" title="Permanent Link to MemcacheDB, Tokyo Tyrant, Redis performance test" target="_blank">MemcacheDB, Tokyo Tyrant, Redis performance test</a></h2>
<p>Tuesday, Aug 11th, 2009 by Tim | Tags: <a href="http://timyang.net/tag/english/" target="_blank">English</a>, <a href="http://timyang.net/tag/memcachedb/" target="_blank">memcachedb</a>, <a href="http://timyang.net/tag/redis/" target="_blank">redis</a>, <a href="http://timyang.net/tag/tokyo-cabinet/" target="_blank">tokyo cabinet</a>, <a href="http://timyang.net/tag/tokyo-tyrant/" target="_blank">tokyo tyrant</a></p>
<p>I had tested the following key-value store for set() and get()</p>
<ul>
<li><a href="http://memcachedb.org/" target="_blank">MemcacheDB</a>, use memcached client protocol.</li>
<li><a href="http://tokyocabinet.sourceforge.net/tyrantdoc/" target="_blank">Tokyo Tyrant</a> (<a href="http://tokyocabinet.sourceforge.net/" target="_blank">Tokyo Cabinet</a>), use memcached client protocol</li>
<li><a href="http://code.google.com/p/redis/" target="_blank">Redis</a>, use <a href="http://code.google.com/p/jredis/" target="_blank">JRedis</a> Java client</li>
</ul>
<h2 id="1-test-environment">1. Test environment</h2>
<h3 id="1-1-hardware-os">1.1 Hardware/OS</h3>
<p>2 Linux boxes in a LAN, 1 server and 1 test client
Linux Centos 5.2 64bit
Intel(R) Xeon(R) CPU E5410  @ 2.33GHz (L2 cache: 6M), Quad-Core /* 2
8G memory
SCSI disk (standalone disk, no other access)</p>
<h3 id="1-2-software-version">1.2 Software version</h3>
<p>db-4.7.25.tar.gz
libevent-1.4.11-stable.tar.gz
memcached-1.2.8.tar.gz
memcachedb-1.2.1-beta.tar.gz
redis-0.900_2.tar.gz
tokyocabinet-1.4.9.tar.gz
tokyotyrant-1.1.9.tar.gz</p>
<h3 id="1-3-configuration">1.3 Configuration</h3>
<p><strong>Memcachedb startup parameter</strong>
Test 100 bytes
./memcachedb -H /data5/kvtest/bdb/data -d -p 11212 -m 2048 <strong>-N -L 8192</strong>
(Update: As mentioned by <a href="http://stvchu.org/" target="_blank">Steve</a>, the 100-byte-test missed the -N paramter, so I added it and updated the data)
Test 20k bytes
./memcachedb -H /data5/kvtest/mcdb/data -d -p 11212 -b 21000 -N -m 2048</p>
<p><strong>Tokyo Tyrant (Tokyo Cabinet) configuration</strong>
Use default Tokyo Tyrant sbin/ttservctl
use .tch database, hashtable database</p>
<p>ulimsiz=”256m”
sid=1
dbname=”$basedir/casket.tch/#bnum=50000000″ /# default 1M is not enough!
maxcon=”65536″
retval=0</p>
<p><strong>Redis configuration</strong>
timeout 300
save 900 1
save 300 10
save 60 10000
/# no maxmemory settings</p>
<h3 id="1-4-test-client">1.4 Test client</h3>
<p>Client in Java, JDK1.6.0, 16 threads
Use Memcached client java_memcached-release_2.0.1.jar
<a href="http://code.google.com/p/jredis/" target="_blank">JRedis</a> client for Redis test, another <a href="http://code.google.com/p/jdbc-redis/" target="_blank">JDBC-Redis</a> has poor performance.</p>
<h2 id="2-small-data-size-test-result">2. Small data size test result</h2>
<p>Test 1, 1-5,000,000 as key, 100 bytes string value, do set, then get test, all get test has result.
Request per second(mean)<img src="&quot;key-value-performance-1(Update" alt="key-value-performance-1(Update)">&quot;)
<strong>Store</strong> <strong>Write</strong> <strong>Read</strong> Memcached 55,989 50,974 Memcachedb 25,583 35,260 Tokyo Tyrant 42,988 46,238 Redis 85,765 71,708</p>
<p><strong>Server Load Average</strong></p>
<p><strong>Store</strong> <strong>Write</strong> <strong>Read</strong> Memcached 1.80, 1.53, 0.87 1.17, 1.16, 0.83 MemcacheDB 1.44, 0.93, 0.64 4.35, 1.94, 1.05 Tokyo Tyrant 3.70, 1.71, 1.14 2.98, 1.81, 1.26 Redis 1.06, 0.32, 0.18 1.56, 1.00, 0.54</p>
<h2 id="3-larger-data-size-test-result">3. Larger data size test result</h2>
<p>Test 2, 1-500,000 as key, 20k bytes string value, do set, then get test, all get test has result.
Request per second(mean)
<strong>(Aug 13 Update: fixed a bug on get() that read non-exist key)</strong>
<img src="&quot;key-value-performance-2(update" alt="key-value-performance-2(update)">&quot;)
<strong>Store</strong> <strong>Write</strong> <strong>Read</strong> Memcachedb 357 327 Tokyo Tyrant 3,501 257 Redis 1,542 957</p>
<h2 id="4-some-notes-about-the-test">4. Some notes about the test</h2>
<p>When test Redis server, the memory goes up steadily, consumed all 8G and then use swap(and write speed slow down), after all memory and swap space is used, the client will get exceptions. So use Redis in a productive environment should limit to a small data size. It is another cache solution rather than a persistent storage. <strong>So compare Redis together with MemcacheDB/TC may not fair because Redis actually does not save data to disk during the test</strong>.</p>
<p>Tokyo cabinet and memcachedb are very stable during heavy load, use very little memory in set test and less than physical memory in get test.</p>
<p>MemcacheDB peformance is poor for write large data size(20k).</p>
<p>The call response time was not monitored in this test.</p>
<h3 id="101-comments-http-timyang-net-data-mcdb-tt-redis-postcomment-jump-to-the-comments-form-">101 Comments <a href="http://timyang.net/data/mcdb-tt-redis/#postcomment" title="Jump to the comments form" target="_blank">»</a></h3>
<ol>
<li><img src="" alt=""><a href="http://leechael.org/" target="_blank">Leechael</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1102" target="_blank">Aug 12th 2009 at 04:47</a></p>
<p>这次的测试结果显然更新了，虽然还是不敌，不过这次 TT/TC write 的性能显然提高了。 <img src="" alt=":D"></p>
<ol>
<li><img src="" alt=""><a href="http://anyall.org/" target="_blank">Brendan O&#39;Connor</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1107" target="_blank">Aug 12th 2009 at 11:32</a></p>
<p>very interesting, thanks!</p>
<ol>
<li><img src="" alt=""><a href="http://shellshadow.com/" target="_blank">Jon Hancock</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1115" target="_blank">Aug 13th 2009 at 00:46</a></p>
<p>good info. One thing missing in these types of comparisons is a baseline against an RDB. Adding postgres 8.4 to this comparison might help.</p>
<ol>
<li><img src="" alt=""><a href="http://hypertable.org/" target="_blank">vicaya</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1117" target="_blank">Aug 13th 2009 at 03:28</a></p>
<p>You should really test memcached 1.4.0, which actually can use multi-cores.</p>
<ol>
<li><img src="" alt=""><a href="http://www.dapper.net/" target="_blank">Asaf</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1119" target="_blank">Aug 13th 2009 at 03:51</a></p>
<p>Thanks for the info,
Can you please detail the ratio of read / write operations and the order of the operations?</p>
<p>did you first write all the data than read all the data or was it intermittent?</p>
<ol>
<li><img src="" alt="">Tim says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1132" target="_blank">Aug 13th 2009 at 14:39</a></p>
<p>@asaf
I do read test after finish all writes.</p>
<p>Write test:
key: 1-5,000,000
value: 100-byte-string</p>
<p>After write all, then do read test
client.get(random(5,000,000));</p>
<ol>
<li><img src="" alt=""><a href="http://www.zhuzhaoyuan.com/" target="_blank">Joshua Zhu</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1137" target="_blank">Aug 13th 2009 at 16:51</a></p>
<p>This benchmark is very helpful to me in evaluating those K/V stores. Thanks a lot.</p>
<ol>
<li><img src="" alt=""><a href="http://duguo.com/" target="_blank">Guo Du</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1138" target="_blank">Aug 13th 2009 at 19:31</a></p>
<p>Very interesting result. Any significant cpu usage difference between those stores?</p>
<ol>
<li><img src="" alt="">Joubin says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1148" target="_blank">Aug 14th 2009 at 10:08</a></p>
<p>Hi Tim,</p>
<p>Thanks for the test! Just curious:</p>
<p>1)
Try changing the tcp buffer sizes in class org.jredis.ri.alphazero.connection.ConnectionBase$DefaultConnectionBase. On my mac, the default values are always fairly quite large so perhaps this is something that was missed:</p>
<p>change the tcp rcv and snd buffer size values:</p>
<p>public static final class DefaultConnectionSpec implements ConnectionSpec {</p>
<p>…</p>
<p>//<em>/</em> /<em>/
private static final int DEFAULT_RCV_BUFF_SIZE = 1024 /</em> 48; // &lt;&lt; increased
//<em>/</em> /<em>/
private static final int DEFAULT_SND_BUFF_SIZE = 1024 /</em> 48; // &lt;&lt; increased</p>
<p>…</p>
<p>2) May also try changing the tcp socket prefs (same inner class):</p>
<p>Try this:</p>
<p>public static final class DefaultConnectionSpec implements ConnectionSpec {
…</p>
<p>@Override
public Integer getSocketProperty(SocketProperty property) {
int value = 0;
switch (property){
case SO_PREF_BANDWIDTH:
value = 0; // changed
break;
case SO_PREF_CONN_TIME:
value = 2;
break;
case SO_PREF_LATENCY:
value = 1; // changed
break;
case SO_RCVBUF:
value = DEFAULT_RCV_BUFF_SIZE;
break;
case SO_SNDBUF:
value = DEFAULT_SND_BUFF_SIZE;
break;
case SO_TIMEOUT:
value = DEFAULT_READ_TIMEOUT_MSEC;
break;
}
return value;
}
…
}</p>
<p>I assume you’ve downloaded the full distribution from github. “mvn install” to build and run the test again. Curious to see if it makes any diffs. That fails we’ll try switching to buffered io streams.</p>
<p>/R</p>
<ol>
<li><img src="" alt="">Gabriel says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1157" target="_blank">Aug 15th 2009 at 02:30</a></p>
<p>Can you post the actual model/# for the Xeon CPU along with operating frequency?</p>
<ol>
<li><img src="" alt="">Tim says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1192" target="_blank">Aug 17th 2009 at 16:45</a></p>
<p>@Joubin
I’ve changed DEFAULT_RCV_BUFF_SIZE/DEFAULT_SND_BUFF_SIZE from 48k to 256k, both for small data size and larger data size, but there is not significant improvement. The bottleneck here may not on the client side.</p>
<p>@Gabriel added.</p>
<ol>
<li><img src="" alt="">mongofan says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1219" target="_blank">Aug 19th 2009 at 07:47</a></p>
<p>hi Tim
very nice!</p>
<p>can you add mongodb to the benchmark? I would love to see how it performs against redis</p>
<ol>
<li><img src="" alt="">Joubin says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1283" target="_blank">Aug 23rd 2009 at 22:04</a></p>
<p>Tim,</p>
<p>Thanks. That confirms my owns tests that stressed on just one key to isolate the client overhead.</p>
<p>A cursory look at the TT’s Java client seems to indicate that payloads are gzip’d (which JRedis does not, given that the baseline assumption is that you may be using a variety of clients for your db, in which case client specific optimizations are not viable unless the compression algorithm is shared by all client types.)</p>
<p>I’ll update when I have something to add here, but safe assumption here is that compressing the 20K payload has a significant positive impact on the performance of the TT setup.</p>
<ol>
<li><img src="" alt=""><a href="http://www.caojianghua.com/" target="_blank">arden</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1468" target="_blank">Sep 3rd 2009 at 11:44</a></p>
<p>redis有没有象memcached这样的过期时间设置？</p>
<ol>
<li><img src="" alt="">Jonathan says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1583" target="_blank">Sep 11th 2009 at 04:37</a></p>
<p>I assume this tests write once?</p>
<p>You may see something interesting from Tokyo Tyrant if you test modification in random order. Write performance should drop to match read performance.</p>
<ol>
<li><img src="" alt=""><a href="http://www.exozet.com/" target="_blank">Henry</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-1847" target="_blank">Oct 3rd 2009 at 06:10</a></p>
<p>Thanks for the Test, we will test Redis in one of the next Projects</p>
<ol>
<li><img src="" alt=""><a href="http://oracle.com/" target="_blank">Gregory Burd</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-2189" target="_blank">Nov 19th 2009 at 03:12</a></p>
<p>To match Redis’s durability (“D” in ACID) using Berkeley DB simply set the DB_TXN flags to DB_TXN_NOSYNC. A transaction will be consider “durable” when the data is flushed from the log-buffers in-memory to the operating system’s filesystem buffers rather than waiting for the disk to actually write the data (which is much slower). There are many other configuration parameters that can be tuned, you don’t list them in your description so I can’t say if they were optimal or not (really, “auto-tuning” a database is something that BDB should do for you, but we’re not there yet). If these tests run entirely in cache (can load the entire dataset into memory) then this isn’t a realistic scenario, increase the dataset until the data is 10x the cache size. Also, as someone mentioned you may want to test under a highly concurrent, and highly contentious workload as that will push the locking systems and create very different results. Finally, update to Berkeley DB 4.8. In 4.8 we’ve dramatically improved our locking subsystem for modern multi-core CPU architectures.</p>
<p>Benchmarks are always tricky. <img src="" alt=":-)"> Apples-to-apples tests are rare because they are hard to design and harder to run. There is almost always some degree of bias or some overlooked element. It’s unavoidable. That said, benchmarks do serve a purpose so thank you for doing the tests. We hope that you do more. We’re always looking for ways to improve performance.</p>
<p>-greg</p>
<p>Berkeley DB Product Manager, Oracle Corp</p>
<ol>
<li><img src="" alt="">Tim says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-2191" target="_blank">Nov 20th 2009 at 11:16</a></p>
<p>Greg, already enable DB_TXN_NOSYNC by add -N to memcachedb in this test.
Will evaluated bdb 4.8</p>
<ol>
<li><img src="" alt="">Tim says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-2201" target="_blank">Nov 25th 2009 at 09:47</a></p>
<p>Greg, tested bdb 4.8, there is significant improvent. Great!
but after I compare with TC(tokyocabinet-1.4.39.tar.gz) and TT(tokyotyrant-1.1.37.tar.gz) new version, they also had improvement, so the result doesn’t changed much.</p>
<p>FYI, I’ve tested read/write 100 byte with 50 threads, the request per second result are,
Tokyo Tyrant(Tokyo Cabinet) Write 54,189, Read 73,384
Memcachedb(Berkekey DB 4.8) Write 32,985 Read 59,178
Memcached Write 103,242, Read 106,102</p>
<p>Because the new test donen’t change the situation, the test in blog post still make sense.</p>
<ol>
<li><img src="" alt="">eric says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-2517" target="_blank">Jan 6th 2010 at 13:45</a></p>
<p>感觉还是不错。</p>
<ol>
<li><img src="" alt=""><a href="http://focusheart.cn/" target="_blank">focusheart</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-3268" target="_blank">Feb 26th 2010 at 10:25</a></p>
<p>Redis应用在一个多层的存储结构中用来处理经常发生变化的数据部分很合适，存储结构的层次不同，适用不同的解决方案。</p>
<ol>
<li><img src="" alt="">faryang says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-4388" target="_blank">Jul 2nd 2010 at 00:15</a></p>
<p>对我来说，REDIS是亮点，相见恨晚啊：）</p>
<ol>
<li><img src="" alt="">jtong11 says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-16562" target="_blank">Mar 17th 2011 at 16:36</a></p>
<p>事实上，对于500万的小数据量而言，所有写入数据都有可能被文件系统buffer住，这时再进行查询操作，显然都是直接命中。所以真正有效的测试应该是写入超过内存2倍以上的数据，然后查询最先写入的那些数据。</p>
<ol>
<li><img src="" alt="">Louis says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-147890" target="_blank">Mar 23rd 2012 at 17:20</a></p>
<p>I am a newer for Redis.Can I just ask a primary question?How did you get the value of Request per second?</p>
<ol>
<li><img src="" alt="">hunter says:</li>
</ol>
<p><a href="http://timyang.net/data/mcdb-tt-redis/comment-page-1/#comment-212945" target="_blank">Oct 11th 2012 at 20:42</a></p>
<p>我们测试data &gt; 100k时，性能会急剧下降(100次/s)，不知道是不是我们的测试配置有问题，你能否帮忙测试一下？</p>
<p><a href="http://timyang.net/data/mcdb-tt-redis/feed/" target="_blank">RSS feed for comments on this post</a>, <a href="http://timyang.net/data/mcdb-tt-redis/trackback/" target="_blank">TrackBack URI</a>
<a href="http://timyang.net/data/mcdb-tt-redis/#respond" target="_blank">Cancel Reply</a></p>
<h3 id="leave-a-comment">Leave a Comment</h3>
<p>Name (required)</p>
<p>E-mail (required, never displayed)</p>
<p>URI</p>
<p>Except where otherwise noted, content on this site is licensed under a <a href="http://creativecommons.org/licenses/by/3.0/" target="_blank">Creative Commons Attribution 3.0</a> License</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/架构师/">架构师</a></li></span></span> | <span class="tags">Tagged <a href="/tags/架构师/" class="label label-primary">架构师</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:28"datetime="2014-03-07 09:54:28"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-架构师--MemcacheDB-TokyoTyrant-Redisperformancetest–/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-架构师--MemcacheDB-TokyoTyrant-Redisperformancetest–" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>



  <article>
<div id="post" class="post well">
  <div class="post-content">
    <header class="well-sm">
      <i class="fa icon fa-5x pull-left"></i>
      <h1 class="title"><a href="/2014/02/02/2014-02-02-架构师--Redis几个认识误区–Tim后端技术/">Redis几个认识误区 – Tim[后端技术]</a></h1>
      
        <span>Posted on<time datetime="2014-02-02T01:54:28.000Z"> <a href="/2014/02/02/2014-02-02-架构师--Redis几个认识误区–Tim后端技术/">feb. 2 2014</a></time></span>      
    </header>
    
    
    <div class="entry">
      
        <h1 id="redis-tim-">Redis几个认识误区 – Tim[后端技术]</h1>
<h1 id="-tim-http-timyang-net-home-"><a href="http://timyang.net/" title="Home" target="_blank">Tim[后端技术]</a></h1>
<p>Tim&#39;s blog, 关于后端架构、互联网技术、分布式、大型网络应用、NoSQL、技术感悟等</p>
<p><a href="http://timyang.net/" target="_blank">Home</a> | <a href="http://timyang.net/about/" target="_blank">About</a> | <a href="http://timyang.net/tag/English/" target="_blank">English version</a> | <a href="http://timyang.net/about/#comment" target="_blank">留言(Guestbook)</a> | <a href="http://timyang.net/feed/" target="_blank"><img src="" alt=""></a><a href="http://timyang.net/feed/" target="_blank">订阅RSS</a> <a href="http://fusion.google.com/add?source=atgs&amp;feedurl=http%3A//timyang.net/feed/" target="_blank"><img src="" alt="Add to Google"></a></p>
<ol>
<li></li>
</ol>
<ul>
<li><p>Email: <img src="" alt=""></p>
</li>
<li><h3 id="similar-posts">Similar Posts</h3>
</li>
<li><p><a href="http://timyang.net/architecture/notes-timelines-twitter/" title="May 3, 2012" target="_blank">Notes about Timelines @ Twitter</a></p>
</li>
<li><a href="http://timyang.net/data/redis-diskstore/" title="January 6, 2011" target="_blank">Redis新的存储模式diskstore</a></li>
<li><a href="http://timyang.net/data/redis-capacity/" title="January 5, 2011" target="_blank">Redis容量及使用规划</a></li>
<li><a href="http://timyang.net/data/mcdb-tt-redis/" title="August 11, 2009" target="_blank">MemcacheDB, Tokyo Tyrant, Redis performance test</a></li>
<li><p><a href="http://timyang.net/programming/linux-synchronization-lock/" title="May 10, 2009" target="_blank">了解Linux的锁与同步</a></p>
</li>
<li><h3 id="most-commented">Most Commented</h3>
</li>
<li><p><a href="http://timyang.net/data/mcdb-tt-redis/" title="MemcacheDB, Tokyo Tyrant, Redis performance test" target="_blank">MemcacheDB, Tokyo Tyrant, Redis performance test</a> (101)</p>
</li>
<li><a href="http://timyang.net/programming/c-erlang-java-performance/" title="C, Erlang, Java and Go Web Server performance test" target="_blank">C, Erlang, Java and Go Web Server performance test</a> (85)</li>
<li><a href="http://timyang.net/about/" title="About Tim Yang" target="_blank">About Tim Yang</a> (83)</li>
<li><a href="http://timyang.net/data/redis-misunderstanding/" title="Redis几个认识误区" target="_blank">Redis几个认识误区</a> (62)</li>
<li><a href="http://timyang.net/programming/memcache-mutex/" title="Memcache mutex设计模式" target="_blank">Memcache mutex设计模式</a> (47)</li>
<li><a href="http://timyang.net/architecture/microblog-design-qcon-beijing/" title="构建可扩展的微博架构(qcon beijing 2010演讲)" target="_blank">构建可扩展的微博架构(qcon beijing 2010演讲)</a> (39)</li>
<li><a href="http://timyang.net/architecture/consistent-hashing-practice/" title="某分布式应用实践一致性哈希的一些问题" target="_blank">某分布式应用实践一致性哈希的一些问题</a> (38)</li>
<li><a href="http://timyang.net/google/open-source/" title="为什么优秀开发者进入Google后就不参与开源了" target="_blank">为什么优秀开发者进入Google后就不参与开源了</a> (33)</li>
<li><a href="http://timyang.net/misc/macbook-air-productive/" title="MacBook Air与工作效率" target="_blank">MacBook Air与工作效率</a> (32)</li>
<li><p><a href="http://timyang.net/data/memcached-lru-evictions/" title="Memcached数据被踢(evictions&gt;0)现象分析" target="_blank">Memcached数据被踢(evictions&gt;0)现象分析</a> (30)</p>
</li>
<li><h3 id="recent-posts">Recent Posts</h3>
</li>
<li><p><a href="http://timyang.net/tao/speech-practice/" title="演讲小组的第一次活动" target="_blank">演讲小组的第一次活动</a></p>
</li>
<li><a href="http://timyang.net/tao/connect-the-dots/" title="“connect the dots” 随想" target="_blank">“connect the dots” 随想</a></li>
<li><a href="http://timyang.net/tao/talents/" title="跨领域人才" target="_blank">跨领域人才</a></li>
<li><a href="http://timyang.net/product/discontinued-servic/" title="产品下线杂谈" target="_blank">产品下线杂谈</a></li>
<li><a href="http://timyang.net/misc/speech/" title="当我谈演讲时候，我谈些什么" target="_blank">当我谈演讲时候，我谈些什么</a></li>
<li><a href="http://timyang.net/architecture/k/" title="案例与故障的知识库" target="_blank">案例与故障的知识库</a></li>
<li><a href="http://timyang.net/management/learning-tao/" title="团队中的为师之道" target="_blank">团队中的为师之道</a></li>
<li><a href="http://timyang.net/google/hybrid-research/" title="有感Google的混合研究方法" target="_blank">有感Google的混合研究方法</a></li>
<li><a href="http://timyang.net/management/probation/" title="谈技术人员“转正”" target="_blank">谈技术人员“转正”</a></li>
<li><a href="http://timyang.net/architecture/notes-weixin/" title="微信架构的启示" target="_blank">微信架构的启示</a></li>
<li><a href="http://timyang.net/misc/macbook-air-productive/" title="MacBook Air与工作效率" target="_blank">MacBook Air与工作效率</a></li>
<li><a href="http://timyang.net/architecture/notes-timelines-twitter/" title="Notes about Timelines @ Twitter" target="_blank">Notes about Timelines @ Twitter</a></li>
<li><a href="http://timyang.net/management/engineer-performance/" title="技术工程师的能力与目标" target="_blank">技术工程师的能力与目标</a></li>
<li><a href="http://timyang.net/management/design-review/" title="技术方案评审" target="_blank">技术方案评审</a></li>
<li><p><a href="http://timyang.net/management/planning/" title="谈技术团队目标" target="_blank">谈技术团队目标</a></p>
</li>
<li><h3 id="recent-comments">Recent Comments</h3>
</li>
<li><p><a href="http://emake.info/the-redis-several-misunderstandings.html" target="_blank">Redis几个认识误区 | 创造</a> on <a href="http://timyang.net/data/redis-misunderstanding/comment-page-2/#comment-224409" target="_blank">Redis几个认识误区</a></p>
</li>
<li><a href="http://emake.info/the-redis-several-misunderstandings.html" target="_blank">Redis几个认识误区 | 创造</a> on <a href="http://timyang.net/data/mcdb-tt-redis/comment-page-3/#comment-224408" target="_blank">MemcacheDB, Tokyo Tyrant, Redis performance test</a></li>
<li><a href="http://outofmemory.cn/" target="_blank">甄码农</a> on <a href="http://timyang.net/management/learning-tao/comment-page-1/#comment-224161" target="_blank">团队中的为师之道</a></li>
<li><a href="http://outofmemory.cn/" target="_blank">甄码农</a> on <a href="http://timyang.net/tao/talents/comment-page-1/#comment-224158" target="_blank">跨领域人才</a></li>
<li><p>阿秀 on <a href="http://timyang.net/about/comment-page-2/#comment-223584" target="_blank">About Tim Yang</a></p>
</li>
<li><h3 id="categories">Categories</h3>
</li>
<li><p><a href="http://timyang.net/category/data/" title="View all posts filed under data" target="_blank">data</a></p>
</li>
<li><a href="http://timyang.net/category/erlang/" title="Erlang语言" target="_blank">Erlang</a></li>
<li><a href="http://timyang.net/category/google/" title="View all posts filed under Google" target="_blank">Google</a></li>
<li><a href="http://timyang.net/category/java/" title="View all posts filed under Java" target="_blank">Java</a></li>
<li><a href="http://timyang.net/category/linux/" title="View all posts filed under Linux" target="_blank">Linux</a></li>
<li><a href="http://timyang.net/category/lua/" title="View all posts filed under Lua" target="_blank">Lua</a></li>
<li><a href="http://timyang.net/category/python/" title="View all posts filed under Python" target="_blank">Python</a></li>
<li><a href="http://timyang.net/category/sns/" title="View all posts filed under SNS" target="_blank">SNS</a></li>
<li><a href="http://timyang.net/category/tech/" title="View all posts filed under tech" target="_blank">tech</a></li>
<li><a href="http://timyang.net/category/web/" title="View all posts filed under Web" target="_blank">Web</a></li>
<li><a href="http://timyang.net/category/product/" title="View all posts filed under 产品" target="_blank">产品</a></li>
<li><a href="http://timyang.net/category/distributed/" title="分布式算法及思想" target="_blank">分布式</a></li>
<li><a href="http://timyang.net/category/management/" title="View all posts filed under 技术管理" target="_blank">技术管理</a></li>
<li><a href="http://timyang.net/category/architecture/" title="后端架构" target="_blank">架构</a></li>
<li><a href="http://timyang.net/category/programming/" title="View all posts filed under 编程" target="_blank">编程</a></li>
<li><a href="http://timyang.net/category/tao/" title="View all posts filed under 随想" target="_blank">随想</a></li>
<li><p><a href="http://timyang.net/category/misc/" title="非技术话题" target="_blank">非技术</a></p>
</li>
<li><h3 id="archives">Archives</h3>
</li>
<li><p><a href="http://timyang.net/2012/10/" title="October 2012" target="_blank">October 2012</a> (5)</p>
</li>
<li><a href="http://timyang.net/2012/09/" title="September 2012" target="_blank">September 2012</a> (4)</li>
<li><a href="http://timyang.net/2012/05/" title="May 2012" target="_blank">May 2012</a> (3)</li>
<li><a href="http://timyang.net/2012/02/" title="February 2012" target="_blank">February 2012</a> (3)</li>
<li><a href="http://timyang.net/2012/01/" title="January 2012" target="_blank">January 2012</a> (2)</li>
<li><a href="http://timyang.net/2011/12/" title="December 2011" target="_blank">December 2011</a> (1)</li>
<li><a href="http://timyang.net/2011/08/" title="August 2011" target="_blank">August 2011</a> (1)</li>
<li><a href="http://timyang.net/2011/07/" title="July 2011" target="_blank">July 2011</a> (1)</li>
<li><a href="http://timyang.net/2011/04/" title="April 2011" target="_blank">April 2011</a> (2)</li>
<li><a href="http://timyang.net/2011/02/" title="February 2011" target="_blank">February 2011</a> (1)</li>
<li><a href="http://timyang.net/2011/01/" title="January 2011" target="_blank">January 2011</a> (2)</li>
<li><a href="http://timyang.net/2010/12/" title="December 2010" target="_blank">December 2010</a> (2)</li>
<li><a href="http://timyang.net/2010/11/" title="November 2010" target="_blank">November 2010</a> (2)</li>
<li><a href="http://timyang.net/2010/09/" title="September 2010" target="_blank">September 2010</a> (1)</li>
<li><a href="http://timyang.net/2010/08/" title="August 2010" target="_blank">August 2010</a> (1)</li>
<li><a href="http://timyang.net/2010/07/" title="July 2010" target="_blank">July 2010</a> (3)</li>
<li><a href="http://timyang.net/2010/06/" title="June 2010" target="_blank">June 2010</a> (2)</li>
<li><a href="http://timyang.net/2010/05/" title="May 2010" target="_blank">May 2010</a> (2)</li>
<li><a href="http://timyang.net/2010/04/" title="April 2010" target="_blank">April 2010</a> (1)</li>
<li><a href="http://timyang.net/2010/03/" title="March 2010" target="_blank">March 2010</a> (4)</li>
<li><a href="http://timyang.net/2010/02/" title="February 2010" target="_blank">February 2010</a> (1)</li>
<li><a href="http://timyang.net/2010/01/" title="January 2010" target="_blank">January 2010</a> (1)</li>
<li><a href="http://timyang.net/2009/12/" title="December 2009" target="_blank">December 2009</a> (3)</li>
<li><a href="http://timyang.net/2009/11/" title="November 2009" target="_blank">November 2009</a> (3)</li>
<li><a href="http://timyang.net/2009/10/" title="October 2009" target="_blank">October 2009</a> (3)</li>
<li><a href="http://timyang.net/2009/09/" title="September 2009" target="_blank">September 2009</a> (4)</li>
<li><a href="http://timyang.net/2009/08/" title="August 2009" target="_blank">August 2009</a> (5)</li>
<li><a href="http://timyang.net/2009/07/" title="July 2009" target="_blank">July 2009</a> (6)</li>
<li><a href="http://timyang.net/2009/06/" title="June 2009" target="_blank">June 2009</a> (5)</li>
<li><a href="http://timyang.net/2009/05/" title="May 2009" target="_blank">May 2009</a> (11)</li>
<li><a href="http://timyang.net/2009/04/" title="April 2009" target="_blank">April 2009</a> (7)</li>
<li><a href="http://timyang.net/2009/03/" title="March 2009" target="_blank">March 2009</a> (3)</li>
<li><a href="http://timyang.net/2009/02/" title="February 2009" target="_blank">February 2009</a> (2)</li>
<li><a href="http://timyang.net/2009/01/" title="January 2009" target="_blank">January 2009</a> (2)</li>
<li><a href="http://timyang.net/2008/12/" title="December 2008" target="_blank">December 2008</a> (2)</li>
<li><h3 id="feeds">Feeds</h3>
</li>
<li><p><a href="http://timyang.net/feed/" target="_blank">Entries (RSS)</a></p>
</li>
<li><a href="http://timyang.net/comments/feed/" target="_blank">Comments (RSS)</a>
*</li>
</ul>
<h2 id="-redis-http-timyang-net-data-redis-misunderstanding-permanent-link-to-redis-"><a href="http://timyang.net/data/redis-misunderstanding/" title="Permanent Link to Redis几个认识误区" target="_blank">Redis几个认识误区</a></h2>
<p>Saturday, Dec 4th, 2010 by Tim | Tags: <a href="http://timyang.net/tag/key-value-store/" target="_blank">key value store</a>, <a href="http://timyang.net/tag/redis/" target="_blank">redis</a></p>
<p>前几天微博发生了一起大的<a href="http://tech.sina.com.cn/i/2010-12-01/15324930344.shtml" target="_blank">系统故障</a>，很多技术的朋友都比较关心，其中的原因不会超出James Hamilton在On Designing and Deploying Internet-Scale Service(1)概括的那几个范围，James第一条经验“Design for failure”是所有互联网架构成功的一个关键。互联网系统的工程理论其实非常简单，James paper中内容几乎称不上理论，而是多条实践经验分享，每个公司对这些经验的理解及执行力决定了架构成败。</p>
<p>题外话说完，最近又研究了<a href="http://code.google.com/p/redis/" target="_blank">Redis</a>。去年曾做过一个<a href="http://timyang.net/data/mcdb-tt-redis/" target="_blank">MemcacheDB, Tokyo Tyrant, Redis performance test</a>，到目前为止，这个benchmark结果依然有效。这1年我们经历了很多眼花缭乱的key value存储产品的诱惑，从Cassandra的淡出(Twitter暂停在主业务使用)到HBase的兴起(Facebook新的邮箱业务选用HBase(2))，当再回头再去看Redis，发现这个只有1万多行源代码的程序充满了神奇及大量未经挖掘的特性。Redis性能惊人，国内前十大网站的子产品估计用1台Redis就可以满足存储及Cache的需求。除了性能印象之外，业界其实普遍对Redis的认识存在一定误区。本文提出一些观点供大家探讨。</p>
<h3 id="1-redis-">1. Redis是什么</h3>
<p>这个问题的结果影响了我们怎么用Redis。如果你认为Redis是一个key value store, 那可能会用它来代替MySQL；如果认为它是一个可以持久化的cache, 可能只是它保存一些频繁访问的临时数据。Redis是REmote DIctionary Server的缩写，在Redis在官方网站的的副标题是A persistent key-value database with built-in net interface written in ANSI-C for Posix systems，这个定义偏向key value store。还有一些看法则认为Redis是一个memory database，因为它的高性能都是基于内存操作的基础。另外一些人则认为Redis是一个data structure server，因为Redis支持复杂的数据特性，比如List, Set等。对Redis的作用的不同解读决定了你对Redis的使用方式。</p>
<p>互联网数据目前基本使用两种方式来存储，关系数据库或者key value。但是这些互联网业务本身并不属于这两种数据类型，比如用户在社会化平台中的关系，它是一个list，如果要用关系数据库存储就需要转换成一种多行记录的形式，这种形式存在很多冗余数据，每一行需要存储一些重复信息。如果用key value存储则修改和删除比较麻烦，需要将全部数据读出再写入。Redis在内存中设计了各种数据类型，让业务能够高速原子的访问这些数据结构，并且不需要关心持久存储的问题，从架构上解决了前面两种存储需要走一些弯路的问题。</p>
<h3 id="2-redis-memcache-">2. Redis不可能比Memcache快</h3>
<p>很多开发者都认为Redis不可能比Memcached快，Memcached完全基于内存，而Redis具有持久化保存特性，即使是异步的，Redis也不可能比Memcached快。但是测试结果基本是Redis占绝对优势。一直在思考这个原因，目前想到的原因有这几方面。</p>
<ul>
<li><a href="http://monkey.org/~provos/libevent/" target="_blank">Libevent</a>。和Memcached不同，Redis并没有选择libevent。Libevent为了迎合通用性造成代码庞大(目前Redis代码还不到libevent的1/3)及牺牲了在特定平台的不少性能。Redis用libevent中两个文件修改实现了自己的epoll event loop(4)。业界不少开发者也建议Redis使用另外一个libevent高性能替代libev，但是作者还是坚持Redis应该小巧并去依赖的思路。一个印象深刻的细节是编译Redis之前并不需要执行./configure。</li>
<li>CAS问题。CAS是Memcached中比较方便的一种防止竞争修改资源的方法。CAS实现需要为每个cache key设置一个隐藏的cas token，cas相当value版本号，每次set会token需要递增，因此带来CPU和内存的双重开销，虽然这些开销很小，但是到单机10G+ cache以及QPS上万之后这些开销就会给双方相对带来一些细微性能差别(5)。</li>
</ul>
<h3 id="3-redis-">3. 单台Redis的存放数据必须比物理内存小</h3>
<p>Redis的数据全部放在内存带来了高速的性能，但是也带来一些不合理之处。比如一个中型网站有100万注册用户，如果这些资料要用Redis来存储，内存的容量必须能够容纳这100万用户。但是业务实际情况是100万用户只有5万活跃用户，1周来访问过1次的也只有15万用户，因此全部100万用户的数据都放在内存有不合理之处，RAM需要为冷数据买单。</p>
<p>这跟操作系统非常相似，操作系统所有应用访问的数据都在内存，但是如果物理内存容纳不下新的数据，操作系统会智能将部分长期没有访问的数据交换到磁盘，为新的应用留出空间。现代操作系统给应用提供的并不是物理内存，而是虚拟内存(Virtual Memory)的概念。</p>
<p>基于相同的考虑，Redis 2.0也增加了VM特性。让Redis数据容量突破了物理内存的限制。并实现了数据冷热分离。</p>
<h3 id="4-redis-vm-">4. Redis的VM实现是重复造轮子</h3>
<p>Redis的VM依照之前的epoll实现思路依旧是自己实现。但是在前面操作系统的介绍提到OS也可以自动帮程序实现冷热数据分离，Redis只需要OS申请一块大内存，OS会自动将热数据放入物理内存，冷数据交换到硬盘，另外一个知名的“理解了现代操作系统(3)”的Varnish就是这样实现，也取得了非常成功的效果。</p>
<p>作者antirez在解释为什么要自己实现VM中提到几个原因(6)。主要OS的VM换入换出是基于Page概念，比如OS VM1个Page是4K, 4K中只要还有一个元素即使只有1个字节被访问，这个页也不会被SWAP, 换入也同样道理，读到一个字节可能会换入4K无用的内存。而Redis自己实现则可以达到控制换入的粒度。另外访问操作系统SWAP内存区域时block进程，也是导致Redis要自己实现VM原因之一。</p>
<h3 id="5-get-set-redis">5. 用get/set方式使用Redis</h3>
<p>作为一个key value存在，很多开发者自然的使用set/get方式来使用Redis，实际上这并不是最优化的使用方法。尤其在未启用VM情况下，Redis全部数据需要放入内存，节约内存尤其重要。</p>
<p>假如一个key-value单元需要最小占用512字节，即使只存一个字节也占了512字节。这时候就有一个设计模式，可以把key复用，几个key-value放入一个key中，value再作为一个set存入，这样同样512字节就会存放10-100倍的容量。</p>
<p>这就是为了节约内存，建议使用hashset而不是set/get的方式来使用Redis，详细方法见参考文献(7)。</p>
<h3 id="6-aof-snapshot">6. 使用aof代替snapshot</h3>
<p>Redis有两种存储方式，默认是snapshot方式，实现方法是定时将内存的快照(snapshot)持久化到硬盘，这种方法缺点是持久化之后如果出现crash则会丢失一段数据。因此在完美主义者的推动下作者增加了aof方式。aof即append only mode，在写入内存数据的同时将操作命令保存到日志文件，在一个并发更改上万的系统中，命令日志是一个非常庞大的数据，管理维护成本非常高，恢复重建时间会非常长，这样导致失去aof高可用性本意。另外更重要的是Redis是一个内存数据结构模型，所有的优势都是建立在对内存复杂数据结构高效的原子操作上，这样就看出aof是一个非常不协调的部分。</p>
<p>其实aof目的主要是数据可靠性及高可用性，在Redis中有另外一种方法来达到目的：Replication。由于Redis的高性能，复制基本没有延迟。这样达到了防止单点故障及实现了高可用。</p>
<h3 id="-">小结</h3>
<p>要想成功使用一种产品，我们需要深入了解它的特性。Redis性能突出，如果能够熟练的驾驭，对国内很多大型应用具有很大帮助。希望更多同行加入到Redis使用及代码研究行列。</p>
<h3 id="-">参考文献</h3>
<ol>
<li><a href="http://www.mvdirona.com/jrh/talksAndPapers/JamesRH_Lisa.pdf" target="_blank">On Designing and Deploying Internet-Scale Service(PDF)</a></li>
<li><a href="http://highscalability.com/blog/2010/11/16/facebooks-new-real-time-messaging-system-hbase-to-store-135.html" target="_blank">Facebook’s New Real-Time Messaging System: HBase To Store 135+ Billion Messages A Month</a></li>
<li><a href="http://www.varnish-cache.org/trac/wiki/ArchitectNotes" target="_blank">What’s wrong with 1975 programming</a></li>
<li><a href="http://groups.google.com/group/redis-db/browse_thread/thread/b52814e9ef15b8d0/b9de497c6a73614f" target="_blank">Linux epoll is now supported</a>(Google Groups)</li>
<li><a href="http://groups.google.com/group/redis-db/browse_thread/thread/6b8ccada4d4b79fa" target="_blank">CAS and why I don’t want to add it to Redis</a>(Google Groups)</li>
<li><a href="http://groups.google.com/group/redis-db/browse_thread/thread/f1c641c07cc0346c" target="_blank">Plans for Virtual Memory</a>(Google Groups)</li>
<li><a href="http://antirez.com/post/redis-weekly-update-7.html" target="_blank">Full of keys</a>(Salvatore antirez Sanfilippo)</li>
</ol>
<p>-EOF-
上一篇博文<a href="http://timyang.net/architecture/method/" target="_blank">多IDC数据时序问题及方法论</a>在新浪微博上面有更多讨论及留言，有兴趣可以去围观。<a href="http://t.sina.com.cn/10503/zF0tex7z7b" target="_blank"><a href="http://t.sina.com.cn/10503/zF0tex7z7b">http://t.sina.com.cn/10503/zF0tex7z7b</a></a>(需登录)</p>
<h3 id="62-comments-http-timyang-net-data-redis-misunderstanding-postcomment-jump-to-the-comments-form-">62 Comments <a href="http://timyang.net/data/redis-misunderstanding/#postcomment" title="Jump to the comments form" target="_blank">»</a></h3>
<ol>
<li><img src="" alt="">Eguo Wang says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6135" target="_blank">Dec 4th 2010 at 03:09</a></p>
<p>我之前项目选用的是mongodb，相对于常规kv数据库提供了更多实用的查询操作。我有一个问题想请教你：redis中高效的条件搜索如何做呢？难道真的要自己解数据后构建吗？或使用附加的搜索引擎？</p>
<ol>
<li><img src="" alt="">Eguo Wang says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6137" target="_blank">Dec 4th 2010 at 03:25</a></p>
<p>看到wiki中有几个指令大概是做搜索操作。</p>
<ol>
<li><img src="" alt="">kula says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6145" target="_blank">Dec 4th 2010 at 09:25</a></p>
<p>redis的vm模式在实践中存在一些问题.</p>
<p>我使用过redis2.0.2, 发现当vm模式打开的时候, 并发连接数在1500以上时, redis latency会大大增加.平均每个请求的latency会超过4000ms, 观察redis的进程cpu占用率, 会超过100%. 最后迫于无奈,关掉了redis的vm功能. 此时并发连接不变的情况下,redis的latency下降到2ms以下. cpu占用率下降到1%.</p>
<p>没有深入研究过这个症状,但初步怀疑是redis的vm实现有点不靠谱.</p>
<ol>
<li><img src="" alt="">kula says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6146" target="_blank">Dec 4th 2010 at 09:26</a></p>
<p>redis的vm模式在实践中存在一些问题.
我使用过redis2.0.2, 发现当vm模式打开的时候, 并发连接数在1500以上时, redis latency会大大增加.平均每个请求的latency会超过4000ms, 观察redis的进程cpu占用率, 会超过100%. 最后迫于无奈,关掉了redis的vm功能. 此时并发连接不变的情况下,redis的latency下降到2ms以下. cpu占用率下降到1%.
没有深入研究过这个症状,但初步怀疑是redis的vm实现有点不靠谱.</p>
<ol>
<li><img src="" alt=""><a href="http://kasicass.blog.163.com/" target="_blank">kasicass</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6147" target="_blank">Dec 4th 2010 at 10:09</a></p>
<p>是不是笔误，呵呵。</p>
<p>“没一行需要存储一些重复信息” ==&gt; “每一行需要存储一些重复信息”</p>
<ol>
<li><img src="" alt="">empyreaner says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6149" target="_blank">Dec 4th 2010 at 12:07</a></p>
<p>@Eguo Wang
redis的搜索都需要自己做索引。使用keys指令做搜索消耗比较大，不能作为常用指令。</p>
<ol>
<li><img src="" alt=""><a href="http://www.yiihsia.com/" target="_blank">yiihsia</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6157" target="_blank">Dec 4th 2010 at 17:19</a></p>
<p>VM还是不好用，频繁访问老会报错，
hashset更适合像cache这样一对一的存储，批量get的方法只能针对一个具体的hash值</p>
<ol>
<li><img src="" alt="">fzuslide says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6169" target="_blank">Dec 5th 2010 at 00:36</a></p>
<p>Redis在写snapshot的时候CPU使用率很高，数据库本身很大的情况下，回写磁盘过程持续的时间会比较久。这种情况下AOF开销相对较小，然后定时的BGrewriteAOF来减小aof大小，replication还是必须要做的。</p>
<ol>
<li><img src="" alt="">davies says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6198" target="_blank">Dec 6th 2010 at 17:35</a></p>
<p>Redis 并不是神奇, 它有点像个拥有十八般武艺的四不像, 想要解决所有问题, 却没有完全好地解决掉任何一个问题.</p>
<ol>
<li><img src="" alt="">Hanson Lu says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6238" target="_blank">Dec 10th 2010 at 09:17</a></p>
<p>以后有个开源哦项目Prevayler，也是使用snapshot + 日志的方式实现持久化，也是挺不错的，不过由于开启了fsync操作，导致效率很低，不知redis是否使用了fsync</p>
<ol>
<li><img src="" alt="">Bob says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6291" target="_blank">Dec 13th 2010 at 10:01</a></p>
<p>最近也在关注这方面的资料，有在InfoQ上看到天涯团队的一篇文章：
<a href="http://www.infoq.com/cn/news/2010/11/tianya-memlink" target="_blank"><a href="http://www.infoq.com/cn/news/2010/11/tianya-memlink">http://www.infoq.com/cn/news/2010/11/tianya-memlink</a></a></p>
<p>里面提到了2点，</p>
<ol>
<li>Redis的复制机制不完善，失步之后要重新同步所有数据。</li>
<li>Redis的操作时单线程的，没有办法利用多核的优势。</li>
</ol>
<p>不知Tim怎么看这两个问题？对实际应用的影响大吗？</p>
<ol>
<li><img src="" alt="">Tim says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6292" target="_blank">Dec 13th 2010 at 10:29</a></p>
<p>@bob</p>
<ol>
<li>可以架两级slave解决</li>
<li>通过单服务器多端口刚好发挥这种优势，我上次微博公开演讲也介绍过。</li>
<li><img src="" alt="">test says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-6293" target="_blank">Dec 13th 2010 at 10:30</a></p>
<p>我觉得你的很多想法都非常奇怪。</p>
<ol>
<li><img src="" alt=""><a href="http://www.zhangpeng.me/" target="_blank">kefeng</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-7628" target="_blank">Jan 26th 2011 at 09:41</a></p>
<p>支持作者的观点，深有体会。</p>
<ol>
<li><img src="" alt=""><a href="http://redcreen.com/" target="_blank">chao.liu</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-12782" target="_blank">Feb 25th 2011 at 17:27</a></p>
<p>用get/set方式使用Redis：
最好不要在redis client上封装get set的方式使用hash的方式，否则sort操作的时候可能会有问题。</p>
<ol>
<li><img src="" alt=""><a href="http://redcreen.com/" target="_blank">chao.liu</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-12794" target="_blank">Feb 25th 2011 at 19:54</a></p>
<p>补充：
sort支持根据hashs filed进行排序 例如：
SORT mylist BY weight<em>/*-&gt;fieldname GET object</em>/*-&gt;fieldname
如果client上封装了set方法使其使用hashes的方式存储以节省内存，此时hashes的key是根据一定的算法确定的，假如是sha1，那么set方法的key会分布到不同的hashes的key中，此时如果做排序会导致 需要遍历hashes。</p>
<ol>
<li><img src="" alt=""><a href="http://redcreen.com/" target="_blank">chao.liu</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-12802" target="_blank">Feb 25th 2011 at 20:33</a></p>
<p>接上：
在启用vm的情况下 如果按照参文献7中所说 ，通过sha1算法将key value放入到不同的hashes中，这时会出现一个问题：vm的换出是根据age/*log asize 来选出最适合的key，将对应的value放入swap中，由于hashes的key是通过算法算出来的，有可能导致部分的冷filed因为与hot fileld使用同一个key 而无法被交换出去。内存开销是小了，但可能无法换出了。</p>
<ol>
<li><img src="" alt="">domiguo says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-25818" target="_blank">Apr 29th 2011 at 15:47</a></p>
<p>我们也打算使用redis，但是对他的persistence有一些担心，
请问你们使用redis的方法后端还有其它设备的备份吗，比如Mysql之类的，还是完全靠redis本身的persistence加上一些业务级别的保证？</p>
<ol>
<li><img src="" alt=""><a href="http://www.geelou.com/article/119.html" target="_blank">rjgcs123</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-30811" target="_blank">May 27th 2011 at 17:11</a></p>
<p>云集国内redis大佬的QQ群正在招募各路redis朋友，不管你是正在使用redis，还是在研究redis，或者是对redis感兴趣，你都可以加入到我们的阵营。大家一起讨论redis各类用法，key-value、list、set、map使用，redis优化、内存监控、主从配置等等问题，这里都会有高手给你解决。</p>
<p>注意啦，国内顶尖级别的redisQQ群是 43016055</p>
<ol>
<li><img src="" alt=""><a href="http://simaliu.com/" target="_blank">simonliu</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-34084" target="_blank">Jun 9th 2011 at 11:44</a></p>
<p>访问操作系统的 SWAP 需要 block 进程。实际上自己实现 VM，访问存在磁盘上的冷数据时肯定是要 block 进程的。所以这点理由有点牵强。</p>
<ol>
<li><img src="" alt="">geelou says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-40826" target="_blank">Jul 5th 2011 at 13:11</a></p>
<p>redis java分群 163264749 是java的
Redis PHP分群 163265386 是php的
redis c,c++,c/#分群 163269313 是.net的
redis shell,python群 69287882 是shell,python，prel脚本类的</p>
<ol>
<li><img src="" alt=""><a href="http://kyozhou.com/" target="_blank">kyozhou</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-42886" target="_blank">Jul 11th 2011 at 17:23</a></p>
<p>非常好，尤其是对于redis的性能超过memcached的描述。</p>
<ol>
<li><img src="" alt=""><a href="http://school.renren.it/" target="_blank">fenglibin2010</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-49718" target="_blank">Aug 16th 2011 at 16:26</a></p>
<p>写得非常好，我们也准备使用REDIS，对一些概念又更加清晰</p>
<ol>
<li><img src="" alt="">pally says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-50967" target="_blank">Aug 22nd 2011 at 13:37</a></p>
<p>very good!
happy to see it!</p>
<ol>
<li><img src="" alt=""><a href="http://www.iroowe.com/" target="_blank">Roowe</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-65586" target="_blank">Oct 13th 2011 at 00:04</a></p>
<p>看了评论，我都不怎么敢用了，本身出于用缓存来减少服务器的压力，而不是用NoSQL，这货貌似是NoSQL。。</p>
<ol>
<li><img src="" alt=""><a href="http://www.the5fire.net/" target="_blank">the5fire</a> says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-195693" target="_blank">Jul 30th 2012 at 11:08</a></p>
<p>学习了，刚开始看redis。</p>
<ol>
<li><img src="" alt="">GF says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-198583" target="_blank">Aug 9th 2012 at 13:17</a></p>
<p>MySQL 最新开发版 5.6.6 目前尚未发布，但从官网给出的 CHANGES 文档可得知，该版本将内嵌 memcached 的支持，以后可以用No SQL的方式使用mysql，在数据库中充分利用memcached的优点。缓存和数据的一致性问题不再是个问题。</p>
<ol>
<li><img src="" alt="">Eguo Wang says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-218019" target="_blank">Oct 30th 2012 at 11:43</a></p>
<p>DDDDD!！</p>
<ol>
<li><img src="" alt="">julie says:</li>
</ol>
<p><a href="http://timyang.net/data/redis-misunderstanding/comment-page-1/#comment-221614" target="_blank">Nov 12th 2012 at 15:37</a></p>
<p>大家有没有在广域网中使用过redis？master和slave的同步性能情况怎样，有人知道吗？</p>
<p><a href="http://timyang.net/data/redis-misunderstanding/feed/" target="_blank">RSS feed for comments on this post</a>, <a href="http://timyang.net/data/redis-misunderstanding/trackback/" target="_blank">TrackBack URI</a>
<a href="http://timyang.net/data/redis-misunderstanding/#respond" target="_blank">Cancel Reply</a></p>
<h3 id="leave-a-comment">Leave a Comment</h3>
<p>Name (required)</p>
<p>E-mail (required, never displayed)</p>
<p>URI</p>
<p>Except where otherwise noted, content on this site is licensed under a <a href="http://creativecommons.org/licenses/by/3.0/" target="_blank">Creative Commons Attribution 3.0</a> License</p>

      
    </div>
    
    
      
    
    
        <footer id="post-meta">
        <span class="categories">Posted in<span class="breadcrumb fa fa-folder"><li><a href="/categories/架构师/">架构师</a></li></span></span> | <span class="tags">Tagged <a href="/tags/架构师/" class="label label-primary">架构师</a></span> | <span class="time">recent updated:<time title="2014-03-07 09:54:28"datetime="2014-03-07 09:54:28"> mar. 7 2014</time></span> | <span class="comment-link">
<a href="http://itsolife.com/2014/02/02/2014-02-02-架构师--Redis几个认识误区–Tim后端技术/#comments" class="ds-thread-count comment-link" data-thread-key="2014-02-02-架构师--Redis几个认识误区–Tim后端技术" data-count-type="comments">暂无评论</a></span>
        </footer>
    
    <div class="clearfix"></div>
  </div>
</div>
</article>





<ul id="pagination" class="pagination pagination-lg">
  <li><a class="extend prev" href="/page/148/">&laquo;</a></li><li><a class="page-number" href="/">1</a></li><li><a class="page-number" href="/page/2/">2</a></li><li><span class="space">&hellip;</span></li><li><a class="page-number" href="/page/146/">146</a></li><li><a class="page-number" href="/page/147/">147</a></li><li><a class="page-number" href="/page/148/">148</a></li><li class="active"><li><span class="page-number current">149</span></li><li><a class="page-number" href="/page/150/">150</a></li><li><a class="page-number" href="/page/151/">151</a></li><li><a class="page-number" href="/page/152/">152</a></li><li><span class="space">&hellip;</span></li></li><li><a class="page-number" href="/page/161/">161</a></li><li><a class="page-number" href="/page/162/">162</a></li><li><a class="extend next" href="/page/150/">&raquo;</a></li>
  <div class="clearfix"></div>
</ul></div><!--wapper-->
       </div><!-- ID main-col END -->
       <aside id="sidebar" class="alignright col-sx-6 col-sm-4 col-md-3 col-lg-3">
<div id="widget_search" class="widget panel panel-primary">
    <form action="//google.com/search" method="get" accept-charset="utf-8">
  <div class="input-group">
    <input class="form-control" id="searchbox" type="search" name="q" results="0" placeholder="search">
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">Go!</button>
    </span>
    <input type="hidden" name="q" value="site:itsolife.com">
  </div>
</form>
</div>

<div id="widget_category" class="widget panel panel-primary">
  <div class="panel-heading">category</div>  <div data-src='category' class='ajax_widgets'>正在加载...</div>
</div>

<div id="widget_recent_posts" class="widget panel panel-primary">
  <div class="panel-heading">recent posts</div>  <div data-src='recent_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_tagcloud" class="widget panel panel-primary">
  <div class="panel-heading">tagcloud</div>  <div data-src='tagcloud' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_latest_update_posts" class="widget panel panel-primary">
  <div class="panel-heading">最近更新</div>  <div data-src='latest_update_posts' class='ajax_widgets'>正在加载...</div></div>

<div id="widget_recent_comments" class="widget panel panel-primary">
  <div class="panel-heading">recent comments</div>  

<div class="list-group-item ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="50"></div>



</div>

</aside>
       <div class="clearfix"></div>
     </div><!-- row END -->
  </div>
  <footer id="footer" class="container">
  <div class="panel panel-info">
  <section id='footer_widget'></section>  <div class="panel-footer">
  <div id="site-info">
    <span class='author'>
  
  &copy; 2014 RobinChia
  
    &nbsp;&nbsp;</span>
  
  <span id='analytics-51la'></span><span id='analytics-google'>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-48559895-1']);
  _gaq.push(['_trackPageview']);
  _js2load.push({src:('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'});
</script></span><span id='analytics-cnzz'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5774006'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s17.cnzz.com/stat.php%3Fid%3D5774006%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>
</span><span id='analytics-baidu'>
<script>
var _hmt = _hmt || [];
_js2load.push({src:"//hm.baidu.com/hm.js?1442f50724afc42380b51f097c43082c"});
</script>
</span>  </div>
  <div id="copyright">Site powered by <a href='http://zespia.tw/hexo/'><strong>hexo</strong></a>  update time: <em>2014-04-07 19:25:40</em></span></div>
</div>
<div class="clearfix"></div>


  </div>
  </footer>
  
        <script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>        
        <script src="http://cdn.staticfile.org/twitter-bootstrap/3.1.0/js/bootstrap.min.js"></script>        
                
        <script src="http://cdn.bootcss.com/prettify/r298/prettify.min.js"></script>    <script type="text/javascript">
   var lang=["bsh", "c", "cc", "cpp", "cs", "csh", "cyc", "cv", "htm", "html",
    "java", "js", "m", "mxml", "perl", "pl", "pm", "py", "rb", "sh",
    "xhtml", "xml", "xsl"];
   var pretty_base='';
   $('script').each(function(){
	var c = $(this).attr('src');
	if (!c)
	    return;
	if (c.match(/(\/)?prettify(\.min)?\.js/i))
	{
	    var index = c.lastIndexOf('/');
	    if (index != -1)
		pretty_base = c.substr(0,index + 1);
	    return false;
	}
   })
   $('pre code').each(function(){
	var c = $(this).attr('class')
	if (!c)
	    return;
	c = c.match(/\s?(lang\-\w+)/i);
	if (c && lang.indexOf(c[1]) == -1)
	{
	    lang.push(c[1]);
	    $.getScript(pretty_base + c[1] + '.min.js');
	}
   })

    $(window).load(function(){
       $("pre").addClass("prettyprint");
       prettyPrint();
    })
</script>    
            <script type="text/javascript">
var duoshuoQuery = {short_name:"robinchia"};
_js2load.push({src:'http://static.duoshuo.com/embed.js',charset:'UTF-8'});
</script>
    
            <!--wumii_relatedItems-->
    
        <script src="http://cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>    <script type="text/javascript">
(function($){
  $('.entry').each(function(i){
    $(this).find('img').each(function(){
      var alt = this.alt;

      if (alt){
        $(this).before('<span class="caption">' + alt + '</span>');
      }

      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox" rel="fancybox' + i + '" />');
    });
  });

  $('.fancybox').fancybox();
})(jQuery);
</script>    
        <script src="http://cdn.bootcss.com/mathjax/2.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
    
<script type="text/javascript">
$('.ajax_widgets').each(function(){var src=$(this).attr('data-src');if(src)$(this).load('/widgets/'+src+'.html');});
$.each(_js2load,function(index,obj){loadjs(obj.src,obj.charset)});
</script>

<div id="scroll2top">
<img src="/scroll2top/arrow.png"/>
</div>
<script src="/scroll2top/scroll2top.min.js"></script>
<div id="winterland">
  <canvas></canvas>
</div>
<script src="/js/winterland.min.js"></script>

  </body>
</html>
